<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>v8: src/liveobjectlist.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../v8-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">v8
   &#160;<span id="projectnumber">3.11.10(node0.8.26)</span>
   </div>
   <div id="projectbrief">V8 is Google&#39;s open source JavaScript engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('db/da1/liveobjectlist_8cc_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">liveobjectlist.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../db/da1/liveobjectlist_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2011 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// modification, are permitted provided that the following conditions are</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// met:</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//     * Redistributions in binary form must reproduce the above</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//       copyright notice, this list of conditions and the following</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//       disclaimer in the documentation and/or other materials provided</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//       with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//     * Neither the name of Google Inc. nor the names of its</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//       contributors may be used to endorse or promote products derived</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//       from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#ifdef LIVE_OBJECT_LIST</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;v8.h&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/checks_8h.html">checks.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d6c/global-handles_8h.html">global-handles.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/ddb/heap_8h.html">heap.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d77/inspector_8h.html">inspector.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d1e/isolate_8h.html">isolate.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/dcb/list-inl_8h.html">list-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d44/liveobjectlist-inl_8h.html">liveobjectlist-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc4/string-stream_8h.html">string-stream.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dd3/v8utils_8h.html">v8utils.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/dfe/v8conversions_8h.html">v8conversions.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">namespace </span>v8 {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">namespace </span>internal {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">typedef</span> int (*RawComparer)(<span class="keyword">const</span> <span class="keywordtype">void</span>*, <span class="keyword">const</span> <span class="keywordtype">void</span>*);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#ifdef CHECK_ALL_OBJECT_TYPES</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#define DEBUG_LIVE_OBJECT_TYPES(v) \</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">  v(Smi, &quot;unexpected: Smi&quot;) \</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">  \</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">  v(CodeCache, &quot;unexpected: CodeCache&quot;) \</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">  v(BreakPointInfo, &quot;unexpected: BreakPointInfo&quot;) \</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">  v(DebugInfo, &quot;unexpected: DebugInfo&quot;) \</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">  v(TypeSwitchInfo, &quot;unexpected: TypeSwitchInfo&quot;) \</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">  v(SignatureInfo, &quot;unexpected: SignatureInfo&quot;) \</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">  v(Script, &quot;unexpected: Script&quot;) \</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">  v(ObjectTemplateInfo, &quot;unexpected: ObjectTemplateInfo&quot;) \</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">  v(FunctionTemplateInfo, &quot;unexpected: FunctionTemplateInfo&quot;) \</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">  v(CallHandlerInfo, &quot;unexpected: CallHandlerInfo&quot;) \</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">  v(InterceptorInfo, &quot;unexpected: InterceptorInfo&quot;) \</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">  v(AccessCheckInfo, &quot;unexpected: AccessCheckInfo&quot;) \</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">  v(AccessorInfo, &quot;unexpected: AccessorInfo&quot;) \</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">  v(ExternalTwoByteString, &quot;unexpected: ExternalTwoByteString&quot;) \</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">  v(ExternalAsciiString, &quot;unexpected: ExternalAsciiString&quot;) \</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">  v(ExternalString, &quot;unexpected: ExternalString&quot;) \</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">  v(SeqTwoByteString, &quot;unexpected: SeqTwoByteString&quot;) \</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">  v(SeqAsciiString, &quot;unexpected: SeqAsciiString&quot;) \</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">  v(SeqString, &quot;unexpected: SeqString&quot;) \</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">  v(JSFunctionResultCache, &quot;unexpected: JSFunctionResultCache&quot;) \</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">  v(GlobalContext, &quot;unexpected: GlobalContext&quot;) \</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">  v(MapCache, &quot;unexpected: MapCache&quot;) \</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">  v(CodeCacheHashTable, &quot;unexpected: CodeCacheHashTable&quot;) \</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">  v(CompilationCacheTable, &quot;unexpected: CompilationCacheTable&quot;) \</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">  v(SymbolTable, &quot;unexpected: SymbolTable&quot;) \</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">  v(Dictionary, &quot;unexpected: Dictionary&quot;) \</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">  v(HashTable, &quot;unexpected: HashTable&quot;) \</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">  v(DescriptorArray, &quot;unexpected: DescriptorArray&quot;) \</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">  v(ExternalFloatArray, &quot;unexpected: ExternalFloatArray&quot;) \</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">  v(ExternalUnsignedIntArray, &quot;unexpected: ExternalUnsignedIntArray&quot;) \</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">  v(ExternalIntArray, &quot;unexpected: ExternalIntArray&quot;) \</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">  v(ExternalUnsignedShortArray, &quot;unexpected: ExternalUnsignedShortArray&quot;) \</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">  v(ExternalShortArray, &quot;unexpected: ExternalShortArray&quot;) \</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">  v(ExternalUnsignedByteArray, &quot;unexpected: ExternalUnsignedByteArray&quot;) \</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">  v(ExternalByteArray, &quot;unexpected: ExternalByteArray&quot;) \</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">  v(JSValue, &quot;unexpected: JSValue&quot;)</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#define DEBUG_LIVE_OBJECT_TYPES(v)</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#define FOR_EACH_LIVE_OBJECT_TYPE(v) \</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">  DEBUG_LIVE_OBJECT_TYPES(v) \</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">  \</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">  v(JSArray, &quot;JSArray&quot;) \</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">  v(JSRegExp, &quot;JSRegExp&quot;) \</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">  v(JSFunction, &quot;JSFunction&quot;) \</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">  v(JSGlobalObject, &quot;JSGlobal&quot;) \</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">  v(JSBuiltinsObject, &quot;JSBuiltins&quot;) \</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">  v(GlobalObject, &quot;Global&quot;) \</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">  v(JSGlobalProxy, &quot;JSGlobalProxy&quot;) \</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">  v(JSObject, &quot;JSObject&quot;) \</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">  \</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">  v(Context, &quot;meta: Context&quot;) \</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">  v(ByteArray, &quot;meta: ByteArray&quot;) \</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">  v(ExternalPixelArray, &quot;meta: PixelArray&quot;) \</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">  v(ExternalArray, &quot;meta: ExternalArray&quot;) \</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">  v(FixedArray, &quot;meta: FixedArray&quot;) \</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">  v(String, &quot;String&quot;) \</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">  v(HeapNumber, &quot;HeapNumber&quot;) \</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">  \</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">  v(Code, &quot;meta: Code&quot;) \</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">  v(Map, &quot;meta: Map&quot;) \</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">  v(Oddball, &quot;Oddball&quot;) \</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">  v(Foreign, &quot;meta: Foreign&quot;) \</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">  v(SharedFunctionInfo, &quot;meta: SharedFunctionInfo&quot;) \</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">  v(Struct, &quot;meta: Struct&quot;) \</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">  \</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">  v(HeapObject, &quot;HeapObject&quot;)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">enum</span> <span class="comment">/* LiveObjectType */</span> {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#define DECLARE_OBJECT_TYPE_ENUM(type, name) kType##type,</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  FOR_EACH_LIVE_OBJECT_TYPE(DECLARE_OBJECT_TYPE_ENUM)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  kInvalidLiveObjType,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  kNumberOfTypes</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#undef DECLARE_OBJECT_TYPE_ENUM</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;};</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;LiveObjectType GetObjectType(HeapObject* heap_obj) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// TODO(mlam): investigate usint Map::instance_type() instead.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#define CHECK_FOR_OBJECT_TYPE(type, name) \</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">  if (heap_obj-&gt;Is##type()) return kType##type;</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  FOR_EACH_LIVE_OBJECT_TYPE(CHECK_FOR_OBJECT_TYPE)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#undef CHECK_FOR_OBJECT_TYPE</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">return</span> kInvalidLiveObjType;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* GetObjectTypeDesc(LiveObjectType <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fcbc71074e08d986e702a8f55bbb43e">name</a>[kNumberOfTypes] = {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">  #define DEFINE_OBJECT_TYPE_NAME(type, name) name,</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    FOR_EACH_LIVE_OBJECT_TYPE(DEFINE_OBJECT_TYPE_NAME)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="stringliteral">&quot;invalid&quot;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">  #undef DEFINE_OBJECT_TYPE_NAME</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  };</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(type &lt; kNumberOfTypes);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">return</span> name[<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* GetObjectTypeDesc(HeapObject* heap_obj) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  LiveObjectType <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a> = GetObjectType(heap_obj);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">return</span> GetObjectTypeDesc(type);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keywordtype">bool</span> IsOfType(LiveObjectType <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>, HeapObject* obj) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// Note: there are types that are more general (e.g. JSObject) that would</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// have passed the Is##type_() test for more specialized types (e.g.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// JSFunction).  If we find a more specialized match but we&#39;re looking for</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// the general type, then we should reject the ones that matches the</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// specialized type.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#define CHECK_OBJECT_TYPE(type_, name) \</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">  if (obj-&gt;Is##type_()) return (type == kType##type_);</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  FOR_EACH_LIVE_OBJECT_TYPE(CHECK_OBJECT_TYPE)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#undef CHECK_OBJECT_TYPE</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keyword">const</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7">AllocationSpace</a> kInvalidSpace = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7">AllocationSpace</a><span class="keyword">&gt;</span>(-1);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7">AllocationSpace</a> FindSpaceFor(String* space_str) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  SmartArrayPointer&lt;char&gt; s =</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      space_str-&gt;ToCString(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abf098e0989e0298c7bf9428feda63f8eac24e2d0f296a8889ff73ff396161c910">DISALLOW_NULLS</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a24e1a8639b289696f776572551ef72e8a77d1efe50b803c100253d657e7e70892">ROBUST_STRING_TRAVERSAL</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* key_str = *s;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">switch</span> (key_str[0]) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">if</span> (strcmp(key_str, <span class="stringliteral">&quot;cell&quot;</span>) == 0) <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a1ce18484faed5e760ebd7f68a97cee08">CELL_SPACE</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">if</span> (strcmp(key_str, <span class="stringliteral">&quot;code&quot;</span>) == 0) <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a71eae99f94708f14a222464c516ee645">CODE_SPACE</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">if</span> (strcmp(key_str, <span class="stringliteral">&quot;lo&quot;</span>) == 0) <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7ac0e2df4a07dfb2b8f30ab86c5bc4561e">LO_SPACE</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">if</span> (strcmp(key_str, <span class="stringliteral">&quot;map&quot;</span>) == 0) <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a7662099826d64f2e3a55f97e48a147df">MAP_SPACE</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (strcmp(key_str, <span class="stringliteral">&quot;new&quot;</span>) == 0) <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">NEW_SPACE</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>:</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">if</span> (strcmp(key_str, <span class="stringliteral">&quot;old-pointer&quot;</span>) == 0) <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a77b688dbcc901242e5a4169c2580d836">OLD_POINTER_SPACE</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">if</span> (strcmp(key_str, <span class="stringliteral">&quot;old-data&quot;</span>) == 0) <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a801401fbd4894dd3bf8163a4403b9fe7">OLD_DATA_SPACE</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">return</span> kInvalidSpace;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> InSpace(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7">AllocationSpace</a> space, HeapObject* heap_obj) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  Heap* heap = <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;heap();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">if</span> (space != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7ac0e2df4a07dfb2b8f30ab86c5bc4561e">LO_SPACE</a>) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">return</span> heap-&gt;InSpace(heap_obj, space);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// This is an optimization to speed up the check for an object in the LO</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// space by exclusion because we know that all object pointers passed in</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// here are guaranteed to be in the heap.  Hence, it is safe to infer</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// using an exclusion test.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// Note: calling Heap::InSpace(heap_obj, LO_SPACE) is too slow for our</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// filters.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordtype">int</span> first_space = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a009d1726309ffd4267223e1e62225f19">FIRST_SPACE</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordtype">int</span> last_space = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7ac0e2df4a07dfb2b8f30ab86c5bc4561e">LO_SPACE</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#adb5160267e5d43b44aff76bf463b8cff">sp</a> = first_space; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#adb5160267e5d43b44aff76bf463b8cff">sp</a> &lt; last_space; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#adb5160267e5d43b44aff76bf463b8cff">sp</a>++) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (heap-&gt;InSpace(heap_obj, static_cast&lt;AllocationSpace&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#adb5160267e5d43b44aff76bf463b8cff">sp</a>))) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#afaada219ababb63f4a43da387a881b83">SLOW_ASSERT</a>(heap-&gt;InSpace(heap_obj, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7ac0e2df4a07dfb2b8f30ab86c5bc4561e">LO_SPACE</a>));</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="keyword">static</span> LiveObjectType FindTypeFor(String* type_str) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  SmartArrayPointer&lt;char&gt; s =</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      type_str-&gt;ToCString(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abf098e0989e0298c7bf9428feda63f8eac24e2d0f296a8889ff73ff396161c910">DISALLOW_NULLS</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a24e1a8639b289696f776572551ef72e8a77d1efe50b803c100253d657e7e70892">ROBUST_STRING_TRAVERSAL</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#define CHECK_OBJECT_TYPE(type_, name) { \</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">    const char* type_desc = GetObjectTypeDesc(kType##type_); \</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">    const char* key_str = *s; \</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">    if (strstr(type_desc, key_str) != NULL) return kType##type_; \</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">  }</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  FOR_EACH_LIVE_OBJECT_TYPE(CHECK_OBJECT_TYPE)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">#undef CHECK_OBJECT_TYPE</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">return</span> kInvalidLiveObjType;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="keyword">class </span>LolFilter {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keyword">explicit</span> LolFilter(Handle&lt;JSObject&gt; filter_obj);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> is_active()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> is_active_; }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> Matches(HeapObject* obj) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> !is_active() || MatchesSlow(obj);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">void</span> InitTypeFilter(Handle&lt;JSObject&gt; filter_obj);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordtype">void</span> InitSpaceFilter(Handle&lt;JSObject&gt; filter_obj);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">void</span> InitPropertyFilter(Handle&lt;JSObject&gt; filter_obj);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordtype">bool</span> MatchesSlow(HeapObject* obj);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">bool</span> is_active_;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  LiveObjectType <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a255e23fe4a4a6ac883a419cf9e178b7a">type_</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7">AllocationSpace</a> space_;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  Handle&lt;String&gt; prop_;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;};</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;LolFilter::LolFilter(Handle&lt;JSObject&gt; filter_obj)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    : is_active_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a877da585f7669eb7d4ba888938317230">false</a>),</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a255e23fe4a4a6ac883a419cf9e178b7a">type_</a>(kInvalidLiveObjType),</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      space_(kInvalidSpace),</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      prop_() {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">if</span> (filter_obj.is_null()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  InitTypeFilter(filter_obj);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  InitSpaceFilter(filter_obj);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  InitPropertyFilter(filter_obj);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keywordtype">void</span> LolFilter::InitTypeFilter(Handle&lt;JSObject&gt; filter_obj) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  Handle&lt;String&gt; type_sym = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;type&quot;</span>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  MaybeObject* maybe_result = filter_obj-&gt;GetProperty(*type_sym);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* type_obj;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;ToObject(&amp;type_obj)) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (type_obj-&gt;IsString()) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      String* type_str = <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a6391d7952fe2756ac824043f9d2f1122">String::cast</a>(type_obj);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a255e23fe4a4a6ac883a419cf9e178b7a">type_</a> = FindTypeFor(type_str);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a255e23fe4a4a6ac883a419cf9e178b7a">type_</a> != kInvalidLiveObjType) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        is_active_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="keywordtype">void</span> LolFilter::InitSpaceFilter(Handle&lt;JSObject&gt; filter_obj) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  Handle&lt;String&gt; space_sym = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;space&quot;</span>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  MaybeObject* maybe_result = filter_obj-&gt;GetProperty(*space_sym);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* space_obj;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;ToObject(&amp;space_obj)) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (space_obj-&gt;IsString()) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      String* space_str = <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a6391d7952fe2756ac824043f9d2f1122">String::cast</a>(space_obj);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      space_ = FindSpaceFor(space_str);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">if</span> (space_ != kInvalidSpace) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        is_active_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="keywordtype">void</span> LolFilter::InitPropertyFilter(Handle&lt;JSObject&gt; filter_obj) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  Handle&lt;String&gt; prop_sym = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;prop&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  MaybeObject* maybe_result = filter_obj-&gt;GetProperty(*prop_sym);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* prop_obj;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;ToObject(&amp;prop_obj)) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> (prop_obj-&gt;IsString()) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      prop_ = Handle&lt;String&gt;(<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a6391d7952fe2756ac824043f9d2f1122">String::cast</a>(prop_obj));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      is_active_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keywordtype">bool</span> LolFilter::MatchesSlow(HeapObject* obj) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a255e23fe4a4a6ac883a419cf9e178b7a">type_</a> != kInvalidLiveObjType) &amp;&amp; !IsOfType(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a255e23fe4a4a6ac883a419cf9e178b7a">type_</a>, obj)) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Fail because obj is not of the type of interest.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> ((space_ != kInvalidSpace) &amp;&amp; !InSpace(space_, obj)) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Fail because obj is not in the space of interest.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">if</span> (!prop_.is_null() &amp;&amp; obj-&gt;IsJSObject()) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    LookupResult result;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    obj-&gt;Lookup(*prop_, &amp;result);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">if</span> (!result.IsProperty()) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Fail because obj does not have the property of interest.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="keyword">class </span>LolIterator {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  LolIterator(LiveObjectList* older, LiveObjectList* newer)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      : older_(older),</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        newer_(newer),</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        curr_(0),</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        elements_(0),</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        count_(0),</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        index_(0) { }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> Init() {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    SetCurrent(newer_);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// If the elements_ list is empty, then move on to the next list as long</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// as we&#39;re not at the last list (indicated by done()).</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">while</span> ((elements_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) &amp;&amp; !Done()) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      SetCurrent(curr_-&gt;prev_);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> Done()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> (curr_ == older_);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// Object level iteration.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> Next() {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    index_++;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (index_ &gt;= count_) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="comment">// Iterate backwards until we get to the oldest list.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">while</span> (!Done()) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        SetCurrent(curr_-&gt;prev_);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment">// If we have elements to process, we&#39;re good to go.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> (elements_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">// Else, we should advance to the next older list.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">int</span> Id()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">return</span> elements_[index_].id_;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keyword">inline</span> HeapObject* Obj()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> elements_[index_].obj_;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">int</span> LolObjCount()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (curr_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) <span class="keywordflow">return</span> curr_-&gt;obj_count_;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> SetCurrent(LiveObjectList* new_curr) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    curr_ = new_curr;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (curr_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      elements_ = curr_-&gt;elements_;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      count_ = curr_-&gt;obj_count_;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      index_ = 0;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  LiveObjectList* older_;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  LiveObjectList* newer_;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  LiveObjectList* curr_;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  LiveObjectList::Element* elements_;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordtype">int</span> count_;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordtype">int</span> index_;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;};</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="keyword">class </span>LolForwardIterator : <span class="keyword">public</span> LolIterator {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  LolForwardIterator(LiveObjectList* first, LiveObjectList* last)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      : LolIterator(first, last) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> Init() {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    SetCurrent(older_);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// If the elements_ list is empty, then move on to the next list as long</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// as we&#39;re not at the last list (indicated by Done()).</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">while</span> ((elements_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) &amp;&amp; !Done()) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      SetCurrent(curr_-&gt;next_);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> Done()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">return</span> (curr_ == newer_);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// Object level iteration.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> Next() {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    index_++;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">if</span> (index_ &gt;= count_) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="comment">// Done with current list.  Move on to the next.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">while</span> (!Done()) {  <span class="comment">// If not at the last list already, ...</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        SetCurrent(curr_-&gt;next_);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="comment">// If we have elements to process, we&#39;re good to go.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span> (elements_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">// Else, we should advance to the next list.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;};</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">// Minimizes the white space in a string.  Tabs and newlines are replaced</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">// with a space where appropriate.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> CompactString(<span class="keywordtype">char</span>* str) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordtype">char</span>* src = str;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordtype">char</span>* dst = str;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordtype">char</span> prev_ch = 0;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">while</span> (*dst != <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordtype">char</span> ch = *src++;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// We will treat non-ASCII chars as &#39;?&#39;.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">if</span> ((ch &amp; 0x80) != 0) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      ch = <span class="charliteral">&#39;?&#39;</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// Compact contiguous whitespace chars into a single &#39; &#39;.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (isspace(ch)) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">if</span> (prev_ch != <span class="charliteral">&#39; &#39;</span>) *dst++ = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      prev_ch = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    *dst++ = ch;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    prev_ch = ch;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">return</span> (dst - str);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">// Generates a custom description based on the specific type of</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">// object we&#39;re looking at.  We only generate specialized</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">// descriptions where we can.  In all other cases, we emit the</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">// generic info.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> GenerateObjectDesc(HeapObject* obj,</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                               <span class="keywordtype">char</span>* buffer,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                               <span class="keywordtype">int</span> buffer_size) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  Vector&lt;char&gt; buffer_v(buffer, buffer_size);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(obj != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keywordflow">if</span> (obj-&gt;IsJSArray()) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    JSArray* jsarray = <a class="code" href="../../da/dc0/classv8_1_1internal_1_1_j_s_array.html#a653d23f3b2d6de49fd47ce9b4418770c">JSArray::cast</a>(obj);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordtype">double</span> length = jsarray-&gt;length()-&gt;Number();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">OS::SNPrintF</a>(buffer_v,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                 <span class="stringliteral">&quot;%p &lt;%s&gt; len %g&quot;</span>,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                 reinterpret_cast&lt;void*&gt;(obj),</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                 GetObjectTypeDesc(obj),</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                 length);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj-&gt;IsString()) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    String* str = <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a6391d7952fe2756ac824043f9d2f1122">String::cast</a>(obj);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Only grab up to 160 chars in case they are double byte.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// We&#39;ll only dump 80 of them after we compact them.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxCharToDump = 80;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxBufferSize = kMaxCharToDump * 2;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    SmartArrayPointer&lt;char&gt; str_sp = str-&gt;ToCString(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abf098e0989e0298c7bf9428feda63f8eac24e2d0f296a8889ff73ff396161c910">DISALLOW_NULLS</a>,</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a24e1a8639b289696f776572551ef72e8a77d1efe50b803c100253d657e7e70892">ROBUST_STRING_TRAVERSAL</a>,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                                    0,</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                                    kMaxBufferSize);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordtype">char</span>* str_cstr = *str_sp;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">int</span> length = CompactString(str_cstr);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">OS::SNPrintF</a>(buffer_v,</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                 <span class="stringliteral">&quot;%p &lt;%s&gt; &#39;%.80s%s&#39;&quot;</span>,</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                 reinterpret_cast&lt;void*&gt;(obj),</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                 GetObjectTypeDesc(obj),</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                 str_cstr,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                 (length &gt; kMaxCharToDump) ? <span class="stringliteral">&quot;...&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj-&gt;IsJSFunction() || obj-&gt;IsSharedFunctionInfo()) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    SharedFunctionInfo* sinfo;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (obj-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      JSFunction* func = <a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(obj);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      sinfo = func-&gt;shared();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      sinfo = <a class="code" href="../../db/dc5/classv8_1_1internal_1_1_shared_function_info.html#acf9b9f7e9418e47ef67bb1e9aacb3bb7">SharedFunctionInfo::cast</a>(obj);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    String* <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fcbc71074e08d986e702a8f55bbb43e">name</a> = sinfo-&gt;DebugName();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    SmartArrayPointer&lt;char&gt; name_sp =</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        name-&gt;ToCString(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abf098e0989e0298c7bf9428feda63f8eac24e2d0f296a8889ff73ff396161c910">DISALLOW_NULLS</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a24e1a8639b289696f776572551ef72e8a77d1efe50b803c100253d657e7e70892">ROBUST_STRING_TRAVERSAL</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordtype">char</span>* name_cstr = *name_sp;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    HeapStringAllocator string_allocator;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    StringStream stream(&amp;string_allocator);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    sinfo-&gt;SourceCodePrint(&amp;stream, 50);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    SmartArrayPointer&lt;const char&gt; source_sp = stream.ToCString();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* source_cstr = *source_sp;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">OS::SNPrintF</a>(buffer_v,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                 <span class="stringliteral">&quot;%p &lt;%s&gt; &#39;%s&#39; %s&quot;</span>,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                 reinterpret_cast&lt;void*&gt;(obj),</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                 GetObjectTypeDesc(obj),</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                 name_cstr,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                 source_cstr);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj-&gt;IsFixedArray()) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    FixedArray* fixed = <a class="code" href="../../dc/d95/classv8_1_1internal_1_1_fixed_array.html#ab72b1bdfe3d9d45e6b5a01348e6691eb">FixedArray::cast</a>(obj);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">OS::SNPrintF</a>(buffer_v,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                 <span class="stringliteral">&quot;%p &lt;%s&gt; len %d&quot;</span>,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                 reinterpret_cast&lt;void*&gt;(obj),</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                 GetObjectTypeDesc(obj),</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                 fixed-&gt;length());</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">OS::SNPrintF</a>(buffer_v,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                 <span class="stringliteral">&quot;%p &lt;%s&gt;&quot;</span>,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                 reinterpret_cast&lt;void*&gt;(obj),</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                 GetObjectTypeDesc(obj));</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">// Utility function for filling in a line of detail in a verbose dump.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> AddObjDetail(Handle&lt;FixedArray&gt; arr,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                         <span class="keywordtype">int</span> index,</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                         <span class="keywordtype">int</span> obj_id,</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                         Handle&lt;HeapObject&gt; target,</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span>* desc_str,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                         Handle&lt;String&gt; id_sym,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                         Handle&lt;String&gt; desc_sym,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                         Handle&lt;String&gt; size_sym,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                         Handle&lt;JSObject&gt; detail,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                         Handle&lt;String&gt; desc,</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                         Handle&lt;Object&gt; error) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  detail = factory-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">if</span> (detail-&gt;IsFailure()) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    error = detail;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordtype">int</span> size = 0;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordtype">char</span> buffer[512];</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">if</span> (desc_str == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!target.is_null());</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    HeapObject* obj = *target;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    GenerateObjectDesc(obj, buffer, <span class="keyword">sizeof</span>(buffer));</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    desc_str = buffer;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    size = obj-&gt;Size();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  desc = factory-&gt;NewStringFromAscii(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(desc_str));</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (desc-&gt;IsFailure()) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    error = desc;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  { MaybeObject* maybe_result = detail-&gt;SetProperty(*id_sym,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                                    <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(obj_id),</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                                                    <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  { MaybeObject* maybe_result = detail-&gt;SetProperty(*desc_sym,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                                    *desc,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                                    <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  { MaybeObject* maybe_result = detail-&gt;SetProperty(*size_sym,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                                    <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(size),</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                                    <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  arr-&gt;set(index, *detail);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="keyword">class </span>DumpWriter {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keyword">virtual</span> ~DumpWriter() {}</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> ComputeTotalCountAndSize(LolFilter* filter,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                                        <span class="keywordtype">int</span>* count,</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                                        <span class="keywordtype">int</span>* size) = 0;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> Write(Handle&lt;FixedArray&gt; elements_arr,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                     <span class="keywordtype">int</span> start,</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                     <span class="keywordtype">int</span> dump_limit,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                     LolFilter* filter,</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                     Handle&lt;Object&gt; error) = 0;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;};</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="keyword">class </span>LolDumpWriter: <span class="keyword">public</span> DumpWriter {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  LolDumpWriter(LiveObjectList* older, LiveObjectList* newer)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      : older_(older), newer_(newer) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordtype">void</span> ComputeTotalCountAndSize(LolFilter* filter, <span class="keywordtype">int</span>* count, <span class="keywordtype">int</span>* size) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    *count = 0;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    *size = 0;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    LolIterator it(older_, newer_);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">for</span> (it.Init(); !it.Done(); it.Next()) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      HeapObject* heap_obj = it.Obj();</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">if</span> (!filter-&gt;Matches(heap_obj)) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      *size += heap_obj-&gt;Size();</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      (*count)++;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordtype">bool</span> Write(Handle&lt;FixedArray&gt; elements_arr,</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;             <span class="keywordtype">int</span> start,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;             <span class="keywordtype">int</span> dump_limit,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;             LolFilter* filter,</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;             Handle&lt;Object&gt; error) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// The lols are listed in latest to earliest.  We want to dump from</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// earliest to latest.  So, compute the last element to start with.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordtype">int</span> index = 0;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// Prefetch some needed symbols.</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    Handle&lt;String&gt; id_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;id&quot;</span>);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    Handle&lt;String&gt; desc_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;desc&quot;</span>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    Handle&lt;String&gt; size_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;size&quot;</span>);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// Fill the array with the lol object details.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    Handle&lt;JSObject&gt; detail;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    Handle&lt;String&gt; desc;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    Handle&lt;HeapObject&gt; target;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    LiveObjectList* first_lol = (older_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) ?</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                                older_-&gt;next_ : LiveObjectList::first_;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    LiveObjectList* last_lol = (newer_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) ? newer_-&gt;next_ : <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    LolForwardIterator it(first_lol, last_lol);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">for</span> (it.Init(); !it.Done() &amp;&amp; (index &lt; dump_limit); it.Next()) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      HeapObject* heap_obj = it.Obj();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="comment">// Skip objects that have been filtered out.</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">if</span> (!filter-&gt;Matches(heap_obj)) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="comment">// Only report objects that are in the section of interest.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">if</span> (count &gt;= start) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        target = Handle&lt;HeapObject&gt;(heap_obj);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordtype">bool</span> success = AddObjDetail(elements_arr,</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                    index++,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                    it.Id(),</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                    target,</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>,</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                                    id_sym,</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                    desc_sym,</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                    size_sym,</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                    detail,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                                    desc,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                    error);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">if</span> (!success) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      count++;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  LiveObjectList* older_;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  LiveObjectList* newer_;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;};</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="keyword">class </span>RetainersDumpWriter: <span class="keyword">public</span> DumpWriter {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  RetainersDumpWriter(Handle&lt;HeapObject&gt; target,</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                      Handle&lt;JSObject&gt; instance_filter,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                      Handle&lt;JSFunction&gt; args_function)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      : target_(target),</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        instance_filter_(instance_filter),</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        args_function_(args_function) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordtype">void</span> ComputeTotalCountAndSize(LolFilter* filter, <span class="keywordtype">int</span>* count, <span class="keywordtype">int</span>* size) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    Handle&lt;FixedArray&gt; retainers_arr;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    Handle&lt;Object&gt; error;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    *size = -1;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    LiveObjectList::GetRetainers(target_,</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                 instance_filter_,</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                                 retainers_arr,</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                                 0,</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                                 <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">Smi::kMaxValue</a>,</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                                 count,</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                                 filter,</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>,</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                                 *args_function_,</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                                 error);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordtype">bool</span> Write(Handle&lt;FixedArray&gt; elements_arr,</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;             <span class="keywordtype">int</span> start,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;             <span class="keywordtype">int</span> dump_limit,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;             LolFilter* filter,</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;             Handle&lt;Object&gt; error) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordtype">int</span> dummy;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordtype">int</span> count;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">// Fill the retainer objects.</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    count = LiveObjectList::GetRetainers(target_,</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                                         instance_filter_,</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                                         elements_arr,</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                                         start,</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                                         dump_limit,</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                                         &amp;dummy,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                         filter,</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>,</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                                         *args_function_,</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                                         error);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">if</span> (count &lt; 0) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  Handle&lt;HeapObject&gt; target_;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  Handle&lt;JSObject&gt; instance_filter_;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  Handle&lt;JSFunction&gt; args_function_;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;};</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="keyword">class </span>LiveObjectSummary {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keyword">explicit</span> LiveObjectSummary(LolFilter* filter)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      : total_count_(0),</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        total_size_(0),</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        found_root_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a877da585f7669eb7d4ba888938317230">false</a>),</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        found_weak_root_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a877da585f7669eb7d4ba888938317230">false</a>),</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        filter_(filter) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    memset(counts_, 0, <span class="keyword">sizeof</span>(counts_[0]) * kNumberOfEntries);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    memset(sizes_, 0, <span class="keyword">sizeof</span>(sizes_[0]) * kNumberOfEntries);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keywordtype">void</span> Add(HeapObject* heap_obj) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordtype">int</span> size = heap_obj-&gt;Size();</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    LiveObjectType type = GetObjectType(heap_obj);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(type != kInvalidLiveObjType);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    counts_[<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>]++;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    sizes_[<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>] += size;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    total_count_++;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    total_size_ += size;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordtype">void</span> set_found_root() { found_root_ = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordtype">void</span> set_found_weak_root() { found_weak_root_ = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">int</span> Count(LiveObjectType type) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">return</span> counts_[<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>];</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">int</span> Size(LiveObjectType type) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">return</span> sizes_[<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>];</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">int</span> total_count() {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> total_count_;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">int</span> total_size() {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">return</span> total_size_;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> found_root() {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">return</span> found_root_;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> found_weak_root() {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">return</span> found_weak_root_;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordtype">int</span> GetNumberOfEntries() {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordtype">int</span> entries = 0;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kNumberOfEntries; i++) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="keywordflow">if</span> (counts_[i]) entries++;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">return</span> entries;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keyword">inline</span> LolFilter* filter() { <span class="keywordflow">return</span> filter_; }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNumberOfEntries = kNumberOfTypes;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordtype">int</span> counts_[kNumberOfEntries];</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordtype">int</span> sizes_[kNumberOfEntries];</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordtype">int</span> total_count_;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordtype">int</span> total_size_;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordtype">bool</span> found_root_;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordtype">bool</span> found_weak_root_;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  LolFilter* filter_;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;};</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">// Abstraction for a summary writer.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="keyword">class </span>SummaryWriter {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keyword">virtual</span> ~SummaryWriter() {}</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> Write(LiveObjectSummary* summary) = 0;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;};</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">// A summary writer for filling in a summary of lol lists and diffs.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="keyword">class </span>LolSummaryWriter: <span class="keyword">public</span> SummaryWriter {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  LolSummaryWriter(LiveObjectList* older_lol,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                   LiveObjectList* newer_lol)</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      : older_(older_lol), newer_(newer_lol) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordtype">void</span> Write(LiveObjectSummary* summary) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    LolFilter* filter = summary-&gt;filter();</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">// Fill the summary with the lol object details.</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    LolIterator it(older_, newer_);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">for</span> (it.Init(); !it.Done(); it.Next()) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      HeapObject* heap_obj = it.Obj();</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">if</span> (!filter-&gt;Matches(heap_obj)) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      summary-&gt;Add(heap_obj);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  LiveObjectList* older_;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  LiveObjectList* newer_;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;};</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">// A summary writer for filling in a retainers list.</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="keyword">class </span>RetainersSummaryWriter: <span class="keyword">public</span> SummaryWriter {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  RetainersSummaryWriter(Handle&lt;HeapObject&gt; target,</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                         Handle&lt;JSObject&gt; instance_filter,</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                         Handle&lt;JSFunction&gt; args_function)</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      : target_(target),</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        instance_filter_(instance_filter),</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        args_function_(args_function) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  }</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordtype">void</span> Write(LiveObjectSummary* summary) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    Handle&lt;FixedArray&gt; retainers_arr;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    Handle&lt;Object&gt; error;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordtype">int</span> dummy_total_count;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    LiveObjectList::GetRetainers(target_,</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                                 instance_filter_,</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                                 retainers_arr,</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                                 0,</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                                 <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">Smi::kMaxValue</a>,</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                                 &amp;dummy_total_count,</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                                 summary-&gt;filter(),</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                                 summary,</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                                 *args_function_,</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                 error);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  Handle&lt;HeapObject&gt; target_;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  Handle&lt;JSObject&gt; instance_filter_;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  Handle&lt;JSFunction&gt; args_function_;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;};</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;uint32_t LiveObjectList::next_element_id_ = 1;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="keywordtype">int</span> LiveObjectList::list_count_ = 0;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="keywordtype">int</span> LiveObjectList::last_id_ = 0;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;LiveObjectList* LiveObjectList::first_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;LiveObjectList* LiveObjectList::last_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;LiveObjectList::LiveObjectList(LiveObjectList* prev, <span class="keywordtype">int</span> capacity)</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    : prev_(prev),</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      next_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>),</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      capacity_(capacity),</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      obj_count_(0) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  elements_ = NewArray&lt;Element&gt;(capacity);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  id_ = ++last_id_;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  list_count_++;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;}</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;LiveObjectList::~LiveObjectList() {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  DeleteArray&lt;Element&gt;(elements_);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keyword">delete</span> prev_;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="keywordtype">int</span> LiveObjectList::GetTotalObjCountAndSize(<span class="keywordtype">int</span>* size_p) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keywordtype">int</span> size = 0;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  LiveObjectList* lol = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="comment">// Only compute total size if requested i.e. when size_p is not null.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span> (size_p != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      Element* elements = lol-&gt;elements_;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; lol-&gt;obj_count_; i++) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        HeapObject* heap_obj = elements[i].obj_;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        size += heap_obj-&gt;Size();</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    count += lol-&gt;obj_count_;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  } <span class="keywordflow">while</span> (lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keywordflow">if</span> (size_p != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    *size_p = size;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">// Adds an object to the lol.</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">// Returns true if successful, else returns false.</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keywordtype">bool</span> LiveObjectList::Add(HeapObject* obj) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">// If the object is already accounted for in the prev list which we inherit</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// from, then no need to add it to this list.</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">if</span> ((prev() != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) &amp;&amp; (prev()-&gt;Find(obj) != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>)) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(obj_count_ &lt;= capacity_);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordflow">if</span> (obj_count_ == capacity_) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="comment">// The heap must have grown and we have more objects than capacity to store</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">// them.</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Fail this addition.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  Element&amp; element = elements_[obj_count_++];</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  element.id_ = next_element_id_++;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  element.obj_ = obj;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;}</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">// Comparator used for sorting and searching the lol.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="keywordtype">int</span> LiveObjectList::CompareElement(<span class="keyword">const</span> Element* a, <span class="keyword">const</span> Element* b) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keyword">const</span> HeapObject* obj1 = a-&gt;obj_;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="keyword">const</span> HeapObject* obj2 = b-&gt;obj_;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// For lol elements, it doesn&#39;t matter which comes first if 2 elements point</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// to the same object (which gets culled later).  Hence, we only care about</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="comment">// the the greater than / less than relationships.</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">return</span> (obj1 &gt; obj2) ? 1 : (obj1 == obj2) ? 0 : -1;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">// Looks for the specified object in the lol, and returns its element if found.</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;LiveObjectList::Element* LiveObjectList::Find(HeapObject* obj) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  LiveObjectList* lol = <span class="keyword">this</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  Element key;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  Element* result = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  key.obj_ = obj;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// Iterate through the chain of lol&#39;s to look for the object.</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">while</span> ((result == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) &amp;&amp; (lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>)) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    result = <span class="keyword">reinterpret_cast&lt;</span>Element*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        bsearch(&amp;key, lol-&gt;elements_, lol-&gt;obj_count_,</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                <span class="keyword">sizeof</span>(Element),</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                reinterpret_cast&lt;RawComparer&gt;(CompareElement)));</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;}</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">// &quot;Nullifies&quot; (convert the HeapObject* into an SMI) so that it will get cleaned</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">// up in the GCEpilogue, while preserving the sort order of the lol.</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">// NOTE: the lols need to be already sorted before NullifyMostRecent() is</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">// called.</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="keywordtype">void</span> LiveObjectList::NullifyMostRecent(HeapObject* obj) {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  LiveObjectList* lol = last();</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  Element key;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  Element* result = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  key.obj_ = obj;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="comment">// Iterate through the chain of lol&#39;s to look for the object.</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">while</span> (lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    result = <span class="keyword">reinterpret_cast&lt;</span>Element*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        bsearch(&amp;key, lol-&gt;elements_, lol-&gt;obj_count_,</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                <span class="keyword">sizeof</span>(Element),</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                reinterpret_cast&lt;RawComparer&gt;(CompareElement)));</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <span class="comment">// Since there may be more than one (we are nullifying dup&#39;s after all),</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="comment">// find the first in the current lol, and nullify that.  The lol should</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="comment">// be sorted already to make this easy (see the use of SortAll()).</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keywordtype">int</span> i = result - lol-&gt;elements_;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="comment">// NOTE: we sort the lol in increasing order.  So, if an object has been</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="comment">// &quot;nullified&quot; (its lowest bit will be cleared to make it look like an</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="comment">// SMI), it would/should show up before the equivalent dups that have not</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="comment">// yet been &quot;nullified&quot;.  Hence, we should be searching backwards for the</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="comment">// first occurence of a matching object and nullify that instance.  This</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <span class="comment">// will ensure that we preserve the expected sorting order.</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">for</span> (i--; i &gt; 0; i--) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        Element* element = &amp;lol-&gt;elements_[i];</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        HeapObject* curr_obj = element-&gt;obj_;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">if</span> (curr_obj != obj) {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            <span class="keywordflow">break</span>;  <span class="comment">// No more matches.  Let&#39;s move on.</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        result = element;  <span class="comment">// Let this earlier match be the result.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="comment">// Nullify the object.</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      NullifyNonLivePointer(&amp;result-&gt;obj_);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;}</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">// Sorts the lol.</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="keywordtype">void</span> LiveObjectList::Sort() {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">if</span> (obj_count_ &gt; 0) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    Vector&lt;Element&gt; elements_v(elements_, obj_count_);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    elements_v.Sort(CompareElement);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">// Sorts all captured lols starting from the latest.</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="keywordtype">void</span> LiveObjectList::SortAll() {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  LiveObjectList* lol = last();</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordflow">while</span> (lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    lol-&gt;Sort();</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;}</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">// Counts the number of objects in the heap.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> CountHeapObjects() {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="comment">// Iterate over all the heap spaces and count the number of objects.</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  HeapIterator iterator;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  HeapObject* heap_obj = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keywordflow">while</span> ((heap_obj = iterator.next()) != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    count++;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;}</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">// Captures a current snapshot of all objects in the heap.</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;MaybeObject* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a3a4efd3c456dc52053aaf73440d6f58c">LiveObjectList::Capture</a>() {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  HandleScope scope(isolate);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// Count the number of objects in the heap.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordtype">int</span> total_count = CountHeapObjects();</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordtype">int</span> count = total_count;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordtype">int</span> size = 0;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  LiveObjectList* last_lol = last();</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordflow">if</span> (last_lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    count -= last_lol-&gt;TotalObjCount();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  LiveObjectList* lol;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">// Create a lol large enough to track all the objects.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  lol = <span class="keyword">new</span> LiveObjectList(last_lol, count);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span> (lol == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;  <span class="comment">// No memory to proceed.</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">// The HeapIterator needs to be in its own scope because it disables</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// allocation, and we need allocate below.</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// Iterate over all the heap spaces and add the objects.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    HeapIterator iterator;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    HeapObject* heap_obj = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordtype">bool</span> failed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">while</span> (!failed &amp;&amp; (heap_obj = iterator.next()) != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      failed = !lol-&gt;Add(heap_obj);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      size += heap_obj-&gt;Size();</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!failed);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    lol-&gt;Sort();</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="comment">// Add the current lol to the list of lols.</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">if</span> (last_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      last_-&gt;next_ = lol;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      first_ = lol;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    last_ = lol;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="preprocessor">#ifdef VERIFY_LOL</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">if</span> (FLAG_verify_lol) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      Verify(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  Handle&lt;String&gt; id_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;id&quot;</span>);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  Handle&lt;String&gt; count_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;count&quot;</span>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  Handle&lt;String&gt; size_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;size&quot;</span>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  Handle&lt;JSObject&gt; result = factory-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">if</span> (result-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*result);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  { MaybeObject* maybe_result = result-&gt;SetProperty(*id_sym,</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                                    <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(lol-&gt;id()),</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                                                    <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  { MaybeObject* maybe_result = result-&gt;SetProperty(*count_sym,</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                                                    <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(total_count),</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                                                    <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  }</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  { MaybeObject* maybe_result = result-&gt;SetProperty(*size_sym,</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                                                    <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(size),</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                                                    <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keywordflow">return</span> *result;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;}</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">// Delete doesn&#39;t actually deletes an lol.  It just marks it as invisible since</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">// its contents are considered to be part of subsequent lists as well.  The</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">// only time we&#39;ll actually delete the lol is when we Reset() or if the lol is</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">// invisible, and its element count reaches 0.</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a73216d8eb8d243733bde732b0f18b3e7">LiveObjectList::Delete</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  LiveObjectList* lol = last();</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="keywordflow">while</span> (lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> (lol-&gt;id() == id) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// If no lol is found for this id, then we fail to delete.</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="keywordflow">if</span> (lol == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// Else, mark the lol as invisible i.e. id == 0.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  lol-&gt;id_ = 0;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  list_count_--;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(list_count_ &gt;= 0);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordflow">if</span> (lol-&gt;obj_count_ == 0) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">// Point the next lol&#39;s prev to this lol&#39;s prev.</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    LiveObjectList* next = lol-&gt;next_;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    LiveObjectList* prev = lol-&gt;prev_;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">// Point next&#39;s prev to prev.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> (next != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      next-&gt;prev_ = lol-&gt;prev_;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      last_ = lol-&gt;prev_;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// Point prev&#39;s next to next.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span> (prev != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      prev-&gt;next_ = lol-&gt;next_;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      first_ = lol-&gt;next_;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    lol-&gt;prev_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    lol-&gt;next_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">// Delete this now empty and invisible lol.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keyword">delete</span> lol;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="comment">// Just in case we&#39;ve marked everything invisible, then clean up completely.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="keywordflow">if</span> (list_count_ == 0) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a77ad624cc83a2a71aa4d5ad991d811d7">Reset</a>();</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;}</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;MaybeObject* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a1236911ef77327491763b70ffaa8d924">LiveObjectList::Dump</a>(<span class="keywordtype">int</span> older_id,</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                                  <span class="keywordtype">int</span> newer_id,</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                                  <span class="keywordtype">int</span> start_idx,</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                                  <span class="keywordtype">int</span> dump_limit,</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                                  Handle&lt;JSObject&gt; filter_obj) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keywordflow">if</span> ((older_id &lt; 0) || (newer_id &lt; 0) || (last() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>)) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">Failure::Exception</a>();  <span class="comment">// Fail: 0 is not a valid lol id.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  }</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">if</span> (newer_id &lt; older_id) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="comment">// They are not in the expected order.  Swap them.</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keywordtype">int</span> temp = older_id;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    older_id = newer_id;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    newer_id = temp;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  LiveObjectList* newer_lol = FindLolForId(newer_id, last());</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  LiveObjectList* older_lol = FindLolForId(older_id, newer_lol);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="comment">// If the id is defined, and we can&#39;t find a LOL for it, then we have an</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// invalid id.</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordflow">if</span> ((newer_id != 0) &amp;&amp; (newer_lol == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>)) {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">Failure::Exception</a>();  <span class="comment">// Fail: the newer lol id is invalid.</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keywordflow">if</span> ((older_id != 0) &amp;&amp; (older_lol == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>)) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">Failure::Exception</a>();  <span class="comment">// Fail: the older lol id is invalid.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  LolFilter filter(filter_obj);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  LolDumpWriter writer(older_lol, newer_lol);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">return</span> DumpPrivate(&amp;writer, start_idx, dump_limit, &amp;filter);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;MaybeObject* LiveObjectList::DumpPrivate(DumpWriter* writer,</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                                         <span class="keywordtype">int</span> start,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                                         <span class="keywordtype">int</span> dump_limit,</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                                         LolFilter* filter) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  HandleScope scope(isolate);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="comment">// Calculate the number of entries of the dump.</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordtype">int</span> count = -1;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="keywordtype">int</span> size = -1;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  writer-&gt;ComputeTotalCountAndSize(filter, &amp;count, &amp;size);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="comment">// Adjust for where to start the dump.</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="keywordflow">if</span> ((start &lt; 0) || (start &gt;= count)) {</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">Failure::Exception</a>();  <span class="comment">// invalid start.</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="keywordtype">int</span> remaining_count = count - start;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">if</span> (dump_limit &gt; remaining_count) {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    dump_limit = remaining_count;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  }</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="comment">// Allocate an array to hold the result.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  Handle&lt;FixedArray&gt; elements_arr = factory-&gt;NewFixedArray(dump_limit);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (elements_arr-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*elements_arr);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="comment">// Fill in the dump.</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  Handle&lt;Object&gt; error;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="keywordtype">bool</span> success = writer-&gt;Write(elements_arr,</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                               start,</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                               dump_limit,</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                               filter,</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                               error);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="keywordflow">if</span> (!success) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*error);</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  MaybeObject* maybe_result;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="comment">// Allocate the result body.</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  Handle&lt;JSObject&gt; body = factory-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="keywordflow">if</span> (body-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*body);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">// Set the updated body.count.</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  Handle&lt;String&gt; count_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;count&quot;</span>);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  maybe_result = body-&gt;SetProperty(*count_sym,</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                                   <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(count),</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                                   <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="comment">// Set the updated body.size if appropriate.</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordflow">if</span> (size &gt;= 0) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    Handle&lt;String&gt; size_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;size&quot;</span>);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    maybe_result = body-&gt;SetProperty(*size_sym,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                                     <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(size),</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                                     <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// Set body.first_index.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  Handle&lt;String&gt; first_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;first_index&quot;</span>);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  maybe_result = body-&gt;SetProperty(*first_sym,</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                                   <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(start),</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                                   <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// Allocate the JSArray of the elements.</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  Handle&lt;JSObject&gt; elements = factory-&gt;NewJSObject(isolate-&gt;array_function());</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">if</span> (elements-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*elements);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  maybe_result = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;JSArray&gt;::cast</a>(elements)-&gt;SetContent(*elements_arr);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="comment">// Set body.elements.</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  Handle&lt;String&gt; elements_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;elements&quot;</span>);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  maybe_result = body-&gt;SetProperty(*elements_sym,</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                                   *elements,</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                                   <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keywordflow">return</span> *body;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;}</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;MaybeObject* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a4dc71d6943b6b835cfbe07757c3f24c1">LiveObjectList::Summarize</a>(<span class="keywordtype">int</span> older_id,</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                                       <span class="keywordtype">int</span> newer_id,</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                                       Handle&lt;JSObject&gt; filter_obj) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keywordflow">if</span> ((older_id &lt; 0) || (newer_id &lt; 0) || (last() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>)) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">Failure::Exception</a>();  <span class="comment">// Fail: 0 is not a valid lol id.</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">if</span> (newer_id &lt; older_id) {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="comment">// They are not in the expected order.  Swap them.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordtype">int</span> temp = older_id;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    older_id = newer_id;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    newer_id = temp;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  LiveObjectList* newer_lol = FindLolForId(newer_id, last());</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  LiveObjectList* older_lol = FindLolForId(older_id, newer_lol);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// If the id is defined, and we can&#39;t find a LOL for it, then we have an</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// invalid id.</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keywordflow">if</span> ((newer_id != 0) &amp;&amp; (newer_lol == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>)) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">Failure::Exception</a>();  <span class="comment">// Fail: the newer lol id is invalid.</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="keywordflow">if</span> ((older_id != 0) &amp;&amp; (older_lol == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>)) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">Failure::Exception</a>();  <span class="comment">// Fail: the older lol id is invalid.</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  }</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  LolFilter filter(filter_obj);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  LolSummaryWriter writer(older_lol, newer_lol);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordflow">return</span> SummarizePrivate(&amp;writer, &amp;filter, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;}</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">// Creates a summary report for the debugger.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">// Note: the SummaryWriter takes care of iterating over objects and filling in</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">// the summary.</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;MaybeObject* LiveObjectList::SummarizePrivate(SummaryWriter* writer,</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                                              LolFilter* filter,</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                                              <span class="keywordtype">bool</span> is_tracking_roots) {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  MaybeObject* maybe_result;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  LiveObjectSummary summary(filter);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  writer-&gt;Write(&amp;summary);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="comment">// The result body will look like this:</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// body: {</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="comment">//   count: &lt;total_count&gt;,</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="comment">//   size: &lt;total_size&gt;,</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="comment">//   found_root: &lt;boolean&gt;,       // optional.</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="comment">//   found_weak_root: &lt;boolean&gt;,  // optional.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="comment">//   summary: [</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="comment">//     {</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="comment">//       desc: &quot;&lt;object type name&gt;&quot;,</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="comment">//       count: &lt;count&gt;,</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">//       size: size</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="comment">//     },</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">//     ...</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">//   ]</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">// Prefetch some needed symbols.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  Handle&lt;String&gt; desc_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;desc&quot;</span>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  Handle&lt;String&gt; count_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;count&quot;</span>);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  Handle&lt;String&gt; size_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;size&quot;</span>);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  Handle&lt;String&gt; summary_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;summary&quot;</span>);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="comment">// Allocate the summary array.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordtype">int</span> entries_count = summary.GetNumberOfEntries();</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  Handle&lt;FixedArray&gt; summary_arr =</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      factory-&gt;NewFixedArray(entries_count);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="keywordflow">if</span> (summary_arr-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*summary_arr);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="keywordtype">int</span> idx = 0;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; LiveObjectSummary::kNumberOfEntries; i++) {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">// Allocate the summary record.</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    Handle&lt;JSObject&gt; detail = factory-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordflow">if</span> (detail-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*detail);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="comment">// Fill in the summary record.</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    LiveObjectType type = <span class="keyword">static_cast&lt;</span>LiveObjectType<span class="keyword">&gt;</span>(i);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordtype">int</span> count = summary.Count(type);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">if</span> (count) {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* desc_cstr = GetObjectTypeDesc(type);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      Handle&lt;String&gt; desc = factory-&gt;LookupAsciiSymbol(desc_cstr);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="keywordtype">int</span> size = summary.Size(type);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      maybe_result = detail-&gt;SetProperty(*desc_sym,</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                                         *desc,</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                                         <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      maybe_result = detail-&gt;SetProperty(*count_sym,</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                                         <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(count),</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                                         <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      maybe_result = detail-&gt;SetProperty(*size_sym,</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                                         <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(size),</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                                         <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      summary_arr-&gt;set(idx++, *detail);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="comment">// Wrap the summary fixed array in a JS array.</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  Handle&lt;JSObject&gt; summary_obj =</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    factory-&gt;NewJSObject(isolate-&gt;array_function());</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="keywordflow">if</span> (summary_obj-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*summary_obj);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  maybe_result = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;JSArray&gt;::cast</a>(summary_obj)-&gt;SetContent(*summary_arr);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="comment">// Create the body object.</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  Handle&lt;JSObject&gt; body = factory-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">if</span> (body-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*body);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="comment">// Fill out the body object.</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="keywordtype">int</span> total_count = summary.total_count();</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="keywordtype">int</span> total_size = summary.total_size();</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  maybe_result = body-&gt;SetProperty(*count_sym,</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                                   <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(total_count),</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                                   <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  maybe_result = body-&gt;SetProperty(*size_sym,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                                   <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(total_size),</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                                   <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="keywordflow">if</span> (is_tracking_roots) {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordtype">int</span> found_root = summary.found_root();</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordtype">int</span> found_weak_root = summary.found_weak_root();</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    Handle&lt;String&gt; root_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;found_root&quot;</span>);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    Handle&lt;String&gt; weak_root_sym =</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;found_weak_root&quot;</span>);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    maybe_result = body-&gt;SetProperty(*root_sym,</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                                     <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(found_root),</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                                     <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    maybe_result = body-&gt;SetProperty(*weak_root_sym,</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                                     <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(found_weak_root),</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                                     <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  }</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  maybe_result = body-&gt;SetProperty(*summary_sym,</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                                   *summary_obj,</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                                   <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="keywordflow">return</span> *body;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;}</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">// Returns an array listing the captured lols.</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">// Note: only dumps the section starting at start_idx and only up to</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">// dump_limit entries.</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;MaybeObject* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a2e4056123d0c0945a48ee7b71f7c852a">LiveObjectList::Info</a>(<span class="keywordtype">int</span> start_idx, <span class="keywordtype">int</span> dump_limit) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  HandleScope scope(isolate);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  MaybeObject* maybe_result;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="keywordtype">int</span> total_count = LiveObjectList::list_count();</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="keywordtype">int</span> dump_count = total_count;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// Adjust for where to start the dump.</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keywordflow">if</span> (total_count == 0) {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      start_idx = 0;  <span class="comment">// Ensure this to get an empty list.</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((start_idx &lt; 0) || (start_idx &gt;= total_count)) {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">Failure::Exception</a>();  <span class="comment">// invalid start.</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  }</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  dump_count -= start_idx;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="comment">// Adjust for the dump limit.</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="keywordflow">if</span> (dump_count &gt; dump_limit) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    dump_count = dump_limit;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="comment">// Allocate an array to hold the result.</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  Handle&lt;FixedArray&gt; list = factory-&gt;NewFixedArray(dump_count);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="keywordflow">if</span> (list-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*list);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">// Prefetch some needed symbols.</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  Handle&lt;String&gt; id_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;id&quot;</span>);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  Handle&lt;String&gt; count_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;count&quot;</span>);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  Handle&lt;String&gt; size_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;size&quot;</span>);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// Fill the array with the lol details.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordtype">int</span> idx = 0;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  LiveObjectList* lol = first_;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="keywordflow">while</span> ((lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) &amp;&amp; (idx &lt; start_idx)) {  <span class="comment">// Skip tail entries.</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">if</span> (lol-&gt;id() != 0) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      idx++;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    lol = lol-&gt;next();</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  }</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  idx = 0;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="keywordflow">while</span> ((lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) &amp;&amp; (dump_limit != 0)) {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">if</span> (lol-&gt;id() != 0) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      <span class="keywordtype">int</span> count;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="keywordtype">int</span> size;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      count = lol-&gt;GetTotalObjCountAndSize(&amp;size);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      Handle&lt;JSObject&gt; detail =</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;          factory-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      <span class="keywordflow">if</span> (detail-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*detail);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      maybe_result = detail-&gt;SetProperty(*id_sym,</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                                         <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(lol-&gt;id()),</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                                         <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      maybe_result = detail-&gt;SetProperty(*count_sym,</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                                         <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(count),</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                                         <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      maybe_result = detail-&gt;SetProperty(*size_sym,</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                                         <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(size),</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                                         <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      list-&gt;set(idx++, *detail);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      dump_limit--;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    }</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    lol = lol-&gt;next();</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="comment">// Return the result as a JS array.</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  Handle&lt;JSObject&gt; lols = factory-&gt;NewJSObject(isolate-&gt;array_function());</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  maybe_result = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;JSArray&gt;::cast</a>(lols)-&gt;SetContent(*list);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  Handle&lt;JSObject&gt; result = factory-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="keywordflow">if</span> (result-&gt;IsFailure()) <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(*result);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  maybe_result = result-&gt;SetProperty(*count_sym,</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                                     <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(total_count),</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                                     <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  Handle&lt;String&gt; first_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;first_index&quot;</span>);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  maybe_result = result-&gt;SetProperty(*first_sym,</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                                     <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(start_idx),</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                                     <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  Handle&lt;String&gt; lists_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;lists&quot;</span>);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  maybe_result = result-&gt;SetProperty(*lists_sym,</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                                     *lols,</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                                     <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="keywordflow">return</span> *result;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;}</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment">// Deletes all captured lols.</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a77ad624cc83a2a71aa4d5ad991d811d7">LiveObjectList::Reset</a>() {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  LiveObjectList* lol = last();</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="comment">// Just delete the last.  Each lol will delete it&#39;s prev automatically.</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="keyword">delete</span> lol;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  next_element_id_ = 1;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  list_count_ = 0;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  last_id_ = 0;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  first_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  last_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;}</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">// Gets the object for the specified obj id.</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#aacdd305d9e060eea2b3b130833858d70">LiveObjectList::GetObj</a>(<span class="keywordtype">int</span> obj_id) {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  Element* element = FindElementFor&lt;int&gt;(GetElementId, obj_id);</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keywordflow">if</span> (element != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">Object::cast</a>(element-&gt;obj_);</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  }</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;undefined_value();</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;}</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment">// Gets the obj id for the specified address if valid.</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#ad50a3d2dbad639ca3c59f7d45a6930b4">LiveObjectList::GetObjId</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* obj) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="comment">// Make a heap object pointer from the address.</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  HeapObject* hobj = <a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">HeapObject::cast</a>(obj);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  Element* element = FindElementFor&lt;HeapObject*&gt;(GetElementObj, hobj);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="keywordflow">if</span> (element != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">return</span> element-&gt;id_;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  }</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordflow">return</span> 0;  <span class="comment">// Invalid address.</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;}</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">// Gets the obj id for the specified address if valid.</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#ad50a3d2dbad639ca3c59f7d45a6930b4">LiveObjectList::GetObjId</a>(Handle&lt;String&gt; address) {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  SmartArrayPointer&lt;char&gt; addr_str =</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      address-&gt;ToCString(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abf098e0989e0298c7bf9428feda63f8eac24e2d0f296a8889ff73ff396161c910">DISALLOW_NULLS</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a24e1a8639b289696f776572551ef72e8a77d1efe50b803c100253d657e7e70892">ROBUST_STRING_TRAVERSAL</a>);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="comment">// Extract the address value from the string.</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="keywordtype">int</span> value =</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a31cef5fa9835a15a28b6e650d4a724d4">StringToInt</a>(isolate-&gt;unicode_cache(), *address, 16));</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* obj = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>*<span class="keyword">&gt;</span>(value);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(<a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#ad50a3d2dbad639ca3c59f7d45a6930b4">GetObjId</a>(obj));</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;}</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment">// Helper class for copying HeapObjects.</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="keyword">class </span>LolVisitor: <span class="keyword">public</span> ObjectVisitor {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  LolVisitor(HeapObject* target, Handle&lt;HeapObject&gt; handle_to_skip)</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      : target_(target), handle_to_skip_(handle_to_skip), found_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a877da585f7669eb7d4ba888938317230">false</a>) {}</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="keywordtype">void</span> VisitPointer(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>** p) { CheckPointer(p); }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keywordtype">void</span> VisitPointers(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>** start, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>** end) {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="comment">// Check all HeapObject pointers in [start, end).</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>** p = start; !found() &amp;&amp; p &lt; end; p++) CheckPointer(p);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  }</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> found()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> found_; }</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> reset() { <span class="keywordflow">return</span> found_ = <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> CheckPointer(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>** p) {</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* <span class="keywordtype">object</span> = *p;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">HeapObject::cast</a>(<span class="keywordtype">object</span>) == target_) {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <span class="comment">// We may want to skip this handle because the handle may be a local</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <span class="comment">// handle in a handle scope in one of our callers.  Once we return,</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      <span class="comment">// that handle will be popped.  Hence, we don&#39;t want to count it as</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <span class="comment">// a root that would have kept the target object alive.</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <span class="keywordflow">if</span> (!handle_to_skip_.is_null() &amp;&amp;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;          handle_to_skip_.location() == <span class="keyword">reinterpret_cast&lt;</span>HeapObject**<span class="keyword">&gt;</span>(p)) {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <span class="keywordflow">return</span>;  <span class="comment">// Skip this handle.</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      }</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      found_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    }</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  }</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  HeapObject* target_;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  Handle&lt;HeapObject&gt; handle_to_skip_;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordtype">bool</span> found_;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;};</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> AddRootRetainerIfFound(<span class="keyword">const</span> LolVisitor&amp; visitor,</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                                   LolFilter* filter,</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                                   LiveObjectSummary* summary,</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                                   <span class="keywordtype">void</span> (*SetRootFound)(LiveObjectSummary* s),</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                                   <span class="keywordtype">int</span> start,</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                                   <span class="keywordtype">int</span> dump_limit,</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                                   <span class="keywordtype">int</span>* total_count,</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                                   Handle&lt;FixedArray&gt; retainers_arr,</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                                   <span class="keywordtype">int</span>* count,</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                                   <span class="keywordtype">int</span>* index,</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span>* root_name,</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                                   Handle&lt;String&gt; id_sym,</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                                   Handle&lt;String&gt; desc_sym,</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                                   Handle&lt;String&gt; size_sym,</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                                   Handle&lt;Object&gt; error) {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="comment">// Scratch handles.</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  Handle&lt;JSObject&gt; detail;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  Handle&lt;String&gt; desc;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  Handle&lt;HeapObject&gt; retainer;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keywordflow">if</span> (visitor.found()) {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">if</span> (!filter-&gt;is_active()) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      (*total_count)++;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      <span class="keywordflow">if</span> (summary) {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        SetRootFound(summary);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*total_count &gt; start) &amp;&amp; ((*index) &lt; dump_limit)) {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        (*count)++;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <span class="keywordflow">if</span> (!retainers_arr.is_null()) {</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;          <span class="keywordflow">return</span> AddObjDetail(retainers_arr,</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                              (*index)++,</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                              0,</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                              retainer,</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                              root_name,</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                              id_sym,</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                              desc_sym,</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                              size_sym,</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                              detail,</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                              desc,</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                              error);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        }</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      }</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  }</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;}</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> SetFoundRoot(LiveObjectSummary* summary) {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  summary-&gt;set_found_root();</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;}</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> SetFoundWeakRoot(LiveObjectSummary* summary) {</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  summary-&gt;set_found_weak_root();</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;}</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="keywordtype">int</span> LiveObjectList::GetRetainers(Handle&lt;HeapObject&gt; target,</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                                 Handle&lt;JSObject&gt; instance_filter,</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                                 Handle&lt;FixedArray&gt; retainers_arr,</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                                 <span class="keywordtype">int</span> start,</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                                 <span class="keywordtype">int</span> dump_limit,</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                                 <span class="keywordtype">int</span>* total_count,</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                                 LolFilter* filter,</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                                 LiveObjectSummary* summary,</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                                 JSFunction* arguments_function,</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                                 Handle&lt;Object&gt; error) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="comment">// Scratch handles.</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  Handle&lt;JSObject&gt; detail;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  Handle&lt;String&gt; desc;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  Handle&lt;HeapObject&gt; retainer;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">// Prefetch some needed symbols.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  Handle&lt;String&gt; id_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;id&quot;</span>);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  Handle&lt;String&gt; desc_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;desc&quot;</span>);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  Handle&lt;String&gt; size_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;size&quot;</span>);</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  NoHandleAllocation ha;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="keywordtype">int</span> index = 0;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  Handle&lt;JSObject&gt; last_obj;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  *total_count = 0;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// Iterate roots.</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  LolVisitor lol_visitor(*target, target);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  isolate-&gt;heap()-&gt;IterateStrongRoots(&amp;lol_visitor, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a52281dbab735b55bbbeaa582a46dcdc3a922f20caf3a928fb0fd6805d0a0246ce">VISIT_ALL</a>);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="keywordflow">if</span> (!AddRootRetainerIfFound(lol_visitor,</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                              filter,</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                              summary,</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                              SetFoundRoot,</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                              start,</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                              dump_limit,</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                              total_count,</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                              retainers_arr,</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                              &amp;count,</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                              &amp;index,</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                              <span class="stringliteral">&quot;&lt;root&gt;&quot;</span>,</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                              id_sym,</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                              desc_sym,</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                              size_sym,</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                              error)) {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  lol_visitor.reset();</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  isolate-&gt;heap()-&gt;IterateWeakRoots(&amp;lol_visitor, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a52281dbab735b55bbbeaa582a46dcdc3a922f20caf3a928fb0fd6805d0a0246ce">VISIT_ALL</a>);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="keywordflow">if</span> (!AddRootRetainerIfFound(lol_visitor,</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                              filter,</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                              summary,</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                              SetFoundWeakRoot,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                              start,</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                              dump_limit,</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                              total_count,</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                              retainers_arr,</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                              &amp;count,</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                              &amp;index,</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                              <span class="stringliteral">&quot;&lt;weak root&gt;&quot;</span>,</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                              id_sym,</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                              desc_sym,</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                              size_sym,</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                              error)) {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="comment">// Iterate the live object lists.</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  LolIterator it(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>, last());</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="keywordflow">for</span> (it.Init(); !it.Done() &amp;&amp; (index &lt; dump_limit); it.Next()) {</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    HeapObject* heap_obj = it.Obj();</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="comment">// Only look at all JSObjects.</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">if</span> (heap_obj-&gt;IsJSObject()) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <span class="comment">// Skip context extension objects and argument arrays as these are</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <span class="comment">// checked in the context of functions using them.</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      JSObject* obj = <a class="code" href="../../d7/da2/classv8_1_1internal_1_1_j_s_object.html#aaece615f06206074f36ad5c62efe4361">JSObject::cast</a>(heap_obj);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;IsJSContextExtensionObject() ||</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;          obj-&gt;map()-&gt;constructor() == arguments_function) {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      }</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <span class="comment">// Check if the JS object has a reference to the object looked for.</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;ReferencesObject(*target)) {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="comment">// Check instance filter if supplied. This is normally used to avoid</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <span class="comment">// references from mirror objects (see Runtime_IsInPrototypeChain).</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <span class="keywordflow">if</span> (!instance_filter-&gt;IsUndefined()) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;          <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* V = obj;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;          <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;            <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* prototype = V-&gt;GetPrototype();</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;            <span class="keywordflow">if</span> (prototype-&gt;IsNull()) {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            }</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            <span class="keywordflow">if</span> (*instance_filter == prototype) {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;              obj = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;  <span class="comment">// Don&#39;t add this object.</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;            V = prototype;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;          }</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        }</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <span class="keywordflow">if</span> (obj != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;          <span class="comment">// Skip objects that have been filtered out.</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;          <span class="keywordflow">if</span> (filter-&gt;Matches(heap_obj)) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;          }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;          <span class="comment">// Valid reference found add to instance array if supplied an update</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;          <span class="comment">// count.</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;          last_obj = Handle&lt;JSObject&gt;(obj);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;          (*total_count)++;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;          <span class="keywordflow">if</span> (summary != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;            summary-&gt;Add(heap_obj);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*total_count &gt; start) &amp;&amp; (index &lt; dump_limit)) {</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            count++;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <span class="keywordflow">if</span> (!retainers_arr.is_null()) {</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;              retainer = Handle&lt;HeapObject&gt;(heap_obj);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;              <span class="keywordtype">bool</span> success = AddObjDetail(retainers_arr,</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                                          index++,</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                                          it.Id(),</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                                          retainer,</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                                          <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>,</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                                          id_sym,</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                                          desc_sym,</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                                          size_sym,</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                                          detail,</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                                          desc,</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                                          error);</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;              <span class="keywordflow">if</span> (!success) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;          }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;        }</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="comment">// Check for circular reference only. This can happen when the object is only</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="comment">// referenced from mirrors and has a circular reference in which case the</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="comment">// object is not really alive and would have been garbage collected if not</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="comment">// referenced from the mirror.</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">if</span> (*total_count == 1 &amp;&amp; !last_obj.is_null() &amp;&amp; *last_obj == *target) {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    count = 0;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    *total_count = 0;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;}</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;MaybeObject* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#aed98992f60ed207af7ca164c44f4fa69">LiveObjectList::GetObjRetainers</a>(<span class="keywordtype">int</span> obj_id,</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                                             Handle&lt;JSObject&gt; instance_filter,</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                                             <span class="keywordtype">bool</span> verbose,</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                                             <span class="keywordtype">int</span> start,</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                                             <span class="keywordtype">int</span> dump_limit,</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                                             Handle&lt;JSObject&gt; filter_obj) {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  Heap* heap = isolate-&gt;heap();</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  HandleScope scope(isolate);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <span class="comment">// Get the target object.</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  HeapObject* heap_obj = <a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">HeapObject::cast</a>(<a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#aacdd305d9e060eea2b3b130833858d70">GetObj</a>(obj_id));</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="keywordflow">if</span> (heap_obj == heap-&gt;undefined_value()) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="keywordflow">return</span> heap_obj;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  }</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  Handle&lt;HeapObject&gt; target = Handle&lt;HeapObject&gt;(heap_obj);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="comment">// Get the constructor function for context extension and arguments array.</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  JSObject* arguments_boilerplate =</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      isolate-&gt;context()-&gt;global_context()-&gt;arguments_boilerplate();</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  JSFunction* arguments_function =</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      <a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(arguments_boilerplate-&gt;map()-&gt;constructor());</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  Handle&lt;JSFunction&gt; args_function = Handle&lt;JSFunction&gt;(arguments_function);</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  LolFilter filter(filter_obj);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="keywordflow">if</span> (!verbose) {</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    RetainersSummaryWriter writer(target, instance_filter, args_function);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keywordflow">return</span> SummarizePrivate(&amp;writer, &amp;filter, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    RetainersDumpWriter writer(target, instance_filter, args_function);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* body_obj;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    MaybeObject* maybe_result =</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        DumpPrivate(&amp;writer, start, dump_limit, &amp;filter);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <span class="keywordflow">if</span> (!maybe_result-&gt;ToObject(&amp;body_obj)) {</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    }</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="comment">// Set body.id.</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    Handle&lt;JSObject&gt; body = Handle&lt;JSObject&gt;(<a class="code" href="../../d7/da2/classv8_1_1internal_1_1_j_s_object.html#aaece615f06206074f36ad5c62efe4361">JSObject::cast</a>(body_obj));</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    Handle&lt;String&gt; id_sym = factory-&gt;LookupAsciiSymbol(<span class="stringliteral">&quot;id&quot;</span>);</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    maybe_result = body-&gt;SetProperty(*id_sym,</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                                     <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(obj_id),</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                                     <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">kNonStrictMode</a>);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <span class="keywordflow">if</span> (maybe_result-&gt;IsFailure()) <span class="keywordflow">return</span> maybe_result;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">return</span> *body;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;}</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a386905f740d67578333b236b27e2802b">LiveObjectList::PrintObj</a>(<span class="keywordtype">int</span> obj_id) {</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* obj = <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#aacdd305d9e060eea2b3b130833858d70">GetObj</a>(obj_id);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="keywordflow">if</span> (!obj) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;undefined_value();</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  }</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  EmbeddedVector&lt;char, 128&gt; temp_filename;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> temp_count = 0;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* path_prefix = <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  Heap* heap = isolate-&gt;heap();</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <span class="keywordflow">if</span> (FLAG_lol_workdir) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    path_prefix = FLAG_lol_workdir;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">OS::SNPrintF</a>(temp_filename, <span class="stringliteral">&quot;%s/lol-print-%d&quot;</span>, path_prefix, ++temp_count);</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  FILE* f = <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a71d8d763c7a5feba8bbb9a65fdc4cc87">OS::FOpen</a>(temp_filename.start(), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;@%d &quot;</span>, <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#ad50a3d2dbad639ca3c59f7d45a6930b4">LiveObjectList::GetObjId</a>(obj));</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="preprocessor">#ifdef OBJECT_PRINT</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="preprocessor">#ifdef INSPECTOR</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  Inspector::DumpObjectType(f, obj);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="preprocessor">#endif  // INSPECTOR</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  obj-&gt;Print(f);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="preprocessor">#else  // !OBJECT_PRINT</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  obj-&gt;ShortPrint(f);</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="preprocessor">#endif  // !OBJECT_PRINT</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a314f14b7de3a35c2677c3a5875023100">Flush</a>(f);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  fclose(f);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="comment">// Create a string from the temp_file.</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="comment">// Note: the mmapped resource will take care of closing the file.</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  MemoryMappedExternalResource* resource =</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      <span class="keyword">new</span> MemoryMappedExternalResource(temp_filename.start(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="keywordflow">if</span> (resource-&gt;exists() &amp;&amp; !resource-&gt;is_empty()) {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(resource-&gt;IsAscii());</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    Handle&lt;String&gt; dump_string =</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        factory-&gt;NewExternalStringFromAscii(resource);</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    heap-&gt;external_string_table()-&gt;AddString(*dump_string);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <span class="keywordflow">return</span> *dump_string;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <span class="keyword">delete</span> resource;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;undefined_value();</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;}</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="keyword">class </span>LolPathTracer: <span class="keyword">public</span> PathTracer {</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  LolPathTracer(FILE* out,</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* search_target,</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                WhatToFind what_to_find)</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      : PathTracer(search_target, what_to_find, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a52281dbab735b55bbbeaa582a46dcdc3af4d9160c31dacd4bc90170d1fda5566f">VISIT_ONLY_STRONG</a>), out_(out) {}</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="keywordtype">void</span> ProcessResults();</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  FILE* out_;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;};</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="keywordtype">void</span> LolPathTracer::ProcessResults() {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="keywordflow">if</span> (found_target_) {</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;=====================================\n&quot;</span>);</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;====        Path to object       ====\n&quot;</span>);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;=====================================\n\n&quot;</span>);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!object_stack_.is_empty());</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* prev = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, index = 0; i &lt; object_stack_.length(); i++) {</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* obj = object_stack_[i];</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <span class="comment">// Skip this object if it is basically the internals of the</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <span class="comment">// previous object (which would have dumped its details already).</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="keywordflow">if</span> (prev &amp;&amp; prev-&gt;IsJSObject() &amp;&amp;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;          (obj != search_target_)) {</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        JSObject* jsobj = <a class="code" href="../../d7/da2/classv8_1_1internal_1_1_j_s_object.html#aaece615f06206074f36ad5c62efe4361">JSObject::cast</a>(prev);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="keywordflow">if</span> (obj-&gt;IsFixedArray() &amp;&amp;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            jsobj-&gt;properties() == <a class="code" href="../../dc/d95/classv8_1_1internal_1_1_fixed_array.html#ab72b1bdfe3d9d45e6b5a01348e6691eb">FixedArray::cast</a>(obj)) {</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;          <span class="comment">// Skip this one because it would have been printed as the</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;          <span class="comment">// properties of the last object already.</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj-&gt;IsHeapObject() &amp;&amp;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                   jsobj-&gt;elements() == <a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">HeapObject::cast</a>(obj)) {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;          <span class="comment">// Skip this one because it would have been printed as the</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;          <span class="comment">// elements of the last object already.</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        }</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      }</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      <span class="comment">// Print a connecting arrow.</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="keywordflow">if</span> (i &gt; 0) <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;\n     |\n     |\n     V\n\n&quot;</span>);</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <span class="comment">// Print the object index.</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;[%d] &quot;</span>, ++index);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      <span class="comment">// Print the LOL object ID:</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#ad50a3d2dbad639ca3c59f7d45a6930b4">LiveObjectList::GetObjId</a>(obj);</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt; 0) <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;@%d &quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="preprocessor">#ifdef OBJECT_PRINT</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="preprocessor">#ifdef INSPECTOR</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      Inspector::DumpObjectType(out_, obj);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="preprocessor">#endif  // INSPECTOR</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      obj-&gt;Print(out_);</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="preprocessor">#else  // !OBJECT_PRINT</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      obj-&gt;ShortPrint(out_);</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="preprocessor">#endif  // !OBJECT_PRINT</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a314f14b7de3a35c2677c3a5875023100">Flush</a>(out_);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    }</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(out_, <span class="stringliteral">&quot;=====================================\n\n&quot;</span>);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a314f14b7de3a35c2677c3a5875023100">Flush</a>(out_);</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  }</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;}</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* LiveObjectList::GetPathPrivate(HeapObject* obj1, HeapObject* obj2) {</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  EmbeddedVector&lt;char, 128&gt; temp_filename;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> temp_count = 0;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* path_prefix = <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="keywordflow">if</span> (FLAG_lol_workdir) {</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    path_prefix = FLAG_lol_workdir;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  }</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">OS::SNPrintF</a>(temp_filename, <span class="stringliteral">&quot;%s/lol-getpath-%d&quot;</span>, path_prefix, ++temp_count);</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  FILE* f = <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a71d8d763c7a5feba8bbb9a65fdc4cc87">OS::FOpen</a>(temp_filename.start(), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  Isolate* isolate = Isolate::Current();</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  Heap* heap = isolate-&gt;heap();</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="comment">// Save the previous verbosity.</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <span class="keywordtype">bool</span> prev_verbosity = FLAG_use_verbose_printer;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  FLAG_use_verbose_printer = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <span class="comment">// Dump the paths.</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  {</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="comment">// The tracer needs to be scoped because its usage asserts no allocation,</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="comment">// and we need to allocate the result string below.</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    LolPathTracer tracer(f, obj2, LolPathTracer::FIND_FIRST);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="keywordflow">if</span> (obj1 == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      <span class="comment">// Check for ObjectGroups that references this object.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="comment">// TODO(mlam): refactor this to be more modular.</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      {</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        List&lt;ObjectGroup*&gt;* groups = isolate-&gt;global_handles()-&gt;object_groups();</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; groups-&gt;length(); i++) {</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;          ObjectGroup* group = groups-&gt;at(i);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;          <span class="keywordflow">if</span> (group == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;          <span class="keywordtype">bool</span> found_group = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; group-&gt;length_; j++) {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;            <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* <span class="keywordtype">object</span> = *(group-&gt;objects_[j]);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;            HeapObject* hobj = <a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">HeapObject::cast</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;            <span class="keywordflow">if</span> (obj2 == hobj) {</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;              found_group = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;            }</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;          }</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;          <span class="keywordflow">if</span> (found_group) {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;            <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f,</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                   <span class="stringliteral">&quot;obj %p is a member of object group %p {\n&quot;</span>,</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                   reinterpret_cast&lt;void*&gt;(obj2),</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                   reinterpret_cast&lt;void*&gt;(group));</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; group-&gt;length_; j++) {</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;              <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* <span class="keywordtype">object</span> = *(group-&gt;objects_[j]);</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;              <span class="keywordflow">if</span> (!object-&gt;IsHeapObject()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;              HeapObject* hobj = <a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">HeapObject::cast</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;              <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#ad50a3d2dbad639ca3c59f7d45a6930b4">GetObjId</a>(hobj);</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;              <span class="keywordflow">if</span> (<span class="keywordtype">id</span> != 0) {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;  @%d:&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;              } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;  &lt;no id&gt;:&quot;</span>);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;              }</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;              <span class="keywordtype">char</span> buffer[512];</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;              GenerateObjectDesc(hobj, buffer, <span class="keyword">sizeof</span>(buffer));</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;              <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot; %s&quot;</span>, buffer);</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;              <span class="keywordflow">if</span> (hobj == obj2) {</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot; &lt;===&quot;</span>);</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;              }</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;              <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            }</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;            <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;}\n&quot;</span>);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;          }</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        }</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      }</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;path from roots to obj %p\n&quot;</span>, reinterpret_cast&lt;void*&gt;(obj2));</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      heap-&gt;IterateRoots(&amp;tracer, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a52281dbab735b55bbbeaa582a46dcdc3af4d9160c31dacd4bc90170d1fda5566f">VISIT_ONLY_STRONG</a>);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      found = tracer.found();</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      <span class="keywordflow">if</span> (!found) {</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;  No paths found. Checking symbol tables ...\n&quot;</span>);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        SymbolTable* symbol_table = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;raw_unchecked_symbol_table();</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;        tracer.VisitPointers(reinterpret_cast&lt;Object**&gt;(&amp;symbol_table),</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                             reinterpret_cast&lt;Object**&gt;(&amp;symbol_table)+1);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        found = tracer.found();</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        <span class="keywordflow">if</span> (!found) {</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;          symbol_table-&gt;IteratePrefix(&amp;tracer);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;          found = tracer.found();</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        }</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      }</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      <span class="keywordflow">if</span> (!found) {</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;  No paths found. Checking weak roots ...\n&quot;</span>);</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        <span class="comment">// Check weak refs next.</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        isolate-&gt;global_handles()-&gt;IterateWeakRoots(&amp;tracer);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        found = tracer.found();</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;path from obj %p to obj %p:\n&quot;</span>,</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;             reinterpret_cast&lt;void*&gt;(obj1), reinterpret_cast&lt;void*&gt;(obj2));</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      tracer.TracePathFrom(reinterpret_cast&lt;Object**&gt;(&amp;obj1));</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      found = tracer.found();</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    }</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="keywordflow">if</span> (!found) {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(f, <span class="stringliteral">&quot;  No paths found\n\n&quot;</span>);</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    }</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  }</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <span class="comment">// Flush and clean up the dumped file.</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a314f14b7de3a35c2677c3a5875023100">Flush</a>(f);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  fclose(f);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;  <span class="comment">// Restore the previous verbosity.</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  FLAG_use_verbose_printer = prev_verbosity;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  <span class="comment">// Create a string from the temp_file.</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="comment">// Note: the mmapped resource will take care of closing the file.</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  MemoryMappedExternalResource* resource =</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="keyword">new</span> MemoryMappedExternalResource(temp_filename.start(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  <span class="keywordflow">if</span> (resource-&gt;exists() &amp;&amp; !resource-&gt;is_empty()) {</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(resource-&gt;IsAscii());</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    Handle&lt;String&gt; path_string =</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        factory-&gt;NewExternalStringFromAscii(resource);</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    heap-&gt;external_string_table()-&gt;AddString(*path_string);</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keywordflow">return</span> *path_string;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keyword">delete</span> resource;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <span class="keywordflow">return</span> heap-&gt;undefined_value();</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;}</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>* <a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a1f3cf2f5aec5fa807db04163bb1ede76">LiveObjectList::GetPath</a>(<span class="keywordtype">int</span> obj_id1,</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                                <span class="keywordtype">int</span> obj_id2,</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                                Handle&lt;JSObject&gt; instance_filter) {</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="comment">// Get the target object.</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  HeapObject* obj1 = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keywordflow">if</span> (obj_id1 != 0) {</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    obj1 = <a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">HeapObject::cast</a>(<a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#aacdd305d9e060eea2b3b130833858d70">GetObj</a>(obj_id1));</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keywordflow">if</span> (obj1 == <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;undefined_value()) {</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      <span class="keywordflow">return</span> obj1;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    }</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  }</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  HeapObject* obj2 = <a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">HeapObject::cast</a>(<a class="code" href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#aacdd305d9e060eea2b3b130833858d70">GetObj</a>(obj_id2));</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="keywordflow">if</span> (obj2 == <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;undefined_value()) {</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="keywordflow">return</span> obj2;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  }</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="keywordflow">return</span> GetPathPrivate(obj1, obj2);</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;}</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="keywordtype">void</span> LiveObjectList::DoProcessNonLive(HeapObject* obj) {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <span class="comment">// We should only be called if we have at least one lol to search.</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(last() != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>);</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  Element* element = last()-&gt;Find(obj);</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <span class="keywordflow">if</span> (element != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    NullifyNonLivePointer(&amp;element-&gt;obj_);</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  }</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;}</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="keywordtype">void</span> LiveObjectList::IterateElementsPrivate(ObjectVisitor* v) {</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  LiveObjectList* lol = last();</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <span class="keywordflow">while</span> (lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    Element* elements = lol-&gt;elements_;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="keywordtype">int</span> count = lol-&gt;obj_count_;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      HeapObject** p = &amp;elements[i].obj_;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      v-&gt;VisitPointer(reinterpret_cast&lt;Object** &gt;(p));</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    }</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  }</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;}</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="comment">// Purpose: Called by GCEpilogue to purge duplicates.  Not to be called by</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="comment">// anyone else.</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="keywordtype">void</span> LiveObjectList::PurgeDuplicates() {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keywordtype">bool</span> is_sorted = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  LiveObjectList* lol = last();</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <span class="keywordflow">if</span> (!lol) {</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">return</span>;  <span class="comment">// Nothing to purge.</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  }</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="keywordtype">int</span> total_count = lol-&gt;TotalObjCount();</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="keywordflow">if</span> (!total_count) {</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">return</span>;  <span class="comment">// Nothing to purge.</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  Element* elements = NewArray&lt;Element&gt;(total_count);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="comment">// Copy all the object elements into a consecutive array.</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="keywordflow">while</span> (lol) {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    memcpy(&amp;elements[count], lol-&gt;elements_, lol-&gt;obj_count_ * <span class="keyword">sizeof</span>(Element));</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    count += lol-&gt;obj_count_;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  }</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  qsort(elements, total_count, <span class="keyword">sizeof</span>(Element),</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        reinterpret_cast&lt;RawComparer&gt;(CompareElement));</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(count == total_count);</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <span class="comment">// Iterate over all objects in the consolidated list and check for dups.</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  total_count--;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; total_count; ) {</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    Element* curr = &amp;elements[i];</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    HeapObject* curr_obj = curr-&gt;obj_;</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordtype">int</span> j = i+1;</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keywordtype">bool</span> done = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="keywordflow">while</span> (!done &amp;&amp; (j &lt; total_count)) {</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <span class="comment">// Process if the element&#39;s object is still live after the current GC.</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      <span class="comment">// Non-live objects will be converted to SMIs i.e. not HeapObjects.</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <span class="keywordflow">if</span> (curr_obj-&gt;IsHeapObject()) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        Element* next = &amp;elements[j];</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        HeapObject* next_obj = next-&gt;obj_;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        <span class="keywordflow">if</span> (next_obj-&gt;IsHeapObject()) {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;          <span class="keywordflow">if</span> (curr_obj != next_obj) {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            done = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;            <span class="keywordflow">continue</span>;  <span class="comment">// Live object but no match.  Move on.</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;          }</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;          <span class="comment">// NOTE: we&#39;ve just GCed the LOLs.  Hence, they are no longer sorted.</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;          <span class="comment">// Since we detected at least one need to search for entries, we&#39;ll</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;          <span class="comment">// sort it to enable the use of NullifyMostRecent() below.  We only</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;          <span class="comment">// need to sort it once (except for one exception ... see below).</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;          <span class="keywordflow">if</span> (!is_sorted) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;            SortAll();</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;            is_sorted = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;          }</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;          <span class="comment">// We have a match.  Need to nullify the most recent ref to this</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;          <span class="comment">// object.  We&#39;ll keep the oldest ref:</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;          <span class="comment">// Note: we will nullify the element record in the LOL</span></div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;          <span class="comment">// database, not in the local sorted copy of the elements.</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;          NullifyMostRecent(curr_obj);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      }</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      <span class="comment">// Either the object was already marked for purging, or we just marked</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;      <span class="comment">// it.  Either way, if there&#39;s more than one dup, then we need to check</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      <span class="comment">// the next element for another possible dup against the current as well</span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <span class="comment">// before we move on.  So, here we go.</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      j++;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    }</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="comment">// We can move on to checking the match on the next element.</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    i = j;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  }</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  DeleteArray&lt;Element&gt;(elements);</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;}</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="comment">// Purpose: Purges dead objects and resorts the LOLs.</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;<span class="keywordtype">void</span> LiveObjectList::GCEpiloguePrivate() {</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="comment">// Note: During the GC, ConsStrings may be collected and pointers may be</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="comment">// forwarded to its constituent string.  As a result, we may find dupes of</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="comment">// objects references in the LOL list.</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// Another common way we get dups is that free chunks that have been swept</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="comment">// in the oldGen heap may be kept as ByteArray objects in a free list.</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="comment">// When we promote live objects from the youngGen, the object may be moved</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <span class="comment">// to the start of these free chunks.  Since there is no free or move event</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <span class="comment">// for the free chunks, their addresses will show up 2 times: once for their</span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="comment">// original free ByteArray selves, and once for the newly promoted youngGen</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <span class="comment">// object.  Hence, we can get a duplicate address in the LOL again.</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <span class="comment">// We need to eliminate these dups because the LOL implementation expects to</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <span class="comment">// only have at most one unique LOL reference to any object at any time.</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  PurgeDuplicates();</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <span class="comment">// After the GC, sweep away all free&#39;d Elements and compact.</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  LiveObjectList* prev = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  LiveObjectList* next = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  <span class="comment">// Iterating from the youngest lol to the oldest lol.</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="keywordflow">for</span> (LiveObjectList* lol = last(); lol; lol = prev) {</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    Element* elements = lol-&gt;elements_;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    prev = lol-&gt;prev();  <span class="comment">// Save the prev.</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <span class="comment">// Remove any references to collected objects.</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">while</span> (i &lt; lol-&gt;obj_count_) {</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      Element&amp; element = elements[i];</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      <span class="keywordflow">if</span> (!element.obj_-&gt;IsHeapObject()) {</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        <span class="comment">// If the HeapObject address was converted into a SMI, then this</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <span class="comment">// is a dead object.  Copy the last element over this one.</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        element = elements[lol-&gt;obj_count_ - 1];</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        lol-&gt;obj_count_--;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        <span class="comment">// We&#39;ve just moved the last element into this index.  We&#39;ll revisit</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="comment">// this index again.  Hence, no need to increment the iterator.</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        i++;  <span class="comment">// Look at the next element next.</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      }</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    }</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="keywordtype">int</span> new_count = lol-&gt;obj_count_;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="comment">// Check if there are any more elements to keep after purging the dead ones.</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">if</span> (new_count == 0) {</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      DeleteArray&lt;Element&gt;(elements);</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      lol-&gt;elements_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      lol-&gt;capacity_ = 0;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(lol-&gt;obj_count_ == 0);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="comment">// If the list is also invisible, the clean up the list as well.</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      <span class="keywordflow">if</span> (lol-&gt;id_ == 0) {</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <span class="comment">// Point the next lol&#39;s prev to this lol&#39;s prev.</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        <span class="keywordflow">if</span> (next) {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;          next-&gt;prev_ = lol-&gt;prev_;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;          last_ = lol-&gt;prev_;</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        }</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        <span class="comment">// Delete this now empty and invisible lol.</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        <span class="keyword">delete</span> lol;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <span class="comment">// Don&#39;t point the next to this lol since it is now deleted.</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        <span class="comment">// Leave the next pointer pointing to the current lol.</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      }</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <span class="comment">// If the obj_count_ is less than the capacity and the difference is</span></div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <span class="comment">// greater than a specified threshold, then we should shrink the list.</span></div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <span class="keywordtype">int</span> diff = lol-&gt;capacity_ - new_count;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxUnusedSpace = 64;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      <span class="keywordflow">if</span> (diff &gt; kMaxUnusedSpace) {  <span class="comment">// Threshold for shrinking.</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <span class="comment">// Shrink the list.</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        Element* new_elements = NewArray&lt;Element&gt;(new_count);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        memcpy(new_elements, elements, new_count * <span class="keyword">sizeof</span>(Element));</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        DeleteArray&lt;Element&gt;(elements);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        lol-&gt;elements_ = new_elements;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        lol-&gt;capacity_ = new_count;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      }</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(lol-&gt;obj_count_ == new_count);</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      lol-&gt;Sort();  <span class="comment">// We&#39;ve moved objects.  Re-sort in case.</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    }</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="comment">// Save the next (for the previous link) in case we need it later.</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    next = lol;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  }</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;<span class="preprocessor">#ifdef VERIFY_LOL</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="keywordflow">if</span> (FLAG_verify_lol) {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    Verify();</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  }</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;}</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="preprocessor">#ifdef VERIFY_LOL</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="keywordtype">void</span> LiveObjectList::Verify(<span class="keywordtype">bool</span> match_heap_exactly) {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;Verifying the LiveObjectList database:\n&quot;</span>);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  LiveObjectList* lol = last();</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <span class="keywordflow">if</span> (lol == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  No lol database to verify\n&quot;</span>);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  }</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  Preparing the lol database ...\n&quot;</span>);</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <span class="keywordtype">int</span> total_count = lol-&gt;TotalObjCount();</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  Element* elements = NewArray&lt;Element&gt;(total_count);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <span class="comment">// Copy all the object elements into a consecutive array.</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  Copying the lol database ...\n&quot;</span>);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="keywordflow">while</span> (lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    memcpy(&amp;elements[count], lol-&gt;elements_, lol-&gt;obj_count_ * <span class="keyword">sizeof</span>(Element));</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    count += lol-&gt;obj_count_;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  }</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  qsort(elements, total_count, <span class="keyword">sizeof</span>(Element),</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        reinterpret_cast&lt;RawComparer&gt;(CompareElement));</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(count == total_count);</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <span class="comment">// Iterate over all objects in the heap and check for:</span></div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  <span class="comment">// 1. object in LOL but not in heap i.e. error.</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <span class="comment">// 2. object in heap but not in LOL (possibly not an error).  Usually</span></div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <span class="comment">//    just means that we don&#39;t have the a capture of the latest heap.</span></div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="comment">//    That is unless we did this verify immediately after a capture,</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <span class="comment">//    and specified match_heap_exactly = true.</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="keywordtype">int</span> number_of_heap_objects = 0;</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <span class="keywordtype">int</span> number_of_matches = 0;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  <span class="keywordtype">int</span> number_not_in_heap = total_count;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  <span class="keywordtype">int</span> number_not_in_lol = 0;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  Start verify ...\n&quot;</span>);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  Verifying ...&quot;</span>);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a314f14b7de3a35c2677c3a5875023100">Flush</a>();</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;  HeapIterator iterator;</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  HeapObject* heap_obj = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  <span class="keywordflow">while</span> ((heap_obj = iterator.next()) != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    number_of_heap_objects++;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="comment">// Check if the heap_obj is in the lol.</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    Element key;</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    key.obj_ = heap_obj;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    Element* result = <span class="keyword">reinterpret_cast&lt;</span>Element*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        bsearch(&amp;key, elements, total_count, <span class="keyword">sizeof</span>(Element),</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                reinterpret_cast&lt;RawComparer&gt;(CompareElement)));</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;      number_of_matches++;</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      number_not_in_heap--;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;      <span class="comment">// Mark it as found by changing it into a SMI (mask off low bit).</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <span class="comment">// Note: we cannot use HeapObject::cast() here because it asserts that</span></div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      <span class="comment">// the HeapObject bit is set on the address, but we&#39;re unsetting it on</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <span class="comment">// purpose here for our marking.</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      result-&gt;obj_ = <span class="keyword">reinterpret_cast&lt;</span>HeapObject*<span class="keyword">&gt;</span>(heap_obj-&gt;address());</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;      number_not_in_lol++;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;      <span class="keywordflow">if</span> (match_heap_exactly) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;heap object %p NOT in lol database\n&quot;</span>, heap_obj);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      }</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    }</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="comment">// Show some sign of life.</span></div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="keywordflow">if</span> (number_of_heap_objects % 1000 == 0) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      fflush(stdout);</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    }</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  }</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="comment">// Reporting lol objects not found in the heap.</span></div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="keywordflow">if</span> (number_not_in_heap) {</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    <span class="keywordtype">int</span> found = 0;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; (i &lt; total_count) &amp;&amp; (found &lt; number_not_in_heap); i++) {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      Element&amp; element = elements[i];</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;      <span class="keywordflow">if</span> (element.obj_-&gt;IsHeapObject()) {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;lol database object [%d of %d] %p NOT in heap\n&quot;</span>,</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                  i, total_count, element.obj_);</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        found++;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;      }</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    }</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  }</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  DeleteArray&lt;Element&gt;(elements);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;number of objects in lol database %d\n&quot;</span>, total_count);</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;number of heap objects .......... %d\n&quot;</span>, number_of_heap_objects);</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;number of matches ............... %d\n&quot;</span>, number_of_matches);</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;number NOT in heap .............. %d\n&quot;</span>, number_not_in_heap);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;number NOT in lol database ...... %d\n&quot;</span>, number_not_in_lol);</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="keywordflow">if</span> (number_of_matches != total_count) {</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  *** ERROR: &quot;</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;              <span class="stringliteral">&quot;NOT all lol database objects match heap objects.\n&quot;</span>);</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  }</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <span class="keywordflow">if</span> (number_not_in_heap != 0) {</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  *** ERROR: %d lol database objects not found in heap.\n&quot;</span>,</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;              number_not_in_heap);</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  }</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keywordflow">if</span> (match_heap_exactly) {</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">if</span> (!(number_not_in_lol == 0)) {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  *** ERROR: %d heap objects NOT found in lol database.\n&quot;</span>,</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                number_not_in_lol);</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    }</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  }</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(number_of_matches == total_count);</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(number_not_in_heap == 0);</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(number_not_in_lol == (number_of_heap_objects - total_count));</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <span class="keywordflow">if</span> (match_heap_exactly) {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(total_count == number_of_heap_objects);</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(number_not_in_lol == 0);</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  Verify the lol database is sorted ...\n&quot;</span>);</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  lol = last();</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  <span class="keywordflow">while</span> (lol != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    Element* elements = lol-&gt;elements_;</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; lol-&gt;obj_count_ - 1; i++) {</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <span class="keywordflow">if</span> (elements[i].obj_ &gt;= elements[i+1].obj_) {</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  *** ERROR: lol %p obj[%d] %p &gt; obj[%d] %p\n&quot;</span>,</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                  lol, i, elements[i].obj_, i+1, elements[i+1].obj_);</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      }</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    }</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    lol = lol-&gt;prev_;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  }</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;  DONE verifying.\n\n\n&quot;</span>);</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;}</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="keywordtype">void</span> LiveObjectList::VerifyNotInFromSpace() {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot;VerifyNotInFromSpace() ...\n&quot;</span>);</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  LolIterator it(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">NULL</a>, last());</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  Heap* heap = <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;heap();</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  <span class="keywordflow">for</span> (it.Init(); !it.Done(); it.Next()) {</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    HeapObject* heap_obj = it.Obj();</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    <span class="keywordflow">if</span> (heap-&gt;InFromSpace(heap_obj)) {</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">OS::Print</a>(<span class="stringliteral">&quot; ERROR: VerifyNotInFromSpace: [%d] obj %p in From space %p\n&quot;</span>,</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                i++, heap_obj, <a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a6731a914158a930c66a680eb171737b5">Heap::new_space</a>()-&gt;FromSpaceStart());</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  }</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;}</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="preprocessor">#endif  // VERIFY_LOL</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;} }  <span class="comment">// namespace v8::internal</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="preprocessor">#endif  // LIVE_OBJECT_LIST</span></div>
<div class="ttc" id="namespacev8_1_1internal_html_abf098e0989e0298c7bf9428feda63f8eac24e2d0f296a8889ff73ff396161c910"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#abf098e0989e0298c7bf9428feda63f8eac24e2d0f296a8889ff73ff396161c910">v8::internal::DISALLOW_NULLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l06771">objects.h:6771</a></div></div>
<div class="ttc" id="checks_8h_html_afaada219ababb63f4a43da387a881b83"><div class="ttname"><a href="../../d5/d16/checks_8h.html#afaada219ababb63f4a43da387a881b83">SLOW_ASSERT</a></div><div class="ttdeci">#define SLOW_ASSERT(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00276">checks.h:276</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5da70e56552dee3c4945a0a410895567"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">v8::internal::PrintF</a></div><div class="ttdeci">void PrintF(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8a/v8utils_8cc_source.html#l00040">v8utils.cc:40</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_ad50a3d2dbad639ca3c59f7d45a6930b4"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#ad50a3d2dbad639ca3c59f7d45a6930b4">v8::internal::LiveObjectList::GetObjId</a></div><div class="ttdeci">static Object * GetObjId(Handle&lt; String &gt; address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00294">liveobjectlist.h:294</a></div></div>
<div class="ttc" id="v8utils_8h_html"><div class="ttname"><a href="../../d8/dd3/v8utils_8h.html">v8utils.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html_a6391d7952fe2756ac824043f9d2f1122"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html#a6391d7952fe2756ac824043f9d2f1122">v8::internal::String::cast</a></div><div class="ttdeci">static String * cast(Object *obj)</div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_a53259c85a9a7f54c354c7871cb340073"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">v8::internal::Smi::FromInt</a></div><div class="ttdeci">static Smi * FromInt(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l00973">objects-inl.h:973</a></div></div>
<div class="ttc" id="v8conversions_8h_html"><div class="ttname"><a href="../../dc/dfe/v8conversions_8h.html">v8conversions.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3fcbc71074e08d986e702a8f55bbb43e"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3fcbc71074e08d986e702a8f55bbb43e">v8::internal::name</a></div><div class="ttdeci">value format&quot; &quot;after each garbage collection&quot;) DEFINE_bool(print_cumulative_gc_stat, false, &quot;print cumulative GC statistics in name=value format on exit&quot;) DEFINE_bool(trace_gc_verbose, false, &quot;print more details following each garbage collection&quot;) DEFINE_bool(trace_fragmentation, false, &quot;report fragmentation for old pointer and data pages&quot;) DEFINE_bool(collect_maps, true, &quot;garbage collect maps from which no objects can be reached&quot;) DEFINE_bool(flush_code, true, &quot;flush code that we expect not to use again before full gc&quot;) DEFINE_bool(incremental_marking, true, &quot;use incremental marking&quot;) DEFINE_bool(incremental_marking_steps, true, &quot;do incremental marking steps&quot;) DEFINE_bool(trace_incremental_marking, false, &quot;trace progress of the incremental marking&quot;) DEFINE_bool(use_idle_notification, true, &quot;Use idle notification to reduce memory footprint.&quot;) DEFINE_bool(send_idle_notification, false, &quot;Send idle notifcation between stress runs.&quot;) DEFINE_bool(use_ic, true, &quot;use inline caching&quot;) DEFINE_bool(native_code_counters, false, &quot;generate extra code for manipulating stats counters&quot;) DEFINE_bool(always_compact, false, &quot;Perform compaction on every full GC&quot;) DEFINE_bool(lazy_sweeping, true, &quot;Use lazy sweeping for old pointer and data spaces&quot;) DEFINE_bool(never_compact, false, &quot;Never perform compaction on full GC-testing only&quot;) DEFINE_bool(compact_code_space, true, &quot;Compact code space on full non-incremental collections&quot;) DEFINE_bool(cleanup_code_caches_at_gc, true, &quot;Flush inline caches prior to mark compact collection and&quot; &quot;flush code caches in maps during mark compact cycle.&quot;) DEFINE_int(random_seed, 0, &quot;Default seed for initializing random generator&quot; &quot;(0, the default, means to use system random).&quot;) DEFINE_bool(use_verbose_printer, true, &quot;allows verbose printing&quot;) DEFINE_bool(allow_natives_syntax, false, &quot;allow natives syntax&quot;) DEFINE_bool(trace_sim, false, &quot;Trace simulator execution&quot;) DEFINE_bool(check_icache, false, &quot;Check icache flushes in ARM and MIPS simulator&quot;) DEFINE_int(stop_sim_at, 0, &quot;Simulator stop after x number of instructions&quot;) DEFINE_int(sim_stack_alignment, 8, &quot;Stack alingment in bytes in simulator(4 or 8, 8 is default)&quot;) DEFINE_bool(trace_exception, false, &quot;print stack trace when throwing exceptions&quot;) DEFINE_bool(preallocate_message_memory, false, &quot;preallocate some memory to build stack traces.&quot;) DEFINE_bool(randomize_hashes, true, &quot;randomize hashes to avoid predictable hash collisions&quot; &quot;(with snapshots this option cannot override the baked-in seed)&quot;) DEFINE_int(hash_seed, 0, &quot;Fixed seed to use to hash property keys(0 means random)&quot; &quot;(with snapshots this option cannot override the baked-in seed)&quot;) DEFINE_bool(preemption, false, &quot;activate a 100ms timer that switches between V8 threads&quot;) DEFINE_bool(regexp_optimization, true, &quot;generate optimized regexp code&quot;) DEFINE_bool(testing_bool_flag, true, &quot;testing_bool_flag&quot;) DEFINE_int(testing_int_flag, 13, &quot;testing_int_flag&quot;) DEFINE_float(testing_float_flag, 2.5, &quot;float-flag&quot;) DEFINE_string(testing_string_flag, &quot;Hello, world!&quot;, &quot;string-flag&quot;) DEFINE_int(testing_prng_seed, 42, &quot;Seed used for threading test randomness&quot;) DEFINE_string(testing_serialization_file, &quot;/tmp/serdes&quot;, &quot;file in which to serialize heap&quot;) DEFINE_bool(help, false, &quot;Print usage message, including flags, on console&quot;) DEFINE_bool(dump_counters, false, &quot;Dump counters on exit&quot;) DEFINE_string(map_counters, &quot;&quot;, &quot;Map counters to a file&quot;) DEFINE_args(js_arguments, JSARGUMENTS_INIT, &quot;Pass all remaining arguments to the script.Alias for\&quot;--\&quot;.&quot;) DEFINE_bool(debug_compile_events, true,&quot;Enable debugger compile events&quot;) DEFINE_bool(debug_script_collected_events, true,&quot;Enable debugger script collected events&quot;) DEFINE_bool(gdbjit, false,&quot;enable GDBJIT interface (disables compacting GC)&quot;) DEFINE_bool(gdbjit_full, false,&quot;enable GDBJIT interface for all code objects&quot;) DEFINE_bool(gdbjit_dump, false,&quot;dump elf objects with debug info to disk&quot;) DEFINE_string(gdbjit_dump_filter,&quot;&quot;,&quot;dump only objects containing this substring&quot;) DEFINE_bool(force_marking_deque_overflows, false,&quot;force overflows of marking deque by reducing it's size &quot;&quot;to 64 words&quot;) DEFINE_bool(stress_compaction, false,&quot;stress the GC compactor to flush out bugs (implies &quot;&quot;--force_marking_deque_overflows)&quot;)#define FLAG DEFINE_bool(enable_slow_asserts, false,&quot;enable asserts that are slow to execute&quot;) DEFINE_bool(trace_codegen, false,&quot;print name of functions for which code is generated&quot;) DEFINE_bool(print_source, false,&quot;pretty print source code&quot;) DEFINE_bool(print_builtin_source, false,&quot;pretty print source code for builtins&quot;) DEFINE_bool(print_ast, false,&quot;print source AST&quot;) DEFINE_bool(print_builtin_ast, false,&quot;print source AST for builtins&quot;) DEFINE_string(stop_at,&quot;&quot;,&quot;function name where to insert a breakpoint&quot;) DEFINE_bool(print_builtin_scopes, false,&quot;print scopes for builtins&quot;) DEFINE_bool(print_scopes, false,&quot;print scopes&quot;) DEFINE_bool(trace_contexts, false,&quot;trace contexts operations&quot;) DEFINE_bool(gc_greedy, false,&quot;perform GC prior to some allocations&quot;) DEFINE_bool(gc_verbose, false,&quot;print stuff during garbage collection&quot;) DEFINE_bool(heap_stats, false,&quot;report heap statistics before and after GC&quot;) DEFINE_bool(code_stats, false,&quot;report code statistics after GC&quot;) DEFINE_bool(verify_heap, false,&quot;verify heap pointers before and after GC&quot;) DEFINE_bool(print_handles, false,&quot;report handles after GC&quot;) DEFINE_bool(print_global_handles, false,&quot;report global handles after GC&quot;) DEFINE_bool(trace_ic, false,&quot;trace inline cache state transitions&quot;) DEFINE_bool(print_interfaces, false,&quot;print interfaces&quot;) DEFINE_bool(print_interface_details, false,&quot;print interface inference details&quot;) DEFINE_int(print_interface_depth, 5,&quot;depth for printing interfaces&quot;) DEFINE_bool(trace_normalization, false,&quot;prints when objects are turned into dictionaries.&quot;) DEFINE_bool(trace_lazy, false,&quot;trace lazy compilation&quot;) DEFINE_bool(collect_heap_spill_statistics, false,&quot;report heap spill statistics along with heap_stats &quot;&quot;(requires heap_stats)&quot;) DEFINE_bool(trace_isolates, false,&quot;trace isolate state changes&quot;) DEFINE_bool(log_state_changes, false,&quot;Log state changes.&quot;) DEFINE_bool(regexp_possessive_quantifier, false,&quot;enable possessive quantifier syntax for testing&quot;) DEFINE_bool(trace_regexp_bytecodes, false,&quot;trace regexp bytecode execution&quot;) DEFINE_bool(trace_regexp_assembler, false,&quot;trace regexp macro assembler calls.&quot;)#define FLAG DEFINE_bool(log, false,&quot;Minimal logging (no API, code, GC, suspect, or handles samples).&quot;) DEFINE_bool(log_all, false,&quot;Log all events to the log file.&quot;) DEFINE_bool(log_runtime, false,&quot;Activate runtime system %Log call.&quot;) DEFINE_bool(log_api, false,&quot;Log API events to the log file.&quot;) DEFINE_bool(log_code, false,&quot;Log code events to the log file without profiling.&quot;) DEFINE_bool(log_gc, false,&quot;Log heap samples on garbage collection for the hp2ps tool.&quot;) DEFINE_bool(log_handles, false,&quot;Log global handle events.&quot;) DEFINE_bool(log_snapshot_positions, false,&quot;log positions of (de)serialized objects in the snapshot.&quot;) DEFINE_bool(log_suspect, false,&quot;Log suspect operations.&quot;) DEFINE_bool(prof, false,&quot;Log statistical profiling information (implies --log-code).&quot;) DEFINE_bool(prof_auto, true,&quot;Used with --prof, starts profiling automatically&quot;) DEFINE_bool(prof_lazy, false,&quot;Used with --prof, only does sampling and logging&quot;&quot; when profiler is active (implies --noprof_auto).&quot;) DEFINE_bool(prof_browser_mode, true,&quot;Used with --prof, turns on browser-compatible mode for profiling.&quot;) DEFINE_bool(log_regexp, false,&quot;Log regular expression execution.&quot;) DEFINE_bool(sliding_state_window, false,&quot;Update sliding state window counters.&quot;) DEFINE_string(logfile,&quot;v8.log&quot;,&quot;Specify the name of the log file.&quot;) DEFINE_bool(ll_prof, false,&quot;Enable low-level linux profiler.&quot;)#define FLAG DEFINE_bool(trace_elements_transitions, false,&quot;trace elements transitions&quot;) DEFINE_bool(print_code_stubs, false,&quot;print code stubs&quot;) DEFINE_bool(test_secondary_stub_cache, false,&quot;test secondary stub cache by disabling the primary one&quot;) DEFINE_bool(test_primary_stub_cache, false,&quot;test primary stub cache by disabling the secondary one&quot;) DEFINE_bool(print_code, false,&quot;print generated code&quot;) DEFINE_bool(print_opt_code, false,&quot;print optimized code&quot;) DEFINE_bool(print_unopt_code, false,&quot;print unoptimized code before &quot;&quot;printing optimized code based on it&quot;) DEFINE_bool(print_code_verbose, false,&quot;print more information for code&quot;) DEFINE_bool(print_builtin_code, false,&quot;print generated code for builtins&quot;)#43&quot;/Users/thlorenz/dev/dx/v8-perf/build/v8/src/flags.cc&quot;2#define FLAG_MODE_DEFINE_DEFAULTS#1&quot;/Users/thlorenz/dev/dx/v8-perf/build/v8/src/flag-definitions.h&quot;1#define FLAG_FULL(ftype, ctype, nam, def, cmt)#define FLAG_READONLY(ftype, ctype, nam, def, cmt)#define DEFINE_implication(whenflag, thenflag)#define DEFINE_bool(nam, def, cmt)#define DEFINE_int(nam, def, cmt)#define DEFINE_float(nam, def, cmt)#define DEFINE_string(nam, def, cmt)#define DEFINE_args(nam, def, cmt)#define FLAG DEFINE_bool(use_strict, false,&quot;enforce strict mode&quot;) DEFINE_bool(es5_readonly, false,&quot;activate correct semantics for inheriting readonliness&quot;) DEFINE_bool(es52_globals, false,&quot;activate new semantics for global var declarations&quot;) DEFINE_bool(harmony_typeof, false,&quot;enable harmony semantics for typeof&quot;) DEFINE_bool(harmony_scoping, false,&quot;enable harmony block scoping&quot;) DEFINE_bool(harmony_modules, false,&quot;enable harmony modules (implies block scoping)&quot;) DEFINE_bool(harmony_proxies, false,&quot;enable harmony proxies&quot;) DEFINE_bool(harmony_collections, false,&quot;enable harmony collections (sets, maps, and weak maps)&quot;) DEFINE_bool(harmony, false,&quot;enable all harmony features (except typeof)&quot;) DEFINE_implication(harmony, harmony_scoping) DEFINE_implication(harmony, harmony_modules) DEFINE_implication(harmony, harmony_proxies) DEFINE_implication(harmony, harmony_collections) DEFINE_implication(harmony_modules, harmony_scoping) DEFINE_bool(packed_arrays, false,&quot;optimizes arrays that have no holes&quot;) DEFINE_bool(smi_only_arrays, true,&quot;tracks arrays with only smi values&quot;) DEFINE_bool(clever_optimizations, true,&quot;Optimize object size, Array shift, DOM strings and string +&quot;) DEFINE_bool(unbox_double_arrays, true,&quot;automatically unbox arrays of doubles&quot;) DEFINE_bool(string_slices, true,&quot;use string slices&quot;) DEFINE_bool(crankshaft, true,&quot;use crankshaft&quot;) DEFINE_string(hydrogen_filter,&quot;&quot;,&quot;optimization filter&quot;) DEFINE_bool(use_range, true,&quot;use hydrogen range analysis&quot;) DEFINE_bool(eliminate_dead_phis, true,&quot;eliminate dead phis&quot;) DEFINE_bool(use_gvn, true,&quot;use hydrogen global value numbering&quot;) DEFINE_bool(use_canonicalizing, true,&quot;use hydrogen instruction canonicalizing&quot;) DEFINE_bool(use_inlining, true,&quot;use function inlining&quot;) DEFINE_int(max_inlined_source_size, 600,&quot;maximum source size in bytes considered for a single inlining&quot;) DEFINE_int(max_inlined_nodes, 196,&quot;maximum number of AST nodes considered for a single inlining&quot;) DEFINE_int(max_inlined_nodes_cumulative, 196,&quot;maximum cumulative number of AST nodes considered for inlining&quot;) DEFINE_bool(loop_invariant_code_motion, true,&quot;loop invariant code motion&quot;) DEFINE_bool(collect_megamorphic_maps_from_stub_cache, true,&quot;crankshaft harvests type feedback from stub cache&quot;) DEFINE_bool(hydrogen_stats, false,&quot;print statistics for hydrogen&quot;) DEFINE_bool(trace_hydrogen, false,&quot;trace generated hydrogen to file&quot;) DEFINE_string(trace_phase,&quot;Z&quot;,&quot;trace generated IR for specified phases&quot;) DEFINE_bool(trace_inlining, false,&quot;trace inlining decisions&quot;) DEFINE_bool(trace_alloc, false,&quot;trace register allocator&quot;) DEFINE_bool(trace_all_uses, false,&quot;trace all use positions&quot;) DEFINE_bool(trace_range, false,&quot;trace range analysis&quot;) DEFINE_bool(trace_gvn, false,&quot;trace global value numbering&quot;) DEFINE_bool(trace_representation, false,&quot;trace representation types&quot;) DEFINE_bool(stress_pointer_maps, false,&quot;pointer map for every instruction&quot;) DEFINE_bool(stress_environments, false,&quot;environment for every instruction&quot;) DEFINE_int(deopt_every_n_times, 0,&quot;deoptimize every n times a deopt point is passed&quot;) DEFINE_bool(trap_on_deopt, false,&quot;put a break point before deoptimizing&quot;) DEFINE_bool(deoptimize_uncommon_cases, true,&quot;deoptimize uncommon cases&quot;) DEFINE_bool(polymorphic_inlining, true,&quot;polymorphic inlining&quot;) DEFINE_bool(use_osr, true,&quot;use on-stack replacement&quot;) DEFINE_bool(array_bounds_checks_elimination, false,&quot;perform array bounds checks elimination&quot;) DEFINE_bool(array_index_dehoisting, false,&quot;perform array index dehoisting&quot;) DEFINE_bool(trace_osr, false,&quot;trace on-stack replacement&quot;) DEFINE_int(stress_runs, 0,&quot;number of stress runs&quot;) DEFINE_bool(optimize_closures, true,&quot;optimize closures&quot;) DEFINE_bool(inline_construct, true,&quot;inline constructor calls&quot;) DEFINE_bool(inline_arguments, true,&quot;inline functions with arguments object&quot;) DEFINE_int(loop_weight, 1,&quot;loop weight for representation inference&quot;) DEFINE_bool(optimize_for_in, true,&quot;optimize functions containing for-in loops&quot;) DEFINE_bool(experimental_profiler, true,&quot;enable all profiler experiments&quot;) DEFINE_bool(watch_ic_patching, false,&quot;profiler considers IC stability&quot;) DEFINE_int(frame_count, 1,&quot;number of stack frames inspected by the profiler&quot;) DEFINE_bool(self_optimization, false,&quot;primitive functions trigger their own optimization&quot;) DEFINE_bool(direct_self_opt, false,&quot;call recompile stub directly when self-optimizing&quot;) DEFINE_bool(retry_self_opt, false,&quot;re-try self-optimization if it failed&quot;) DEFINE_bool(count_based_interrupts, false,&quot;trigger profiler ticks based on counting instead of timing&quot;) DEFINE_bool(interrupt_at_exit, false,&quot;insert an interrupt check at function exit&quot;) DEFINE_bool(weighted_back_edges, false,&quot;weight back edges by jump distance for interrupt triggering&quot;) DEFINE_int(interrupt_budget, 5900,&quot;execution budget before interrupt is triggered&quot;) DEFINE_int(type_info_threshold, 15,&quot;percentage of ICs that must have type info to allow optimization&quot;) DEFINE_int(self_opt_count, 130,&quot;call count before self-optimization&quot;) DEFINE_implication(experimental_profiler, watch_ic_patching) DEFINE_implication(experimental_profiler, self_optimization) DEFINE_implication(experimental_profiler, retry_self_opt) DEFINE_implication(experimental_profiler, count_based_interrupts) DEFINE_implication(experimental_profiler, interrupt_at_exit) DEFINE_implication(experimental_profiler, weighted_back_edges) DEFINE_bool(trace_opt_verbose, false,&quot;extra verbose compilation tracing&quot;) DEFINE_implication(trace_opt_verbose, trace_opt) DEFINE_bool(debug_code, false,&quot;generate extra code (assertions) for debugging&quot;) DEFINE_bool(code_comments, false,&quot;emit comments in code disassembly&quot;) DEFINE_bool(enable_sse2, true,&quot;enable use of SSE2 instructions if available&quot;) DEFINE_bool(enable_sse3, true,&quot;enable use of SSE3 instructions if available&quot;) DEFINE_bool(enable_sse4_1, true,&quot;enable use of SSE4.1 instructions if available&quot;) DEFINE_bool(enable_cmov, true,&quot;enable use of CMOV instruction if available&quot;) DEFINE_bool(enable_rdtsc, true,&quot;enable use of RDTSC instruction if available&quot;) DEFINE_bool(enable_sahf, true,&quot;enable use of SAHF instruction if available (X64 only)&quot;) DEFINE_bool(enable_vfp3, true,&quot;enable use of VFP3 instructions if available - this implies &quot;&quot;enabling ARMv7 instructions (ARM only)&quot;) DEFINE_bool(enable_armv7, true,&quot;enable use of ARMv7 instructions if available (ARM only)&quot;) DEFINE_bool(enable_fpu, true,&quot;enable use of MIPS FPU instructions if available (MIPS only)&quot;) DEFINE_string(expose_natives_as, NULL,&quot;expose natives in global object&quot;) DEFINE_string(expose_debug_as, NULL,&quot;expose debug in global object&quot;) DEFINE_bool(expose_gc, false,&quot;expose gc extension&quot;) DEFINE_bool(expose_externalize_string, false,&quot;expose externalize string extension&quot;) DEFINE_int(stack_trace_limit, 10,&quot;number of stack frames to capture&quot;) DEFINE_bool(builtins_in_stack_traces, false,&quot;show built-in functions in stack traces&quot;) DEFINE_bool(disable_native_files, false,&quot;disable builtin natives files&quot;) DEFINE_bool(inline_new, true,&quot;use fast inline allocation&quot;) DEFINE_bool(stack_trace_on_abort, true,&quot;print a stack trace if an assertion failure occurs&quot;) DEFINE_bool(trace, false,&quot;trace function calls&quot;) DEFINE_bool(mask_constants_with_cookie, true,&quot;use random jit cookie to mask large constants&quot;) DEFINE_bool(lazy, true,&quot;use lazy compilation&quot;) DEFINE_bool(trace_opt, false,&quot;trace lazy optimization&quot;) DEFINE_bool(trace_opt_stats, false,&quot;trace lazy optimization statistics&quot;) DEFINE_bool(opt, true,&quot;use adaptive optimizations&quot;) DEFINE_bool(always_opt, false,&quot;always try to optimize functions&quot;) DEFINE_bool(prepare_always_opt, false,&quot;prepare for turning on always opt&quot;) DEFINE_bool(trace_deopt, false,&quot;trace deoptimization&quot;) DEFINE_int(min_preparse_length, 1024,&quot;minimum length for automatic enable preparsing&quot;) DEFINE_bool(always_full_compiler, false,&quot;try to use the dedicated run-once backend for all code&quot;) DEFINE_bool(trace_bailout, false,&quot;print reasons for falling back to using the classic V8 backend&quot;) DEFINE_bool(compilation_cache, true,&quot;enable compilation cache&quot;) DEFINE_bool(cache_prototype_transitions, true,&quot;cache prototype transitions&quot;) DEFINE_bool(trace_debug_json, false,&quot;trace debugging JSON request/response&quot;) DEFINE_bool(debugger_auto_break, true,&quot;automatically set the debug break flag when debugger commands are &quot;&quot;in the queue&quot;) DEFINE_bool(enable_liveedit, true,&quot;enable liveedit experimental feature&quot;) DEFINE_bool(break_on_abort, true,&quot;always cause a debug break before aborting&quot;) DEFINE_int(stack_size, kPointerSize *123,&quot;default size of stack region v8 is allowed to use (in kBytes)&quot;) DEFINE_int(max_stack_trace_source_length, 300,&quot;maximum length of function source code printed in a stack trace.&quot;) DEFINE_bool(always_inline_smi_code, false,&quot;always inline smi code in non-opt code&quot;) DEFINE_int(max_new_space_size, 0,&quot;max size of the new generation (in kBytes)&quot;) DEFINE_int(max_old_space_size, 0,&quot;max size of the old generation (in Mbytes)&quot;) DEFINE_int(max_executable_size, 0,&quot;max size of executable memory (in Mbytes)&quot;) DEFINE_bool(gc_global, false,&quot;always perform global GCs&quot;) DEFINE_int(gc_interval,-1,&quot;garbage collect after &lt;n&gt; allocations&quot;) DEFINE_bool(trace_gc, false,&quot;print one trace line following each garbage collection&quot;) DEFINE_bool(trace_gc_nvp, false,&quot;print one detailed trace line in name=value format &quot;&quot;after each garbage collection&quot;) DEFINE_bool(print_cumulative_gc_stat, false,&quot;print cumulative GC statistics in name=value format on exit&quot;) DEFINE_bool(trace_gc_verbose, false,&quot;print more details following each garbage collection&quot;) DEFINE_bool(trace_fragmentation, false,&quot;report fragmentation for old pointer and data pages&quot;) DEFINE_bool(collect_maps, true,&quot;garbage collect maps from which no objects can be reached&quot;) DEFINE_bool(flush_code, true,&quot;flush code that we expect not to use again before full gc&quot;) DEFINE_bool(incremental_marking, true,&quot;use incremental marking&quot;) DEFINE_bool(incremental_marking_steps, true,&quot;do incremental marking steps&quot;) DEFINE_bool(trace_incremental_marking, false,&quot;trace progress of the incremental marking&quot;) DEFINE_bool(use_idle_notification, true,&quot;Use idle notification to reduce memory footprint.&quot;) DEFINE_bool(send_idle_notification, false,&quot;Send idle notifcation between stress runs.&quot;) DEFINE_bool(use_ic, true,&quot;use inline caching&quot;) DEFINE_bool(native_code_counters, false,&quot;generate extra code for manipulating stats counters&quot;) DEFINE_bool(always_compact, false,&quot;Perform compaction on every full GC&quot;) DEFINE_bool(lazy_sweeping, true,&quot;Use lazy sweeping for old pointer and data spaces&quot;) DEFINE_bool(never_compact, false,&quot;Never perform compaction on full GC - testing only&quot;) DEFINE_bool(compact_code_space, true,&quot;Compact code space on full non-incremental collections&quot;) DEFINE_bool(cleanup_code_caches_at_gc, true,&quot;Flush inline caches prior to mark compact collection and &quot;&quot;flush code caches in maps during mark compact cycle.&quot;) DEFINE_int(random_seed, 0,&quot;Default seed for initializing random generator &quot;&quot;(0, the default, means to use system random).&quot;) DEFINE_bool(use_verbose_printer, true,&quot;allows verbose printing&quot;) DEFINE_bool(allow_natives_syntax, false,&quot;allow natives syntax&quot;) DEFINE_bool(trace_sim, false,&quot;Trace simulator execution&quot;) DEFINE_bool(check_icache, false,&quot;Check icache flushes in ARM and MIPS simulator&quot;) DEFINE_int(stop_sim_at, 0,&quot;Simulator stop after x number of instructions&quot;) DEFINE_int(sim_stack_alignment, 8,&quot;Stack alingment in bytes in simulator (4 or 8, 8 is default)&quot;) DEFINE_bool(trace_exception, false,&quot;print stack trace when throwing exceptions&quot;) DEFINE_bool(preallocate_message_memory, false,&quot;preallocate some memory to build stack traces.&quot;) DEFINE_bool(randomize_hashes, true,&quot;randomize hashes to avoid predictable hash collisions &quot;&quot;(with snapshots this option cannot override the baked-in seed)&quot;) DEFINE_int(hash_seed, 0,&quot;Fixed seed to use to hash property keys (0 means random)&quot;&quot;(with snapshots this option cannot override the baked-in seed)&quot;) DEFINE_bool(preemption, false,&quot;activate a 100ms timer that switches between V8 threads&quot;) DEFINE_bool(regexp_optimization, true,&quot;generate optimized regexp code&quot;) DEFINE_bool(testing_bool_flag, true,&quot;testing_bool_flag&quot;) DEFINE_int(testing_int_flag, 13,&quot;testing_int_flag&quot;) DEFINE_float(testing_float_flag, 2.5,&quot;float-flag&quot;) DEFINE_string(testing_string_flag,&quot;Hello, world!&quot;,&quot;string-flag&quot;) DEFINE_int(testing_prng_seed, 42,&quot;Seed used for threading test randomness&quot;) DEFINE_string(testing_serialization_file,&quot;/tmp/serdes&quot;,&quot;file in which to serialize heap&quot;) DEFINE_bool(help, false,&quot;Print usage message, including flags, on console&quot;) DEFINE_bool(dump_counters, false,&quot;Dump counters on exit&quot;) DEFINE_string(map_counters,&quot;&quot;,&quot;Map counters to a file&quot;) DEFINE_args(js_arguments, JSARGUMENTS_INIT,&quot;Pass all remaining arguments to the script. Alias for \&quot;--\&quot;.&quot;) DEFINE_bool(debug_compile_events, true,&quot;Enable debugger compile events&quot;) DEFINE_bool(debug_script_collected_events, true,&quot;Enable debugger script collected events&quot;) DEFINE_bool(gdbjit, false,&quot;enable GDBJIT interface (disables compacting GC)&quot;) DEFINE_bool(gdbjit_full, false,&quot;enable GDBJIT interface for all code objects&quot;) DEFINE_bool(gdbjit_dump, false,&quot;dump elf objects with debug info to disk&quot;) DEFINE_string(gdbjit_dump_filter,&quot;&quot;,&quot;dump only objects containing this substring&quot;) DEFINE_bool(force_marking_deque_overflows, false,&quot;force overflows of marking deque by reducing it's size &quot;&quot;to 64 words&quot;) DEFINE_bool(stress_compaction, false,&quot;stress the GC compactor to flush out bugs (implies &quot;&quot;--force_marking_deque_overflows)&quot;)#define FLAG DEFINE_bool(enable_slow_asserts, false,&quot;enable asserts that are slow to execute&quot;) DEFINE_bool(trace_codegen, false,&quot;print name of functions for which code is generated&quot;) DEFINE_bool(print_source, false,&quot;pretty print source code&quot;) DEFINE_bool(print_builtin_source, false,&quot;pretty print source code for builtins&quot;) DEFINE_bool(print_ast, false,&quot;print source AST&quot;) DEFINE_bool(print_builtin_ast, false,&quot;print source AST for builtins&quot;) DEFINE_string(stop_at,&quot;&quot;,&quot;function name where to insert a breakpoint&quot;) DEFINE_bool(print_builtin_scopes, false,&quot;print scopes for builtins&quot;) DEFINE_bool(print_scopes, false,&quot;print scopes&quot;) DEFINE_bool(trace_contexts, false,&quot;trace contexts operations&quot;) DEFINE_bool(gc_greedy, false,&quot;perform GC prior to some allocations&quot;) DEFINE_bool(gc_verbose, false,&quot;print stuff during garbage collection&quot;) DEFINE_bool(heap_stats, false,&quot;report heap statistics before and after GC&quot;) DEFINE_bool(code_stats, false,&quot;report code statistics after GC&quot;) DEFINE_bool(verify_heap, false,&quot;verify heap pointers before and after GC&quot;) DEFINE_bool(print_handles, false,&quot;report handles after GC&quot;) DEFINE_bool(print_global_handles, false,&quot;report global handles after GC&quot;) DEFINE_bool(trace_ic, false,&quot;trace inline cache state transitions&quot;) DEFINE_bool(print_interfaces, false,&quot;print interfaces&quot;) DEFINE_bool(print_interface_details, false,&quot;print interface inference details&quot;) DEFINE_int(print_interface_depth, 5,&quot;depth for printing interfaces&quot;) DEFINE_bool(trace_normalization, false,&quot;prints when objects are turned into dictionaries.&quot;) DEFINE_bool(trace_lazy, false,&quot;trace lazy compilation&quot;) DEFINE_bool(collect_heap_spill_statistics, false,&quot;report heap spill statistics along with heap_stats &quot;&quot;(requires heap_stats)&quot;) DEFINE_bool(trace_isolates, false,&quot;trace isolate state changes&quot;) DEFINE_bool(log_state_changes, false,&quot;Log state changes.&quot;) DEFINE_bool(regexp_possessive_quantifier, false,&quot;enable possessive quantifier syntax for testing&quot;) DEFINE_bool(trace_regexp_bytecodes, false,&quot;trace regexp bytecode execution&quot;) DEFINE_bool(trace_regexp_assembler, false,&quot;trace regexp macro assembler calls.&quot;)#define FLAG DEFINE_bool(log, false,&quot;Minimal logging (no API, code, GC, suspect, or handles samples).&quot;) DEFINE_bool(log_all, false,&quot;Log all events to the log file.&quot;) DEFINE_bool(log_runtime, false,&quot;Activate runtime system %Log call.&quot;) DEFINE_bool(log_api, false,&quot;Log API events to the log file.&quot;) DEFINE_bool(log_code, false,&quot;Log code events to the log file without profiling.&quot;) DEFINE_bool(log_gc, false,&quot;Log heap samples on garbage collection for the hp2ps tool.&quot;) DEFINE_bool(log_handles, false,&quot;Log global handle events.&quot;) DEFINE_bool(log_snapshot_positions, false,&quot;log positions of (de)serialized objects in the snapshot.&quot;) DEFINE_bool(log_suspect, false,&quot;Log suspect operations.&quot;) DEFINE_bool(prof, false,&quot;Log statistical profiling information (implies --log-code).&quot;) DEFINE_bool(prof_auto, true,&quot;Used with --prof, starts profiling automatically&quot;) DEFINE_bool(prof_lazy, false,&quot;Used with --prof, only does sampling and logging&quot;&quot; when profiler is active (implies --noprof_auto).&quot;) DEFINE_bool(prof_browser_mode, true,&quot;Used with --prof, turns on browser-compatible mode for profiling.&quot;) DEFINE_bool(log_regexp, false,&quot;Log regular expression execution.&quot;) DEFINE_bool(sliding_state_window, false,&quot;Update sliding state window counters.&quot;) DEFINE_string(logfile,&quot;v8.log&quot;,&quot;Specify the name of the log file.&quot;) DEFINE_bool(ll_prof, false,&quot;Enable low-level linux profiler.&quot;)#define FLAG DEFINE_bool(trace_elements_transitions, false,&quot;trace elements transitions&quot;) DEFINE_bool(print_code_stubs, false,&quot;print code stubs&quot;) DEFINE_bool(test_secondary_stub_cache, false,&quot;test secondary stub cache by disabling the primary one&quot;) DEFINE_bool(test_primary_stub_cache, false,&quot;test primary stub cache by disabling the secondary one&quot;) DEFINE_bool(print_code, false,&quot;print generated code&quot;) DEFINE_bool(print_opt_code, false,&quot;print optimized code&quot;) DEFINE_bool(print_unopt_code, false,&quot;print unoptimized code before &quot;&quot;printing optimized code based on it&quot;) DEFINE_bool(print_code_verbose, false,&quot;print more information for code&quot;) DEFINE_bool(print_builtin_code, false,&quot;print generated code for builtins&quot;)#47&quot;/Users/thlorenz/dev/dx/v8-perf/build/v8/src/flags.cc&quot;2 namespace{struct Flag{enum FlagType{TYPE_BOOL, TYPE_INT, TYPE_FLOAT, TYPE_STRING, TYPE_ARGS} name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l01349">flags.cc:1349</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_object_html_a86ec1e2f09518b8f45695104f5653a32"><div class="ttname"><a href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a86ec1e2f09518b8f45695104f5653a32">v8::internal::HeapObject::cast</a></div><div class="ttdeci">static HeapObject * cast(Object *obj)</div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_html_a306bd25814bd1c8e9a575e1edb78a46c"><div class="ttname"><a href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">v8::internal::Handle::cast</a></div><div class="ttdeci">static Handle&lt; T &gt; cast(Handle&lt; S &gt; that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d23/handles_8h_source.html#l00081">handles.h:81</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_a73216d8eb8d243733bde732b0f18b3e7"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a73216d8eb8d243733bde732b0f18b3e7">v8::internal::LiveObjectList::Delete</a></div><div class="ttdeci">static bool Delete(int id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00275">liveobjectlist.h:275</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a77b688dbcc901242e5a4169c2580d836"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a77b688dbcc901242e5a4169c2580d836">v8::internal::OLD_POINTER_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00183">v8globals.h:183</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_a77ad624cc83a2a71aa4d5ad991d811d7"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a77ad624cc83a2a71aa4d5ad991d811d7">v8::internal::LiveObjectList::Reset</a></div><div class="ttdeci">static void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00292">liveobjectlist.h:292</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">v8::internal::kNonStrictMode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00398">globals.h:398</a></div></div>
<div class="ttc" id="liveobjectlist-inl_8h_html"><div class="ttname"><a href="../../d5/d44/liveobjectlist-inl_8h.html">liveobjectlist-inl.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_failure_html_a26cf87c8578198e52b6bd29e5c1bc78a"><div class="ttname"><a href="../../d7/d85/classv8_1_1internal_1_1_failure.html#a26cf87c8578198e52b6bd29e5c1bc78a">v8::internal::Failure::Exception</a></div><div class="ttdeci">static Failure * Exception()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01016">objects-inl.h:1016</a></div></div>
<div class="ttc" id="checks_8h_html"><div class="ttname"><a href="../../d5/d16/checks_8h.html">checks.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a1ce18484faed5e760ebd7f68a97cee08"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a1ce18484faed5e760ebd7f68a97cee08">v8::internal::CELL_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00187">v8globals.h:187</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a255e23fe4a4a6ac883a419cf9e178b7a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a255e23fe4a4a6ac883a419cf9e178b7a">v8::internal::type_</a></div><div class="ttdeci">FlagType type_</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l01351">flags.cc:1351</a></div></div>
<div class="ttc" id="checks_8h_html_ac22830a985e1daed0c9eadba8c6f606e"><div class="ttname"><a href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00270">checks.h:270</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_a4dc71d6943b6b835cfbe07757c3f24c1"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a4dc71d6943b6b835cfbe07757c3f24c1">v8::internal::LiveObjectList::Summarize</a></div><div class="ttdeci">static MaybeObject * Summarize(int id1, int id2, Handle&lt; JSObject &gt; filter_obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00286">liveobjectlist.h:286</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a877da585f7669eb7d4ba888938317230"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a877da585f7669eb7d4ba888938317230">v8::internal::false</a></div><div class="ttdeci">false</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00136">flags.cc:136</a></div></div>
<div class="ttc" id="inspector_8h_html"><div class="ttname"><a href="../../d0/d77/inspector_8h.html">inspector.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_shared_function_info_html_acf9b9f7e9418e47ef67bb1e9aacb3bb7"><div class="ttname"><a href="../../db/dc5/classv8_1_1internal_1_1_shared_function_info.html#acf9b9f7e9418e47ef67bb1e9aacb3bb7">v8::internal::SharedFunctionInfo::cast</a></div><div class="ttdeci">static SharedFunctionInfo * cast(Object *obj)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a52281dbab735b55bbbeaa582a46dcdc3af4d9160c31dacd4bc90170d1fda5566f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a52281dbab735b55bbbeaa582a46dcdc3af4d9160c31dacd4bc90170d1fda5566f">v8::internal::VISIT_ONLY_STRONG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00213">v8globals.h:213</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_a2e4056123d0c0945a48ee7b71f7c852a"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a2e4056123d0c0945a48ee7b71f7c852a">v8::internal::LiveObjectList::Info</a></div><div class="ttdeci">static MaybeObject * Info(int start_idx, int dump_limit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00283">liveobjectlist.h:283</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a009d1726309ffd4267223e1e62225f19"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a009d1726309ffd4267223e1e62225f19">v8::internal::FIRST_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00190">v8globals.h:190</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_adb5160267e5d43b44aff76bf463b8cff"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#adb5160267e5d43b44aff76bf463b8cff">v8::internal::sp</a></div><div class="ttdeci">const Register sp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00164">assembler-arm.h:164</a></div></div>
<div class="ttc" id="list-inl_8h_html"><div class="ttname"><a href="../../d7/dcb/list-inl_8h.html">list-inl.h</a></div></div>
<div class="ttc" id="checks_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00050">checks.h:50</a></div></div>
<div class="ttc" id="heap_8h_html"><div class="ttname"><a href="../../da/ddb/heap_8h.html">heap.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a31cef5fa9835a15a28b6e650d4a724d4"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a31cef5fa9835a15a28b6e650d4a724d4">v8::internal::StringToInt</a></div><div class="ttdeci">double StringToInt(UnicodeCache *unicode_cache, String *str, int radix)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dd0/v8conversions_8cc_source.html#l00107">v8conversions.cc:107</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7ac0e2df4a07dfb2b8f30ab86c5bc4561e"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7ac0e2df4a07dfb2b8f30ab86c5bc4561e">v8::internal::LO_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00188">v8globals.h:188</a></div></div>
<div class="ttc" id="string-stream_8h_html"><div class="ttname"><a href="../../d4/dc4/string-stream_8h.html">string-stream.h</a></div></div>
<div class="ttc" id="property-details_8h_html_ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2"><div class="ttname"><a href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00037">property-details.h:37</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0ff83451bc94a1105976297cc6b68676"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">v8::internal::Object</a></div><div class="ttdeci">Object</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03609">objects-inl.h:3609</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_a71d8d763c7a5feba8bbb9a65fdc4cc87"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a71d8d763c7a5feba8bbb9a65fdc4cc87">v8::internal::OS::FOpen</a></div><div class="ttdeci">static FILE * FOpen(const char *path, const char *mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d34/platform-posix_8cc_source.html#l00205">platform-posix.cc:205</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_a1236911ef77327491763b70ffaa8d924"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a1236911ef77327491763b70ffaa8d924">v8::internal::LiveObjectList::Dump</a></div><div class="ttdeci">static MaybeObject * Dump(int id1, int id2, int start_idx, int dump_limit, Handle&lt; JSObject &gt; filter_obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00276">liveobjectlist.h:276</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a52281dbab735b55bbbeaa582a46dcdc3a922f20caf3a928fb0fd6805d0a0246ce"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a52281dbab735b55bbbeaa582a46dcdc3a922f20caf3a928fb0fd6805d0a0246ce">v8::internal::VISIT_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00210">v8globals.h:210</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_aed98992f60ed207af7ca164c44f4fa69"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#aed98992f60ed207af7ca164c44f4fa69">v8::internal::LiveObjectList::GetObjRetainers</a></div><div class="ttdeci">static MaybeObject * GetObjRetainers(int obj_id, Handle&lt; JSObject &gt; instance_filter, bool verbose, int start, int count, Handle&lt; JSObject &gt; filter_obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00297">liveobjectlist.h:297</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a00e8464566c15cbc97c5c8c850309df7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">v8::internal::CStrVector</a></div><div class="ttdeci">Vector&lt; const char &gt; CStrVector(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00525">utils.h:525</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_array_html_a653d23f3b2d6de49fd47ce9b4418770c"><div class="ttname"><a href="../../da/dc0/classv8_1_1internal_1_1_j_s_array.html#a653d23f3b2d6de49fd47ce9b4418770c">v8::internal::JSArray::cast</a></div><div class="ttdeci">static JSArray * cast(Object *obj)</div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_a9032cdcad230f3cde4b521a6750884ff"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">v8::internal::OS::Print</a></div><div class="ttdeci">static void Print(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d19/platform-nullos_8cc_source.html#l00153">platform-nullos.cc:153</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_ac0bfad7b49b63e797573151f79007de5"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">v8::internal::OS::SNPrintF</a></div><div class="ttdeci">static int SNPrintF(Vector&lt; char &gt; str, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d19/platform-nullos_8cc_source.html#l00195">platform-nullos.cc:195</a></div></div>
<div class="ttc" id="isolate_8h_html_afbd09b56c7cdf48ff457909e030f1f74"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a></div><div class="ttdeci">#define ISOLATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l01410">isolate.h:1410</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_object_html_acb078b6cb1b3b54d007caacc1199e472"><div class="ttname"><a href="../../d8/df0/classv8_1_1internal_1_1_object.html#acb078b6cb1b3b54d007caacc1199e472">v8::internal::Object::cast</a></div><div class="ttdeci">static Object * cast(Object *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00962">objects.h:962</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7">v8::internal::AllocationSpace</a></div><div class="ttdeci">AllocationSpace</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00181">v8globals.h:181</a></div></div>
<div class="ttc" id="isolate_8h_html_a4e8c3dc786eeec70c7c26763ea3d2ef7"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a></div><div class="ttdeci">#define HEAP</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l01408">isolate.h:1408</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aecbfd5eea582393f36ad153207340efa"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aecbfd5eea582393f36ad153207340efa">v8::internal::NULL</a></div><div class="ttdeci">activate correct semantics for inheriting readonliness enable harmony semantics for typeof enable harmony enable harmony proxies enable all harmony harmony_scoping harmony_proxies harmony_scoping tracks arrays with only smi values automatically unbox arrays of doubles use crankshaft use hydrogen range analysis use hydrogen global value numbering use function inlining maximum number of AST nodes considered for a single inlining loop invariant code motion print statistics for hydrogen trace generated IR for specified phases trace register allocator trace range analysis trace representation types environment for every instruction put a break point before deoptimizing polymorphic inlining perform array bounds checks elimination trace on stack replacement optimize closures functions with arguments object optimize functions containing for in loops profiler considers IC stability primitive functions trigger their own optimization re try self optimization if it failed insert an interrupt check at function exit execution budget before interrupt is triggered call count before self optimization self_optimization count_based_interrupts weighted_back_edges trace_opt emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of SAHF instruction if enable use of VFP3 instructions if available this implies enabling ARMv7 enable use of ARMv7 instructions if enable use of MIPS FPU instructions if NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00274">flags.cc:274</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_a1f3cf2f5aec5fa807db04163bb1ede76"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a1f3cf2f5aec5fa807db04163bb1ede76">v8::internal::LiveObjectList::GetPath</a></div><div class="ttdeci">static Object * GetPath(int obj_id1, int obj_id2, Handle&lt; JSObject &gt; instance_filter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00306">liveobjectlist.h:306</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_fixed_array_html_ab72b1bdfe3d9d45e6b5a01348e6691eb"><div class="ttname"><a href="../../dc/d95/classv8_1_1internal_1_1_fixed_array.html#ab72b1bdfe3d9d45e6b5a01348e6691eb">v8::internal::FixedArray::cast</a></div><div class="ttdeci">static FixedArray * cast(Object *obj)</div></div>
<div class="ttc" id="isolate_8h_html_aedf6a97db5aec9c5da4cb045ac40c2df"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a></div><div class="ttdeci">#define FACTORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l01409">isolate.h:1409</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a24e1a8639b289696f776572551ef72e8a77d1efe50b803c100253d657e7e70892"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a24e1a8639b289696f776572551ef72e8a77d1efe50b803c100253d657e7e70892">v8::internal::ROBUST_STRING_TRAVERSAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l06772">objects.h:6772</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_aacdd305d9e060eea2b3b130833858d70"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#aacdd305d9e060eea2b3b130833858d70">v8::internal::LiveObjectList::GetObj</a></div><div class="ttdeci">static Object * GetObj(int obj_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00293">liveobjectlist.h:293</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_a3a4efd3c456dc52053aaf73440d6f58c"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a3a4efd3c456dc52053aaf73440d6f58c">v8::internal::LiveObjectList::Capture</a></div><div class="ttdeci">static MaybeObject * Capture()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00274">liveobjectlist.h:274</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_live_object_list_html_a386905f740d67578333b236b27e2802b"><div class="ttname"><a href="../../dc/d1b/classv8_1_1internal_1_1_live_object_list.html#a386905f740d67578333b236b27e2802b">v8::internal::LiveObjectList::PrintObj</a></div><div class="ttdeci">static Object * PrintObj(int obj_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/liveobjectlist_8h_source.html#l00311">liveobjectlist.h:311</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a314f14b7de3a35c2677c3a5875023100"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a314f14b7de3a35c2677c3a5875023100">v8::internal::Flush</a></div><div class="ttdeci">void Flush(FILE *out)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8a/v8utils_8cc_source.html#l00056">v8utils.cc:56</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a7662099826d64f2e3a55f97e48a147df"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a7662099826d64f2e3a55f97e48a147df">v8::internal::MAP_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00186">v8globals.h:186</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_a0d444b088be14dc4fbd481a82fa06fc7"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">v8::internal::Smi::kMaxValue</a></div><div class="ttdeci">static const int kMaxValue</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l01006">objects.h:1006</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_html_a6731a914158a930c66a680eb171737b5"><div class="ttname"><a href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a6731a914158a930c66a680eb171737b5">v8::internal::Heap::new_space</a></div><div class="ttdeci">NewSpace * new_space()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l00499">heap.h:499</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a71eae99f94708f14a222464c516ee645"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a71eae99f94708f14a222464c516ee645">v8::internal::CODE_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00185">v8globals.h:185</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">v8::internal::NEW_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00182">v8globals.h:182</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_object_html_aaece615f06206074f36ad5c62efe4361"><div class="ttname"><a href="../../d7/da2/classv8_1_1internal_1_1_j_s_object.html#aaece615f06206074f36ad5c62efe4361">v8::internal::JSObject::cast</a></div><div class="ttdeci">static JSObject * cast(Object *obj)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_af325044478c719d86be7dc7a017f250a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">v8::internal::type</a></div><div class="ttdeci">FlagType type() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l01358">flags.cc:1358</a></div></div>
<div class="ttc" id="isolate_8h_html"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html">isolate.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a801401fbd4894dd3bf8163a4403b9fe7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a801401fbd4894dd3bf8163a4403b9fe7">v8::internal::OLD_DATA_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00184">v8globals.h:184</a></div></div>
<div class="ttc" id="global-handles_8h_html"><div class="ttname"><a href="../../df/d6c/global-handles_8h.html">global-handles.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_function_html_aadcf8f00ff5f932119b67a97c33762da"><div class="ttname"><a href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">v8::internal::JSFunction::cast</a></div><div class="ttdeci">static JSFunction * cast(Object *obj)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../db/da1/liveobjectlist_8cc.html">liveobjectlist.cc</a></li>
    <li class="footer">Generated on Sat Jun 7 2014 23:32:11 for v8 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
