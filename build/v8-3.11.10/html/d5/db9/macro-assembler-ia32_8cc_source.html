<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>v8: src/ia32/macro-assembler-ia32.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../v8-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">v8
   &#160;<span id="projectnumber">3.11.10(node0.8.26)</span>
   </div>
   <div id="projectbrief">V8 is Google&#39;s open source JavaScript engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/db9/macro-assembler-ia32_8cc_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">macro-assembler-ia32.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/db9/macro-assembler-ia32_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// modification, are permitted provided that the following conditions are</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// met:</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//     * Redistributions in binary form must reproduce the above</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//       copyright notice, this list of conditions and the following</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//       disclaimer in the documentation and/or other materials provided</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//       with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//     * Neither the name of Google Inc. nor the names of its</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//       contributors may be used to endorse or promote products derived</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//       from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;v8.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#if defined(V8_TARGET_ARCH_IA32)</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d41/bootstrapper_8h.html">bootstrapper.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d39/codegen_8h.html">codegen.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d16/debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d51/runtime_8h.html">runtime.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d9d/serialize_8h.html">serialize.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">namespace </span>v8 {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">namespace </span>internal {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// -------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// MacroAssembler implementation.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<a class="code" href="../../d8/db1/classv8_1_1internal_1_1_macro_assembler.html#adf95c7bdba7635e6435320dabd72edc2">MacroAssembler::MacroAssembler</a>(Isolate* arg_isolate, <span class="keywordtype">void</span>* buffer, <span class="keywordtype">int</span> size)</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    : Assembler(arg_isolate, buffer, size),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      generating_stub_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a877da585f7669eb7d4ba888938317230">false</a>),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      allow_stub_calls_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#adf8c5e55ff648830ec482327b2e63b28">true</a>),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      has_frame_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a877da585f7669eb7d4ba888938317230">false</a>) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">if</span> (isolate() != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    code_object_ = Handle&lt;Object&gt;(isolate()-&gt;heap()-&gt;undefined_value(),</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                  isolate());</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InNewSpace(</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    Register scratch,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0fb80d1e7fafc4b00df717805a1c83ea">cc</a>,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    Label* condition_met,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    Label::Distance condition_met_distance) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(cc == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a> || cc == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span> (scratch.is(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    and_(scratch, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    mov(scratch, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    and_(scratch, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// Check that we can use a test_b.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(MemoryChunk::IN_FROM_SPACE &lt; 8);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(MemoryChunk::IN_TO_SPACE &lt; 8);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordtype">int</span> mask = (1 &lt;&lt; MemoryChunk::IN_FROM_SPACE)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;           | (1 &lt;&lt; MemoryChunk::IN_TO_SPACE);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// If non-zero, the page belongs to new-space.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  test_b(Operand(scratch, MemoryChunk::kFlagsOffset),</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;         static_cast&lt;uint8_t&gt;(mask));</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  j(cc, condition_met, condition_met_distance);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RememberedSetHelper(</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    Register <span class="keywordtype">object</span>,  <span class="comment">// Only used for debug checks.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    Register addr,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    Register scratch,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> save_fp,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    MacroAssembler::RememberedSetFinalAction and_then) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  Label done;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">if</span> (FLAG_debug_code) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    Label ok;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    JumpIfNotInNewSpace(<span class="keywordtype">object</span>, scratch, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    int3();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// Load store buffer top.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  ExternalReference store_buffer =</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      ExternalReference::store_buffer_top(isolate());</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  mov(scratch, Operand::StaticVariable(store_buffer));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// Store pointer to buffer.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  mov(Operand(scratch, 0), addr);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// Increment buffer top.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  add(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// Write back new top of buffer.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  mov(Operand::StaticVariable(store_buffer), scratch);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// Call stub on end of buffer.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// Check for end of buffer.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  test(scratch, Immediate(StoreBuffer::kStoreBufferOverflowBit));</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (and_then == kReturnAtEnd) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    Label buffer_overflowed;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;buffer_overflowed, Label::kNear);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    ret(0);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    bind(&amp;buffer_overflowed);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(and_then == kFallThroughAtEnd);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  StoreBufferOverflowStub store_buffer_overflow =</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      StoreBufferOverflowStub(save_fp);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  CallStub(&amp;store_buffer_overflow);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">if</span> (and_then == kReturnAtEnd) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    ret(0);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(and_then == kFallThroughAtEnd);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    bind(&amp;done);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keywordtype">void</span> MacroAssembler::ClampDoubleToUint8(XMMRegister input_reg,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                        XMMRegister scratch_reg,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                        Register result_reg) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  Label done;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  ExternalReference zero_ref = ExternalReference::address_of_zero();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  movdbl(scratch_reg, Operand::StaticVariable(zero_ref));</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  Set(result_reg, Immediate(0));</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  ucomisd(input_reg, scratch_reg);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">below</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  ExternalReference half_ref = ExternalReference::address_of_one_half();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  movdbl(scratch_reg, Operand::StaticVariable(half_ref));</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  addsd(scratch_reg, input_reg);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  cvttsd2si(result_reg, Operand(scratch_reg));</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  test(result_reg, Immediate(0xFFFFFF00));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  Set(result_reg, Immediate(255));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keywordtype">void</span> MacroAssembler::ClampUint8(Register reg) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  Label done;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  test(reg, Immediate(0xFFFFFF00));</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  setcc(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a90286bd943f9eeda91de18b38aee2d37">negative</a>, reg);  <span class="comment">// 1 if negative, 0 if positive.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  dec_b(reg);  <span class="comment">// 0 if negative, 255 if positive.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RecordWriteArray(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                      Register value,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                      Register index,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> save_fp,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56">RememberedSetAction</a> remembered_set_action,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4">SmiCheck</a> smi_check) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// First, check if a write barrier is even needed. The tests below</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// catch stores of Smis.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  Label done;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// Skip barrier if writing a smi.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">if</span> (smi_check == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134">INLINE_SMI_CHECK</a>) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    test(value, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;done);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// Array access: calculate the destination address in the same manner as</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// KeyedStoreIC::GenerateGeneric.  Multiply a smi by 2 to get an offset</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// into an array of words.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  Register dst = index;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  lea(dst, Operand(<span class="keywordtype">object</span>, index, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa52f2da6781b2f6f5de86b0f87e101d74">times_half_pointer_size</a>,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                   FixedArray::kHeaderSize - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  RecordWrite(</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordtype">object</span>, dst, value, save_fp, remembered_set_action, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a819e97a39906a4b5a6f6eeb9a82efaea">OMIT_SMI_CHECK</a>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// Clobber clobbered input registers when running with the debug-code flag</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// turned on to provoke errors.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    mov(value, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    mov(index, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RecordWriteField(</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">int</span> offset,</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    Register value,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    Register dst,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> save_fp,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56">RememberedSetAction</a> remembered_set_action,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4">SmiCheck</a> smi_check) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// First, check if a write barrier is even needed. The tests below</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// catch stores of Smis.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  Label done;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// Skip barrier if writing a smi.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">if</span> (smi_check == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134">INLINE_SMI_CHECK</a>) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    JumpIfSmi(value, &amp;done, Label::kNear);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// Although the object register is tagged, the offset is relative to the start</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// of the object, so so offset must be a multiple of kPointerSize.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ada66adab5e750853950daf4371db1392">IsAligned</a>(offset, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  lea(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, offset));</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    Label ok;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    test_b(dst, (1 &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>) - 1);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    int3();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  RecordWrite(</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordtype">object</span>, dst, value, save_fp, remembered_set_action, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a819e97a39906a4b5a6f6eeb9a82efaea">OMIT_SMI_CHECK</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// Clobber clobbered input registers when running with the debug-code flag</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// turned on to provoke errors.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    mov(value, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    mov(dst, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RecordWriteForMap(</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    Handle&lt;Map&gt; map,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    Register scratch1,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    Register scratch2,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> save_fp) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  Label done;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  Register address = scratch1;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  Register value = scratch2;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    Label ok;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    lea(address, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    test_b(address, (1 &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>) - 1);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    int3();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<span class="keywordtype">object</span>.is(value));</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<span class="keywordtype">object</span>.is(address));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!value.is(address));</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    AbortIfSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (!FLAG_incremental_marking) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// A single check of the map&#39;s pages interesting flag suffices, since it is</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// only set during incremental collection, and then it&#39;s also guaranteed that</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// the from object&#39;s page&#39;s interesting flag is also set.  This optimization</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// relies on the fact that maps can never be in new space.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!isolate()-&gt;heap()-&gt;InNewSpace(*map));</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  CheckPageFlagForMap(map,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                      MemoryChunk::kPointersToHereAreInterestingMask,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                      &amp;done,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                      Label::kNear);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// Delay the initialization of |address| and |value| for the stub until it&#39;s</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// known that the will be needed. Up until this point their values are not</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// needed since they are embedded in the operands of instructions that need</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// them.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  lea(address, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  mov(value, Immediate(map));</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  RecordWriteStub stub(<span class="keywordtype">object</span>, value, address, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56a0281060991aef42d86dcf437f5dbb1a1">OMIT_REMEMBERED_SET</a>, save_fp);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  CallStub(&amp;stub);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// Clobber clobbered input registers when running with the debug-code flag</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// turned on to provoke errors.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    mov(value, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    mov(scratch1, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    mov(scratch2, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RecordWrite(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                 Register address,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                 Register value,</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> fp_mode,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56">RememberedSetAction</a> remembered_set_action,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4">SmiCheck</a> smi_check) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<span class="keywordtype">object</span>.is(value));</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<span class="keywordtype">object</span>.is(address));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!value.is(address));</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    AbortIfSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">if</span> (remembered_set_action == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56a0281060991aef42d86dcf437f5dbb1a1">OMIT_REMEMBERED_SET</a> &amp;&amp;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      !FLAG_incremental_marking) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (FLAG_debug_code) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    Label ok;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    cmp(value, Operand(address, 0));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    int3();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// First, check if a write barrier is even needed. The tests below</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// catch stores of Smis and stores into young gen.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  Label done;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">if</span> (smi_check == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134">INLINE_SMI_CHECK</a>) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// Skip barrier if writing a smi.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    JumpIfSmi(value, &amp;done, Label::kNear);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  CheckPageFlag(value,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                value,  <span class="comment">// Used as scratch.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                MemoryChunk::kPointersToHereAreInterestingMask,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                &amp;done,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                Label::kNear);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  CheckPageFlag(<span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                value,  <span class="comment">// Used as scratch.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                MemoryChunk::kPointersFromHereAreInterestingMask,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                &amp;done,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                Label::kNear);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  RecordWriteStub stub(<span class="keywordtype">object</span>, value, address, remembered_set_action, fp_mode);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  CallStub(&amp;stub);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// Clobber clobbered registers when running with the debug-code flag</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// turned on to provoke errors.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    mov(address, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    mov(value, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="keywordtype">void</span> MacroAssembler::DebugBreak() {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Immediate(0));</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, Immediate(ExternalReference(Runtime::kDebugBreak, isolate())));</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  CEntryStub ces(1);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  call(ces.GetCode(), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a07f7ee0250996c5e40a8f8e5e9a0d7a5a6c0c338932b450afc64a0224b4d47baa">RelocInfo::DEBUG_BREAK</a>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Set(Register dst, <span class="keyword">const</span> Immediate&amp; x) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span> (x.is_zero()) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    xor_(dst, dst);  <span class="comment">// Shorter than mov.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    mov(dst, x);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Set(<span class="keyword">const</span> Operand&amp; dst, <span class="keyword">const</span> Immediate&amp; x) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  mov(dst, x);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="keywordtype">bool</span> MacroAssembler::IsUnsafeImmediate(<span class="keyword">const</span> Immediate&amp; x) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxImmediateBits = 17;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span> (x.rmode_ != <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">RelocInfo::NONE</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a149b900bdc46365c37413a7132589939">is_intn</a>(x.x_, kMaxImmediateBits);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SafeSet(Register dst, <span class="keyword">const</span> Immediate&amp; x) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span> (IsUnsafeImmediate(x) &amp;&amp; jit_cookie() != 0) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    Set(dst, Immediate(x.x_ ^ jit_cookie()));</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    xor_(dst, jit_cookie());</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    Set(dst, x);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;}</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SafePush(<span class="keyword">const</span> Immediate&amp; x) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (IsUnsafeImmediate(x) &amp;&amp; jit_cookie() != 0) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    push(Immediate(x.x_ ^ jit_cookie()));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    xor_(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, 0), Immediate(jit_cookie()));</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    push(x);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CompareRoot(Register with, Heap::RootListIndex index) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// see ROOT_ACCESSOR macro in factory.h</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  Handle&lt;Object&gt; value(&amp;isolate()-&gt;heap()-&gt;roots_array_start()[index]);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  cmp(with, value);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CompareRoot(<span class="keyword">const</span> Operand&amp; with,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                 Heap::RootListIndex index) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// see ROOT_ACCESSOR macro in factory.h</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  Handle&lt;Object&gt; value(&amp;isolate()-&gt;heap()-&gt;roots_array_start()[index]);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  cmp(with, value);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CmpObjectType(Register heap_object,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27">InstanceType</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                   Register map) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  mov(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(heap_object, HeapObject::kMapOffset));</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  CmpInstanceType(map, type);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CmpInstanceType(Register map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27">InstanceType</a> type) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceTypeOffset),</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;       static_cast&lt;int8_t&gt;(type));</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckFastElements(Register map,</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                       Label* fail,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                       Label::Distance distance) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">FAST_SMI_ELEMENTS</a> == 0);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">FAST_HOLEY_SMI_ELEMENTS</a> == 1);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91">FAST_ELEMENTS</a> == 2);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6">FAST_HOLEY_ELEMENTS</a> == 3);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField2Offset),</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;       Map::kMaximumBitField2FastHoleyElementValue);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, fail, distance);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckFastObjectElements(Register map,</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                             Label* fail,</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                             Label::Distance distance) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">FAST_SMI_ELEMENTS</a> == 0);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">FAST_HOLEY_SMI_ELEMENTS</a> == 1);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91">FAST_ELEMENTS</a> == 2);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6">FAST_HOLEY_ELEMENTS</a> == 3);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField2Offset),</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;       Map::kMaximumBitField2FastHoleySmiElementValue);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">below_equal</a>, fail, distance);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField2Offset),</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;       Map::kMaximumBitField2FastHoleyElementValue);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, fail, distance);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckFastSmiElements(Register map,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                          Label* fail,</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                          Label::Distance distance) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">FAST_SMI_ELEMENTS</a> == 0);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">FAST_HOLEY_SMI_ELEMENTS</a> == 1);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField2Offset),</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;       Map::kMaximumBitField2FastHoleySmiElementValue);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, fail, distance);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StoreNumberToDoubleElements(</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    Register maybe_number,</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    Register elements,</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    Register key,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    Register scratch1,</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    XMMRegister scratch2,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    Label* fail,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">bool</span> specialize_for_processor) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  Label smi_value, done, maybe_nan, not_nan, is_nan, have_double_value;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  JumpIfSmi(maybe_number, &amp;smi_value, Label::kNear);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  CheckMap(maybe_number,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;           isolate()-&gt;factory()-&gt;heap_number_map(),</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;           fail,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;           <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251a68f546db1d78edd21e128b742d2403dc">DONT_DO_SMI_CHECK</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// Double value, canonicalize NaN.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  uint32_t offset = HeapNumber::kValueOffset + <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a818786d91ba77192f22d97260f817d77">kHoleNanLower32</a>);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(maybe_number, offset),</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2723148e93023c30ba2f0bd2aed0257a">kNaNOrInfinityLowerBoundUpper32</a>));</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a2d5a0f84387e38e44f9a7663b66eddb3">greater_equal</a>, &amp;maybe_nan, Label::kNear);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  bind(&amp;not_nan);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  ExternalReference canonical_nan_reference =</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      ExternalReference::address_of_canonical_non_hole_nan();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordflow">if</span> (CpuFeatures::IsSupported(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">SSE2</a>) &amp;&amp; specialize_for_processor) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    CpuFeatures::Scope use_sse2(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">SSE2</a>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    movdbl(scratch2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(maybe_number, HeapNumber::kValueOffset));</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    bind(&amp;have_double_value);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    movdbl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, key, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, FixedDoubleArray::kHeaderSize),</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;           scratch2);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    fld_d(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(maybe_number, HeapNumber::kValueOffset));</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    bind(&amp;have_double_value);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    fstp_d(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, key, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, FixedDoubleArray::kHeaderSize));</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  jmp(&amp;done);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  bind(&amp;maybe_nan);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// Could be NaN or Infinity. If fraction is not zero, it&#39;s NaN, otherwise</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// it&#39;s an Infinity, and the non-NaN code path applies.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8ab67380aeceb97932170fbca2bcdf965f">greater</a>, &amp;is_nan, Label::kNear);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(maybe_number, HeapNumber::kValueOffset), Immediate(0));</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;not_nan);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  bind(&amp;is_nan);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">if</span> (CpuFeatures::IsSupported(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">SSE2</a>) &amp;&amp; specialize_for_processor) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    CpuFeatures::Scope use_sse2(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">SSE2</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    movdbl(scratch2, Operand::StaticVariable(canonical_nan_reference));</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    fld_d(Operand::StaticVariable(canonical_nan_reference));</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  jmp(&amp;have_double_value, Label::kNear);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  bind(&amp;smi_value);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// Value is a smi. Convert to a double and store.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// Preserve original value.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  mov(scratch1, maybe_number);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  SmiUntag(scratch1);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">if</span> (CpuFeatures::IsSupported(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">SSE2</a>) &amp;&amp; specialize_for_processor) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    CpuFeatures::Scope fscope(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">SSE2</a>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    cvtsi2sd(scratch2, scratch1);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    movdbl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, key, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, FixedDoubleArray::kHeaderSize),</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;           scratch2);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    push(scratch1);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    fild_s(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, 0));</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    pop(scratch1);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    fstp_d(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, key, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, FixedDoubleArray::kHeaderSize));</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CompareMap(Register obj,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                                Handle&lt;Map&gt; map,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                Label* early_success,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa3dc8d2237f792b4fc7ac64f4d626878">CompareMapMode</a> mode) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(obj, HeapObject::kMapOffset), map);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">if</span> (mode == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa3dc8d2237f792b4fc7ac64f4d626878ae5bc121adaee1e093a70b16735b60909">ALLOW_ELEMENT_TRANSITION_MAPS</a>) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017">ElementsKind</a> kind = map-&gt;elements_kind();</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a915c289a31a33b4c18de441e4a1e5aab">IsFastElementsKind</a>(kind)) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordtype">bool</span> packed = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a75d3ad581521afd012eb61ef19196d31">IsFastPackedElementsKind</a>(kind);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      Map* current_map = *map;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a23cc6b3a9026e6e9255f75e0ecdbc500">CanTransitionToMoreGeneralFastElementsKind</a>(kind, packed)) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        kind = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6d70ea3f1d301fc9ee97b592f9791267">GetNextMoreGeneralFastElementsKind</a>(kind, packed);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        current_map = current_map-&gt;LookupElementsTransitionMap(kind);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">if</span> (!current_map) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, early_success, Label::kNear);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(obj, HeapObject::kMapOffset),</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            Handle&lt;Map&gt;(current_map));</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckMap(Register obj,</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                              Handle&lt;Map&gt; map,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                              Label* fail,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                              <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251">SmiCheckType</a> smi_check_type,</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                              <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa3dc8d2237f792b4fc7ac64f4d626878">CompareMapMode</a> mode) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (smi_check_type == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1">DO_SMI_CHECK</a>) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    JumpIfSmi(obj, fail);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  Label success;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  CompareMap(obj, map, &amp;success, mode);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, fail);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  bind(&amp;success);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="keywordtype">void</span> MacroAssembler::DispatchMap(Register obj,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                 Handle&lt;Map&gt; map,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                                 Handle&lt;Code&gt; success,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251">SmiCheckType</a> smi_check_type) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  Label fail;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">if</span> (smi_check_type == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1">DO_SMI_CHECK</a>) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    JumpIfSmi(obj, &amp;fail);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(obj, HeapObject::kMapOffset), Immediate(map));</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, success);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  bind(&amp;fail);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::IsObjectStringType(Register heap_object,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                             Register map,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                             Register instance_type) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  mov(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(heap_object, HeapObject::kMapOffset));</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  movzx_b(instance_type, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">kNotStringTag</a> != 0);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  test(instance_type, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a>));</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IsObjectJSObjectType(Register heap_object,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                                          Register map,</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                          Register scratch,</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                                          Label* fail) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  mov(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(heap_object, HeapObject::kMapOffset));</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  IsInstanceJSObjectType(map, scratch, fail);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;}</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IsInstanceJSObjectType(Register map,</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                            Register scratch,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                            Label* fail) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  movzx_b(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  sub(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ae0fb0de14793fcfd1fb9a841436003e1">FIRST_NONCALLABLE_SPEC_OBJECT_TYPE</a>));</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  cmp(scratch,</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a27e7e0d72e031a1f8cf71a9a7fdefaa7">LAST_NONCALLABLE_SPEC_OBJECT_TYPE</a> - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ae0fb0de14793fcfd1fb9a841436003e1">FIRST_NONCALLABLE_SPEC_OBJECT_TYPE</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, fail);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="keywordtype">void</span> MacroAssembler::FCmp() {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">if</span> (CpuFeatures::IsSupported(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34aec3e8ba892adc4128a6d6570e00af9b0">CMOV</a>)) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    fucomip();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    fstp(0);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    fucompp();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    fnstsw_ax();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    sahf();</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AbortIfNotNumber(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  Label ok;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  JumpIfSmi(<span class="keywordtype">object</span>, &amp;ok);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapObject::kMapOffset),</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      isolate()-&gt;factory()-&gt;heap_number_map());</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, <span class="stringliteral">&quot;Operand not a number&quot;</span>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  bind(&amp;ok);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AbortIfNotSmi(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  test(<span class="keywordtype">object</span>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, <span class="stringliteral">&quot;Operand is not a smi&quot;</span>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;}</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AbortIfNotString(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  test(<span class="keywordtype">object</span>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, <span class="stringliteral">&quot;Operand is not a string&quot;</span>);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  push(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  mov(<span class="keywordtype">object</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  CmpInstanceType(<span class="keywordtype">object</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ad939c92fc47b6c3f29db6cfbc8569cbf">FIRST_NONSTRING_TYPE</a>);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  pop(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">below</a>, <span class="stringliteral">&quot;Operand is not a string&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AbortIfSmi(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  test(<span class="keywordtype">object</span>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, <span class="stringliteral">&quot;Operand is a smi&quot;</span>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterFrame(StackFrame::Type type) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  push(Immediate(Smi::FromInt(type)));</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  push(Immediate(CodeObject()));</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    cmp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, 0), Immediate(isolate()-&gt;factory()-&gt;undefined_value()));</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, <span class="stringliteral">&quot;code object not properly patched&quot;</span>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LeaveFrame(StackFrame::Type type) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    cmp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, StandardFrameConstants::kMarkerOffset),</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        Immediate(Smi::FromInt(type)));</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, <span class="stringliteral">&quot;stack frame types must match&quot;</span>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  leave();</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;}</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterExitFramePrologue() {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// Set up the frame structure on the stack.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(ExitFrameConstants::kCallerSPDisplacement == +2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(ExitFrameConstants::kCallerPCOffset == +1 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(ExitFrameConstants::kCallerFPOffset ==  0 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="comment">// Reserve room for entry stack pointer and push the code object.</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(ExitFrameConstants::kSPOffset  == -1 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  push(Immediate(0));  <span class="comment">// Saved entry sp, patched before call.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  push(Immediate(CodeObject()));  <span class="comment">// Accessed from ExitFrame::code_slot.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// Save the frame pointer and the context in top.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  ExternalReference c_entry_fp_address(Isolate::kCEntryFPAddress,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                       isolate());</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  ExternalReference context_address(Isolate::kContextAddress,</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                                    isolate());</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  mov(Operand::StaticVariable(c_entry_fp_address), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  mov(Operand::StaticVariable(context_address), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterExitFrameEpilogue(<span class="keywordtype">int</span> argc, <span class="keywordtype">bool</span> save_doubles) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// Optionally save all XMM registers.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">if</span> (save_doubles) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    CpuFeatures::Scope scope(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">SSE2</a>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordtype">int</span> space = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9485caadcdbab9ac567ff1ec54e554">XMMRegister::kNumRegisters</a> * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a> + argc * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    sub(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(space));</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> offset = -2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9485caadcdbab9ac567ff1ec54e554">XMMRegister::kNumRegisters</a>; i++) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      XMMRegister reg = XMMRegister::from_code(i);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      movdbl(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, offset - ((i + 1) * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>)), reg);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    sub(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(argc * kPointerSize));</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="comment">// Get the required frame alignment for the OS.</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFrameAlignment = OS::ActivationFrameAlignment();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordflow">if</span> (kFrameAlignment &gt; 0) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">IsPowerOf2</a>(kFrameAlignment));</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    and_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, -kFrameAlignment);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// Patch the saved entry sp.</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  mov(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, ExitFrameConstants::kSPOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;}</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterExitFrame(<span class="keywordtype">bool</span> save_doubles) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  EnterExitFramePrologue();</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// Set up argc and argv in callee-saved registers.</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keywordtype">int</span> offset = StandardFrameConstants::kCallerSPOffset - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  lea(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, offset));</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// Reserve space for argc, argv and isolate.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  EnterExitFrameEpilogue(3, save_doubles);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;}</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterApiExitFrame(<span class="keywordtype">int</span> argc) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  EnterExitFramePrologue();</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  EnterExitFrameEpilogue(argc, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;}</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LeaveExitFrame(<span class="keywordtype">bool</span> save_doubles) {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// Optionally restore all XMM registers.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">if</span> (save_doubles) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    CpuFeatures::Scope scope(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">SSE2</a>);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> offset = -2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9485caadcdbab9ac567ff1ec54e554">XMMRegister::kNumRegisters</a>; i++) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      XMMRegister reg = XMMRegister::from_code(i);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      movdbl(reg, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, offset - ((i + 1) * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>)));</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// Get the return address from the stack and restore the frame pointer.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, 1 * kPointerSize));</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, 0 * kPointerSize));</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// Pop the arguments and the receiver from the caller stack.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  lea(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, 1 * kPointerSize));</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// Push the return address to get ready to return.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  LeaveExitFrameEpilogue();</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;}</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LeaveExitFrameEpilogue() {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// Restore current context from top and clear it in debug mode.</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  ExternalReference context_address(Isolate::kContextAddress, isolate());</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, Operand::StaticVariable(context_address));</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  mov(Operand::StaticVariable(context_address), Immediate(0));</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// Clear the top frame.</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  ExternalReference c_entry_fp_address(Isolate::kCEntryFPAddress,</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                                       isolate());</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  mov(Operand::StaticVariable(c_entry_fp_address), Immediate(0));</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LeaveApiExitFrame() {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  LeaveExitFrameEpilogue();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PushTryHandler(StackHandler::Kind kind,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                                    <span class="keywordtype">int</span> handler_index) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Adjust this code if not the case.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kSize == 5 * kPointerSize);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kNextOffset == 0);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kCodeOffset == 1 * kPointerSize);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kStateOffset == 2 * kPointerSize);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kContextOffset == 3 * kPointerSize);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kFPOffset == 4 * kPointerSize);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// We will build up the handler from the bottom by pushing on the stack.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// First push the frame pointer and context.</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (kind == StackHandler::JS_ENTRY) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="comment">// The frame pointer does not point to a JS frame so we save NULL for</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="comment">// ebp. We expect the code throwing an exception to check ebp before</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="comment">// dereferencing it to restore the context.</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    push(Immediate(0));  <span class="comment">// NULL frame pointer.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    push(Immediate(Smi::FromInt(0)));  <span class="comment">// No context.</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="comment">// Push the state and the code object.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordtype">unsigned</span> state =</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      StackHandler::IndexField::encode(handler_index) |</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      StackHandler::KindField::encode(kind);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  push(Immediate(state));</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  Push(CodeObject());</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// Link the current handler as the next handler.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  ExternalReference handler_address(Isolate::kHandlerAddress, isolate());</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  push(Operand::StaticVariable(handler_address));</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// Set this new handler as the current one.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  mov(Operand::StaticVariable(handler_address), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PopTryHandler() {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kNextOffset == 0);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  ExternalReference handler_address(Isolate::kHandlerAddress, isolate());</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  pop(Operand::StaticVariable(handler_address));</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  add(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(StackHandlerConstants::kSize - kPointerSize));</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;}</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpToHandlerEntry() {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="comment">// Compute the handler entry address and jump to it.  The handler table is</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="comment">// a fixed array of (smi-tagged) code offsets.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// eax = exception, edi = code object, edx = state.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, Code::kHandlerTableOffset));</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  shr(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, StackHandler::kKindWidth);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, FixedArray::kHeaderSize));</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  SmiUntag(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  lea(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, Code::kHeaderSize));</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  jmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Throw(Register value) {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// Adjust this code if not the case.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kSize == 5 * kPointerSize);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kNextOffset == 0);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kCodeOffset == 1 * kPointerSize);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kStateOffset == 2 * kPointerSize);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kContextOffset == 3 * kPointerSize);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kFPOffset == 4 * kPointerSize);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// The exception is expected in eax.</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">if</span> (!value.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>)) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, value);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// Drop the stack pointer to the top of the top handler.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  ExternalReference handler_address(Isolate::kHandlerAddress, isolate());</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Operand::StaticVariable(handler_address));</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// Restore the next handler.</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  pop(Operand::StaticVariable(handler_address));</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// Remove the code object and state, compute the handler address in edi.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>);  <span class="comment">// Code object.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>);  <span class="comment">// Index and state.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// Restore the context and frame pointer.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);  <span class="comment">// Context.</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>);  <span class="comment">// Frame pointer.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// If the handler is a JS frame, restore the context to the frame.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// (kind == ENTRY) == (ebp == 0) == (esi == 0), so we could test either</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">// ebp or esi.</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  Label skip;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  test(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;skip, Label::kNear);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  mov(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, StandardFrameConstants::kContextOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  bind(&amp;skip);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  JumpToHandlerEntry();</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;}</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="keywordtype">void</span> MacroAssembler::ThrowUncatchable(Register value) {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">// Adjust this code if not the case.</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kSize == 5 * kPointerSize);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kNextOffset == 0);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kCodeOffset == 1 * kPointerSize);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kStateOffset == 2 * kPointerSize);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kContextOffset == 3 * kPointerSize);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kFPOffset == 4 * kPointerSize);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// The exception is expected in eax.</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">if</span> (!value.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>)) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, value);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="comment">// Drop the stack pointer to the top of the top stack handler.</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  ExternalReference handler_address(Isolate::kHandlerAddress, isolate());</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Operand::StaticVariable(handler_address));</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="comment">// Unwind the handlers until the top ENTRY handler is found.</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  Label fetch_next, check_kind;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  jmp(&amp;check_kind, Label::kNear);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  bind(&amp;fetch_next);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, StackHandlerConstants::kNextOffset));</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  bind(&amp;check_kind);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandler::JS_ENTRY == 0);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  test(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, StackHandlerConstants::kStateOffset),</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;       Immediate(StackHandler::KindField::kMask));</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;fetch_next);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="comment">// Set the top handler address to next handler past the top ENTRY handler.</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  pop(Operand::StaticVariable(handler_address));</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// Remove the code object and state, compute the handler address in edi.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>);  <span class="comment">// Code object.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>);  <span class="comment">// Index and state.</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// Clear the context pointer and frame pointer (0 was saved in the handler).</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  JumpToHandlerEntry();</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckAccessGlobalProxy(Register holder_reg,</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                                            Register scratch,</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                                            Label* miss) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  Label same_contexts;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!holder_reg.is(scratch));</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="comment">// Load current lexical context from the stack frame.</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  mov(scratch, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">ebp</a>, StandardFrameConstants::kContextOffset));</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">// When generating debug code, make sure the lexical context is set.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    cmp(scratch, Immediate(0));</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, <span class="stringliteral">&quot;we should not have an empty lexical context&quot;</span>);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// Load the global context of the current context.</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordtype">int</span> offset = Context::kHeaderSize + Context::GLOBAL_INDEX * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  mov(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, offset));</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  mov(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, GlobalObject::kGlobalContextOffset));</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="comment">// Check the context is a global context.</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    push(scratch);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="comment">// Read the first word and compare to global_context_map.</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    mov(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, HeapObject::kMapOffset));</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    cmp(scratch, isolate()-&gt;factory()-&gt;global_context_map());</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, <span class="stringliteral">&quot;JSGlobalObject::global_context should be a global context.&quot;</span>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    pop(scratch);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="comment">// Check if both contexts are the same.</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  cmp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(holder_reg, JSGlobalProxy::kContextOffset));</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;same_contexts);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// Compare security tokens, save holder_reg on the stack so we can use it</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// as a temporary register.</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// TODO(119): avoid push(holder_reg)/pop(holder_reg)</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  push(holder_reg);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// Check that the security token in the calling global object is</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">// compatible with the security token in the receiving global</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  mov(holder_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(holder_reg, JSGlobalProxy::kContextOffset));</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// Check the context is a global context.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    cmp(holder_reg, isolate()-&gt;factory()-&gt;null_value());</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, <span class="stringliteral">&quot;JSGlobalProxy::context() should not be null.&quot;</span>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    push(holder_reg);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="comment">// Read the first word and compare to global_context_map(),</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    mov(holder_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(holder_reg, HeapObject::kMapOffset));</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    cmp(holder_reg, isolate()-&gt;factory()-&gt;global_context_map());</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, <span class="stringliteral">&quot;JSGlobalObject::global_context should be a global context.&quot;</span>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    pop(holder_reg);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordtype">int</span> token_offset = Context::kHeaderSize +</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                     Context::SECURITY_TOKEN_INDEX * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  mov(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, token_offset));</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  cmp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(holder_reg, token_offset));</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  pop(holder_reg);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, miss);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  bind(&amp;same_contexts);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">// Compute the hash code from the untagged key.  This must be kept in sync</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">// with ComputeIntegerHash in utils.h.</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">// Note: r0 will contain hash code</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="keywordtype">void</span> MacroAssembler::GetNumberHash(Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73c5ad80dd8c4842fdfe80fcfab50484">r0</a>, Register scratch) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">// Xor original key with a seed.</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordflow">if</span> (Serializer::enabled()) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    ExternalReference roots_array_start =</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        ExternalReference::roots_array_start(isolate());</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    mov(scratch, Immediate(Heap::kHashSeedRootIndex));</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    mov(scratch,</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        Operand::StaticArray(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>, roots_array_start));</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    SmiUntag(scratch);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    xor_(r0, scratch);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="code" href="../../d6/dc1/test-strings_8cc.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> = isolate()-&gt;heap()-&gt;HashSeed();</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    xor_(r0, Immediate(seed));</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="comment">// hash = ~hash + (hash &lt;&lt; 15);</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  mov(scratch, r0);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  not_(r0);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  shl(scratch, 15);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  add(r0, scratch);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// hash = hash ^ (hash &gt;&gt; 12);</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  mov(scratch, r0);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  shr(scratch, 12);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  xor_(r0, scratch);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// hash = hash + (hash &lt;&lt; 2);</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  lea(r0, Operand(r0, r0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, 0));</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// hash = hash ^ (hash &gt;&gt; 4);</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  mov(scratch, r0);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  shr(scratch, 4);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  xor_(r0, scratch);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="comment">// hash = hash * 2057;</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  imul(r0, r0, 2057);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// hash = hash ^ (hash &gt;&gt; 16);</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  mov(scratch, r0);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  shr(scratch, 16);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  xor_(r0, scratch);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;}</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadFromNumberDictionary(Label* miss,</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                                              Register elements,</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                                              Register key,</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                              Register r0,</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                                              Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e325b47be17d36b12096ad1d73067b1">r1</a>,</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                                              Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6e83dd17c5de4dbc4a77cf6622fd385d">r2</a>,</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                                              Register result) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="comment">// Register use:</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">// elements - holds the slow-case elements of the receiver and is unchanged.</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// key      - holds the smi key on entry and is unchanged.</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// Scratch registers:</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// r0 - holds the untagged key on entry and holds the hash once computed.</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="comment">// r1 - used to hold the capacity mask of the dictionary</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="comment">// r2 - used for the index into the dictionary.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// result - holds the result on exit if the load succeeds and we fall through.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  Label done;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  GetNumberHash(r0, r1);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">// Compute capacity mask.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  mov(r1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, SeededNumberDictionary::kCapacityOffset));</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  shr(r1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a>);  <span class="comment">// convert smi to int</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  dec(r1);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// Generate an unrolled loop that performs a few probes before giving up.</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kProbes = 4;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kProbes; i++) {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">// Use r2 for index calculations and keep the hash intact in r0.</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    mov(r2, r0);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">// Compute the masked index: (hash + i + i * i) &amp; mask.</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">if</span> (i &gt; 0) {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      add(r2, Immediate(SeededNumberDictionary::GetProbeOffset(i)));</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    }</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    and_(r2, r1);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// Scale the index by multiplying by the entry size.</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(SeededNumberDictionary::kEntrySize == 3);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    lea(r2, Operand(r2, r2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b">times_2</a>, 0));  <span class="comment">// r2 = r2 * 3</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="comment">// Check if the key matches.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    cmp(key, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements,</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                          r2,</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                          <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>,</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                          SeededNumberDictionary::kElementsStartOffset));</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> (i != (kProbes - 1)) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;done);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, miss);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    }</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="comment">// Check that the value is a normal propety.</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kDetailsOffset =</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      SeededNumberDictionary::kElementsStartOffset + 2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7ff5a5c54f182b86d1cd993cf4512c87a50d1448013c6f17125caee18aa418af7">NORMAL</a>, 0);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  test(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, r2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>, kDetailsOffset),</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;       Immediate(PropertyDetails::TypeField::kMask &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a>));</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, miss);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">// Get the value at the masked, scaled index.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kValueOffset =</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      SeededNumberDictionary::kElementsStartOffset + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  mov(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, r2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>, kValueOffset));</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;}</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadAllocationTopHelper(Register result,</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                                             Register scratch,</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                             <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6039b5dd6fdbbfc93266be101c27b8d4">flags</a>) {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  ExternalReference new_space_allocation_top =</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      ExternalReference::new_space_allocation_top_address(isolate());</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// Just return if allocation top is already known.</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fcab5202c2428bbeaf36cf1261e87d40928">RESULT_CONTAINS_TOP</a>) != 0) {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">// No use of scratch if allocation top is provided.</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(scratch.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a433bbae437dfea4f24022a44f95ed5bf">no_reg</a>));</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="comment">// Assert that result actually contains top on entry.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    cmp(result, Operand::StaticVariable(new_space_allocation_top));</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, <span class="stringliteral">&quot;Unexpected allocation top&quot;</span>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">// Move address of new object to result. Use scratch register if available.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keywordflow">if</span> (scratch.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a433bbae437dfea4f24022a44f95ed5bf">no_reg</a>)) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    mov(result, Operand::StaticVariable(new_space_allocation_top));</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    mov(scratch, Immediate(new_space_allocation_top));</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    mov(result, Operand(scratch, 0));</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;}</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="keywordtype">void</span> MacroAssembler::UpdateAllocationTopHelper(Register result_end,</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                                               Register scratch) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    test(result_end, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>));</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, <span class="stringliteral">&quot;Unaligned allocation in new space&quot;</span>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  ExternalReference new_space_allocation_top =</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      ExternalReference::new_space_allocation_top_address(isolate());</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// Update new top. Use scratch if available.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">if</span> (scratch.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a433bbae437dfea4f24022a44f95ed5bf">no_reg</a>)) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    mov(Operand::StaticVariable(new_space_allocation_top), result_end);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    mov(Operand(scratch, 0), result_end);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateInNewSpace(<span class="keywordtype">int</span> object_size,</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                                        Register result,</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                                        Register result_end,</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                                        Register scratch,</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                                        Label* gc_required,</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                                        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> flags) {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">if</span> (!FLAG_inline_new) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="comment">// Trash the registers to simulate an allocation failure.</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      mov(result, Immediate(0x7091));</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keywordflow">if</span> (result_end.is_valid()) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        mov(result_end, Immediate(0x7191));</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keywordflow">if</span> (scratch.is_valid()) {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        mov(scratch, Immediate(0x7291));</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    jmp(gc_required);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!result.is(result_end));</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="comment">// Load address of new object into result.</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  LoadAllocationTopHelper(result, scratch, flags);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  Register top_reg = result_end.is_valid() ? result_end : result;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// Calculate new top and bail out if new space is exhausted.</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  ExternalReference new_space_allocation_limit =</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      ExternalReference::new_space_allocation_limit_address(isolate());</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">if</span> (!top_reg.is(result)) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    mov(top_reg, result);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  add(top_reg, Immediate(object_size));</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d">carry</a>, gc_required);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  cmp(top_reg, Operand::StaticVariable(new_space_allocation_limit));</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, gc_required);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="comment">// Update allocation top.</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  UpdateAllocationTopHelper(top_reg, scratch);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// Tag result if requested.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="keywordflow">if</span> (top_reg.is(result)) {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fcac721f640a1ecb341c800abadd769bbef">TAG_OBJECT</a>) != 0) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      sub(result, Immediate(object_size - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      sub(result, Immediate(object_size));</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((flags &amp; TAG_OBJECT) != 0) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    add(result, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  }</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;}</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateInNewSpace(<span class="keywordtype">int</span> header_size,</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                                        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9f">ScaleFactor</a> element_size,</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                                        Register element_count,</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                                        Register result,</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                                        Register result_end,</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                                        Register scratch,</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                                        Label* gc_required,</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                                        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> flags) {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">if</span> (!FLAG_inline_new) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="comment">// Trash the registers to simulate an allocation failure.</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      mov(result, Immediate(0x7091));</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      mov(result_end, Immediate(0x7191));</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">if</span> (scratch.is_valid()) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        mov(scratch, Immediate(0x7291));</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="comment">// Register element_count is not modified by the function.</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    jmp(gc_required);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  }</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!result.is(result_end));</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="comment">// Load address of new object into result.</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  LoadAllocationTopHelper(result, scratch, flags);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="comment">// Calculate new top and bail out if new space is exhausted.</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  ExternalReference new_space_allocation_limit =</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      ExternalReference::new_space_allocation_limit_address(isolate());</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="comment">// We assume that element_count*element_size + header_size does not</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="comment">// overflow.</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  lea(result_end, Operand(element_count, element_size, header_size));</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  add(result_end, result);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d">carry</a>, gc_required);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  cmp(result_end, Operand::StaticVariable(new_space_allocation_limit));</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, gc_required);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">// Tag result if requested.</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordflow">if</span> ((flags &amp; TAG_OBJECT) != 0) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    lea(result, Operand(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="comment">// Update allocation top.</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  UpdateAllocationTopHelper(result_end, scratch);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;}</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateInNewSpace(Register object_size,</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                                        Register result,</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                                        Register result_end,</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                                        Register scratch,</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                                        Label* gc_required,</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                                        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> flags) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordflow">if</span> (!FLAG_inline_new) {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="comment">// Trash the registers to simulate an allocation failure.</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      mov(result, Immediate(0x7091));</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      mov(result_end, Immediate(0x7191));</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="keywordflow">if</span> (scratch.is_valid()) {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        mov(scratch, Immediate(0x7291));</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="comment">// object_size is left unchanged by this function.</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    jmp(gc_required);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!result.is(result_end));</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// Load address of new object into result.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  LoadAllocationTopHelper(result, scratch, flags);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">// Calculate new top and bail out if new space is exhausted.</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  ExternalReference new_space_allocation_limit =</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      ExternalReference::new_space_allocation_limit_address(isolate());</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="keywordflow">if</span> (!object_size.is(result_end)) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    mov(result_end, object_size);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  add(result_end, result);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d">carry</a>, gc_required);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  cmp(result_end, Operand::StaticVariable(new_space_allocation_limit));</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, gc_required);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// Tag result if requested.</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordflow">if</span> ((flags &amp; TAG_OBJECT) != 0) {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    lea(result, Operand(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">// Update allocation top.</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  UpdateAllocationTopHelper(result_end, scratch);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;}</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="keywordtype">void</span> MacroAssembler::UndoAllocationInNewSpace(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  ExternalReference new_space_allocation_top =</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      ExternalReference::new_space_allocation_top_address(isolate());</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="comment">// Make sure the object has no tag before resetting top.</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  and_(<span class="keywordtype">object</span>, Immediate(~<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a44ee97292914fbe042fc1b7b3236f7bc">kHeapObjectTagMask</a>));</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  cmp(<span class="keywordtype">object</span>, Operand::StaticVariable(new_space_allocation_top));</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">below</a>, <span class="stringliteral">&quot;Undo allocation of non allocated memory&quot;</span>);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  mov(Operand::StaticVariable(new_space_allocation_top), <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;}</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateHeapNumber(Register result,</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                                        Register scratch1,</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                                        Register scratch2,</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                                        Label* gc_required) {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  AllocateInNewSpace(HeapNumber::kSize,</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                     result,</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                     scratch1,</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                     scratch2,</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                     gc_required,</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                     TAG_OBJECT);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="comment">// Set the map.</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset),</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;heap_number_map()));</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateTwoByteString(Register result,</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                                           Register length,</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                                           Register scratch1,</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                                           Register scratch2,</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                                           Register scratch3,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                                           Label* gc_required) {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="comment">// Calculate the number of bytes needed for the characters in the string while</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="comment">// observing object alignment.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>((SeqTwoByteString::kHeaderSize &amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>) == 0);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2c9dc287b9b66f415817e67ed68cb71a">kShortSize</a> == 2);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="comment">// scratch1 = length * 2 + kObjectAlignmentMask.</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  lea(scratch1, Operand(length, length, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>));</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  and_(scratch1, Immediate(~<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>));</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="comment">// Allocate two byte string in new space.</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  AllocateInNewSpace(SeqTwoByteString::kHeaderSize,</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>,</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                     scratch1,</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                     result,</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                     scratch2,</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                     scratch3,</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                     gc_required,</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                     TAG_OBJECT);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="comment">// Set the map, length and hash field.</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset),</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;string_map()));</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  mov(scratch1, length);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  SmiTag(scratch1);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kLengthOffset), scratch1);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kHashFieldOffset),</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      Immediate(String::kEmptyHashField));</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;}</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateAsciiString(Register result,</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                                         Register length,</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                                         Register scratch1,</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                                         Register scratch2,</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                                         Register scratch3,</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                                         Label* gc_required) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="comment">// Calculate the number of bytes needed for the characters in the string while</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="comment">// observing object alignment.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>((SeqAsciiString::kHeaderSize &amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>) == 0);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  mov(scratch1, length);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab81d3518ce57dd364c1d60e0045d4a92">kCharSize</a> == 1);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  add(scratch1, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>));</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  and_(scratch1, Immediate(~<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>));</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="comment">// Allocate ASCII string in new space.</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  AllocateInNewSpace(SeqAsciiString::kHeaderSize,</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>,</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                     scratch1,</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                     result,</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                     scratch2,</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                     scratch3,</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                     gc_required,</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                     TAG_OBJECT);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// Set the map, length and hash field.</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset),</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;ascii_string_map()));</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  mov(scratch1, length);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  SmiTag(scratch1);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kLengthOffset), scratch1);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kHashFieldOffset),</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      Immediate(String::kEmptyHashField));</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;}</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateAsciiString(Register result,</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                                         <span class="keywordtype">int</span> length,</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                                         Register scratch1,</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                                         Register scratch2,</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                                         Label* gc_required) {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(length &gt; 0);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// Allocate ASCII string in new space.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  AllocateInNewSpace(SeqAsciiString::SizeFor(length),</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                     result,</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                     scratch1,</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                     scratch2,</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                     gc_required,</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                     TAG_OBJECT);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// Set the map, length and hash field.</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset),</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;ascii_string_map()));</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kLengthOffset),</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      Immediate(Smi::FromInt(length)));</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kHashFieldOffset),</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      Immediate(String::kEmptyHashField));</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;}</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateTwoByteConsString(Register result,</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                                        Register scratch1,</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                                        Register scratch2,</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                                        Label* gc_required) {</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  AllocateInNewSpace(ConsString::kSize,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                     result,</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                     scratch1,</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                     scratch2,</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                     gc_required,</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                     TAG_OBJECT);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="comment">// Set the map. The other fields are left uninitialized.</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset),</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;cons_string_map()));</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateAsciiConsString(Register result,</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                                             Register scratch1,</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                                             Register scratch2,</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                                             Label* gc_required) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  AllocateInNewSpace(ConsString::kSize,</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                     result,</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                     scratch1,</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                     scratch2,</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                     gc_required,</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                     TAG_OBJECT);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <span class="comment">// Set the map. The other fields are left uninitialized.</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset),</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;cons_ascii_string_map()));</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;}</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateTwoByteSlicedString(Register result,</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                                          Register scratch1,</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                                          Register scratch2,</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                                          Label* gc_required) {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  AllocateInNewSpace(SlicedString::kSize,</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                     result,</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                     scratch1,</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                     scratch2,</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                     gc_required,</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                     TAG_OBJECT);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="comment">// Set the map. The other fields are left uninitialized.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset),</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;sliced_string_map()));</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;}</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateAsciiSlicedString(Register result,</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                                               Register scratch1,</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                                               Register scratch2,</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                                               Label* gc_required) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  AllocateInNewSpace(SlicedString::kSize,</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                     result,</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                     scratch1,</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                     scratch2,</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                     gc_required,</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                     TAG_OBJECT);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="comment">// Set the map. The other fields are left uninitialized.</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset),</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;sliced_ascii_string_map()));</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;}</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">// Copy memory, byte-by-byte, from source to destination.  Not optimized for</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment">// long or aligned copies.  The contents of scratch and length are destroyed.</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">// Source and destination are incremented by length.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">// Many variants of movsb, loop unrolling, word moves, and indexed operands</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="comment">// have been tried here already, and this is fastest.</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment">// A simpler loop is faster on small copies, but 30% slower on large ones.</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">// The cld() instruction must have been emitted, to set the direction flag(),</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment">// before calling this function.</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CopyBytes(Register source,</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                               Register destination,</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                               Register length,</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                               Register scratch) {</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  Label loop, done, short_string, short_loop;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">// Experimentation shows that the short string loop is faster if length &lt; 10.</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  cmp(length, Immediate(10));</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a3d7997d719eae01744421e1193495946">less_equal</a>, &amp;short_string);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(source.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>));</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(destination.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>));</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(length.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>));</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// Because source is 4-byte aligned in our uses of this function,</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="comment">// we keep source aligned for the rep_movs call by copying the odd bytes</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// at the end of the ranges.</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  mov(scratch, Operand(source, length, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, -4));</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  mov(Operand(destination, length, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, -4), scratch);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  mov(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  shr(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, 2);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  rep_movs();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  and_(scratch, Immediate(0x3));</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  add(destination, scratch);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  jmp(&amp;done);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  bind(&amp;short_string);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  test(length, length);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;done);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  bind(&amp;short_loop);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  mov_b(scratch, Operand(source, 0));</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  mov_b(Operand(destination, 0), scratch);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  inc(source);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  inc(destination);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  dec(length);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;short_loop);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;}</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InitializeFieldsWithFiller(Register start_offset,</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                                                Register end_offset,</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                                                Register filler) {</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  Label loop, entry;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  jmp(&amp;entry);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  bind(&amp;loop);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  mov(Operand(start_offset, 0), filler);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  add(start_offset, Immediate(kPointerSize));</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  bind(&amp;entry);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  cmp(start_offset, end_offset);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1665a21bbe0fa4e1956abbeb702a170d">less</a>, &amp;loop);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;}</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="keywordtype">void</span> MacroAssembler::BooleanBitTest(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                                    <span class="keywordtype">int</span> field_offset,</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                                    <span class="keywordtype">int</span> bit_index) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  bit_index += <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a> + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afa8d68cf6bb62505693e9b654a93cba7">kSmiShiftSize</a>;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">IsPowerOf2</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>));</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="keywordtype">int</span> byte_index = bit_index / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <span class="keywordtype">int</span> byte_bit_index = bit_index &amp; (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a> - 1);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  test_b(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, field_offset + byte_index),</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;         static_cast&lt;byte&gt;(1 &lt;&lt; byte_bit_index));</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="keywordtype">void</span> MacroAssembler::NegativeZeroTest(Register result,</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                                      Register op,</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                                      Label* then_label) {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  Label ok;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  test(result, result);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;ok);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  test(op, op);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a8c33592060c5e5568b3fa116c71610ba">sign</a>, then_label);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  bind(&amp;ok);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;}</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="keywordtype">void</span> MacroAssembler::NegativeZeroTest(Register result,</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                                      Register op1,</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                                      Register op2,</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                                      Register scratch,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                                      Label* then_label) {</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  Label ok;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  test(result, result);</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;ok);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  mov(scratch, op1);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  or_(scratch, op2);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a8c33592060c5e5568b3fa116c71610ba">sign</a>, then_label);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  bind(&amp;ok);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;}</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TryGetFunctionPrototype(Register <span class="keyword">function</span>,</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                                             Register result,</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                                             Register scratch,</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                                             Label* miss,</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                                             <span class="keywordtype">bool</span> miss_on_bound_function) {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="comment">// Check that the receiver isn&#39;t a smi.</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  JumpIfSmi(<span class="keyword">function</span>, miss);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="comment">// Check that the function really is a function.</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  CmpObjectType(<span class="keyword">function</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a02670a3c9633129c524842afc57c106d">JS_FUNCTION_TYPE</a>, result);</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, miss);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="keywordflow">if</span> (miss_on_bound_function) {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="comment">// If a bound function, go to miss label.</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    mov(scratch,</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kSharedFunctionInfoOffset));</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    BooleanBitTest(scratch, SharedFunctionInfo::kCompilerHintsOffset,</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                   SharedFunctionInfo::kBoundFunction);</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, miss);</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="comment">// Make sure that the function has an instance prototype.</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  Label non_instance;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  movzx_b(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, Map::kBitFieldOffset));</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  test(scratch, Immediate(1 &lt;&lt; Map::kHasNonInstancePrototype));</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;non_instance);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <span class="comment">// Get the prototype or initial map from the function.</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  mov(result,</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kPrototypeOrInitialMapOffset));</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="comment">// If the prototype or initial map is the hole, don&#39;t return it and</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="comment">// simply miss the cache instead. This will allow us to allocate a</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <span class="comment">// prototype object on-demand in the runtime system.</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  cmp(result, Immediate(isolate()-&gt;factory()-&gt;the_hole_value()));</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, miss);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="comment">// If the function does not have an initial map, we&#39;re done.</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  Label done;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  CmpObjectType(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a77dd0d910751ab1628781fb29adc69d8">MAP_TYPE</a>, scratch);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;done);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">// Get the prototype from the initial map.</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  mov(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, Map::kPrototypeOffset));</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  jmp(&amp;done);</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="comment">// Non-instance prototype: Fetch prototype from constructor field</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">// in initial map.</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  bind(&amp;non_instance);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  mov(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, Map::kConstructorOffset));</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="comment">// All done.</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;}</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallStub(CodeStub* stub, <span class="keywordtype">unsigned</span> ast_id) {</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(AllowThisStubCall(stub));  <span class="comment">// Calls are not allowed in some stubs.</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  call(stub-&gt;GetCode(), RelocInfo::CODE_TARGET, ast_id);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;}</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TailCallStub(CodeStub* stub) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(allow_stub_calls_ || stub-&gt;CompilingCallsToThisStubIsGCSafe());</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  jmp(stub-&gt;GetCode(), RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;}</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StubReturn(<span class="keywordtype">int</span> argc) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(argc &gt;= 1 &amp;&amp; generating_stub());</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  ret((argc - 1) * kPointerSize);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;}</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="keywordtype">bool</span> MacroAssembler::AllowThisStubCall(CodeStub* stub) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="keywordflow">if</span> (!has_frame_ &amp;&amp; stub-&gt;SometimesSetsUpAFrame()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="keywordflow">return</span> allow_stub_calls_ || stub-&gt;CompilingCallsToThisStubIsGCSafe();</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;}</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IllegalOperation(<span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordflow">if</span> (num_arguments &gt; 0) {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    add(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(num_arguments * kPointerSize));</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Immediate(isolate()-&gt;factory()-&gt;undefined_value()));</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;}</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IndexFromHash(Register hash, Register index) {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">// The assert checks that the constants for the maximum number of digits</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="comment">// for an array index cached in the hash field and the number of bits</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="comment">// reserved for it does not conflict.</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaa2b5552afaab806ac61a34b16e7a1c7">TenToThe</a>(String::kMaxCachedArrayIndexLength) &lt;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;         (1 &lt;&lt; String::kArrayIndexValueBits));</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="comment">// We want the smi-tagged index in key.  kArrayIndexValueMask has zeros in</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="comment">// the low kHashShift bits.</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  and_(hash, String::kArrayIndexValueMask);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(String::kHashShift &gt;= <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a> &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">if</span> (String::kHashShift &gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a>) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    shr(hash, String::kHashShift - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a>);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="keywordflow">if</span> (!index.is(hash)) {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    mov(index, hash);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  }</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;}</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallRuntime(Runtime::FunctionId <span class="keywordtype">id</span>, <span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  CallRuntime(Runtime::FunctionForId(<span class="keywordtype">id</span>), num_arguments);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;}</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallRuntimeSaveDoubles(Runtime::FunctionId <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="keyword">const</span> Runtime::Function* <span class="keyword">function</span> = Runtime::FunctionForId(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Immediate(function-&gt;nargs));</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, Immediate(ExternalReference(<span class="keyword">function</span>, isolate())));</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  CEntryStub ces(1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822a1f66bbcb0dcf356584f55d2acbbf9f54">kSaveFPRegs</a>);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  CallStub(&amp;ces);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;}</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallRuntime(<span class="keyword">const</span> Runtime::Function* f,</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                                 <span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="comment">// If the expected number of arguments of the runtime function is</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">// constant, we check that the actual number of arguments match the</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="comment">// expectation.</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="keywordflow">if</span> (f-&gt;nargs &gt;= 0 &amp;&amp; f-&gt;nargs != num_arguments) {</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    IllegalOperation(num_arguments);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="comment">// TODO(1236192): Most runtime routines don&#39;t need the number of</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <span class="comment">// arguments passed in because it is constant. At some point we</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="comment">// should remove this need and make the runtime routine entry code</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="comment">// smarter.</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Immediate(num_arguments));</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, Immediate(ExternalReference(f, isolate())));</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  CEntryStub ces(1);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  CallStub(&amp;ces);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallExternalReference(ExternalReference ref,</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                                           <span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Immediate(num_arguments));</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, Immediate(ref));</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  CEntryStub stub(1);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  CallStub(&amp;stub);</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;}</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TailCallExternalReference(<span class="keyword">const</span> ExternalReference&amp; ext,</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                                               <span class="keywordtype">int</span> num_arguments,</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                                               <span class="keywordtype">int</span> result_size) {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="comment">// TODO(1236192): Most runtime routines don&#39;t need the number of</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="comment">// arguments passed in because it is constant. At some point we</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="comment">// should remove this need and make the runtime routine entry code</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="comment">// smarter.</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Immediate(num_arguments));</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  JumpToExternalReference(ext);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;}</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TailCallRuntime(Runtime::FunctionId fid,</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                                     <span class="keywordtype">int</span> num_arguments,</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                                     <span class="keywordtype">int</span> result_size) {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  TailCallExternalReference(ExternalReference(fid, isolate()),</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                            num_arguments,</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                            result_size);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;}</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;<span class="comment">// If true, a Handle&lt;T&gt; returned by value from a function with cdecl calling</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">// convention will be returned directly as a value of location_ field in a</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">// register eax.</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment">// If false, it is returned as a pointer to a preallocated by caller memory</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="comment">// region. Pointer to this region should be passed to a function as an</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment">// implicit first argument.</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="preprocessor">#if defined(USING_BSD_ABI) || defined(__MINGW32__) || defined(__CYGWIN__)</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> kReturnHandlesDirectly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> kReturnHandlesDirectly = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;Operand <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abfb56f7f0470945ac0cec842e3cf329a">ApiParameterOperand</a>(<span class="keywordtype">int</span> index) {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="keywordflow">return</span> Operand(</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, (index + (kReturnHandlesDirectly ? 0 : 1)) * kPointerSize);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;}</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PrepareCallApiFunction(<span class="keywordtype">int</span> argc) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordflow">if</span> (kReturnHandlesDirectly) {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    EnterApiExitFrame(argc);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="comment">// When handles are returned directly we don&#39;t have to allocate extra</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="comment">// space for and pass an out parameter.</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, Immediate(BitCast&lt;int32_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>)));</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    }</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="comment">// We allocate two additional slots: return value and pointer to it.</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    EnterApiExitFrame(argc + 2);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="comment">// The argument slots are filled as follows:</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="comment">//   n + 1: output slot</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="comment">//   n: arg n</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="comment">//   ...</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="comment">//   1: arg1</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="comment">//   0: pointer to the output slot</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    lea(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, (argc + 1) * kPointerSize));</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    mov(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, 0 * kPointerSize), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      mov(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, 0), Immediate(0));</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;}</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallApiFunctionAndReturn(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> function_address,</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                                              <span class="keywordtype">int</span> stack_space) {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  ExternalReference next_address =</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      ExternalReference::handle_scope_next_address();</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  ExternalReference limit_address =</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      ExternalReference::handle_scope_limit_address();</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  ExternalReference level_address =</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      ExternalReference::handle_scope_level_address();</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="comment">// Allocate HandleScope in callee-save registers.</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, Operand::StaticVariable(next_address));</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, Operand::StaticVariable(limit_address));</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  add(Operand::StaticVariable(level_address), Immediate(1));</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="comment">// Call the api function.</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  call(function_address, <a class="code" href="../../d4/df1/serialize_8cc.html#a0680794c1f518f74b9ca2c445c161917">RelocInfo::RUNTIME_ENTRY</a>);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="keywordflow">if</span> (!kReturnHandlesDirectly) {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="comment">// PrepareCallApiFunction saved pointer to the output slot into</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="comment">// callee-save register esi.</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, 0));</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  }</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  Label empty_handle;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  Label prologue;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  Label promote_scheduled_exception;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  Label delete_allocated_handles;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  Label leave_exit_frame;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="comment">// Check if the result handle holds 0.</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  test(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;empty_handle);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <span class="comment">// It was non-zero.  Dereference to get the result value.</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, 0));</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  bind(&amp;prologue);</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <span class="comment">// No more valid handles (the result handle was the last one). Restore</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="comment">// previous handle scope.</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  mov(Operand::StaticVariable(next_address), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  sub(Operand::StaticVariable(level_address), Immediate(1));</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5deff98b7209d461524e9b5bff3dd4bf">above_equal</a>, <span class="stringliteral">&quot;Invalid HandleScope level&quot;</span>);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, Operand::StaticVariable(limit_address));</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;delete_allocated_handles);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  bind(&amp;leave_exit_frame);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="comment">// Check if the function scheduled an exception.</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  ExternalReference scheduled_exception_address =</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      ExternalReference::scheduled_exception_address(isolate());</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  cmp(Operand::StaticVariable(scheduled_exception_address),</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      Immediate(isolate()-&gt;factory()-&gt;the_hole_value()));</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;promote_scheduled_exception);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  LeaveApiExitFrame();</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  ret(stack_space * kPointerSize);</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  bind(&amp;promote_scheduled_exception);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  TailCallRuntime(Runtime::kPromoteScheduledException, 0, 1);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  bind(&amp;empty_handle);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="comment">// It was zero; the result is undefined.</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, isolate()-&gt;factory()-&gt;undefined_value());</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  jmp(&amp;prologue);</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="comment">// HandleScope limit has changed. Delete allocated extensions.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  ExternalReference delete_extensions =</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      ExternalReference::delete_handle_scope_extensions(isolate());</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  bind(&amp;delete_allocated_handles);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  mov(Operand::StaticVariable(limit_address), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  mov(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, 0), Immediate(ExternalReference::isolate_address()));</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Immediate(delete_extensions));</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  call(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  jmp(&amp;leave_exit_frame);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;}</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpToExternalReference(<span class="keyword">const</span> ExternalReference&amp; ext) {</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="comment">// Set the entry point and jump to the C entry runtime stub.</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, Immediate(ext));</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  CEntryStub ces(1);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  jmp(ces.GetCode(), RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;}</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SetCallKind(Register dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47">CallKind</a> call_kind) {</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="comment">// This macro takes the dst register to make the code more readable</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="comment">// at the call sites. However, the dst register has to be ecx to</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="comment">// follow the calling convention which requires the call type to be</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="comment">// in ecx.</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>));</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keywordflow">if</span> (call_kind == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47a234a32427b81f90629f63c86db9bf0a0">CALL_AS_FUNCTION</a>) {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="comment">// Set to some non-zero smi by updating the least significant</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="comment">// byte.</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    mov_b(dst, 1 &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a>);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="comment">// Set to smi zero by clearing the register.</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    xor_(dst, dst);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;}</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokePrologue(<span class="keyword">const</span> ParameterCount&amp; expected,</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                                    Handle&lt;Code&gt; code_constant,</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                                    <span class="keyword">const</span> Operand&amp; code_operand,</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                                    Label* done,</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                                    <span class="keywordtype">bool</span>* definitely_mismatches,</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                                    <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa1e824488bf601828e2e5e7d74985924">flag</a>,</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                                    Label::Distance done_near,</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                                    <span class="keyword">const</span> CallWrapper&amp; call_wrapper,</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47">CallKind</a> call_kind) {</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="keywordtype">bool</span> definitely_matches = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  *definitely_mismatches = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  Label invoke;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <span class="keywordflow">if</span> (expected.is_immediate()) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(actual.is_immediate());</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="keywordflow">if</span> (expected.immediate() == actual.immediate()) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      definitely_matches = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, actual.immediate());</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> sentinel = SharedFunctionInfo::kDontAdaptArgumentsSentinel;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      <span class="keywordflow">if</span> (expected.immediate() == sentinel) {</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <span class="comment">// Don&#39;t worry about adapting arguments for builtins that</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <span class="comment">// don&#39;t want that done. Skip adaption code by making it look</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        <span class="comment">// like we have a match between expected and actual number of</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="comment">// arguments.</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        definitely_matches = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        *definitely_mismatches = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, expected.immediate());</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      }</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keywordflow">if</span> (actual.is_immediate()) {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      <span class="comment">// Expected is in register, actual is immediate. This is the</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <span class="comment">// case when we invoke function values without going through the</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      <span class="comment">// IC mechanism.</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;      cmp(expected.reg(), actual.immediate());</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;invoke);</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(expected.reg().is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>));</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;      mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, actual.immediate());</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!expected.reg().is(actual.reg())) {</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      <span class="comment">// Both expected and actual are in (different) registers. This</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <span class="comment">// is the case when we invoke functions using call and apply.</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      cmp(expected.reg(), actual.reg());</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;invoke);</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(actual.reg().is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>));</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(expected.reg().is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>));</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    }</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  }</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="keywordflow">if</span> (!definitely_matches) {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    Handle&lt;Code&gt; adaptor =</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;        isolate()-&gt;builtins()-&gt;ArgumentsAdaptorTrampoline();</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="keywordflow">if</span> (!code_constant.is_null()) {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, Immediate(code_constant));</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;      add(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, Immediate(Code::kHeaderSize - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!code_operand.is_reg(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>)) {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, code_operand);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <span class="keywordflow">if</span> (flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396">CALL_FUNCTION</a>) {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      call_wrapper.BeforeCall(CallSize(adaptor, RelocInfo::CODE_TARGET));</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      SetCallKind(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, call_kind);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      call(adaptor, RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      call_wrapper.AfterCall();</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <span class="keywordflow">if</span> (!*definitely_mismatches) {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        jmp(done, done_near);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      }</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      SetCallKind(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, call_kind);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      jmp(adaptor, RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    }</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    bind(&amp;invoke);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  }</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;}</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeCode(<span class="keyword">const</span> Operand&amp; code,</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                                <span class="keyword">const</span> ParameterCount&amp; expected,</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                                <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                                <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                                <span class="keyword">const</span> CallWrapper&amp; call_wrapper,</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47">CallKind</a> call_kind) {</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="comment">// You can&#39;t call a function without a valid frame.</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  Label done;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="keywordtype">bool</span> definitely_mismatches = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  InvokePrologue(expected, actual, Handle&lt;Code&gt;::null(), code,</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                 &amp;done, &amp;definitely_mismatches, flag, Label::kNear,</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                 call_wrapper, call_kind);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="keywordflow">if</span> (!definitely_mismatches) {</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="keywordflow">if</span> (flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396">CALL_FUNCTION</a>) {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      call_wrapper.BeforeCall(CallSize(code));</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;      SetCallKind(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, call_kind);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      call(code);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      call_wrapper.AfterCall();</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a>);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      SetCallKind(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, call_kind);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      jmp(code);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    bind(&amp;done);</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  }</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;}</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeCode(Handle&lt;Code&gt; code,</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                                <span class="keyword">const</span> ParameterCount&amp; expected,</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                                <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                                RelocInfo::Mode rmode,</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                                <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                                <span class="keyword">const</span> CallWrapper&amp; call_wrapper,</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47">CallKind</a> call_kind) {</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="comment">// You can&#39;t call a function without a valid frame.</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  Label done;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  Operand dummy(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, 0);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <span class="keywordtype">bool</span> definitely_mismatches = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  InvokePrologue(expected, actual, code, dummy, &amp;done, &amp;definitely_mismatches,</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                 flag, Label::kNear, call_wrapper, call_kind);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keywordflow">if</span> (!definitely_mismatches) {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <span class="keywordflow">if</span> (flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396">CALL_FUNCTION</a>) {</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      call_wrapper.BeforeCall(CallSize(code, rmode));</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      SetCallKind(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, call_kind);</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      call(code, rmode);</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      call_wrapper.AfterCall();</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a>);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      SetCallKind(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, call_kind);</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      jmp(code, rmode);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    }</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    bind(&amp;done);</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  }</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;}</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeFunction(Register fun,</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                                    <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                                    <span class="keyword">const</span> CallWrapper&amp; call_wrapper,</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47">CallKind</a> call_kind) {</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="comment">// You can&#39;t call a function without a valid frame.</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(fun.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>));</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, JSFunction::kSharedFunctionInfoOffset));</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, JSFunction::kContextOffset));</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, SharedFunctionInfo::kFormalParameterCountOffset));</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  SmiUntag(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>);</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  ParameterCount expected(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  InvokeCode(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, JSFunction::kCodeEntryOffset),</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;             expected, actual, flag, call_wrapper, call_kind);</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;}</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeFunction(Handle&lt;JSFunction&gt; <span class="keyword">function</span>,</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                                    <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                                    <span class="keyword">const</span> CallWrapper&amp; call_wrapper,</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47">CallKind</a> call_kind) {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <span class="comment">// You can&#39;t call a function without a valid frame.</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="comment">// Get the function and setup the context.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  LoadHeapObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, <span class="keyword">function</span>);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, JSFunction::kContextOffset));</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  ParameterCount expected(function-&gt;shared()-&gt;formal_parameter_count());</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="comment">// We call indirectly through the code field in the function to</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="comment">// allow recompilation to take effect without changing any of the</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <span class="comment">// call sites.</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  InvokeCode(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, JSFunction::kCodeEntryOffset),</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;             expected, actual, flag, call_wrapper, call_kind);</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;}</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeBuiltin(Builtins::JavaScript <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                                   <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                                   <span class="keyword">const</span> CallWrapper&amp; call_wrapper) {</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">// You can&#39;t call a builtin without a valid frame.</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="comment">// Rely on the assertion to check that the number of provided</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="comment">// arguments match the expected number of arguments. Fake a</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="comment">// parameter count to avoid emitting code to do the check.</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  ParameterCount expected(0);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  GetBuiltinFunction(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  InvokeCode(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, JSFunction::kCodeEntryOffset),</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;             expected, expected, flag, call_wrapper, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47a867d7e93065f39103b9e480005ee1250">CALL_AS_METHOD</a>);</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;}</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="keywordtype">void</span> MacroAssembler::GetBuiltinFunction(Register target,</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                                        Builtins::JavaScript <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="comment">// Load the JavaScript builtin function from the builtins object.</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  mov(target, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, Context::SlotOffset(Context::GLOBAL_INDEX)));</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  mov(target, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(target, GlobalObject::kBuiltinsOffset));</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  mov(target, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(target,</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                           JSBuiltinsObject::OffsetOfFunctionWithId(<span class="keywordtype">id</span>)));</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;}</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;<span class="keywordtype">void</span> MacroAssembler::GetBuiltinEntry(Register target, Builtins::JavaScript <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!target.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>));</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <span class="comment">// Load the JavaScript builtin function from the builtins object.</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  GetBuiltinFunction(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  <span class="comment">// Load the code entry point from the function into the target register.</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  mov(target, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">edi</a>, JSFunction::kCodeEntryOffset));</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;}</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadContext(Register dst, <span class="keywordtype">int</span> context_chain_length) {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="keywordflow">if</span> (context_chain_length &gt; 0) {</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="comment">// Move up the chain of contexts to the context containing the slot.</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    mov(dst, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, Context::SlotOffset(Context::PREVIOUS_INDEX)));</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; context_chain_length; i++) {</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;      mov(dst, Operand(dst, Context::SlotOffset(Context::PREVIOUS_INDEX)));</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    }</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="comment">// Slot is in the current function context.  Move it into the</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="comment">// destination register in case we store into it (the write barrier</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="comment">// cannot be allowed to destroy the context in esi).</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    mov(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  }</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <span class="comment">// We should not have found a with context by walking the context chain</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="comment">// (i.e., the static scope chain and runtime context chain do not agree).</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="comment">// A variable occurring in such a scope should have slot type LOOKUP and</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="comment">// not CONTEXT.</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(dst, HeapObject::kMapOffset),</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        isolate()-&gt;factory()-&gt;with_context_map());</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, <span class="stringliteral">&quot;Variable resolved to with context.&quot;</span>);</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  }</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;}</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadTransitionedArrayMapConditional(</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017">ElementsKind</a> expected_kind,</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017">ElementsKind</a> transitioned_kind,</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    Register map_in_out,</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    Register scratch,</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    Label* no_map_match) {</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="comment">// Load the global or builtins object from the current context.</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  mov(scratch, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, Context::SlotOffset(Context::GLOBAL_INDEX)));</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  mov(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, GlobalObject::kGlobalContextOffset));</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="comment">// Check that the function&#39;s map is the same as the expected cached map.</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  mov(scratch, Operand(scratch,</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                       Context::SlotOffset(Context::JS_ARRAY_MAPS_INDEX)));</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="keywordtype">size_t</span> offset = expected_kind * kPointerSize +</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      FixedArrayBase::kHeaderSize;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  cmp(map_in_out, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, offset));</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, no_map_match);</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <span class="comment">// Use the transitioned cached map.</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  offset = transitioned_kind * kPointerSize +</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      FixedArrayBase::kHeaderSize;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  mov(map_in_out, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, offset));</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;}</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadInitialArrayMap(</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    Register function_in, Register scratch,</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    Register map_out, <span class="keywordtype">bool</span> can_have_holes) {</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!function_in.is(map_out));</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  Label done;</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  mov(map_out, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(function_in,</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                            JSFunction::kPrototypeOrInitialMapOffset));</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;  <span class="keywordflow">if</span> (!FLAG_smi_only_arrays) {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017">ElementsKind</a> kind = can_have_holes ? <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6">FAST_HOLEY_ELEMENTS</a> : <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91">FAST_ELEMENTS</a>;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    LoadTransitionedArrayMapConditional(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">FAST_SMI_ELEMENTS</a>,</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                                        kind,</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                                        map_out,</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                                        scratch,</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                                        &amp;done);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (can_have_holes) {</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    LoadTransitionedArrayMapConditional(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">FAST_SMI_ELEMENTS</a>,</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                                        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">FAST_HOLEY_SMI_ELEMENTS</a>,</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                                        map_out,</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                                        scratch,</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                                        &amp;done);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  }</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;}</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadGlobalFunction(<span class="keywordtype">int</span> index, Register <span class="keyword">function</span>) {</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="comment">// Load the global or builtins object from the current context.</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  mov(<span class="keyword">function</span>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">esi</a>, Context::SlotOffset(Context::GLOBAL_INDEX)));</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="comment">// Load the global context from the global or builtins object.</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  mov(<span class="keyword">function</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, GlobalObject::kGlobalContextOffset));</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="comment">// Load the function from the global context.</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  mov(<span class="keyword">function</span>, Operand(<span class="keyword">function</span>, Context::SlotOffset(index)));</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;}</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadGlobalFunctionInitialMap(Register <span class="keyword">function</span>,</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                                                  Register map) {</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="comment">// Load the initial map.  The global functions all have initial maps.</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  mov(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kPrototypeOrInitialMapOffset));</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    Label ok, fail;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    CheckMap(map, isolate()-&gt;factory()-&gt;meta_map(), &amp;fail, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1">DO_SMI_CHECK</a>);</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    jmp(&amp;ok);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    bind(&amp;fail);</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    Abort(<span class="stringliteral">&quot;Global functions must have initial map&quot;</span>);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  }</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;}</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="comment">// Store the value in register src in the safepoint register stack</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment">// slot for register dst.</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StoreToSafepointRegisterSlot(Register dst, Register src) {</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  mov(SafepointRegisterSlot(dst), src);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;}</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StoreToSafepointRegisterSlot(Register dst, Immediate src) {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  mov(SafepointRegisterSlot(dst), src);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;}</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadFromSafepointRegisterSlot(Register dst, Register src) {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  mov(dst, SafepointRegisterSlot(src));</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;}</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;Operand MacroAssembler::SafepointRegisterSlot(Register reg) {</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <span class="keywordflow">return</span> Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, SafepointRegisterStackIndex(reg.code()) * kPointerSize);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;}</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="keywordtype">int</span> MacroAssembler::SafepointRegisterStackIndex(<span class="keywordtype">int</span> reg_code) {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <span class="comment">// The registers are pushed starting with the lowest encoding,</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  <span class="comment">// which means that lowest encodings are furthest away from</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  <span class="comment">// the stack pointer.</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(reg_code &gt;= 0 &amp;&amp; reg_code &lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a120129960270720fe1e85f660c6157ac">kNumSafepointRegisters</a>);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a120129960270720fe1e85f660c6157ac">kNumSafepointRegisters</a> - reg_code - 1;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;}</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadHeapObject(Register result,</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                                    Handle&lt;HeapObject&gt; <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  <span class="keywordflow">if</span> (isolate()-&gt;heap()-&gt;InNewSpace(*<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    Handle&lt;JSGlobalPropertyCell&gt; cell =</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        isolate()-&gt;factory()-&gt;NewJSGlobalPropertyCell(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    mov(result, Operand::Cell(cell));</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    mov(result, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  }</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;}</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PushHeapObject(Handle&lt;HeapObject&gt; <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="keywordflow">if</span> (isolate()-&gt;heap()-&gt;InNewSpace(*<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    Handle&lt;JSGlobalPropertyCell&gt; cell =</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        isolate()-&gt;factory()-&gt;NewJSGlobalPropertyCell(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    push(Operand::Cell(cell));</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    Push(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  }</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;}</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Ret() {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  ret(0);</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;}</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Ret(<span class="keywordtype">int</span> bytes_dropped, Register scratch) {</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a30f7ffa00999f8bdf1023904d2b204d4">is_uint16</a>(bytes_dropped)) {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    ret(bytes_dropped);</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    pop(scratch);</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    add(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(bytes_dropped));</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    push(scratch);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    ret(0);</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  }</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;}</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Drop(<span class="keywordtype">int</span> stack_elements) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="keywordflow">if</span> (stack_elements &gt; 0) {</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    add(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(stack_elements * kPointerSize));</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;}</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Move(Register dst, Register src) {</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    mov(dst, src);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;}</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SetCounter(StatsCounter* counter, <span class="keywordtype">int</span> value) {</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="keywordflow">if</span> (FLAG_native_code_counters &amp;&amp; counter-&gt;Enabled()) {</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    mov(Operand::StaticVariable(ExternalReference(counter)), Immediate(value));</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  }</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;}</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IncrementCounter(StatsCounter* counter, <span class="keywordtype">int</span> value) {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(value &gt; 0);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="keywordflow">if</span> (FLAG_native_code_counters &amp;&amp; counter-&gt;Enabled()) {</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    Operand operand = Operand::StaticVariable(ExternalReference(counter));</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <span class="keywordflow">if</span> (value == 1) {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      inc(operand);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      add(operand, Immediate(value));</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    }</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  }</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;}</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="keywordtype">void</span> MacroAssembler::DecrementCounter(StatsCounter* counter, <span class="keywordtype">int</span> value) {</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(value &gt; 0);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  <span class="keywordflow">if</span> (FLAG_native_code_counters &amp;&amp; counter-&gt;Enabled()) {</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    Operand operand = Operand::StaticVariable(ExternalReference(counter));</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">if</span> (value == 1) {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      dec(operand);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      sub(operand, Immediate(value));</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    }</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  }</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;}</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IncrementCounter(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc,</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                                      StatsCounter* counter,</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                                      <span class="keywordtype">int</span> value) {</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(value &gt; 0);</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="keywordflow">if</span> (FLAG_native_code_counters &amp;&amp; counter-&gt;Enabled()) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    Label skip;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(cc), &amp;skip);</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    pushfd();</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    IncrementCounter(counter, value);</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    popfd();</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    bind(&amp;skip);</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;}</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="keywordtype">void</span> MacroAssembler::DecrementCounter(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc,</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                                      StatsCounter* counter,</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                                      <span class="keywordtype">int</span> value) {</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(value &gt; 0);</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;  <span class="keywordflow">if</span> (FLAG_native_code_counters &amp;&amp; counter-&gt;Enabled()) {</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    Label skip;</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(cc), &amp;skip);</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    pushfd();</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    DecrementCounter(counter, value);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    popfd();</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    bind(&amp;skip);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  }</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;}</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc, <span class="keyword">const</span> <span class="keywordtype">char</span>* msg) {</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) Check(cc, msg);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;}</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertFastElements(Register elements) {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    Factory* factory = isolate()-&gt;factory();</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    Label ok;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, HeapObject::kMapOffset),</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        Immediate(factory-&gt;fixed_array_map()));</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, HeapObject::kMapOffset),</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        Immediate(factory-&gt;fixed_double_array_map()));</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, HeapObject::kMapOffset),</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        Immediate(factory-&gt;fixed_cow_array_map()));</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok);</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    Abort(<span class="stringliteral">&quot;JSObject with fast elements map has slow elements&quot;</span>);</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  }</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;}</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc, <span class="keyword">const</span> <span class="keywordtype">char</span>* msg) {</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  Label <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae77d2fa4643ef916a7813c2ef8e8ef81a67824ecf84f5816f07b74fa956bdbcd2">L</a>;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  j(cc, &amp;L);</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  Abort(msg);</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="comment">// will not return here</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  bind(&amp;L);</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;}</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckStackAlignment() {</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <span class="keywordtype">int</span> frame_alignment = OS::ActivationFrameAlignment();</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <span class="keywordtype">int</span> frame_alignment_mask = frame_alignment - 1;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="keywordflow">if</span> (frame_alignment &gt; kPointerSize) {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">IsPowerOf2</a>(frame_alignment));</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    Label alignment_as_expected;</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    test(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(frame_alignment_mask));</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;alignment_as_expected);</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <span class="comment">// Abort if stack is not aligned.</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    int3();</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    bind(&amp;alignment_as_expected);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  }</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;}</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Abort(<span class="keyword">const</span> <span class="keywordtype">char</span>* msg) {</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="comment">// We want to pass the msg string like a smi to avoid GC</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <span class="comment">// problems, however msg is not guaranteed to be aligned</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <span class="comment">// properly. Instead, we pass an aligned pointer that is</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <span class="comment">// a proper v8 smi, but also pass the alignment difference</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="comment">// from the real pointer as a smi.</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  intptr_t <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6c603e7903764fb0ff0195b628044c6aa22e7954f0f67bd13c875ccac1d77835d">p1</a> = <span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(msg);</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  intptr_t <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6c603e7903764fb0ff0195b628044c6aafc7f1858fd96503bbc87210e0aac3fd1">p0</a> = (p1 &amp; ~<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>) + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a>;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(reinterpret_cast&lt;Object*&gt;(p0)-&gt;IsSmi());</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <span class="keywordflow">if</span> (msg != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#aecbfd5eea582393f36ad153207340efa">NULL</a>) {</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    RecordComment(<span class="stringliteral">&quot;Abort message: &quot;</span>);</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    RecordComment(msg);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  }</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  push(Immediate(p0));</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  push(Immediate(reinterpret_cast&lt;intptr_t&gt;(Smi::FromInt(p1 - p0))));</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="comment">// Disable stub call restrictions to always allow calls to abort.</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <span class="keywordflow">if</span> (!has_frame_) {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="comment">// We don&#39;t actually want to generate a pile of code for this, so just</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="comment">// claim there is a stack frame, without generating one.</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    FrameScope scope(<span class="keyword">this</span>, <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">StackFrame::NONE</a>);</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    CallRuntime(Runtime::kAbort, 2);</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    CallRuntime(Runtime::kAbort, 2);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  }</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;  <span class="comment">// will not return here</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  int3();</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;}</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadInstanceDescriptors(Register map,</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                                             Register descriptors) {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  mov(descriptors,</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceDescriptorsOrBitField3Offset));</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  Label not_smi;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  JumpIfNotSmi(descriptors, &amp;not_smi);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  mov(descriptors, isolate()-&gt;factory()-&gt;empty_descriptor_array());</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  bind(&amp;not_smi);</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;}</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadPowerOf2(XMMRegister dst,</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                                  Register scratch,</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                                  <span class="keywordtype">int</span> power) {</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae7a9bd04cd5c5bc215f2ac0da2e56497">is_uintn</a>(power + HeapNumber::kExponentBias,</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                  HeapNumber::kExponentBits));</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  mov(scratch, Immediate(power + HeapNumber::kExponentBias));</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  movd(dst, scratch);</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  psllq(dst, HeapNumber::kMantissaBits);</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;}</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfInstanceTypeIsNotSequentialAscii(</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    Register instance_type,</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    Register scratch,</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    Label* failure) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="keywordflow">if</span> (!scratch.is(instance_type)) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    mov(scratch, instance_type);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  }</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  and_(scratch,</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;       <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a42742b6df96d8400b0ff2cf776247a7c">kStringRepresentationMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  cmp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aff85f0a2c44538aab092f92d25039773">kStringTag</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce">kSeqStringTag</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad5c35a8495dea43a3f750463afa38678">kAsciiStringTag</a>);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, failure);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;}</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfNotBothSequentialAsciiStrings(Register object1,</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                                                         Register object2,</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                                                         Register scratch1,</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                                                         Register scratch2,</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                                                         Label* failure) {</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="comment">// Check that both objects are not smis.</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  mov(scratch1, object1);</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  and_(scratch1, object2);</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  JumpIfSmi(scratch1, failure);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <span class="comment">// Load instance type for both strings.</span></div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  mov(scratch1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(object1, HeapObject::kMapOffset));</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  mov(scratch2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(object2, HeapObject::kMapOffset));</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  movzx_b(scratch1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch1, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  movzx_b(scratch2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch2, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="comment">// Check that both are flat ASCII strings.</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFlatAsciiStringMask =</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a42742b6df96d8400b0ff2cf776247a7c">kStringRepresentationMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>;</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFlatAsciiStringTag = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a4bf5ad9ef2b098cc92b757c2ddee864e">ASCII_STRING_TYPE</a>;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="comment">// Interleave bits from both instance types and compare them in one check.</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, kFlatAsciiStringMask &amp; (kFlatAsciiStringMask &lt;&lt; 3));</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  and_(scratch1, kFlatAsciiStringMask);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  and_(scratch2, kFlatAsciiStringMask);</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  lea(scratch1, Operand(scratch1, scratch2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>, 0));</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  cmp(scratch1, kFlatAsciiStringTag | (kFlatAsciiStringTag &lt;&lt; 3));</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, failure);</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;}</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PrepareCallCFunction(<span class="keywordtype">int</span> num_arguments, Register scratch) {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  <span class="keywordtype">int</span> frame_alignment = OS::ActivationFrameAlignment();</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="keywordflow">if</span> (frame_alignment != 0) {</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <span class="comment">// Make stack end at alignment and make room for num_arguments words</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="comment">// and the original value of esp.</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    mov(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>);</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    sub(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate((num_arguments + 1) * kPointerSize));</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">IsPowerOf2</a>(frame_alignment));</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    and_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, -frame_alignment);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    mov(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, num_arguments * kPointerSize), scratch);</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    sub(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(num_arguments * kPointerSize));</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  }</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;}</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallCFunction(ExternalReference <span class="keyword">function</span>,</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                                   <span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  <span class="comment">// Trashing eax is ok as it will be the return value.</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, Immediate(<span class="keyword">function</span>));</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  CallCFunction(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>, num_arguments);</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;}</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallCFunction(Register <span class="keyword">function</span>,</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;                                   <span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(has_frame());</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;  <span class="comment">// Check stack alignment.</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    CheckStackAlignment();</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  }</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  call(<span class="keyword">function</span>);</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;  <span class="keywordflow">if</span> (OS::ActivationFrameAlignment() != 0) {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, num_arguments * kPointerSize));</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    add(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">esp</a>, Immediate(num_arguments * kPointerSize));</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;}</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#add139af4fd2a1d81222fade6c7c69893">AreAliased</a>(Register r1, Register r2, Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acf66346cbf0bfc09159ea8ecf1b2f479">r3</a>, Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a754b1f214379cc086e644b1d002b0ea1">r4</a>) {</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="keywordflow">if</span> (r1.is(r2)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="keywordflow">if</span> (r1.is(r3)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  <span class="keywordflow">if</span> (r1.is(r4)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  <span class="keywordflow">if</span> (r2.is(r3)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;  <span class="keywordflow">if</span> (r2.is(r4)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="keywordflow">if</span> (r3.is(r4)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;}</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;CodePatcher::CodePatcher(<a class="code" href="../../d9/da2/namespacedisasm.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* address, <span class="keywordtype">int</span> size)</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    : address_(address),</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      size_(size),</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;      masm_(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#aecbfd5eea582393f36ad153207340efa">NULL</a>, address, size + Assembler::kGap) {</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="comment">// Create a new macro assembler pointing to the address of the code to patch.</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <span class="comment">// The size is adjusted with kGap on order for the assembler to generate size</span></div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  <span class="comment">// bytes of instructions without failing with buffer size constraints.</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(masm_.reloc_info_writer.pos() == address_ + size_ + Assembler::kGap);</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;}</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;CodePatcher::~CodePatcher() {</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;  <span class="comment">// Indicate that code has changed.</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  CPU::FlushICache(address_, size_);</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  <span class="comment">// Check that the code was patched as expected.</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(masm_.pc_ == address_ + size_);</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(masm_.reloc_info_writer.pos() == address_ + size_ + Assembler::kGap);</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;}</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckPageFlag(</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    Register scratch,</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="keywordtype">int</span> mask,</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc,</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    Label* condition_met,</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    Label::Distance condition_met_distance) {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(cc == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a> || cc == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>);</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  <span class="keywordflow">if</span> (scratch.is(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    and_(scratch, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    mov(scratch, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    and_(scratch, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  }</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  <span class="keywordflow">if</span> (mask &lt; (1 &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>)) {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    test_b(Operand(scratch, MemoryChunk::kFlagsOffset),</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;           static_cast&lt;uint8_t&gt;(mask));</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    test(Operand(scratch, MemoryChunk::kFlagsOffset), Immediate(mask));</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;  }</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;  j(cc, condition_met, condition_met_distance);</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;}</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckPageFlagForMap(</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    Handle&lt;Map&gt; map,</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <span class="keywordtype">int</span> mask,</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc,</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    Label* condition_met,</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    Label::Distance condition_met_distance) {</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(cc == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a> || cc == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>);</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  Page* page = Page::FromAddress(map-&gt;address());</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  ExternalReference reference(ExternalReference::page_flags(page));</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;  <span class="comment">// The inlined static address check of the page&#39;s flags relies</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;  <span class="comment">// on maps never being compacted.</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!isolate()-&gt;heap()-&gt;mark_compact_collector()-&gt;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;         IsOnEvacuationCandidate(*map));</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  <span class="keywordflow">if</span> (mask &lt; (1 &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>)) {</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    test_b(Operand::StaticVariable(reference), static_cast&lt;uint8_t&gt;(mask));</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    test(Operand::StaticVariable(reference), Immediate(mask));</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;  }</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  j(cc, condition_met, condition_met_distance);</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;}</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfBlack(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                                 Register scratch0,</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                                 Register scratch1,</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                                 Label* on_black,</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;                                 Label::Distance on_black_near) {</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  HasColor(<span class="keywordtype">object</span>, scratch0, scratch1,</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;           on_black, on_black_near,</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;           1, 0);  <span class="comment">// kBlackBitPattern.</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kBlackBitPattern, <span class="stringliteral">&quot;10&quot;</span>) == 0);</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;}</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;<span class="keywordtype">void</span> MacroAssembler::HasColor(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                              Register bitmap_scratch,</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;                              Register mask_scratch,</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;                              Label* has_color,</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;                              Label::Distance has_color_distance,</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                              <span class="keywordtype">int</span> first_bit,</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;                              <span class="keywordtype">int</span> second_bit) {</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#add139af4fd2a1d81222fade6c7c69893">AreAliased</a>(<span class="keywordtype">object</span>, bitmap_scratch, mask_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>));</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  GetMarkBits(<span class="keywordtype">object</span>, bitmap_scratch, mask_scratch);</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  Label other_color, word_boundary;</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  test(mask_scratch, Operand(bitmap_scratch, MemoryChunk::kHeaderSize));</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  j(first_bit == 1 ? <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a> : <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;other_color, Label::kNear);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  add(mask_scratch, mask_scratch);  <span class="comment">// Shift left 1 by adding.</span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;word_boundary, Label::kNear);</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  test(mask_scratch, Operand(bitmap_scratch, MemoryChunk::kHeaderSize));</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  j(second_bit == 1 ? <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a> : <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, has_color, has_color_distance);</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  jmp(&amp;other_color, Label::kNear);</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  bind(&amp;word_boundary);</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  test_b(Operand(bitmap_scratch, MemoryChunk::kHeaderSize + kPointerSize), 1);</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  j(second_bit == 1 ? <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a> : <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, has_color, has_color_distance);</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  bind(&amp;other_color);</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;}</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;<span class="keywordtype">void</span> MacroAssembler::GetMarkBits(Register addr_reg,</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                                 Register bitmap_reg,</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                                 Register mask_reg) {</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#add139af4fd2a1d81222fade6c7c69893">AreAliased</a>(addr_reg, mask_reg, bitmap_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>));</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  mov(bitmap_reg, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  and_(bitmap_reg, addr_reg);</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, addr_reg);</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <span class="keywordtype">int</span> shift =</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;      Bitmap::kBitsPerCellLog2 + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a> - Bitmap::kBytesPerCellLog2;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  shr(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, shift);</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  and_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>,</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;       (Page::kPageAlignmentMask &gt;&gt; shift) &amp; ~(Bitmap::kBytesPerCell - 1));</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;  add(bitmap_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>);</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, addr_reg);</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  shr(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>);</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  and_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, (1 &lt;&lt; Bitmap::kBitsPerCellLog2) - 1);</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  mov(mask_reg, Immediate(1));</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  shl_cl(mask_reg);</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;}</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnsureNotWhite(</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    Register value,</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    Register bitmap_scratch,</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    Register mask_scratch,</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    Label* value_is_white_and_not_data,</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    Label::Distance distance) {</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#add139af4fd2a1d81222fade6c7c69893">AreAliased</a>(value, bitmap_scratch, mask_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>));</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  GetMarkBits(value, bitmap_scratch, mask_scratch);</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <span class="comment">// If the value is black or grey we don&#39;t need to do anything.</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kWhiteBitPattern, <span class="stringliteral">&quot;00&quot;</span>) == 0);</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kBlackBitPattern, <span class="stringliteral">&quot;10&quot;</span>) == 0);</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kGreyBitPattern, <span class="stringliteral">&quot;11&quot;</span>) == 0);</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kImpossibleBitPattern, <span class="stringliteral">&quot;01&quot;</span>) == 0);</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  Label done;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <span class="comment">// Since both black and grey have a 1 in the first position and white does</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <span class="comment">// not have a 1 there we only need to check one bit.</span></div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  test(mask_scratch, Operand(bitmap_scratch, MemoryChunk::kHeaderSize));</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <span class="keywordflow">if</span> (FLAG_debug_code) {</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="comment">// Check for impossible bit pattern.</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    Label ok;</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    push(mask_scratch);</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <span class="comment">// shl.  May overflow making the check conservative.</span></div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    add(mask_scratch, mask_scratch);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    test(mask_scratch, Operand(bitmap_scratch, MemoryChunk::kHeaderSize));</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    int3();</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    pop(mask_scratch);</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;  }</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <span class="comment">// Value is white.  We check whether it is data that doesn&#39;t need scanning.</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <span class="comment">// Currently only checks for HeapNumber and non-cons strings.</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  Register map = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>;  <span class="comment">// Holds map while checking type.</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  Register length = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>;  <span class="comment">// Holds length of object after checking type.</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  Label not_heap_number;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  Label is_data_object;</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  <span class="comment">// Check for heap-number</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  mov(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(value, HeapObject::kMapOffset));</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  cmp(map, <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;heap_number_map());</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;not_heap_number, Label::kNear);</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  mov(length, Immediate(HeapNumber::kSize));</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  jmp(&amp;is_data_object, Label::kNear);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  bind(&amp;not_heap_number);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <span class="comment">// Check for strings.</span></div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a913f4fdfcba05281542857d54a006e38">kIsIndirectStringTag</a> == 1 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a18e6dc79dee8b661595469b94c8bdf56">kIsIndirectStringMask</a> == 1);</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">kNotStringTag</a> == 0x80 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> == 0x80);</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="comment">// If it&#39;s a string and it&#39;s not a cons string then it&#39;s an object containing</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;  <span class="comment">// no GC pointers.</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;  Register instance_type = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  movzx_b(instance_type, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  test_b(instance_type, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a18e6dc79dee8b661595469b94c8bdf56">kIsIndirectStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a>);</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, value_is_white_and_not_data);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <span class="comment">// It&#39;s a non-indirect (non-cons and non-slice) string.</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <span class="comment">// If it&#39;s external, the length is just ExternalString::kSize.</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <span class="comment">// Otherwise it&#39;s String::kHeaderSize + string-&gt;length() * (1 or 2).</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  Label not_external;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <span class="comment">// External strings are the only ones with the kExternalStringTag bit</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  <span class="comment">// set.</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce">kSeqStringTag</a> &amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7">kExternalStringTag</a>);</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a9573c2763a4dc28701f9211693bfd103">kConsStringTag</a> &amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7">kExternalStringTag</a>);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  test_b(instance_type, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7">kExternalStringTag</a>);</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;not_external, Label::kNear);</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  mov(length, Immediate(ExternalString::kSize));</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  jmp(&amp;is_data_object, Label::kNear);</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  bind(&amp;not_external);</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <span class="comment">// Sequential string, either ASCII or UC16.</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad5c35a8495dea43a3f750463afa38678">kAsciiStringTag</a> == 0x04);</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  and_(length, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>));</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  xor_(length, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>));</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  add(length, Immediate(0x04));</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <span class="comment">// Value now either 4 (if ASCII) or 8 (if UC16), i.e., char-size shifted</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  <span class="comment">// by 2. If we multiply the string length as smi by this, it still</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  <span class="comment">// won&#39;t overflow a 32-bit value.</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(SeqAsciiString::kMaxSize, SeqTwoByteString::kMaxSize);</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(SeqAsciiString::kMaxSize &lt;=</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;         static_cast&lt;int&gt;(0xffffffffu &gt;&gt; (2 + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a>)));</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  imul(length, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(value, String::kLengthOffset));</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  shr(length, 2 + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a> + kSmiShiftSize);</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  add(length, Immediate(SeqString::kHeaderSize + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>));</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;  and_(length, Immediate(~<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>));</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  bind(&amp;is_data_object);</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <span class="comment">// Value is a data object, and it is white.  Mark it black.  Since we know</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <span class="comment">// that the object is white we can make it black by flipping one bit.</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  or_(Operand(bitmap_scratch, MemoryChunk::kHeaderSize), mask_scratch);</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  and_(bitmap_scratch, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  add(Operand(bitmap_scratch, MemoryChunk::kLiveBytesOffset),</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;      length);</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <span class="keywordflow">if</span> (FLAG_debug_code) {</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    mov(length, Operand(bitmap_scratch, MemoryChunk::kLiveBytesOffset));</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    cmp(length, Operand(bitmap_scratch, MemoryChunk::kSizeOffset));</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a3d7997d719eae01744421e1193495946">less_equal</a>, <span class="stringliteral">&quot;Live Bytes Count overflow chunk size&quot;</span>);</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  }</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;}</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckEnumCache(Label* call_runtime) {</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  Label next;</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  bind(&amp;next);</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="comment">// Check that there are no elements.  Register ecx contains the</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;  <span class="comment">// current JS object we&#39;ve reached through the prototype chain.</span></div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, JSObject::kElementsOffset),</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      isolate()-&gt;factory()-&gt;empty_fixed_array());</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, call_runtime);</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;  <span class="comment">// Check that instance descriptors are not empty so that we can</span></div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  <span class="comment">// check for an enum cache.  Leave the map in ebx for the subsequent</span></div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  <span class="comment">// prototype load.</span></div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, Map::kInstanceDescriptorsOrBitField3Offset));</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  JumpIfSmi(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, call_runtime);</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  <span class="comment">// Check that there is an enum cache in the non-empty instance</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;  <span class="comment">// descriptors (edx).  This is the case if the next enumeration</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;  <span class="comment">// index field does not contain a smi.</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, DescriptorArray::kEnumerationIndexOffset));</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  JumpIfSmi(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, call_runtime);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  <span class="comment">// For all objects but the receiver, check that the cache is empty.</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  Label check_prototype;</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">eax</a>);</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;check_prototype, Label::kNear);</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, DescriptorArray::kEnumCacheBridgeCacheOffset));</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">edx</a>, isolate()-&gt;factory()-&gt;empty_fixed_array());</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, call_runtime);</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  <span class="comment">// Load the prototype from the map and loop if non-null.</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  bind(&amp;check_prototype);</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  mov(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">ebx</a>, Map::kPrototypeOffset));</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;  cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">ecx</a>, isolate()-&gt;factory()-&gt;null_value());</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;next);</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;}</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;} }  <span class="comment">// namespace v8::internal</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="preprocessor">#endif  // V8_TARGET_ARCH_IA32</span></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac7f0eb0e10bc8bbb03c793ea1256e329"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">v8::internal::Address</a></div><div class="ttdeci">byte * Address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00172">globals.h:172</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7ff5a5c54f182b86d1cd993cf4512c87a50d1448013c6f17125caee18aa418af7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7ff5a5c54f182b86d1cd993cf4512c87a50d1448013c6f17125caee18aa418af7">v8::internal::NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00058">property-details.h:58</a></div></div>
<div class="ttc" id="namespacedisasm_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="../../d9/da2/namespacedisasm.html#a0c8186d9b9b7880309c27230bbb5e69d">disasm::byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d84/disasm_8h_source.html#l00033">disasm.h:33</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_af6b70770fe43654cad4231e96f96049a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">v8::internal::kSmiTagMask</a></div><div class="ttdeci">const intptr_t kSmiTagMask</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03855">v8.h:3855</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b">v8::internal::times_2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00302">assembler-ia32.h:302</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1">v8::internal::DO_SMI_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00453">v8globals.h:453</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2723148e93023c30ba2f0bd2aed0257a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2723148e93023c30ba2f0bd2aed0257a">v8::internal::kNaNOrInfinityLowerBoundUpper32</a></div><div class="ttdeci">const uint32_t kNaNOrInfinityLowerBoundUpper32</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00478">v8globals.h:478</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a149b900bdc46365c37413a7132589939"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a149b900bdc46365c37413a7132589939">v8::internal::is_intn</a></div><div class="ttdeci">bool is_intn(int x, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dec/assembler_8h_source.html#l00826">assembler.h:826</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acf66346cbf0bfc09159ea8ecf1b2f479"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acf66346cbf0bfc09159ea8ecf1b2f479">v8::internal::r3</a></div><div class="ttdeci">const Register r3</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00151">assembler-arm.h:151</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a1665a21bbe0fa4e1956abbeb702a170d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1665a21bbe0fa4e1956abbeb702a170d">v8::internal::less</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00214">assembler-ia32.h:214</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8ab67380aeceb97932170fbca2bcdf965f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8ab67380aeceb97932170fbca2bcdf965f">v8::internal::greater</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00217">assembler-ia32.h:217</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3884db38d654abf2e032bff0f4054d56"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56">v8::internal::RememberedSetAction</a></div><div class="ttdeci">RememberedSetAction</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00083">macro-assembler-arm.h:83</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afc9485caadcdbab9ac567ff1ec54e554"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afc9485caadcdbab9ac567ff1ec54e554">v8::internal::kNumRegisters</a></div><div class="ttdeci">const int kNumRegisters</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00095">constants-arm.h:95</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad0859fcb9037ff40c6603e0bb9273f34aec3e8ba892adc4128a6d6570e00af9b0"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34aec3e8ba892adc4128a6d6570e00af9b0">v8::internal::CMOV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00440">v8globals.h:440</a></div></div>
<div class="ttc" id="debug_8h_html"><div class="ttname"><a href="../../db/d16/debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aa3dc8d2237f792b4fc7ac64f4d626878ae5bc121adaee1e093a70b16735b60909"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aa3dc8d2237f792b4fc7ac64f4d626878ae5bc121adaee1e093a70b16735b60909">v8::internal::ALLOW_ELEMENT_TRANSITION_MAPS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00138">objects.h:138</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac4aae93ae9d7125d4e7435924a8efe08"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac4aae93ae9d7125d4e7435924a8efe08">v8::internal::esp</a></div><div class="ttdeci">const Register esp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00114">assembler-ia32.h:114</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">v8::internal::below</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00204">assembler-ia32.h:204</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a3d7997d719eae01744421e1193495946"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a3d7997d719eae01744421e1193495946">v8::internal::less_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00216">assembler-ia32.h:216</a></div></div>
<div class="ttc" id="runtime_8h_html"><div class="ttname"><a href="../../d3/d51/runtime_8h.html">runtime.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">v8::internal::not_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00207">assembler-ia32.h:207</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27ae0fb0de14793fcfd1fb9a841436003e1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ae0fb0de14793fcfd1fb9a841436003e1">v8::internal::FIRST_NONCALLABLE_SPEC_OBJECT_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00640">objects.h:640</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6039b5dd6fdbbfc93266be101c27b8d4"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6039b5dd6fdbbfc93266be101c27b8d4">v8::internal::flags</a></div><div class="ttdeci">Flag flags[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l01467">flags.cc:1467</a></div></div>
<div class="ttc" id="namespaceunibrow_html_a32f2e37ee053cf2ce8ca28d1f74630e5"><div class="ttname"><a href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/unicode_8cc_source.html#l00047">unicode.cc:47</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">v8::internal::not_zero</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00223">assembler-ia32.h:223</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7b4bcf1a2476785bc7f80eacbddf1822"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">v8::internal::SaveFPRegsMode</a></div><div class="ttdeci">SaveFPRegsMode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dec/assembler_8h_source.html#l00143">assembler.h:143</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">v8::internal::times_1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00301">assembler-ia32.h:301</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa52f2da6781b2f6f5de86b0f87e101d74"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa52f2da6781b2f6f5de86b0f87e101d74">v8::internal::times_half_pointer_size</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00306">assembler-ia32.h:306</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6c603e7903764fb0ff0195b628044c6aa22e7954f0f67bd13c875ccac1d77835d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6c603e7903764fb0ff0195b628044c6aa22e7954f0f67bd13c875ccac1d77835d">v8::internal::p1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00376">assembler-arm.h:376</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9f">v8::internal::ScaleFactor</a></div><div class="ttdeci">ScaleFactor</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00300">assembler-ia32.h:300</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_add139af4fd2a1d81222fade6c7c69893"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#add139af4fd2a1d81222fade6c7c69893">v8::internal::AreAliased</a></div><div class="ttdeci">bool AreAliased(Register r1, Register r2, Register r3, Register r4)</div></div>
<div class="ttc" id="checks_8h_html_ac22830a985e1daed0c9eadba8c6f606e"><div class="ttname"><a href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00270">checks.h:270</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a23cc6b3a9026e6e9255f75e0ecdbc500"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a23cc6b3a9026e6e9255f75e0ecdbc500">v8::internal::CanTransitionToMoreGeneralFastElementsKind</a></div><div class="ttdeci">bool CanTransitionToMoreGeneralFastElementsKind(ElementsKind elements_kind, bool allow_only_packed)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00210">elements-kind.h:210</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d">v8::internal::carry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00220">assembler-ia32.h:220</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aafe5e4a0b571d134a2e5096606bb055f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">v8::internal::kPointerSizeLog2</a></div><div class="ttdeci">const int kPointerSizeLog2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00246">globals.h:246</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a877da585f7669eb7d4ba888938317230"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a877da585f7669eb7d4ba888938317230">v8::internal::false</a></div><div class="ttdeci">false</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00136">flags.cc:136</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a8c33592060c5e5568b3fa116c71610ba"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a8c33592060c5e5568b3fa116c71610ba">v8::internal::sign</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00224">assembler-ia32.h:224</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a42742b6df96d8400b0ff2cf776247a7c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a42742b6df96d8400b0ff2cf776247a7c">v8::internal::kStringRepresentationMask</a></div><div class="ttdeci">const uint32_t kStringRepresentationMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00455">objects.h:455</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6e83dd17c5de4dbc4a77cf6622fd385d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6e83dd17c5de4dbc4a77cf6622fd385d">v8::internal::r2</a></div><div class="ttdeci">const Register r2</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00150">assembler-arm.h:150</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7b4bcf1a2476785bc7f80eacbddf1822a1f66bbcb0dcf356584f55d2acbbf9f54"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822a1f66bbcb0dcf356584f55d2acbbf9f54">v8::internal::kSaveFPRegs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dec/assembler_8h_source.html#l00143">assembler.h:143</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3489b43407280cc0752430ea0da4e767"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">v8::internal::kObjectAlignmentMask</a></div><div class="ttdeci">const intptr_t kObjectAlignmentMask</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00045">v8globals.h:45</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6c603e7903764fb0ff0195b628044c6aafc7f1858fd96503bbc87210e0aac3fd1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6c603e7903764fb0ff0195b628044c6aafc7f1858fd96503bbc87210e0aac3fd1">v8::internal::p0</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00375">assembler-arm.h:375</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a915c289a31a33b4c18de441e4a1e5aab"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a915c289a31a33b4c18de441e4a1e5aab">v8::internal::IsFastElementsKind</a></div><div class="ttdeci">bool IsFastElementsKind(ElementsKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00100">elements-kind.h:100</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a32df3bb76b662e0f3613654187f72aa4a819e97a39906a4b5a6f6eeb9a82efaea"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a819e97a39906a4b5a6f6eeb9a82efaea">v8::internal::OMIT_SMI_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00084">macro-assembler-arm.h:84</a></div></div>
<div class="ttc" id="bootstrapper_8h_html"><div class="ttname"><a href="../../d9/d41/bootstrapper_8h.html">bootstrapper.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a44ee97292914fbe042fc1b7b3236f7bc"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a44ee97292914fbe042fc1b7b3236f7bc">v8::internal::kHeapObjectTagMask</a></div><div class="ttdeci">const intptr_t kHeapObjectTagMask</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03850">v8.h:3850</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">v8::internal::FAST_HOLEY_SMI_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00040">elements-kind.h:40</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3884db38d654abf2e032bff0f4054d56a0281060991aef42d86dcf437f5dbb1a1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56a0281060991aef42d86dcf437f5dbb1a1">v8::internal::OMIT_REMEMBERED_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00083">macro-assembler-arm.h:83</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aa3dc8d2237f792b4fc7ac64f4d626878"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aa3dc8d2237f792b4fc7ac64f4d626878">v8::internal::CompareMapMode</a></div><div class="ttdeci">CompareMapMode</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00136">objects.h:136</a></div></div>
<div class="ttc" id="test-strings_8cc_html_ae21f357c223957d36046a0d71cc6aed7"><div class="ttname"><a href="../../d6/dc1/test-strings_8cc.html#ae21f357c223957d36046a0d71cc6aed7">seed</a></div><div class="ttdeci">unsigned int seed</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00017">test-strings.cc:17</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396">CALL_FUNCTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00034">macro-assembler.h:34</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91">v8::internal::FAST_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00045">elements-kind.h:45</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae5ba1130911b66d0e2bbd78c0d4bee04"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae5ba1130911b66d0e2bbd78c0d4bee04">v8::internal::edi</a></div><div class="ttdeci">const Register edi</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00117">assembler-ia32.h:117</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab13cff482340ab78fa710bd979e42132"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">v8::internal::kNotStringTag</a></div><div class="ttdeci">const uint32_t kNotStringTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00438">objects.h:438</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a141f8f6994d1ca535e4e62942b3dab1d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a141f8f6994d1ca535e4e62942b3dab1d">v8::internal::ebp</a></div><div class="ttdeci">const Register ebp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00115">assembler-ia32.h:115</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5adf92f40f8705bd9fc042cd8ed3e2fcab5202c2428bbeaf36cf1261e87d40928"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fcab5202c2428bbeaf36cf1261e87d40928">v8::internal::RESULT_CONTAINS_TOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00065">macro-assembler-arm.h:65</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017">v8::internal::ElementsKind</a></div><div class="ttdeci">ElementsKind</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00036">elements-kind.h:36</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a1d4b84c106e61b582d03b0d87663181a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a1d4b84c106e61b582d03b0d87663181a">v8::internal::eax</a></div><div class="ttdeci">const Register eax</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00110">assembler-ia32.h:110</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a75d3ad581521afd012eb61ef19196d31"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a75d3ad581521afd012eb61ef19196d31">v8::internal::IsFastPackedElementsKind</a></div><div class="ttdeci">bool IsFastPackedElementsKind(ElementsKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00145">elements-kind.h:145</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a605c1ec41394d49785f9b9c1d3319e5b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">v8::internal::kDoubleSize</a></div><div class="ttdeci">const int kDoubleSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00232">globals.h:232</a></div></div>
<div class="ttc" id="serialize_8h_html"><div class="ttname"><a href="../../df/d9d/serialize_8h.html">serialize.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7c0c094a0f8f18d0aeb72d9a0cbe7d47a234a32427b81f90629f63c86db9bf0a0"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47a234a32427b81f90629f63c86db9bf0a0">v8::internal::CALL_AS_FUNCTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00461">v8globals.h:461</a></div></div>
<div class="ttc" id="property-details_8h_html_ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2"><div class="ttname"><a href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00037">property-details.h:37</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a27e7e0d72e031a1f8cf71a9a7fdefaa7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a27e7e0d72e031a1f8cf71a9a7fdefaa7">v8::internal::LAST_NONCALLABLE_SPEC_OBJECT_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00641">objects.h:641</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a18e6dc79dee8b661595469b94c8bdf56"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a18e6dc79dee8b661595469b94c8bdf56">v8::internal::kIsIndirectStringMask</a></div><div class="ttdeci">const uint32_t kIsIndirectStringMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00462">objects.h:462</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_aecbfd5eea582393f36ad153207340efa"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#aecbfd5eea582393f36ad153207340efa">NULL</a></div><div class="ttdeci">activate correct semantics for inheriting readonliness enable harmony semantics for typeof enable harmony enable harmony proxies enable all harmony harmony_scoping harmony_proxies harmony_scoping tracks arrays with only smi values automatically unbox arrays of doubles use crankshaft use hydrogen range analysis use hydrogen global value numbering use function inlining maximum number of AST nodes considered for a single inlining loop invariant code motion print statistics for hydrogen trace generated IR for specified phases trace register allocator trace range analysis trace representation types environment for every instruction put a break point before deoptimizing polymorphic inlining perform array bounds checks elimination trace on stack replacement optimize closures functions with arguments object optimize functions containing for in loops profiler considers IC stability primitive functions trigger their own optimization re try self optimization if it failed insert an interrupt check at function exit execution budget before interrupt is triggered call count before self optimization self_optimization count_based_interrupts weighted_back_edges trace_opt emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of SAHF instruction if enable use of VFP3 instructions if available this implies enabling ARMv7 enable use of ARMv7 instructions if enable use of MIPS FPU instructions if NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00273">flag-definitions.h:273</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ade2f76ca31816a0649d08bc8856fd56b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">v8::internal::kPointerSize</a></div><div class="ttdeci">const int kPointerSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00234">globals.h:234</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a77dd0d910751ab1628781fb29adc69d8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a77dd0d910751ab1628781fb29adc69d8">v8::internal::MAP_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00538">objects.h:538</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a5deff98b7209d461524e9b5bff3dd4bf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5deff98b7209d461524e9b5bff3dd4bf">v8::internal::above_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00205">assembler-ia32.h:205</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2cd982c75cf137802592cdabd4b92d35"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">v8::internal::FieldOperand</a></div><div class="ttdeci">Operand FieldOperand(Register object, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d46/macro-assembler-ia32_8h_source.html#l00944">macro-assembler-ia32.h:944</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a224301b9ffc6ba603d83a6806a25f714"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a224301b9ffc6ba603d83a6806a25f714">v8::internal::ecx</a></div><div class="ttdeci">const Register ecx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00111">assembler-ia32.h:111</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0a8fa6d618b69c17a399f61e9a4b56b3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">v8::internal::kZapValue</a></div><div class="ttdeci">const Address kZapValue</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00089">v8globals.h:89</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a36d4343b9bd1bc95a5e5013dbb13f94c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">v8::internal::kHeapObjectTag</a></div><div class="ttdeci">const int kHeapObjectTag</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03848">v8.h:3848</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ada66adab5e750853950daf4371db1392"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ada66adab5e750853950daf4371db1392">v8::internal::IsAligned</a></div><div class="ttdeci">bool IsAligned(T value, U alignment)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00206">utils.h:206</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7c0c094a0f8f18d0aeb72d9a0cbe7d47"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47">v8::internal::CallKind</a></div><div class="ttdeci">CallKind</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00459">v8globals.h:459</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a30f7ffa00999f8bdf1023904d2b204d4"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a30f7ffa00999f8bdf1023904d2b204d4">v8::internal::is_uint16</a></div><div class="ttdeci">bool is_uint16(int x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dec/assembler_8h_source.html#l00847">assembler.h:847</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a818786d91ba77192f22d97260f817d77"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a818786d91ba77192f22d97260f817d77">v8::internal::kHoleNanLower32</a></div><div class="ttdeci">const uint32_t kHoleNanLower32</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00477">v8globals.h:477</a></div></div>
<div class="ttc" id="codegen_8h_html"><div class="ttname"><a href="../../d1/d39/codegen_8h.html">codegen.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5adf92f40f8705bd9fc042cd8ed3e2fcac721f640a1ecb341c800abadd769bbef"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fcac721f640a1ecb341c800abadd769bbef">v8::internal::TAG_OBJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00062">macro-assembler-arm.h:62</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a218145ea10aed9047915625daa5f5f46"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">v8::internal::kBitsPerByte</a></div><div class="ttdeci">const int kBitsPerByte</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00251">globals.h:251</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a73c5ad80dd8c4842fdfe80fcfab50484"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a73c5ad80dd8c4842fdfe80fcfab50484">v8::internal::r0</a></div><div class="ttdeci">const Register r0</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00148">assembler-arm.h:148</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27">v8::internal::InstanceType</a></div><div class="ttdeci">InstanceType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00499">objects.h:499</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab46d6fb6aab3e552e9fb0ab7fe9212ba"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">v8::internal::IsPowerOf2</a></div><div class="ttdeci">bool IsPowerOf2(T x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00050">utils.h:50</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">v8::internal::times_8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00304">assembler-ia32.h:304</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aaa2b5552afaab806ac61a34b16e7a1c7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aaa2b5552afaab806ac61a34b16e7a1c7">v8::internal::TenToThe</a></div><div class="ttdeci">int TenToThe(int exponent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00794">utils.h:794</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_macro_assembler_html_adf95c7bdba7635e6435320dabd72edc2"><div class="ttname"><a href="../../d8/db1/classv8_1_1internal_1_1_macro_assembler.html#adf95c7bdba7635e6435320dabd72edc2">v8::internal::MacroAssembler::MacroAssembler</a></div><div class="ttdeci">MacroAssembler(Isolate *isolate, void *buffer, int size)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a90286bd943f9eeda91de18b38aee2d37"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a90286bd943f9eeda91de18b38aee2d37">v8::internal::negative</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00210">assembler-ia32.h:210</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aff85f0a2c44538aab092f92d25039773"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aff85f0a2c44538aab092f92d25039773">v8::internal::kStringTag</a></div><div class="ttdeci">const uint32_t kStringTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00437">objects.h:437</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0e008753fb0a146213a1b3822fae9031a9573c2763a4dc28701f9211693bfd103"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a9573c2763a4dc28701f9211693bfd103">v8::internal::kConsStringTag</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00458">objects.h:458</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a0fb80d1e7fafc4b00df717805a1c83ea"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0fb80d1e7fafc4b00df717805a1c83ea">v8::internal::cc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00125">constants-arm.h:125</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a54ec24cd23f46645d647c42fc13b76da"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a></div><div class="ttdeci">InvokeFlag</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00033">macro-assembler.h:33</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00035">macro-assembler.h:35</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae77d2fa4643ef916a7813c2ef8e8ef81a67824ecf84f5816f07b74fa956bdbcd2"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae77d2fa4643ef916a7813c2ef8e8ef81a67824ecf84f5816f07b74fa956bdbcd2">v8::internal::L</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00227">constants-arm.h:227</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">v8::internal::above</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00209">assembler-ia32.h:209</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a478a56a8b5b2d4402ab1d181a309afaf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">v8::internal::kIsNotStringMask</a></div><div class="ttdeci">const uint32_t kIsNotStringMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00436">objects.h:436</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e325b47be17d36b12096ad1d73067b1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e325b47be17d36b12096ad1d73067b1">v8::internal::r1</a></div><div class="ttdeci">const Register r1</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00149">assembler-arm.h:149</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5128c3528ee260883c31181803edaa21"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5128c3528ee260883c31181803edaa21">v8::internal::ebx</a></div><div class="ttdeci">const Register ebx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00113">assembler-ia32.h:113</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a07f7ee0250996c5e40a8f8e5e9a0d7a5a6c0c338932b450afc64a0224b4d47baa"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a07f7ee0250996c5e40a8f8e5e9a0d7a5a6c0c338932b450afc64a0224b4d47baa">v8::internal::DEBUG_BREAK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00272">v8globals.h:272</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7">v8::internal::kExternalStringTag</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00459">objects.h:459</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a120129960270720fe1e85f660c6157ac"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a120129960270720fe1e85f660c6157ac">v8::internal::kNumSafepointRegisters</a></div><div class="ttdeci">const int kNumSafepointRegisters</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1e/frames-arm_8h_source.html#l00092">frames-arm.h:92</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">v8::internal::below_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00208">assembler-ia32.h:208</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">v8::internal::equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00206">assembler-ia32.h:206</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afa8d68cf6bb62505693e9b654a93cba7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afa8d68cf6bb62505693e9b654a93cba7">v8::internal::kSmiShiftSize</a></div><div class="ttdeci">const int kSmiShiftSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03899">v8.h:3899</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a02670a3c9633129c524842afc57c106d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a02670a3c9633129c524842afc57c106d">v8::internal::JS_FUNCTION_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00611">objects.h:611</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6d70ea3f1d301fc9ee97b592f9791267"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6d70ea3f1d301fc9ee97b592f9791267">v8::internal::GetNextMoreGeneralFastElementsKind</a></div><div class="ttdeci">ElementsKind GetNextMoreGeneralFastElementsKind(ElementsKind elements_kind, bool allow_only_packed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d23/elements-kind_8cc_source.html#l00092">elements-kind.cc:92</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_abfb56f7f0470945ac0cec842e3cf329a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#abfb56f7f0470945ac0cec842e3cf329a">v8::internal::ApiParameterOperand</a></div><div class="ttdeci">Operand ApiParameterOperand(int index)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3c41c69a6b8cd1517fc62a145fb8f180"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">v8::internal::kSmiTagSize</a></div><div class="ttdeci">const int kSmiTagSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03854">v8.h:3854</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">v8::internal::Condition</a></div><div class="ttdeci">Condition</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00119">constants-arm.h:119</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aa1e824488bf601828e2e5e7d74985924"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aa1e824488bf601828e2e5e7d74985924">v8::internal::flag</a></div><div class="ttdeci">kPropertyAccessorsOffset kNamedPropertyHandlerOffset kInstanceTemplateOffset kAccessCheckInfoOffset kEvalFrominstructionsOffsetOffset kThisPropertyAssignmentsOffset flag</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03682">objects-inl.h:3682</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">v8::internal::times_4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00303">assembler-ia32.h:303</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0c3194971dfd6e181766eb2144fefbc3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">v8::internal::NegateCondition</a></div><div class="ttdeci">Condition NegateCondition(Condition cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00147">constants-arm.h:147</a></div></div>
<div class="ttc" id="checks_8h_html_a9f578a62e6cedf3f56577f294abe2713"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a></div><div class="ttdeci">#define ASSERT_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00271">checks.h:271</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a9858f189cf0d66eb7e668d7a2f03f44b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a9858f189cf0d66eb7e668d7a2f03f44b">v8::internal::esi</a></div><div class="ttdeci">const Register esi</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00116">assembler-ia32.h:116</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2c9dc287b9b66f415817e67ed68cb71a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2c9dc287b9b66f415817e67ed68cb71a">v8::internal::kShortSize</a></div><div class="ttdeci">const int kShortSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00230">globals.h:230</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_adf8c5e55ff648830ec482327b2e63b28"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#adf8c5e55ff648830ec482327b2e63b28">v8::internal::true</a></div><div class="ttdeci">activate correct semantics for inheriting readonliness enable harmony semantics for typeof enable harmony enable harmony proxies enable all harmony harmony_scoping harmony_proxies harmony_scoping true</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00157">flags.cc:157</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a484fd1d5b717caae6eec9a21968d3b12"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">v8::internal::kSmiTag</a></div><div class="ttdeci">const int kSmiTag</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03853">v8.h:3853</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">v8::internal::zero</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00222">assembler-ia32.h:222</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7c0c094a0f8f18d0aeb72d9a0cbe7d47a867d7e93065f39103b9e480005ee1250"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7c0c094a0f8f18d0aeb72d9a0cbe7d47a867d7e93065f39103b9e480005ee1250">v8::internal::CALL_AS_METHOD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00460">v8globals.h:460</a></div></div>
<div class="ttc" id="isolate_8h_html_aedf6a97db5aec9c5da4cb045ac40c2df"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a></div><div class="ttdeci">#define FACTORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l01409">isolate.h:1409</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aec94f7c51d675bb64581e4560ee0e251"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251">v8::internal::SmiCheckType</a></div><div class="ttdeci">SmiCheckType</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00451">v8globals.h:451</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a913f4fdfcba05281542857d54a006e38"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a913f4fdfcba05281542857d54a006e38">v8::internal::kIsIndirectStringTag</a></div><div class="ttdeci">const uint32_t kIsIndirectStringTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00463">objects.h:463</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad0859fcb9037ff40c6603e0bb9273f34a8d896e4fb625a47eaa49059a390971df">v8::internal::SSE2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00439">v8globals.h:439</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134">v8::internal::INLINE_SMI_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00084">macro-assembler-arm.h:84</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5adf92f40f8705bd9fc042cd8ed3e2fc"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">v8::internal::AllocationFlags</a></div><div class="ttdeci">AllocationFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00058">macro-assembler-arm.h:58</a></div></div>
<div class="ttc" id="serialize_8cc_html_a0680794c1f518f74b9ca2c445c161917"><div class="ttname"><a href="../../d4/df1/serialize_8cc.html#a0680794c1f518f74b9ca2c445c161917">RUNTIME_ENTRY</a></div><div class="ttdeci">#define RUNTIME_ENTRY(name, nargs, ressize)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a433bbae437dfea4f24022a44f95ed5bf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a433bbae437dfea4f24022a44f95ed5bf">v8::internal::no_reg</a></div><div class="ttdeci">const Register no_reg</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00146">assembler-arm.h:146</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">v8::internal::times_pointer_size</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00307">assembler-ia32.h:307</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a4bf5ad9ef2b098cc92b757c2ddee864e"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a4bf5ad9ef2b098cc92b757c2ddee864e">v8::internal::ASCII_STRING_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00518">objects.h:518</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">v8::internal::FAST_SMI_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00039">elements-kind.h:39</a></div></div>
<div class="ttc" id="checks_8h_html_a5842480f337ef2ee4c17fc82cc4b57cd"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a></div><div class="ttdeci">#define STATIC_ASSERT(test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00283">checks.h:283</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad5c35a8495dea43a3f750463afa38678"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad5c35a8495dea43a3f750463afa38678">v8::internal::kAsciiStringTag</a></div><div class="ttdeci">const uint32_t kAsciiStringTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00451">objects.h:451</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afd7b3f26e9a3d5cfec143f33790d57b7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afd7b3f26e9a3d5cfec143f33790d57b7">v8::internal::edx</a></div><div class="ttdeci">const Register edx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00112">assembler-ia32.h:112</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6">v8::internal::FAST_HOLEY_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00046">elements-kind.h:46</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a2d5a0f84387e38e44f9a7663b66eddb3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a2d5a0f84387e38e44f9a7663b66eddb3">v8::internal::greater_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00215">assembler-ia32.h:215</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce">v8::internal::kSeqStringTag</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00457">objects.h:457</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a32df3bb76b662e0f3613654187f72aa4"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4">v8::internal::SmiCheck</a></div><div class="ttdeci">SmiCheck</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00084">macro-assembler-arm.h:84</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aec94f7c51d675bb64581e4560ee0e251a68f546db1d78edd21e128b742d2403dc"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251a68f546db1d78edd21e128b742d2403dc">v8::internal::DONT_DO_SMI_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00452">v8globals.h:452</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab81d3518ce57dd364c1d60e0045d4a92"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab81d3518ce57dd364c1d60e0045d4a92">v8::internal::kCharSize</a></div><div class="ttdeci">const int kCharSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00229">globals.h:229</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27ad939c92fc47b6c3f29db6cfbc8569cbf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ad939c92fc47b6c3f29db6cfbc8569cbf">v8::internal::FIRST_NONSTRING_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00617">objects.h:617</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_af325044478c719d86be7dc7a017f250a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">v8::internal::type</a></div><div class="ttdeci">FlagType type() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l01358">flags.cc:1358</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae7a9bd04cd5c5bc215f2ac0da2e56497"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae7a9bd04cd5c5bc215f2ac0da2e56497">v8::internal::is_uintn</a></div><div class="ttdeci">bool is_uintn(int x, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dec/assembler_8h_source.html#l00835">assembler.h:835</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac5ad29149b1cedc93909ab1642e66a84"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">v8::internal::kStringEncodingMask</a></div><div class="ttdeci">const uint32_t kStringEncodingMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00449">objects.h:449</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a754b1f214379cc086e644b1d002b0ea1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a754b1f214379cc086e644b1d002b0ea1">v8::internal::r4</a></div><div class="ttdeci">const Register r4</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00152">assembler-arm.h:152</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_591c672bec8ba44b3a2e50d024b2668d.html">ia32</a></li><li class="navelem"><a class="el" href="../../d5/db9/macro-assembler-ia32_8cc.html">macro-assembler-ia32.cc</a></li>
    <li class="footer">Generated on Sat Jun 7 2014 23:32:09 for v8 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
