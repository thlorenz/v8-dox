<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>v8: src/debug.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../v8-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">v8
   &#160;<span id="projectnumber">3.25.30(node0.11.13)</span>
   </div>
   <div id="projectbrief">V8 is Google&#39;s open source JavaScript engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/dbf/debug_8cc_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">debug.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/dbf/debug_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// modification, are permitted provided that the following conditions are</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// met:</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//     * Redistributions in binary form must reproduce the above</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//       copyright notice, this list of conditions and the following</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//       disclaimer in the documentation and/or other materials provided</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//       with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//     * Neither the name of Google Inc. nor the names of its</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//       contributors may be used to endorse or promote products derived</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//       from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d6a/src_2v8_8h.html">v8.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d65/api_8h.html">api.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d9b/arguments_8h.html">arguments.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d41/bootstrapper_8h.html">bootstrapper.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d9c/code-stubs_8h.html">code-stubs.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d39/codegen_8h.html">codegen.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dea/compilation-cache_8h.html">compilation-cache.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dd1/compiler_8h.html">compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d16/debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d23/deoptimizer_8h.html">deoptimizer.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d01/execution_8h.html">execution.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d3f/full-codegen_8h.html">full-codegen.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d6c/global-handles_8h.html">global-handles.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d32/ic_8h.html">ic.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/dd5/ic-inl_8h.html">ic-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d36/isolate-inl_8h.html">isolate-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d23/list_8h.html">list.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d48/messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d3e/natives_8h.html">natives.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/db3/stub-cache_8h.html">stub-cache.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d7f/log_8h.html">log.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;../include/v8-debug.h&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">namespace </span>v8 {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">namespace </span>internal {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;Debug::Debug(Isolate* isolate)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    : has_break_points_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      script_cache_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      debug_info_list_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      disable_break_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      break_on_exception_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      break_on_uncaught_exception_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      debug_break_return_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      debug_break_slot_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      isolate_(isolate) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  memset(registers_, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a567421406b56c78176fc07cf215ca9c5">JSCallerSavedBuffer</a>));</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;Debug::~Debug() {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> PrintLn(<a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> value) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> s = value-&gt;ToString();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  ScopedVector&lt;char&gt; data(s-&gt;Utf8Length() + 1);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">if</span> (data.start() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="../../d8/d0e/classv8_1_1internal_1_1_v8.html#a3c89270ab4ac2bd43e9a12d2b93f1a00">V8::FatalProcessOutOfMemory</a>(<span class="stringliteral">&quot;PrintLn&quot;</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  s-&gt;WriteUtf8(data.start());</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, data.start());</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Context&gt;</a> GetDebugEventContext(Isolate* isolate) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  Handle&lt;Context&gt; context = isolate-&gt;debug()-&gt;debugger_entry()-&gt;GetContext();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// Isolate::context() may have been NULL when &quot;script collected&quot; event</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// occured.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">if</span> (context.is_null()) <span class="keywordflow">return</span> <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Context&gt;</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  Handle&lt;Context&gt; native_context(context-&gt;native_context());</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(native_context);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;BreakLocationIterator::BreakLocationIterator(Handle&lt;DebugInfo&gt; debug_info,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                             BreakLocatorType type) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  debug_info_ = debug_info;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  type_ = type;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  reloc_iterator_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  reloc_iterator_original_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  Reset();  <span class="comment">// Initialize the rest of the member variables.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;BreakLocationIterator::~BreakLocationIterator() {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(reloc_iterator_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(reloc_iterator_original_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keyword">delete</span> reloc_iterator_;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keyword">delete</span> reloc_iterator_original_;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::Next() {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a949499cf64adf66e57fb90ad2546be23">DisallowHeapAllocation</a> no_gc;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!RinfoDone());</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// Iterate through reloc info for code and original code stopping at each</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// breakable code target.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordtype">bool</span> first = break_point_ == -1;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">while</span> (!RinfoDone()) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (!first) RinfoNext();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (RinfoDone()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// Whenever a statement position or (plain) position is passed update the</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// current value of these.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (RelocInfo::IsPosition(rmode())) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">if</span> (RelocInfo::IsStatementPosition(rmode())) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        statement_position_ = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            rinfo()-&gt;data() - debug_info_-&gt;shared()-&gt;start_position());</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="comment">// Always update the position as we don&#39;t want that to be before the</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="comment">// statement position.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      position_ = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          rinfo()-&gt;data() - debug_info_-&gt;shared()-&gt;start_position());</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(position_ &gt;= 0);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(statement_position_ &gt;= 0);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (IsDebugBreakSlot()) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="comment">// There is always a possible break point at a debug break slot.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      break_point_++;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RelocInfo::IsCodeTarget(rmode())) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="comment">// Check for breakable code target. Look in the original code as setting</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="comment">// break points can cause the code targets in the running (debugged) code</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="comment">// to be of a different kind than in the original code.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> target = original_rinfo()-&gt;target_address();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      Code* <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab91e71e972251cbfe502d5f3856e5762">code</a> = <a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">Code::GetCodeFromTargetAddress</a>(target);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> ((code-&gt;is_inline_cache_stub() &amp;&amp;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;           !code-&gt;is_binary_op_stub() &amp;&amp;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;           !code-&gt;is_compare_ic_stub() &amp;&amp;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;           !code-&gt;is_to_boolean_ic_stub()) ||</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;          RelocInfo::IsConstructCall(rmode())) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        break_point_++;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">if</span> (code-&gt;kind() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260">Code::STUB</a>) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span> (IsDebuggerStatement()) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;          break_point_++;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> (type_ == ALL_BREAK_LOCATIONS) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          <span class="keywordflow">if</span> (Debug::IsBreakStub(code)) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            break_point_++;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(type_ == SOURCE_BREAK_LOCATIONS);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;          <span class="keywordflow">if</span> (Debug::IsSourceBreakStub(code)) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            break_point_++;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// Check for break at return.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (RelocInfo::IsJSReturn(rmode())) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">// Set the positions to the end of the function.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">if</span> (debug_info_-&gt;shared()-&gt;HasSourceCode()) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        position_ = debug_info_-&gt;shared()-&gt;end_position() -</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    debug_info_-&gt;shared()-&gt;start_position() - 1;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        position_ = 0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      statement_position_ = position_;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      break_point_++;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::Next(<span class="keywordtype">int</span> count) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">while</span> (count &gt; 0) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    Next();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    count--;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">// Find the break point at the supplied address, or the closest one before</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">// the address.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::FindBreakLocationFromAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9e9f6458e65e4f27fba1d3fb66911f27">pc</a>) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// Run through all break points to locate the one closest to the address.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordtype">int</span> closest_break_point = 0;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordtype">int</span> distance = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a423de8f25d414ef1b7dcd541a75f7063">kMaxInt</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">while</span> (!Done()) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// Check if this break point is closer that what was previously found.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9e9f6458e65e4f27fba1d3fb66911f27">pc</a>() &lt;= pc &amp;&amp; pc - this-&gt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9e9f6458e65e4f27fba1d3fb66911f27">pc</a>() &lt; distance) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      closest_break_point = break_point();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      distance = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(pc - this-&gt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9e9f6458e65e4f27fba1d3fb66911f27">pc</a>());</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="comment">// Check whether we can&#39;t get any closer.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">if</span> (distance == 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    Next();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// Move to the break point found.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  Reset();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  Next(closest_break_point);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">// Find the break point closest to the supplied source position.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::FindBreakLocationFromPosition(<span class="keywordtype">int</span> position,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    BreakPositionAlignment alignment) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// Run through all break points to locate the one closest to the source</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// position.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordtype">int</span> closest_break_point = 0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordtype">int</span> distance = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a423de8f25d414ef1b7dcd541a75f7063">kMaxInt</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">while</span> (!Done()) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordtype">int</span> next_position;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">switch</span> (alignment) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">case</span> STATEMENT_ALIGNED:</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      next_position = this-&gt;statement_position();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">case</span> BREAK_POSITION_ALIGNED:</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      next_position = this-&gt;position();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      next_position = this-&gt;statement_position();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// Check if this break point is closer that what was previously found.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (position &lt;= next_position &amp;&amp; next_position - position &lt; distance) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      closest_break_point = break_point();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      distance = next_position - position;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">// Check whether we can&#39;t get any closer.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">if</span> (distance == 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    Next();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// Move to the break point found.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  Reset();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  Next(closest_break_point);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::Reset() {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// Create relocation iterators for the two code objects.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">if</span> (reloc_iterator_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) <span class="keyword">delete</span> reloc_iterator_;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">if</span> (reloc_iterator_original_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) <span class="keyword">delete</span> reloc_iterator_original_;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  reloc_iterator_ = <span class="keyword">new</span> RelocIterator(</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      debug_info_-&gt;code(),</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      ~RelocInfo::ModeMask(RelocInfo::CODE_AGE_SEQUENCE));</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  reloc_iterator_original_ = <span class="keyword">new</span> RelocIterator(</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      debug_info_-&gt;original_code(),</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      ~RelocInfo::ModeMask(RelocInfo::CODE_AGE_SEQUENCE));</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// Position at the first break point.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  break_point_ = -1;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  position_ = 1;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  statement_position_ = 1;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  Next();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="keywordtype">bool</span> BreakLocationIterator::Done()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">return</span> RinfoDone();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::SetBreakPoint(Handle&lt;Object&gt; break_point_object) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// If there is not already a real break point here patch code with debug</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// break.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (!HasBreakPoint()) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    SetDebugBreak();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(IsDebugBreak() || IsDebuggerStatement());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// Set the break point information.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  DebugInfo::SetBreakPoint(debug_info_, code_position(),</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                           position(), statement_position(),</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                           break_point_object);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::ClearBreakPoint(Handle&lt;Object&gt; break_point_object) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// Clear the break point information.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  DebugInfo::ClearBreakPoint(debug_info_, code_position(), break_point_object);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// If there are no more break points here remove the debug break.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> (!HasBreakPoint()) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    ClearDebugBreak();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!IsDebugBreak());</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::SetOneShot() {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// Debugger statement always calls debugger. No need to modify it.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (IsDebuggerStatement()) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// If there is a real break point here no more to do.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (HasBreakPoint()) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(IsDebugBreak());</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// Patch code with debug break.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  SetDebugBreak();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::ClearOneShot() {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">// Debugger statement always calls debugger. No need to modify it.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">if</span> (IsDebuggerStatement()) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// If there is a real break point here no more to do.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (HasBreakPoint()) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(IsDebugBreak());</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">// Patch code removing debug break.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  ClearDebugBreak();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!IsDebugBreak());</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::SetDebugBreak() {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// Debugger statement always calls debugger. No need to modify it.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">if</span> (IsDebuggerStatement()) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// If there is already a break point here just return. This might happen if</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// the same code is flooded with break points twice. Flooding the same</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// function twice might happen when stepping in a function with an exception</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// handler as the handler and the function is the same.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (IsDebugBreak()) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">if</span> (RelocInfo::IsJSReturn(rmode())) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// Patch the frame exit code with a break point.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    SetDebugBreakAtReturn();</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsDebugBreakSlot()) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// Patch the code in the break slot.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    SetDebugBreakAtSlot();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// Patch the IC call.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    SetDebugBreakAtIC();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(IsDebugBreak());</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::ClearDebugBreak() {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// Debugger statement always calls debugger. No need to modify it.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (IsDebuggerStatement()) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">if</span> (RelocInfo::IsJSReturn(rmode())) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">// Restore the frame exit code.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    ClearDebugBreakAtReturn();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsDebugBreakSlot()) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// Restore the code in the break slot.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    ClearDebugBreakAtSlot();</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// Patch the IC call.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    ClearDebugBreakAtIC();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!IsDebugBreak());</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="keywordtype">bool</span> BreakLocationIterator::IsStepInLocation(Isolate* isolate) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">if</span> (RelocInfo::IsConstructCall(original_rmode())) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RelocInfo::IsCodeTarget(rmode())) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    HandleScope scope(debug_info_-&gt;GetIsolate());</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> target = original_rinfo()-&gt;target_address();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    Handle&lt;Code&gt; target_code(<a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">Code::GetCodeFromTargetAddress</a>(target));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (target_code-&gt;kind() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260">Code::STUB</a>) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">return</span> target_code-&gt;major_key() == CodeStub::CallFunction;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::PrepareStepIn(Isolate* isolate) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  HandleScope scope(isolate);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// Step in can only be prepared if currently positioned on an IC call,</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// construct call or CallFunction stub call.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> target = rinfo()-&gt;target_address();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  Handle&lt;Code&gt; target_code(<a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">Code::GetCodeFromTargetAddress</a>(target));</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// All the following stuff is needed only for assertion checks so the code</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">// is wrapped in ifdef.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  Handle&lt;Code&gt; maybe_call_function_stub = target_code;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (IsDebugBreak()) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> original_target = original_rinfo()-&gt;target_address();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    maybe_call_function_stub =</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        Handle&lt;Code&gt;(<a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">Code::GetCodeFromTargetAddress</a>(original_target));</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordtype">bool</span> is_call_function_stub =</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      (maybe_call_function_stub-&gt;kind() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260">Code::STUB</a> &amp;&amp;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;       maybe_call_function_stub-&gt;major_key() == CodeStub::CallFunction);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// Step in through construct call requires no changes to the running code.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// Step in through getters/setters should already be prepared as well</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// because caller of this function (Debug::PrepareStep) is expected to</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// flood the top frame&#39;s function with one shot breakpoints.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="comment">// Step in through CallFunction stub should also be prepared by caller of</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// this function (Debug::PrepareStep) which should flood target function</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// with breakpoints.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(RelocInfo::IsConstructCall(rmode()) ||</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;         target_code-&gt;is_inline_cache_stub() ||</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         is_call_function_stub);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;}</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">// Check whether the break point is at a position which will exit the function.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keywordtype">bool</span> BreakLocationIterator::IsExit()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">return</span> (RelocInfo::IsJSReturn(rmode()));</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="keywordtype">bool</span> BreakLocationIterator::HasBreakPoint() {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">return</span> debug_info_-&gt;HasBreakPoint(code_position());</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">// Check whether there is a debug break at the current position.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="keywordtype">bool</span> BreakLocationIterator::IsDebugBreak() {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">if</span> (RelocInfo::IsJSReturn(rmode())) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> IsDebugBreakAtReturn();</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsDebugBreakSlot()) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span> IsDebugBreakAtSlot();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">return</span> Debug::IsDebugBreak(rinfo()-&gt;target_address());</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::SetDebugBreakAtIC() {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// Patch the original code with the current address as the current address</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">// might have changed by the inline caching since the code was copied.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  original_rinfo()-&gt;set_target_address(rinfo()-&gt;target_address());</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  RelocInfo::Mode <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5adc5ec2f1a2af41381abab75250b1c8">mode</a> = rmode();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">if</span> (RelocInfo::IsCodeTarget(mode)) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> target = rinfo()-&gt;target_address();</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    Handle&lt;Code&gt; target_code(<a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">Code::GetCodeFromTargetAddress</a>(target));</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// Patch the code to invoke the builtin debug break function matching the</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// calling convention used by the call site.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    Handle&lt;Code&gt; dbgbrk_code(Debug::FindDebugBreak(target_code, mode));</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    rinfo()-&gt;set_target_address(dbgbrk_code-&gt;entry());</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::ClearDebugBreakAtIC() {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// Patch the code to the original invoke.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  rinfo()-&gt;set_target_address(original_rinfo()-&gt;target_address());</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="keywordtype">bool</span> BreakLocationIterator::IsDebuggerStatement() {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a105546b82eb2e99e172dda630ee4fdc1a6c0c338932b450afc64a0224b4d47baa">RelocInfo::DEBUG_BREAK</a> == rmode();</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="keywordtype">bool</span> BreakLocationIterator::IsDebugBreakSlot() {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">return</span> RelocInfo::DEBUG_BREAK_SLOT == rmode();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* BreakLocationIterator::BreakPointObjects() {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordflow">return</span> debug_info_-&gt;GetBreakPointObjects(code_position());</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// Clear out all the debug break code. This is ONLY supposed to be used when</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">// shutting down the debugger as it will leave the break point information in</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">// DebugInfo even though the code is patched back to the non break point state.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::ClearAllDebugBreak() {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">while</span> (!Done()) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    ClearDebugBreak();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    Next();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="keywordtype">bool</span> BreakLocationIterator::RinfoDone()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(reloc_iterator_-&gt;done() == reloc_iterator_original_-&gt;done());</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">return</span> reloc_iterator_-&gt;done();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="keywordtype">void</span> BreakLocationIterator::RinfoNext() {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  reloc_iterator_-&gt;next();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  reloc_iterator_original_-&gt;next();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(reloc_iterator_-&gt;done() == reloc_iterator_original_-&gt;done());</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span> (!reloc_iterator_-&gt;done()) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(rmode() == original_rmode());</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">// Threading support.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="keywordtype">void</span> Debug::ThreadInit() {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  thread_local_.break_count_ = 0;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  thread_local_.break_id_ = 0;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  thread_local_.break_frame_id_ = StackFrame::NO_ID;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  thread_local_.last_step_action_ = StepNone;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  thread_local_.last_statement_position_ = RelocInfo::kNoPosition;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  thread_local_.step_count_ = 0;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  thread_local_.last_fp_ = 0;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  thread_local_.queued_step_count_ = 0;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  thread_local_.step_into_fp_ = 0;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  thread_local_.step_out_fp_ = 0;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  thread_local_.after_break_target_ = 0;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// TODO(isolates): frames_are_dropped_?</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  thread_local_.debugger_entry_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  thread_local_.pending_interrupts_ = 0;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  thread_local_.restarter_frame_function_pointer_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keywordtype">char</span>* Debug::ArchiveDebug(<span class="keywordtype">char</span>* storage) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordtype">char</span>* to = storage;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a26ae97c946e709188bcfbadcbadda2c3">OS::MemCopy</a>(to, reinterpret_cast&lt;char*&gt;(&amp;thread_local_), <span class="keyword">sizeof</span>(ThreadLocal));</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  to += <span class="keyword">sizeof</span>(ThreadLocal);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a26ae97c946e709188bcfbadcbadda2c3">OS::MemCopy</a>(to, reinterpret_cast&lt;char*&gt;(&amp;registers_), <span class="keyword">sizeof</span>(registers_));</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  ThreadInit();</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(to &lt;= storage + ArchiveSpacePerThread());</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">return</span> storage + ArchiveSpacePerThread();</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="keywordtype">char</span>* Debug::RestoreDebug(<span class="keywordtype">char</span>* storage) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordtype">char</span>* from = storage;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a26ae97c946e709188bcfbadcbadda2c3">OS::MemCopy</a>(</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      reinterpret_cast&lt;char*&gt;(&amp;thread_local_), from, <span class="keyword">sizeof</span>(ThreadLocal));</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  from += <span class="keyword">sizeof</span>(ThreadLocal);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a26ae97c946e709188bcfbadcbadda2c3">OS::MemCopy</a>(reinterpret_cast&lt;char*&gt;(&amp;registers_), from, <span class="keyword">sizeof</span>(registers_));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(from &lt;= storage + ArchiveSpacePerThread());</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">return</span> storage + ArchiveSpacePerThread();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="keywordtype">int</span> Debug::ArchiveSpacePerThread() {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(ThreadLocal) + <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a567421406b56c78176fc07cf215ca9c5">JSCallerSavedBuffer</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">// Frame structure (conforms InternalFrame structure):</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">//   -- code</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">//   -- SMI maker</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">//   -- function (slot is called &quot;context&quot;)</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">//   -- frame base</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>** Debug::SetUpFrameDropperFrame(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9f30ccf59233403783321902193ac283">StackFrame</a>* bottom_js_frame,</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                       Handle&lt;Code&gt; code) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(bottom_js_frame-&gt;is_java_script());</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae943a5add2fba4b841ff0cb6788d7df3">fp</a> = bottom_js_frame-&gt;fp();</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// Move function pointer into &quot;context&quot; slot.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="../../d6/dee/classv8_1_1internal_1_1_memory.html#a7ce214086a5711e63428a2c0a66d2e49">Memory::Object_at</a>(fp + <a class="code" href="../../db/dc7/classv8_1_1internal_1_1_standard_frame_constants.html#a2f62db6da071ad0173084095f53e6967">StandardFrameConstants::kContextOffset</a>) =</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <a class="code" href="../../d6/dee/classv8_1_1internal_1_1_memory.html#a7ce214086a5711e63428a2c0a66d2e49">Memory::Object_at</a>(fp + <a class="code" href="../../d3/dda/classv8_1_1internal_1_1_java_script_frame_constants.html#adb87977083557cc339f2ae7ce52e53e2">JavaScriptFrameConstants::kFunctionOffset</a>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="../../d6/dee/classv8_1_1internal_1_1_memory.html#a7ce214086a5711e63428a2c0a66d2e49">Memory::Object_at</a>(fp + <a class="code" href="../../d1/d54/classv8_1_1internal_1_1_internal_frame_constants.html#a116d352b5c608baabc051300c6802d4f">InternalFrameConstants::kCodeOffset</a>) = *<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab91e71e972251cbfe502d5f3856e5762">code</a>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="../../d6/dee/classv8_1_1internal_1_1_memory.html#a7ce214086a5711e63428a2c0a66d2e49">Memory::Object_at</a>(fp + <a class="code" href="../../db/dc7/classv8_1_1internal_1_1_standard_frame_constants.html#a5652f67c68f2a38c2d5d1a0b0740cb7d">StandardFrameConstants::kMarkerOffset</a>) =</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a97d86e98faf1fa957813fcad98fecf21adc7588f17692aa631f375290d50a2c8e">StackFrame::INTERNAL</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>**<span class="keyword">&gt;</span>(&amp;<a class="code" href="../../d6/dee/classv8_1_1internal_1_1_memory.html#a7ce214086a5711e63428a2c0a66d2e49">Memory::Object_at</a>(</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      fp + <a class="code" href="../../db/dc7/classv8_1_1internal_1_1_standard_frame_constants.html#a2f62db6da071ad0173084095f53e6967">StandardFrameConstants::kContextOffset</a>));</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> Debug::kFrameDropperFrameSize = 4;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="keywordtype">void</span> ScriptCache::Add(Handle&lt;Script&gt; script) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  GlobalHandles* global_handles = isolate_-&gt;global_handles();</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="comment">// Create an entry in the hash map for the script.</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordtype">int</span> <span class="keywordtype">id</span> = script-&gt;id()-&gt;value();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  HashMap::Entry* entry =</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#a5172f06f3e2ee3d3e1f4ac8f1246662e">HashMap::Lookup</a>(reinterpret_cast&lt;void*&gt;(<span class="keywordtype">id</span>), Hash(<span class="keywordtype">id</span>), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keywordflow">if</span> (entry-&gt;value != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(*script == *reinterpret_cast&lt;Script**&gt;(entry-&gt;value));</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// Globalize the script object, make it weak and use the location of the</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// global handle as the value in the hash map.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  Handle&lt;Script&gt; script_ =</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;Script&gt;::cast</a>(global_handles-&gt;Create(*script));</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a51953fb4d0f362ccb84ae168a4837c51">GlobalHandles::MakeWeak</a>(reinterpret_cast&lt;Object**&gt;(script_.location()),</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                          <span class="keyword">this</span>,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                          ScriptCache::HandleWeakScript);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  entry-&gt;value = script_.location();</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;Handle&lt;FixedArray&gt; ScriptCache::GetScripts() {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  Factory* factory = isolate_-&gt;factory();</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  Handle&lt;FixedArray&gt; instances = factory-&gt;NewFixedArray(occupancy());</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">for</span> (HashMap::Entry* entry = Start(); entry != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>; entry = Next(entry)) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(entry-&gt;value != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;value != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      instances-&gt;set(count, *reinterpret_cast&lt;Script**&gt;(entry-&gt;value));</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      count++;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">return</span> instances;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;}</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="keywordtype">void</span> ScriptCache::ProcessCollectedScripts() {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  Debugger* debugger = isolate_-&gt;debugger();</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; collected_scripts_.length(); i++) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    debugger-&gt;OnScriptCollected(collected_scripts_[i]);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  collected_scripts_.Clear();</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keywordtype">void</span> ScriptCache::Clear() {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// Iterate the script cache to get rid of all the weak handles.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">for</span> (HashMap::Entry* entry = Start(); entry != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>; entry = Next(entry)) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(entry != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>** location = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>**<span class="keyword">&gt;</span>(entry-&gt;value);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>((*location)-&gt;IsScript());</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#afb5ec6345fb5b248ab0eeb69db583666">GlobalHandles::ClearWeakness</a>(location);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a1e54f5d6683a8b2b00da16a2de85bba9">GlobalHandles::Destroy</a>(location);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// Clear the content of the hash map.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#aa71d36872f416feaa853788a7a7a7ef8">HashMap::Clear</a>();</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="keywordtype">void</span> ScriptCache::HandleWeakScript(</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../db/d0f/classv8_1_1_weak_callback_data.html">v8::WeakCallbackData&lt;v8::Value, void&gt;</a>&amp; data) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// Retrieve the script identifier.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  Handle&lt;Object&gt; <span class="keywordtype">object</span> = <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">Utils::OpenHandle</a>(*data.<a class="code" href="../../db/d0f/classv8_1_1_weak_callback_data.html#a2e977c2fd59334d35d3b4a01284dc12d">GetValue</a>());</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;Script&gt;::cast</a>(<span class="keywordtype">object</span>)-&gt;id()-&gt;value();</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordtype">void</span>* key = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(id);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  uint32_t hash = Hash(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// Remove the corresponding entry from the cache.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  ScriptCache* script_cache =</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keyword">reinterpret_cast&lt;</span>ScriptCache*<span class="keyword">&gt;</span>(data.<a class="code" href="../../db/d0f/classv8_1_1_weak_callback_data.html#a3e67778c2e942cd2b71358f9ec39cff0">GetParameter</a>());</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  HashMap::Entry* entry = script_cache-&gt;Lookup(key, hash, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>** location = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>**<span class="keyword">&gt;</span>(entry-&gt;value);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  script_cache-&gt;Remove(key, hash);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  script_cache-&gt;collected_scripts_.Add(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">// Clear the weak handle.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a1e54f5d6683a8b2b00da16a2de85bba9">GlobalHandles::Destroy</a>(location);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;}</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="keywordtype">void</span> Debug::SetUp(<span class="keywordtype">bool</span> create_heap_objects) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  ThreadInit();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">if</span> (create_heap_objects) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">// Get code to handle debug break on return.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    debug_break_return_ =</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        isolate_-&gt;builtins()-&gt;builtin(Builtins::kReturn_DebugBreak);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(debug_break_return_-&gt;IsCode());</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="comment">// Get code to handle debug break in debug break slots.</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    debug_break_slot_ =</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        isolate_-&gt;builtins()-&gt;builtin(Builtins::kSlot_DebugBreak);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(debug_break_slot_-&gt;IsCode());</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="keywordtype">void</span> Debug::HandleWeakDebugInfo(</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../db/d0f/classv8_1_1_weak_callback_data.html">v8::WeakCallbackData&lt;v8::Value, void&gt;</a>&amp; data) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  Debug* debug = <span class="keyword">reinterpret_cast&lt;</span>Isolate*<span class="keyword">&gt;</span>(data.<a class="code" href="../../db/d0f/classv8_1_1_weak_callback_data.html#a68b90fa1cb3304322810b10fb414f6b3">GetIsolate</a>())-&gt;debug();</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  DebugInfoListNode* node =</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keyword">reinterpret_cast&lt;</span>DebugInfoListNode*<span class="keyword">&gt;</span>(data.<a class="code" href="../../db/d0f/classv8_1_1_weak_callback_data.html#a3e67778c2e942cd2b71358f9ec39cff0">GetParameter</a>());</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// We need to clear all breakpoints associated with the function to restore</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// original code and avoid patching the code twice later because</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// the function will live in the heap until next gc, and can be found by</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">// Debug::FindSharedFunctionInfoInScript.</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  BreakLocationIterator it(node-&gt;debug_info(), ALL_BREAK_LOCATIONS);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  it.ClearAllDebugBreak();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  debug-&gt;RemoveDebugInfo(node-&gt;debug_info());</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordflow">for</span> (DebugInfoListNode* n = debug-&gt;debug_info_list_;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;       n != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;       n = n-&gt;next()) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(n != node);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;}</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;DebugInfoListNode::DebugInfoListNode(DebugInfo* debug_info): next_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// Globalize the request debug info object and make it weak.</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  GlobalHandles* global_handles = debug_info-&gt;GetIsolate()-&gt;global_handles();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  debug_info_ = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;DebugInfo&gt;::cast</a>(global_handles-&gt;Create(debug_info));</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a51953fb4d0f362ccb84ae168a4837c51">GlobalHandles::MakeWeak</a>(reinterpret_cast&lt;Object**&gt;(debug_info_.location()),</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                          <span class="keyword">this</span>,</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                          Debug::HandleWeakDebugInfo);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;DebugInfoListNode::~DebugInfoListNode() {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a1e54f5d6683a8b2b00da16a2de85bba9">GlobalHandles::Destroy</a>(reinterpret_cast&lt;Object**&gt;(debug_info_.location()));</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="keywordtype">bool</span> Debug::CompileDebuggerScript(Isolate* isolate, <span class="keywordtype">int</span> index) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  Factory* factory = isolate-&gt;factory();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  HandleScope scope(isolate);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="comment">// Bail out if the index is invalid.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordflow">if</span> (index == -1) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment">// Find source and name for the requested script.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  Handle&lt;String&gt; source_code =</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      isolate-&gt;bootstrapper()-&gt;NativesSourceLookup(index);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  Vector&lt;const char&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab1d901438c48d5937e2b75647ab50e49">name</a> = <a class="code" href="../../da/d85/classv8_1_1internal_1_1_natives_collection.html#a67768c09e485fa0d4152c05147388ef6">Natives::GetScriptName</a>(index);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  Handle&lt;String&gt; script_name = factory-&gt;NewStringFromAscii(name);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!script_name.is_null());</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  Handle&lt;Context&gt; context = isolate-&gt;native_context();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="comment">// Compile the script.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  Handle&lt;SharedFunctionInfo&gt; function_info;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  function_info = <a class="code" href="../../d6/dd3/classv8_1_1internal_1_1_compiler.html#aa0ce96716b7496a38e648cb50a7d9ba5">Compiler::CompileScript</a>(source_code,</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                                          script_name, 0, 0,</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                                          <span class="keyword">false</span>,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                          context,</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                                          <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5d5c472c11167548fa55bcf53c3aa40baf2cdb1cfe5504a05264f8ed27db54881">NO_CACHED_DATA</a>,</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                                          <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6ba4ba8514565188d56f2331955c8aeea5d5ced95526b550ad93164b3ad8d426a">NATIVES_CODE</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// Silently ignore stack overflows during compilation.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">if</span> (function_info.is_null()) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(isolate-&gt;has_pending_exception());</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    isolate-&gt;clear_pending_exception();</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// Execute the shared function in the debugger context.</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keywordtype">bool</span> caught_exception;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  Handle&lt;JSFunction&gt; <span class="keyword">function</span> =</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      factory-&gt;NewFunctionFromSharedFunctionInfo(function_info, context);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  Handle&lt;Object&gt; exception =</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="../../d0/d00/classv8_1_1internal_1_1_execution.html#a9fc44c1cb13aa88e94ba9a8b256eaa7e">Execution::TryCall</a>(<span class="keyword">function</span>,</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                         Handle&lt;Object&gt;(context-&gt;global_object(), isolate),</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                         0,</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>,</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                         &amp;caught_exception);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// Check for caught exceptions.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!isolate-&gt;has_pending_exception());</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    MessageLocation computed_location;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    isolate-&gt;ComputeLocation(&amp;computed_location);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    Handle&lt;Object&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1caa5af05ec5fc8823953bb5436e4bc7">message</a> = <a class="code" href="../../de/dab/classv8_1_1internal_1_1_message_handler.html#a036f2f2932b841c9501dd6a9a05f0417">MessageHandler::MakeMessageObject</a>(</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        isolate, <span class="stringliteral">&quot;error_loading_debugger&quot;</span>, &amp;computed_location,</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        Vector&lt;Handle&lt;Object&gt; &gt;::empty(), Handle&lt;JSArray&gt;());</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!isolate-&gt;has_pending_exception());</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">if</span> (!exception.is_null()) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      isolate-&gt;set_pending_exception(*exception);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <a class="code" href="../../de/dab/classv8_1_1internal_1_1_message_handler.html#a937cad706865a0947483835166860291">MessageHandler::ReportMessage</a>(isolate, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>, message);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      isolate-&gt;clear_pending_exception();</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  }</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// Mark this script as native and return successfully.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  Handle&lt;Script&gt; script(<a class="code" href="../../d9/da4/classv8_1_1internal_1_1_script.html#af5d25c39e7d38591e52ee53301bb283d">Script::cast</a>(function-&gt;shared()-&gt;script()));</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  script-&gt;set_type(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(<a class="code" href="../../d9/da4/classv8_1_1internal_1_1_script.html#a1d1cfd8ffb84e947f82999c682b666a7ae2b58007997722acc5fa90f1c48e7171">Script::TYPE_NATIVE</a>));</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;}</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">Debug::Load</a>() {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// Return if debugger is already loaded.</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordflow">if</span> (IsLoaded()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  Debugger* debugger = isolate_-&gt;debugger();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// Bail out if we&#39;re already in the process of compiling the native</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">// JavaScript source code for the debugger.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">if</span> (debugger-&gt;compiling_natives() ||</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      debugger-&gt;is_loading_debugger())</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  debugger-&gt;set_loading_debugger(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// Disable breakpoints and interrupts while compiling and running the</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">// debugger scripts including the context creation code.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  DisableBreak disable(isolate_, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  PostponeInterruptsScope postpone(isolate_);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Create the debugger context.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  ExtensionConfiguration no_extensions;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  Handle&lt;Context&gt; context =</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      isolate_-&gt;bootstrapper()-&gt;CreateEnvironment(</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;          Handle&lt;Object&gt;::null(),</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;          <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;ObjectTemplate&gt;</a>(),</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          &amp;no_extensions);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// Fail if no context could be created.</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (context.is_null()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// Use the debugger context.</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  SaveContext save(isolate_);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  isolate_-&gt;set_context(*context);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// Expose the builtins object in the debugger context.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  Handle&lt;String&gt; key = isolate_-&gt;factory()-&gt;InternalizeOneByteString(</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#aaf2b51ac357499a1739790fd94bf90ec">STATIC_ASCII_VECTOR</a>(<span class="stringliteral">&quot;builtins&quot;</span>));</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  Handle&lt;GlobalObject&gt; global = Handle&lt;GlobalObject&gt;(context-&gt;global_object());</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#ad123f50fdedfa8f5eb3a8065cdd3441a">RETURN_IF_EMPTY_HANDLE_VALUE</a>(</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      isolate_,</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <a class="code" href="../../d8/dac/classv8_1_1internal_1_1_j_s_receiver.html#a47199ec996dbab0b6e7ec937ffba0611">JSReceiver::SetProperty</a>(global,</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                              key,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                              Handle&lt;Object&gt;(global-&gt;builtins(), isolate_),</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                              <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                              <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a66e9a5671f740245739cc6873ea1b445a01409a6eaf026ee7100680ac60d9a513">SLOPPY</a>),</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <span class="keyword">false</span>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// Compile the JavaScript for the debugger in the debugger context.</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  debugger-&gt;set_compiling_natives(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordtype">bool</span> caught_exception =</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      !CompileDebuggerScript(isolate_, <a class="code" href="../../da/d85/classv8_1_1internal_1_1_natives_collection.html#ac0c1aecbfc8846c8b77b9495284a40e0">Natives::GetIndex</a>(<span class="stringliteral">&quot;mirror&quot;</span>)) ||</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      !CompileDebuggerScript(isolate_, <a class="code" href="../../da/d85/classv8_1_1internal_1_1_natives_collection.html#ac0c1aecbfc8846c8b77b9495284a40e0">Natives::GetIndex</a>(<span class="stringliteral">&quot;debug&quot;</span>));</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordflow">if</span> (FLAG_enable_liveedit) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    caught_exception = caught_exception ||</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        !CompileDebuggerScript(isolate_, <a class="code" href="../../da/d85/classv8_1_1internal_1_1_natives_collection.html#ac0c1aecbfc8846c8b77b9495284a40e0">Natives::GetIndex</a>(<span class="stringliteral">&quot;liveedit&quot;</span>));</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  debugger-&gt;set_compiling_natives(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">// Make sure we mark the debugger as not loading before we might</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// return.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  debugger-&gt;set_loading_debugger(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// Check for caught exceptions.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordflow">if</span> (caught_exception) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">// Debugger loaded, create debugger context global handle.</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  debug_context_ = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;Context&gt;::cast</a>(</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      isolate_-&gt;global_handles()-&gt;Create(*context));</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;}</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="keywordtype">void</span> Debug::Unload() {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// Return debugger is not loaded.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (!IsLoaded()) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">// Clear the script cache.</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  DestroyScriptCache();</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// Clear debugger context global handle.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a1e54f5d6683a8b2b00da16a2de85bba9">GlobalHandles::Destroy</a>(reinterpret_cast&lt;Object**&gt;(debug_context_.location()));</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  debug_context_ = Handle&lt;Context&gt;();</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;}</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">// Set the flag indicating that preemption happened during debugging.</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="keywordtype">void</span> Debug::PreemptionWhileInDebugger() {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(InDebugger());</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  Debug::set_interrupts_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3ad8649a813fc31c90dc7a62d1d568e617">PREEMPT</a>);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;}</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="keywordtype">void</span> Debug::Iterate(ObjectVisitor* v) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  v-&gt;VisitPointer(BitCast&lt;Object**&gt;(&amp;(debug_break_return_)));</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  v-&gt;VisitPointer(BitCast&lt;Object**&gt;(&amp;(debug_break_slot_)));</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba54957cf47b2c20cda66ae848d2b3aacb">Debug::Break</a>(Arguments args) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  Heap* heap = isolate_-&gt;heap();</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(args.length() == 0);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  thread_local_.frame_drop_mode_ = FRAMES_UNTOUCHED;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// Get the top-most JavaScript frame.</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  JavaScriptFrameIterator it(isolate_);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  JavaScriptFrame* frame = it.frame();</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">// Just continue if breaks are disabled or debugger cannot be loaded.</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">if</span> (disable_break() || !<a class="code" href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">Load</a>()) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    SetAfterBreakTarget(frame);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">return</span> heap-&gt;undefined_value();</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// Enter the debugger.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  EnterDebugger debugger(isolate_);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keywordflow">if</span> (debugger.FailedToEnter()) {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">return</span> heap-&gt;undefined_value();</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="comment">// Postpone interrupt during breakpoint processing.</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  PostponeInterruptsScope postpone(isolate_);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="comment">// Get the debug info (create it if it does not exist).</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  Handle&lt;SharedFunctionInfo&gt; shared =</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      Handle&lt;SharedFunctionInfo&gt;(frame-&gt;function()-&gt;shared());</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  Handle&lt;DebugInfo&gt; debug_info = GetDebugInfo(shared);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// Find the break point where execution has stopped.</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  BreakLocationIterator break_location_iterator(debug_info,</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                                                ALL_BREAK_LOCATIONS);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// pc points to the instruction after the current one, possibly a break</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">// location as well. So the &quot;- 1&quot; to exclude it from the search.</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  break_location_iterator.FindBreakLocationFromAddress(frame-&gt;pc() - 1);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// Check whether step next reached a new statement.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">if</span> (!StepNextContinue(&amp;break_location_iterator, frame)) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="comment">// Decrease steps left if performing multiple steps.</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordflow">if</span> (thread_local_.step_count_ &gt; 0) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      thread_local_.step_count_--;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="comment">// If there is one or more real break points check whether any of these are</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// triggered.</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  Handle&lt;Object&gt; break_points_hit(heap-&gt;undefined_value(), isolate_);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">if</span> (break_location_iterator.HasBreakPoint()) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    Handle&lt;Object&gt; break_point_objects =</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        Handle&lt;Object&gt;(break_location_iterator.BreakPointObjects(), isolate_);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    break_points_hit = CheckBreakPoints(break_point_objects);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="comment">// If step out is active skip everything until the frame where we need to step</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">// out to is reached, unless real breakpoint is hit.</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordflow">if</span> (StepOutActive() &amp;&amp; frame-&gt;fp() != step_out_fp() &amp;&amp;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      break_points_hit-&gt;IsUndefined() ) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="comment">// Step count should always be 0 for StepOut.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(thread_local_.step_count_ == 0);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!break_points_hit-&gt;IsUndefined() ||</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;             (thread_local_.last_step_action_ != StepNone &amp;&amp;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;              thread_local_.step_count_ == 0)) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">// Notify debugger if a real break point is triggered or if performing</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="comment">// single stepping with no more steps to perform. Otherwise do another step.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="comment">// Clear all current stepping setup.</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    ClearStepping();</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">if</span> (thread_local_.queued_step_count_ &gt; 0) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="comment">// Perform queued steps</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="keywordtype">int</span> step_count = thread_local_.queued_step_count_;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="comment">// Clear queue</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      thread_local_.queued_step_count_ = 0;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      PrepareStep(StepNext, step_count, StackFrame::NO_ID);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="comment">// Notify the debug event listeners.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      isolate_-&gt;debugger()-&gt;OnDebugBreak(break_points_hit, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (thread_local_.last_step_action_ != StepNone) {</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="comment">// Hold on to last step action as it is cleared by the call to</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="comment">// ClearStepping.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    StepAction step_action = thread_local_.last_step_action_;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordtype">int</span> step_count = thread_local_.step_count_;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="comment">// If StepNext goes deeper in code, StepOut until original frame</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="comment">// and keep step count queued up in the meantime.</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (step_action == StepNext &amp;&amp; frame-&gt;fp() &lt; thread_local_.last_fp_) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="comment">// Count frames until target frame</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      JavaScriptFrameIterator it(isolate_);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">while</span> (!it.done() &amp;&amp; it.frame()-&gt;fp() &lt; thread_local_.last_fp_) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        count++;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        it.Advance();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="comment">// Check that we indeed found the frame we are looking for.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!it.done() &amp;&amp; (it.frame()-&gt;fp() == thread_local_.last_fp_));</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">if</span> (step_count &gt; 1) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="comment">// Save old count and action to continue stepping after StepOut.</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        thread_local_.queued_step_count_ = step_count - 1;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="comment">// Set up for StepOut to reach target frame.</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      step_action = StepOut;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      step_count = count;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="comment">// Clear all current stepping setup.</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    ClearStepping();</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="comment">// Set up for the remaining steps.</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    PrepareStep(step_action, step_count, StackFrame::NO_ID);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">if</span> (thread_local_.frame_drop_mode_ == FRAMES_UNTOUCHED) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    SetAfterBreakTarget(frame);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (thread_local_.frame_drop_mode_ ==</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      FRAME_DROPPED_IN_IC_CALL) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// We must have been calling IC stub. Do not go there anymore.</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    Code* plain_return = isolate_-&gt;builtins()-&gt;builtin(</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        Builtins::kPlainReturn_LiveEdit);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    thread_local_.after_break_target_ = plain_return-&gt;entry();</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (thread_local_.frame_drop_mode_ ==</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      FRAME_DROPPED_IN_DEBUG_SLOT_CALL) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="comment">// Debug break slot stub does not return normally, instead it manually</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="comment">// cleans the stack and jumps. We should patch the jump address.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    Code* plain_return = isolate_-&gt;builtins()-&gt;builtin(</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        Builtins::kFrameDropper_LiveEdit);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    thread_local_.after_break_target_ = plain_return-&gt;entry();</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (thread_local_.frame_drop_mode_ ==</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      FRAME_DROPPED_IN_DIRECT_CALL) {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">// Nothing to do, after_break_target is not used here.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (thread_local_.frame_drop_mode_ ==</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      FRAME_DROPPED_IN_RETURN_CALL) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    Code* plain_return = isolate_-&gt;builtins()-&gt;builtin(</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        Builtins::kFrameDropper_LiveEdit);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    thread_local_.after_break_target_ = plain_return-&gt;entry();</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">return</span> heap-&gt;undefined_value();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;}</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af14562a565b0f6fce9a146afe6dc0130a805f8ef70991af2fd1a03fc054e80e50">RUNTIME_FUNCTION</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>*, Debug_Break) {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordflow">return</span> isolate-&gt;debug()-&gt;Break(args);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;}</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">// Check the break point objects for whether one or more are actually</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">// triggered. This function returns a JSArray with the break point objects</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">// which is triggered.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;Handle&lt;Object&gt; Debug::CheckBreakPoints(Handle&lt;Object&gt; break_point_objects) {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  Factory* factory = isolate_-&gt;factory();</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// Count the number of break points hit. If there are multiple break points</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// they are in a FixedArray.</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  Handle&lt;FixedArray&gt; break_points_hit;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keywordtype">int</span> break_points_hit_count = 0;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!break_point_objects-&gt;IsUndefined());</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span> (break_point_objects-&gt;IsFixedArray()) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    Handle&lt;FixedArray&gt; array(<a class="code" href="../../dc/d95/classv8_1_1internal_1_1_fixed_array.html#ab72b1bdfe3d9d45e6b5a01348e6691eb">FixedArray::cast</a>(*break_point_objects));</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    break_points_hit = factory-&gt;NewFixedArray(array-&gt;length());</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; array-&gt;length(); i++) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      Handle&lt;Object&gt; o(array-&gt;get(i), isolate_);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordflow">if</span> (CheckBreakPoint(o)) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        break_points_hit-&gt;set(break_points_hit_count++, *o);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    break_points_hit = factory-&gt;NewFixedArray(1);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">if</span> (CheckBreakPoint(break_point_objects)) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      break_points_hit-&gt;set(break_points_hit_count++, *break_point_objects);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">// Return undefined if no break points were triggered.</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="keywordflow">if</span> (break_points_hit_count == 0) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">return</span> factory-&gt;undefined_value();</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">// Return break points hit as a JSArray.</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  Handle&lt;JSArray&gt; result = factory-&gt;NewJSArrayWithElements(break_points_hit);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  result-&gt;set_length(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(break_points_hit_count));</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;}</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">// Check whether a single break point object is triggered.</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="keywordtype">bool</span> Debug::CheckBreakPoint(Handle&lt;Object&gt; break_point_object) {</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  Factory* factory = isolate_-&gt;factory();</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="comment">// Ignore check if break point object is not a JSObject.</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">if</span> (!break_point_object-&gt;IsJSObject()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">// Get the function IsBreakPointTriggered (defined in debug-debugger.js).</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  Handle&lt;String&gt; is_break_point_triggered_string =</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      factory-&gt;InternalizeOneByteString(</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;          <a class="code" href="../../d5/d60/utils_8h.html#aaf2b51ac357499a1739790fd94bf90ec">STATIC_ASCII_VECTOR</a>(<span class="stringliteral">&quot;IsBreakPointTriggered&quot;</span>));</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  Handle&lt;JSFunction&gt; check_break_point =</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    Handle&lt;JSFunction&gt;(<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        debug_context()-&gt;global_object()-&gt;GetPropertyNoExceptionThrown(</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            *is_break_point_triggered_string)));</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="comment">// Get the break id as an object.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  Handle&lt;Object&gt; break_id = factory-&gt;NewNumberFromInt(Debug::break_id());</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// Call HandleBreakPointx.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordtype">bool</span> caught_exception;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  Handle&lt;Object&gt; argv[] = { break_id, break_point_object };</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  Handle&lt;Object&gt; result = <a class="code" href="../../d0/d00/classv8_1_1internal_1_1_execution.html#a9fc44c1cb13aa88e94ba9a8b256eaa7e">Execution::TryCall</a>(check_break_point,</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                                             isolate_-&gt;js_builtins_object(),</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                                             <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                                             argv,</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                                             &amp;caught_exception);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="comment">// If exception or non boolean result handle as not triggered</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">if</span> (caught_exception || !result-&gt;IsBoolean()) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="comment">// Return whether the break point is triggered.</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!result.is_null());</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">return</span> (*result)-&gt;IsTrue();</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">// Check whether the function has debug information.</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="keywordtype">bool</span> Debug::HasDebugInfo(Handle&lt;SharedFunctionInfo&gt; shared) {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">return</span> !shared-&gt;debug_info()-&gt;IsUndefined();</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;}</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">// Return the debug info for this function. EnsureDebugInfo must be called</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">// prior to ensure the debug info has been generated for shared.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;Handle&lt;DebugInfo&gt; Debug::GetDebugInfo(Handle&lt;SharedFunctionInfo&gt; shared) {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(HasDebugInfo(shared));</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordflow">return</span> Handle&lt;DebugInfo&gt;(DebugInfo::cast(shared-&gt;debug_info()));</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;}</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="keywordtype">void</span> Debug::SetBreakPoint(Handle&lt;JSFunction&gt; <span class="keyword">function</span>,</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                          Handle&lt;Object&gt; break_point_object,</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                          <span class="keywordtype">int</span>* source_position) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  PrepareForBreakPoints();</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="comment">// Make sure the function is compiled and has set up the debug info.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  Handle&lt;SharedFunctionInfo&gt; shared(function-&gt;shared());</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">if</span> (!EnsureDebugInfo(shared, <span class="keyword">function</span>)) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// Return if retrieving debug info failed.</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  Handle&lt;DebugInfo&gt; debug_info = GetDebugInfo(shared);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="comment">// Source positions starts with zero.</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(*source_position &gt;= 0);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// Find the break point and change it.</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  BreakLocationIterator it(debug_info, SOURCE_BREAK_LOCATIONS);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  it.FindBreakLocationFromPosition(*source_position, STATEMENT_ALIGNED);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  it.SetBreakPoint(break_point_object);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  *source_position = it.position();</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="comment">// At least one active break point now.</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(debug_info-&gt;GetBreakPointCount() &gt; 0);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;}</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="keywordtype">bool</span> Debug::SetBreakPointForScript(Handle&lt;Script&gt; script,</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                                   Handle&lt;Object&gt; break_point_object,</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                                   <span class="keywordtype">int</span>* source_position,</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                                   BreakPositionAlignment alignment) {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  PrepareForBreakPoints();</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">// Obtain shared function info for the function.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* result = FindSharedFunctionInfoInScript(script, *source_position);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordflow">if</span> (result-&gt;IsUndefined()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="comment">// Make sure the function has set up the debug info.</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  Handle&lt;SharedFunctionInfo&gt; shared(<a class="code" href="../../db/dc5/classv8_1_1internal_1_1_shared_function_info.html#acf9b9f7e9418e47ef67bb1e9aacb3bb7">SharedFunctionInfo::cast</a>(result));</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">if</span> (!EnsureDebugInfo(shared, Handle&lt;JSFunction&gt;::null())) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">// Return if retrieving debug info failed.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">// Find position within function. The script position might be before the</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">// source position of the first function.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keywordtype">int</span> position;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">if</span> (shared-&gt;start_position() &gt; *source_position) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    position = 0;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    position = *source_position - shared-&gt;start_position();</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  Handle&lt;DebugInfo&gt; debug_info = GetDebugInfo(shared);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// Source positions starts with zero.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(position &gt;= 0);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="comment">// Find the break point and change it.</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  BreakLocationIterator it(debug_info, SOURCE_BREAK_LOCATIONS);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  it.FindBreakLocationFromPosition(position, alignment);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  it.SetBreakPoint(break_point_object);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  *source_position = it.position() + shared-&gt;start_position();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// At least one active break point now.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(debug_info-&gt;GetBreakPointCount() &gt; 0);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;}</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="keywordtype">void</span> Debug::ClearBreakPoint(Handle&lt;Object&gt; break_point_object) {</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  DebugInfoListNode* node = debug_info_list_;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">while</span> (node != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* result = DebugInfo::FindBreakPointInfo(node-&gt;debug_info(),</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                                                   break_point_object);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (!result-&gt;IsUndefined()) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="comment">// Get information in the break point.</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      BreakPointInfo* break_point_info = BreakPointInfo::cast(result);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      Handle&lt;DebugInfo&gt; debug_info = node-&gt;debug_info();</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="comment">// Find the break point and clear it.</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      BreakLocationIterator it(debug_info, SOURCE_BREAK_LOCATIONS);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      it.FindBreakLocationFromAddress(debug_info-&gt;code()-&gt;entry() +</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;          break_point_info-&gt;code_position()-&gt;value());</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      it.ClearBreakPoint(break_point_object);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="comment">// If there are no more break points left remove the debug info for this</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="comment">// function.</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">if</span> (debug_info-&gt;GetBreakPointCount() == 0) {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        RemoveDebugInfo(debug_info);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    node = node-&gt;next();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="keywordtype">void</span> Debug::ClearAllBreakPoints() {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  DebugInfoListNode* node = debug_info_list_;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordflow">while</span> (node != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="comment">// Remove all debug break code.</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    BreakLocationIterator it(node-&gt;debug_info(), ALL_BREAK_LOCATIONS);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    it.ClearAllDebugBreak();</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    node = node-&gt;next();</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="comment">// Remove all debug info.</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordflow">while</span> (debug_info_list_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    RemoveDebugInfo(debug_info_list_-&gt;debug_info());</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  }</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;}</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="keywordtype">void</span> Debug::FloodWithOneShot(Handle&lt;JSFunction&gt; <span class="keyword">function</span>) {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  PrepareForBreakPoints();</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="comment">// Make sure the function is compiled and has set up the debug info.</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  Handle&lt;SharedFunctionInfo&gt; shared(function-&gt;shared());</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keywordflow">if</span> (!EnsureDebugInfo(shared, <span class="keyword">function</span>)) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="comment">// Return if we failed to retrieve the debug info.</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="comment">// Flood the function with break points.</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  BreakLocationIterator it(GetDebugInfo(shared), ALL_BREAK_LOCATIONS);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="keywordflow">while</span> (!it.Done()) {</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    it.SetOneShot();</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    it.Next();</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;}</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="keywordtype">void</span> Debug::FloodBoundFunctionWithOneShot(Handle&lt;JSFunction&gt; <span class="keyword">function</span>) {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  Handle&lt;FixedArray&gt; new_bindings(function-&gt;function_bindings());</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  Handle&lt;Object&gt; bindee(new_bindings-&gt;get(<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#a9b94771c436c443f8e6c40d35396df87">JSFunction::kBoundFunctionIndex</a>),</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                        isolate_);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="keywordflow">if</span> (!bindee.is_null() &amp;&amp; bindee-&gt;IsJSFunction() &amp;&amp;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      !<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(*bindee)-&gt;<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aca81040a8eaee62d248401c210d2058f">IsBuiltin</a>()) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    Handle&lt;JSFunction&gt; bindee_function(<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(*bindee));</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    Debug::FloodWithOneShot(bindee_function);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;}</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="keywordtype">void</span> Debug::FloodHandlerWithOneShot() {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="comment">// Iterate through the JavaScript stack looking for handlers.</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  StackFrame::Id <span class="keywordtype">id</span> = break_frame_id();</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == StackFrame::NO_ID) {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="comment">// If there is no JavaScript stack don&#39;t do anything.</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  }</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="keywordflow">for</span> (JavaScriptFrameIterator it(isolate_, <span class="keywordtype">id</span>); !it.done(); it.Advance()) {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    JavaScriptFrame* frame = it.frame();</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">if</span> (frame-&gt;HasHandler()) {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <span class="comment">// Flood the function with the catch block with break points</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      FloodWithOneShot(Handle&lt;JSFunction&gt;(frame-&gt;function()));</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="keywordtype">void</span> Debug::ChangeBreakOnException(ExceptionBreakType type, <span class="keywordtype">bool</span> enable) {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="keywordflow">if</span> (type == BreakUncaughtException) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    break_on_uncaught_exception_ = enable;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    break_on_exception_ = enable;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;}</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="keywordtype">bool</span> Debug::IsBreakOnException(ExceptionBreakType type) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordflow">if</span> (type == BreakUncaughtException) {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordflow">return</span> break_on_uncaught_exception_;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordflow">return</span> break_on_exception_;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;}</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="keywordtype">void</span> Debug::PrepareStep(StepAction step_action,</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                        <span class="keywordtype">int</span> step_count,</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                        StackFrame::Id frame_id) {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  PrepareForBreakPoints();</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(Debug::InDebugger());</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="comment">// Remember this step action and count.</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  thread_local_.last_step_action_ = step_action;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keywordflow">if</span> (step_action == StepOut) {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="comment">// For step out target frame will be found on the stack so there is no need</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="comment">// to set step counter for it. It&#39;s expected to always be 0 for StepOut.</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    thread_local_.step_count_ = 0;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    thread_local_.step_count_ = step_count;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="comment">// Get the frame where the execution has stopped and skip the debug frame if</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// any. The debug frame will only be present if execution was stopped due to</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// hitting a break point. In other situations (e.g. unhandled exception) the</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// debug frame is not present.</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  StackFrame::Id <span class="keywordtype">id</span> = break_frame_id();</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == StackFrame::NO_ID) {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="comment">// If there is no JavaScript stack don&#39;t do anything.</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  }</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="keywordflow">if</span> (frame_id != StackFrame::NO_ID) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordtype">id</span> = frame_id;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  JavaScriptFrameIterator frames_it(isolate_, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  JavaScriptFrame* frame = frames_it.frame();</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="comment">// First of all ensure there is one-shot break points in the top handler</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="comment">// if any.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  FloodHandlerWithOneShot();</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="comment">// If the function on the top frame is unresolved perform step out. This will</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="comment">// be the case when calling unknown functions and having the debugger stopped</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="comment">// in an unhandled exception.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="keywordflow">if</span> (!frame-&gt;function()-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="comment">// Step out: Find the calling JavaScript frame and flood it with</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="comment">// breakpoints.</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    frames_it.Advance();</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">// Fill the function to return to with one-shot break points.</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    JSFunction* <span class="keyword">function</span> = frames_it.frame()-&gt;function();</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    FloodWithOneShot(Handle&lt;JSFunction&gt;(<span class="keyword">function</span>));</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// Get the debug info (create it if it does not exist).</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  Handle&lt;JSFunction&gt; <span class="keyword">function</span>(frame-&gt;function());</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  Handle&lt;SharedFunctionInfo&gt; shared(function-&gt;shared());</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="keywordflow">if</span> (!EnsureDebugInfo(shared, <span class="keyword">function</span>)) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">// Return if ensuring debug info failed.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  }</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  Handle&lt;DebugInfo&gt; debug_info = GetDebugInfo(shared);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">// Find the break location where execution has stopped.</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  BreakLocationIterator it(debug_info, ALL_BREAK_LOCATIONS);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// pc points to the instruction after the current one, possibly a break</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">// location as well. So the &quot;- 1&quot; to exclude it from the search.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  it.FindBreakLocationFromAddress(frame-&gt;pc() - 1);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">// Compute whether or not the target is a call target.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="keywordtype">bool</span> is_load_or_store = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="keywordtype">bool</span> is_inline_cache_stub = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordtype">bool</span> is_at_restarted_function = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  Handle&lt;Code&gt; call_function_stub;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">if</span> (thread_local_.restarter_frame_function_pointer_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">if</span> (RelocInfo::IsCodeTarget(it.rinfo()-&gt;rmode())) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <span class="keywordtype">bool</span> is_call_target = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> target = it.rinfo()-&gt;target_address();</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      Code* code = <a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">Code::GetCodeFromTargetAddress</a>(target);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <span class="keywordflow">if</span> (code-&gt;is_inline_cache_stub()) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        is_inline_cache_stub = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        is_load_or_store = !is_call_target;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="comment">// Check if target code is CallFunction stub.</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      Code* maybe_call_function_stub = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab91e71e972251cbfe502d5f3856e5762">code</a>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <span class="comment">// If there is a breakpoint at this line look at the original code to</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="comment">// check if it is a CallFunction stub.</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="keywordflow">if</span> (it.IsDebugBreak()) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> original_target = it.original_rinfo()-&gt;target_address();</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        maybe_call_function_stub =</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            <a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">Code::GetCodeFromTargetAddress</a>(original_target);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">if</span> (maybe_call_function_stub-&gt;kind() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260">Code::STUB</a> &amp;&amp;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;          maybe_call_function_stub-&gt;major_key() == CodeStub::CallFunction) {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="comment">// Save reference to the code as we may need it to find out arguments</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="comment">// count for &#39;step in&#39; later.</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        call_function_stub = Handle&lt;Code&gt;(maybe_call_function_stub);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    }</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    is_at_restarted_function = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="comment">// If this is the last break code target step out is the only possibility.</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keywordflow">if</span> (it.IsExit() || step_action == StepOut) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">if</span> (step_action == StepOut) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      <span class="comment">// Skip step_count frames starting with the current one.</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="keywordflow">while</span> (step_count-- &gt; 0 &amp;&amp; !frames_it.done()) {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        frames_it.Advance();</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(it.IsExit());</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      frames_it.Advance();</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">// Skip builtin functions on the stack.</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">while</span> (!frames_it.done() &amp;&amp; frames_it.frame()-&gt;function()-&gt;IsBuiltin()) {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      frames_it.Advance();</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    }</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="comment">// Step out: If there is a JavaScript caller frame, we need to</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="comment">// flood it with breakpoints.</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">if</span> (!frames_it.done()) {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="comment">// Fill the function to return to with one-shot break points.</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      JSFunction* <span class="keyword">function</span> = frames_it.frame()-&gt;function();</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      FloodWithOneShot(Handle&lt;JSFunction&gt;(<span class="keyword">function</span>));</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="comment">// Set target frame pointer.</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      ActivateStepOut(frames_it.frame());</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    }</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(is_inline_cache_stub || RelocInfo::IsConstructCall(it.rmode()) ||</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;               !call_function_stub.is_null() || is_at_restarted_function)</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;             || step_action == StepNext || step_action == StepMin) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="comment">// Step next or step min.</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="comment">// Fill the current function with one-shot break points.</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    FloodWithOneShot(<span class="keyword">function</span>);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="comment">// Remember source position and frame to handle step next.</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    thread_local_.last_statement_position_ =</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        debug_info-&gt;code()-&gt;SourceStatementPosition(frame-&gt;pc());</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    thread_local_.last_fp_ = frame-&gt;UnpaddedFP();</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// If there&#39;s restarter frame on top of the stack, just get the pointer</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="comment">// to function which is going to be restarted.</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">if</span> (is_at_restarted_function) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      Handle&lt;JSFunction&gt; restarted_function(</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;          <a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(*thread_local_.restarter_frame_function_pointer_));</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      FloodWithOneShot(restarted_function);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!call_function_stub.is_null()) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <span class="comment">// If it&#39;s CallFunction stub ensure target function is compiled and flood</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <span class="comment">// it with one shot breakpoints.</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <span class="comment">// Find out number of arguments from the stub minor key.</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="comment">// Reverse lookup required as the minor key cannot be retrieved</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="comment">// from the code object.</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      Handle&lt;Object&gt; <a class="code" href="../../d4/d7d/heap-snapshot-generator_8cc.html#aab49963775d0eef29ecab5e60bdd31e6">obj</a>(</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;          isolate_-&gt;heap()-&gt;code_stubs()-&gt;SlowReverseLookup(</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;              *call_function_stub),</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;          isolate_);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="../../d4/d7d/heap-snapshot-generator_8cc.html#aab49963775d0eef29ecab5e60bdd31e6">obj</a>.is_null());</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!(*obj)-&gt;IsUndefined());</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d7d/heap-snapshot-generator_8cc.html#aab49963775d0eef29ecab5e60bdd31e6">obj</a>-&gt;IsSmi());</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="comment">// Get the STUB key and extract major and minor key.</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      uint32_t key = <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">Smi::cast</a>(*obj)-&gt;<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a7ecb839199ee379f9371723072e4148a">value</a>();</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="comment">// Argc in the stub is the number of arguments passed - not the</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      <span class="comment">// expected arguments of the called function.</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <span class="keywordtype">int</span> call_function_arg_count =</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;          <a class="code" href="../../d7/dc9/classv8_1_1internal_1_1_call_function_stub.html#aff2843de2dd831661966e72150d63b6d">CallFunctionStub::ExtractArgcFromMinorKey</a>(</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;              CodeStub::MinorKeyFromKey(key));</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(call_function_stub-&gt;major_key() ==</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;             CodeStub::MajorKeyFromKey(key));</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      <span class="comment">// Find target function on the expression stack.</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="comment">// Expression stack looks like this (top to bottom):</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <span class="comment">// argN</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <span class="comment">// ...</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="comment">// arg0</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <span class="comment">// Receiver</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="comment">// Function to call</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="keywordtype">int</span> expressions_count = frame-&gt;ComputeExpressionsCount();</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(expressions_count - 2 - call_function_arg_count &gt;= 0);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* fun = frame-&gt;GetExpression(</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;          expressions_count - 2 - call_function_arg_count);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="comment">// Flood the actual target of call/apply.</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <span class="keywordflow">if</span> (fun-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        Isolate* isolate = <a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(fun)-&gt;<a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a40e056f11454ab7441ad5de3b82b9cf1">GetIsolate</a>();</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        Code* apply = isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a3d230319268e1c88dc3e54cbddccf643">builtins</a>()-&gt;<a class="code" href="../../d5/d99/classv8_1_1internal_1_1_builtins.html#a1b98e6d8039a53752fe6258a1d4b63f1">builtin</a>(Builtins::kFunctionApply);</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        Code* call = isolate-&gt;builtins()-&gt;builtin(Builtins::kFunctionCall);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordflow">while</span> (fun-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;          Code* code = <a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(fun)-&gt;shared()-&gt;<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#a1ae1a9fa4ee841461cf34fe5e8dbeb7e">code</a>();</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;          <span class="keywordflow">if</span> (code != apply &amp;&amp; code != call) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;          fun = frame-&gt;GetExpression(</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;              expressions_count - 1 - call_function_arg_count);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      <span class="keywordflow">if</span> (fun-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        Handle&lt;JSFunction&gt; js_function(<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(fun));</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keywordflow">if</span> (js_function-&gt;shared()-&gt;bound()) {</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;          Debug::FloodBoundFunctionWithOneShot(js_function);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!js_function-&gt;IsBuiltin()) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;          <span class="comment">// Don&#39;t step into builtins.</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;          <span class="comment">// It will also compile target function if it&#39;s not compiled yet.</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;          FloodWithOneShot(js_function);</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="comment">// Fill the current function with one-shot break points even for step in on</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="comment">// a call target as the function called might be a native function for</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">// which step in will not stop. It also prepares for stepping in</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="comment">// getters/setters.</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    FloodWithOneShot(<span class="keyword">function</span>);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">if</span> (is_load_or_store) {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <span class="comment">// Remember source position and frame to handle step in getter/setter. If</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      <span class="comment">// there is a custom getter/setter it will be handled in</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="comment">// Object::Get/SetPropertyWithCallback, otherwise the step action will be</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="comment">// propagated on the next Debug::Break.</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      thread_local_.last_statement_position_ =</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;          debug_info-&gt;code()-&gt;SourceStatementPosition(frame-&gt;pc());</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      thread_local_.last_fp_ = frame-&gt;UnpaddedFP();</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    }</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="comment">// Step in or Step in min</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    it.PrepareStepIn(isolate_);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    ActivateStepIn(frame);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;}</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment">// Check whether the current debug break should be reported to the debugger. It</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment">// is used to have step next and step in only report break back to the debugger</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="comment">// if on a different frame or in a different statement. In some situations</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment">// there will be several break points in the same statement when the code is</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment">// flooded with one-shot break points. This function helps to perform several</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">// steps before reporting break back to the debugger.</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="keywordtype">bool</span> Debug::StepNextContinue(BreakLocationIterator* break_location_iterator,</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                             JavaScriptFrame* frame) {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="comment">// StepNext and StepOut shouldn&#39;t bring us deeper in code, so last frame</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="comment">// shouldn&#39;t be a parent of current frame.</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="keywordflow">if</span> (thread_local_.last_step_action_ == StepNext ||</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      thread_local_.last_step_action_ == StepOut) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordflow">if</span> (frame-&gt;fp() &lt; thread_local_.last_fp_) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">// If the step last action was step next or step in make sure that a new</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">// statement is hit.</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keywordflow">if</span> (thread_local_.last_step_action_ == StepNext ||</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      thread_local_.last_step_action_ == StepIn) {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">// Never continue if returning from function.</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (break_location_iterator-&gt;IsExit()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="comment">// Continue if we are still on the same frame and in the same statement.</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordtype">int</span> current_statement_position =</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        break_location_iterator-&gt;code()-&gt;SourceStatementPosition(frame-&gt;pc());</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">return</span> thread_local_.last_fp_ == frame-&gt;UnpaddedFP() &amp;&amp;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        thread_local_.last_statement_position_ == current_statement_position;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">// No step next action - don&#39;t continue.</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;}</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="comment">// Check whether the code object at the specified address is a debug break code</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment">// object.</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="keywordtype">bool</span> Debug::IsDebugBreak(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> addr) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  Code* code = <a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">Code::GetCodeFromTargetAddress</a>(addr);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="keywordflow">return</span> code-&gt;is_debug_stub() &amp;&amp; code-&gt;extra_ic_state() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a105546b82eb2e99e172dda630ee4fdc1a6c0c338932b450afc64a0224b4d47baa">DEBUG_BREAK</a>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;}</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment">// Check whether a code stub with the specified major key is a possible break</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="comment">// point location when looking for source break locations.</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="keywordtype">bool</span> Debug::IsSourceBreakStub(Code* code) {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  CodeStub::Major major_key = CodeStub::GetMajorKey(code);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keywordflow">return</span> major_key == CodeStub::CallFunction;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;}</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">// Check whether a code stub with the specified major key is a possible break</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">// location.</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="keywordtype">bool</span> Debug::IsBreakStub(Code* code) {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  CodeStub::Major major_key = CodeStub::GetMajorKey(code);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="keywordflow">return</span> major_key == CodeStub::CallFunction;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;}</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">// Find the builtin to use for invoking the debug break</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;Handle&lt;Code&gt; Debug::FindDebugBreak(Handle&lt;Code&gt; code, RelocInfo::Mode mode) {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  Isolate* isolate = code-&gt;GetIsolate();</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="comment">// Find the builtin debug break function matching the calling convention</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="comment">// used by the call site.</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keywordflow">if</span> (code-&gt;is_inline_cache_stub()) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordflow">switch</span> (code-&gt;kind()) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="keywordflow">case</span> Code::LOAD_IC:</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;LoadIC_DebugBreak();</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="keywordflow">case</span> Code::STORE_IC:</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;StoreIC_DebugBreak();</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="keywordflow">case</span> Code::KEYED_LOAD_IC:</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;KeyedLoadIC_DebugBreak();</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="keywordflow">case</span> Code::KEYED_STORE_IC:</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;KeyedStoreIC_DebugBreak();</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      <span class="keywordflow">case</span> Code::COMPARE_NIL_IC:</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;CompareNilIC_DebugBreak();</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    }</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  }</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="keywordflow">if</span> (RelocInfo::IsConstructCall(mode)) {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">if</span> (code-&gt;has_function_cache()) {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;CallConstructStub_Recording_DebugBreak();</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;CallConstructStub_DebugBreak();</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    }</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  }</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="keywordflow">if</span> (code-&gt;kind() == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260">Code::STUB</a>) {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(code-&gt;major_key() == CodeStub::CallFunction);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">if</span> (code-&gt;has_function_cache()) {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;CallFunctionStub_Recording_DebugBreak();</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <span class="keywordflow">return</span> isolate-&gt;builtins()-&gt;CallFunctionStub_DebugBreak();</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    }</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  }</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a5c1c5f8dcdfd3fe359a6af56e98ec280">Handle&lt;Code&gt;::null</a>();</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;}</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="comment">// Simple function for returning the source positions for active break points.</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;Handle&lt;Object&gt; Debug::GetSourceBreakLocations(</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    Handle&lt;SharedFunctionInfo&gt; shared,</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    BreakPositionAlignment position_alignment) {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  Isolate* isolate = shared-&gt;GetIsolate();</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  Heap* heap = isolate-&gt;heap();</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="keywordflow">if</span> (!HasDebugInfo(shared)) {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">return</span> Handle&lt;Object&gt;(heap-&gt;undefined_value(), isolate);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  }</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  Handle&lt;DebugInfo&gt; debug_info = GetDebugInfo(shared);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="keywordflow">if</span> (debug_info-&gt;GetBreakPointCount() == 0) {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">return</span> Handle&lt;Object&gt;(heap-&gt;undefined_value(), isolate);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  }</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  Handle&lt;FixedArray&gt; locations =</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      isolate-&gt;factory()-&gt;NewFixedArray(debug_info-&gt;GetBreakPointCount());</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; debug_info-&gt;break_points()-&gt;length(); i++) {</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordflow">if</span> (!debug_info-&gt;break_points()-&gt;get(i)-&gt;IsUndefined()) {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      BreakPointInfo* break_point_info =</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;          BreakPointInfo::cast(debug_info-&gt;break_points()-&gt;get(i));</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <span class="keywordflow">if</span> (break_point_info-&gt;GetBreakPointCount() &gt; 0) {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        Smi* position;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="keywordflow">switch</span> (position_alignment) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordflow">case</span> STATEMENT_ALIGNED:</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;          position = break_point_info-&gt;statement_position();</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="keywordflow">case</span> BREAK_POSITION_ALIGNED:</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;          position = break_point_info-&gt;source_position();</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;          position = break_point_info-&gt;statement_position();</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        locations-&gt;set(count++, position);</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  }</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="keywordflow">return</span> locations;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;}</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="keywordtype">void</span> Debug::NewBreak(StackFrame::Id break_frame_id) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  thread_local_.break_frame_id_ = break_frame_id;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  thread_local_.break_id_ = ++thread_local_.break_count_;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;}</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="keywordtype">void</span> Debug::SetBreak(StackFrame::Id break_frame_id, <span class="keywordtype">int</span> break_id) {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  thread_local_.break_frame_id_ = break_frame_id;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  thread_local_.break_id_ = break_id;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;}</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">// Handle stepping into a function.</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="keywordtype">void</span> Debug::HandleStepIn(Handle&lt;JSFunction&gt; <span class="keyword">function</span>,</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                         Handle&lt;Object&gt; holder,</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> fp,</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                         <span class="keywordtype">bool</span> is_constructor) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  Isolate* isolate = <span class="keyword">function</span>-&gt;GetIsolate();</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="comment">// If the frame pointer is not supplied by the caller find it.</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="keywordflow">if</span> (fp == 0) {</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    StackFrameIterator it(isolate);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    it.Advance();</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="comment">// For constructor functions skip another frame.</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordflow">if</span> (is_constructor) {</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(it.frame()-&gt;is_construct());</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      it.Advance();</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    fp = it.frame()-&gt;fp();</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  }</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">// Flood the function with one-shot break points if it is called from where</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="comment">// step into was requested.</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <span class="keywordflow">if</span> (fp == step_in_fp()) {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">if</span> (function-&gt;shared()-&gt;bound()) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      <span class="comment">// Handle Function.prototype.bind</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      Debug::FloodBoundFunctionWithOneShot(<span class="keyword">function</span>);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!function-&gt;IsBuiltin()) {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="comment">// Don&#39;t allow step into functions in the native context.</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">if</span> (function-&gt;shared()-&gt;code() ==</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;          isolate-&gt;builtins()-&gt;builtin(Builtins::kFunctionApply) ||</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;          <span class="keyword">function</span>-&gt;shared()-&gt;code() ==</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;          isolate-&gt;builtins()-&gt;builtin(Builtins::kFunctionCall)) {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        <span class="comment">// Handle function.apply and function.call separately to flood the</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <span class="comment">// function to be called and not the code for Builtins::FunctionApply or</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        <span class="comment">// Builtins::FunctionCall. The receiver of call/apply is the target</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="comment">// function.</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="keywordflow">if</span> (!holder.is_null() &amp;&amp; holder-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;          Handle&lt;JSFunction&gt; js_function = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;JSFunction&gt;::cast</a>(holder);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;          <span class="keywordflow">if</span> (!js_function-&gt;IsBuiltin()) {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            Debug::FloodWithOneShot(js_function);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (js_function-&gt;shared()-&gt;bound()) {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            <span class="comment">// Handle Function.prototype.bind</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            Debug::FloodBoundFunctionWithOneShot(js_function);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;          }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        Debug::FloodWithOneShot(<span class="keyword">function</span>);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      }</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    }</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  }</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;}</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="keywordtype">void</span> Debug::ClearStepping() {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="comment">// Clear the various stepping setup.</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  ClearOneShot();</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  ClearStepIn();</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  ClearStepOut();</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  ClearStepNext();</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="comment">// Clear multiple step counter.</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  thread_local_.step_count_ = 0;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;}</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">// Clears all the one-shot break points that are currently set. Normally this</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">// function is called each time a break point is hit as one shot break points</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment">// are used to support stepping.</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="keywordtype">void</span> Debug::ClearOneShot() {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// The current implementation just runs through all the breakpoints. When the</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="comment">// last break point for a function is removed that function is automatically</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="comment">// removed from the list.</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  DebugInfoListNode* node = debug_info_list_;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="keywordflow">while</span> (node != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    BreakLocationIterator it(node-&gt;debug_info(), ALL_BREAK_LOCATIONS);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordflow">while</span> (!it.Done()) {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      it.ClearOneShot();</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      it.Next();</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    }</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    node = node-&gt;next();</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  }</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;}</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="keywordtype">void</span> Debug::ActivateStepIn(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9f30ccf59233403783321902193ac283">StackFrame</a>* frame) {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!StepOutActive());</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  thread_local_.step_into_fp_ = frame-&gt;UnpaddedFP();</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;}</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="keywordtype">void</span> Debug::ClearStepIn() {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  thread_local_.step_into_fp_ = 0;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;}</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="keywordtype">void</span> Debug::ActivateStepOut(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9f30ccf59233403783321902193ac283">StackFrame</a>* frame) {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!StepInActive());</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  thread_local_.step_out_fp_ = frame-&gt;UnpaddedFP();</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;}</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="keywordtype">void</span> Debug::ClearStepOut() {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  thread_local_.step_out_fp_ = 0;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;}</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="keywordtype">void</span> Debug::ClearStepNext() {</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  thread_local_.last_step_action_ = StepNone;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  thread_local_.last_statement_position_ = RelocInfo::kNoPosition;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  thread_local_.last_fp_ = 0;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;}</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CollectActiveFunctionsFromThread(</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    Isolate* isolate,</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    ThreadLocalTop* top,</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    List&lt;Handle&lt;JSFunction&gt; &gt;* active_functions,</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* active_code_marker) {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="comment">// Find all non-optimized code functions with activation frames</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="comment">// on the stack. This includes functions which have optimized</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="comment">// activations (including inlined functions) on the stack as the</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="comment">// non-optimized code is needed for the lazy deoptimization.</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">for</span> (JavaScriptFrameIterator it(isolate, top); !it.done(); it.Advance()) {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    JavaScriptFrame* frame = it.frame();</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">if</span> (frame-&gt;is_optimized()) {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      List&lt;JSFunction*&gt; functions(FLAG_max_inlining_levels + 1);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      frame-&gt;GetFunctions(&amp;functions);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; functions.length(); i++) {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        JSFunction* <span class="keyword">function</span> = functions[i];</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        active_functions-&gt;Add(Handle&lt;JSFunction&gt;(<span class="keyword">function</span>));</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <span class="keyword">function</span>-&gt;shared()-&gt;code()-&gt;set_gc_metadata(active_code_marker);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame-&gt;function()-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      JSFunction* <span class="keyword">function</span> = frame-&gt;function();</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(frame-&gt;LookupCode()-&gt;kind() == Code::FUNCTION);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      active_functions-&gt;Add(Handle&lt;JSFunction&gt;(<span class="keyword">function</span>));</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="keyword">function</span>-&gt;shared()-&gt;code()-&gt;set_gc_metadata(active_code_marker);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;}</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RedirectActivationsToRecompiledCodeOnThread(</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    Isolate* isolate,</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    ThreadLocalTop* top) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="keywordflow">for</span> (JavaScriptFrameIterator it(isolate, top); !it.done(); it.Advance()) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    JavaScriptFrame* frame = it.frame();</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">if</span> (frame-&gt;is_optimized() || !frame-&gt;function()-&gt;IsJSFunction()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    JSFunction* <span class="keyword">function</span> = frame-&gt;function();</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(frame-&gt;LookupCode()-&gt;kind() == Code::FUNCTION);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    Handle&lt;Code&gt; frame_code(frame-&gt;LookupCode());</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="keywordflow">if</span> (frame_code-&gt;has_debug_break_slots()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    Handle&lt;Code&gt; new_code(function-&gt;shared()-&gt;code());</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <span class="keywordflow">if</span> (new_code-&gt;kind() != Code::FUNCTION ||</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        !new_code-&gt;has_debug_break_slots()) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    }</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="comment">// Iterate over the RelocInfo in the original code to compute the sum of the</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="comment">// constant pools and veneer pools sizes. (See Assembler::CheckConstPool()</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="comment">// and Assembler::CheckVeneerPool())</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="comment">// Note that this is only useful for architectures using constant pools or</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <span class="comment">// veneer pools.</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keywordtype">int</span> pool_mask = RelocInfo::ModeMask(RelocInfo::CONST_POOL) |</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                    RelocInfo::ModeMask(RelocInfo::VENEER_POOL);</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordtype">int</span> frame_pool_size = 0;</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="keywordflow">for</span> (RelocIterator it(*frame_code, pool_mask); !it.done(); it.next()) {</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      RelocInfo* <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4730147a5f2fa83bf450138f42b1df92">info</a> = it.rinfo();</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      <span class="keywordflow">if</span> (info-&gt;pc() &gt;= frame-&gt;pc()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      frame_pool_size += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(info-&gt;data());</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    intptr_t frame_offset =</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      frame-&gt;pc() - frame_code-&gt;instruction_start() - frame_pool_size;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="comment">// Iterate over the RelocInfo for new code to find the number of bytes</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="comment">// generated for debug slots and constant pools.</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordtype">int</span> debug_break_slot_bytes = 0;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordtype">int</span> new_code_pool_size = 0;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordtype">int</span> mask = RelocInfo::ModeMask(RelocInfo::DEBUG_BREAK_SLOT) |</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;               RelocInfo::ModeMask(RelocInfo::CONST_POOL) |</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;               RelocInfo::ModeMask(RelocInfo::VENEER_POOL);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">for</span> (RelocIterator it(*new_code, mask); !it.done(); it.next()) {</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      <span class="comment">// Check if the pc in the new code with debug break</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;      <span class="comment">// slots is before this slot.</span></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      RelocInfo* info = it.rinfo();</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      intptr_t new_offset = info-&gt;pc() - new_code-&gt;instruction_start() -</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                            new_code_pool_size - debug_break_slot_bytes;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="keywordflow">if</span> (new_offset &gt;= frame_offset) {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      }</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      <span class="keywordflow">if</span> (RelocInfo::IsDebugBreakSlot(info-&gt;rmode())) {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        debug_break_slot_bytes += <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#adac2452db6d072b53447bedda9a98a61">Assembler::kDebugBreakSlotLength</a>;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(RelocInfo::IsConstPool(info-&gt;rmode()));</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="comment">// The size of the pools is encoded in the data.</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        new_code_pool_size += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(info-&gt;data());</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      }</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    }</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="comment">// Compute the equivalent pc in the new code.</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab8ef12fab634c171394422d0ee8baf94">byte</a>* new_pc = new_code-&gt;instruction_start() + frame_offset +</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                   debug_break_slot_bytes + new_code_pool_size;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="keywordflow">if</span> (FLAG_trace_deopt) {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">PrintF</a>(<span class="stringliteral">&quot;Replacing code %08&quot;</span> <a class="code" href="../../d5/d87/globals_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot; - %08&quot;</span> <a class="code" href="../../d5/d87/globals_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot; (%d) &quot;</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;             <span class="stringliteral">&quot;with %08&quot;</span> <a class="code" href="../../d5/d87/globals_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot; - %08&quot;</span> <a class="code" href="../../d5/d87/globals_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot; (%d) &quot;</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;             <span class="stringliteral">&quot;for debugging, &quot;</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;             <span class="stringliteral">&quot;changing pc from %08&quot;</span> <a class="code" href="../../d5/d87/globals_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot; to %08&quot;</span> <a class="code" href="../../d5/d87/globals_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;             reinterpret_cast&lt;intptr_t&gt;(</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                 frame_code-&gt;instruction_start()),</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;             reinterpret_cast&lt;intptr_t&gt;(</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                 frame_code-&gt;instruction_start()) +</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;             frame_code-&gt;instruction_size(),</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;             frame_code-&gt;instruction_size(),</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;             <span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(new_code-&gt;instruction_start()),</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;             reinterpret_cast&lt;intptr_t&gt;(new_code-&gt;instruction_start()) +</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;             new_code-&gt;instruction_size(),</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;             new_code-&gt;instruction_size(),</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;             <span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(frame-&gt;pc()),</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;             reinterpret_cast&lt;intptr_t&gt;(new_pc));</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    }</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <span class="comment">// Patch the return address to return into the code with</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="comment">// debug break slots.</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    frame-&gt;set_pc(new_pc);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;}</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="keyword">class </span>ActiveFunctionsCollector : <span class="keyword">public</span> ThreadVisitor {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="keyword">explicit</span> ActiveFunctionsCollector(List&lt;Handle&lt;JSFunction&gt; &gt;* active_functions,</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* active_code_marker)</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      : active_functions_(active_functions),</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        active_code_marker_(active_code_marker) { }</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="keywordtype">void</span> VisitThread(Isolate* isolate, ThreadLocalTop* top) {</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    CollectActiveFunctionsFromThread(isolate,</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                                     top,</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                                     active_functions_,</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                                     active_code_marker_);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  }</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  List&lt;Handle&lt;JSFunction&gt; &gt;* active_functions_;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* active_code_marker_;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;};</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="keyword">class </span>ActiveFunctionsRedirector : <span class="keyword">public</span> ThreadVisitor {</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="keywordtype">void</span> VisitThread(Isolate* isolate, ThreadLocalTop* top) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    RedirectActivationsToRecompiledCodeOnThread(isolate, top);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;};</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="keywordtype">void</span> Debug::PrepareForBreakPoints() {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <span class="comment">// If preparing for the first break point make sure to deoptimize all</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="comment">// functions as debugging does not work with optimized code.</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <span class="keywordflow">if</span> (!has_break_points_) {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keywordflow">if</span> (isolate_-&gt;concurrent_recompilation_enabled()) {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      isolate_-&gt;optimizing_compiler_thread()-&gt;Flush();</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    }</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <a class="code" href="../../dd/d9d/classv8_1_1internal_1_1_deoptimizer.html#a2e296896cb1ea4b942f189be051e4541">Deoptimizer::DeoptimizeAll</a>(isolate_);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    Handle&lt;Code&gt; lazy_compile = isolate_-&gt;builtins()-&gt;CompileUnoptimized();</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <span class="comment">// There will be at least one break point when we are done.</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    has_break_points_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <span class="comment">// Keep the list of activated functions in a handlified list as it</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="comment">// is used both in GC and non-GC code.</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    List&lt;Handle&lt;JSFunction&gt; &gt; active_functions(100);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    {</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <span class="comment">// We are going to iterate heap to find all functions without</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;      <span class="comment">// debug break slots.</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      Heap* heap = isolate_-&gt;heap();</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      heap-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#afbaa9137eb86d66f958fcc41a77c2fea">Heap::kMakeHeapIterableMask</a>,</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                              <span class="stringliteral">&quot;preparing for breakpoints&quot;</span>);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <span class="comment">// Ensure no GC in this scope as we are going to use gc_metadata</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;      <span class="comment">// field in the Code object to mark active functions.</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a949499cf64adf66e57fb90ad2546be23">DisallowHeapAllocation</a> no_allocation;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* active_code_marker = heap-&gt;the_hole_value();</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      CollectActiveFunctionsFromThread(isolate_,</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                                       isolate_-&gt;thread_local_top(),</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                                       &amp;active_functions,</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                                       active_code_marker);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      ActiveFunctionsCollector active_functions_collector(&amp;active_functions,</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                                                          active_code_marker);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      isolate_-&gt;thread_manager()-&gt;IterateArchivedThreads(</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;          &amp;active_functions_collector);</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <span class="comment">// Scan the heap for all non-optimized functions which have no</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <span class="comment">// debug break slots and are not active or inlined into an active</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="comment">// function and mark them for lazy compilation.</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      HeapIterator iterator(heap);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      HeapObject* <a class="code" href="../../d4/d7d/heap-snapshot-generator_8cc.html#aab49963775d0eef29ecab5e60bdd31e6">obj</a> = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <span class="keywordflow">while</span> (((obj = iterator.next()) != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>)) {</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        <span class="keywordflow">if</span> (obj-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;          JSFunction* <span class="keyword">function</span> = <a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(obj);</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;          SharedFunctionInfo* shared = <span class="keyword">function</span>-&gt;shared();</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;          <span class="keywordflow">if</span> (!shared-&gt;allows_lazy_compilation()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;          <span class="keywordflow">if</span> (!shared-&gt;script()-&gt;IsScript()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;          <span class="keywordflow">if</span> (function-&gt;IsBuiltin()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;          <span class="keywordflow">if</span> (shared-&gt;code()-&gt;gc_metadata() == active_code_marker) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;          <a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#aa10c9e8951b8ccf714a59ec321bdac5b">Code::Kind</a> kind = <span class="keyword">function</span>-&gt;code()-&gt;kind();</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;          <span class="keywordflow">if</span> (kind == Code::FUNCTION &amp;&amp;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;              !function-&gt;code()-&gt;has_debug_break_slots()) {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            <span class="keyword">function</span>-&gt;set_code(*lazy_compile);</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;            <span class="keyword">function</span>-&gt;shared()-&gt;set_code(*lazy_compile);</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (kind == <a class="code" href="../../da/dcc/builtins_8cc.html#a8ddc47515f89d0e3691438a6244e6642">Code::BUILTIN</a> &amp;&amp;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;              (function-&gt;IsInOptimizationQueue() ||</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;               <span class="keyword">function</span>-&gt;IsMarkedForOptimization() ||</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;               <span class="keyword">function</span>-&gt;IsMarkedForConcurrentOptimization())) {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;            <span class="comment">// Abort in-flight compilation.</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;            Code* shared_code = <span class="keyword">function</span>-&gt;shared()-&gt;code();</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;            <span class="keywordflow">if</span> (shared_code-&gt;kind() == Code::FUNCTION &amp;&amp;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                shared_code-&gt;has_debug_break_slots()) {</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;              <span class="keyword">function</span>-&gt;set_code(shared_code);</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;              <span class="keyword">function</span>-&gt;set_code(*lazy_compile);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;              <span class="keyword">function</span>-&gt;shared()-&gt;set_code(*lazy_compile);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;          }</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        }</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      }</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <span class="comment">// Clear gc_metadata field.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; active_functions.length(); i++) {</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        Handle&lt;JSFunction&gt; <span class="keyword">function</span> = active_functions[i];</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keyword">function</span>-&gt;shared()-&gt;code()-&gt;set_gc_metadata(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(0));</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    }</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="comment">// Now recompile all functions with activation frames and and</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="comment">// patch the return address to run in the new compiled code.</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; active_functions.length(); i++) {</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      Handle&lt;JSFunction&gt; <span class="keyword">function</span> = active_functions[i];</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      Handle&lt;SharedFunctionInfo&gt; shared(function-&gt;shared());</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      <span class="keywordflow">if</span> (function-&gt;code()-&gt;kind() == Code::FUNCTION &amp;&amp;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;          <span class="keyword">function</span>-&gt;code()-&gt;has_debug_break_slots()) {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <span class="comment">// Nothing to do. Function code already had debug break slots.</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      }</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <span class="comment">// If recompilation is not possible just skip it.</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="keywordflow">if</span> (shared-&gt;is_toplevel() ||</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;          !shared-&gt;allows_lazy_compilation() ||</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;          shared-&gt;code()-&gt;kind() == <a class="code" href="../../da/dcc/builtins_8cc.html#a8ddc47515f89d0e3691438a6244e6642">Code::BUILTIN</a>) {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      }</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="comment">// Make sure that the shared full code is compiled with debug</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      <span class="comment">// break slots.</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <span class="keywordflow">if</span> (!shared-&gt;code()-&gt;has_debug_break_slots()) {</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        <span class="comment">// Try to compile the full code with debug break slots. If it</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="comment">// fails just keep the current code.</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="keywordtype">bool</span> prev_force_debugger_active =</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;            isolate_-&gt;debugger()-&gt;force_debugger_active();</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        isolate_-&gt;debugger()-&gt;set_force_debugger_active(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        Handle&lt;Code&gt; code = <a class="code" href="../../d6/dd3/classv8_1_1internal_1_1_compiler.html#aa365e7e1d39cb38be06d8d64ee02544f">Compiler::GetCodeForDebugging</a>(<span class="keyword">function</span>);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        <span class="keyword">function</span>-&gt;ReplaceCode(*code);</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        isolate_-&gt;debugger()-&gt;set_force_debugger_active(</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            prev_force_debugger_active);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      }</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      <span class="comment">// Keep function code in sync with shared function info.</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      <span class="keyword">function</span>-&gt;set_code(shared-&gt;code());</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    }</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    RedirectActivationsToRecompiledCodeOnThread(isolate_,</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                                                isolate_-&gt;thread_local_top());</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    ActiveFunctionsRedirector active_functions_redirector;</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    isolate_-&gt;thread_manager()-&gt;IterateArchivedThreads(</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;          &amp;active_functions_redirector);</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  }</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;}</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>* Debug::FindSharedFunctionInfoInScript(Handle&lt;Script&gt; script,</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                                              <span class="keywordtype">int</span> position) {</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <span class="comment">// Iterate the heap looking for SharedFunctionInfo generated from the</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <span class="comment">// script. The inner most SharedFunctionInfo containing the source position</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="comment">// for the requested break point is found.</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <span class="comment">// NOTE: This might require several heap iterations. If the SharedFunctionInfo</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="comment">// which is found is not compiled it is compiled and the heap is iterated</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <span class="comment">// again as the compilation might create inner functions from the newly</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="comment">// compiled function and the actual requested break point might be in one of</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <span class="comment">// these functions.</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="comment">// NOTE: The below fix-point iteration depends on all functions that cannot be</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="comment">// compiled lazily without a context to not be compiled at all. Compilation</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="comment">// will be triggered at points where we do not need a context.</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <span class="keywordtype">bool</span> done = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="comment">// The current candidate for the source position:</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="keywordtype">int</span> target_start_position = RelocInfo::kNoPosition;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  Handle&lt;JSFunction&gt; target_function;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  Handle&lt;SharedFunctionInfo&gt; target;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  Heap* heap = isolate_-&gt;heap();</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="keywordflow">while</span> (!done) {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    { <span class="comment">// Extra scope for iterator and no-allocation.</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      heap-&gt;EnsureHeapIsIterable();</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a949499cf64adf66e57fb90ad2546be23">DisallowHeapAllocation</a> no_alloc_during_heap_iteration;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      HeapIterator iterator(heap);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      <span class="keywordflow">for</span> (HeapObject* obj = iterator.next();</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;           obj != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>; obj = iterator.next()) {</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="keywordtype">bool</span> found_next_candidate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        Handle&lt;JSFunction&gt; <span class="keyword">function</span>;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        Handle&lt;SharedFunctionInfo&gt; shared;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <span class="keywordflow">if</span> (obj-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;          <span class="keyword">function</span> = Handle&lt;JSFunction&gt;(<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(obj));</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;          shared = Handle&lt;SharedFunctionInfo&gt;(<span class="keyword">function</span>-&gt;shared());</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(shared-&gt;allows_lazy_compilation() || shared-&gt;is_compiled());</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;          found_next_candidate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj-&gt;IsSharedFunctionInfo()) {</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;          shared = Handle&lt;SharedFunctionInfo&gt;(<a class="code" href="../../db/dc5/classv8_1_1internal_1_1_shared_function_info.html#acf9b9f7e9418e47ef67bb1e9aacb3bb7">SharedFunctionInfo::cast</a>(obj));</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;          <span class="comment">// Skip functions that we cannot compile lazily without a context,</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;          <span class="comment">// which is not available here, because there is no closure.</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;          found_next_candidate = shared-&gt;is_compiled() ||</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;              shared-&gt;allows_lazy_compilation_without_context();</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        }</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="keywordflow">if</span> (!found_next_candidate) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        <span class="keywordflow">if</span> (shared-&gt;script() == *script) {</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;          <span class="comment">// If the SharedFunctionInfo found has the requested script data and</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;          <span class="comment">// contains the source position it is a candidate.</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;          <span class="keywordtype">int</span> start_position = shared-&gt;function_token_position();</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;          <span class="keywordflow">if</span> (start_position == RelocInfo::kNoPosition) {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;            start_position = shared-&gt;start_position();</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;          }</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;          <span class="keywordflow">if</span> (start_position &lt;= position &amp;&amp;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;              position &lt;= shared-&gt;end_position()) {</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;            <span class="comment">// If there is no candidate or this function is within the current</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            <span class="comment">// candidate this is the new candidate.</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;            <span class="keywordflow">if</span> (target.is_null()) {</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;              target_start_position = start_position;</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;              target_function = <span class="keyword">function</span>;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;              target = shared;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;              <span class="keywordflow">if</span> (target_start_position == start_position &amp;&amp;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                  shared-&gt;end_position() == target-&gt;end_position()) {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                <span class="comment">// If a top-level function contains only one function</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                <span class="comment">// declaration the source for the top-level and the function</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                <span class="comment">// is the same. In that case prefer the non top-level function.</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                <span class="keywordflow">if</span> (!shared-&gt;is_toplevel()) {</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                  target_start_position = start_position;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                  target_function = <span class="keyword">function</span>;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                  target = shared;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                }</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target_start_position &lt;= start_position &amp;&amp;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                         shared-&gt;end_position() &lt;= target-&gt;end_position()) {</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                <span class="comment">// This containment check includes equality as a function</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                <span class="comment">// inside a top-level function can share either start or end</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                <span class="comment">// position with the top-level function.</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                target_start_position = start_position;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                target_function = <span class="keyword">function</span>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                target = shared;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;              }</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;            }</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;          }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        }</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      }  <span class="comment">// End for loop.</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    }  <span class="comment">// End no-allocation scope.</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">if</span> (target.is_null()) <span class="keywordflow">return</span> heap-&gt;undefined_value();</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="comment">// There will be at least one break point when we are done.</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    has_break_points_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="comment">// If the candidate found is compiled we are done.</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    done = target-&gt;is_compiled();</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="keywordflow">if</span> (!done) {</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <span class="comment">// If the candidate is not compiled, compile it to reveal any inner</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      <span class="comment">// functions which might contain the requested source position. This</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <span class="comment">// will compile all inner functions that cannot be compiled without a</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <span class="comment">// context, because Compiler::BuildFunctionInfo checks whether the</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <span class="comment">// debugger is active.</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      Handle&lt;Code&gt; result = target_function.is_null()</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;          ? <a class="code" href="../../d6/dd3/classv8_1_1internal_1_1_compiler.html#a7ef53fc883248fd115cf4aeed4b658e5">Compiler::GetUnoptimizedCode</a>(target)</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;          : Compiler::GetUnoptimizedCode(target_function);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="keywordflow">if</span> (result.is_null()) <span class="keywordflow">return</span> isolate_-&gt;heap()-&gt;undefined_value();</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    }</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;  }  <span class="comment">// End while loop.</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;  <span class="keywordflow">return</span> *target;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;}</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;<span class="comment">// Ensures the debug information is present for shared.</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="keywordtype">bool</span> Debug::EnsureDebugInfo(Handle&lt;SharedFunctionInfo&gt; shared,</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                            Handle&lt;JSFunction&gt; <span class="keyword">function</span>) {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  Isolate* isolate = shared-&gt;GetIsolate();</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;  <span class="comment">// Return if we already have the debug info for shared.</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;  <span class="keywordflow">if</span> (HasDebugInfo(shared)) {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(shared-&gt;is_compiled());</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  }</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="comment">// There will be at least one break point when we are done.</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  has_break_points_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  <span class="comment">// Ensure function is compiled. Return false if this failed.</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  <span class="keywordflow">if</span> (!<span class="keyword">function</span>.is_null() &amp;&amp;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      !<a class="code" href="../../d6/dd3/classv8_1_1internal_1_1_compiler.html#ad351dfbf474320b7771eac4b0d2cb5a2">Compiler::EnsureCompiled</a>(<span class="keyword">function</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a857ac7626d3d3da7794fc6aed32ad9bca5311ba07ebdf5dd8929c8796eeda0d45">CLEAR_EXCEPTION</a>)) {</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  }</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <span class="comment">// Create the debug info object.</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  Handle&lt;DebugInfo&gt; debug_info = isolate-&gt;factory()-&gt;NewDebugInfo(shared);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="comment">// Add debug info to the list.</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  DebugInfoListNode* node = <span class="keyword">new</span> DebugInfoListNode(*debug_info);</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  node-&gt;set_next(debug_info_list_);</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  debug_info_list_ = node;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;}</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="keywordtype">void</span> Debug::RemoveDebugInfo(Handle&lt;DebugInfo&gt; debug_info) {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(debug_info_list_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="comment">// Run through the debug info objects to find this one and remove it.</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  DebugInfoListNode* prev = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  DebugInfoListNode* current = debug_info_list_;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="keywordflow">while</span> (current != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">if</span> (*current-&gt;debug_info() == *debug_info) {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      <span class="comment">// Unlink from list. If prev is NULL we are looking at the first element.</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <span class="keywordflow">if</span> (prev == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        debug_info_list_ = current-&gt;next();</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        prev-&gt;set_next(current-&gt;next());</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      }</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      current-&gt;debug_info()-&gt;shared()-&gt;set_debug_info(</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;              isolate_-&gt;heap()-&gt;undefined_value());</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <span class="keyword">delete</span> current;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <span class="comment">// If there are no more debug info objects there are not more break</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <span class="comment">// points.</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      has_break_points_ = debug_info_list_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    }</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="comment">// Move to next in list.</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    prev = current;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    current = current-&gt;next();</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;}</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="keywordtype">void</span> Debug::SetAfterBreakTarget(JavaScriptFrame* frame) {</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  PrepareForBreakPoints();</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="comment">// Get the executing function in which the debug break occurred.</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  Handle&lt;JSFunction&gt; <span class="keyword">function</span>(<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(frame-&gt;function()));</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  Handle&lt;SharedFunctionInfo&gt; shared(function-&gt;shared());</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="keywordflow">if</span> (!EnsureDebugInfo(shared, <span class="keyword">function</span>)) {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="comment">// Return if we failed to retrieve the debug info.</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  }</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  Handle&lt;DebugInfo&gt; debug_info = GetDebugInfo(shared);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  Handle&lt;Code&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab91e71e972251cbfe502d5f3856e5762">code</a>(debug_info-&gt;code());</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  Handle&lt;Code&gt; original_code(debug_info-&gt;original_code());</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  <span class="comment">// Get the code which is actually executing.</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  Handle&lt;Code&gt; frame_code(frame-&gt;LookupCode());</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(frame_code.is_identical_to(code));</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  <span class="comment">// Find the call address in the running code. This address holds the call to</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  <span class="comment">// either a DebugBreakXXX or to the debug break return entry code if the</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  <span class="comment">// break point is still active after processing the break point.</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> addr = frame-&gt;pc() - <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a52dbfb404059e4634d05ca2f3cce9959">Assembler::kPatchDebugBreakSlotReturnOffset</a>;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <span class="comment">// Check if the location is at JS exit or debug break slot.</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <span class="keywordtype">bool</span> at_js_return = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  <span class="keywordtype">bool</span> break_at_js_return_active = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  <span class="keywordtype">bool</span> at_debug_break_slot = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  RelocIterator it(debug_info-&gt;code());</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <span class="keywordflow">while</span> (!it.done() &amp;&amp; !at_js_return &amp;&amp; !at_debug_break_slot) {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="keywordflow">if</span> (RelocInfo::IsJSReturn(it.rinfo()-&gt;rmode())) {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      at_js_return = (it.rinfo()-&gt;pc() ==</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;          addr - <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a2d61989576b350e1547018b45c8fd722">Assembler::kPatchReturnSequenceAddressOffset</a>);</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      break_at_js_return_active = it.rinfo()-&gt;IsPatchedReturnSequence();</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    }</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="keywordflow">if</span> (RelocInfo::IsDebugBreakSlot(it.rinfo()-&gt;rmode())) {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      at_debug_break_slot = (it.rinfo()-&gt;pc() ==</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;          addr - <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a070205288683701317b41a25713ebb73">Assembler::kPatchDebugBreakSlotAddressOffset</a>);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    it.next();</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;  }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="comment">// Handle the jump to continue execution after break point depending on the</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="comment">// break location.</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <span class="keywordflow">if</span> (at_js_return) {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="comment">// If the break point as return is still active jump to the corresponding</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="comment">// place in the original code. If not the break point was removed during</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="comment">// break point processing.</span></div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">if</span> (break_at_js_return_active) {</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      addr +=  original_code-&gt;instruction_start() - code-&gt;instruction_start();</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="comment">// Move back to where the call instruction sequence started.</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    thread_local_.after_break_target_ =</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        addr - <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a2d61989576b350e1547018b45c8fd722">Assembler::kPatchReturnSequenceAddressOffset</a>;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (at_debug_break_slot) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="comment">// Address of where the debug break slot starts.</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    addr = addr - <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a070205288683701317b41a25713ebb73">Assembler::kPatchDebugBreakSlotAddressOffset</a>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="comment">// Continue just after the slot.</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    thread_local_.after_break_target_ = addr + <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#adac2452db6d072b53447bedda9a98a61">Assembler::kDebugBreakSlotLength</a>;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsDebugBreak(<a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#aa26cc13532faa3509c95448e77737b96">Assembler::target_address_at</a>(addr, *code))) {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="comment">// We now know that there is still a debug break call at the target address,</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="comment">// so the break point is still there and the original code will hold the</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <span class="comment">// address to jump to in order to complete the call which is replaced by a</span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="comment">// call to DebugBreakXXX.</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="comment">// Find the corresponding address in the original code.</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    addr += original_code-&gt;instruction_start() - code-&gt;instruction_start();</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="comment">// Install jump to the call address in the original code. This will be the</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <span class="comment">// call which was overwritten by the call to DebugBreakXXX.</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    thread_local_.after_break_target_ =</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#aa26cc13532faa3509c95448e77737b96">Assembler::target_address_at</a>(addr, *original_code);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="comment">// There is no longer a break point present. Don&#39;t try to look in the</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="comment">// original code as the running code will have the right address. This takes</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <span class="comment">// care of the case where the last break point is removed from the function</span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="comment">// and therefore no &quot;original code&quot; is available.</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    thread_local_.after_break_target_ =</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#aa26cc13532faa3509c95448e77737b96">Assembler::target_address_at</a>(addr, *code);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  }</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;}</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="keywordtype">bool</span> Debug::IsBreakAtReturn(JavaScriptFrame* frame) {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="comment">// If there are no break points this cannot be break at return, as</span></div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  <span class="comment">// the debugger statement and stack guard bebug break cannot be at</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="comment">// return.</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  <span class="keywordflow">if</span> (!has_break_points_) {</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  }</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  PrepareForBreakPoints();</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <span class="comment">// Get the executing function in which the debug break occurred.</span></div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  Handle&lt;JSFunction&gt; <span class="keyword">function</span>(<a class="code" href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">JSFunction::cast</a>(frame-&gt;function()));</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  Handle&lt;SharedFunctionInfo&gt; shared(function-&gt;shared());</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  <span class="keywordflow">if</span> (!EnsureDebugInfo(shared, <span class="keyword">function</span>)) {</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="comment">// Return if we failed to retrieve the debug info.</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  Handle&lt;DebugInfo&gt; debug_info = GetDebugInfo(shared);</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  Handle&lt;Code&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab91e71e972251cbfe502d5f3856e5762">code</a>(debug_info-&gt;code());</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="comment">// Get the code which is actually executing.</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  Handle&lt;Code&gt; frame_code(frame-&gt;LookupCode());</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(frame_code.is_identical_to(code));</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="comment">// Find the call address in the running code.</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> addr = frame-&gt;pc() - <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a52dbfb404059e4634d05ca2f3cce9959">Assembler::kPatchDebugBreakSlotReturnOffset</a>;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  <span class="comment">// Check if the location is at JS return.</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  RelocIterator it(debug_info-&gt;code());</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <span class="keywordflow">while</span> (!it.done()) {</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="keywordflow">if</span> (RelocInfo::IsJSReturn(it.rinfo()-&gt;rmode())) {</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="keywordflow">return</span> (it.rinfo()-&gt;pc() ==</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;          addr - <a class="code" href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a2d61989576b350e1547018b45c8fd722">Assembler::kPatchReturnSequenceAddressOffset</a>);</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    }</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    it.next();</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;}</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="keywordtype">void</span> Debug::FramesHaveBeenDropped(StackFrame::Id new_break_frame_id,</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                                  FrameDropMode mode,</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                                  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>** restarter_frame_function_pointer) {</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="keywordflow">if</span> (mode != CURRENTLY_SET_MODE) {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    thread_local_.frame_drop_mode_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5adc5ec2f1a2af41381abab75250b1c8">mode</a>;</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  }</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  thread_local_.break_frame_id_ = new_break_frame_id;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;  thread_local_.restarter_frame_function_pointer_ =</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      restarter_frame_function_pointer;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;}</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> Debug::FramePaddingLayout::kInitialSize = 1;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="comment">// Any even value bigger than kInitialSize as needed for stack scanning.</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> Debug::FramePaddingLayout::kPaddingValue = kInitialSize + 1;</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="keywordtype">bool</span> Debug::IsDebugGlobal(GlobalObject* global) {</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="keywordflow">return</span> IsLoaded() &amp;&amp; global == debug_context()-&gt;global_object();</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;}</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="keywordtype">void</span> Debug::ClearMirrorCache() {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;  PostponeInterruptsScope postpone(isolate_);</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(isolate_-&gt;context() == *Debug::debug_context());</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <span class="comment">// Clear the mirror cache.</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  Handle&lt;String&gt; function_name = isolate_-&gt;factory()-&gt;InternalizeOneByteString(</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#aaf2b51ac357499a1739790fd94bf90ec">STATIC_ASCII_VECTOR</a>(<span class="stringliteral">&quot;ClearMirrorCache&quot;</span>));</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  Handle&lt;Object&gt; fun(</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      isolate_-&gt;global_object()-&gt;GetPropertyNoExceptionThrown(*function_name),</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      isolate_);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(fun-&gt;IsJSFunction());</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <span class="keywordtype">bool</span> caught_exception;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <a class="code" href="../../d0/d00/classv8_1_1internal_1_1_execution.html#a9fc44c1cb13aa88e94ba9a8b256eaa7e">Execution::TryCall</a>(Handle&lt;JSFunction&gt;::cast(fun),</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;      Handle&lt;JSObject&gt;(Debug::debug_context()-&gt;global_object()),</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>, &amp;caught_exception);</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;}</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;<span class="keywordtype">void</span> Debug::CreateScriptCache() {</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  Heap* heap = isolate_-&gt;heap();</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="comment">// Perform two GCs to get rid of all unreferenced scripts. The first GC gets</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <span class="comment">// rid of all the cached script wrappers and the second gets rid of the</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <span class="comment">// scripts which are no longer referenced.  The second also sweeps precisely,</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <span class="comment">// which saves us doing yet another GC to make the heap iterable.</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  heap-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">Heap::kNoGCFlags</a>, <span class="stringliteral">&quot;Debug::CreateScriptCache&quot;</span>);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  heap-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#afbaa9137eb86d66f958fcc41a77c2fea">Heap::kMakeHeapIterableMask</a>,</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                          <span class="stringliteral">&quot;Debug::CreateScriptCache&quot;</span>);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(script_cache_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  script_cache_ = <span class="keyword">new</span> ScriptCache(isolate_);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <span class="comment">// Scan heap for Script objects.</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  HeapIterator iterator(heap);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a949499cf64adf66e57fb90ad2546be23">DisallowHeapAllocation</a> no_allocation;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="keywordflow">for</span> (HeapObject* obj = iterator.next(); obj != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>; obj = iterator.next()) {</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordflow">if</span> (obj-&gt;IsScript() &amp;&amp; <a class="code" href="../../d9/da4/classv8_1_1internal_1_1_script.html#af5d25c39e7d38591e52ee53301bb283d">Script::cast</a>(obj)-&gt;<a class="code" href="../../d9/da4/classv8_1_1internal_1_1_script.html#a84326daa66ef0f04c363386ee25fb0fd">HasValidSource</a>()) {</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;      script_cache_-&gt;Add(Handle&lt;Script&gt;(<a class="code" href="../../d9/da4/classv8_1_1internal_1_1_script.html#af5d25c39e7d38591e52ee53301bb283d">Script::cast</a>(obj)));</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;      count++;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    }</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  }</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;}</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="keywordtype">void</span> Debug::DestroyScriptCache() {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="comment">// Get rid of the script cache if it was created.</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="keywordflow">if</span> (script_cache_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keyword">delete</span> script_cache_;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    script_cache_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  }</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;}</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;<span class="keywordtype">void</span> Debug::AddScriptToScriptCache(Handle&lt;Script&gt; script) {</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;  <span class="keywordflow">if</span> (script_cache_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    script_cache_-&gt;Add(script);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  }</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;}</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;Handle&lt;FixedArray&gt; Debug::GetLoadedScripts() {</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="comment">// Create and fill the script cache when the loaded scripts is requested for</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="comment">// the first time.</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="keywordflow">if</span> (script_cache_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    CreateScriptCache();</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <span class="comment">// If the script cache is not active just return an empty array.</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(script_cache_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordflow">if</span> (script_cache_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    isolate_-&gt;factory()-&gt;NewFixedArray(0);</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  }</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <span class="comment">// Perform GC to get unreferenced scripts evicted from the cache before</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="comment">// returning the content.</span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  isolate_-&gt;heap()-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">Heap::kNoGCFlags</a>,</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                                      <span class="stringliteral">&quot;Debug::GetLoadedScripts&quot;</span>);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <span class="comment">// Get the scripts from the cache.</span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="keywordflow">return</span> script_cache_-&gt;GetScripts();</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;}</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="keywordtype">void</span> Debug::RecordEvalCaller(Handle&lt;Script&gt; script) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  script-&gt;set_compilation_type(<a class="code" href="../../d9/da4/classv8_1_1internal_1_1_script.html#a25dfbfd382280d5562fdc3582b8aafd2a0b4ee660dbf2358b5f527153730cef7a">Script::COMPILATION_TYPE_EVAL</a>);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="comment">// For eval scripts add information on the function from which eval was</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <span class="comment">// called.</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  StackTraceFrameIterator it(script-&gt;GetIsolate());</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="keywordflow">if</span> (!it.done()) {</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    script-&gt;set_eval_from_shared(it.frame()-&gt;function()-&gt;shared());</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    Code* code = it.frame()-&gt;LookupCode();</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <span class="keywordtype">int</span> offset = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;        it.frame()-&gt;pc() - code-&gt;instruction_start());</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    script-&gt;set_eval_from_instructions_offset(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(offset));</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  }</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;}</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;<span class="keywordtype">void</span> Debug::AfterGarbageCollection() {</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="comment">// Generate events for collected scripts.</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <span class="keywordflow">if</span> (script_cache_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    script_cache_-&gt;ProcessCollectedScripts();</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  }</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;}</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;Debugger::Debugger(Isolate* isolate)</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    : debugger_access_(isolate-&gt;debugger_access()),</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      event_listener_(Handle&lt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>&gt;()),</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      event_listener_data_(Handle&lt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">Object</a>&gt;()),</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;      compiling_natives_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      is_loading_debugger_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;      live_edit_enabled_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a29dd6ffe8f62d1541ef1c8056c028e9c">true</a>),</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      never_unload_debugger_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      force_debugger_active_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      message_handler_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;      debugger_unload_pending_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;      host_dispatch_handler_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      debug_message_dispatch_handler_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      message_dispatch_helper_thread_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      host_dispatch_period_(TimeDelta::FromMilliseconds(100)),</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      agent_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>),</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      command_queue_(isolate-&gt;logger(), kQueueInitialSize),</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      command_received_(0),</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      event_command_queue_(isolate-&gt;logger(), kQueueInitialSize),</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      isolate_(isolate) {</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;}</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;Debugger::~Debugger() {}</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;Handle&lt;Object&gt; Debugger::MakeJSObject(Vector&lt;const char&gt; constructor_name,</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                                      <span class="keywordtype">int</span> argc,</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                                      Handle&lt;Object&gt; argv[],</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                                      <span class="keywordtype">bool</span>* caught_exception) {</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(isolate_-&gt;context() == *isolate_-&gt;debug()-&gt;debug_context());</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  <span class="comment">// Create the execution state object.</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  Handle&lt;String&gt; constructor_str =</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      isolate_-&gt;factory()-&gt;InternalizeUtf8String(constructor_name);</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!constructor_str.is_null());</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  Handle&lt;Object&gt; constructor(</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      isolate_-&gt;global_object()-&gt;GetPropertyNoExceptionThrown(*constructor_str),</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;      isolate_);</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(constructor-&gt;IsJSFunction());</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <span class="keywordflow">if</span> (!constructor-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    *caught_exception = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keywordflow">return</span> isolate_-&gt;factory()-&gt;undefined_value();</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  }</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  Handle&lt;Object&gt; js_object = <a class="code" href="../../d0/d00/classv8_1_1internal_1_1_execution.html#a9fc44c1cb13aa88e94ba9a8b256eaa7e">Execution::TryCall</a>(</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      Handle&lt;JSFunction&gt;::cast(constructor),</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      Handle&lt;JSObject&gt;(isolate_-&gt;debug()-&gt;debug_context()-&gt;global_object()),</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      argc,</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      argv,</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      caught_exception);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  <span class="keywordflow">return</span> js_object;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;}</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;Handle&lt;Object&gt; Debugger::MakeExecutionState(<span class="keywordtype">bool</span>* caught_exception) {</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="comment">// Create the execution state object.</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  Handle&lt;Object&gt; break_id = isolate_-&gt;factory()-&gt;NewNumberFromInt(</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;      isolate_-&gt;debug()-&gt;break_id());</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  Handle&lt;Object&gt; argv[] = { break_id };</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <span class="keywordflow">return</span> MakeJSObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;MakeExecutionState&quot;</span>),</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                      <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                      argv,</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                      caught_exception);</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;Handle&lt;Object&gt; Debugger::MakeBreakEvent(Handle&lt;Object&gt; exec_state,</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                                        Handle&lt;Object&gt; break_points_hit,</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                                        <span class="keywordtype">bool</span>* caught_exception) {</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  <span class="comment">// Create the new break event object.</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  Handle&lt;Object&gt; argv[] = { exec_state, break_points_hit };</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <span class="keywordflow">return</span> MakeJSObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;MakeBreakEvent&quot;</span>),</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                      <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                      argv,</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                      caught_exception);</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;}</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;Handle&lt;Object&gt; Debugger::MakeExceptionEvent(Handle&lt;Object&gt; exec_state,</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;                                            Handle&lt;Object&gt; exception,</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                                            <span class="keywordtype">bool</span> uncaught,</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                                            <span class="keywordtype">bool</span>* caught_exception) {</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;  Factory* factory = isolate_-&gt;factory();</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  <span class="comment">// Create the new exception event object.</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  Handle&lt;Object&gt; argv[] = { exec_state,</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;                            exception,</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;                            factory-&gt;ToBoolean(uncaught) };</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <span class="keywordflow">return</span> MakeJSObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;MakeExceptionEvent&quot;</span>),</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;                      <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                      argv,</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                      caught_exception);</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;}</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;Handle&lt;Object&gt; Debugger::MakeNewFunctionEvent(Handle&lt;Object&gt; <span class="keyword">function</span>,</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;                                              <span class="keywordtype">bool</span>* caught_exception) {</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <span class="comment">// Create the new function event object.</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  Handle&lt;Object&gt; argv[] = { <span class="keyword">function</span> };</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  <span class="keywordflow">return</span> MakeJSObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;MakeNewFunctionEvent&quot;</span>),</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                      <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;                      argv,</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;                      caught_exception);</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;}</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;Handle&lt;Object&gt; Debugger::MakeCompileEvent(Handle&lt;Script&gt; script,</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;                                          <span class="keywordtype">bool</span> before,</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;                                          <span class="keywordtype">bool</span>* caught_exception) {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  Factory* factory = isolate_-&gt;factory();</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;  <span class="comment">// Create the compile event object.</span></div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;  Handle&lt;Object&gt; exec_state = MakeExecutionState(caught_exception);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;  Handle&lt;Object&gt; script_wrapper = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36f2f3b43f6117e78f2887330a2e8b93">GetScriptWrapper</a>(script);</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;  Handle&lt;Object&gt; argv[] = { exec_state,</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;                            script_wrapper,</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                            factory-&gt;ToBoolean(before) };</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;  <span class="keywordflow">return</span> MakeJSObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;MakeCompileEvent&quot;</span>),</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                      <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                      argv,</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;                      caught_exception);</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;}</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;Handle&lt;Object&gt; Debugger::MakeScriptCollectedEvent(<span class="keywordtype">int</span> <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                                                  <span class="keywordtype">bool</span>* caught_exception) {</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;  <span class="comment">// Create the script collected event object.</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;  Handle&lt;Object&gt; exec_state = MakeExecutionState(caught_exception);</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  Handle&lt;Object&gt; id_object = Handle&lt;Smi&gt;(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(<span class="keywordtype">id</span>), isolate_);</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;  Handle&lt;Object&gt; argv[] = { exec_state, id_object };</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  <span class="keywordflow">return</span> MakeJSObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;MakeScriptCollectedEvent&quot;</span>),</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                      <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                      argv,</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                      caught_exception);</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;}</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="keywordtype">void</span> Debugger::OnException(Handle&lt;Object&gt; exception, <span class="keywordtype">bool</span> uncaught) {</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  Debug* debug = isolate_-&gt;debug();</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  <span class="comment">// Bail out based on state or if there is no listener for this event</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <span class="keywordflow">if</span> (debug-&gt;InDebugger()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <span class="keywordflow">if</span> (!Debugger::EventActive(<a class="code" href="../../da/d6a/classv8_1_1_exception.html">v8::Exception</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  <span class="comment">// Bail out if exception breaks are not active</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <span class="keywordflow">if</span> (uncaught) {</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <span class="comment">// Uncaught exceptions are reported by either flags.</span></div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <span class="keywordflow">if</span> (!(debug-&gt;break_on_uncaught_exception() ||</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;          debug-&gt;break_on_exception())) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="comment">// Caught exceptions are reported is activated.</span></div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="keywordflow">if</span> (!debug-&gt;break_on_exception()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  }</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;  <span class="comment">// Enter the debugger.</span></div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  EnterDebugger debugger(isolate_);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <span class="keywordflow">if</span> (debugger.FailedToEnter()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <span class="comment">// Clear all current stepping setup.</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  debug-&gt;ClearStepping();</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <span class="comment">// Create the event data object.</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <span class="keywordtype">bool</span> caught_exception = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  Handle&lt;Object&gt; exec_state = MakeExecutionState(&amp;caught_exception);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  Handle&lt;Object&gt; event_data;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <span class="keywordflow">if</span> (!caught_exception) {</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    event_data = MakeExceptionEvent(exec_state, exception, uncaught,</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;                                    &amp;caught_exception);</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  }</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  <span class="comment">// Bail out and don&#39;t call debugger if exception.</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  }</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <span class="comment">// Process debug event.</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  ProcessDebugEvent(<a class="code" href="../../da/d6a/classv8_1_1_exception.html">v8::Exception</a>, Handle&lt;JSObject&gt;::cast(event_data), <span class="keyword">false</span>);</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <span class="comment">// Return to continue execution from where the exception was thrown.</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;}</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;<span class="keywordtype">void</span> Debugger::OnDebugBreak(Handle&lt;Object&gt; break_points_hit,</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;                            <span class="keywordtype">bool</span> auto_continue) {</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;  <span class="comment">// Debugger has already been entered by caller.</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(isolate_-&gt;context() == *isolate_-&gt;debug()-&gt;debug_context());</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  <span class="comment">// Bail out if there is no listener for this event</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <span class="keywordflow">if</span> (!Debugger::EventActive(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba54957cf47b2c20cda66ae848d2b3aacb">v8::Break</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <span class="comment">// Debugger must be entered in advance.</span></div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(isolate_-&gt;context() == *isolate_-&gt;debug()-&gt;debug_context());</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <span class="comment">// Create the event data object.</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <span class="keywordtype">bool</span> caught_exception = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  Handle&lt;Object&gt; exec_state = MakeExecutionState(&amp;caught_exception);</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  Handle&lt;Object&gt; event_data;</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <span class="keywordflow">if</span> (!caught_exception) {</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    event_data = MakeBreakEvent(exec_state, break_points_hit,</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;                                &amp;caught_exception);</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  }</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <span class="comment">// Bail out and don&#39;t call debugger if exception.</span></div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  }</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <span class="comment">// Process debug event.</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  ProcessDebugEvent(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba54957cf47b2c20cda66ae848d2b3aacb">v8::Break</a>,</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;                    Handle&lt;JSObject&gt;::cast(event_data),</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                    auto_continue);</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;}</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="keywordtype">void</span> Debugger::OnBeforeCompile(Handle&lt;Script&gt; script) {</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="comment">// Bail out based on state or if there is no listener for this event</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <span class="keywordflow">if</span> (isolate_-&gt;debug()-&gt;InDebugger()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <span class="keywordflow">if</span> (compiling_natives()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  <span class="keywordflow">if</span> (!EventActive(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79babafd77f9b82992d38f1146bf5f5b5f0d">v8::BeforeCompile</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <span class="comment">// Enter the debugger.</span></div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  EnterDebugger debugger(isolate_);</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="keywordflow">if</span> (debugger.FailedToEnter()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;  <span class="comment">// Create the event data object.</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="keywordtype">bool</span> caught_exception = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  Handle&lt;Object&gt; event_data = MakeCompileEvent(script, <span class="keyword">true</span>, &amp;caught_exception);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <span class="comment">// Bail out and don&#39;t call debugger if exception.</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  }</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;  <span class="comment">// Process debug event.</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  ProcessDebugEvent(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79babafd77f9b82992d38f1146bf5f5b5f0d">v8::BeforeCompile</a>,</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;                    Handle&lt;JSObject&gt;::cast(event_data),</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                    <span class="keyword">true</span>);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;}</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment">// Handle debugger actions when a new script is compiled.</span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="keywordtype">void</span> Debugger::OnAfterCompile(Handle&lt;Script&gt; script,</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;                              AfterCompileFlags after_compile_flags) {</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  Debug* debug = isolate_-&gt;debug();</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <span class="comment">// Add the newly compiled script to the script cache.</span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  debug-&gt;AddScriptToScriptCache(script);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <span class="comment">// No more to do if not debugging.</span></div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <span class="keywordflow">if</span> (!IsDebuggerActive()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="comment">// No compile events while compiling natives.</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="keywordflow">if</span> (compiling_natives()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;  <span class="comment">// Store whether in debugger before entering debugger.</span></div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  <span class="keywordtype">bool</span> in_debugger = debug-&gt;InDebugger();</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  <span class="comment">// Enter the debugger.</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  EnterDebugger debugger(isolate_);</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <span class="keywordflow">if</span> (debugger.FailedToEnter()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="comment">// If debugging there might be script break points registered for this</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <span class="comment">// script. Make sure that these break points are set.</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <span class="comment">// Get the function UpdateScriptBreakPoints (defined in debug-debugger.js).</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;  Handle&lt;String&gt; update_script_break_points_string =</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;      isolate_-&gt;factory()-&gt;InternalizeOneByteString(</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;          <a class="code" href="../../d5/d60/utils_8h.html#aaf2b51ac357499a1739790fd94bf90ec">STATIC_ASCII_VECTOR</a>(<span class="stringliteral">&quot;UpdateScriptBreakPoints&quot;</span>));</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  Handle&lt;Object&gt; update_script_break_points =</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;      Handle&lt;Object&gt;(</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;          debug-&gt;debug_context()-&gt;global_object()-&gt;GetPropertyNoExceptionThrown(</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;              *update_script_break_points_string),</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;          isolate_);</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <span class="keywordflow">if</span> (!update_script_break_points-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  }</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(update_script_break_points-&gt;IsJSFunction());</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  <span class="comment">// Wrap the script object in a proper JS object before passing it</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  <span class="comment">// to JavaScript.</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  Handle&lt;JSValue&gt; wrapper = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36f2f3b43f6117e78f2887330a2e8b93">GetScriptWrapper</a>(script);</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  <span class="comment">// Call UpdateScriptBreakPoints expect no exceptions.</span></div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <span class="keywordtype">bool</span> caught_exception;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  Handle&lt;Object&gt; argv[] = { wrapper };</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <a class="code" href="../../d0/d00/classv8_1_1internal_1_1_execution.html#a9fc44c1cb13aa88e94ba9a8b256eaa7e">Execution::TryCall</a>(Handle&lt;JSFunction&gt;::cast(update_script_break_points),</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;                     isolate_-&gt;js_builtins_object(),</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                     <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                     argv,</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;                     &amp;caught_exception);</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  }</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <span class="comment">// Bail out based on state or if there is no listener for this event</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  <span class="keywordflow">if</span> (in_debugger &amp;&amp; (after_compile_flags &amp; SEND_WHEN_DEBUGGING) == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  <span class="keywordflow">if</span> (!Debugger::EventActive(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79bace1d56bc37c286ed08718089a72b1419">v8::AfterCompile</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <span class="comment">// Create the compile state object.</span></div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  Handle&lt;Object&gt; event_data = MakeCompileEvent(script,</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                                               <span class="keyword">false</span>,</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                                               &amp;caught_exception);</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  <span class="comment">// Bail out and don&#39;t call debugger if exception.</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  }</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <span class="comment">// Process debug event.</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  ProcessDebugEvent(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79bace1d56bc37c286ed08718089a72b1419">v8::AfterCompile</a>,</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;                    Handle&lt;JSObject&gt;::cast(event_data),</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;                    <span class="keyword">true</span>);</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;}</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="keywordtype">void</span> Debugger::OnScriptCollected(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  <span class="comment">// No more to do if not debugging.</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;  <span class="keywordflow">if</span> (isolate_-&gt;debug()-&gt;InDebugger()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;  <span class="keywordflow">if</span> (!IsDebuggerActive()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  <span class="keywordflow">if</span> (!Debugger::EventActive(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba7af8b3b962aadf798e813a27173fc4c3">v8::ScriptCollected</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  <span class="comment">// Enter the debugger.</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;  EnterDebugger debugger(isolate_);</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  <span class="keywordflow">if</span> (debugger.FailedToEnter()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  <span class="comment">// Create the script collected state object.</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;  <span class="keywordtype">bool</span> caught_exception = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;  Handle&lt;Object&gt; event_data = MakeScriptCollectedEvent(<span class="keywordtype">id</span>,</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;                                                       &amp;caught_exception);</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  <span class="comment">// Bail out and don&#39;t call debugger if exception.</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  }</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  <span class="comment">// Process debug event.</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  ProcessDebugEvent(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba7af8b3b962aadf798e813a27173fc4c3">v8::ScriptCollected</a>,</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;                    Handle&lt;JSObject&gt;::cast(event_data),</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;                    <span class="keyword">true</span>);</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;}</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="keywordtype">void</span> Debugger::ProcessDebugEvent(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">v8::DebugEvent</a> event,</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;                                 Handle&lt;JSObject&gt; event_data,</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;                                 <span class="keywordtype">bool</span> auto_continue) {</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <span class="comment">// Clear any pending debug break if this is a real break.</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <span class="keywordflow">if</span> (!auto_continue) {</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    isolate_-&gt;debug()-&gt;clear_interrupt_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3aff699505fa2894108ea9f35f845abe64">DEBUGBREAK</a>);</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  }</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="comment">// Create the execution state.</span></div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="keywordtype">bool</span> caught_exception = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;  Handle&lt;Object&gt; exec_state = MakeExecutionState(&amp;caught_exception);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  }</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <span class="comment">// First notify the message handler if any.</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <span class="keywordflow">if</span> (message_handler_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    NotifyMessageHandler(event,</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;                         Handle&lt;JSObject&gt;::cast(exec_state),</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;                         event_data,</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;                         auto_continue);</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  }</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="comment">// Notify registered debug event listener. This can be either a C or</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;  <span class="comment">// a JavaScript function. Don&#39;t call event listener for v8::Break</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  <span class="comment">// here, if it&#39;s only a debug command -- they will be processed later.</span></div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;  <span class="keywordflow">if</span> ((event != <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba54957cf47b2c20cda66ae848d2b3aacb">v8::Break</a> || !auto_continue) &amp;&amp; !event_listener_.is_null()) {</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    CallEventCallback(event, exec_state, event_data, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  }</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  <span class="comment">// Process pending debug commands.</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;  <span class="keywordflow">if</span> (event == <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba54957cf47b2c20cda66ae848d2b3aacb">v8::Break</a>) {</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <span class="keywordflow">while</span> (!event_command_queue_.IsEmpty()) {</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      CommandMessage command = event_command_queue_.Get();</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;      <span class="keywordflow">if</span> (!event_listener_.is_null()) {</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        CallEventCallback(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba88a18e11ec269de0e91887c301bccd7e">v8::BreakForCommand</a>,</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;                          exec_state,</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;                          event_data,</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;                          command.client_data());</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      }</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;      command.Dispose();</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    }</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  }</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;}</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="keywordtype">void</span> Debugger::CallEventCallback(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">v8::DebugEvent</a> event,</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;                                 Handle&lt;Object&gt; exec_state,</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;                                 Handle&lt;Object&gt; event_data,</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;                                 <a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* client_data) {</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  <span class="keywordflow">if</span> (event_listener_-&gt;IsForeign()) {</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    CallCEventCallback(event, exec_state, event_data, client_data);</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    CallJSEventCallback(event, exec_state, event_data);</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  }</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;}</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;<span class="keywordtype">void</span> Debugger::CallCEventCallback(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">v8::DebugEvent</a> event,</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;                                  Handle&lt;Object&gt; exec_state,</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;                                  Handle&lt;Object&gt; event_data,</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;                                  <a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* client_data) {</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;  Handle&lt;Foreign&gt; callback_obj(Handle&lt;Foreign&gt;::cast(event_listener_));</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <a class="code" href="../../de/d13/classv8_1_1_debug.html#a3e066f3a485372fdd61516e79cadc615">v8::Debug::EventCallback2</a> callback =</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;      FUNCTION_CAST&lt;v8::Debug::EventCallback2&gt;(</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;          callback_obj-&gt;foreign_address());</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  EventDetailsImpl event_details(</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      event,</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      Handle&lt;JSObject&gt;::cast(exec_state),</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      Handle&lt;JSObject&gt;::cast(event_data),</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      event_listener_data_,</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      client_data);</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  callback(event_details);</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;}</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;<span class="keywordtype">void</span> Debugger::CallJSEventCallback(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">v8::DebugEvent</a> event,</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;                                   Handle&lt;Object&gt; exec_state,</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;                                   Handle&lt;Object&gt; event_data) {</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(event_listener_-&gt;IsJSFunction());</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  Handle&lt;JSFunction&gt; fun(Handle&lt;JSFunction&gt;::cast(event_listener_));</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;  <span class="comment">// Invoke the JavaScript debug event listener.</span></div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  Handle&lt;Object&gt; argv[] = { Handle&lt;Object&gt;(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(event), isolate_),</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;                            exec_state,</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;                            event_data,</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;                            event_listener_data_ };</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;  <span class="keywordtype">bool</span> caught_exception;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  <a class="code" href="../../d0/d00/classv8_1_1internal_1_1_execution.html#a9fc44c1cb13aa88e94ba9a8b256eaa7e">Execution::TryCall</a>(fun,</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;                     isolate_-&gt;global_object(),</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;                     <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;                     argv,</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;                     &amp;caught_exception);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  <span class="comment">// Silently ignore exceptions from debug event listeners.</span></div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;}</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;Handle&lt;Context&gt; Debugger::GetDebugContext() {</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  never_unload_debugger_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  EnterDebugger debugger(isolate_);</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;  <span class="keywordflow">return</span> isolate_-&gt;debug()-&gt;debug_context();</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;}</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="keywordtype">void</span> Debugger::UnloadDebugger() {</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;  Debug* debug = isolate_-&gt;debug();</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <span class="comment">// Make sure that there are no breakpoints left.</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  debug-&gt;ClearAllBreakPoints();</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  <span class="comment">// Unload the debugger if feasible.</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;  <span class="keywordflow">if</span> (!never_unload_debugger_) {</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    debug-&gt;Unload();</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  }</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <span class="comment">// Clear the flag indicating that the debugger should be unloaded.</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;  debugger_unload_pending_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;}</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;<span class="keywordtype">void</span> Debugger::NotifyMessageHandler(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">v8::DebugEvent</a> event,</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;                                    Handle&lt;JSObject&gt; exec_state,</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;                                    Handle&lt;JSObject&gt; event_data,</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;                                    <span class="keywordtype">bool</span> auto_continue) {</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>*<span class="keyword">&gt;</span>(isolate_);</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;  <span class="keywordflow">if</span> (!isolate_-&gt;debug()-&gt;Load()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  <span class="comment">// Process the individual events.</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;  <span class="keywordtype">bool</span> sendEventMessage = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  <span class="keywordflow">switch</span> (event) {</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba54957cf47b2c20cda66ae848d2b3aacb">v8::Break</a>:</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba88a18e11ec269de0e91887c301bccd7e">v8::BreakForCommand</a>:</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;      sendEventMessage = !auto_continue;</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../da/d6a/classv8_1_1_exception.html">v8::Exception</a>:</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;      sendEventMessage = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79babafd77f9b82992d38f1146bf5f5b5f0d">v8::BeforeCompile</a>:</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79bace1d56bc37c286ed08718089a72b1419">v8::AfterCompile</a>:</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;      sendEventMessage = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba7af8b3b962aadf798e813a27173fc4c3">v8::ScriptCollected</a>:</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      sendEventMessage = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba760fb826f96dc4839ae0c01828bfaefd">v8::NewFunction</a>:</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  }</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <span class="comment">// The debug command interrupt flag might have been set when the command was</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <span class="comment">// added. It should be enough to clear the flag only once while we are in the</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  <span class="comment">// debugger.</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(isolate_-&gt;debug()-&gt;InDebugger());</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  isolate_-&gt;stack_guard()-&gt;Continue(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3a081e897e579859f166231191255a9f0c">DEBUGCOMMAND</a>);</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <span class="comment">// Notify the debugger that a debug event has occurred unless auto continue is</span></div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <span class="comment">// active in which case no event is send.</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="keywordflow">if</span> (sendEventMessage) {</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    MessageImpl message = MessageImpl::NewEvent(</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;        event,</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        auto_continue,</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;        Handle&lt;JSObject&gt;::cast(exec_state),</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        Handle&lt;JSObject&gt;::cast(event_data));</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    InvokeMessageHandler(message);</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  }</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <span class="comment">// If auto continue don&#39;t make the event cause a break, but process messages</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <span class="comment">// in the queue if any. For script collected events don&#39;t even process</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <span class="comment">// messages in the queue as the execution state might not be what is expected</span></div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  <span class="comment">// by the client.</span></div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="keywordflow">if</span> ((auto_continue &amp;&amp; !HasCommands()) || event == <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba7af8b3b962aadf798e813a27173fc4c3">v8::ScriptCollected</a>) {</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;  }</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="comment">// DebugCommandProcessor goes here.</span></div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> cmd_processor;</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  {</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> api_exec_state =</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(Handle&lt;JSObject&gt;::cast(exec_state));</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> fun_name = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a8b0b3550d419120008daa8a8107a9aa4">v8::String::NewFromUtf8</a>(</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;        isolate, <span class="stringliteral">&quot;debugCommandProcessor&quot;</span>);</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> fun =</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        <a class="code" href="../../de/deb/classv8_1_1_local.html#a95f87a19741ea448d7f1654c9801cfea">v8::Local&lt;v8::Function&gt;::Cast</a>(api_exec_state-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(fun_name));</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> running = <a class="code" href="../../d2/dac/classv8_1_1_boolean.html#a166e4a8faa5cae851789a3d3b7e1c415">v8::Boolean::New</a>(isolate, auto_continue);</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kArgc = 1;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> argv[kArgc] = { running };</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    cmd_processor = <a class="code" href="../../de/deb/classv8_1_1_local.html#a95f87a19741ea448d7f1654c9801cfea">v8::Local&lt;v8::Object&gt;::Cast</a>(</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#aa8bcdd2f981cf745827591403639af62">Call</a>(api_exec_state, kArgc, argv));</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    <span class="keywordflow">if</span> (try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>()) {</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;      PrintLn(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    }</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  }</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <span class="keywordtype">bool</span> running = auto_continue;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;  <span class="comment">// Process requests from the debugger.</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <span class="comment">// Wait for new command in the queue.</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <span class="keywordflow">if</span> (Debugger::host_dispatch_handler_) {</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      <span class="comment">// In case there is a host dispatch - do periodic dispatches.</span></div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;      <span class="keywordflow">if</span> (!command_received_.WaitFor(host_dispatch_period_)) {</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="comment">// Timout expired, do the dispatch.</span></div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        Debugger::host_dispatch_handler_();</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      }</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      <span class="comment">// In case there is no host dispatch - just wait.</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      command_received_.Wait();</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    }</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    <span class="comment">// Get the command from the queue.</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    CommandMessage command = command_queue_.Get();</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    isolate_-&gt;logger()-&gt;DebugTag(</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;        <span class="stringliteral">&quot;Got request from command queue, in interactive loop.&quot;</span>);</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <span class="keywordflow">if</span> (!Debugger::IsDebuggerActive()) {</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <span class="comment">// Delete command text and user data.</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      command.Dispose();</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    }</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    <span class="comment">// Invoke JavaScript to process the debug request.</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> fun_name;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> fun;</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> request;</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    fun_name = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a8b0b3550d419120008daa8a8107a9aa4">v8::String::NewFromUtf8</a>(isolate, <span class="stringliteral">&quot;processDebugRequest&quot;</span>);</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    fun = <a class="code" href="../../de/deb/classv8_1_1_local.html#a95f87a19741ea448d7f1654c9801cfea">v8::Local&lt;v8::Function&gt;::Cast</a>(cmd_processor-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(fun_name));</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    request = <a class="code" href="../../d2/db3/classv8_1_1_string.html#ab0f123fbb2a9e29a1335e55636373502">v8::String::NewFromTwoByte</a>(isolate, command.text().start(),</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                                         <a class="code" href="../../d2/db3/classv8_1_1_string.html#aef3852f4561ef81187a88e028968fe54aa46acb614af63a7a3d6b08baa9d7fb7a">v8::String::kNormalString</a>,</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                                         command.text().length());</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kArgc = 1;</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> argv[kArgc] = { request };</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> response_val = fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#aa8bcdd2f981cf745827591403639af62">Call</a>(cmd_processor, kArgc, argv);</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <span class="comment">// Get the response.</span></div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> response;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <span class="keywordflow">if</span> (!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>()) {</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;      <span class="comment">// Get response string.</span></div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;      <span class="keywordflow">if</span> (!response_val-&gt;IsUndefined()) {</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;        response = <a class="code" href="../../de/deb/classv8_1_1_local.html#a95f87a19741ea448d7f1654c9801cfea">v8::Local&lt;v8::String&gt;::Cast</a>(response_val);</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        response = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a8b0b3550d419120008daa8a8107a9aa4">v8::String::NewFromUtf8</a>(isolate, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      }</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      <span class="comment">// Log the JSON request/response.</span></div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      <span class="keywordflow">if</span> (FLAG_trace_debug_json) {</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        PrintLn(request);</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;        PrintLn(response);</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      }</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <span class="comment">// Get the running state.</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;      fun_name = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a8b0b3550d419120008daa8a8107a9aa4">v8::String::NewFromUtf8</a>(isolate, <span class="stringliteral">&quot;isRunning&quot;</span>);</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      fun = <a class="code" href="../../de/deb/classv8_1_1_local.html#a95f87a19741ea448d7f1654c9801cfea">v8::Local&lt;v8::Function&gt;::Cast</a>(cmd_processor-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(fun_name));</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kArgc = 1;</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> argv[kArgc] = { response };</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;      <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> running_val = fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#aa8bcdd2f981cf745827591403639af62">Call</a>(cmd_processor, kArgc, argv);</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      <span class="keywordflow">if</span> (!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>()) {</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;        running = running_val-&gt;ToBoolean()-&gt;Value();</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;      }</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;      <span class="comment">// In case of failure the result text is the exception text.</span></div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;      response = try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>()-&gt;ToString();</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    }</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    <span class="comment">// Return the result.</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    MessageImpl message = MessageImpl::NewResponse(</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        event,</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;        running,</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;        Handle&lt;JSObject&gt;::cast(exec_state),</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;        Handle&lt;JSObject&gt;::cast(event_data),</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        Handle&lt;String&gt;(<a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">Utils::OpenHandle</a>(*response)),</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        command.client_data());</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    InvokeMessageHandler(message);</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    command.Dispose();</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <span class="comment">// Return from debug event processing if either the VM is put into the</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <span class="comment">// running state (through a continue command) or auto continue is active</span></div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="comment">// and there are no more commands queued.</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    <span class="keywordflow">if</span> (running &amp;&amp; !HasCommands()) {</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    }</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  }</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;}</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;<span class="keywordtype">void</span> Debugger::SetEventListener(Handle&lt;Object&gt; callback,</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;                                Handle&lt;Object&gt; data) {</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  HandleScope scope(isolate_);</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  GlobalHandles* global_handles = isolate_-&gt;global_handles();</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <span class="comment">// Clear the global handles for the event listener and the event listener data</span></div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;  <span class="keywordflow">if</span> (!event_listener_.is_null()) {</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a1e54f5d6683a8b2b00da16a2de85bba9">GlobalHandles::Destroy</a>(</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;        reinterpret_cast&lt;Object**&gt;(event_listener_.location()));</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    event_listener_ = Handle&lt;Object&gt;();</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  }</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  <span class="keywordflow">if</span> (!event_listener_data_.is_null()) {</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    <a class="code" href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a1e54f5d6683a8b2b00da16a2de85bba9">GlobalHandles::Destroy</a>(</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;        reinterpret_cast&lt;Object**&gt;(event_listener_data_.location()));</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    event_listener_data_ = Handle&lt;Object&gt;();</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  }</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  <span class="comment">// If there is a new debug event listener register it together with its data</span></div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  <span class="keywordflow">if</span> (!callback-&gt;IsUndefined() &amp;&amp; !callback-&gt;IsNull()) {</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    event_listener_ = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;Object&gt;::cast</a>(</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;        global_handles-&gt;Create(*callback));</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <span class="keywordflow">if</span> (data.is_null()) {</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;      data = isolate_-&gt;factory()-&gt;undefined_value();</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    }</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    event_listener_data_ = <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;Object&gt;::cast</a>(</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;        global_handles-&gt;Create(*data));</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  }</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;  ListenersChanged();</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;}</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="keywordtype">void</span> Debugger::SetMessageHandler(<a class="code" href="../../de/d13/classv8_1_1_debug.html#ad1ce755bf621a7442606f9fe5813363a">v8::Debug::MessageHandler2</a> handler) {</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;  LockGuard&lt;RecursiveMutex&gt; with(debugger_access_);</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;  message_handler_ = handler;</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;  ListenersChanged();</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <span class="keywordflow">if</span> (handler == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="comment">// Send an empty command to the debugger if in a break to make JavaScript</span></div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="comment">// run again if the debugger is closed.</span></div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    <span class="keywordflow">if</span> (isolate_-&gt;debug()-&gt;InDebugger()) {</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;      ProcessCommand(Vector&lt;const uint16_t&gt;::empty());</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    }</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  }</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;}</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;<span class="keywordtype">void</span> Debugger::ListenersChanged() {</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;  <span class="keywordflow">if</span> (IsDebuggerActive()) {</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <span class="comment">// Disable the compilation cache when the debugger is active.</span></div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    isolate_-&gt;compilation_cache()-&gt;Disable();</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    debugger_unload_pending_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    isolate_-&gt;compilation_cache()-&gt;Enable();</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    <span class="comment">// Unload the debugger if event listener and message handler cleared.</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="comment">// Schedule this for later, because we may be in non-V8 thread.</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    debugger_unload_pending_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;  }</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;}</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;<span class="keywordtype">void</span> Debugger::SetHostDispatchHandler(<a class="code" href="../../de/d13/classv8_1_1_debug.html#a904d652e7c9df44a191fe90d3ebba41d">v8::Debug::HostDispatchHandler</a> handler,</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;                                      TimeDelta period) {</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;  host_dispatch_handler_ = handler;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;  host_dispatch_period_ = period;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;}</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;<span class="keywordtype">void</span> Debugger::SetDebugMessageDispatchHandler(</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    <a class="code" href="../../de/d13/classv8_1_1_debug.html#a20e5f2dd13971dc61dd0f383c11537ec">v8::Debug::DebugMessageDispatchHandler</a> handler, <span class="keywordtype">bool</span> provide_locker) {</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;  LockGuard&lt;Mutex&gt; lock_guard(&amp;dispatch_handler_access_);</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;  debug_message_dispatch_handler_ = handler;</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  <span class="keywordflow">if</span> (provide_locker &amp;&amp; message_dispatch_helper_thread_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    message_dispatch_helper_thread_ = <span class="keyword">new</span> MessageDispatchHelperThread(isolate_);</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    message_dispatch_helper_thread_-&gt;Start();</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;  }</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;}</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;<span class="comment">// Calls the registered debug message handler. This callback is part of the</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;<span class="comment">// public API.</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;<span class="keywordtype">void</span> Debugger::InvokeMessageHandler(MessageImpl message) {</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;  LockGuard&lt;RecursiveMutex&gt; with(debugger_access_);</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;  <span class="keywordflow">if</span> (message_handler_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    message_handler_(message);</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;  }</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;}</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;<span class="comment">// Puts a command coming from the public API on the queue.  Creates</span></div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;<span class="comment">// a copy of the command string managed by the debugger.  Up to this</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="comment">// point, the command data was managed by the API client.  Called</span></div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;<span class="comment">// by the API client thread.</span></div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;<span class="keywordtype">void</span> Debugger::ProcessCommand(Vector&lt;const uint16_t&gt; command,</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;                              <a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* client_data) {</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;  <span class="comment">// Need to cast away const.</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;  CommandMessage message = CommandMessage::New(</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      Vector&lt;uint16_t&gt;(const_cast&lt;uint16_t*&gt;(command.start()),</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;                       command.length()),</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;      client_data);</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  isolate_-&gt;logger()-&gt;DebugTag(<span class="stringliteral">&quot;Put command on command_queue.&quot;</span>);</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;  command_queue_.Put(message);</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;  command_received_.Signal();</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <span class="comment">// Set the debug command break flag to have the command processed.</span></div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;  <span class="keywordflow">if</span> (!isolate_-&gt;debug()-&gt;InDebugger()) {</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    isolate_-&gt;stack_guard()-&gt;DebugCommand();</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  }</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;  MessageDispatchHelperThread* dispatch_thread;</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;  {</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    LockGuard&lt;Mutex&gt; lock_guard(&amp;dispatch_handler_access_);</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    dispatch_thread = message_dispatch_helper_thread_;</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;  }</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  <span class="keywordflow">if</span> (dispatch_thread == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    CallMessageDispatchHandler();</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    dispatch_thread-&gt;Schedule();</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;  }</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;}</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;<span class="keywordtype">bool</span> Debugger::HasCommands() {</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;  <span class="keywordflow">return</span> !command_queue_.IsEmpty();</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;}</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;<span class="keywordtype">void</span> Debugger::EnqueueDebugCommand(<a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* client_data) {</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;  CommandMessage message = CommandMessage::New(Vector&lt;uint16_t&gt;(), client_data);</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;  event_command_queue_.Put(message);</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;  <span class="comment">// Set the debug command break flag to have the command processed.</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  <span class="keywordflow">if</span> (!isolate_-&gt;debug()-&gt;InDebugger()) {</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    isolate_-&gt;stack_guard()-&gt;DebugCommand();</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  }</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;}</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;<span class="keywordtype">bool</span> Debugger::IsDebuggerActive() {</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  LockGuard&lt;RecursiveMutex&gt; with(debugger_access_);</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;  <span class="keywordflow">return</span> message_handler_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a> ||</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      !event_listener_.is_null() ||</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;      force_debugger_active_;</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;}</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;Handle&lt;Object&gt; Debugger::Call(Handle&lt;JSFunction&gt; fun,</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                              Handle&lt;Object&gt; data,</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                              <span class="keywordtype">bool</span>* pending_exception) {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;  <span class="comment">// When calling functions in the debugger prevent it from beeing unloaded.</span></div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;  Debugger::never_unload_debugger_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;  <span class="comment">// Enter the debugger.</span></div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;  EnterDebugger debugger(isolate_);</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;  <span class="keywordflow">if</span> (debugger.FailedToEnter()) {</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="keywordflow">return</span> isolate_-&gt;factory()-&gt;undefined_value();</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;  }</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;  <span class="comment">// Create the execution state.</span></div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;  <span class="keywordtype">bool</span> caught_exception = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;  Handle&lt;Object&gt; exec_state = MakeExecutionState(&amp;caught_exception);</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;  <span class="keywordflow">if</span> (caught_exception) {</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="keywordflow">return</span> isolate_-&gt;factory()-&gt;undefined_value();</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;  }</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;  Handle&lt;Object&gt; argv[] = { exec_state, data };</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;  Handle&lt;Object&gt; result = <a class="code" href="../../d0/d00/classv8_1_1internal_1_1_execution.html#ab623ef38a61a5b92bd1644d881470c33">Execution::Call</a>(</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;      isolate_,</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;      fun,</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      Handle&lt;Object&gt;(isolate_-&gt;debug()-&gt;debug_context_-&gt;global_proxy(),</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;                     isolate_),</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;      <a class="code" href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(argv),</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      argv,</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;      pending_exception);</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;}</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> StubMessageHandler2(<span class="keyword">const</span> <a class="code" href="../../de/dbd/classv8_1_1_debug_1_1_message.html">v8::Debug::Message</a>&amp; message) {</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;  <span class="comment">// Simply ignore message.</span></div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;}</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;<span class="keywordtype">bool</span> Debugger::StartAgent(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">int</span> port,</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                          <span class="keywordtype">bool</span> wait_for_connection) {</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;  <span class="keywordflow">if</span> (wait_for_connection) {</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;    <span class="comment">// Suspend V8 if it is already running or set V8 to suspend whenever</span></div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;    <span class="comment">// it starts.</span></div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    <span class="comment">// Provide stub message handler; V8 auto-continues each suspend</span></div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    <span class="comment">// when there is no message handler; we doesn&#39;t need it.</span></div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    <span class="comment">// Once become suspended, V8 will stay so indefinitely long, until remote</span></div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <span class="comment">// debugger connects and issues &quot;continue&quot; command.</span></div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;    Debugger::message_handler_ = StubMessageHandler2;</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;    <a class="code" href="../../de/d13/classv8_1_1_debug.html#a4bf76677c1d7cbf5081ee9ab49dc4d66">v8::Debug::DebugBreak</a>();</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;  }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <span class="keywordflow">if</span> (agent_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    agent_ = <span class="keyword">new</span> DebuggerAgent(isolate_, name, port);</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    agent_-&gt;Start();</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  }</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;}</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="keywordtype">void</span> Debugger::StopAgent() {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;  <span class="keywordflow">if</span> (agent_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    agent_-&gt;Shutdown();</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    agent_-&gt;Join();</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    <span class="keyword">delete</span> agent_;</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    agent_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;  }</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;}</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;<span class="keywordtype">void</span> Debugger::WaitForAgent() {</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  <span class="keywordflow">if</span> (agent_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>)</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    agent_-&gt;WaitUntilListening();</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;}</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;<span class="keywordtype">void</span> Debugger::CallMessageDispatchHandler() {</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;  <a class="code" href="../../de/d13/classv8_1_1_debug.html#a20e5f2dd13971dc61dd0f383c11537ec">v8::Debug::DebugMessageDispatchHandler</a> handler;</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;  {</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    LockGuard&lt;Mutex&gt; lock_guard(&amp;dispatch_handler_access_);</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    handler = Debugger::debug_message_dispatch_handler_;</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;  }</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;  <span class="keywordflow">if</span> (handler != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    handler();</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;  }</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;}</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;EnterDebugger::EnterDebugger(Isolate* isolate)</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    : isolate_(isolate),</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      prev_(isolate_-&gt;debug()-&gt;debugger_entry()),</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;      it_(isolate_),</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;      has_js_frames_(!it_.done()),</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      save_(isolate_) {</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;  Debug* debug = isolate_-&gt;debug();</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(prev_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a> || !debug-&gt;is_interrupt_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3ad8649a813fc31c90dc7a62d1d568e617">PREEMPT</a>));</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(prev_ != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a> || !debug-&gt;is_interrupt_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3aff699505fa2894108ea9f35f845abe64">DEBUGBREAK</a>));</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  <span class="comment">// Link recursive debugger entry.</span></div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  debug-&gt;set_debugger_entry(<span class="keyword">this</span>);</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;  <span class="comment">// Store the previous break id and frame id.</span></div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  break_id_ = debug-&gt;break_id();</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  break_frame_id_ = debug-&gt;break_frame_id();</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;  <span class="comment">// Create the new break info. If there is no JavaScript frames there is no</span></div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;  <span class="comment">// break frame id.</span></div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  <span class="keywordflow">if</span> (has_js_frames_) {</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    debug-&gt;NewBreak(it_.frame()-&gt;id());</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    debug-&gt;NewBreak(StackFrame::NO_ID);</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;  }</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;  <span class="comment">// Make sure that debugger is loaded and enter the debugger context.</span></div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;  load_failed_ = !debug-&gt;Load();</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;  <span class="keywordflow">if</span> (!load_failed_) {</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <span class="comment">// NOTE the member variable save which saves the previous context before</span></div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    <span class="comment">// this change.</span></div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    isolate_-&gt;set_context(*debug-&gt;debug_context());</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;  }</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;}</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;EnterDebugger::~EnterDebugger() {</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  Debug* debug = isolate_-&gt;debug();</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;  <span class="comment">// Restore to the previous break state.</span></div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;  debug-&gt;SetBreak(break_frame_id_, break_id_);</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;  <span class="comment">// Check for leaving the debugger.</span></div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;  <span class="keywordflow">if</span> (!load_failed_ &amp;&amp; prev_ == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;    <span class="comment">// Clear mirror cache when leaving the debugger. Skip this if there is a</span></div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    <span class="comment">// pending exception as clearing the mirror cache calls back into</span></div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    <span class="comment">// JavaScript. This can happen if the v8::Debug::Call is used in which</span></div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;    <span class="comment">// case the exception should end up in the calling code.</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;    <span class="keywordflow">if</span> (!isolate_-&gt;has_pending_exception()) {</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;      <span class="comment">// Try to avoid any pending debug break breaking in the clear mirror</span></div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;      <span class="comment">// cache JavaScript code.</span></div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <span class="keywordflow">if</span> (isolate_-&gt;stack_guard()-&gt;IsDebugBreak()) {</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;        debug-&gt;set_interrupts_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3aff699505fa2894108ea9f35f845abe64">DEBUGBREAK</a>);</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;        isolate_-&gt;stack_guard()-&gt;Continue(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3aff699505fa2894108ea9f35f845abe64">DEBUGBREAK</a>);</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;      }</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;      debug-&gt;ClearMirrorCache();</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    }</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    <span class="comment">// Request preemption and debug break when leaving the last debugger entry</span></div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    <span class="comment">// if any of these where recorded while debugging.</span></div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <span class="keywordflow">if</span> (debug-&gt;is_interrupt_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3ad8649a813fc31c90dc7a62d1d568e617">PREEMPT</a>)) {</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <span class="comment">// This re-scheduling of preemption is to avoid starvation in some</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      <span class="comment">// debugging scenarios.</span></div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;      debug-&gt;clear_interrupt_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3ad8649a813fc31c90dc7a62d1d568e617">PREEMPT</a>);</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      isolate_-&gt;stack_guard()-&gt;Preempt();</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    }</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    <span class="keywordflow">if</span> (debug-&gt;is_interrupt_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3aff699505fa2894108ea9f35f845abe64">DEBUGBREAK</a>)) {</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;      debug-&gt;clear_interrupt_pending(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3aff699505fa2894108ea9f35f845abe64">DEBUGBREAK</a>);</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      isolate_-&gt;stack_guard()-&gt;DebugBreak();</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    }</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    <span class="comment">// If there are commands in the queue when leaving the debugger request</span></div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="comment">// that these commands are processed.</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;    <span class="keywordflow">if</span> (isolate_-&gt;debugger()-&gt;HasCommands()) {</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;      isolate_-&gt;stack_guard()-&gt;DebugCommand();</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;    }</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="comment">// If leaving the debugger with the debugger no longer active unload it.</span></div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;    <span class="keywordflow">if</span> (!isolate_-&gt;debugger()-&gt;IsDebuggerActive()) {</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;      isolate_-&gt;debugger()-&gt;UnloadDebugger();</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;    }</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;  }</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  <span class="comment">// Leaving this debugger entry.</span></div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  debug-&gt;set_debugger_entry(prev_);</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;}</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;MessageImpl MessageImpl::NewEvent(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">DebugEvent</a> event,</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;                                  <span class="keywordtype">bool</span> running,</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;                                  Handle&lt;JSObject&gt; exec_state,</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                                  Handle&lt;JSObject&gt; event_data) {</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;  MessageImpl <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1caa5af05ec5fc8823953bb5436e4bc7">message</a>(<span class="keyword">true</span>, event, running,</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                      exec_state, event_data, Handle&lt;String&gt;(), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1caa5af05ec5fc8823953bb5436e4bc7">message</a>;</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;}</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;MessageImpl MessageImpl::NewResponse(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">DebugEvent</a> event,</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;                                     <span class="keywordtype">bool</span> running,</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;                                     Handle&lt;JSObject&gt; exec_state,</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;                                     Handle&lt;JSObject&gt; event_data,</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;                                     Handle&lt;String&gt; response_json,</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;                                     <a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* client_data) {</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  MessageImpl <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1caa5af05ec5fc8823953bb5436e4bc7">message</a>(<span class="keyword">false</span>, event, running,</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;                      exec_state, event_data, response_json, client_data);</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1caa5af05ec5fc8823953bb5436e4bc7">message</a>;</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;}</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;MessageImpl::MessageImpl(<span class="keywordtype">bool</span> is_event,</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;                         <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">DebugEvent</a> event,</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;                         <span class="keywordtype">bool</span> running,</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;                         Handle&lt;JSObject&gt; exec_state,</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;                         Handle&lt;JSObject&gt; event_data,</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                         Handle&lt;String&gt; response_json,</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;                         <a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* client_data)</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;    : is_event_(is_event),</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      event_(event),</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      running_(running),</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;      exec_state_(exec_state),</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;      event_data_(event_data),</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      response_json_(response_json),</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;      client_data_(client_data) {}</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;<span class="keywordtype">bool</span> MessageImpl::IsEvent()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  <span class="keywordflow">return</span> is_event_;</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;}</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;<span class="keywordtype">bool</span> MessageImpl::IsResponse()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;  <span class="keywordflow">return</span> !is_event_;</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;}</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">DebugEvent</a> MessageImpl::GetEvent()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  <span class="keywordflow">return</span> event_;</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;}</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;<span class="keywordtype">bool</span> MessageImpl::WillStartRunning()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;  <span class="keywordflow">return</span> running_;</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;}</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> MessageImpl::GetExecutionState()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(exec_state_);</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;}</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* MessageImpl::GetIsolate()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>*<span class="keyword">&gt;</span>(exec_state_-&gt;GetIsolate());</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;}</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> MessageImpl::GetEventData()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(event_data_);</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;}</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> MessageImpl::GetJSON()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;  <a class="code" href="../../d0/d4d/classv8_1_1_escapable_handle_scope.html">v8::EscapableHandleScope</a> scope(</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;      reinterpret_cast&lt;v8::Isolate*&gt;(event_data_-&gt;GetIsolate()));</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;  <span class="keywordflow">if</span> (IsEvent()) {</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;    <span class="comment">// Call toJSONProtocol on the debug event object.</span></div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    Handle&lt;Object&gt; fun = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a094883855ef91b4be63528082a274c21">GetProperty</a>(event_data_, <span class="stringliteral">&quot;toJSONProtocol&quot;</span>);</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    <span class="keywordflow">if</span> (!fun-&gt;IsJSFunction()) {</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a>();</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    }</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;    <span class="keywordtype">bool</span> caught_exception;</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    Handle&lt;Object&gt; json = <a class="code" href="../../d0/d00/classv8_1_1internal_1_1_execution.html#a9fc44c1cb13aa88e94ba9a8b256eaa7e">Execution::TryCall</a>(Handle&lt;JSFunction&gt;::cast(fun),</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;                                             event_data_,</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;                                             0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>, &amp;caught_exception);</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    <span class="keywordflow">if</span> (caught_exception || !json-&gt;IsString()) {</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a>();</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;    }</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;    <span class="keywordflow">return</span> scope.Escape(<a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">Handle&lt;String&gt;::cast</a>(json)));</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(response_json_);</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;  }</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;}</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Context&gt;</a> MessageImpl::GetEventContext()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;  Isolate* isolate = event_data_-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a61a2432b942bc6d4db1c06075097c935">GetIsolate</a>();</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Context&gt;</a> context = GetDebugEventContext(isolate);</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;  <span class="comment">// Isolate::context() may be NULL when &quot;script collected&quot; event occures.</span></div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!context.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#a821ace5666d33802aff59f69f72901dd">IsEmpty</a>() || event_ == <a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba7af8b3b962aadf798e813a27173fc4c3">v8::ScriptCollected</a>);</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;  <span class="keywordflow">return</span> context;</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;}</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;<a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* MessageImpl::GetClientData()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  <span class="keywordflow">return</span> client_data_;</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;}</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;EventDetailsImpl::EventDetailsImpl(<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">DebugEvent</a> event,</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;                                   Handle&lt;JSObject&gt; exec_state,</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;                                   Handle&lt;JSObject&gt; event_data,</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;                                   Handle&lt;Object&gt; callback_data,</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;                                   <a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* client_data)</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    : event_(event),</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;      exec_state_(exec_state),</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;      event_data_(event_data),</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      callback_data_(callback_data),</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;      client_data_(client_data) {}</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;<a class="code" href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">DebugEvent</a> EventDetailsImpl::GetEvent()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <span class="keywordflow">return</span> event_;</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;}</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> EventDetailsImpl::GetExecutionState()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(exec_state_);</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;}</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> EventDetailsImpl::GetEventData()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(event_data_);</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;}</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Context&gt;</a> EventDetailsImpl::GetEventContext()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;  <span class="keywordflow">return</span> GetDebugEventContext(exec_state_-&gt;GetIsolate());</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;}</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> EventDetailsImpl::GetCallbackData()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(callback_data_);</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;}</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;<a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* EventDetailsImpl::GetClientData()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;  <span class="keywordflow">return</span> client_data_;</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;}</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;CommandMessage::CommandMessage() : text_(Vector&lt;<a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&gt;::empty()),</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;                                   client_data_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;}</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;CommandMessage::CommandMessage(<span class="keyword">const</span> Vector&lt;uint16_t&gt;&amp; text,</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;                               <a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* data)</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    : text_(text),</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      client_data_(data) {</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;}</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;CommandMessage::~CommandMessage() {</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;}</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;<span class="keywordtype">void</span> CommandMessage::Dispose() {</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;  text_.Dispose();</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;  <span class="keyword">delete</span> client_data_;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;  client_data_ = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;}</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;CommandMessage CommandMessage::New(<span class="keyword">const</span> Vector&lt;uint16_t&gt;&amp; command,</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;                                   <a class="code" href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a>* data) {</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <span class="keywordflow">return</span> CommandMessage(command.Clone(), data);</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;}</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;CommandMessageQueue::CommandMessageQueue(<span class="keywordtype">int</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae491df1d2c24e3751c368155c20fe5ef">size</a>) : start_(0), <a class="code" href="../../de/dd0/v8conversions_8cc.html#a03fd641a87e0199b429070914b680b7f">end_</a>(0),</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;                                                     size_(size) {</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  messages_ = NewArray&lt;CommandMessage&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae491df1d2c24e3751c368155c20fe5ef">size</a>);</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;}</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;CommandMessageQueue::~CommandMessageQueue() {</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  <span class="keywordflow">while</span> (!IsEmpty()) {</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    CommandMessage m = Get();</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    m.Dispose();</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;  }</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">DeleteArray</a>(messages_);</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;}</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;CommandMessage CommandMessageQueue::Get() {</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!IsEmpty());</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;  <span class="keywordtype">int</span> result = start_;</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;  start_ = (start_ + 1) % size_;</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;  <span class="keywordflow">return</span> messages_[result];</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;}</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;<span class="keywordtype">void</span> CommandMessageQueue::Put(<span class="keyword">const</span> CommandMessage&amp; message) {</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../de/dd0/v8conversions_8cc.html#a03fd641a87e0199b429070914b680b7f">end_</a> + 1) % size_ == start_) {</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    Expand();</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;  }</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  messages_[<a class="code" href="../../de/dd0/v8conversions_8cc.html#a03fd641a87e0199b429070914b680b7f">end_</a>] = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1caa5af05ec5fc8823953bb5436e4bc7">message</a>;</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;  <a class="code" href="../../de/dd0/v8conversions_8cc.html#a03fd641a87e0199b429070914b680b7f">end_</a> = (<a class="code" href="../../de/dd0/v8conversions_8cc.html#a03fd641a87e0199b429070914b680b7f">end_</a> + 1) % size_;</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;}</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;<span class="keywordtype">void</span> CommandMessageQueue::Expand() {</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;  CommandMessageQueue new_queue(size_ * 2);</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <span class="keywordflow">while</span> (!IsEmpty()) {</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;    new_queue.Put(Get());</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  }</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  CommandMessage* array_to_free = messages_;</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  *<span class="keyword">this</span> = new_queue;</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  new_queue.messages_ = array_to_free;</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <span class="comment">// Make the new_queue empty so that it doesn&#39;t call Dispose on any messages.</span></div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  new_queue.start_ = new_queue.end_;</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;  <span class="comment">// Automatic destructor called on new_queue, freeing array_to_free.</span></div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;}</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;LockingCommandMessageQueue::LockingCommandMessageQueue(Logger* logger, <span class="keywordtype">int</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae491df1d2c24e3751c368155c20fe5ef">size</a>)</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    : logger_(logger), queue_(size) {}</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;<span class="keywordtype">bool</span> LockingCommandMessageQueue::IsEmpty()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;  LockGuard&lt;Mutex&gt; lock_guard(&amp;mutex_);</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;  <span class="keywordflow">return</span> queue_.IsEmpty();</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;}</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;CommandMessage LockingCommandMessageQueue::Get() {</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;  LockGuard&lt;Mutex&gt; lock_guard(&amp;mutex_);</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;  CommandMessage result = queue_.Get();</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;  logger_-&gt;DebugEvent(<span class="stringliteral">&quot;Get&quot;</span>, result.text());</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;}</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;<span class="keywordtype">void</span> LockingCommandMessageQueue::Put(<span class="keyword">const</span> CommandMessage&amp; message) {</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;  LockGuard&lt;Mutex&gt; lock_guard(&amp;mutex_);</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;  queue_.Put(message);</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;  logger_-&gt;DebugEvent(<span class="stringliteral">&quot;Put&quot;</span>, message.text());</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;}</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;<span class="keywordtype">void</span> LockingCommandMessageQueue::Clear() {</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;  LockGuard&lt;Mutex&gt; lock_guard(&amp;mutex_);</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;  queue_.Clear();</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;}</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;MessageDispatchHelperThread::MessageDispatchHelperThread(Isolate* isolate)</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    : Thread(<span class="stringliteral">&quot;v8:MsgDispHelpr&quot;</span>),</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;      isolate_(isolate), sem_(0),</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;      already_signalled_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>) {</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;}</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;<span class="keywordtype">void</span> MessageDispatchHelperThread::Schedule() {</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;  {</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    LockGuard&lt;Mutex&gt; lock_guard(&amp;mutex_);</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;    <span class="keywordflow">if</span> (already_signalled_) {</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;    }</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    already_signalled_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;  }</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  sem_.Signal();</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;}</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;<span class="keywordtype">void</span> MessageDispatchHelperThread::Run() {</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;    sem_.Wait();</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;    {</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;      LockGuard&lt;Mutex&gt; lock_guard(&amp;mutex_);</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;      already_signalled_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    }</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    {</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;      Locker locker(reinterpret_cast&lt;v8::Isolate*&gt;(isolate_));</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      isolate_-&gt;debugger()-&gt;CallMessageDispatchHandler();</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;    }</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  }</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;}</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<span class="preprocessor">#endif  // ENABLE_DEBUGGER_SUPPORT</span></div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;} }  <span class="comment">// namespace v8::internal</span></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac7f0eb0e10bc8bbb03c793ea1256e329"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">v8::internal::Address</a></div><div class="ttdeci">byte * Address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00186">globals.h:186</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aa93c2c60a1492707ba7686a2d1579a32"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">v8::internal::NULL</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00269">flags.cc:269</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_global_handles_html_a1e54f5d6683a8b2b00da16a2de85bba9"><div class="ttname"><a href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a1e54f5d6683a8b2b00da16a2de85bba9">v8::internal::GlobalHandles::Destroy</a></div><div class="ttdeci">static void Destroy(Object **location)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d15/global-handles_8cc_source.html#l00495">global-handles.cc:495</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a97d86e98faf1fa957813fcad98fecf21adc7588f17692aa631f375290d50a2c8e"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a97d86e98faf1fa957813fcad98fecf21adc7588f17692aa631f375290d50a2c8e">v8::internal::INTERNAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00478">v8globals.h:478</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_builtins_html_a1b98e6d8039a53752fe6258a1d4b63f1"><div class="ttname"><a href="../../d5/d99/classv8_1_1internal_1_1_builtins.html#a1b98e6d8039a53752fe6258a1d4b63f1">v8::internal::Builtins::builtin</a></div><div class="ttdeci">Code * builtin(Name name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/builtins_8h_source.html#l00322">builtins.h:322</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_code_html_aa10c9e8951b8ccf714a59ec321bdac5b"><div class="ttname"><a href="../../d3/d0e/classv8_1_1internal_1_1_code.html#aa10c9e8951b8ccf714a59ec321bdac5b">v8::internal::Code::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l05208">objects.h:5208</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_memory_html_a7ce214086a5711e63428a2c0a66d2e49"><div class="ttname"><a href="../../d6/dee/classv8_1_1internal_1_1_memory.html#a7ce214086a5711e63428a2c0a66d2e49">v8::internal::Memory::Object_at</a></div><div class="ttdeci">static Object *&amp; Object_at(Address addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de9/v8memory_8h_source.html#l00083">v8memory.h:83</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_a7ecb839199ee379f9371723072e4148a"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a7ecb839199ee379f9371723072e4148a">v8::internal::Smi::value</a></div><div class="ttdeci">int value()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01204">objects-inl.h:1204</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a521544c43b8fe1dae91883cd28080da3aff699505fa2894108ea9f35f845abe64"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3aff699505fa2894108ea9f35f845abe64">v8::internal::DEBUGBREAK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d01/execution_8h_source.html#l00040">execution.h:40</a></div></div>
<div class="ttc" id="classv8_1_1_function_html_aa8bcdd2f981cf745827591403639af62"><div class="ttname"><a href="../../d5/d54/classv8_1_1_function.html#aa8bcdd2f981cf745827591403639af62">v8::Function::Call</a></div><div class="ttdeci">Local&lt; Value &gt; Call(Handle&lt; Value &gt; recv, int argc, Handle&lt; Value &gt; argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03996">api.cc:3996</a></div></div>
<div class="ttc" id="api_8h_html"><div class="ttname"><a href="../../dc/d65/api_8h.html">api.h</a></div></div>
<div class="ttc" id="globals_8h_html_adafd98459092322383b0f5ebcc7c342f"><div class="ttname"><a href="../../d5/d87/globals_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a></div><div class="ttdeci">#define V8PRIxPTR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00228">globals.h:228</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_execution_html_a9fc44c1cb13aa88e94ba9a8b256eaa7e"><div class="ttname"><a href="../../d0/d00/classv8_1_1internal_1_1_execution.html#a9fc44c1cb13aa88e94ba9a8b256eaa7e">v8::internal::Execution::TryCall</a></div><div class="ttdeci">static Handle&lt; Object &gt; TryCall(Handle&lt; JSFunction &gt; func, Handle&lt; Object &gt; receiver, int argc, Handle&lt; Object &gt; argv[], bool *caught_exception)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7d/execution_8cc_source.html#l00199">execution.cc:199</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_compiler_html_aa0ce96716b7496a38e648cb50a7d9ba5"><div class="ttname"><a href="../../d6/dd3/classv8_1_1internal_1_1_compiler.html#aa0ce96716b7496a38e648cb50a7d9ba5">v8::internal::Compiler::CompileScript</a></div><div class="ttdeci">static Handle&lt; SharedFunctionInfo &gt; CompileScript(Handle&lt; String &gt; source, Handle&lt; Object &gt; script_name, int line_offset, int column_offset, bool is_shared_cross_origin, Handle&lt; Context &gt; context, v8::Extension *extension, ScriptDataImpl **cached_data, CachedDataMode cached_data_mode, NativesFlag is_natives_code)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/compiler_8cc_source.html#l00917">compiler.cc:917</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_compiler_html_aa365e7e1d39cb38be06d8d64ee02544f"><div class="ttname"><a href="../../d6/dd3/classv8_1_1internal_1_1_compiler.html#aa365e7e1d39cb38be06d8d64ee02544f">v8::internal::Compiler::GetCodeForDebugging</a></div><div class="ttdeci">static Handle&lt; Code &gt; GetCodeForDebugging(Handle&lt; JSFunction &gt; function)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/compiler_8cc_source.html#l00712">compiler.cc:712</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a29dd6ffe8f62d1541ef1c8056c028e9c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a29dd6ffe8f62d1541ef1c8056c028e9c">v8::internal::true</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths true</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00208">flags.cc:208</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5da70e56552dee3c4945a0a410895567"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5da70e56552dee3c4945a0a410895567">v8::internal::PrintF</a></div><div class="ttdeci">void PrintF(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8a/v8utils_8cc_source.html#l00040">v8utils.cc:40</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_object_html_a40e056f11454ab7441ad5de3b82b9cf1"><div class="ttname"><a href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a40e056f11454ab7441ad5de3b82b9cf1">v8::internal::HeapObject::GetIsolate</a></div><div class="ttdeci">Isolate * GetIsolate()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01331">objects-inl.h:1331</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a65b4d97cc9755f7f99556dbe87d829ee"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">v8::TryCatch::Exception</a></div><div class="ttdeci">Local&lt; Value &gt; Exception() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01923">api.cc:1923</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a15d9f2b57d7fc06e12259c976c7d66fc"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">v8::Object::Get</a></div><div class="ttdeci">Local&lt; Value &gt; Get(Handle&lt; Value &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03139">api.cc:3139</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_a53259c85a9a7f54c354c7871cb340073"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">v8::internal::Smi::FromInt</a></div><div class="ttdeci">static Smi * FromInt(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01209">objects-inl.h:1209</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_compiler_html_a7ef53fc883248fd115cf4aeed4b658e5"><div class="ttname"><a href="../../d6/dd3/classv8_1_1internal_1_1_compiler.html#a7ef53fc883248fd115cf4aeed4b658e5">v8::internal::Compiler::GetUnoptimizedCode</a></div><div class="ttdeci">static Handle&lt; Code &gt; GetUnoptimizedCode(Handle&lt; JSFunction &gt; function)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/compiler_8cc_source.html#l00651">compiler.cc:651</a></div></div>
<div class="ttc" id="debug_8h_html"><div class="ttname"><a href="../../db/d16/debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="messages_8h_html"><div class="ttname"><a href="../../d5/d48/messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_natives_collection_html_ac0c1aecbfc8846c8b77b9495284a40e0"><div class="ttname"><a href="../../da/d85/classv8_1_1internal_1_1_natives_collection.html#ac0c1aecbfc8846c8b77b9495284a40e0">v8::internal::NativesCollection::GetIndex</a></div><div class="ttdeci">static int GetIndex(const char *name)</div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a68f455077e74f15d67c6cc1664dbc266"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">v8::TryCatch::HasCaught</a></div><div class="ttdeci">bool HasCaught() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01901">api.cc:1901</a></div></div>
<div class="ttc" id="full-codegen_8h_html"><div class="ttname"><a href="../../d5/d3f/full-codegen_8h.html">full-codegen.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_call_function_stub_html_aff2843de2dd831661966e72150d63b6d"><div class="ttname"><a href="../../d7/dc9/classv8_1_1internal_1_1_call_function_stub.html#aff2843de2dd831661966e72150d63b6d">v8::internal::CallFunctionStub::ExtractArgcFromMinorKey</a></div><div class="ttdeci">static int ExtractArgcFromMinorKey(int minor_key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d9c/code-stubs_8h_source.html#l01637">code-stubs.h:1637</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a105546b82eb2e99e172dda630ee4fdc1a6c0c338932b450afc64a0224b4d47baa"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a105546b82eb2e99e172dda630ee4fdc1a6c0c338932b450afc64a0224b4d47baa">v8::internal::DEBUG_BREAK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00274">objects.h:274</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_html_a306bd25814bd1c8e9a575e1edb78a46c"><div class="ttname"><a href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">v8::internal::Handle::cast</a></div><div class="ttdeci">static Handle&lt; T &gt; cast(Handle&lt; S &gt; that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d23/handles_8h_source.html#l00075">handles.h:75</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_assembler_html_a52dbfb404059e4634d05ca2f3cce9959"><div class="ttname"><a href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a52dbfb404059e4634d05ca2f3cce9959">v8::internal::Assembler::kPatchDebugBreakSlotReturnOffset</a></div><div class="ttdeci">static const int kPatchDebugBreakSlotReturnOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00877">assembler-arm.h:877</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260">v8::internal::STUB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d24/hydrogen_8h_source.html#l00560">hydrogen.h:560</a></div></div>
<div class="ttc" id="namespacev8_html_ac08707d61d5d7a69b2a5001ba10ed79ba54957cf47b2c20cda66ae848d2b3aacb"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba54957cf47b2c20cda66ae848d2b3aacb">v8::Break</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00040">v8-debug.h:40</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_natives_collection_html_a67768c09e485fa0d4152c05147388ef6"><div class="ttname"><a href="../../da/d85/classv8_1_1internal_1_1_natives_collection.html#a67768c09e485fa0d4152c05147388ef6">v8::internal::NativesCollection::GetScriptName</a></div><div class="ttdeci">static Vector&lt; const char &gt; GetScriptName(int index)</div></div>
<div class="ttc" id="ic-inl_8h_html"><div class="ttname"><a href="../../dd/dd5/ic-inl_8h.html">ic-inl.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_af14562a565b0f6fce9a146afe6dc0130a805f8ef70991af2fd1a03fc054e80e50"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#af14562a565b0f6fce9a146afe6dc0130a805f8ef70991af2fd1a03fc054e80e50">v8::internal::RUNTIME_FUNCTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d9d/serialize_8h_source.html#l00041">serialize.h:41</a></div></div>
<div class="ttc" id="namespacev8_html_ac08707d61d5d7a69b2a5001ba10ed79ba88a18e11ec269de0e91887c301bccd7e"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba88a18e11ec269de0e91887c301bccd7e">v8::BreakForCommand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00046">v8-debug.h:46</a></div></div>
<div class="ttc" id="classv8_1_1_exception_html"><div class="ttname"><a href="../../da/d6a/classv8_1_1_exception.html">v8::Exception</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03997">v8.h:3997</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aafde67e17c0eff2ae6a6bef6b217148d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aafde67e17c0eff2ae6a6bef6b217148d">v8::internal::Object</a></div><div class="ttdeci">kSerializedDataOffset Object</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l05016">objects-inl.h:5016</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a1caa5af05ec5fc8823953bb5436e4bc7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a1caa5af05ec5fc8823953bb5436e4bc7">v8::internal::message</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function not JSFunction itself flushes the cache of optimized code for closures on every GC functions with arguments object maximum number of escape analysis fix point iterations allow uint32 values on optimize frames if they are used only in safe operations track concurrent recompilation artificial compilation delay in ms concurrent on stack replacement do not emit check maps for constant values that have a leaf deoptimize the optimized code if the layout of the maps changes number of stack frames inspected by the profiler percentage of ICs that must have type info to allow optimization extra verbose compilation tracing generate extra emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of VFP3 instructions if available enable use of NEON instructions if enable use of SDIV and UDIV instructions if enable loading bit constant by means of movw movt instruction enable unaligned accesses for enable use of d16 d31 registers on ARM this requires VFP3 force all emitted branches to be in long expose natives in global object expose freeBuffer extension expose gc extension under the specified name expose externalize string extension number of stack frames to capture disable builtin natives files print name of functions for which code is generated use random jit cookie to mask large constants trace lazy optimization use adaptive optimizations always try to OSR functions trace optimize function deoptimization minimum length for automatic enable preparsing maximum number of optimization attempts before giving up cache prototype transitions trace debugging JSON request response trace out of bounds accesses to external arrays trace_js_array_abuse automatically set the debug break flag when debugger commands are in the queue abort by crashing maximum length of function source code printed in a stack trace max size of the new max size of the old max size of executable always perform global GCs print one trace line following each garbage collection do not print trace line after scavenger collection print statistics of the maximum memory committed for the heap in only print modified registers Don t break for ASM_UNIMPLEMENTED_BREAK macros print stack trace when an illegal exception is thrown randomize hashes to avoid predictable hash Fixed seed to use to hash property Print the time it takes to deserialize the snapshot testing_bool_flag testing_int_flag string flag tmp file in which to serialize heap Print the time it takes to lazily compile hydrogen code stubs concurrent_recompilation concurrent_sweeping Print usage message</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00665">flags.cc:665</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_isolate_html_a3d230319268e1c88dc3e54cbddccf643"><div class="ttname"><a href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a3d230319268e1c88dc3e54cbddccf643">v8::internal::Isolate::builtins</a></div><div class="ttdeci">Builtins * builtins()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l00948">isolate.h:948</a></div></div>
<div class="ttc" id="namespacev8_html_ac08707d61d5d7a69b2a5001ba10ed79babafd77f9b82992d38f1146bf5f5b5f0d"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79babafd77f9b82992d38f1146bf5f5b5f0d">v8::BeforeCompile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00043">v8-debug.h:43</a></div></div>
<div class="ttc" id="namespacev8_html_ac08707d61d5d7a69b2a5001ba10ed79b"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79b">v8::DebugEvent</a></div><div class="ttdeci">DebugEvent</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00039">v8-debug.h:39</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a423de8f25d414ef1b7dcd541a75f7063"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a423de8f25d414ef1b7dcd541a75f7063">v8::internal::kMaxInt</a></div><div class="ttdeci">const int kMaxInt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00248">globals.h:248</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_assembler_html_aa26cc13532faa3509c95448e77737b96"><div class="ttname"><a href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#aa26cc13532faa3509c95448e77737b96">v8::internal::Assembler::target_address_at</a></div><div class="ttdeci">static Address target_address_at(Address pc, ConstantPoolArray *constant_pool)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/assembler-arm-inl_8h_source.html#l00437">assembler-arm-inl.h:437</a></div></div>
<div class="ttc" id="classv8_1_1_weak_callback_data_html_a2e977c2fd59334d35d3b4a01284dc12d"><div class="ttname"><a href="../../db/d0f/classv8_1_1_weak_callback_data.html#a2e977c2fd59334d35d3b4a01284dc12d">v8::WeakCallbackData::GetValue</a></div><div class="ttdeci">V8_INLINE Local&lt; T &gt; GetValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00450">v8.h:450</a></div></div>
<div class="ttc" id="classv8_1_1_debug_html_a20e5f2dd13971dc61dd0f383c11537ec"><div class="ttname"><a href="../../de/d13/classv8_1_1_debug.html#a20e5f2dd13971dc61dd0f383c11537ec">v8::Debug::DebugMessageDispatchHandler</a></div><div class="ttdeci">void(* DebugMessageDispatchHandler)()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00183">v8-debug.h:183</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_compiler_html_ad351dfbf474320b7771eac4b0d2cb5a2"><div class="ttname"><a href="../../d6/dd3/classv8_1_1internal_1_1_compiler.html#ad351dfbf474320b7771eac4b0d2cb5a2">v8::internal::Compiler::EnsureCompiled</a></div><div class="ttdeci">static bool EnsureCompiled(Handle&lt; JSFunction &gt; function, ClearExceptionFlag flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/compiler_8cc_source.html#l00687">compiler.cc:687</a></div></div>
<div class="ttc" id="compilation-cache_8h_html"><div class="ttname"><a href="../../de/dea/compilation-cache_8h.html">compilation-cache.h</a></div></div>
<div class="ttc" id="checks_8h_html_ac22830a985e1daed0c9eadba8c6f606e"><div class="ttname"><a href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00329">checks.h:329</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_assembler_html_a2d61989576b350e1547018b45c8fd722"><div class="ttname"><a href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a2d61989576b350e1547018b45c8fd722">v8::internal::Assembler::kPatchReturnSequenceAddressOffset</a></div><div class="ttdeci">static const int kPatchReturnSequenceAddressOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00868">assembler-arm.h:868</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_standard_frame_constants_html_a2f62db6da071ad0173084095f53e6967"><div class="ttname"><a href="../../db/dc7/classv8_1_1internal_1_1_standard_frame_constants.html#a2f62db6da071ad0173084095f53e6967">v8::internal::StandardFrameConstants::kContextOffset</a></div><div class="ttdeci">static const int kContextOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db8/frames_8h_source.html#l00185">frames.h:185</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_script_html_af5d25c39e7d38591e52ee53301bb283d"><div class="ttname"><a href="../../d9/da4/classv8_1_1internal_1_1_script.html#af5d25c39e7d38591e52ee53301bb283d">v8::internal::Script::cast</a></div><div class="ttdeci">static Script * cast(Object *obj)</div></div>
<div class="ttc" id="classv8_1_1_debug_html_ad1ce755bf621a7442606f9fe5813363a"><div class="ttname"><a href="../../de/d13/classv8_1_1_debug.html#ad1ce755bf621a7442606f9fe5813363a">v8::Debug::MessageHandler2</a></div><div class="ttdeci">void(* MessageHandler2)(const Message &amp;message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00173">v8-debug.h:173</a></div></div>
<div class="ttc" id="namespaceunibrow_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">unibrow::uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/unicode_8cc_source.html#l00046">unicode.cc:46</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_shared_function_info_html_acf9b9f7e9418e47ef67bb1e9aacb3bb7"><div class="ttname"><a href="../../db/dc5/classv8_1_1internal_1_1_shared_function_info.html#acf9b9f7e9418e47ef67bb1e9aacb3bb7">v8::internal::SharedFunctionInfo::cast</a></div><div class="ttdeci">static SharedFunctionInfo * cast(Object *obj)</div></div>
<div class="ttc" id="namespacev8_html_ac08707d61d5d7a69b2a5001ba10ed79bace1d56bc37c286ed08718089a72b1419"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79bace1d56bc37c286ed08718089a72b1419">v8::AfterCompile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00044">v8-debug.h:44</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_aef3852f4561ef81187a88e028968fe54aa46acb614af63a7a3d6b08baa9d7fb7a"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#aef3852f4561ef81187a88e028968fe54aa46acb614af63a7a3d6b08baa9d7fb7a">v8::String::kNormalString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01864">v8.h:1864</a></div></div>
<div class="ttc" id="checks_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00075">checks.h:75</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a094883855ef91b4be63528082a274c21"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a094883855ef91b4be63528082a274c21">v8::internal::GetProperty</a></div><div class="ttdeci">Handle&lt; Object &gt; GetProperty(Handle&lt; JSReceiver &gt; obj, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d59/handles_8cc_source.html#l00196">handles.cc:196</a></div></div>
<div class="ttc" id="bootstrapper_8h_html"><div class="ttname"><a href="../../d9/d41/bootstrapper_8h.html">bootstrapper.h</a></div></div>
<div class="ttc" id="isolate_8h_html_ad123f50fdedfa8f5eb3a8065cdd3441a"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html#ad123f50fdedfa8f5eb3a8065cdd3441a">RETURN_IF_EMPTY_HANDLE_VALUE</a></div><div class="ttdeci">#define RETURN_IF_EMPTY_HANDLE_VALUE(isolate, call, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l00137">isolate.h:137</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_abd7228db8201e7f65153a896fe8de9bd"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">v8::internal::Smi::cast</a></div><div class="ttdeci">static Smi * cast(Object *object)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5d5c472c11167548fa55bcf53c3aa40baf2cdb1cfe5504a05264f8ed27db54881"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5d5c472c11167548fa55bcf53c3aa40baf2cdb1cfe5504a05264f8ed27db54881">v8::internal::NO_CACHED_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd1/compiler_8h_source.html#l00049">compiler.h:49</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_a61a2432b942bc6d4db1c06075097c935"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#a61a2432b942bc6d4db1c06075097c935">v8::Context::GetIsolate</a></div><div class="ttdeci">v8::Isolate * GetIsolate()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05233">api.cc:5233</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_message_handler_html_a036f2f2932b841c9501dd6a9a05f0417"><div class="ttname"><a href="../../de/dab/classv8_1_1internal_1_1_message_handler.html#a036f2f2932b841c9501dd6a9a05f0417">v8::internal::MessageHandler::MakeMessageObject</a></div><div class="ttdeci">static Handle&lt; JSMessageObject &gt; MakeMessageObject(Isolate *isolate, const char *type, MessageLocation *loc, Vector&lt; Handle&lt; Object &gt; &gt; args, Handle&lt; JSArray &gt; stack_frames)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/messages_8cc_source.html#l00059">messages.cc:59</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab8ef12fab634c171394422d0ee8baf94"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab8ef12fab634c171394422d0ee8baf94">v8::internal::byte</a></div><div class="ttdeci">uint8_t byte</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00185">globals.h:185</a></div></div>
<div class="ttc" id="compiler_8h_html"><div class="ttname"><a href="../../d4/dd1/compiler_8h.html">compiler.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a9f30ccf59233403783321902193ac283"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a9f30ccf59233403783321902193ac283">v8::internal::StackFrame</a></div><div class="ttdeci">HANDLE HANDLE LPSTACKFRAME64 StackFrame</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/platform-win32_8cc_source.html#l01082">platform-win32.cc:1082</a></div></div>
<div class="ttc" id="checks_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00052">checks.h:52</a></div></div>
<div class="ttc" id="ic_8h_html"><div class="ttname"><a href="../../d6/d32/ic_8h.html">ic.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5adc5ec2f1a2af41381abab75250b1c8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5adc5ec2f1a2af41381abab75250b1c8">v8::internal::mode</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function not JSFunction itself flushes the cache of optimized code for closures on every GC functions with arguments object maximum number of escape analysis fix point iterations allow uint32 values on optimize frames if they are used only in safe operations track concurrent recompilation artificial compilation delay in ms concurrent on stack replacement do not emit check maps for constant values that have a leaf deoptimize the optimized code if the layout of the maps changes number of stack frames inspected by the profiler percentage of ICs that must have type info to allow optimization extra verbose compilation tracing generate extra emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of VFP3 instructions if available enable use of NEON instructions if enable use of SDIV and UDIV instructions if enable loading bit constant by means of movw movt instruction enable unaligned accesses for enable use of d16 d31 registers on ARM this requires VFP3 force all emitted branches to be in long mode(MIPS only)&quot;)  DEFINE_string(expose_natives_as</div></div>
<div class="ttc" id="deoptimizer_8h_html"><div class="ttname"><a href="../../d1/d23/deoptimizer_8h.html">deoptimizer.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae491df1d2c24e3751c368155c20fe5ef"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae491df1d2c24e3751c368155c20fe5ef">v8::internal::size</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object size</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00211">flags.cc:211</a></div></div>
<div class="ttc" id="classv8_1_1_weak_callback_data_html_a68b90fa1cb3304322810b10fb414f6b3"><div class="ttname"><a href="../../db/d0f/classv8_1_1_weak_callback_data.html#a68b90fa1cb3304322810b10fb414f6b3">v8::WeakCallbackData::GetIsolate</a></div><div class="ttdeci">V8_INLINE Isolate * GetIsolate() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00449">v8.h:449</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_a26ae97c946e709188bcfbadcbadda2c3"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a26ae97c946e709188bcfbadcbadda2c3">v8::internal::OS::MemCopy</a></div><div class="ttdeci">static void MemCopy(void *dest, const void *src, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00399">platform.h:399</a></div></div>
<div class="ttc" id="property-details_8h_html_ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2"><div class="ttname"><a href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00037">property-details.h:37</a></div></div>
<div class="ttc" id="namespacev8_html_ac08707d61d5d7a69b2a5001ba10ed79ba760fb826f96dc4839ae0c01828bfaefd"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba760fb826f96dc4839ae0c01828bfaefd">v8::NewFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00042">v8-debug.h:42</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a521544c43b8fe1dae91883cd28080da3ad8649a813fc31c90dc7a62d1d568e617"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3ad8649a813fc31c90dc7a62d1d568e617">v8::internal::PREEMPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d01/execution_8h_source.html#l00042">execution.h:42</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_html_a2aed3c801bc981533015db78190333fa"><div class="ttname"><a href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">v8::internal::Heap::kNoGCFlags</a></div><div class="ttdeci">static const int kNoGCFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l01257">heap.h:1257</a></div></div>
<div class="ttc" id="src_2v8_8h_html"><div class="ttname"><a href="../../df/d6a/src_2v8_8h.html">v8.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a36f2f3b43f6117e78f2887330a2e8b93"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a36f2f3b43f6117e78f2887330a2e8b93">v8::internal::GetScriptWrapper</a></div><div class="ttdeci">Handle&lt; JSValue &gt; GetScriptWrapper(Handle&lt; Script &gt; script)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d59/handles_8cc_source.html#l00240">handles.cc:240</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab91e71e972251cbfe502d5f3856e5762"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab91e71e972251cbfe502d5f3856e5762">v8::internal::code</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function not JSFunction itself flushes the cache of optimized code for closures on every GC functions with arguments object maximum number of escape analysis fix point iterations allow uint32 values on optimize frames if they are used only in safe operations track concurrent recompilation artificial compilation delay in ms concurrent on stack replacement do not emit check maps for constant values that have a leaf deoptimize the optimized code if the layout of the maps changes number of stack frames inspected by the profiler percentage of ICs that must have type info to allow optimization extra verbose compilation tracing generate extra code(assertions) for debugging&quot;) DEFINE_bool(code_comments</div></div>
<div class="ttc" id="list_8h_html"><div class="ttname"><a href="../../da/d23/list_8h.html">list.h</a></div></div>
<div class="ttc" id="codegen_8h_html"><div class="ttname"><a href="../../d1/d39/codegen_8h.html">codegen.h</a></div></div>
<div class="ttc" id="natives_8h_html"><div class="ttname"><a href="../../d9/d3e/natives_8h.html">natives.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_template_hash_map_impl_html_a5172f06f3e2ee3d3e1f4ac8f1246662e"><div class="ttname"><a href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#a5172f06f3e2ee3d3e1f4ac8f1246662e">v8::internal::TemplateHashMapImpl&lt; FreeStoreAllocationPolicy &gt;::Lookup</a></div><div class="ttdeci">Entry * Lookup(void *key, uint32_t hash, bool insert, FreeStoreAllocationPolicyallocator=FreeStoreAllocationPolicy())</div></div>
<div class="ttc" id="classv8_1_1internal_1_1_global_handles_html_afb5ec6345fb5b248ab0eeb69db583666"><div class="ttname"><a href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#afb5ec6345fb5b248ab0eeb69db583666">v8::internal::GlobalHandles::ClearWeakness</a></div><div class="ttdeci">static void * ClearWeakness(Object **location)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d15/global-handles_8cc_source.html#l00507">global-handles.cc:507</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a9e9f6458e65e4f27fba1d3fb66911f27"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a9e9f6458e65e4f27fba1d3fb66911f27">v8::internal::pc</a></div><div class="ttdeci">const Register pc</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00244">assembler-arm.h:244</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_deoptimizer_html_a2e296896cb1ea4b942f189be051e4541"><div class="ttname"><a href="../../dd/d9d/classv8_1_1internal_1_1_deoptimizer.html#a2e296896cb1ea4b942f189be051e4541">v8::internal::Deoptimizer::DeoptimizeAll</a></div><div class="ttdeci">static void DeoptimizeAll(Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de7/deoptimizer_8cc_source.html#l00450">deoptimizer.cc:450</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_script_html_a25dfbfd382280d5562fdc3582b8aafd2a0b4ee660dbf2358b5f527153730cef7a"><div class="ttname"><a href="../../d9/da4/classv8_1_1internal_1_1_script.html#a25dfbfd382280d5562fdc3582b8aafd2a0b4ee660dbf2358b5f527153730cef7a">v8::internal::Script::COMPILATION_TYPE_EVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l06552">objects.h:6552</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_code_html_a83a03866ef93e7c036640b5917a4f192"><div class="ttname"><a href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">v8::internal::Code::GetCodeFromTargetAddress</a></div><div class="ttdeci">static Code * GetCodeFromTargetAddress(Address address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l04662">objects-inl.h:4662</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_standard_frame_constants_html_a5652f67c68f2a38c2d5d1a0b0740cb7d"><div class="ttname"><a href="../../db/dc7/classv8_1_1internal_1_1_standard_frame_constants.html#a5652f67c68f2a38c2d5d1a0b0740cb7d">v8::internal::StandardFrameConstants::kMarkerOffset</a></div><div class="ttdeci">static const int kMarkerOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db8/frames_8h_source.html#l00184">frames.h:184</a></div></div>
<div class="ttc" id="classv8_1_1_debug_1_1_client_data_html"><div class="ttname"><a href="../../d9/d18/classv8_1_1_debug_1_1_client_data.html">v8::Debug::ClientData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00056">v8-debug.h:56</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_html_afbaa9137eb86d66f958fcc41a77c2fea"><div class="ttname"><a href="../../dd/d58/classv8_1_1internal_1_1_heap.html#afbaa9137eb86d66f958fcc41a77c2fea">v8::internal::Heap::kMakeHeapIterableMask</a></div><div class="ttdeci">static const int kMakeHeapIterableMask</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l01264">heap.h:1264</a></div></div>
<div class="ttc" id="code-stubs_8h_html"><div class="ttname"><a href="../../d3/d9c/code-stubs_8h.html">code-stubs.h</a></div></div>
<div class="ttc" id="execution_8h_html"><div class="ttname"><a href="../../dd/d01/execution_8h.html">execution.h</a></div></div>
<div class="ttc" id="classv8_1_1_handle_html"><div class="ttname"><a href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt; v8::Context &gt;</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_ab0f123fbb2a9e29a1335e55636373502"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#ab0f123fbb2a9e29a1335e55636373502">v8::String::NewFromTwoByte</a></div><div class="ttdeci">static Local&lt; String &gt; NewFromTwoByte(Isolate *isolate, const uint16_t *data, NewStringType type=kNormalString, int length=-1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05443">api.cc:5443</a></div></div>
<div class="ttc" id="utils_8h_html_aaf2b51ac357499a1739790fd94bf90ec"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aaf2b51ac357499a1739790fd94bf90ec">STATIC_ASCII_VECTOR</a></div><div class="ttdeci">#define STATIC_ASCII_VECTOR(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00570">utils.h:570</a></div></div>
<div class="ttc" id="classv8_1_1_utils_html_a006f477612f18ee758c77a29fdbb7d7f"><div class="ttname"><a href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a></div><div class="ttdeci">static v8::internal::Handle&lt; To &gt; OpenHandle(v8::Local&lt; From &gt; handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d65/api_8h_source.html#l00308">api.h:308</a></div></div>
<div class="ttc" id="stub-cache_8h_html"><div class="ttname"><a href="../../dc/db3/stub-cache_8h.html">stub-cache.h</a></div></div>
<div class="ttc" id="classv8_1_1_local_html_a95f87a19741ea448d7f1654c9801cfea"><div class="ttname"><a href="../../de/deb/classv8_1_1_local.html#a95f87a19741ea448d7f1654c9801cfea">v8::Local::Cast</a></div><div class="ttdeci">static V8_INLINE Local&lt; T &gt; Cast(Local&lt; S &gt; that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00372">v8.h:372</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a00e8464566c15cbc97c5c8c850309df7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">v8::internal::CStrVector</a></div><div class="ttdeci">Vector&lt; const char &gt; CStrVector(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00574">utils.h:574</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_assembler_html_adac2452db6d072b53447bedda9a98a61"><div class="ttname"><a href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#adac2452db6d072b53447bedda9a98a61">v8::internal::Assembler::kDebugBreakSlotLength</a></div><div class="ttdeci">static const int kDebugBreakSlotLength</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00885">assembler-arm.h:885</a></div></div>
<div class="ttc" id="classv8_1_1_weak_callback_data_html_a3e67778c2e942cd2b71358f9ec39cff0"><div class="ttname"><a href="../../db/d0f/classv8_1_1_weak_callback_data.html#a3e67778c2e942cd2b71358f9ec39cff0">v8::WeakCallbackData::GetParameter</a></div><div class="ttdeci">V8_INLINE P * GetParameter() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00451">v8.h:451</a></div></div>
<div class="ttc" id="classv8_1_1_utils_html_a91962d30779259da776009f0cfb58291"><div class="ttname"><a href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a></div><div class="ttdeci">static Local&lt; Context &gt; ToLocal(v8::internal::Handle&lt; v8::internal::Context &gt; obj)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a66e9a5671f740245739cc6873ea1b445a01409a6eaf026ee7100680ac60d9a513"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a66e9a5671f740245739cc6873ea1b445a01409a6eaf026ee7100680ac60d9a513">v8::internal::SLOPPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00415">globals.h:415</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6ba4ba8514565188d56f2331955c8aeea5d5ced95526b550ad93164b3ad8d426a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6ba4ba8514565188d56f2331955c8aeea5d5ced95526b550ad93164b3ad8d426a">v8::internal::NATIVES_CODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00220">v8globals.h:220</a></div></div>
<div class="ttc" id="classv8_1_1_debug_html_a3e066f3a485372fdd61516e79cadc615"><div class="ttname"><a href="../../de/d13/classv8_1_1_debug.html#a3e066f3a485372fdd61516e79cadc615">v8::Debug::EventCallback2</a></div><div class="ttdeci">void(* EventCallback2)(const EventDetails &amp;event_details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00163">v8-debug.h:163</a></div></div>
<div class="ttc" id="shell_8cc_html_a3d8d27d72275827406db2004cefa1a07"><div class="ttname"><a href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">Load</a></div><div class="ttdeci">void Load(const v8::FunctionCallbackInfo&lt; v8::Value &gt; &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d51/shell_8cc_source.html#l00171">shell.cc:171</a></div></div>
<div class="ttc" id="classv8_1_1_debug_html_a904d652e7c9df44a191fe90d3ebba41d"><div class="ttname"><a href="../../de/d13/classv8_1_1_debug.html#a904d652e7c9df44a191fe90d3ebba41d">v8::Debug::HostDispatchHandler</a></div><div class="ttdeci">void(* HostDispatchHandler)()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00178">v8-debug.h:178</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_execution_html_ab623ef38a61a5b92bd1644d881470c33"><div class="ttname"><a href="../../d0/d00/classv8_1_1internal_1_1_execution.html#ab623ef38a61a5b92bd1644d881470c33">v8::internal::Execution::Call</a></div><div class="ttdeci">static Handle&lt; Object &gt; Call(Isolate *isolate, Handle&lt; Object &gt; callable, Handle&lt; Object &gt; receiver, int argc, Handle&lt; Object &gt; argv[], bool *pending_exception, bool convert_receiver=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7d/execution_8cc_source.html#l00153">execution.cc:153</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_receiver_html_a47199ec996dbab0b6e7ec937ffba0611"><div class="ttname"><a href="../../d8/dac/classv8_1_1internal_1_1_j_s_receiver.html#a47199ec996dbab0b6e7ec937ffba0611">v8::internal::JSReceiver::SetProperty</a></div><div class="ttdeci">static Handle&lt; Object &gt; SetProperty(Handle&lt; JSReceiver &gt; object, Handle&lt; Name &gt; key, Handle&lt; Object &gt; value, PropertyAttributes attributes, StrictMode strict_mode, StoreFromKeyed store_mode=MAY_BE_STORE_FROM_KEYED)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d7c/objects_8cc_source.html#l02858">objects.cc:2858</a></div></div>
<div class="ttc" id="classv8_1_1_handle_html_a821ace5666d33802aff59f69f72901dd"><div class="ttname"><a href="../../d3/dd5/classv8_1_1_handle.html#a821ace5666d33802aff59f69f72901dd">v8::Handle::IsEmpty</a></div><div class="ttdeci">V8_INLINE bool IsEmpty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00248">v8.h:248</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a4730147a5f2fa83bf450138f42b1df92"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a4730147a5f2fa83bf450138f42b1df92">v8::internal::info</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function info</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00317">flags.cc:317</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_java_script_frame_constants_html_adb87977083557cc339f2ae7ce52e53e2"><div class="ttname"><a href="../../d3/dda/classv8_1_1internal_1_1_java_script_frame_constants.html#adb87977083557cc339f2ae7ce52e53e2">v8::internal::JavaScriptFrameConstants::kFunctionOffset</a></div><div class="ttdeci">static const int kFunctionOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1e/frames-arm_8h_source.html#l00136">frames-arm.h:136</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a567421406b56c78176fc07cf215ca9c5"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a567421406b56c78176fc07cf215ca9c5">v8::internal::JSCallerSavedBuffer</a></div><div class="ttdeci">Object * JSCallerSavedBuffer[kNumJSCallerSaved]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1e/frames-arm_8h_source.html#l00055">frames-arm.h:55</a></div></div>
<div class="ttc" id="classv8_1_1_debug_1_1_message_html"><div class="ttname"><a href="../../de/dbd/classv8_1_1_debug_1_1_message.html">v8::Debug::Message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00065">v8-debug.h:65</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_global_handles_html_a51953fb4d0f362ccb84ae168a4837c51"><div class="ttname"><a href="../../d2/d2d/classv8_1_1internal_1_1_global_handles.html#a51953fb4d0f362ccb84ae168a4837c51">v8::internal::GlobalHandles::MakeWeak</a></div><div class="ttdeci">static void MakeWeak(Object **location, void *parameter, WeakCallback weak_callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d15/global-handles_8cc_source.html#l00500">global-handles.cc:500</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_html_a5c1c5f8dcdfd3fe359a6af56e98ec280"><div class="ttname"><a href="../../da/dde/classv8_1_1internal_1_1_handle.html#a5c1c5f8dcdfd3fe359a6af56e98ec280">v8::internal::Handle::null</a></div><div class="ttdeci">static Handle&lt; T &gt; null()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d23/handles_8h_source.html#l00080">handles.h:80</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_function_html_aca81040a8eaee62d248401c210d2058f"><div class="ttname"><a href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aca81040a8eaee62d248401c210d2058f">v8::internal::JSFunction::IsBuiltin</a></div><div class="ttdeci">bool IsBuiltin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l05482">objects-inl.h:5482</a></div></div>
<div class="ttc" id="isolate-inl_8h_html"><div class="ttname"><a href="../../d3/d36/isolate-inl_8h.html">isolate-inl.h</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l05025">v8.h:5025</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a949499cf64adf66e57fb90ad2546be23"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a949499cf64adf66e57fb90ad2546be23">v8::internal::DisallowHeapAllocation</a></div><div class="ttdeci">PerThreadAssertScopeDebugOnly&lt; HEAP_ALLOCATION_ASSERT, false &gt; DisallowHeapAllocation</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d64/assert-scope_8h_source.html#l00214">assert-scope.h:214</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a521544c43b8fe1dae91883cd28080da3a081e897e579859f166231191255a9f0c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a521544c43b8fe1dae91883cd28080da3a081e897e579859f166231191255a9f0c">v8::internal::DEBUGCOMMAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d01/execution_8h_source.html#l00041">execution.h:41</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_fixed_array_html_ab72b1bdfe3d9d45e6b5a01348e6691eb"><div class="ttname"><a href="../../dc/d95/classv8_1_1internal_1_1_fixed_array.html#ab72b1bdfe3d9d45e6b5a01348e6691eb">v8::internal::FixedArray::cast</a></div><div class="ttdeci">static FixedArray * cast(Object *obj)</div></div>
<div class="ttc" id="v8conversions_8cc_html_a03fd641a87e0199b429070914b680b7f"><div class="ttname"><a href="../../de/dd0/v8conversions_8cc.html#a03fd641a87e0199b429070914b680b7f">end_</a></div><div class="ttdeci">bool end_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dd0/v8conversions_8cc_source.html#l00060">v8conversions.cc:60</a></div></div>
<div class="ttc" id="classv8_1_1_weak_callback_data_html"><div class="ttname"><a href="../../db/d0f/classv8_1_1_weak_callback_data.html">v8::WeakCallbackData&lt; v8::Value, void &gt;</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04124">v8.h:4124</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_function_html_a9b94771c436c443f8e6c40d35396df87"><div class="ttname"><a href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#a9b94771c436c443f8e6c40d35396df87">v8::internal::JSFunction::kBoundFunctionIndex</a></div><div class="ttdeci">static const int kBoundFunctionIndex</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l07534">objects.h:7534</a></div></div>
<div class="ttc" id="builtins_8cc_html_a8ddc47515f89d0e3691438a6244e6642"><div class="ttname"><a href="../../da/dcc/builtins_8cc.html#a8ddc47515f89d0e3691438a6244e6642">BUILTIN</a></div><div class="ttdeci">#define BUILTIN(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcc/builtins_8cc_source.html#l00143">builtins.cc:143</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a857ac7626d3d3da7794fc6aed32ad9bca5311ba07ebdf5dd8929c8796eeda0d45"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a857ac7626d3d3da7794fc6aed32ad9bca5311ba07ebdf5dd8929c8796eeda0d45">v8::internal::CLEAR_EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00557">v8globals.h:557</a></div></div>
<div class="ttc" id="heap-snapshot-generator_8cc_html_aab49963775d0eef29ecab5e60bdd31e6"><div class="ttname"><a href="../../d4/d7d/heap-snapshot-generator_8cc.html#aab49963775d0eef29ecab5e60bdd31e6">obj</a></div><div class="ttdeci">HeapObject * obj</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7d/heap-snapshot-generator_8cc_source.html#l00533">heap-snapshot-generator.cc:533</a></div></div>
<div class="ttc" id="namespacev8_html_ac08707d61d5d7a69b2a5001ba10ed79ba7af8b3b962aadf798e813a27173fc4c3"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ac08707d61d5d7a69b2a5001ba10ed79ba7af8b3b962aadf798e813a27173fc4c3">v8::ScriptCollected</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/v8-debug_8h_source.html#l00045">v8-debug.h:45</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac667b904858a97154268e29dec306a21"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">v8::internal::false</a></div><div class="ttdeci">false</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00171">flags.cc:171</a></div></div>
<div class="ttc" id="classv8_1_1_escapable_handle_scope_html"><div class="ttname"><a href="../../d0/d4d/classv8_1_1_escapable_handle_scope.html">v8::EscapableHandleScope</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00882">v8.h:882</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_internal_frame_constants_html_a116d352b5c608baabc051300c6802d4f"><div class="ttname"><a href="../../d1/d54/classv8_1_1internal_1_1_internal_frame_constants.html#a116d352b5c608baabc051300c6802d4f">v8::internal::InternalFrameConstants::kCodeOffset</a></div><div class="ttdeci">static const int kCodeOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1e/frames-arm_8h_source.html#l00170">frames-arm.h:170</a></div></div>
<div class="ttc" id="classv8_1_1_debug_html_a4bf76677c1d7cbf5081ee9ab49dc4d66"><div class="ttname"><a href="../../de/d13/classv8_1_1_debug.html#a4bf76677c1d7cbf5081ee9ab49dc4d66">v8::Debug::DebugBreak</a></div><div class="ttdeci">static void DebugBreak(Isolate *isolate=NULL)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae943a5add2fba4b841ff0cb6788d7df3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae943a5add2fba4b841ff0cb6788d7df3">v8::internal::fp</a></div><div class="ttdeci">const Register fp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00240">assembler-arm.h:240</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_message_handler_html_a937cad706865a0947483835166860291"><div class="ttname"><a href="../../de/dab/classv8_1_1internal_1_1_message_handler.html#a937cad706865a0947483835166860291">v8::internal::MessageHandler::ReportMessage</a></div><div class="ttdeci">static void ReportMessage(Isolate *isolate, MessageLocation *loc, Handle&lt; Object &gt; message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/messages_8cc_source.html#l00100">messages.cc:100</a></div></div>
<div class="ttc" id="log_8h_html"><div class="ttname"><a href="../../d7/d7f/log_8h.html">log.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0166c55019a8ae518b6bb1ac17ad4706"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">v8::internal::DeleteArray</a></div><div class="ttdeci">void DeleteArray(T *array)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db7/allocation_8h_source.html#l00091">allocation.h:91</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_function_html_a1ae1a9fa4ee841461cf34fe5e8dbeb7e"><div class="ttname"><a href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#a1ae1a9fa4ee841461cf34fe5e8dbeb7e">v8::internal::JSFunction::code</a></div><div class="ttdeci">Code * code()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l05521">objects-inl.h:5521</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_template_hash_map_impl_html_aa71d36872f416feaa853788a7a7a7ef8"><div class="ttname"><a href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#aa71d36872f416feaa853788a7a7a7ef8">v8::internal::TemplateHashMapImpl&lt; FreeStoreAllocationPolicy &gt;::Clear</a></div><div class="ttdeci">void Clear()</div></div>
<div class="ttc" id="classv8_1_1internal_1_1_script_html_a84326daa66ef0f04c363386ee25fb0fd"><div class="ttname"><a href="../../d9/da4/classv8_1_1internal_1_1_script.html#a84326daa66ef0f04c363386ee25fb0fd">v8::internal::Script::HasValidSource</a></div><div class="ttdeci">bool HasValidSource()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l05306">objects-inl.h:5306</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab1d901438c48d5937e2b75647ab50e49"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab1d901438c48d5937e2b75647ab50e49">v8::internal::name</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function not JSFunction itself flushes the cache of optimized code for closures on every GC functions with arguments object maximum number of escape analysis fix point iterations allow uint32 values on optimize frames if they are used only in safe operations track concurrent recompilation artificial compilation delay in ms concurrent on stack replacement do not emit check maps for constant values that have a leaf deoptimize the optimized code if the layout of the maps changes number of stack frames inspected by the profiler percentage of ICs that must have type info to allow optimization extra verbose compilation tracing generate extra emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of VFP3 instructions if available enable use of NEON instructions if enable use of SDIV and UDIV instructions if enable loading bit constant by means of movw movt instruction enable unaligned accesses for enable use of d16 d31 registers on ARM this requires VFP3 force all emitted branches to be in long expose natives in global object expose freeBuffer extension expose gc extension under the specified name expose externalize string extension number of stack frames to capture disable builtin natives files print name of functions for which code is generated use random jit cookie to mask large constants trace lazy optimization use adaptive optimizations always try to OSR functions trace optimize function deoptimization minimum length for automatic enable preparsing maximum number of optimization attempts before giving up cache prototype transitions trace debugging JSON request response trace out of bounds accesses to external arrays trace_js_array_abuse automatically set the debug break flag when debugger commands are in the queue abort by crashing maximum length of function source code printed in a stack trace max size of the new max size of the old max size of executable always perform global GCs print one trace line following each garbage collection do not print trace line after scavenger collection print statistics of the maximum memory committed for the heap in name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00505">flags.cc:505</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_assembler_html_a070205288683701317b41a25713ebb73"><div class="ttname"><a href="../../df/d1b/classv8_1_1internal_1_1_assembler.html#a070205288683701317b41a25713ebb73">v8::internal::Assembler::kPatchDebugBreakSlotAddressOffset</a></div><div class="ttdeci">static const int kPatchDebugBreakSlotAddressOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00875">assembler-arm.h:875</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_v8_html_a3c89270ab4ac2bd43e9a12d2b93f1a00"><div class="ttname"><a href="../../d8/d0e/classv8_1_1internal_1_1_v8.html#a3c89270ab4ac2bd43e9a12d2b93f1a00">v8::internal::V8::FatalProcessOutOfMemory</a></div><div class="ttdeci">static void FatalProcessOutOfMemory(const char *location, bool take_snapshot=false)</div></div>
<div class="ttc" id="globals_8h_html_a25f003de16c08a4888b69f619d70f427"><div class="ttname"><a href="../../d5/d87/globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00333">globals.h:333</a></div></div>
<div class="ttc" id="classv8_1_1_local_html"><div class="ttname"><a href="../../de/deb/classv8_1_1_local.html">v8::Local&lt; v8::Value &gt;</a></div></div>
<div class="ttc" id="arguments_8h_html"><div class="ttname"><a href="../../df/d9b/arguments_8h.html">arguments.h</a></div></div>
<div class="ttc" id="classv8_1_1_boolean_html_a166e4a8faa5cae851789a3d3b7e1c415"><div class="ttname"><a href="../../d2/dac/classv8_1_1_boolean.html#a166e4a8faa5cae851789a3d3b7e1c415">v8::Boolean::New</a></div><div class="ttdeci">static V8_INLINE Handle&lt; Boolean &gt; New(Isolate *isolate, bool value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l06129">v8.h:6129</a></div></div>
<div class="ttc" id="global-handles_8h_html"><div class="ttname"><a href="../../df/d6c/global-handles_8h.html">global-handles.h</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a8b0b3550d419120008daa8a8107a9aa4"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a8b0b3550d419120008daa8a8107a9aa4">v8::String::NewFromUtf8</a></div><div class="ttdeci">static Local&lt; String &gt; NewFromUtf8(Isolate *isolate, const char *data, NewStringType type=kNormalString, int length=-1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05417">api.cc:5417</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_script_html_a1d1cfd8ffb84e947f82999c682b666a7ae2b58007997722acc5fa90f1c48e7171"><div class="ttname"><a href="../../d9/da4/classv8_1_1internal_1_1_script.html#a1d1cfd8ffb84e947f82999c682b666a7ae2b58007997722acc5fa90f1c48e7171">v8::internal::Script::TYPE_NATIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l06544">objects.h:6544</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_function_html_aadcf8f00ff5f932119b67a97c33762da"><div class="ttname"><a href="../../d0/d2c/classv8_1_1internal_1_1_j_s_function.html#aadcf8f00ff5f932119b67a97c33762da">v8::internal::JSFunction::cast</a></div><div class="ttdeci">static JSFunction * cast(Object *obj)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../d2/dbf/debug_8cc.html">debug.cc</a></li>
    <li class="footer">Generated on Sat Jun 7 2014 23:54:09 for v8 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
