<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>v8: test/cctest/test-strings.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../v8-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">v8
   &#160;<span id="projectnumber">3.25.30(node0.11.13)</span>
   </div>
   <div id="projectbrief">V8 is Google&#39;s open source JavaScript engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d6/dc1/test-strings_8cc_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">test-strings.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d6/dc1/test-strings_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// modification, are permitted provided that the following conditions are</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// met:</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//     * Redistributions in binary form must reproduce the above</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//       copyright notice, this list of conditions and the following</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//       disclaimer in the documentation and/or other materials provided</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//       with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//     * Neither the name of Google Inc. nor the names of its</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//       contributors may be used to endorse or promote products derived</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//       from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// Check that we can traverse very deep stacks of ConsStrings using</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// StringCharacterStram.  Check that Get(int) works on very deep stacks</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// of ConsStrings.  These operations may not be very fast, but they</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// should be possible without getting errors due to too deep recursion.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;v8.h&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d65/api_8h.html">api.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d06/factory_8h.html">factory.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d91/objects_8h.html">objects.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d84/cctest_8h.html">cctest.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// Adapted from http://en.wikipedia.org/wiki/Multiply-with-carry</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_my_random_number_generator.html">   43</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d8/d0c/class_my_random_number_generator.html">MyRandomNumberGenerator</a> {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_my_random_number_generator.html#a719f57f99235203e7710ab807cab1430">   45</a></span>&#160;  <a class="code" href="../../d8/d0c/class_my_random_number_generator.html#a719f57f99235203e7710ab807cab1430">MyRandomNumberGenerator</a>() {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="../../d8/d0c/class_my_random_number_generator.html#a51c1e0231dbad8016c836f9ac0a47dd7">init</a>();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_my_random_number_generator.html#a51c1e0231dbad8016c836f9ac0a47dd7">   49</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d8/d0c/class_my_random_number_generator.html#a51c1e0231dbad8016c836f9ac0a47dd7">init</a>(uint32_t seed = 0x5688c73e) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint32_t phi = 0x9e3779b9;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    c = 362436;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    i = kQSize-1;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    Q[0] = seed;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    Q[1] = seed + phi;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    Q[2] = seed + phi + phi;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 3; j &lt; kQSize; j++) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      Q[j] = Q[j - 3] ^ Q[j - 2] ^ phi ^ j;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">   61</a></span>&#160;  uint32_t <a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>() {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    uint64_t a = 18782;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    uint32_t r = 0xfffffffe;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    i = (i + 1) &amp; (kQSize-1);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    uint64_t t = a * Q[i] + c;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    c = (t &gt;&gt; 32);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    uint32_t x = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(t + c);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">if</span> (x &lt; c) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      x++;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      c++;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">return</span> (Q[i] = r - x);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_my_random_number_generator.html#af9072759c8a3e04aeeb3eef32fa3ebca">   75</a></span>&#160;  uint32_t <a class="code" href="../../d8/d0c/class_my_random_number_generator.html#af9072759c8a3e04aeeb3eef32fa3ebca">next</a>(<span class="keywordtype">int</span> max) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>() % max;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../d8/d0c/class_my_random_number_generator.html#a4010b9519473aedd50a16eb52a5c1006">   79</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d8/d0c/class_my_random_number_generator.html#a4010b9519473aedd50a16eb52a5c1006">next</a>(<span class="keywordtype">double</span> threshold) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(threshold &gt;= 0.0 &amp;&amp; threshold &lt;= 1.0);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (threshold == 1.0) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (threshold == 0.0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    uint32_t value = <a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>() % 100000;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> threshold &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(value)/100000.0;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t kQSize = 4096;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  uint32_t Q[kQSize];</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  uint32_t c;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  uint32_t i;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;};</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">using namespace </span>v8::internal;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEEP_DEPTH = 8 * 1024;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> SUPER_DEEP_DEPTH = 80 * 1024;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="../../df/d00/class_resource.html">  102</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../df/d00/class_resource.html">Resource</a>: <span class="keyword">public</span> <a class="code" href="../../d3/d29/classv8_1_1_string_1_1_external_string_resource.html">v8::String::ExternalStringResource</a> {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="../../df/d00/class_resource.html#a74bbfc885711474171e27fad69021633">  104</a></span>&#160;  <a class="code" href="../../df/d00/class_resource.html#a74bbfc885711474171e27fad69021633">Resource</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">uc16</a>* data, <span class="keywordtype">size_t</span> length): data_(data), length_(length) {}</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="../../df/d00/class_resource.html#af04be79e8cd12b4e3ab7361f3237ed26">  105</a></span>&#160;  <a class="code" href="../../df/d00/class_resource.html#af04be79e8cd12b4e3ab7361f3237ed26">~Resource</a>() { <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(data_); }</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="../../df/d00/class_resource.html#aa547298d85542d36e466a11986ad0267">  106</a></span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* <a class="code" href="../../df/d00/class_resource.html#aa547298d85542d36e466a11986ad0267">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_; }</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="../../df/d00/class_resource.html#ac8566c86772bfd359a614909dab1ad1d">  107</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../df/d00/class_resource.html#ac8566c86772bfd359a614909dab1ad1d">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> length_; }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">uc16</a>* data_;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordtype">size_t</span> length_;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;};</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="../../d3/d06/class_ascii_resource.html">  115</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d3/d06/class_ascii_resource.html">AsciiResource</a>: <span class="keyword">public</span> <a class="code" href="../../de/dea/classv8_1_1_string_1_1_external_ascii_string_resource.html">v8::String::ExternalAsciiStringResource</a> {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="../../d3/d06/class_ascii_resource.html#a2f1775a5e2c28a8393bb3bf15edb7a03">  117</a></span>&#160;  <a class="code" href="../../d3/d06/class_ascii_resource.html#a2f1775a5e2c28a8393bb3bf15edb7a03">AsciiResource</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* data, <span class="keywordtype">size_t</span> length)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      : data_(data), length_(length) {}</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../d3/d06/class_ascii_resource.html#a98c515cabcff4c6def8b8549be81ee79">  119</a></span>&#160;  <a class="code" href="../../d3/d06/class_ascii_resource.html#a98c515cabcff4c6def8b8549be81ee79">~AsciiResource</a>() { <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(data_); }</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="../../d3/d06/class_ascii_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">  120</a></span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d3/d06/class_ascii_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_; }</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../d3/d06/class_ascii_resource.html#ac8566c86772bfd359a614909dab1ad1d">  121</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d3/d06/class_ascii_resource.html#ac8566c86772bfd359a614909dab1ad1d">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> length_; }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* data_;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordtype">size_t</span> length_;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;};</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InitializeBuildingBlocks(<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a>* building_blocks,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                     <span class="keywordtype">int</span> bb_length,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                     <span class="keywordtype">bool</span> long_blocks,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                     <a class="code" href="../../d8/d0c/class_my_random_number_generator.html">MyRandomNumberGenerator</a>* rng) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// A list of pointers that we don&#39;t have any interest in cleaning up.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// If they are reachable from a root then leak detection won&#39;t complain.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bb_length; i++) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">int</span> len = rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(16);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">int</span> slice_head_chars = 0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordtype">int</span> slice_tail_chars = 0;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">int</span> slice_depth = 0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 3; j++) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">if</span> (rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(0.35)) slice_depth++;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// Must truncate something for a slice string. Loop until</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// at least one end will be sliced.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">while</span> (slice_head_chars == 0 &amp;&amp; slice_tail_chars == 0) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      slice_head_chars = rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(15);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      slice_tail_chars = rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(12);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (long_blocks) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="comment">// Generate building blocks which will never be merged</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      len += <a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#af8caa6f49b0ab73aa9c915b5caec21df">ConsString::kMinLength</a> + 1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (len &gt; 14) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      len += 1234;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// Don&#39;t slice 0 length strings.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (len == 0) slice_depth = 0;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">int</span> slice_length = slice_depth*(slice_head_chars + slice_tail_chars);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    len += slice_length;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">switch</span> (rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(4)) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">case</span> 0: {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">uc16</a> buf[2000];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; len; j++) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;          buf[j] = rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(0x10000);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        building_blocks[i] =</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a196ccf9888402bffd01c2fdeda60d87d">NewStringFromTwoByte</a>(<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">Vector&lt;const uc16&gt;</a>(buf, len));</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; len; j++) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(buf[j], building_blocks[i]-&gt;Get(j));</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">case</span> 1: {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordtype">char</span> buf[2000];</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; len; j++) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          buf[j] = rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(0x80);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        building_blocks[i] =</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#aa579c5790fe1a24fce000b97380d5cd7">NewStringFromAscii</a>(<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">Vector&lt;const char&gt;</a>(buf, len));</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; len; j++) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(buf[j], building_blocks[i]-&gt;Get(j));</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">case</span> 2: {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">uc16</a>* buf = NewArray&lt;uc16&gt;(len);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; len; j++) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;          buf[j] = rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(0x10000);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="../../df/d00/class_resource.html">Resource</a>* resource = <span class="keyword">new</span> <a class="code" href="../../df/d00/class_resource.html">Resource</a>(buf, len);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        building_blocks[i] =</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                *<a class="code" href="../../d2/db3/classv8_1_1_string.html#a9ecb1607d0f9a27a5a96116c5e6fc8cc">v8::String::NewExternal</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), resource));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; len; j++) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(buf[j], building_blocks[i]-&gt;Get(j));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">case</span> 3: {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordtype">char</span>* buf = NewArray&lt;char&gt;(len);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; len; j++) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          buf[j] = rng-&gt;<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(0x80);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="../../d3/d06/class_ascii_resource.html">AsciiResource</a>* resource = <span class="keyword">new</span> <a class="code" href="../../d3/d06/class_ascii_resource.html">AsciiResource</a>(buf, len);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        building_blocks[i] =</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                *<a class="code" href="../../d2/db3/classv8_1_1_string.html#a9ecb1607d0f9a27a5a96116c5e6fc8cc">v8::String::NewExternal</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), resource));</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; len; j++) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(buf[j], building_blocks[i]-&gt;Get(j));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = slice_depth; j &gt; 0; j--) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      building_blocks[i] = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#ae4e4973fcb19163a88bb5ee945f2edab">NewSubString</a>(</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          building_blocks[i],</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          slice_head_chars,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          building_blocks[i]-&gt;length() - slice_tail_chars);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(len == building_blocks[i]-&gt;length() + slice_length);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html">  226</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a> {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html#a0da70f2da2b7551a5cfb5869122b3d91">  228</a></span>&#160;  <a class="code" href="../../d5/d3a/class_cons_string_stats.html#a0da70f2da2b7551a5cfb5869122b3d91">ConsStringStats</a>() {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    Reset();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordtype">void</span> Reset();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">void</span> VerifyEqual(<span class="keyword">const</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a>&amp; that) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">  233</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">  234</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">  235</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">  236</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">  237</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="../../d5/d87/globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;};</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html#a372de693ad40b3f42839c8ec6ac845f4">  243</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html#a372de693ad40b3f42839c8ec6ac845f4">ConsStringStats::Reset</a>() {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  leaves_ = 0;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  empty_leaves_ = 0;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  chars_ = 0;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  left_traversals_ = 0;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  right_traversals_ = 0;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="../../d5/d3a/class_cons_string_stats.html#a7a04d3f6553844553bc1760f9508ac6f">  252</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html#a7a04d3f6553844553bc1760f9508ac6f">ConsStringStats::VerifyEqual</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a>&amp; that)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(this-&gt;leaves_ == that.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(this-&gt;empty_leaves_ == that.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(this-&gt;chars_ == that.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(this-&gt;left_traversals_ == that.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(this-&gt;right_traversals_ == that.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html">  261</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a> {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a4353f8a2cbe98e7597de011ee6abce44">  263</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNumberOfBuildingBlocks = 256;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>(<span class="keywordtype">bool</span> long_blocks);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordtype">void</span> Reset();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keyword">inline</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> block(<span class="keywordtype">int</span> offset);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keyword">inline</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> block(uint32_t offset);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// Input variables.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#aadeb6dc911807131e21b07b33971540c">  269</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aadeb6dc911807131e21b07b33971540c">early_termination_threshold_</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a2f5b88ac26a3fc5dbbb81cd8a74964c1">  270</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a2f5b88ac26a3fc5dbbb81cd8a74964c1">leftness_</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#ae84703d103883dcad3dd027ee1d03418">  271</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#ae84703d103883dcad3dd027ee1d03418">rightness_</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#aa6dff7b47204c24bc90b198b34e85ca1">  272</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa6dff7b47204c24bc90b198b34e85ca1">empty_leaf_threshold_</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a31c620c66b98f7849fbcf333d6075a3b">  273</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a31c620c66b98f7849fbcf333d6075a3b">max_leaves_</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// Cached data.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a6bb40b98cf341401dac29f9983819467">  275</a></span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> building_blocks_[kNumberOfBuildingBlocks];</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a73a3d09ecd0ec8cb8391ddcf9add7cdc">  276</a></span>&#160;  <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html">String</a>* <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a73a3d09ecd0ec8cb8391ddcf9add7cdc">empty_string_</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">  277</a></span>&#160;  <a class="code" href="../../d8/d0c/class_my_random_number_generator.html">MyRandomNumberGenerator</a> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// Stats.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">  279</a></span>&#160;  <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#ab03dbd7c1b9e18186f045d663f1fa62c">  280</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#ab03dbd7c1b9e18186f045d663f1fa62c">early_terminations_</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="../../d5/d87/globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;};</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a8bae8a40dd1362c6fa7813e0cfb3045f">  286</a></span>&#160;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a8bae8a40dd1362c6fa7813e0cfb3045f">ConsStringGenerationData::ConsStringGenerationData</a>(<span class="keywordtype">bool</span> long_blocks) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  rng_.init();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  InitializeBuildingBlocks(</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      building_blocks_, kNumberOfBuildingBlocks, long_blocks, &amp;rng_);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  empty_string_ = <a class="code" href="../../da/d17/class_cc_test.html#a63bdd828e23bef26298ac034078de4a3">CcTest::heap</a>()-&gt;empty_string();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  Reset();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a13ad65e1d35c415935cc72a01c6ca214">  295</a></span>&#160;<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">ConsStringGenerationData::block</a>(uint32_t offset) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">return</span> building_blocks_[offset % kNumberOfBuildingBlocks ];</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">  300</a></span>&#160;<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">ConsStringGenerationData::block</a>(<span class="keywordtype">int</span> offset) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(offset, 0);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">return</span> building_blocks_[offset % kNumberOfBuildingBlocks];</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="../../d4/d51/class_cons_string_generation_data.html#a372de693ad40b3f42839c8ec6ac845f4">  306</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a372de693ad40b3f42839c8ec6ac845f4">ConsStringGenerationData::Reset</a>() {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  early_termination_threshold_ = 0.01;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  leftness_ = 0.75;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  rightness_ = 0.75;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  empty_leaf_threshold_ = 0.02;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  max_leaves_ = 1000;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  stats_.Reset();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  early_terminations_ = 0;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  rng_.init();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">  318</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a>(<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html">ConsString</a>* cons_string, <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a>* stats) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordtype">int</span> left_length = cons_string-&gt;<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a1bb6d9f06f55a0a0a8746531c3eb20ac">first</a>()-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a3d0f4ae571310c6ed081daa3985ecb47">length</a>();</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordtype">int</span> right_length = cons_string-&gt;<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a3454d29032b8ce240c4617c05e739f17">second</a>()-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a3d0f4ae571310c6ed081daa3985ecb47">length</a>();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(cons_string-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a3d0f4ae571310c6ed081daa3985ecb47">length</a>() == left_length + right_length);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Check left side.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordtype">bool</span> left_is_cons = cons_string-&gt;<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a1bb6d9f06f55a0a0a8746531c3eb20ac">first</a>()-&gt;IsConsString();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (left_is_cons) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a>++;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a>(<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">ConsString::cast</a>(cons_string-&gt;<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a1bb6d9f06f55a0a0a8746531c3eb20ac">first</a>()), stats);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(left_length, 0);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += left_length;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// Check right side.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (cons_string-&gt;<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a3454d29032b8ce240c4617c05e739f17">second</a>()-&gt;IsConsString()) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a>++;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a>(<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">ConsString::cast</a>(cons_string-&gt;<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a3454d29032b8ce240c4617c05e739f17">second</a>()), stats);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (right_length == 0) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a>++;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!left_is_cons);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += right_length;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#ae58cac96d44f31e49270aaa49f97062d">  347</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a>(<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> cons_string, <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a>* stats) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="../../d0/deb/classv8_1_1internal_1_1_per_thread_assert_scope_debug_only.html">DisallowHeapAllocation</a> no_allocation;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (cons_string-&gt;IsConsString()) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a>(<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">ConsString::cast</a>(*cons_string), stats);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// This string got flattened by gc.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += cons_string-&gt;length();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a043bb959c33f956dccdd26e9ac54e42c">  357</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d6/dc1/test-strings_8cc.html#a043bb959c33f956dccdd26e9ac54e42c">AccumulateStatsWithOperator</a>(</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html">ConsString</a>* cons_string, <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a>* stats) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordtype">unsigned</span> offset = 0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> type = cons_string-&gt;<a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a25498e38628343f204c8dc99c642860d">map</a>()-&gt;<a class="code" href="../../de/dfe/classv8_1_1internal_1_1_map.html#a331c2e3486c2fdef0d4eff37543be0e6">instance_type</a>();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordtype">unsigned</span> length = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(cons_string-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a3d0f4ae571310c6ed081daa3985ecb47">length</a>());</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html">ConsStringIteratorOp</a> op;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html">String</a>* <span class="keywordtype">string</span> = op.<a class="code" href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html#abfc79d20ef18244e199162125437795b">Operate</a>(cons_string, &amp;offset, &amp;type, &amp;length);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<span class="keywordtype">string</span> != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!string-&gt;IsConsString());</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// Accumulate stats.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    stats-&gt;<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += <span class="keywordtype">string</span>-&gt;length();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// Check for completion.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordtype">bool</span> keep_going_fast_check = op.<a class="code" href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html#a99a73344c7c34e5d31b4fae7dc12d136">HasMore</a>();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordtype">string</span> = op.<a class="code" href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html#a8339207ca2b409682aae7f1d50b4b69d">ContinueOperation</a>(&amp;type, &amp;length);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">string</span> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// Verify no false positives for fast check.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(keep_going_fast_check);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a012da1f5d29734e41e465f7dd40cff45">  380</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d6/dc1/test-strings_8cc.html#a012da1f5d29734e41e465f7dd40cff45">VerifyConsString</a>(<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> root, <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// Verify basic data.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(root-&gt;IsConsString());</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(static_cast&lt;unsigned&gt;(root-&gt;length()) == data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a>);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// Recursive verify.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a> stats;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a>(<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">ConsString::cast</a>(*root), &amp;stats);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a7a04d3f6553844553bc1760f9508ac6f">VerifyEqual</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// Iteratively verify.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="../../d6/dc1/test-strings_8cc.html#a043bb959c33f956dccdd26e9ac54e42c">AccumulateStatsWithOperator</a>(<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">ConsString::cast</a>(*root), &amp;stats);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// Don&#39;t see these. Must copy over.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a> = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a> = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a> = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// Adjust total leaves to compensate.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> += stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a7a04d3f6553844553bc1760f9508ac6f">VerifyEqual</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> ConstructRandomString(<a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                            <span class="keywordtype">unsigned</span> max_recursion) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// Compute termination characteristics.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordtype">bool</span> terminate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordtype">bool</span> flat = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>.<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa6dff7b47204c24bc90b198b34e85ca1">empty_leaf_threshold_</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordtype">bool</span> terminate_early = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>.<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aadeb6dc911807131e21b07b33971540c">early_termination_threshold_</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (terminate_early) data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#ab03dbd7c1b9e18186f045d663f1fa62c">early_terminations_</a>++;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// The obvious condition.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  terminate |= max_recursion == 0;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Flat cons string terminate by definition.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  terminate |= flat;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// Cap for max leaves.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  terminate |= data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> &gt;= data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a31c620c66b98f7849fbcf333d6075a3b">max_leaves_</a>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// Roll the dice.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  terminate |= terminate_early;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// Compute termination characteristics for each side.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordtype">bool</span> terminate_left = terminate || !data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>.<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a2f5b88ac26a3fc5dbbb81cd8a74964c1">leftness_</a>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordtype">bool</span> terminate_right = terminate || !data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>.<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#ae84703d103883dcad3dd027ee1d03418">rightness_</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// Generate left string.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> left;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">if</span> (terminate_left) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    left = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>.<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>());</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += left-&gt;length();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a>++;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// Generate right string.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> right;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">if</span> (terminate_right) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    right = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>.<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>());</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += right-&gt;length();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a>++;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// Generate the necessary sub-nodes recursively.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">if</span> (!terminate_right) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// Need to balance generation fairly.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (!terminate_left &amp;&amp; data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>.<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>(0.5)) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      left = ConstructRandomString(data, max_recursion - 1);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    right = ConstructRandomString(data, max_recursion - 1);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">if</span> (!terminate_left &amp;&amp; left.<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a3c45461717ff230edd665ce24da988c5">is_null</a>()) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    left = ConstructRandomString(data, max_recursion - 1);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// Build the cons string.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> root = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(left, right);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(root-&gt;IsConsString() &amp;&amp; !root-&gt;IsFlat());</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// Special work needed for flat string.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">if</span> (flat) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a>++;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(root);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(root-&gt;IsConsString() &amp;&amp; root-&gt;IsFlat());</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">return</span> root;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;}</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> ConstructLeft(</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordtype">int</span> depth) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> answer = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#aa579c5790fe1a24fce000b97380d5cd7">NewStringFromAscii</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; depth; i++) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> block = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(i);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> next = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(answer, block);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span> (next-&gt;IsConsString()) data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += block-&gt;length();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    answer = next;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a> = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> - 2;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">return</span> answer;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> ConstructRight(</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordtype">int</span> depth) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> answer = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#aa579c5790fe1a24fce000b97380d5cd7">NewStringFromAscii</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = depth - 1; i &gt;= 0; i--) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> block = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(i);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> next = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(block, answer);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (next-&gt;IsConsString()) data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>++;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += block-&gt;length();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    answer = next;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a> = data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> - 2;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">return</span> answer;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;}</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> ConstructBalancedHelper(</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">int</span> from,</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordtype">int</span> to) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(to &gt; from);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">if</span> (to - from == 1) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(from)-&gt;length();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">return</span> data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(from);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">if</span> (to - from == 2) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(from)-&gt;length();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(from+1)-&gt;length();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span> factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(from), data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(from+1));</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> part1 =</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    ConstructBalancedHelper(data, from, from + ((to - from) / 2));</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> part2 =</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    ConstructBalancedHelper(data, from + ((to - from) / 2), to);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">if</span> (part1-&gt;IsConsString()) data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a>++;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  if (part2-&gt;IsConsString()) data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a>++;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordflow">return</span> factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(part1, part2);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> ConstructBalanced(</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data, <span class="keywordtype">int</span> depth = DEEP_DEPTH) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <span class="keywordtype">string</span> = ConstructBalancedHelper(data, 0, depth);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> =</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a> + data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a> + 2;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">return</span> string;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html">ConsStringIteratorOp</a> cons_string_iterator_op_1;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html">ConsStringIteratorOp</a> cons_string_iterator_op_2;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> Traverse(<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00b253ab5971676c7634e1eba361c47a">s1</a>, <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1eb1a8d3d782d6567661dc32158c735c">s2</a>) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <a class="code" href="../../d1/db2/classv8_1_1internal_1_1_string_character_stream.html">StringCharacterStream</a> character_stream_1(*s1, &amp;cons_string_iterator_op_1);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <a class="code" href="../../d1/db2/classv8_1_1internal_1_1_string_character_stream.html">StringCharacterStream</a> character_stream_2(*s2, &amp;cons_string_iterator_op_2);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">while</span> (character_stream_1.HasMore()) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(character_stream_2.HasMore());</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> c = character_stream_1.GetNext();</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(c, character_stream_2.GetNext());</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    i++;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!character_stream_1.HasMore());</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!character_stream_2.HasMore());</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(s1-&gt;length(), i);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(s2-&gt;length(), i);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> TraverseFirst(<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> s1, <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> s2, <span class="keywordtype">int</span> chars) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="../../d1/db2/classv8_1_1internal_1_1_string_character_stream.html">StringCharacterStream</a> character_stream_1(*s1, &amp;cons_string_iterator_op_1);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="../../d1/db2/classv8_1_1internal_1_1_string_character_stream.html">StringCharacterStream</a> character_stream_2(*s2, &amp;cons_string_iterator_op_2);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">while</span> (character_stream_1.HasMore() &amp;&amp; i &lt; chars) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(character_stream_2.HasMore());</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> c = character_stream_1.GetNext();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(c, character_stream_2.GetNext());</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    i++;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  s1-&gt;Get(s1-&gt;length() - 1);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  s2-&gt;Get(s2-&gt;length() - 1);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#ae6e89e17ed9c97ffa8aa23bb8dc51026">  567</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(Traverse) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  printf(<span class="stringliteral">&quot;TestTraverse\n&quot;</span>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a> data(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> flat = ConstructBalanced(&amp;data);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(flat);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> left_asymmetric = ConstructLeft(&amp;data, DEEP_DEPTH);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> right_asymmetric = ConstructRight(&amp;data, DEEP_DEPTH);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> symmetric = ConstructBalanced(&amp;data);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  printf(<span class="stringliteral">&quot;1\n&quot;</span>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  Traverse(flat, symmetric);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  printf(<span class="stringliteral">&quot;2\n&quot;</span>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  Traverse(flat, left_asymmetric);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  printf(<span class="stringliteral">&quot;3\n&quot;</span>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  Traverse(flat, right_asymmetric);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  printf(<span class="stringliteral">&quot;4\n&quot;</span>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> left_deep_asymmetric =</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      ConstructLeft(&amp;data, SUPER_DEEP_DEPTH);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> right_deep_asymmetric =</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      ConstructRight(&amp;data, SUPER_DEEP_DEPTH);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  printf(<span class="stringliteral">&quot;5\n&quot;</span>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  TraverseFirst(left_asymmetric, left_deep_asymmetric, 1050);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  printf(<span class="stringliteral">&quot;6\n&quot;</span>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  TraverseFirst(left_asymmetric, right_deep_asymmetric, 65536);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  printf(<span class="stringliteral">&quot;7\n&quot;</span>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(left_asymmetric);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  printf(<span class="stringliteral">&quot;10\n&quot;</span>);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  Traverse(flat, left_asymmetric);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  printf(<span class="stringliteral">&quot;11\n&quot;</span>);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(right_asymmetric);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  printf(<span class="stringliteral">&quot;12\n&quot;</span>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  Traverse(flat, right_asymmetric);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  printf(<span class="stringliteral">&quot;14\n&quot;</span>);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(symmetric);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  printf(<span class="stringliteral">&quot;15\n&quot;</span>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  Traverse(flat, symmetric);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  printf(<span class="stringliteral">&quot;16\n&quot;</span>);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(left_deep_asymmetric);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  printf(<span class="stringliteral">&quot;18\n&quot;</span>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> VerifyCharacterStream(</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html">String</a>* flat_string, <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html">String</a>* cons_string) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// Do not want to test ConString traversal on flat string.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(flat_string-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#afe1fa31a909cf533daaa9b30159f7ad9">IsFlat</a>() &amp;&amp; !flat_string-&gt;IsConsString());</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(cons_string-&gt;IsConsString());</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// TODO(dcarney) Test stream reset as well.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordtype">int</span> length = flat_string-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a3d0f4ae571310c6ed081daa3985ecb47">length</a>();</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// Iterate start search in multiple places in the string.</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordtype">int</span> outer_iterations = length &gt; 20 ? 20 : length;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt;= outer_iterations; j++) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordtype">int</span> offset = length * j / outer_iterations;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span> (offset &lt; 0) offset = 0;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// Want to test the offset == length case.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span> (offset &gt; length) offset = length;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="../../d1/db2/classv8_1_1internal_1_1_string_character_stream.html">StringCharacterStream</a> flat_stream(</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        flat_string, &amp;cons_string_iterator_op_1, static_cast&lt;unsigned&gt;(offset));</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="../../d1/db2/classv8_1_1internal_1_1_string_character_stream.html">StringCharacterStream</a> cons_stream(</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        cons_string, &amp;cons_string_iterator_op_2, static_cast&lt;unsigned&gt;(offset));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = offset; i &lt; length; i++) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> c = flat_string-&gt;Get(i);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(flat_stream.HasMore());</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(cons_stream.HasMore());</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(c, flat_stream.GetNext());</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(c, cons_stream.GetNext());</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!flat_stream.HasMore());</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!cons_stream.HasMore());</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> PrintStats(<span class="keyword">const</span> <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>&amp; data) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;printf(</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="stringliteral">&quot;%s: [%d], %s: [%d], %s: [%d], %s: [%d], %s: [%d], %s: [%d]\n&quot;</span>,</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="stringliteral">&quot;leaves&quot;</span>, data.<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a>,</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="stringliteral">&quot;empty&quot;</span>, data.<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a>,</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="stringliteral">&quot;chars&quot;</span>, data.<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a>,</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="stringliteral">&quot;lefts&quot;</span>, data.<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a>,</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="stringliteral">&quot;rights&quot;</span>, data.<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a>,</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="stringliteral">&quot;early_terminations&quot;</span>, data.<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#ab03dbd7c1b9e18186f045d663f1fa62c">early_terminations_</a>);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> BuildString&gt;</div>
<div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#ab5e81c77568f8be53906044f10cf9480">  656</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d6/dc1/test-strings_8cc.html#ab5e81c77568f8be53906044f10cf9480">TestStringCharacterStream</a>(BuildString build, <span class="keywordtype">int</span> test_cases) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <a class="code" href="../../dd/d7e/classv8_1_1internal_1_1_handle_scope.html">HandleScope</a> outer_scope(isolate);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a> data(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; test_cases; i++) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    printf(<span class="stringliteral">&quot;%d\n&quot;</span>, i);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="../../dd/d7e/classv8_1_1internal_1_1_handle_scope.html">HandleScope</a> inner_scope(isolate);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="../../d4/d81/classv8_1_1internal_1_1_always_allocate_scope.html">AlwaysAllocateScope</a> always_allocate(isolate);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// Build flat version of cons string.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> flat_string = build(i, &amp;data);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a> flat_string_stats;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a>(flat_string, &amp;flat_string_stats);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Flatten string.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(flat_string);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="comment">// Build unflattened version of cons string to test.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> cons_string = build(i, &amp;data);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a> cons_string_stats;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a>(cons_string, &amp;cons_string_stats);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="../../d0/deb/classv8_1_1internal_1_1_per_thread_assert_scope_debug_only.html">DisallowHeapAllocation</a> no_allocation;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    PrintStats(data);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">// Full verify of cons string.</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    cons_string_stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a7a04d3f6553844553bc1760f9508ac6f">VerifyEqual</a>(flat_string_stats);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    cons_string_stats.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a7a04d3f6553844553bc1760f9508ac6f">VerifyEqual</a>(data.<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="../../d6/dc1/test-strings_8cc.html#a012da1f5d29734e41e465f7dd40cff45">VerifyConsString</a>(cons_string, &amp;data);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html">String</a>* flat_string_ptr =</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        flat_string-&gt;IsConsString() ?</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">ConsString::cast</a>(*flat_string)-&gt;<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a1bb6d9f06f55a0a0a8746531c3eb20ac">first</a>() :</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        *flat_string;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    VerifyCharacterStream(flat_string_ptr, *cons_string);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kCharacterStreamNonRandomCases = 8;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> BuildEdgeCaseConsString(</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordtype">int</span> test_case, <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">switch</span> (test_case) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="keywordflow">return</span> ConstructBalanced(data, 71);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">return</span> ConstructLeft(data, 71);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">return</span> ConstructRight(data, 71);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">return</span> ConstructLeft(data, 10);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">return</span> ConstructRight(data, 10);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="comment">// 2 element balanced tree.</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(0)-&gt;length();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(1)-&gt;length();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> += 2;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">return</span> factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(0), data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(1));</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">case</span> 6:</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <span class="comment">// Simple flattened tree.</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(0)-&gt;length();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(1)-&gt;length();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> += 2;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a> += 1;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <span class="keywordtype">string</span> =</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(0), data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(1));</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">return</span> string;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">case</span> 7:</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="comment">// Left node flattened.</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(0)-&gt;length();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(1)-&gt;length();</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(2)-&gt;length();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> += 3;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a> += 1;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a> += 1;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> left =</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(0), data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(1));</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(left);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordflow">return</span> factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(left, data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(2));</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="comment">// Left node and right node flattened.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(0)-&gt;length();</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(1)-&gt;length();</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(2)-&gt;length();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">chars_</a> += data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(3)-&gt;length();</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">leaves_</a> += 4;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">empty_leaves_</a> += 2;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">left_traversals_</a> += 1;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">stats_</a>.<a class="code" href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">right_traversals_</a> += 1;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> left =</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(0), data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(1));</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(left);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> right =</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(2), data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">block</a>(2));</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(right);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">return</span> factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(left, right);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a>();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;}</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#abc1f2124917f07e346cb23771bd9bde2">  765</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(StringCharacterStreamEdgeCases) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  printf(<span class="stringliteral">&quot;TestStringCharacterStreamEdgeCases\n&quot;</span>);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <a class="code" href="../../d6/dc1/test-strings_8cc.html#ab5e81c77568f8be53906044f10cf9480">TestStringCharacterStream</a>(</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      BuildEdgeCaseConsString, kCharacterStreamNonRandomCases);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;}</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kBalances = 3;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kTreeLengths = 4;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kEmptyLeaves = 4;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kUniqueRandomParameters =</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    kBalances*kTreeLengths*kEmptyLeaves;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InitializeGenerationData(</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordtype">int</span> test_case, <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// Clear the settings and reinit the rng.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">// Spin up the rng to a known location that is unique per test.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kPerTestJump = 501;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; test_case*kPerTestJump; j++) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">rng_</a>.<a class="code" href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">next</a>();</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// Choose balanced, left or right heavy trees.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">switch</span> (test_case % kBalances) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="comment">// Nothing to do.  Already balanced.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="comment">// Left balanced.</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a2f5b88ac26a3fc5dbbb81cd8a74964c1">leftness_</a> = 0.90;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#ae84703d103883dcad3dd027ee1d03418">rightness_</a> = 0.15;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="comment">// Right balanced.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a2f5b88ac26a3fc5dbbb81cd8a74964c1">leftness_</a> = 0.15;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#ae84703d103883dcad3dd027ee1d03418">rightness_</a> = 0.90;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// Must remove the influence of the above decision.</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  test_case /= kBalances;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// Choose tree length.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">switch</span> (test_case % kTreeLengths) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a31c620c66b98f7849fbcf333d6075a3b">max_leaves_</a> = 16;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aadeb6dc911807131e21b07b33971540c">early_termination_threshold_</a> = 0.2;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a31c620c66b98f7849fbcf333d6075a3b">max_leaves_</a> = 50;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aadeb6dc911807131e21b07b33971540c">early_termination_threshold_</a> = 0.05;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a31c620c66b98f7849fbcf333d6075a3b">max_leaves_</a> = 500;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aadeb6dc911807131e21b07b33971540c">early_termination_threshold_</a> = 0.03;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#a31c620c66b98f7849fbcf333d6075a3b">max_leaves_</a> = 5000;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aadeb6dc911807131e21b07b33971540c">early_termination_threshold_</a> = 0.001;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">// Must remove the influence of the above decision.</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  test_case /= kTreeLengths;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="comment">// Choose how much we allow empty nodes, including not at all.</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  data-&gt;<a class="code" href="../../d4/d51/class_cons_string_generation_data.html#aa6dff7b47204c24bc90b198b34e85ca1">empty_leaf_threshold_</a> =</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      0.03 * <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(test_case % kEmptyLeaves);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> BuildRandomConsString(</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordtype">int</span> test_case, <a class="code" href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a>* data) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  InitializeGenerationData(test_case, data);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordflow">return</span> ConstructRandomString(data, 200);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;}</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a227e4aa47b802fe4bc437e418b970705">  846</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(StringCharacterStreamRandom) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  printf(<span class="stringliteral">&quot;StringCharacterStreamRandom\n&quot;</span>);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <a class="code" href="../../d6/dc1/test-strings_8cc.html#ab5e81c77568f8be53906044f10cf9480">TestStringCharacterStream</a>(BuildRandomConsString, kUniqueRandomParameters*7);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;}</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DEEP_ASCII_DEPTH = 100000;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a6fd7481636d8f551bb637114767b03a9">  855</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(DeepAscii) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  printf(<span class="stringliteral">&quot;TestDeepAscii\n&quot;</span>);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = NewArray&lt;char&gt;(DEEP_ASCII_DEPTH);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; DEEP_ASCII_DEPTH; i++) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    foo[i] = <span class="stringliteral">&quot;foo &quot;</span>[i % 4];</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <span class="keywordtype">string</span> =</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#aa579c5790fe1a24fce000b97380d5cd7">NewStringFromAscii</a>(<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">Vector&lt;const char&gt;</a>(foo, DEEP_ASCII_DEPTH));</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> foo_string = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#aa579c5790fe1a24fce000b97380d5cd7">NewStringFromAscii</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; DEEP_ASCII_DEPTH; i += 10) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordtype">string</span> = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(<span class="keywordtype">string</span>, foo_string);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> flat_string = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(<span class="keywordtype">string</span>, foo_string);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(flat_string);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 500; i++) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    TraverseFirst(flat_string, <span class="keywordtype">string</span>, DEEP_ASCII_DEPTH);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  DeleteArray&lt;char&gt;(<a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a>);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div>
<div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a374f7d6ca00c2b9ed12011d5b832eb46">  881</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(Utf8Conversion) {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// Smoke test for converting strings to utf-8.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// A simple ascii string</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* ascii_string = <span class="stringliteral">&quot;abcdef12345&quot;</span>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordtype">int</span> len = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a8b0b3550d419120008daa8a8107a9aa4">v8::String::NewFromUtf8</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), ascii_string,</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                                    <a class="code" href="../../d2/db3/classv8_1_1_string.html#aef3852f4561ef81187a88e028968fe54aa46acb614af63a7a3d6b08baa9d7fb7a">v8::String::kNormalString</a>,</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">StrLength</a>(ascii_string))-&gt;Utf8Length();</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">StrLength</a>(ascii_string), len);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// A mixed ascii and non-ascii string</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">// U+02E4 -&gt; CB A4</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">// U+0064 -&gt; 64</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">// U+12E4 -&gt; E1 8B A4</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// U+0030 -&gt; 30</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// U+3045 -&gt; E3 81 85</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> mixed_string[] = {0x02E4, 0x0064, 0x12E4, 0x0030, 0x3045};</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">// The characters we expect to be output</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> as_utf8[11] = {0xCB, 0xA4, 0x64, 0xE1, 0x8B, 0xA4, 0x30,</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      0xE3, 0x81, 0x85, 0x00};</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// The number of bytes expected to be written for each length</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> lengths[12] = {0, 0, 2, 3, 3, 3, 6, 7, 7, 7, 10, 11};</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> char_lengths[12] = {0, 0, 1, 2, 2, 2, 3, 4, 4, 4, 5, 5};</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> mixed = <a class="code" href="../../d2/db3/classv8_1_1_string.html#ab0f123fbb2a9e29a1335e55636373502">v8::String::NewFromTwoByte</a>(</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), mixed_string, <a class="code" href="../../d2/db3/classv8_1_1_string.html#aef3852f4561ef81187a88e028968fe54aa46acb614af63a7a3d6b08baa9d7fb7a">v8::String::kNormalString</a>, 5);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(10, mixed-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4f1986c4bc47434d4c50fbacfc3ff927">Utf8Length</a>());</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// Try encoding the string with all capacities</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordtype">char</span> buffer[11];</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> kNoChar = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(-1);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= 11; i++) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="comment">// Clear the buffer before reusing it</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 11; j++)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      buffer[j] = kNoChar;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordtype">int</span> chars_written;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordtype">int</span> written = mixed-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#a99aec0d3b418feca1f2a2ba79416c60b">WriteUtf8</a>(buffer, i, &amp;chars_written);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(lengths[i], written);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(char_lengths[i], chars_written);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">// Check that the contents are correct</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; lengths[i]; j++)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(as_utf8[j], static_cast&lt;unsigned char&gt;(buffer[j]));</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="comment">// Check that the rest of the buffer hasn&#39;t been touched</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = lengths[i]; j &lt; 11; j++)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(kNoChar, buffer[j]);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div>
<div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a5de121940f441e9ada5936cf4a37d3f6">  928</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(ExternalShortStringAdd) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// Make sure we cover all always-flat lengths and at least one above.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxLength = 20;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ad5a1a3bc35696ef5a1070bca3a419c99">CHECK_GT</a>(kMaxLength, <a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#af8caa6f49b0ab73aa9c915b5caec21df">i::ConsString::kMinLength</a>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// Allocate two JavaScript arrays for holding short strings.</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> ascii_external_strings =</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <a class="code" href="../../d3/d32/classv8_1_1_array.html#aa00019d6db6ccfa1549fd8154a42781d">v8::Array::New</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), kMaxLength + 1);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> non_ascii_external_strings =</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <a class="code" href="../../d3/d32/classv8_1_1_array.html#aa00019d6db6ccfa1549fd8154a42781d">v8::Array::New</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), kMaxLength + 1);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="comment">// Generate short ascii and non-ascii external strings.</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= kMaxLength; i++) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordtype">char</span>* ascii = NewArray&lt;char&gt;(i + 1);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; i; j++) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      ascii[j] = <span class="charliteral">&#39;a&#39;</span>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">// Terminating &#39;\0&#39; is left out on purpose. It is not required for external</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="comment">// string data.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <a class="code" href="../../d3/d06/class_ascii_resource.html">AsciiResource</a>* ascii_resource = <span class="keyword">new</span> <a class="code" href="../../d3/d06/class_ascii_resource.html">AsciiResource</a>(ascii, i);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> ascii_external_string =</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="../../d2/db3/classv8_1_1_string.html#a9ecb1607d0f9a27a5a96116c5e6fc8cc">v8::String::NewExternal</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), ascii_resource);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    ascii_external_strings-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#a4ceece8606666ec5c01ffd0d1bd46167">v8::Integer::New</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), i),</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                                ascii_external_string);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">uc16</a>* non_ascii = NewArray&lt;uc16&gt;(i + 1);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; i; j++) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      non_ascii[j] = 0x1234;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">// Terminating &#39;\0&#39; is left out on purpose. It is not required for external</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="comment">// string data.</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="../../df/d00/class_resource.html">Resource</a>* resource = <span class="keyword">new</span> <a class="code" href="../../df/d00/class_resource.html">Resource</a>(non_ascii, i);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> non_ascii_external_string =</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <a class="code" href="../../d2/db3/classv8_1_1_string.html#a9ecb1607d0f9a27a5a96116c5e6fc8cc">v8::String::NewExternal</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), resource);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    non_ascii_external_strings-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#a4ceece8606666ec5c01ffd0d1bd46167">v8::Integer::New</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), i),</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                                    non_ascii_external_string);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="comment">// Add the arrays with the short external strings in the global object.</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;external_ascii&quot;</span>), ascii_external_strings);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;external_non_ascii&quot;</span>), non_ascii_external_strings);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;max_length&quot;</span>),</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;              <a class="code" href="../../df/d84/classv8_1_1_integer.html#a4ceece8606666ec5c01ffd0d1bd46167">v8::Integer::New</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), kMaxLength));</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">// Add short external ascii and non-ascii strings checking the result.</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* source =</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="stringliteral">&quot;function test() {&quot;</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="stringliteral">&quot;  var ascii_chars = &#39;aaaaaaaaaaaaaaaaaaaa&#39;;&quot;</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="stringliteral">&quot;  var non_ascii_chars = &#39;\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234\\u1234&#39;;&quot;</span>  <span class="comment">//NOLINT</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="stringliteral">&quot;  if (ascii_chars.length != max_length) return 1;&quot;</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="stringliteral">&quot;  if (non_ascii_chars.length != max_length) return 2;&quot;</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="stringliteral">&quot;  var ascii = Array(max_length + 1);&quot;</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="stringliteral">&quot;  var non_ascii = Array(max_length + 1);&quot;</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt;= max_length; i++) {&quot;</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="stringliteral">&quot;    ascii[i] = ascii_chars.substring(0, i);&quot;</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="stringliteral">&quot;    non_ascii[i] = non_ascii_chars.substring(0, i);&quot;</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="stringliteral">&quot;  };&quot;</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt;= max_length; i++) {&quot;</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="stringliteral">&quot;    if (ascii[i] != external_ascii[i]) return 3;&quot;</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="stringliteral">&quot;    if (non_ascii[i] != external_non_ascii[i]) return 4;&quot;</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="stringliteral">&quot;    for (var j = 0; j &lt; i; j++) {&quot;</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="stringliteral">&quot;      if (external_ascii[i] !=&quot;</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="stringliteral">&quot;          (external_ascii[j] + external_ascii[i - j])) return 5;&quot;</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="stringliteral">&quot;      if (external_non_ascii[i] !=&quot;</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="stringliteral">&quot;          (external_non_ascii[j] + external_non_ascii[i - j])) return 6;&quot;</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="stringliteral">&quot;      if (non_ascii[i] != (non_ascii[j] + non_ascii[i - j])) return 7;&quot;</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="stringliteral">&quot;      if (ascii[i] != (ascii[j] + ascii[i - j])) return 8;&quot;</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="stringliteral">&quot;      if (ascii[i] != (external_ascii[j] + ascii[i - j])) return 9;&quot;</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="stringliteral">&quot;      if (ascii[i] != (ascii[j] + external_ascii[i - j])) return 10;&quot;</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="stringliteral">&quot;      if (non_ascii[i] !=&quot;</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="stringliteral">&quot;          (external_non_ascii[j] + non_ascii[i - j])) return 11;&quot;</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="stringliteral">&quot;      if (non_ascii[i] !=&quot;</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="stringliteral">&quot;          (non_ascii[j] + external_non_ascii[i - j])) return 12;&quot;</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="stringliteral">&quot;  return 0;&quot;</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="stringliteral">&quot;test()&quot;</span>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, CompileRun(source)-&gt;Int32Value());</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;}</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div>
<div class="line"><a name="l01014"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a3cecea1f68c1b9abcb5341a43a13d010"> 1014</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(JSONStringifySliceMadeExternal) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="comment">// Create a sliced string from a one-byte string.  The latter is turned</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// into a two-byte external string.  Check that JSON.stringify works.</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> underlying =</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      CompileRun(<span class="stringliteral">&quot;var underlying = &#39;abcdefghijklmnopqrstuvwxyz&#39;;&quot;</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                 <span class="stringliteral">&quot;underlying&quot;</span>)-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a91b68fb0b5558f1c9539015c1bbf7af2">ToString</a>();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> slice =</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      CompileRun(<span class="stringliteral">&quot;var slice = underlying.slice(1);&quot;</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                 <span class="stringliteral">&quot;slice&quot;</span>)-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a91b68fb0b5558f1c9539015c1bbf7af2">ToString</a>();</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(*slice)-&gt;IsSlicedString());</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(*underlying)-&gt;IsSeqOneByteString());</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordtype">int</span> length = underlying-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#a6e891964a37680c01e21dedac6ffe670">Length</a>();</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">uc16</a>* two_byte = NewArray&lt;uc16&gt;(length + 1);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  underlying-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#a79d9a617e12421ae3afb7a2060eb6fe4">Write</a>(two_byte);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <a class="code" href="../../df/d00/class_resource.html">Resource</a>* resource = <span class="keyword">new</span> <a class="code" href="../../df/d00/class_resource.html">Resource</a>(two_byte, length);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(underlying-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#a636cb0f6c7a1ff42282e3a7f68c5d54d">MakeExternal</a>(resource));</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(*slice)-&gt;IsSlicedString());</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(*underlying)-&gt;IsExternalTwoByteString());</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;\&quot;bcdefghijklmnopqrstuvwxyz\&quot;&quot;</span>,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;           *<a class="code" href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a>(CompileRun(<span class="stringliteral">&quot;JSON.stringify(slice)&quot;</span>)));</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a2d46d368d7bebed219cb2a12cc079a77"> 1041</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(CachedHashOverflow) {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">// We incorrectly allowed strings to be tagged as array indices even if their</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// values didn&#39;t fit in the hash field.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">// See http://code.google.com/p/v8/issues/detail?id=728</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>();</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// Lines must be executed sequentially. Combining them into one script</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// makes the bug go away.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* lines[] = {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="stringliteral">&quot;var x = [];&quot;</span>,</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="stringliteral">&quot;x[4] = 42;&quot;</span>,</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="stringliteral">&quot;var s = \&quot;1073741828\&quot;;&quot;</span>,</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="stringliteral">&quot;x[s];&quot;</span>,</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="stringliteral">&quot;x[s] = 37;&quot;</span>,</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="stringliteral">&quot;x[4];&quot;</span>,</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="stringliteral">&quot;x[s];&quot;</span>,</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  };</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;Smi&gt;</a> fortytwo(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(42), isolate);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;Smi&gt;</a> thirtyseven(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">Smi::FromInt</a>(37), isolate);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;Object&gt;</a> results[] = { isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>()-&gt;undefined_value(),</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                               fortytwo,</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                               isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>()-&gt;undefined_value(),</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                               isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>()-&gt;undefined_value(),</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                               thirtyseven,</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                               fortytwo,</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                               thirtyseven  <span class="comment">// Bug yielded 42 here.</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  };</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* line;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; (line = lines[i]); i++) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    printf(<span class="stringliteral">&quot;%s\n&quot;</span>, line);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> result = <a class="code" href="../../d0/d35/classv8_1_1_script.html#abf015c4a56c9e90babce709acc312471">v8::Script::Compile</a>(</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <a class="code" href="../../d2/db3/classv8_1_1_string.html#a8b0b3550d419120008daa8a8107a9aa4">v8::String::NewFromUtf8</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), line))-&gt;Run();</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(results[i]-&gt;IsUndefined(), result-&gt;IsUndefined());</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(results[i]-&gt;IsNumber(), result-&gt;IsNumber());</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">if</span> (result-&gt;IsNumber()) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">Smi::cast</a>(results[i]-&gt;ToSmi()-&gt;ToObjectChecked())-&gt;value(),</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;               result-&gt;ToInt32()-&gt;Value());</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#af77ef4688bfd045542ad3db3abf518e9"> 1088</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(SliceFromCons) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  FLAG_string_slices = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <span class="keywordtype">string</span> =</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#aa579c5790fe1a24fce000b97380d5cd7">NewStringFromAscii</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">CStrVector</a>(<span class="stringliteral">&quot;parentparentparent&quot;</span>));</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> parent = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">NewConsString</a>(<span class="keywordtype">string</span>, <span class="keywordtype">string</span>);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(parent-&gt;IsConsString());</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!parent-&gt;IsFlat());</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> slice = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#ae4e4973fcb19163a88bb5ee945f2edab">NewSubString</a>(parent, 1, 25);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="comment">// After slicing, the original string becomes a flat cons.</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(parent-&gt;IsFlat());</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(slice-&gt;IsSlicedString());</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#aa074f607c308931a814009ca4baa82bf">SlicedString::cast</a>(*slice)-&gt;<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#a49b5aa4f6f2de3fa4af03b4d7e6e03a9">parent</a>(),</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;           <span class="comment">// Parent could have been short-circuited.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;           parent-&gt;IsConsString() ? <a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">ConsString::cast</a>(*parent)-&gt;<a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a1bb6d9f06f55a0a0a8746531c3eb20ac">first</a>()</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                                  : *parent);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#aa074f607c308931a814009ca4baa82bf">SlicedString::cast</a>(*slice)-&gt;<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#a49b5aa4f6f2de3fa4af03b4d7e6e03a9">parent</a>()-&gt;IsSeqString());</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(slice-&gt;IsFlat());</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="keyword">class </span><a class="code" href="../../d3/db2/class_ascii_vector_resource.html">AsciiVectorResource</a> : <span class="keyword">public</span> <a class="code" href="../../de/dea/classv8_1_1_string_1_1_external_ascii_string_resource.html">v8::String::ExternalAsciiStringResource</a> {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01113"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html#ab59290224b145b93fa2767f3a85b0209"> 1113</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d3/db2/class_ascii_vector_resource.html#ab59290224b145b93fa2767f3a85b0209">AsciiVectorResource</a>(<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const char&gt;</a> vector)</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      : data_(vector) {}</div>
<div class="line"><a name="l01115"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html#ac127add068c00f6e9196071753bb6fb3"> 1115</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="../../d3/db2/class_ascii_vector_resource.html#ac127add068c00f6e9196071753bb6fb3">~AsciiVectorResource</a>() {}</div>
<div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d"> 1116</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d3/db2/class_ascii_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.length(); }</div>
<div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3"> 1117</a></span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d3/db2/class_ascii_vector_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.start(); }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const char&gt;</a> data_;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;};</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#abef21987292db8ff8715a28281303b2e"> 1123</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(SliceFromExternal) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  FLAG_string_slices = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <a class="code" href="../../d3/db2/class_ascii_vector_resource.html">AsciiVectorResource</a> resource(</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const char&gt;</a>(<span class="stringliteral">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>, 26));</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <span class="keywordtype">string</span> = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a7e314af11b7b3f3044361a786e9892ec">NewExternalStringFromAscii</a>(&amp;resource);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsExternalString());</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> slice = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#ae4e4973fcb19163a88bb5ee945f2edab">NewSubString</a>(<span class="keywordtype">string</span>, 1, 25);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(slice-&gt;IsSlicedString());</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsExternalString());</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#aa074f607c308931a814009ca4baa82bf">SlicedString::cast</a>(*slice)-&gt;<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#a49b5aa4f6f2de3fa4af03b4d7e6e03a9">parent</a>(), *string);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#aa074f607c308931a814009ca4baa82bf">SlicedString::cast</a>(*slice)-&gt;<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#a49b5aa4f6f2de3fa4af03b4d7e6e03a9">parent</a>()-&gt;IsExternalString());</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(slice-&gt;IsFlat());</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;}</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div>
<div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a7097481571a7321dec07ae9cfa21f3ca"> 1141</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(TrivialSlice) {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="comment">// This tests whether a slice that contains the entire parent string</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="comment">// actually creates a new string (it should not).</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  FLAG_string_slices = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html">Factory</a>* factory = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>()-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> result;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> string;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* init = <span class="stringliteral">&quot;var str = &#39;abcdefghijklmnopqrstuvwxyz&#39;;&quot;</span>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d4/d93/test-hashing_8cc.html#a922008b4db75f9f1a9959460bb05fe37">check</a> = <span class="stringliteral">&quot;str.slice(0,26)&quot;</span>;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* crosscheck = <span class="stringliteral">&quot;str.slice(1,25)&quot;</span>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  CompileRun(init);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  result = CompileRun(check);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsString());</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordtype">string</span> = <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a28482e549042324109bb774ac8f877fb">v8::String::Cast</a>(*result));</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!string-&gt;IsSlicedString());</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordtype">string</span> = factory-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#ae4e4973fcb19163a88bb5ee945f2edab">NewSubString</a>(<span class="keywordtype">string</span>, 0, 26);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!string-&gt;IsSlicedString());</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  result = CompileRun(crosscheck);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsString());</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordtype">string</span> = <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a28482e549042324109bb774ac8f877fb">v8::String::Cast</a>(*result));</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsSlicedString());</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;bcdefghijklmnopqrstuvwxy&quot;</span>, string-&gt;ToCString().get());</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div>
<div class="line"><a name="l01171"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a4277e37c918911be6d0bb4c2fc2ec890"> 1171</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(SliceFromSlice) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="comment">// This tests whether a slice that contains the entire parent string</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// actually creates a new string (it should not).</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  FLAG_string_slices = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> result;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> string;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* init = <span class="stringliteral">&quot;var str = &#39;abcdefghijklmnopqrstuvwxyz&#39;;&quot;</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* slice = <span class="stringliteral">&quot;var slice = str.slice(1,-1); slice&quot;</span>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* slice_from_slice = <span class="stringliteral">&quot;slice.slice(1,-1);&quot;</span>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  CompileRun(init);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  result = CompileRun(slice);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsString());</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordtype">string</span> = <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a28482e549042324109bb774ac8f877fb">v8::String::Cast</a>(*result));</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsSlicedString());</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#aa074f607c308931a814009ca4baa82bf">SlicedString::cast</a>(*string)-&gt;<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#a49b5aa4f6f2de3fa4af03b4d7e6e03a9">parent</a>()-&gt;IsSeqString());</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;bcdefghijklmnopqrstuvwxy&quot;</span>, string-&gt;ToCString().get());</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  result = CompileRun(slice_from_slice);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsString());</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="keywordtype">string</span> = <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a28482e549042324109bb774ac8f877fb">v8::String::Cast</a>(*result));</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsSlicedString());</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#aa074f607c308931a814009ca4baa82bf">SlicedString::cast</a>(*string)-&gt;<a class="code" href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#a49b5aa4f6f2de3fa4af03b4d7e6e03a9">parent</a>()-&gt;IsSeqString());</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;cdefghijklmnopqrstuvwx&quot;</span>, string-&gt;ToCString().get());</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;}</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div>
<div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a7453a87f7f4db196a50c6dc31a833863"> 1200</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(AsciiArrayJoin) {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="comment">// Set heap limits.</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> K = 1024;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a> constraints;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#acbc7f014a83bddf32a5a29f5c9d6e6b0">set_max_young_space_size</a>(256 * K);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#af87a04cf17d764721ff8220ce1b23de4">set_max_old_space_size</a>(4 * K * K);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#acac8ccd7f08c42a70abba08a927ccdf2">v8::SetResourceConstraints</a>(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>(), &amp;constraints);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// String s is made of 2^17 = 131072 &#39;c&#39; characters and a is an array</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="comment">// starting with &#39;bad&#39;, followed by 2^14 times the string s. That means the</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">// total length of the concatenated strings is 2^31 + 3. So on 32bit systems</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">// summing the lengths of the strings (as Smis) overflows and wraps.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="stringliteral">&quot;var two_14 = Math.pow(2, 14);&quot;</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="stringliteral">&quot;var two_17 = Math.pow(2, 17);&quot;</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="stringliteral">&quot;var s = Array(two_17 + 1).join(&#39;c&#39;);&quot;</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="stringliteral">&quot;var a = [&#39;bad&#39;];&quot;</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="stringliteral">&quot;for (var i = 1; i &lt;= two_14; i++) a.push(s);&quot;</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="stringliteral">&quot;a.join(&quot;</span><span class="stringliteral">&quot;);&quot;</span>).IsEmpty());</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckException(<span class="keyword">const</span> <span class="keywordtype">char</span>* source) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// An empty handle is returned upon exception.</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(source).IsEmpty());</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;}</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a517994a1f6a6dd77872b605840c91d12"> 1232</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(RobustSubStringStub) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="comment">// This tests whether the SubStringStub can handle unsafe arguments.</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// If not recognized, those unsafe arguments lead to out-of-bounds reads.</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> result;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> string;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  CompileRun(<span class="stringliteral">&quot;var short = &#39;abcdef&#39;;&quot;</span>);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="comment">// Invalid indices.</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(short,     0,    10000);&quot;</span>);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(short, -1234,        5);&quot;</span>);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(short,     5,        2);&quot;</span>);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// Special HeapNumbers.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(short,     1, Infinity);&quot;</span>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(short,   NaN,        5);&quot;</span>);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">// String arguments.</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(short,    &#39;2&#39;,     &#39;5&#39;);&quot;</span>);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="comment">// Ordinary HeapNumbers can be handled (in runtime).</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;%_SubString(short, Math.sqrt(4), 5.1);&quot;</span>);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordtype">string</span> = <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a28482e549042324109bb774ac8f877fb">v8::String::Cast</a>(*result));</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;cde&quot;</span>, string-&gt;ToCString().get());</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  CompileRun(<span class="stringliteral">&quot;var long = &#39;abcdefghijklmnopqrstuvwxyz&#39;;&quot;</span>);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="comment">// Invalid indices.</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(long,     0,    10000);&quot;</span>);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(long, -1234,       17);&quot;</span>);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(long,    17,        2);&quot;</span>);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// Special HeapNumbers.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(long,     1, Infinity);&quot;</span>);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(long,   NaN,       17);&quot;</span>);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="comment">// String arguments.</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(long,    &#39;2&#39;,    &#39;17&#39;);&quot;</span>);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="comment">// Ordinary HeapNumbers within bounds can be handled (in runtime).</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;%_SubString(long, Math.sqrt(4), 17.1);&quot;</span>);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="keywordtype">string</span> = <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a28482e549042324109bb774ac8f877fb">v8::String::Cast</a>(*result));</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;cdefghijklmnopq&quot;</span>, string-&gt;ToCString().get());</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">// Test that out-of-bounds substring of a slice fails when the indices</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="comment">// would have been valid for the underlying string.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  CompileRun(<span class="stringliteral">&quot;var slice = long.slice(1, 15);&quot;</span>);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  CheckException(<span class="stringliteral">&quot;%_SubString(slice, 0, 17);&quot;</span>);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;}</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div>
<div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a9e16185f4e58406ae936c41143109896"> 1278</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(StringReplaceAtomTwoByteResult) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope(<a class="code" href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a>());</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> result = CompileRun(</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="stringliteral">&quot;var subject = &#39;ascii~only~string~&#39;; &quot;</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="stringliteral">&quot;var replace = &#39;\x80&#39;;            &quot;</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="stringliteral">&quot;subject.replace(/~/g, replace);  &quot;</span>);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsString());</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">Handle&lt;String&gt;</a> <span class="keywordtype">string</span> = <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a28482e549042324109bb774ac8f877fb">v8::String::Cast</a>(*result));</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsSeqTwoByteString());</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> expected = v8_str(<span class="stringliteral">&quot;ascii\x80only\x80string\x80&quot;</span>);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(expected-&gt;Equals(result));</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;}</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div>
<div class="line"><a name="l01295"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#aa6f380bbb53a0ee794ddd104a8b7c450"> 1295</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(IsAscii) {</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#ae99b846844c674efbe345f82ecdcca5a">String::IsAscii</a>(static_cast&lt;char*&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>), 0));</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a2baf8b853eece7eda2e03403065976d6">String::IsOneByte</a>(static_cast&lt;uc16*&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>), 0));</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;}</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> Op, <span class="keywordtype">bool</span> return_first&gt;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> ConvertLatin1(<a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> c) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  uint32_t result[Op::kMaxWidth];</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="keywordtype">int</span> chars;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  chars = Op::Convert(c, 0, result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="keywordflow">if</span> (chars == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a90b329b303c3a01760b7ad27fe92733f">CHECK_LE</a>(chars, static_cast&lt;int&gt;(<span class="keyword">sizeof</span>(result)));</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="keywordflow">if</span> (!return_first &amp;&amp; chars &gt; 1) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordflow">return</span> result[0];</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckCanonicalEquivalence(<a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> c, <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> test) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> expect = ConvertLatin1&lt;unibrow::Ecma262UnCanonicalize, true&gt;(c);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="keywordflow">if</span> (expect &gt; <a class="code" href="../../d2/dd0/classunibrow_1_1_latin1.html#a00ad038573734b8d780ba3a00b4bdd14">unibrow::Latin1::kMaxChar</a>) expect = 0;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expect, test);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div>
<div class="line"><a name="l01323"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#a1e64c1c329f03087e75dd9e6e73be9b5"> 1323</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(Latin1IgnoreCase) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keyword">using namespace </span>unibrow;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> c = Latin1::kMaxChar + 1; c != 0; c++) {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> lower = ConvertLatin1&lt;ToLowercase, false&gt;(c);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> upper = ConvertLatin1&lt;ToUppercase, false&gt;(c);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> test = Latin1::ConvertNonLatin1ToLatin1(c);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="comment">// Filter out all character whose upper is not their lower or vice versa.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">if</span> (lower == 0 &amp;&amp; upper == 0) {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      CheckCanonicalEquivalence(c, test);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">if</span> (lower &gt; Latin1::kMaxChar &amp;&amp; upper &gt; Latin1::kMaxChar) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      CheckCanonicalEquivalence(c, test);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    }</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (lower == 0 &amp;&amp; upper != 0) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      lower = ConvertLatin1&lt;ToLowercase, false&gt;(upper);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">if</span> (upper == 0 &amp;&amp; lower != c) {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      upper = ConvertLatin1&lt;ToUppercase, false&gt;(lower);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordflow">if</span> (lower &gt; Latin1::kMaxChar &amp;&amp; upper &gt; Latin1::kMaxChar) {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      CheckCanonicalEquivalence(c, test);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">if</span> (upper != c &amp;&amp; lower != c) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      CheckCanonicalEquivalence(c, test);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4789b60113833ac293f9d1aa9a6372e8">Min</a>(upper, lower), test);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;}</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div>
<div class="line"><a name="l01357"></a><span class="lineno"><a class="line" href="../../dd/de7/class_dummy_resource.html"> 1357</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../dd/de7/class_dummy_resource.html">DummyResource</a>: <span class="keyword">public</span> <a class="code" href="../../d3/d29/classv8_1_1_string_1_1_external_string_resource.html">v8::String::ExternalStringResource</a> {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01359"></a><span class="lineno"><a class="line" href="../../dd/de7/class_dummy_resource.html#aa547298d85542d36e466a11986ad0267"> 1359</a></span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* <a class="code" href="../../dd/de7/class_dummy_resource.html#aa547298d85542d36e466a11986ad0267">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>; }</div>
<div class="line"><a name="l01360"></a><span class="lineno"><a class="line" href="../../dd/de7/class_dummy_resource.html#ac8566c86772bfd359a614909dab1ad1d"> 1360</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../dd/de7/class_dummy_resource.html#ac8566c86772bfd359a614909dab1ad1d">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 1 &lt;&lt; 30; }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;};</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div>
<div class="line"><a name="l01364"></a><span class="lineno"><a class="line" href="../../dd/d88/class_dummy_one_byte_resource.html"> 1364</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../dd/d88/class_dummy_one_byte_resource.html">DummyOneByteResource</a>: <span class="keyword">public</span> <a class="code" href="../../de/dea/classv8_1_1_string_1_1_external_ascii_string_resource.html">v8::String::ExternalOneByteStringResource</a> {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01366"></a><span class="lineno"><a class="line" href="../../dd/d88/class_dummy_one_byte_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3"> 1366</a></span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dd/d88/class_dummy_one_byte_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>; }</div>
<div class="line"><a name="l01367"></a><span class="lineno"><a class="line" href="../../dd/d88/class_dummy_one_byte_resource.html#ac8566c86772bfd359a614909dab1ad1d"> 1367</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../dd/d88/class_dummy_one_byte_resource.html#ac8566c86772bfd359a614909dab1ad1d">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 1 &lt;&lt; 30; }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;};</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div>
<div class="line"><a name="l01371"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#ae57c1d9fd8529ec5b3c1f94788a3ab7c"> 1371</a></span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">TEST</a>(InvalidExternalString) {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <a class="code" href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a>();</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate = <a class="code" href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a>();</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  { <a class="code" href="../../dd/d7e/classv8_1_1internal_1_1_handle_scope.html">HandleScope</a> scope(isolate);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="../../dd/d88/class_dummy_one_byte_resource.html">DummyOneByteResource</a> r;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>()-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a7e314af11b7b3f3044361a786e9892ec">NewExternalStringFromAscii</a>(&amp;r).<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a3c45461717ff230edd665ce24da988c5">is_null</a>());</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a60114d0464a7f52e3ac3768b301c859a">has_pending_exception</a>());</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a539f80b991e74ae3aca5a8cb41c4672e">clear_pending_exception</a>();</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  { <a class="code" href="../../dd/d7e/classv8_1_1internal_1_1_handle_scope.html">HandleScope</a> scope(isolate);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <a class="code" href="../../dd/de7/class_dummy_resource.html">DummyResource</a> r;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">factory</a>()-&gt;<a class="code" href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a5404cd0a0cc9f0a34de0bd97900dbccd">NewExternalStringFromTwoByte</a>(&amp;r).<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a3c45461717ff230edd665ce24da988c5">is_null</a>());</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a60114d0464a7f52e3ac3768b301c859a">has_pending_exception</a>());</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    isolate-&gt;<a class="code" href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a539f80b991e74ae3aca5a8cb41c4672e">clear_pending_exception</a>();</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;}</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div>
<div class="line"><a name="l01391"></a><span class="lineno"><a class="line" href="../../d6/dc1/test-strings_8cc.html#ac52a120fdad1096d2e58aebe1b41fcfb"> 1391</a></span>&#160;<span class="preprocessor">#define INVALID_STRING_TEST(FUN, TYPE)                                         \</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="preprocessor">  TEST(StringOOM##FUN) {                                                       \</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="preprocessor">    CcTest::InitializeVM();                                                    \</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="preprocessor">    LocalContext context;                                                      \</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="preprocessor">    Isolate* isolate = CcTest::i_isolate();                                    \</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="preprocessor">    STATIC_ASSERT(String::kMaxLength &lt; kMaxInt);                               \</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="preprocessor">    static const int invalid = String::kMaxLength + 1;                         \</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="preprocessor">    HandleScope scope(isolate);                                                \</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="preprocessor">    Vector&lt;TYPE&gt; dummy = Vector&lt;TYPE&gt;::New(invalid);                           \</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="preprocessor">    CHECK(isolate-&gt;factory()-&gt;FUN(Vector&lt;const TYPE&gt;::cast(dummy)).is_null()); \</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="preprocessor">    memset(dummy.start(), 0x20, dummy.length() * sizeof(TYPE));                \</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="preprocessor">    CHECK(isolate-&gt;has_pending_exception());                                   \</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="preprocessor">    isolate-&gt;clear_pending_exception();                                        \</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="preprocessor">    dummy.Dispose();                                                           \</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="preprocessor">  }</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<a class="code" href="../../d6/dc1/test-strings_8cc.html#ac52a120fdad1096d2e58aebe1b41fcfb">INVALID_STRING_TEST</a>(NewStringFromAscii, <span class="keywordtype">char</span>)</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<a class="code" href="../../d6/dc1/test-strings_8cc.html#ac52a120fdad1096d2e58aebe1b41fcfb">INVALID_STRING_TEST</a>(NewStringFromUtf8, <span class="keywordtype">char</span>)</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<a class="code" href="../../d6/dc1/test-strings_8cc.html#ac52a120fdad1096d2e58aebe1b41fcfb">INVALID_STRING_TEST</a>(NewStringFromOneByte, uint8_t)</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<a class="code" href="../../d6/dc1/test-strings_8cc.html#ac52a120fdad1096d2e58aebe1b41fcfb">INVALID_STRING_TEST</a>(InternalizeOneByteString, uint8_t)</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<a class="code" href="../../d6/dc1/test-strings_8cc.html#ac52a120fdad1096d2e58aebe1b41fcfb">INVALID_STRING_TEST</a>(InternalizeUtf8String, <span class="keywordtype">char</span>)</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="preprocessor">#undef INVALID_STRING_TEST</span></div>
<div class="ttc" id="class_my_random_number_generator_html_a719f57f99235203e7710ab807cab1430"><div class="ttname"><a href="../../d8/d0c/class_my_random_number_generator.html#a719f57f99235203e7710ab807cab1430">MyRandomNumberGenerator::MyRandomNumberGenerator</a></div><div class="ttdeci">MyRandomNumberGenerator()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00045">test-strings.cc:45</a></div></div>
<div class="ttc" id="class_my_random_number_generator_html_a51c1e0231dbad8016c836f9ac0a47dd7"><div class="ttname"><a href="../../d8/d0c/class_my_random_number_generator.html#a51c1e0231dbad8016c836f9ac0a47dd7">MyRandomNumberGenerator::init</a></div><div class="ttdeci">void init(uint32_t seed=0x5688c73e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00049">test-strings.cc:49</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aa93c2c60a1492707ba7686a2d1579a32"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aa93c2c60a1492707ba7686a2d1579a32">v8::internal::NULL</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00269">flags.cc:269</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a1eb1a8d3d782d6567661dc32158c735c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a1eb1a8d3d782d6567661dc32158c735c">v8::internal::s2</a></div><div class="ttdeci">const SwVfpRegister s2</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00398">assembler-arm.h:398</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a6e891964a37680c01e21dedac6ffe670"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a6e891964a37680c01e21dedac6ffe670">v8::String::Length</a></div><div class="ttdeci">int Length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04137">api.cc:4137</a></div></div>
<div class="ttc" id="test-strings_8cc_html_ab5e81c77568f8be53906044f10cf9480"><div class="ttname"><a href="../../d6/dc1/test-strings_8cc.html#ab5e81c77568f8be53906044f10cf9480">TestStringCharacterStream</a></div><div class="ttdeci">void TestStringCharacterStream(BuildString build, int test_cases)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00656">test-strings.cc:656</a></div></div>
<div class="ttc" id="class_my_random_number_generator_html"><div class="ttname"><a href="../../d8/d0c/class_my_random_number_generator.html">MyRandomNumberGenerator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00043">test-strings.cc:43</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae585d6bcec7e52a46e0e4447bfb2f7f3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">v8::internal::FlattenString</a></div><div class="ttdeci">void FlattenString(Handle&lt; String &gt; string)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d59/handles_8cc_source.html#l00151">handles.cc:151</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a99aec0d3b418feca1f2a2ba79416c60b"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a99aec0d3b418feca1f2a2ba79416c60b">v8::String::WriteUtf8</a></div><div class="ttdeci">int WriteUtf8(char *buffer, int length=-1, int *nchars_ref=NULL, int options=NO_OPTIONS) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04672">api.cc:4672</a></div></div>
<div class="ttc" id="classv8_1_1_resource_constraints_html_acbc7f014a83bddf32a5a29f5c9d6e6b0"><div class="ttname"><a href="../../d8/dcd/classv8_1_1_resource_constraints.html#acbc7f014a83bddf32a5a29f5c9d6e6b0">v8::ResourceConstraints::set_max_young_space_size</a></div><div class="ttdeci">void set_max_young_space_size(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03951">v8.h:3951</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_factory_html_a7e314af11b7b3f3044361a786e9892ec"><div class="ttname"><a href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a7e314af11b7b3f3044361a786e9892ec">v8::internal::Factory::NewExternalStringFromAscii</a></div><div class="ttdeci">Handle&lt; String &gt; NewExternalStringFromAscii(const ExternalAsciiString::Resource *resource)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4e/factory_8cc_source.html#l00554">factory.cc:554</a></div></div>
<div class="ttc" id="checks_8h_html_a0ea8f66bf4733597f9a514fda2151ff9"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(expected, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00252">checks.h:252</a></div></div>
<div class="ttc" id="classunibrow_1_1_latin1_html_a00ad038573734b8d780ba3a00b4bdd14"><div class="ttname"><a href="../../d2/dd0/classunibrow_1_1_latin1.html#a00ad038573734b8d780ba3a00b4bdd14">unibrow::Latin1::kMaxChar</a></div><div class="ttdeci">static const unsigned kMaxChar</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d90/unicode_8h_source.html#l00141">unicode.h:141</a></div></div>
<div class="ttc" id="api_8h_html"><div class="ttname"><a href="../../dc/d65/api_8h.html">api.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_object_html_a25498e38628343f204c8dc99c642860d"><div class="ttname"><a href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a25498e38628343f204c8dc99c642860d">v8::internal::HeapObject::map</a></div><div class="ttdeci">Map * map()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01336">objects-inl.h:1336</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_vector_html"><div class="ttname"><a href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">v8::internal::Vector&lt; const uc16 &gt;</a></div></div>
<div class="ttc" id="classv8_1_1_handle_scope_html"><div class="ttname"><a href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00829">v8.h:829</a></div></div>
<div class="ttc" id="class_my_random_number_generator_html_afbee48e9a3fff0fc142eff192c5acb41"><div class="ttname"><a href="../../d8/d0c/class_my_random_number_generator.html#afbee48e9a3fff0fc142eff192c5acb41">MyRandomNumberGenerator::next</a></div><div class="ttdeci">uint32_t next()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00061">test-strings.cc:61</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_html"><div class="ttname"><a href="../../da/dde/classv8_1_1internal_1_1_handle.html">v8::internal::Handle&lt; String &gt;</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a38f7bd563f3c461c613db5cbf2a82a31ab2f0cd22b1963becef8b91d29d567fe8">v8::internal::TEST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d3e/natives_8h_source.html#l00039">natives.h:39</a></div></div>
<div class="ttc" id="classv8_1_1_string_1_1_external_ascii_string_resource_html"><div class="ttname"><a href="../../de/dea/classv8_1_1_string_1_1_external_ascii_string_resource.html">v8::String::ExternalAsciiStringResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01823">v8.h:1823</a></div></div>
<div class="ttc" id="class_dummy_resource_html_ac8566c86772bfd359a614909dab1ad1d"><div class="ttname"><a href="../../dd/de7/class_dummy_resource.html#ac8566c86772bfd359a614909dab1ad1d">DummyResource::length</a></div><div class="ttdeci">virtual size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01360">test-strings.cc:1360</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html_afe1fa31a909cf533daaa9b30159f7ad9"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html#afe1fa31a909cf533daaa9b30159f7ad9">v8::internal::String::IsFlat</a></div><div class="ttdeci">bool IsFlat()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03030">objects-inl.h:3030</a></div></div>
<div class="ttc" id="class_dummy_resource_html"><div class="ttname"><a href="../../dd/de7/class_dummy_resource.html">DummyResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01357">test-strings.cc:1357</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_a53259c85a9a7f54c354c7871cb340073"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">v8::internal::Smi::FromInt</a></div><div class="ttdeci">static Smi * FromInt(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01209">objects-inl.h:1209</a></div></div>
<div class="ttc" id="checks_8h_html_ad5a1a3bc35696ef5a1070bca3a419c99"><div class="ttname"><a href="../../d5/d16/checks_8h.html#ad5a1a3bc35696ef5a1070bca3a419c99">CHECK_GT</a></div><div class="ttdeci">#define CHECK_GT(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00260">checks.h:260</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a68f455077e74f15d67c6cc1664dbc266"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">v8::TryCatch::HasCaught</a></div><div class="ttdeci">bool HasCaught() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01901">api.cc:1901</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_per_thread_assert_scope_debug_only_html"><div class="ttname"><a href="../../d0/deb/classv8_1_1internal_1_1_per_thread_assert_scope_debug_only.html">v8::internal::PerThreadAssertScopeDebugOnly&lt; HEAP_ALLOCATION_ASSERT, false &gt;</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_html_a1bb6d9f06f55a0a0a8746531c3eb20ac"><div class="ttname"><a href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a1bb6d9f06f55a0a0a8746531c3eb20ac">v8::internal::ConsString::first</a></div><div class="ttdeci">String * first()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03207">objects-inl.h:3207</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_factory_html_aa579c5790fe1a24fce000b97380d5cd7"><div class="ttname"><a href="../../dd/d91/classv8_1_1internal_1_1_factory.html#aa579c5790fe1a24fce000b97380d5cd7">v8::internal::Factory::NewStringFromAscii</a></div><div class="ttdeci">Handle&lt; String &gt; NewStringFromAscii(Vector&lt; const char &gt; str, PretenureFlag pretenure=NOT_TENURED)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d06/factory_8h_source.html#l00141">factory.h:141</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_iterator_op_html_a8339207ca2b409682aae7f1d50b4b69d"><div class="ttname"><a href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html#a8339207ca2b409682aae7f1d50b4b69d">v8::internal::ConsStringIteratorOp::ContinueOperation</a></div><div class="ttdeci">String * ContinueOperation(int32_t *type_out, unsigned *length_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03359">objects-inl.h:3359</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_iterator_op_html_a99a73344c7c34e5d31b4fae7dc12d136"><div class="ttname"><a href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html#a99a73344c7c34e5d31b4fae7dc12d136">v8::internal::ConsStringIteratorOp::HasMore</a></div><div class="ttdeci">bool HasMore()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03349">objects-inl.h:3349</a></div></div>
<div class="ttc" id="namespaceunibrow_html_a32f2e37ee053cf2ce8ca28d1f74630e5"><div class="ttname"><a href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/unicode_8cc_source.html#l00047">unicode.cc:47</a></div></div>
<div class="ttc" id="class_cons_string_stats_html_aa1c484031a414cc165205ce5769c30fe"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html#aa1c484031a414cc165205ce5769c30fe">ConsStringStats::right_traversals_</a></div><div class="ttdeci">unsigned right_traversals_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00237">test-strings.cc:237</a></div></div>
<div class="ttc" id="checks_8h_html_ac22830a985e1daed0c9eadba8c6f606e"><div class="ttname"><a href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00329">checks.h:329</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_aa6dff7b47204c24bc90b198b34e85ca1"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#aa6dff7b47204c24bc90b198b34e85ca1">ConsStringGenerationData::empty_leaf_threshold_</a></div><div class="ttdeci">double empty_leaf_threshold_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00272">test-strings.cc:272</a></div></div>
<div class="ttc" id="class_cc_test_html_a63bdd828e23bef26298ac034078de4a3"><div class="ttname"><a href="../../da/d17/class_cc_test.html#a63bdd828e23bef26298ac034078de4a3">CcTest::heap</a></div><div class="ttdeci">static i::Heap * heap()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00106">cctest.h:106</a></div></div>
<div class="ttc" id="namespaceunibrow_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">unibrow::uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/unicode_8cc_source.html#l00046">unicode.cc:46</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_isolate_html_a539f80b991e74ae3aca5a8cb41c4672e"><div class="ttname"><a href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a539f80b991e74ae3aca5a8cb41c4672e">v8::internal::Isolate::clear_pending_exception</a></div><div class="ttdeci">void clear_pending_exception()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l00579">isolate.h:579</a></div></div>
<div class="ttc" id="classv8_1_1_integer_html_a4ceece8606666ec5c01ffd0d1bd46167"><div class="ttname"><a href="../../df/d84/classv8_1_1_integer.html#a4ceece8606666ec5c01ffd0d1bd46167">v8::Integer::New</a></div><div class="ttdeci">static Local&lt; Integer &gt; New(Isolate *isolate, int32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l06233">api.cc:6233</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a91b68fb0b5558f1c9539015c1bbf7af2"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a91b68fb0b5558f1c9539015c1bbf7af2">v8::Value::ToString</a></div><div class="ttdeci">Local&lt; String &gt; ToString() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02536">api.cc:2536</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_aef3852f4561ef81187a88e028968fe54aa46acb614af63a7a3d6b08baa9d7fb7a"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#aef3852f4561ef81187a88e028968fe54aa46acb614af63a7a3d6b08baa9d7fb7a">v8::String::kNormalString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01864">v8.h:1864</a></div></div>
<div class="ttc" id="checks_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00075">checks.h:75</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_html_a3454d29032b8ce240c4617c05e739f17"><div class="ttname"><a href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#a3454d29032b8ce240c4617c05e739f17">v8::internal::ConsString::second</a></div><div class="ttdeci">String * second()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03223">objects-inl.h:3223</a></div></div>
<div class="ttc" id="class_my_random_number_generator_html_a4010b9519473aedd50a16eb52a5c1006"><div class="ttname"><a href="../../d8/d0c/class_my_random_number_generator.html#a4010b9519473aedd50a16eb52a5c1006">MyRandomNumberGenerator::next</a></div><div class="ttdeci">bool next(double threshold)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00079">test-strings.cc:79</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html_abd6f7c88eb5faccbf64e6606bee7e6f3"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">AsciiVectorResource::data</a></div><div class="ttdeci">virtual const char * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01117">test-strings.cc:1117</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_isolate_html_a8b46196d58e6905fbfde58a8fca2f6c0"><div class="ttname"><a href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a8b46196d58e6905fbfde58a8fca2f6c0">v8::internal::Isolate::factory</a></div><div class="ttdeci">Factory * factory()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l00995">isolate.h:995</a></div></div>
<div class="ttc" id="checks_8h_html_a54b4a23953fc7a4f455e4fc47e05c215"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a></div><div class="ttdeci">#define CHECK_GE(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00261">checks.h:261</a></div></div>
<div class="ttc" id="class_cons_string_stats_html_ad0033c2d52f7fc782ce999d012acf0b2"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html#ad0033c2d52f7fc782ce999d012acf0b2">ConsStringStats::left_traversals_</a></div><div class="ttdeci">unsigned left_traversals_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00236">test-strings.cc:236</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html">v8::internal::String</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l08731">objects.h:8731</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_abd7228db8201e7f65153a896fe8de9bd"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">v8::internal::Smi::cast</a></div><div class="ttdeci">static Smi * cast(Object *object)</div></div>
<div class="ttc" id="cctest_8h_html"><div class="ttname"><a href="../../df/d84/cctest_8h.html">cctest.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html_ae99b846844c674efbe345f82ecdcca5a"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html#ae99b846844c674efbe345f82ecdcca5a">v8::internal::String::IsAscii</a></div><div class="ttdeci">static bool IsAscii(const char *chars, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l08966">objects.h:8966</a></div></div>
<div class="ttc" id="test-accessors_8cc_html_a819b717d29c6c488a332fefeeb3815ba"><div class="ttname"><a href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a></div><div class="ttdeci">int foo</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df1/test-accessors_8cc_source.html#l00118">test-accessors.cc:118</a></div></div>
<div class="ttc" id="classv8_1_1_string_1_1_utf8_value_html"><div class="ttname"><a href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01949">v8.h:1949</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_sliced_string_html_a49b5aa4f6f2de3fa4af03b4d7e6e03a9"><div class="ttname"><a href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#a49b5aa4f6f2de3fa4af03b4d7e6e03a9">v8::internal::SlicedString::parent</a></div><div class="ttdeci">String * parent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03192">objects-inl.h:3192</a></div></div>
<div class="ttc" id="class_resource_html_ac8566c86772bfd359a614909dab1ad1d"><div class="ttname"><a href="../../df/d00/class_resource.html#ac8566c86772bfd359a614909dab1ad1d">Resource::length</a></div><div class="ttdeci">virtual size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00107">test-strings.cc:107</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html_a2baf8b853eece7eda2e03403065976d6"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html#a2baf8b853eece7eda2e03403065976d6">v8::internal::String::IsOneByte</a></div><div class="ttdeci">static bool IsOneByte(const uc16 *chars, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l08985">objects.h:8985</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_html_af8caa6f49b0ab73aa9c915b5caec21df"><div class="ttname"><a href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#af8caa6f49b0ab73aa9c915b5caec21df">v8::internal::ConsString::kMinLength</a></div><div class="ttdeci">static const int kMinLength</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l09170">objects.h:9170</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_iterator_op_html"><div class="ttname"><a href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html">v8::internal::ConsStringIteratorOp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l09395">objects.h:9395</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a636cb0f6c7a1ff42282e3a7f68c5d54d"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a636cb0f6c7a1ff42282e3a7f68c5d54d">v8::String::MakeExternal</a></div><div class="ttdeci">bool MakeExternal(ExternalStringResource *resource)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05507">api.cc:5507</a></div></div>
<div class="ttc" id="test-strings_8cc_html_ac52a120fdad1096d2e58aebe1b41fcfb"><div class="ttname"><a href="../../d6/dc1/test-strings_8cc.html#ac52a120fdad1096d2e58aebe1b41fcfb">INVALID_STRING_TEST</a></div><div class="ttdeci">#define INVALID_STRING_TEST(FUN, TYPE)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01391">test-strings.cc:1391</a></div></div>
<div class="ttc" id="class_cons_string_stats_html"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html">ConsStringStats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00226">test-strings.cc:226</a></div></div>
<div class="ttc" id="checks_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00052">checks.h:52</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_aadeb6dc911807131e21b07b33971540c"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#aadeb6dc911807131e21b07b33971540c">ConsStringGenerationData::early_termination_threshold_</a></div><div class="ttdeci">double early_termination_threshold_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00269">test-strings.cc:269</a></div></div>
<div class="ttc" id="class_dummy_one_byte_resource_html_ac8566c86772bfd359a614909dab1ad1d"><div class="ttname"><a href="../../dd/d88/class_dummy_one_byte_resource.html#ac8566c86772bfd359a614909dab1ad1d">DummyOneByteResource::length</a></div><div class="ttdeci">virtual size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01367">test-strings.cc:1367</a></div></div>
<div class="ttc" id="classv8_1_1_resource_constraints_html_af87a04cf17d764721ff8220ce1b23de4"><div class="ttname"><a href="../../d8/dcd/classv8_1_1_resource_constraints.html#af87a04cf17d764721ff8220ce1b23de4">v8::ResourceConstraints::set_max_old_space_size</a></div><div class="ttdeci">void set_max_old_space_size(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03953">v8.h:3953</a></div></div>
<div class="ttc" id="class_cons_string_stats_html_a2690b401b2e3df8789053f3881c25268"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html#a2690b401b2e3df8789053f3881c25268">ConsStringStats::empty_leaves_</a></div><div class="ttdeci">unsigned empty_leaves_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00234">test-strings.cc:234</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_factory_html_ae4e4973fcb19163a88bb5ee945f2edab"><div class="ttname"><a href="../../dd/d91/classv8_1_1internal_1_1_factory.html#ae4e4973fcb19163a88bb5ee945f2edab">v8::internal::Factory::NewSubString</a></div><div class="ttdeci">Handle&lt; String &gt; NewSubString(Handle&lt; String &gt; str, int begin, int end)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d06/factory_8h_source.html#l00183">factory.h:183</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html">AsciiVectorResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15002">test-api.cc:15002</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_sliced_string_html_aa074f607c308931a814009ca4baa82bf"><div class="ttname"><a href="../../d7/da4/classv8_1_1internal_1_1_sliced_string.html#aa074f607c308931a814009ca4baa82bf">v8::internal::SlicedString::cast</a></div><div class="ttdeci">static SlicedString * cast(Object *obj)</div></div>
<div class="ttc" id="namespacev8_html_acac8ccd7f08c42a70abba08a927ccdf2"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#acac8ccd7f08c42a70abba08a927ccdf2">v8::SetResourceConstraints</a></div><div class="ttdeci">bool V8_EXPORT SetResourceConstraints(Isolate *isolate, ResourceConstraints *constraints)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00508">api.cc:508</a></div></div>
<div class="ttc" id="class_resource_html"><div class="ttname"><a href="../../df/d00/class_resource.html">Resource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00102">test-strings.cc:102</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_factory_html"><div class="ttname"><a href="../../dd/d91/classv8_1_1internal_1_1_factory.html">v8::internal::Factory</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d06/factory_8h_source.html#l00040">factory.h:40</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_html"><div class="ttname"><a href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html">v8::internal::ConsString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l09140">objects.h:9140</a></div></div>
<div class="ttc" id="class_dummy_one_byte_resource_html"><div class="ttname"><a href="../../dd/d88/class_dummy_one_byte_resource.html">DummyOneByteResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01364">test-strings.cc:1364</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a4f1986c4bc47434d4c50fbacfc3ff927"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a4f1986c4bc47434d4c50fbacfc3ff927">v8::String::Utf8Length</a></div><div class="ttdeci">int Utf8Length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04460">api.cc:4460</a></div></div>
<div class="ttc" id="test-hashing_8cc_html_a922008b4db75f9f1a9959460bb05fe37"><div class="ttname"><a href="../../d4/d93/test-hashing_8cc.html#a922008b4db75f9f1a9959460bb05fe37">check</a></div><div class="ttdeci">void check(i::Vector&lt; const uint8_t &gt; string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d93/test-hashing_8cc_source.html#l00187">test-hashing.cc:187</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html_ac127add068c00f6e9196071753bb6fb3"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html#ac127add068c00f6e9196071753bb6fb3">AsciiVectorResource::~AsciiVectorResource</a></div><div class="ttdeci">virtual ~AsciiVectorResource()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01115">test-strings.cc:1115</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_a88f578325f9ee40715fec2e7774ba81c"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#a88f578325f9ee40715fec2e7774ba81c">ConsStringGenerationData::rng_</a></div><div class="ttdeci">MyRandomNumberGenerator rng_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00277">test-strings.cc:277</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html_a3d0f4ae571310c6ed081daa3985ecb47"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html#a3d0f4ae571310c6ed081daa3985ecb47">v8::internal::String::length</a></div><div class="ttdeci">int length()</div></div>
<div class="ttc" id="class_ascii_resource_html_a2f1775a5e2c28a8393bb3bf15edb7a03"><div class="ttname"><a href="../../d3/d06/class_ascii_resource.html#a2f1775a5e2c28a8393bb3bf15edb7a03">AsciiResource::AsciiResource</a></div><div class="ttdeci">AsciiResource(const char *data, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00117">test-strings.cc:117</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_a73a3d09ecd0ec8cb8391ddcf9add7cdc"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#a73a3d09ecd0ec8cb8391ddcf9add7cdc">ConsStringGenerationData::empty_string_</a></div><div class="ttdeci">String * empty_string_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00276">test-strings.cc:276</a></div></div>
<div class="ttc" id="classv8_1_1_script_html_abf015c4a56c9e90babce709acc312471"><div class="ttname"><a href="../../d0/d35/classv8_1_1_script.html#abf015c4a56c9e90babce709acc312471">v8::Script::Compile</a></div><div class="ttdeci">static Local&lt; Script &gt; Compile(Handle&lt; String &gt; source, ScriptOrigin *origin=NULL, ScriptData *script_data=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01832">api.cc:1832</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_a372de693ad40b3f42839c8ec6ac845f4"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#a372de693ad40b3f42839c8ec6ac845f4">ConsStringGenerationData::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00306">test-strings.cc:306</a></div></div>
<div class="ttc" id="class_ascii_resource_html_ac8566c86772bfd359a614909dab1ad1d"><div class="ttname"><a href="../../d3/d06/class_ascii_resource.html#ac8566c86772bfd359a614909dab1ad1d">AsciiResource::length</a></div><div class="ttdeci">virtual size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00121">test-strings.cc:121</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_a8fc7f005c25f7ac02e35c8ebf51183b3"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">v8::Context::Global</a></div><div class="ttdeci">Local&lt; Object &gt; Global()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05239">api.cc:5239</a></div></div>
<div class="ttc" id="class_my_random_number_generator_html_af9072759c8a3e04aeeb3eef32fa3ebca"><div class="ttname"><a href="../../d8/d0c/class_my_random_number_generator.html#af9072759c8a3e04aeeb3eef32fa3ebca">MyRandomNumberGenerator::next</a></div><div class="ttdeci">uint32_t next(int max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00075">test-strings.cc:75</a></div></div>
<div class="ttc" id="globals_8h_html_af8df3547bfde53a5acb93e2607b0034a"><div class="ttname"><a href="../../d5/d87/globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a></div><div class="ttdeci">#define DISALLOW_COPY_AND_ASSIGN(TypeName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00359">globals.h:359</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_factory_html_a196ccf9888402bffd01c2fdeda60d87d"><div class="ttname"><a href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a196ccf9888402bffd01c2fdeda60d87d">v8::internal::Factory::NewStringFromTwoByte</a></div><div class="ttdeci">Handle&lt; String &gt; NewStringFromTwoByte(Vector&lt; const uc16 &gt; str, PretenureFlag pretenure=NOT_TENURED)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4e/factory_8cc_source.html#l00282">factory.cc:282</a></div></div>
<div class="ttc" id="class_ascii_resource_html"><div class="ttname"><a href="../../d3/d06/class_ascii_resource.html">AsciiResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00115">test-strings.cc:115</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_character_stream_html"><div class="ttname"><a href="../../d1/db2/classv8_1_1internal_1_1_string_character_stream.html">v8::internal::StringCharacterStream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l09435">objects.h:9435</a></div></div>
<div class="ttc" id="class_cc_test_html_a6659f2312e90eb682af23f6732cc41eb"><div class="ttname"><a href="../../da/d17/class_cc_test.html#a6659f2312e90eb682af23f6732cc41eb">CcTest::i_isolate</a></div><div class="ttdeci">static i::Isolate * i_isolate()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00102">cctest.h:102</a></div></div>
<div class="ttc" id="class_cons_string_stats_html_a7a04d3f6553844553bc1760f9508ac6f"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html#a7a04d3f6553844553bc1760f9508ac6f">ConsStringStats::VerifyEqual</a></div><div class="ttdeci">void VerifyEqual(const ConsStringStats &amp;that) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00252">test-strings.cc:252</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html">ConsStringGenerationData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00261">test-strings.cc:261</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_isolate_html_a60114d0464a7f52e3ac3768b301c859a"><div class="ttname"><a href="../../dd/d38/classv8_1_1internal_1_1_isolate.html#a60114d0464a7f52e3ac3768b301c859a">v8::internal::Isolate::has_pending_exception</a></div><div class="ttdeci">bool has_pending_exception()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l00587">isolate.h:587</a></div></div>
<div class="ttc" id="test-strings_8cc_html_a9091afda056a22b1506476f575f44425"><div class="ttname"><a href="../../d6/dc1/test-strings_8cc.html#a9091afda056a22b1506476f575f44425">AccumulateStats</a></div><div class="ttdeci">void AccumulateStats(ConsString *cons_string, ConsStringStats *stats)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00318">test-strings.cc:318</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a28482e549042324109bb774ac8f877fb"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a28482e549042324109bb774ac8f877fb">v8::String::Cast</a></div><div class="ttdeci">static V8_INLINE String * Cast(v8::Value *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l06174">v8.h:6174</a></div></div>
<div class="ttc" id="class_resource_html_aa547298d85542d36e466a11986ad0267"><div class="ttname"><a href="../../df/d00/class_resource.html#aa547298d85542d36e466a11986ad0267">Resource::data</a></div><div class="ttdeci">virtual const uint16_t * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00106">test-strings.cc:106</a></div></div>
<div class="ttc" id="classv8_1_1_handle_html"><div class="ttname"><a href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt; v8::String &gt;</a></div></div>
<div class="ttc" id="class_dummy_one_byte_resource_html_abd6f7c88eb5faccbf64e6606bee7e6f3"><div class="ttname"><a href="../../dd/d88/class_dummy_one_byte_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">DummyOneByteResource::data</a></div><div class="ttdeci">virtual const char * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01366">test-strings.cc:1366</a></div></div>
<div class="ttc" id="class_ascii_resource_html_abd6f7c88eb5faccbf64e6606bee7e6f3"><div class="ttname"><a href="../../d3/d06/class_ascii_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">AsciiResource::data</a></div><div class="ttdeci">virtual const char * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00120">test-strings.cc:120</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_ab0f123fbb2a9e29a1335e55636373502"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#ab0f123fbb2a9e29a1335e55636373502">v8::String::NewFromTwoByte</a></div><div class="ttdeci">static Local&lt; String &gt; NewFromTwoByte(Isolate *isolate, const uint16_t *data, NewStringType type=kNormalString, int length=-1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05443">api.cc:5443</a></div></div>
<div class="ttc" id="classv8_1_1_array_html_aa00019d6db6ccfa1549fd8154a42781d"><div class="ttname"><a href="../../d3/d32/classv8_1_1_array.html#aa00019d6db6ccfa1549fd8154a42781d">v8::Array::New</a></div><div class="ttdeci">static Local&lt; Array &gt; New(Isolate *isolate, int length=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05786">api.cc:5786</a></div></div>
<div class="ttc" id="class_cons_string_stats_html_a562f39146ef47b1d993681d833f8df5a"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html#a562f39146ef47b1d993681d833f8df5a">ConsStringStats::leaves_</a></div><div class="ttdeci">unsigned leaves_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00233">test-strings.cc:233</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_a2f5b88ac26a3fc5dbbb81cd8a74964c1"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#a2f5b88ac26a3fc5dbbb81cd8a74964c1">ConsStringGenerationData::leftness_</a></div><div class="ttdeci">double leftness_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00270">test-strings.cc:270</a></div></div>
<div class="ttc" id="test-strings_8cc_html_a012da1f5d29734e41e465f7dd40cff45"><div class="ttname"><a href="../../d6/dc1/test-strings_8cc.html#a012da1f5d29734e41e465f7dd40cff45">VerifyConsString</a></div><div class="ttdeci">void VerifyConsString(Handle&lt; String &gt; root, ConsStringGenerationData *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00380">test-strings.cc:380</a></div></div>
<div class="ttc" id="classv8_1_1_utils_html_a006f477612f18ee758c77a29fdbb7d7f"><div class="ttname"><a href="../../d4/d4b/classv8_1_1_utils.html#a006f477612f18ee758c77a29fdbb7d7f">v8::Utils::OpenHandle</a></div><div class="ttdeci">static v8::internal::Handle&lt; To &gt; OpenHandle(v8::Local&lt; From &gt; handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d65/api_8h_source.html#l00308">api.h:308</a></div></div>
<div class="ttc" id="factory_8h_html"><div class="ttname"><a href="../../de/d06/factory_8h.html">factory.h</a></div></div>
<div class="ttc" id="classv8_1_1_resource_constraints_html"><div class="ttname"><a href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03934">v8.h:3934</a></div></div>
<div class="ttc" id="checks_8h_html_a403854a78bdaff5e42e57b4126bd12f4"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a></div><div class="ttdeci">#define CHECK_NE(unexpected, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00256">checks.h:256</a></div></div>
<div class="ttc" id="class_cons_string_stats_html_a616afe9a552b9f4a0026922b804cc5b0"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html#a616afe9a552b9f4a0026922b804cc5b0">ConsStringStats::chars_</a></div><div class="ttdeci">unsigned chars_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00235">test-strings.cc:235</a></div></div>
<div class="ttc" id="class_cons_string_stats_html_a0da70f2da2b7551a5cfb5869122b3d91"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html#a0da70f2da2b7551a5cfb5869122b3d91">ConsStringStats::ConsStringStats</a></div><div class="ttdeci">ConsStringStats()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00228">test-strings.cc:228</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a00e8464566c15cbc97c5c8c850309df7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">v8::internal::CStrVector</a></div><div class="ttdeci">Vector&lt; const char &gt; CStrVector(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00574">utils.h:574</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ade544f21fa0bf00a352dfd991253bc03"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">v8::internal::StrLength</a></div><div class="ttdeci">int StrLength(const char *string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00253">utils.h:253</a></div></div>
<div class="ttc" id="checks_8h_html_a90b329b303c3a01760b7ad27fe92733f"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a90b329b303c3a01760b7ad27fe92733f">CHECK_LE</a></div><div class="ttdeci">#define CHECK_LE(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00263">checks.h:263</a></div></div>
<div class="ttc" id="test-strings_8cc_html_a043bb959c33f956dccdd26e9ac54e42c"><div class="ttname"><a href="../../d6/dc1/test-strings_8cc.html#a043bb959c33f956dccdd26e9ac54e42c">AccumulateStatsWithOperator</a></div><div class="ttdeci">void AccumulateStatsWithOperator(ConsString *cons_string, ConsStringStats *stats)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00357">test-strings.cc:357</a></div></div>
<div class="ttc" id="classv8_1_1_string_1_1_external_string_resource_html"><div class="ttname"><a href="../../d3/d29/classv8_1_1_string_1_1_external_string_resource.html">v8::String::ExternalStringResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01789">v8.h:1789</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a00b253ab5971676c7634e1eba361c47a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a00b253ab5971676c7634e1eba361c47a">v8::internal::s1</a></div><div class="ttdeci">const SwVfpRegister s1</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00397">assembler-arm.h:397</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_always_allocate_scope_html"><div class="ttname"><a href="../../d4/d81/classv8_1_1internal_1_1_always_allocate_scope.html">v8::internal::AlwaysAllocateScope</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l02591">heap.h:2591</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_factory_html_a5404cd0a0cc9f0a34de0bd97900dbccd"><div class="ttname"><a href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a5404cd0a0cc9f0a34de0bd97900dbccd">v8::internal::Factory::NewExternalStringFromTwoByte</a></div><div class="ttdeci">Handle&lt; String &gt; NewExternalStringFromTwoByte(const ExternalTwoByteString::Resource *resource)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4e/factory_8cc_source.html#l00563">factory.cc:563</a></div></div>
<div class="ttc" id="class_cc_test_html_a69225bcd7661f7b1e174e74ebcfadf73"><div class="ttname"><a href="../../da/d17/class_cc_test.html#a69225bcd7661f7b1e174e74ebcfadf73">CcTest::InitializeVM</a></div><div class="ttdeci">static void InitializeVM()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00116">cctest.h:116</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_a8bae8a40dd1362c6fa7813e0cfb3045f"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#a8bae8a40dd1362c6fa7813e0cfb3045f">ConsStringGenerationData::ConsStringGenerationData</a></div><div class="ttdeci">ConsStringGenerationData(bool long_blocks)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00286">test-strings.cc:286</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_a31c620c66b98f7849fbcf333d6075a3b"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#a31c620c66b98f7849fbcf333d6075a3b">ConsStringGenerationData::max_leaves_</a></div><div class="ttdeci">unsigned max_leaves_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00273">test-strings.cc:273</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_html_a3c45461717ff230edd665ce24da988c5"><div class="ttname"><a href="../../da/dde/classv8_1_1internal_1_1_handle.html#a3c45461717ff230edd665ce24da988c5">v8::internal::Handle::is_null</a></div><div class="ttdeci">bool is_null() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d23/handles_8h_source.html#l00081">handles.h:81</a></div></div>
<div class="ttc" id="class_resource_html_af04be79e8cd12b4e3ab7361f3237ed26"><div class="ttname"><a href="../../df/d00/class_resource.html#af04be79e8cd12b4e3ab7361f3237ed26">Resource::~Resource</a></div><div class="ttdeci">~Resource()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00105">test-strings.cc:105</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a767c85176123a943849a1abecc3d0755"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">v8::internal::uc16</a></div><div class="ttdeci">uint16_t uc16</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00309">globals.h:309</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_ab03dbd7c1b9e18186f045d663f1fa62c"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#ab03dbd7c1b9e18186f045d663f1fa62c">ConsStringGenerationData::early_terminations_</a></div><div class="ttdeci">unsigned early_terminations_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00280">test-strings.cc:280</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_ae84703d103883dcad3dd027ee1d03418"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#ae84703d103883dcad3dd027ee1d03418">ConsStringGenerationData::rightness_</a></div><div class="ttdeci">double rightness_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00271">test-strings.cc:271</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a9ecb1607d0f9a27a5a96116c5e6fc8cc"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a9ecb1607d0f9a27a5a96116c5e6fc8cc">v8::String::NewExternal</a></div><div class="ttdeci">static Local&lt; String &gt; NewExternal(Isolate *isolate, ExternalStringResource *resource)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05493">api.cc:5493</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html_ab59290224b145b93fa2767f3a85b0209"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html#ab59290224b145b93fa2767f3a85b0209">AsciiVectorResource::AsciiVectorResource</a></div><div class="ttdeci">AsciiVectorResource(i::Vector&lt; const char &gt; vector)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01113">test-strings.cc:1113</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l05025">v8.h:5025</a></div></div>
<div class="ttc" id="objects_8h_html"><div class="ttname"><a href="../../df/d91/objects_8h.html">objects.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_map_html_a331c2e3486c2fdef0d4eff37543be0e6"><div class="ttname"><a href="../../de/dfe/classv8_1_1internal_1_1_map.html#a331c2e3486c2fdef0d4eff37543be0e6">v8::internal::Map::instance_type</a></div><div class="ttdeci">InstanceType instance_type()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l04012">objects-inl.h:4012</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html_ac8566c86772bfd359a614909dab1ad1d"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d">AsciiVectorResource::length</a></div><div class="ttdeci">virtual size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01116">test-strings.cc:1116</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_scope_html"><div class="ttname"><a href="../../dd/d7e/classv8_1_1internal_1_1_handle_scope.html">v8::internal::HandleScope</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d23/handles_8h_source.html#l00131">handles.h:131</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_a67a446a62330daa010e74d20de4823bb"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#a67a446a62330daa010e74d20de4823bb">ConsStringGenerationData::block</a></div><div class="ttdeci">Handle&lt; String &gt; block(int offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00300">test-strings.cc:300</a></div></div>
<div class="ttc" id="class_resource_html_a74bbfc885711474171e27fad69021633"><div class="ttname"><a href="../../df/d00/class_resource.html#a74bbfc885711474171e27fad69021633">Resource::Resource</a></div><div class="ttdeci">Resource(const uc16 *data, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00104">test-strings.cc:104</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_factory_html_a1e13d1b265d84009d1c9a073a307f931"><div class="ttname"><a href="../../dd/d91/classv8_1_1internal_1_1_factory.html#a1e13d1b265d84009d1c9a073a307f931">v8::internal::Factory::NewConsString</a></div><div class="ttdeci">Handle&lt; String &gt; NewConsString(Handle&lt; String &gt; left, Handle&lt; String &gt; right)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4e/factory_8cc_source.html#l00370">factory.cc:370</a></div></div>
<div class="ttc" id="class_cons_string_stats_html_a372de693ad40b3f42839c8ec6ac845f4"><div class="ttname"><a href="../../d5/d3a/class_cons_string_stats.html#a372de693ad40b3f42839c8ec6ac845f4">ConsStringStats::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00243">test-strings.cc:243</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0166c55019a8ae518b6bb1ac17ad4706"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">v8::internal::DeleteArray</a></div><div class="ttdeci">void DeleteArray(T *array)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db7/allocation_8h_source.html#l00091">allocation.h:91</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a4789b60113833ac293f9d1aa9a6372e8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a4789b60113833ac293f9d1aa9a6372e8">v8::internal::Min</a></div><div class="ttdeci">T Min(T a, T b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00234">utils.h:234</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_html_afe38e038d4fea3396ba864b1e23a20a0"><div class="ttname"><a href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">v8::internal::ConsString::cast</a></div><div class="ttdeci">static ConsString * cast(Object *obj)</div></div>
<div class="ttc" id="classv8_1_1internal_1_1_isolate_html"><div class="ttname"><a href="../../dd/d38/classv8_1_1internal_1_1_isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l00389">isolate.h:389</a></div></div>
<div class="ttc" id="class_dummy_resource_html_aa547298d85542d36e466a11986ad0267"><div class="ttname"><a href="../../dd/de7/class_dummy_resource.html#aa547298d85542d36e466a11986ad0267">DummyResource::data</a></div><div class="ttdeci">virtual const uint16_t * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l01359">test-strings.cc:1359</a></div></div>
<div class="ttc" id="class_local_context_html"><div class="ttname"><a href="../../d7/d05/class_local_context.html">LocalContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00243">cctest.h:243</a></div></div>
<div class="ttc" id="class_cons_string_generation_data_html_aa38b0f581751edff5534a1cf7253a787"><div class="ttname"><a href="../../d4/d51/class_cons_string_generation_data.html#aa38b0f581751edff5534a1cf7253a787">ConsStringGenerationData::stats_</a></div><div class="ttdeci">ConsStringStats stats_</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00279">test-strings.cc:279</a></div></div>
<div class="ttc" id="class_ascii_resource_html_a98c515cabcff4c6def8b8549be81ee79"><div class="ttname"><a href="../../d3/d06/class_ascii_resource.html#a98c515cabcff4c6def8b8549be81ee79">AsciiResource::~AsciiResource</a></div><div class="ttdeci">~AsciiResource()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc1/test-strings_8cc_source.html#l00119">test-strings.cc:119</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_iterator_op_html_abfc79d20ef18244e199162125437795b"><div class="ttname"><a href="../../d7/dbf/classv8_1_1internal_1_1_cons_string_iterator_op.html#abfc79d20ef18244e199162125437795b">v8::internal::ConsStringIteratorOp::Operate</a></div><div class="ttdeci">String * Operate(String *string, unsigned *offset_out, int32_t *type_out, unsigned *length_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d7c/objects_8cc_source.html#l08463">objects.cc:8463</a></div></div>
<div class="ttc" id="classv8_1_1_local_html"><div class="ttname"><a href="../../de/deb/classv8_1_1_local.html">v8::Local&lt; v8::String &gt;</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a79d9a617e12421ae3afb7a2060eb6fe4"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a79d9a617e12421ae3afb7a2060eb6fe4">v8::String::Write</a></div><div class="ttdeci">int Write(uint16_t *buffer, int start=0, int length=-1, int options=NO_OPTIONS) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04761">api.cc:4761</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_aa5e6d5c3ca70b2a1d52415eac4d528f2"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">v8::Object::Set</a></div><div class="ttdeci">bool Set(Handle&lt; Value &gt; key, Handle&lt; Value &gt; value, PropertyAttribute attribs=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03044">api.cc:3044</a></div></div>
<div class="ttc" id="class_cc_test_html_a231c04ff508de4187caa711312746439"><div class="ttname"><a href="../../da/d17/class_cc_test.html#a231c04ff508de4187caa711312746439">CcTest::isolate</a></div><div class="ttdeci">static v8::Isolate * isolate()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00096">cctest.h:96</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a8b0b3550d419120008daa8a8107a9aa4"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a8b0b3550d419120008daa8a8107a9aa4">v8::String::NewFromUtf8</a></div><div class="ttdeci">static Local&lt; String &gt; NewFromUtf8(Isolate *isolate, const char *data, NewStringType type=kNormalString, int length=-1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05417">api.cc:5417</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_13e138d54eb8818da29c3992edef070a.html">test</a></li><li class="navelem"><a class="el" href="../../dir_1e3d32cea81d8a88a96d3906c4607e57.html">cctest</a></li><li class="navelem"><a class="el" href="../../d6/dc1/test-strings_8cc.html">test-strings.cc</a></li>
    <li class="footer">Generated on Sat Jun 7 2014 23:54:46 for v8 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
