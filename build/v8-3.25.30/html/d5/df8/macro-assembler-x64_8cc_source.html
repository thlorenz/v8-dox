<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>v8: src/x64/macro-assembler-x64.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../v8-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">v8
   &#160;<span id="projectnumber">3.25.30(node0.11.13)</span>
   </div>
   <div id="projectbrief">V8 is Google&#39;s open source JavaScript engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/df8/macro-assembler-x64_8cc_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">macro-assembler-x64.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/df8/macro-assembler-x64_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// modification, are permitted provided that the following conditions are</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// met:</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//     * Redistributions in binary form must reproduce the above</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//       copyright notice, this list of conditions and the following</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//       disclaimer in the documentation and/or other materials provided</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//       with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//     * Neither the name of Google Inc. nor the names of its</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//       contributors may be used to endorse or promote products derived</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//       from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;v8.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#if V8_TARGET_ARCH_X64</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d41/bootstrapper_8h.html">bootstrapper.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d39/codegen_8h.html">codegen.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d16/cpu-profiler_8h.html">cpu-profiler.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/da7/assembler-x64_8h.html">assembler-x64.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d13/macro-assembler-x64_8h.html">macro-assembler-x64.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d9d/serialize_8h.html">serialize.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d16/debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/ddb/heap_8h.html">heap.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d36/isolate-inl_8h.html">isolate-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">namespace </span>v8 {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">namespace </span>internal {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<a class="code" href="../../d8/db1/classv8_1_1internal_1_1_macro_assembler.html#adf95c7bdba7635e6435320dabd72edc2">MacroAssembler::MacroAssembler</a>(Isolate* arg_isolate, <span class="keywordtype">void</span>* buffer, <span class="keywordtype">int</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae491df1d2c24e3751c368155c20fe5ef">size</a>)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    : Assembler(arg_isolate, buffer, size),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      generating_stub_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      has_frame_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">false</a>),</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      root_array_available_(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a29dd6ffe8f62d1541ef1c8056c028e9c">true</a>) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">if</span> (isolate() != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    code_object_ = Handle&lt;Object&gt;(isolate()-&gt;heap()-&gt;undefined_value(),</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                                  isolate());</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kInvalidRootRegisterDelta = -1;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;intptr_t MacroAssembler::RootRegisterDelta(ExternalReference other) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">if</span> (predictable_code_size() &amp;&amp;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      (other.address() &lt; <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a><span class="keyword">&gt;</span>(isolate()) ||</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;       other.address() &gt;= <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a><span class="keyword">&gt;</span>(isolate() + 1))) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span> kInvalidRootRegisterDelta;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> roots_register_value = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af499ca60771333c2ada5cf46f7761d33">kRootRegisterBias</a> +</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a><span class="keyword">&gt;</span>(isolate()-&gt;heap()-&gt;roots_array_start());</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  intptr_t delta = other.address() - roots_register_value;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">return</span> delta;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;Operand MacroAssembler::ExternalOperand(ExternalReference target,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                        Register scratch) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">if</span> (root_array_available_ &amp;&amp; !Serializer::enabled()) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    intptr_t delta = RootRegisterDelta(target);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span> (delta != kInvalidRootRegisterDelta &amp;&amp; is_int32(delta)) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      Serializer::TooLateToEnableNow();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="keywordflow">return</span> Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>, static_cast&lt;int32_t&gt;(delta));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  Move(scratch, target);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">return</span> Operand(scratch, 0);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">MacroAssembler::Load</a>(Register destination, ExternalReference source) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">if</span> (root_array_available_ &amp;&amp; !Serializer::enabled()) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    intptr_t delta = RootRegisterDelta(source);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (delta != kInvalidRootRegisterDelta &amp;&amp; is_int32(delta)) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      Serializer::TooLateToEnableNow();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      movp(destination, Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>, static_cast&lt;int32_t&gt;(delta)));</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// Safe code.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (destination.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    load_rax(source);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, source);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    movp(destination, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, 0));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Store(ExternalReference destination, Register source) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (root_array_available_ &amp;&amp; !Serializer::enabled()) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    intptr_t delta = RootRegisterDelta(destination);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (delta != kInvalidRootRegisterDelta &amp;&amp; is_int32(delta)) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      Serializer::TooLateToEnableNow();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      movp(Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>, static_cast&lt;int32_t&gt;(delta)), source);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// Safe code.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (source.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    store_rax(destination);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, destination);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    movp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, 0), source);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadAddress(Register destination,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                 ExternalReference source) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">if</span> (root_array_available_ &amp;&amp; !Serializer::enabled()) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    intptr_t delta = RootRegisterDelta(source);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (delta != kInvalidRootRegisterDelta &amp;&amp; is_int32(delta)) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      Serializer::TooLateToEnableNow();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      leap(destination, Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>, static_cast&lt;int32_t&gt;(delta)));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// Safe code.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  Move(destination, source);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keywordtype">int</span> MacroAssembler::LoadAddressSize(ExternalReference source) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span> (root_array_available_ &amp;&amp; !Serializer::enabled()) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// This calculation depends on the internals of LoadAddress.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// It&#39;s correctness is ensured by the asserts in the Call</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// instruction below.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    intptr_t delta = RootRegisterDelta(source);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (delta != kInvalidRootRegisterDelta &amp;&amp; is_int32(delta)) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      Serializer::TooLateToEnableNow();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="comment">// Operand is leap(scratch, Operand(kRootRegister, delta));</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="comment">// Opcodes : REX.W 8D ModRM Disp8/Disp32  - 4 or 7.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordtype">int</span> size = 4;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">if</span> (!is_int8(static_cast&lt;int32_t&gt;(delta))) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        size += 3;  <span class="comment">// Need full four-byte displacement in lea.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#ae491df1d2c24e3751c368155c20fe5ef">size</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// Size of movp(destination, src);</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">return</span> Assembler::kMoveAddressIntoScratchRegisterInstructionLength;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PushAddress(ExternalReference source) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  int64_t address = <span class="keyword">reinterpret_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(source.address());</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (is_int32(address) &amp;&amp; !Serializer::enabled()) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>, Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    Push(Immediate(static_cast&lt;int32_t&gt;(address)));</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, source);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadRoot(Register destination, Heap::RootListIndex index) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(root_array_available_);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  movp(destination, Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                            (index &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>) - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af499ca60771333c2ada5cf46f7761d33">kRootRegisterBias</a>));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadRootIndexed(Register destination,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                     Register variable_offset,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                                     <span class="keywordtype">int</span> fixed_offset) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(root_array_available_);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  movp(destination,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;       Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;               variable_offset, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;               (fixed_offset &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>) - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af499ca60771333c2ada5cf46f7761d33">kRootRegisterBias</a>));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StoreRoot(Register source, Heap::RootListIndex index) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(root_array_available_);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  movp(Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>, (index &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>) - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af499ca60771333c2ada5cf46f7761d33">kRootRegisterBias</a>),</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;       source);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PushRoot(Heap::RootListIndex index) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(root_array_available_);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  Push(Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>, (index &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>) - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af499ca60771333c2ada5cf46f7761d33">kRootRegisterBias</a>));</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CompareRoot(Register with, Heap::RootListIndex index) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(root_array_available_);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  cmpp(with, Operand(<a class="code" href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a>,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                     (index &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>) - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af499ca60771333c2ada5cf46f7761d33">kRootRegisterBias</a>));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CompareRoot(<span class="keyword">const</span> Operand&amp; with,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                 Heap::RootListIndex index) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(root_array_available_);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!with.AddressUsesRegister(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, index);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  cmpp(with, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RememberedSetHelper(Register <span class="keywordtype">object</span>,  <span class="comment">// For debug tests.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                         Register addr,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                         Register scratch,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> save_fp,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                         RememberedSetFinalAction and_then) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    Label ok;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    JumpIfNotInNewSpace(<span class="keywordtype">object</span>, scratch, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    int3();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// Load store buffer top.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  LoadRoot(scratch, Heap::kStoreBufferTopRootIndex);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// Store pointer to buffer.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  movp(Operand(scratch, 0), addr);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// Increment buffer top.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  addp(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// Write back new top of buffer.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  StoreRoot(scratch, Heap::kStoreBufferTopRootIndex);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// Call stub on end of buffer.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  Label done;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// Check for end of buffer.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  testp(scratch, Immediate(StoreBuffer::kStoreBufferOverflowBit));</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> (and_then == kReturnAtEnd) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    Label buffer_overflowed;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;buffer_overflowed, Label::kNear);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    ret(0);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    bind(&amp;buffer_overflowed);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(and_then == kFallThroughAtEnd);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  StoreBufferOverflowStub store_buffer_overflow =</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      StoreBufferOverflowStub(save_fp);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  CallStub(&amp;store_buffer_overflow);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (and_then == kReturnAtEnd) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    ret(0);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(and_then == kFallThroughAtEnd);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    bind(&amp;done);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InNewSpace(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                Register scratch,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0fb80d1e7fafc4b00df717805a1c83ea">cc</a>,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                Label* branch,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                Label::Distance distance) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span> (Serializer::enabled()) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// Can&#39;t do arithmetic on external references if it might get serialized.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// The mask isn&#39;t really an address.  We load it as an external reference in</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// case the size of the new space is different between the snapshot maker</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// and the running system.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (scratch.is(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, ExternalReference::new_space_mask(isolate()));</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      andp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      Move(scratch, ExternalReference::new_space_mask(isolate()));</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      andp(scratch, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, ExternalReference::new_space_start(isolate()));</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    cmpp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    j(cc, branch, distance);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(is_int32(static_cast&lt;int64_t&gt;(isolate()-&gt;heap()-&gt;NewSpaceMask())));</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    intptr_t new_space_start =</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(isolate()-&gt;heap()-&gt;NewSpaceStart());</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, reinterpret_cast&lt;Address&gt;(-new_space_start),</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;         Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (scratch.is(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      addp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      leap(scratch, Operand(<span class="keywordtype">object</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, 0));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    andp(scratch,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;         Immediate(static_cast&lt;int32_t&gt;(isolate()-&gt;heap()-&gt;NewSpaceMask())));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    j(cc, branch, distance);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RecordWriteField(</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">int</span> offset,</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    Register value,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    Register dst,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> save_fp,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56">RememberedSetAction</a> remembered_set_action,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4">SmiCheck</a> smi_check) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// First, check if a write barrier is even needed. The tests below</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// catch stores of Smis.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  Label done;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// Skip barrier if writing a smi.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (smi_check == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134">INLINE_SMI_CHECK</a>) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    JumpIfSmi(value, &amp;done);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Although the object register is tagged, the offset is relative to the start</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// of the object, so so offset must be a multiple of kPointerSize.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ada66adab5e750853950daf4371db1392">IsAligned</a>(offset, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  leap(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, offset));</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    Label ok;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    testb(dst, Immediate((1 &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>) - 1));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    int3();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  RecordWrite(</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordtype">object</span>, dst, value, save_fp, remembered_set_action, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a819e97a39906a4b5a6f6eeb9a82efaea">OMIT_SMI_CHECK</a>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// Clobber clobbered input registers when running with the debug-code flag</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// turned on to provoke errors.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    Move(value, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>, Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    Move(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>, Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RecordWriteArray(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                      Register value,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                      Register index,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> save_fp,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                                      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56">RememberedSetAction</a> remembered_set_action,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                                      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4">SmiCheck</a> smi_check) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// First, check if a write barrier is even needed. The tests below</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// catch stores of Smis.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  Label done;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// Skip barrier if writing a smi.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (smi_check == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134">INLINE_SMI_CHECK</a>) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    JumpIfSmi(value, &amp;done);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// Array access: calculate the destination address. Index is not a smi.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  Register dst = index;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  leap(dst, Operand(<span class="keywordtype">object</span>, index, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>,</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                   FixedArray::kHeaderSize - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  RecordWrite(</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordtype">object</span>, dst, value, save_fp, remembered_set_action, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a819e97a39906a4b5a6f6eeb9a82efaea">OMIT_SMI_CHECK</a>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// Clobber clobbered input registers when running with the debug-code flag</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// turned on to provoke errors.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    Move(value, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>, Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    Move(index, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>, Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="keywordtype">void</span> MacroAssembler::RecordWrite(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                 Register address,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                 Register value,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> fp_mode,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56">RememberedSetAction</a> remembered_set_action,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4">SmiCheck</a> smi_check) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<span class="keywordtype">object</span>.is(value));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<span class="keywordtype">object</span>.is(address));</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!value.is(address));</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  AssertNotSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">if</span> (remembered_set_action == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56a0281060991aef42d86dcf437f5dbb1a1">OMIT_REMEMBERED_SET</a> &amp;&amp;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      !FLAG_incremental_marking) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    Label ok;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    cmpp(value, Operand(address, 0));</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    int3();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// Count number of write barriers in generated code.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  isolate()-&gt;counters()-&gt;write_barriers_static()-&gt;Increment();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  IncrementCounter(isolate()-&gt;counters()-&gt;write_barriers_dynamic(), 1);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// First, check if a write barrier is even needed. The tests below</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// catch stores of smis and stores into the young generation.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  Label done;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">if</span> (smi_check == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134">INLINE_SMI_CHECK</a>) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// Skip barrier if writing a smi.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    JumpIfSmi(value, &amp;done);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  CheckPageFlag(value,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                value,  <span class="comment">// Used as scratch.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                MemoryChunk::kPointersToHereAreInterestingMask,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>,</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                &amp;done,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                Label::kNear);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  CheckPageFlag(<span class="keywordtype">object</span>,</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                value,  <span class="comment">// Used as scratch.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                MemoryChunk::kPointersFromHereAreInterestingMask,</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                &amp;done,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                Label::kNear);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  RecordWriteStub stub(<span class="keywordtype">object</span>, value, address, remembered_set_action, fp_mode);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  CallStub(&amp;stub);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// Clobber clobbered registers when running with the debug-code flag</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// turned on to provoke errors.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    Move(address, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>, Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    Move(value, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">kZapValue</a>, Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a71221094570a6a00adeb973c92190d">BailoutReason</a> reason) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) Check(cc, reason);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertFastElements(Register elements) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    Label ok;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    CompareRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, HeapObject::kMapOffset),</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                Heap::kFixedArrayMapRootIndex);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    CompareRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, HeapObject::kMapOffset),</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                Heap::kFixedDoubleArrayMapRootIndex);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    CompareRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, HeapObject::kMapOffset),</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                Heap::kFixedCOWArrayMapRootIndex);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    Abort(kJSObjectWithFastElementsMapHasSlowElements);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a71221094570a6a00adeb973c92190d">BailoutReason</a> reason) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  Label <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae77d2fa4643ef916a7813c2ef8e8ef81a67824ecf84f5816f07b74fa956bdbcd2">L</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  j(cc, &amp;L, Label::kNear);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  Abort(reason);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// Control will not return here.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  bind(&amp;L);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckStackAlignment() {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordtype">int</span> frame_alignment = OS::ActivationFrameAlignment();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordtype">int</span> frame_alignment_mask = frame_alignment - 1;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">if</span> (frame_alignment &gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">IsPowerOf2</a>(frame_alignment));</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    Label alignment_as_expected;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    testp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(frame_alignment_mask));</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;alignment_as_expected, Label::kNear);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// Abort if stack is not aligned.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    int3();</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    bind(&amp;alignment_as_expected);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keywordtype">void</span> MacroAssembler::NegativeZeroTest(Register result,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                      Register op,</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                      Label* then_label) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  Label ok;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  testl(result, result);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  testl(op, op);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a8c33592060c5e5568b3fa116c71610ba">sign</a>, then_label);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  bind(&amp;ok);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Abort(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a71221094570a6a00adeb973c92190d">BailoutReason</a> reason) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* msg = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae3c559b497bf8e31b3c9e8b55dbb164b">GetBailoutReason</a>(reason);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">if</span> (msg != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    RecordComment(<span class="stringliteral">&quot;Abort message: &quot;</span>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    RecordComment(msg);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">if</span> (FLAG_trap_on_abort) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    int3();</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Smi::FromInt(static_cast&lt;int&gt;(reason)),</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;       Assembler::RelocInfoNone());</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">if</span> (!has_frame_) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// We don&#39;t actually want to generate a pile of code for this, so just</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">// claim there is a stack frame, without generating one.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    FrameScope scope(<span class="keyword">this</span>, <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">StackFrame::NONE</a>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    CallRuntime(Runtime::kAbort, 1);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    CallRuntime(Runtime::kAbort, 1);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Control will not return here.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  int3();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallStub(CodeStub* stub, TypeFeedbackId ast_id) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(AllowThisStubCall(stub));  <span class="comment">// Calls are not allowed in some stubs</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  Call(stub-&gt;GetCode(isolate()), RelocInfo::CODE_TARGET, ast_id);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TailCallStub(CodeStub* stub) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  Jump(stub-&gt;GetCode(isolate()), RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StubReturn(<span class="keywordtype">int</span> argc) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(argc &gt;= 1 &amp;&amp; generating_stub());</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  ret((argc - 1) * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="keywordtype">bool</span> MacroAssembler::AllowThisStubCall(CodeStub* stub) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordflow">return</span> has_frame_ || !stub-&gt;SometimesSetsUpAFrame();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;}</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IllegalOperation(<span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">if</span> (num_arguments &gt; 0) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(num_arguments * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, Heap::kUndefinedValueRootIndex);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IndexFromHash(Register hash, Register index) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// The assert checks that the constants for the maximum number of digits</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// for an array index cached in the hash field and the number of bits</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// reserved for it does not conflict.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaa2b5552afaab806ac61a34b16e7a1c7">TenToThe</a>(String::kMaxCachedArrayIndexLength) &lt;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;         (1 &lt;&lt; String::kArrayIndexValueBits));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// We want the smi-tagged index in key. Even if we subsequently go to</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// the slow case, converting the key to a smi is always valid.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// key: string key</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="comment">// hash: key&#39;s hash field, including its array index value.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  andp(hash, Immediate(String::kArrayIndexValueMask));</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  shr(hash, Immediate(String::kHashShift));</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// Here we actually clobber the key which will be used if calling into</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// runtime later. However as the new key is the numeric value of a string key</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// there is no difference in using either key.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  Integer32ToSmi(index, hash);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;}</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallRuntime(<span class="keyword">const</span> Runtime::Function* f,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                 <span class="keywordtype">int</span> num_arguments,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> save_doubles) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// If the expected number of arguments of the runtime function is</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// constant, we check that the actual number of arguments match the</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">// expectation.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (f-&gt;nargs &gt;= 0 &amp;&amp; f-&gt;nargs != num_arguments) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    IllegalOperation(num_arguments);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// TODO(1236192): Most runtime routines don&#39;t need the number of</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// arguments passed in because it is constant. At some point we</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="comment">// should remove this need and make the runtime routine entry code</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// smarter.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, num_arguments);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, ExternalReference(f, isolate()));</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  CEntryStub ces(f-&gt;result_size, save_doubles);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  CallStub(&amp;ces);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallExternalReference(<span class="keyword">const</span> ExternalReference&amp; ext,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                           <span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, num_arguments);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, ext);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  CEntryStub stub(1);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  CallStub(&amp;stub);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;}</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TailCallExternalReference(<span class="keyword">const</span> ExternalReference&amp; ext,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                               <span class="keywordtype">int</span> num_arguments,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                               <span class="keywordtype">int</span> result_size) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// ----------- S t a t e -------------</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">//  -- rsp[0]                 : return address</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">//  -- rsp[8]                 : argument num_arguments - 1</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">//  ...</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="comment">//  -- rsp[8 * num_arguments] : argument 0 (receiver)</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">// -----------------------------------</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// TODO(1236192): Most runtime routines don&#39;t need the number of</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// arguments passed in because it is constant. At some point we</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// should remove this need and make the runtime routine entry code</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// smarter.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, num_arguments);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  JumpToExternalReference(ext, result_size);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TailCallRuntime(Runtime::FunctionId fid,</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                                     <span class="keywordtype">int</span> num_arguments,</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                     <span class="keywordtype">int</span> result_size) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  TailCallExternalReference(ExternalReference(fid, isolate()),</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                            num_arguments,</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                            result_size);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abf132b4ad93f3557cd3956577592ba68a58f89ea394575eb2e0940a890ad02928">Offset</a>(ExternalReference ref0, ExternalReference ref1) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  int64_t offset = (ref0.address() - ref1.address());</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// Check that fits into int.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(static_cast&lt;int&gt;(offset) == offset);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(offset);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PrepareCallApiFunction(<span class="keywordtype">int</span> arg_stack_space) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  EnterApiExitFrame(arg_stack_space);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallApiFunctionAndReturn(</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    Register function_address,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> thunk_address,</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    Register thunk_last_arg,</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordtype">int</span> stack_space,</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    Operand return_value_operand,</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    Operand* context_restore_operand) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  Label prologue;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  Label promote_scheduled_exception;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  Label exception_handled;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  Label delete_allocated_handles;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  Label leave_exit_frame;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  Label write_back;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  Factory* factory = isolate()-&gt;factory();</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  ExternalReference next_address =</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      ExternalReference::handle_scope_next_address(isolate());</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kNextOffset = 0;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kLimitOffset = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abf132b4ad93f3557cd3956577592ba68a58f89ea394575eb2e0940a890ad02928">Offset</a>(</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      ExternalReference::handle_scope_limit_address(isolate()),</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      next_address);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kLevelOffset = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abf132b4ad93f3557cd3956577592ba68a58f89ea394575eb2e0940a890ad02928">Offset</a>(</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      ExternalReference::handle_scope_level_address(isolate()),</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      next_address);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  ExternalReference scheduled_exception_address =</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      ExternalReference::scheduled_exception_address(isolate());</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>.<a class="code" href="../../dc/d02/structv8_1_1internal_1_1_register.html#a28408cd9eb12b19e77b021e54a00aaec">is</a>(function_address) || <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a16e3d756c69dbae4aa6f68cd7c5423ca">r8</a>.<a class="code" href="../../dc/d02/structv8_1_1internal_1_1_register.html#a28408cd9eb12b19e77b021e54a00aaec">is</a>(function_address));</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">// Allocate HandleScope in callee-save registers.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  Register prev_next_address_reg = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a55e1524b1908417bac09cae5292e9484">r14</a>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  Register prev_limit_reg = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  Register base_reg = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3d1ba31d193200ef0ab5c1f92bae2d86">r15</a>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  Move(base_reg, next_address);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  movp(prev_next_address_reg, Operand(base_reg, kNextOffset));</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  movp(prev_limit_reg, Operand(base_reg, kLimitOffset));</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  addl(Operand(base_reg, kLevelOffset), Immediate(1));</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">if</span> (FLAG_log_timer_events) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    FrameScope frame(<span class="keyword">this</span>, StackFrame::MANUAL);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    PushSafepointRegisters();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    PrepareCallCFunction(1);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1035c29a5a8ce8de42eb570ed1298a9c">arg_reg_1</a>, ExternalReference::isolate_address(isolate()));</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    CallCFunction(ExternalReference::log_enter_external_function(isolate()), 1);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    PopSafepointRegisters();</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  Label profiler_disabled;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  Label end_profiler_check;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordtype">bool</span>* is_profiling_flag =</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      isolate()-&gt;cpu_profiler()-&gt;is_profiling_address();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<span class="keyword">sizeof</span>(*is_profiling_flag) == 1);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, is_profiling_flag, RelocInfo::EXTERNAL_REFERENCE);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  cmpb(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, 0), Immediate(0));</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;profiler_disabled);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="comment">// Third parameter is the address of the actual getter function.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  Move(thunk_last_arg, function_address);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, thunk_address, RelocInfo::EXTERNAL_REFERENCE);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  jmp(&amp;end_profiler_check);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  bind(&amp;profiler_disabled);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// Call the api function!</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, function_address);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  bind(&amp;end_profiler_check);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// Call the api function!</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  call(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="keywordflow">if</span> (FLAG_log_timer_events) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    FrameScope frame(<span class="keyword">this</span>, StackFrame::MANUAL);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    PushSafepointRegisters();</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    PrepareCallCFunction(1);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1035c29a5a8ce8de42eb570ed1298a9c">arg_reg_1</a>, ExternalReference::isolate_address(isolate()));</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    CallCFunction(ExternalReference::log_leave_external_function(isolate()), 1);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    PopSafepointRegisters();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="comment">// Load the value from ReturnValue</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, return_value_operand);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  bind(&amp;prologue);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// No more valid handles (the result handle was the last one). Restore</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// previous handle scope.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  subl(Operand(base_reg, kLevelOffset), Immediate(1));</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  movp(Operand(base_reg, kNextOffset), prev_next_address_reg);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  cmpp(prev_limit_reg, Operand(base_reg, kLimitOffset));</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;delete_allocated_handles);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  bind(&amp;leave_exit_frame);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment">// Check if the function scheduled an exception.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, scheduled_exception_address);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  Cmp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, 0), factory-&gt;the_hole_value());</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;promote_scheduled_exception);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  bind(&amp;exception_handled);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="preprocessor">#if ENABLE_EXTRA_CHECKS</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// Check if the function returned a valid JavaScript value.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  Label ok;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  Register return_value = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  Register <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a66b940b179a9a21572629d3d5c854cb4">map</a> = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  JumpIfSmi(return_value, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  movp(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(return_value, HeapObject::kMapOffset));</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  CmpInstanceType(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ad939c92fc47b6c3f29db6cfbc8569cbf">FIRST_NONSTRING_TYPE</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">below</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  CmpInstanceType(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a8b2de00af2e470c341f750b71b66aebf">FIRST_SPEC_OBJECT_TYPE</a>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5deff98b7209d461524e9b5bff3dd4bf">above_equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  CompareRoot(map, Heap::kHeapNumberMapRootIndex);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  CompareRoot(return_value, Heap::kUndefinedValueRootIndex);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  CompareRoot(return_value, Heap::kTrueValueRootIndex);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  CompareRoot(return_value, Heap::kFalseValueRootIndex);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  CompareRoot(return_value, Heap::kNullValueRootIndex);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  Abort(kAPICallReturnedInvalidObject);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  bind(&amp;ok);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keywordtype">bool</span> restore_context = context_restore_operand != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keywordflow">if</span> (restore_context) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, *context_restore_operand);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  LeaveApiExitFrame(!restore_context);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  ret(stack_space * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  bind(&amp;promote_scheduled_exception);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    FrameScope frame(<span class="keyword">this</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a97d86e98faf1fa957813fcad98fecf21adc7588f17692aa631f375290d50a2c8e">StackFrame::INTERNAL</a>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    CallRuntime(Runtime::kHiddenPromoteScheduledException, 0);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  jmp(&amp;exception_handled);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// HandleScope limit has changed. Delete allocated extensions.</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  bind(&amp;delete_allocated_handles);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  movp(Operand(base_reg, kLimitOffset), prev_limit_reg);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  movp(prev_limit_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1035c29a5a8ce8de42eb570ed1298a9c">arg_reg_1</a>, ExternalReference::isolate_address(isolate()));</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>,</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;              ExternalReference::delete_handle_scope_extensions(isolate()));</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  call(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, prev_limit_reg);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  jmp(&amp;leave_exit_frame);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpToExternalReference(<span class="keyword">const</span> ExternalReference&amp; ext,</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                                             <span class="keywordtype">int</span> result_size) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// Set the entry point and jump to the C entry runtime stub.</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, ext);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  CEntryStub ces(result_size);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  jmp(ces.GetCode(isolate()), RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeBuiltin(Builtins::JavaScript <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                                   <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#adfa873894470d6950e21cab8c6dadcd1">flag</a>,</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                                   <span class="keyword">const</span> CallWrapper&amp; call_wrapper) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// You can&#39;t call a builtin without a valid frame.</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// Rely on the assertion to check that the number of provided</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">// arguments match the expected number of arguments. Fake a</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">// parameter count to avoid emitting code to do the check.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  ParameterCount expected(0);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  GetBuiltinEntry(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  InvokeCode(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, expected, expected, flag, call_wrapper);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="keywordtype">void</span> MacroAssembler::GetBuiltinFunction(Register target,</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                                        Builtins::JavaScript <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// Load the builtins object into target register.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  movp(target, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, Context::SlotOffset(Context::GLOBAL_OBJECT_INDEX)));</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  movp(target, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(target, GlobalObject::kBuiltinsOffset));</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  movp(target, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(target,</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                            JSBuiltinsObject::OffsetOfFunctionWithId(<span class="keywordtype">id</span>)));</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;}</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="keywordtype">void</span> MacroAssembler::GetBuiltinEntry(Register target, Builtins::JavaScript <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!target.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>));</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// Load the JavaScript builtin function from the builtins object.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  GetBuiltinFunction(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  movp(target, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, JSFunction::kCodeEntryOffset));</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;}</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="preprocessor">#define REG(Name) { kRegister_ ## Name ## _Code }</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> Register saved_regs[] = {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a16e3d756c69dbae4aa6f68cd7c5423ca">r8</a>),</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a113747f07e8621eed53e102993358774">r9</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a59f2884a5c78178b804f7cfbbf9b6ca3">r10</a>), REG(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afca275e25e2f701ebb154f525478bf57">r11</a>)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;};</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="preprocessor">#undef REG</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNumberOfSavedRegs = <span class="keyword">sizeof</span>(saved_regs) / <span class="keyword">sizeof</span>(Register);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PushCallerSaved(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> fp_mode,</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                                     Register exclusion1,</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                                     Register exclusion2,</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                                     Register exclusion3) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// We don&#39;t allow a GC during a store buffer overflow so there is no need to</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">// store the registers in any particular way, but we do have to store and</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="comment">// restore them.</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kNumberOfSavedRegs; i++) {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    Register reg = saved_regs[i];</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">if</span> (!reg.is(exclusion1) &amp;&amp; !reg.is(exclusion2) &amp;&amp; !reg.is(exclusion3)) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      pushq(reg);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// R12 to r15 are callee save on all platforms.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">if</span> (fp_mode == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822a1f66bbcb0dcf356584f55d2acbbf9f54">kSaveFPRegs</a>) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    subp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a> * XMMRegister::kMaxNumRegisters));</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; XMMRegister::kMaxNumRegisters; i++) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      XMMRegister reg = XMMRegister::from_code(i);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      movsd(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, i * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>), reg);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  }</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;}</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PopCallerSaved(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">SaveFPRegsMode</a> fp_mode,</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                                    Register exclusion1,</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                                    Register exclusion2,</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                                    Register exclusion3) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordflow">if</span> (fp_mode == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822a1f66bbcb0dcf356584f55d2acbbf9f54">kSaveFPRegs</a>) {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; XMMRegister::kMaxNumRegisters; i++) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      XMMRegister reg = XMMRegister::from_code(i);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      movsd(reg, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, i * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>));</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a> * XMMRegister::kMaxNumRegisters));</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = kNumberOfSavedRegs - 1; i &gt;= 0; i--) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    Register reg = saved_regs[i];</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">if</span> (!reg.is(exclusion1) &amp;&amp; !reg.is(exclusion2) &amp;&amp; !reg.is(exclusion3)) {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      popq(reg);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;}</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Cvtlsi2sd(XMMRegister dst, Register src) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  xorps(dst, dst);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  cvtlsi2sd(dst, src);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;}</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Cvtlsi2sd(XMMRegister dst, <span class="keyword">const</span> Operand&amp; src) {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  xorps(dst, dst);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  cvtlsi2sd(dst, src);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">MacroAssembler::Load</a>(Register dst, <span class="keyword">const</span> Operand&amp; src, Representation r) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!r.IsDouble());</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">if</span> (r.IsInteger8()) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    movsxbq(dst, src);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.IsUInteger8()) {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    movzxbl(dst, src);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.IsInteger16()) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    movsxwq(dst, src);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.IsUInteger16()) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    movzxwl(dst, src);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.IsInteger32()) {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    movl(dst, src);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;}</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Store(<span class="keyword">const</span> Operand&amp; dst, Register src, Representation r) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!r.IsDouble());</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (r.IsInteger8() || r.IsUInteger8()) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    movb(dst, src);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.IsInteger16() || r.IsUInteger16()) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    movw(dst, src);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.IsInteger32()) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    movl(dst, src);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;}</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Set(Register dst, int64_t x) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="keywordflow">if</span> (x == 0) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    xorl(dst, dst);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_uint32(x)) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    movl(dst, Immediate(static_cast&lt;uint32_t&gt;(x)));</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_int32(x)) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    movq(dst, Immediate(static_cast&lt;int32_t&gt;(x)));</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    movq(dst, x);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;}</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Set(<span class="keyword">const</span> Operand&amp; dst, intptr_t x) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span> (is_int32(x)) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      movp(dst, Immediate(static_cast&lt;int32_t&gt;(x)));</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, x);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      movp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    movp(dst, Immediate(static_cast&lt;int32_t&gt;(x)));</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;}</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">// Smi tagging, untagging and tag detection.</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="keywordtype">bool</span> MacroAssembler::IsUnsafeInt(<span class="keyword">const</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> x) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxBits = 17;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac8bc9037fb61de907d8aad828c1cc7f9">is_intn</a>(x, kMaxBits);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;}</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SafeMove(Register dst, Smi* src) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(SmiValuesAre32Bits());  <span class="comment">// JIT cookie can be converted to Smi.</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordflow">if</span> (IsUnsafeInt(src-&gt;value()) &amp;&amp; jit_cookie() != 0) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    Move(dst, Smi::FromInt(src-&gt;value() ^ jit_cookie()));</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Smi::FromInt(jit_cookie()));</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    xorq(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    Move(dst, src);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;}</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SafePush(Smi* src) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(SmiValuesAre32Bits());  <span class="comment">// JIT cookie can be converted to Smi.</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">if</span> (IsUnsafeInt(src-&gt;value()) &amp;&amp; jit_cookie() != 0) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    Push(Smi::FromInt(src-&gt;value() ^ jit_cookie()));</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Smi::FromInt(jit_cookie()));</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    xorq(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    Push(src);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;Register MacroAssembler::GetSmiConstant(Smi* source) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordtype">int</span> value = source-&gt;value();</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">if</span> (value == 0) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    xorl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">if</span> (value == 1) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  LoadSmiConstant(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, source);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadSmiConstant(Register dst, Smi* source) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    Move(dst, Smi::FromInt(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7246b88aed235ebebc6625ece178d0dd">kSmiConstantRegisterValue</a>),</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;         Assembler::RelocInfoNone());</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    cmpq(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, kUninitializedKSmiConstantRegister);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordtype">int</span> value = source-&gt;value();</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keywordflow">if</span> (value == 0) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    xorl(dst, dst);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a90286bd943f9eeda91de18b38aee2d37">negative</a> = value &lt; 0;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uvalue = negative ? -value : value;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">switch</span> (uvalue) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">case</span> 9:</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      leap(dst,</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;           Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>, 0));</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      xorl(dst, dst);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      leap(dst, Operand(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>, 0));</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      xorl(dst, dst);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      leap(dst, Operand(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, 0));</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      leap(dst,</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;           Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, 0));</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      leap(dst,</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;           Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b">times_2</a>, 0));</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      leap(dst,</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;           Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, 0));</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      movp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      Move(dst, source, Assembler::RelocInfoNone());</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="keywordflow">if</span> (negative) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    negp(dst);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Integer32ToSmi(Register dst, Register src) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    movl(dst, src);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  shl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;}</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Integer32ToSmiField(<span class="keyword">const</span> Operand&amp; dst, Register src) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    testb(dst, Immediate(0x01));</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    Label ok;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    Abort(kInteger32ToSmiFieldWritingToNonSmiLocation);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> % <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a> == 0);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  movl(Operand(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>), src);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;}</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Integer64PlusConstantToSmi(Register dst,</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                                                Register src,</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                                                <span class="keywordtype">int</span> constant) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    addl(dst, Immediate(constant));</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    leal(dst, Operand(src, constant));</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  shl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;}</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiToInteger32(Register dst, Register src) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  shr(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;}</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiToInteger32(Register dst, <span class="keyword">const</span> Operand&amp; src) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  movl(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>));</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;}</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiToInteger64(Register dst, Register src) {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  sar(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;}</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiToInteger64(Register dst, <span class="keyword">const</span> Operand&amp; src) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  movsxlq(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>));</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;}</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiTest(Register src) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  AssertSmi(src);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  testp(src, src);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;}</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiCompare(Register smi1, Register smi2) {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  AssertSmi(smi1);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  AssertSmi(smi2);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  cmpp(smi1, smi2);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;}</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiCompare(Register dst, Smi* src) {</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  AssertSmi(dst);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  Cmp(dst, src);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;}</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Cmp(Register dst, Smi* src) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keywordflow">if</span> (src-&gt;value() == 0) {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    testp(dst, dst);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    Register constant_reg = GetSmiConstant(src);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    cmpp(dst, constant_reg);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiCompare(Register dst, <span class="keyword">const</span> Operand&amp; src) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  AssertSmi(dst);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  AssertSmi(src);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  cmpp(dst, src);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;}</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiCompare(<span class="keyword">const</span> Operand&amp; dst, Register src) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  AssertSmi(dst);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  AssertSmi(src);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  cmpp(dst, src);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;}</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiCompare(<span class="keyword">const</span> Operand&amp; dst, Smi* src) {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  AssertSmi(dst);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  cmpl(Operand(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>), Immediate(src-&gt;value()));</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Cmp(<span class="keyword">const</span> Operand&amp; dst, Smi* src) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// The Operand cannot use the smi register.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  Register smi_reg = GetSmiConstant(src);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.AddressUsesRegister(smi_reg));</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  cmpp(dst, smi_reg);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;}</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiCompareInteger32(<span class="keyword">const</span> Operand&amp; dst, Register src) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  cmpl(Operand(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>), src);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;}</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PositiveSmiTimesPowerOfTwoToInteger64(Register dst,</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                                                           Register src,</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                                                           <span class="keywordtype">int</span> power) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(power &gt;= 0);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(power &lt; 64);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (power == 0) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    SmiToInteger64(dst, src);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  }</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  }</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordflow">if</span> (power &lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    sar(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> - power));</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (power &gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    shl(dst, Immediate(power - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;}</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PositiveSmiDivPowerOfTwoToInteger32(Register dst,</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                                                         Register src,</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                                                         <span class="keywordtype">int</span> power) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>((0 &lt;= power) &amp;&amp; (power &lt; 32));</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    shr(dst, Immediate(power + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();  <span class="comment">// Not used.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;}</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiOrIfSmis(Register dst, Register src1, Register src2,</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                 Label* on_not_smis,</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                                 Label::Distance near_jump) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordflow">if</span> (dst.is(src1) || dst.is(src2)) {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src1);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    orp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src2);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    JumpIfNotSmi(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, on_not_smis, near_jump);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    movp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    movp(dst, src1);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    orp(dst, src2);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    JumpIfNotSmi(dst, on_not_smis, near_jump);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;}</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckSmi(Register src) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  testb(src, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;}</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckSmi(<span class="keyword">const</span> Operand&amp; src) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  testb(src, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;}</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckNonNegativeSmi(Register src) {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="comment">// Test that both bits of the mask 0x8000000000000001 are zero.</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  rol(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Immediate(1));</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  testb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Immediate(3));</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;}</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckBothSmi(Register first, Register second) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">if</span> (first.is(second)) {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordflow">return</span> CheckSmi(first);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a> == 1 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a44ee97292914fbe042fc1b7b3236f7bc">kHeapObjectTagMask</a> == 3);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  leal(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Operand(first, second, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, 0));</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  testb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Immediate(0x03));</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;}</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckBothNonNegativeSmi(Register first,</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                                                  Register second) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">if</span> (first.is(second)) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">return</span> CheckNonNegativeSmi(first);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  }</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, first);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  orp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, second);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  rol(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Immediate(1));</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  testl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Immediate(3));</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckEitherSmi(Register first,</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                                         Register second,</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                                         Register scratch) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordflow">if</span> (first.is(second)) {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">return</span> CheckSmi(first);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (scratch.is(second)) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    andl(scratch, first);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">if</span> (!scratch.is(first)) {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      movl(scratch, first);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    andl(scratch, second);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  testb(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;}</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckIsMinSmi(Register src) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="comment">// If we overflow by subtracting one, it&#39;s the minimal smi value.</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  cmpp(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckInteger32ValidSmiValue(Register src) {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">// A 32-bit integer value can always be converted to a smi.</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8ac9e5f8199485413a934b703f69c9f452">always</a>;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;}</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::CheckUInteger32ValidSmiValue(Register src) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="comment">// An unsigned 32-bit integer value is valid as long as the high bit</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="comment">// is not set.</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  testl(src, src);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8aceec566dcc3d7dcea1417f8f54b58d07">positive</a>;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;}</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckSmiToIndicator(Register dst, Register src) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    andl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    movl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    andl(dst, src);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;}</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckSmiToIndicator(Register dst, <span class="keyword">const</span> Operand&amp; src) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="keywordflow">if</span> (!(src.AddressUsesRegister(dst))) {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    movl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    andl(dst, src);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    movl(dst, src);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    andl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;}</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfNotValidSmiValue(Register src,</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                                            Label* on_invalid,</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> is_valid = CheckInteger32ValidSmiValue(src);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(is_valid), on_invalid, near_jump);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;}</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfUIntNotValidSmiValue(Register src,</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                                                Label* on_invalid,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                                                Label::Distance near_jump) {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> is_valid = CheckUInteger32ValidSmiValue(src);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(is_valid), on_invalid, near_jump);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;}</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfSmi(Register src,</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                               Label* on_smi,</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                               Label::Distance near_jump) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> smi = CheckSmi(src);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  j(smi, on_smi, near_jump);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;}</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfNotSmi(Register src,</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                                  Label* on_not_smi,</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                                  Label::Distance near_jump) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> smi = CheckSmi(src);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(smi), on_not_smi, near_jump);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;}</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpUnlessNonNegativeSmi(</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    Register src, Label* on_not_smi_or_negative,</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    Label::Distance near_jump) {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> non_negative_smi = CheckNonNegativeSmi(src);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(non_negative_smi), on_not_smi_or_negative, near_jump);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;}</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfSmiEqualsConstant(Register src,</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                                             Smi* constant,</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                                             Label* on_equals,</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                                             Label::Distance near_jump) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  SmiCompare(src, constant);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, on_equals, near_jump);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;}</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfNotBothSmi(Register src1,</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                                      Register src2,</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                                      Label* on_not_both_smi,</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                                      Label::Distance near_jump) {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> both_smi = CheckBothSmi(src1, src2);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(both_smi), on_not_both_smi, near_jump);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;}</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpUnlessBothNonNegativeSmi(Register src1,</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                                                  Register src2,</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                                                  Label* on_not_both_smi,</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                                                  Label::Distance near_jump) {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> both_smi = CheckBothNonNegativeSmi(src1, src2);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(both_smi), on_not_both_smi, near_jump);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiAddConstant(Register dst, Register src, Smi* constant) {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keywordflow">if</span> (constant-&gt;value() == 0) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      movp(dst, src);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">switch</span> (constant-&gt;value()) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        addp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        leap(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b">times_2</a>, 0));</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        leap(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, 0));</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        leap(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>, 0));</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        Register constant_reg = GetSmiConstant(constant);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        addp(dst, constant_reg);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    }</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordflow">switch</span> (constant-&gt;value()) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        leap(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, 0));</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        leap(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b">times_2</a>, 0));</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        leap(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, 0));</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        leap(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>, 0));</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        LoadSmiConstant(dst, constant);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        addp(dst, src);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  }</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiAddConstant(<span class="keyword">const</span> Operand&amp; dst, Smi* constant) {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="keywordflow">if</span> (constant-&gt;value() != 0) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    addl(Operand(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>), Immediate(constant-&gt;value()));</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;}</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiAddConstant(Register dst,</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                                    Register src,</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                                    Smi* constant,</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                                    SmiOperationExecutionMode <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a5adc5ec2f1a2af41381abab75250b1c8">mode</a>,</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                                    Label* bailout_label,</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                                    Label::Distance near_jump) {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <span class="keywordflow">if</span> (constant-&gt;value() == 0) {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      movp(dst, src);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    }</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    LoadSmiConstant(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, constant);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    addp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">if</span> (mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548a833b624d8351690eb9e433e86cbe433d">BAILOUT_ON_NO_OVERFLOW</a>)) {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, bailout_label, near_jump);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548aaa1119c80d09836f3a0ff13e99b1af6f">PRESERVE_SOURCE_REGISTER</a>));</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      subp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548abb2fd8898260e912d8a5c09c44e0a323">BAILOUT_ON_OVERFLOW</a>)) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="keywordflow">if</span> (mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548aaa1119c80d09836f3a0ff13e99b1af6f">PRESERVE_SOURCE_REGISTER</a>)) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        Label done;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        subp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        jmp(bailout_label, near_jump);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        bind(&amp;done);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <span class="comment">// Bailout if overflow without reserving src.</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, bailout_label, near_jump);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      }</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(mode.IsEmpty());</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548aaa1119c80d09836f3a0ff13e99b1af6f">PRESERVE_SOURCE_REGISTER</a>));</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548abb2fd8898260e912d8a5c09c44e0a323">BAILOUT_ON_OVERFLOW</a>));</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    LoadSmiConstant(dst, constant);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    addp(dst, src);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, bailout_label, near_jump);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;}</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiSubConstant(Register dst, Register src, Smi* constant) {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordflow">if</span> (constant-&gt;value() == 0) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      movp(dst, src);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    Register constant_reg = GetSmiConstant(constant);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    subp(dst, constant_reg);</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordflow">if</span> (constant-&gt;value() == Smi::kMinValue) {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      LoadSmiConstant(dst, constant);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <span class="comment">// Adding and subtracting the min-value gives the same result, it only</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="comment">// differs on the overflow bit, which we don&#39;t check here.</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      addp(dst, src);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      <span class="comment">// Subtract by adding the negation.</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      LoadSmiConstant(dst, Smi::FromInt(-constant-&gt;value()));</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      addp(dst, src);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    }</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  }</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;}</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiSubConstant(Register dst,</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                                    Register src,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                                    Smi* constant,</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                                    SmiOperationExecutionMode mode,</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                                    Label* bailout_label,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                                    Label::Distance near_jump) {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="keywordflow">if</span> (constant-&gt;value() == 0) {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      movp(dst, src);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    LoadSmiConstant(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, constant);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    subp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">if</span> (mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548a833b624d8351690eb9e433e86cbe433d">BAILOUT_ON_NO_OVERFLOW</a>)) {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, bailout_label, near_jump);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548aaa1119c80d09836f3a0ff13e99b1af6f">PRESERVE_SOURCE_REGISTER</a>));</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      addp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548abb2fd8898260e912d8a5c09c44e0a323">BAILOUT_ON_OVERFLOW</a>)) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordflow">if</span> (mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548aaa1119c80d09836f3a0ff13e99b1af6f">PRESERVE_SOURCE_REGISTER</a>)) {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        Label done;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        addp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        jmp(bailout_label, near_jump);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        bind(&amp;done);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="comment">// Bailout if overflow without reserving src.</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, bailout_label, near_jump);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      }</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(mode.IsEmpty());</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548aaa1119c80d09836f3a0ff13e99b1af6f">PRESERVE_SOURCE_REGISTER</a>));</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(mode.Contains(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548abb2fd8898260e912d8a5c09c44e0a323">BAILOUT_ON_OVERFLOW</a>));</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordflow">if</span> (constant-&gt;value() == Smi::kMinValue) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      movp(dst, src);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      LoadSmiConstant(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, constant);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      subp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, bailout_label, near_jump);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="comment">// Subtract by adding the negation.</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      LoadSmiConstant(dst, Smi::FromInt(-(constant-&gt;value())));</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      addp(dst, src);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, bailout_label, near_jump);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;}</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiNeg(Register dst,</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                            Register src,</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                            Label* on_smi_result,</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    negp(dst);  <span class="comment">// Low 32 bits are retained as zero by negation.</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">// Test if result is zero or Smi::kMinValue.</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    cmpp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, on_smi_result, near_jump);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    movp(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    negp(dst);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    cmpp(dst, src);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="comment">// If the result is zero or Smi::kMinValue, negation failed to create a smi.</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, on_smi_result, near_jump);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;}</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SmiAddHelper(MacroAssembler* masm,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                         Register dst,</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                         Register src1,</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                         <a class="code" href="../../d4/d55/token_8cc.html#aeb3b320679bdd784c8fc3b5f2aa813a9">T</a> src2,</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                         Label* on_not_smi_result,</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                         Label::Distance near_jump) {</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keywordflow">if</span> (dst.is(src1)) {</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    Label done;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    masm-&gt;addp(dst, src2);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    masm-&gt;j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="comment">// Restore src1.</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    masm-&gt;subp(dst, src2);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    masm-&gt;jmp(on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    masm-&gt;bind(&amp;done);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    masm-&gt;movp(dst, src1);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    masm-&gt;addp(dst, src2);</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    masm-&gt;j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  }</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;}</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiAdd(Register dst,</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                            Register src2,</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                            Label* on_not_smi_result,</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#aa49e13f06cb6965b35c085c0497e2bf7">ASSERT_NOT_NULL</a>(on_not_smi_result);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(src2));</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  SmiAddHelper&lt;Register&gt;(<span class="keyword">this</span>, dst, src1, src2, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;}</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiAdd(Register dst,</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                            <span class="keyword">const</span> Operand&amp; src2,</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                            Label* on_not_smi_result,</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#aa49e13f06cb6965b35c085c0497e2bf7">ASSERT_NOT_NULL</a>(on_not_smi_result);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.AddressUsesRegister(dst));</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  SmiAddHelper&lt;Operand&gt;(<span class="keyword">this</span>, dst, src1, src2, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;}</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiAdd(Register dst,</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                            Register src2) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  <span class="comment">// No overflow checking. Use only when it&#39;s known that</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <span class="comment">// overflowing is impossible.</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1)) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src1);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src2);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, kSmiAdditionOverflow);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    }</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    leap(dst, Operand(src1, src2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, 0));</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    addp(dst, src2);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, kSmiAdditionOverflow);</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;}</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SmiSubHelper(MacroAssembler* masm,</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                         Register dst,</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                         Register src1,</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                         <a class="code" href="../../d4/d55/token_8cc.html#aeb3b320679bdd784c8fc3b5f2aa813a9">T</a> src2,</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                         Label* on_not_smi_result,</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                         Label::Distance near_jump) {</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">if</span> (dst.is(src1)) {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    Label done;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    masm-&gt;subp(dst, src2);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    masm-&gt;j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">// Restore src1.</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    masm-&gt;addp(dst, src2);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    masm-&gt;jmp(on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    masm-&gt;bind(&amp;done);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    masm-&gt;movp(dst, src1);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    masm-&gt;subp(dst, src2);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    masm-&gt;j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;}</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiSub(Register dst,</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                            Register src2,</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                            Label* on_not_smi_result,</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#aa49e13f06cb6965b35c085c0497e2bf7">ASSERT_NOT_NULL</a>(on_not_smi_result);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(src2));</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  SmiSubHelper&lt;Register&gt;(<span class="keyword">this</span>, dst, src1, src2, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;}</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiSub(Register dst,</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                            <span class="keyword">const</span> Operand&amp; src2,</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                            Label* on_not_smi_result,</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#aa49e13f06cb6965b35c085c0497e2bf7">ASSERT_NOT_NULL</a>(on_not_smi_result);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.AddressUsesRegister(dst));</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  SmiSubHelper&lt;Operand&gt;(<span class="keyword">this</span>, dst, src1, src2, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;}</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SmiSubNoOverflowHelper(MacroAssembler* masm,</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                                   Register dst,</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                                   Register src1,</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                                   <a class="code" href="../../d4/d55/token_8cc.html#aeb3b320679bdd784c8fc3b5f2aa813a9">T</a> src2) {</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="comment">// No overflow checking. Use only when it&#39;s known that</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="comment">// overflowing is impossible (e.g., subtracting two positive smis).</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1)) {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    masm-&gt;movp(dst, src1);</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  masm-&gt;subp(dst, src2);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  masm-&gt;Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, kSmiSubtractionOverflow);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;}</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiSub(Register dst, Register src1, Register src2) {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(src2));</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  SmiSubNoOverflowHelper&lt;Register&gt;(<span class="keyword">this</span>, dst, src1, src2);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;}</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiSub(Register dst,</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                            <span class="keyword">const</span> Operand&amp; src2) {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  SmiSubNoOverflowHelper&lt;Operand&gt;(<span class="keyword">this</span>, dst, src1, src2);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;}</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiMul(Register dst,</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                            Register src2,</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                            Label* on_not_smi_result,</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(src2));</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordflow">if</span> (dst.is(src1)) {</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    Label failure, zero_correct_result;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src1);  <span class="comment">// Create backup for later testing.</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    SmiToInteger64(dst, src1);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    imulp(dst, src2);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, &amp;failure, Label::kNear);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="comment">// Check for negative zero result.  If product is zero, and one</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="comment">// argument is negative, go to slow case.</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    Label correct_result;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    testp(dst, dst);</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;correct_result, Label::kNear);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    movp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    xorp(dst, src2);</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="comment">// Result was positive zero.</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8aceec566dcc3d7dcea1417f8f54b58d07">positive</a>, &amp;zero_correct_result, Label::kNear);</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    bind(&amp;failure);  <span class="comment">// Reused failure exit, restores src1.</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    movp(src1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    jmp(on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    bind(&amp;zero_correct_result);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    Set(dst, 0);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    bind(&amp;correct_result);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    SmiToInteger64(dst, src1);</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    imulp(dst, src2);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="comment">// Check for negative zero result.  If product is zero, and one</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="comment">// argument is negative, go to slow case.</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    Label correct_result;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    testp(dst, dst);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;correct_result, Label::kNear);</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="comment">// One of src1 and src2 is zero, the check whether the other is</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="comment">// negative.</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src1);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    xorp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src2);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    j(negative, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    bind(&amp;correct_result);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  }</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;}</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiDiv(Register dst,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                            Register src2,</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                            Label* on_not_smi_result,</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>));</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>));</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>));</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="comment">// Check for 0 divisor (result is +/-Infinity).</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  testp(src2, src2);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src1);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  SmiToInteger32(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, src1);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <span class="comment">// We need to rule out dividing Smi::kMinValue by -1, since that would</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="comment">// overflow in idiv and raise an exception.</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="comment">// We combine this with negative zero test (negative zero only happens</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="comment">// when dividing zero by a negative number).</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="comment">// We overshoot a little and go to slow case if we divide min-value</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="comment">// by any negative value, not just -1.</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  Label safe_div;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  testl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, Immediate(0x7fffffff));</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;safe_div, Label::kNear);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  testp(src2, src2);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8aceec566dcc3d7dcea1417f8f54b58d07">positive</a>, &amp;safe_div, Label::kNear);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    movp(src1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    jmp(on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    j(negative, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  bind(&amp;safe_div);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  SmiToInteger32(src2, src2);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="comment">// Sign extend src1 into edx:eax.</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  cdq();</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  idivl(src2);</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  Integer32ToSmi(src2, src2);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="comment">// Check that the remainder is zero.</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  testl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    Label smi_result;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;smi_result, Label::kNear);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    movp(src1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    jmp(on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    bind(&amp;smi_result);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  }</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1) &amp;&amp; src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    movp(src1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  Integer32ToSmi(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;}</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiMod(Register dst,</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                            Register src1,</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                            Register src2,</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                            Label* on_not_smi_result,</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                            Label::Distance near_jump) {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>));</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>));</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>));</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(src2));</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  testp(src2, src2);</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src1);</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  SmiToInteger32(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, src1);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  SmiToInteger32(src2, src2);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="comment">// Test for the edge case of dividing Smi::kMinValue by -1 (will overflow).</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  Label safe_div;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  cmpl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, Immediate(Smi::kMinValue));</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;safe_div, Label::kNear);</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  cmpl(src2, Immediate(-1));</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;safe_div, Label::kNear);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="comment">// Retag inputs and go slow case.</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  Integer32ToSmi(src2, src2);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    movp(src1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  }</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  jmp(on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  bind(&amp;safe_div);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="comment">// Sign extend eax into edx:eax.</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  cdq();</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  idivl(src2);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="comment">// Restore smi tags on inputs.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  Integer32ToSmi(src2, src2);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    movp(src1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  }</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">// Check for a negative zero result.  If the result is zero, and the</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <span class="comment">// dividend is negative, go slow to return a floating point negative zero.</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  Label smi_result;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  testl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;smi_result, Label::kNear);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  testp(src1, src1);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  j(negative, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  bind(&amp;smi_result);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  Integer32ToSmi(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;}</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiNot(Register dst, Register src) {</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="comment">// Set tag and padding bits before negating, so that they are zero afterwards.</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  movl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Immediate(~0));</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    xorp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    leap(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, 0));</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  }</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  notp(dst);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;}</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiAnd(Register dst, Register src1, Register src2) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(src2));</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1)) {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    movp(dst, src1);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  andp(dst, src2);</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;}</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiAndConstant(Register dst, Register src, Smi* constant) {</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="keywordflow">if</span> (constant-&gt;value() == 0) {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    Set(dst, 0);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    Register constant_reg = GetSmiConstant(constant);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    andp(dst, constant_reg);</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    LoadSmiConstant(dst, constant);</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    andp(dst, src);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  }</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;}</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiOr(Register dst, Register src1, Register src2) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1)) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(src2));</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    movp(dst, src1);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  }</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  orp(dst, src2);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;}</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiOrConstant(Register dst, Register src, Smi* constant) {</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    Register constant_reg = GetSmiConstant(constant);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    orp(dst, constant_reg);</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    LoadSmiConstant(dst, constant);</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    orp(dst, src);</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  }</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;}</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiXor(Register dst, Register src1, Register src2) {</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1)) {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(src2));</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    movp(dst, src1);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  }</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  xorp(dst, src2);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;}</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiXorConstant(Register dst, Register src, Smi* constant) {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    Register constant_reg = GetSmiConstant(constant);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    xorp(dst, constant_reg);</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    LoadSmiConstant(dst, constant);</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    xorp(dst, src);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;}</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiShiftArithmeticRightConstant(Register dst,</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                                                     Register src,</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                                                     <span class="keywordtype">int</span> shift_value) {</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(is_uint5(shift_value));</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="keywordflow">if</span> (shift_value &gt; 0) {</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      sar(dst, Immediate(shift_value + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      shl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();  <span class="comment">// Not used.</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    }</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;}</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiShiftLeftConstant(Register dst,</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                                          Register src,</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                                          <span class="keywordtype">int</span> shift_value) {</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  }</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="keywordflow">if</span> (shift_value &gt; 0) {</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    shl(dst, Immediate(shift_value));</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  }</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;}</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiShiftLogicalRightConstant(</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    Register dst, Register src, <span class="keywordtype">int</span> shift_value,</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    Label* on_not_smi_result, Label::Distance near_jump) {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="comment">// Logic right shift interprets its result as an *unsigned* number.</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="keywordflow">if</span> (dst.is(src)) {</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();  <span class="comment">// Not used.</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="keywordflow">if</span> (shift_value == 0) {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      testp(dst, dst);</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;      j(negative, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    }</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    shr(dst, Immediate(shift_value + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    shl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  }</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;}</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiShiftLeft(Register dst,</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                                  Register src1,</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                                  Register src2) {</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>));</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <span class="comment">// Untag shift amount.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1)) {</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    movq(dst, src1);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  }</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  SmiToInteger32(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, src2);</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="comment">// Shift amount specified by lower 5 bits, not six as the shl opcode.</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  andq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Immediate(0x1f));</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  shl_cl(dst);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;}</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiShiftLogicalRight(Register dst,</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                                          Register src1,</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                                          Register src2,</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                                          Label* on_not_smi_result,</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                                          Label::Distance near_jump) {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>));</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="comment">// dst and src1 can be the same, because the one case that bails out</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="comment">// is a shift by 0, which leaves dst, and therefore src1, unchanged.</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>) || src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>)) {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    movq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  }</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1)) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    movq(dst, src1);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  SmiToInteger32(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, src2);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  orl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  shr_cl(dst);  <span class="comment">// Shift is rcx modulo 0x1f + 32.</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  shl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  testq(dst, dst);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>) || src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>)) {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    Label positive_result;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8aceec566dcc3d7dcea1417f8f54b58d07">positive</a>, &amp;positive_result, Label::kNear);</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>)) {</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      movq(src1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      movq(src2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    }</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    jmp(on_not_smi_result, near_jump);</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    bind(&amp;positive_result);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <span class="comment">// src2 was zero and src1 negative.</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    j(negative, on_not_smi_result, near_jump);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  }</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;}</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SmiShiftArithmeticRight(Register dst,</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                                             Register src1,</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                                             Register src2) {</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>));</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>)) {</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src1);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>)) {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src2);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  }</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src1)) {</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    movp(dst, src1);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  }</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  SmiToInteger32(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, src2);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  orl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  sar_cl(dst);  <span class="comment">// Shift 32 + original rcx &amp; 0x1f.</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  shl(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="keywordflow">if</span> (src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>)) {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    movp(src1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>)) {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    movp(src2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;}</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SelectNonSmi(Register dst,</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                                  Register src1,</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                                  Register src2,</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                                  Label* on_not_smis,</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                                  Label::Distance near_jump) {</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src2.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(src1));</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dst.is(src2));</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <span class="comment">// Both operands must not be smis.</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> not_both_smis = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(CheckBothSmi(src1, src2));</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  Check(not_both_smis, kBothRegistersWereSmisInSelectNonSmi);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">kSmiTag</a> == 0);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, Smi::FromInt(0));</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  movl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  andp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src1);</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  testl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src2);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="comment">// If non-zero then both are smis.</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, on_not_smis, near_jump);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="comment">// Exactly one operand is a smi.</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(1, static_cast&lt;int&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="comment">// kScratchRegister still holds src1 &amp; kSmiTag, which is either zero or one.</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  subp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Immediate(1));</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="comment">// If src1 is a smi, then scratch register all 1s, else it is all 0s.</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  movp(dst, src1);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  xorp(dst, src2);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  andp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="comment">// If src1 is a smi, dst holds src1 ^ src2, else it is zero.</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  xorp(dst, src1);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// If src1 is a smi, dst is src2, else it is src1, i.e., the non-smi.</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;SmiIndex MacroAssembler::SmiToIndex(Register dst,</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                                    Register src,</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                                    <span class="keywordtype">int</span> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a58a844ea91a6b0fd681a92930d913948">shift</a>) {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(is_uint6(shift));</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <span class="comment">// There is a possible optimization if shift is in the range 60-63, but that</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  <span class="comment">// will (and must) never happen.</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    movq(dst, src);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  }</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="keywordflow">if</span> (shift &lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>) {</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    sar(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> - shift));</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    shl(dst, Immediate(shift - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  }</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="keywordflow">return</span> SmiIndex(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;}</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;SmiIndex MacroAssembler::SmiToNegativeIndex(Register dst,</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                                            Register src,</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                                            <span class="keywordtype">int</span> shift) {</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="comment">// Register src holds a positive smi.</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(is_uint6(shift));</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    movq(dst, src);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  negq(dst);</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keywordflow">if</span> (shift &lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>) {</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    sar(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> - shift));</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    shl(dst, Immediate(shift - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  }</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  <span class="keywordflow">return</span> SmiIndex(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;}</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AddSmiField(Register dst, <span class="keyword">const</span> Operand&amp; src) {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> % <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>);</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  addl(dst, Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a> / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>));</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Push(Smi* source) {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  intptr_t smi = <span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(source);</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;  <span class="keywordflow">if</span> (is_int32(smi)) {</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    Push(Immediate(static_cast&lt;int32_t&gt;(smi)));</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    Register constant = GetSmiConstant(source);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    Push(constant);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;}</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PushInt64AsTwoSmis(Register src, Register scratch) {</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;  movp(scratch, src);</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  <span class="comment">// High bits.</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  shr(src, Immediate(64 - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  shl(src, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  Push(src);</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="comment">// Low bits.</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  shl(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  Push(scratch);</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;}</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PopInt64AsTwoSmis(Register dst, Register scratch) {</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  Pop(scratch);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <span class="comment">// Low bits.</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  shr(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  Pop(dst);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  shr(dst, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="comment">// High bits.</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  shl(dst, Immediate(64 - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">kSmiShift</a>));</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  orp(dst, scratch);</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;}</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Test(<span class="keyword">const</span> Operand&amp; src, Smi* source) {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  testl(Operand(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7551db6cf193f19a377202acf42283da">kIntSize</a>), Immediate(source-&gt;value()));</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;}</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LookupNumberStringCache(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                                             Register result,</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                                             Register scratch1,</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                                             Register scratch2,</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                                             Label* not_found) {</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <span class="comment">// Use of registers. Register result is used as a temporary.</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  Register number_string_cache = result;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  Register mask = scratch1;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  Register scratch = scratch2;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  <span class="comment">// Load the number string cache.</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  LoadRoot(number_string_cache, Heap::kNumberStringCacheRootIndex);</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="comment">// Make the hash mask from the length of the number string cache. It</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="comment">// contains two elements (number and string) for each cache entry.</span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  SmiToInteger32(</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      mask, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(number_string_cache, FixedArray::kLengthOffset));</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  shrl(mask, Immediate(1));</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  subp(mask, Immediate(1));  <span class="comment">// Make mask.</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <span class="comment">// Calculate the entry in the number string cache. The hash value in the</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <span class="comment">// number string cache for smis is just the smi value, and the hash for</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <span class="comment">// doubles is the xor of the upper and lower words. See</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="comment">// Heap::GetNumberStringCache.</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  Label is_smi;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  Label load_result_from_cache;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  JumpIfSmi(<span class="keywordtype">object</span>, &amp;is_smi);</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  CheckMap(<span class="keywordtype">object</span>,</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;           isolate()-&gt;factory()-&gt;heap_number_map(),</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;           not_found,</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;           <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251a68f546db1d78edd21e128b742d2403dc">DONT_DO_SMI_CHECK</a>);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(8 == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>);</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  movl(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapNumber::kValueOffset + 4));</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  xorp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapNumber::kValueOffset));</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  andp(scratch, mask);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  <span class="comment">// Each entry in string cache consists of two pointer sized fields,</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  <span class="comment">// but times_twice_pointer_size (multiplication by 16) scale factor</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="comment">// is not supported by addrmode on x64 platform.</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="comment">// So we have to premultiply entry index before lookup.</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  shl(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a> + 1));</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  Register index = scratch;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  Register probe = mask;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  movp(probe,</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;       <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(number_string_cache,</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                    index,</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>,</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                    FixedArray::kHeaderSize));</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  JumpIfSmi(probe, not_found);</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  movsd(<a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapNumber::kValueOffset));</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  ucomisd(<a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(probe, HeapNumber::kValueOffset));</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a66842ed977d954218d67bc8fdd20df3d">parity_even</a>, not_found);  <span class="comment">// Bail out if NaN is involved.</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, not_found);  <span class="comment">// The cache did not contain this value.</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  jmp(&amp;load_result_from_cache);</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  bind(&amp;is_smi);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  SmiToInteger32(scratch, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  andp(scratch, mask);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  <span class="comment">// Each entry in string cache consists of two pointer sized fields,</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  <span class="comment">// but times_twice_pointer_size (multiplication by 16) scale factor</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  <span class="comment">// is not supported by addrmode on x64 platform.</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="comment">// So we have to premultiply entry index before lookup.</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  shl(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a> + 1));</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  <span class="comment">// Check if the entry is the smi we are looking for.</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  cmpp(<span class="keywordtype">object</span>,</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;       <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(number_string_cache,</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                    index,</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>,</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                    FixedArray::kHeaderSize));</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, not_found);</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <span class="comment">// Get the result from the cache.</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  bind(&amp;load_result_from_cache);</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  movp(result,</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;       <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(number_string_cache,</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                    index,</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>,</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                    FixedArray::kHeaderSize + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  IncrementCounter(isolate()-&gt;counters()-&gt;number_to_string_native(), 1);</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;}</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfNotString(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                                     Register object_map,</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                                     Label* not_string,</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                                     Label::Distance near_jump) {</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> is_smi = CheckSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  j(is_smi, not_string, near_jump);</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  CmpObjectType(<span class="keywordtype">object</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ad939c92fc47b6c3f29db6cfbc8569cbf">FIRST_NONSTRING_TYPE</a>, object_map);</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5deff98b7209d461524e9b5bff3dd4bf">above_equal</a>, not_string, near_jump);</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;}</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfNotBothSequentialAsciiStrings(</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    Register first_object,</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    Register second_object,</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    Register scratch1,</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    Register scratch2,</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    Label* on_fail,</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    Label::Distance near_jump) {</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <span class="comment">// Check that both objects are not smis.</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> either_smi = CheckEitherSmi(first_object, second_object);</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  j(either_smi, on_fail, near_jump);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="comment">// Load instance type for both strings.</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  movp(scratch1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(first_object, HeapObject::kMapOffset));</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  movp(scratch2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(second_object, HeapObject::kMapOffset));</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  movzxbl(scratch1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch1, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  movzxbl(scratch2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch2, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <span class="comment">// Check that both are flat ASCII strings.</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">kNotStringTag</a> != 0);</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFlatAsciiStringMask =</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a42742b6df96d8400b0ff2cf776247a7c">kStringRepresentationMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFlatAsciiStringTag =</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aff85f0a2c44538aab092f92d25039773">kStringTag</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af695344577b6def40287224263a9d3aa">kOneByteStringTag</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce">kSeqStringTag</a>;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  andl(scratch1, Immediate(kFlatAsciiStringMask));</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  andl(scratch2, Immediate(kFlatAsciiStringMask));</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <span class="comment">// Interleave the bits to check both scratch1 and scratch2 in one test.</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, kFlatAsciiStringMask &amp; (kFlatAsciiStringMask &lt;&lt; 3));</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  leap(scratch1, Operand(scratch1, scratch2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>, 0));</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  cmpl(scratch1,</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;       Immediate(kFlatAsciiStringTag + (kFlatAsciiStringTag &lt;&lt; 3)));</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, on_fail, near_jump);</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;}</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfInstanceTypeIsNotSequentialAscii(</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    Register instance_type,</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    Register scratch,</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    Label* failure,</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    Label::Distance near_jump) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="keywordflow">if</span> (!scratch.is(instance_type)) {</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    movl(scratch, instance_type);</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  }</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFlatAsciiStringMask =</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a42742b6df96d8400b0ff2cf776247a7c">kStringRepresentationMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  andl(scratch, Immediate(kFlatAsciiStringMask));</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  cmpl(scratch, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aff85f0a2c44538aab092f92d25039773">kStringTag</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce">kSeqStringTag</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af695344577b6def40287224263a9d3aa">kOneByteStringTag</a>));</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, failure, near_jump);</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;}</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfBothInstanceTypesAreNotSequentialAscii(</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    Register first_object_instance_type,</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    Register second_object_instance_type,</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    Register scratch1,</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    Register scratch2,</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    Label* on_fail,</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    Label::Distance near_jump) {</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="comment">// Load instance type for both strings.</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  movp(scratch1, first_object_instance_type);</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  movp(scratch2, second_object_instance_type);</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="comment">// Check that both are flat ASCII strings.</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">kNotStringTag</a> != 0);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFlatAsciiStringMask =</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a42742b6df96d8400b0ff2cf776247a7c">kStringRepresentationMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFlatAsciiStringTag =</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aff85f0a2c44538aab092f92d25039773">kStringTag</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af695344577b6def40287224263a9d3aa">kOneByteStringTag</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce">kSeqStringTag</a>;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  andl(scratch1, Immediate(kFlatAsciiStringMask));</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;  andl(scratch2, Immediate(kFlatAsciiStringMask));</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <span class="comment">// Interleave the bits to check both scratch1 and scratch2 in one test.</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, kFlatAsciiStringMask &amp; (kFlatAsciiStringMask &lt;&lt; 3));</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  leap(scratch1, Operand(scratch1, scratch2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>, 0));</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  cmpl(scratch1,</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;       Immediate(kFlatAsciiStringTag + (kFlatAsciiStringTag &lt;&lt; 3)));</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, on_fail, near_jump);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;}</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> JumpIfNotUniqueNameHelper(MacroAssembler* masm,</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                                      <a class="code" href="../../d4/d55/token_8cc.html#aeb3b320679bdd784c8fc3b5f2aa813a9">T</a> operand_or_register,</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                                      Label* not_unique_name,</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                                      Label::Distance distance) {</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a90fd9990c35530ac962d10e8e0eefd98">kInternalizedTag</a> == 0 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aff85f0a2c44538aab092f92d25039773">kStringTag</a> == 0);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  Label succeed;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  masm-&gt;testb(operand_or_register,</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;              Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7400184c709423dd1731ad4cbc8e69d4">kIsNotInternalizedMask</a>));</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  masm-&gt;j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;succeed, Label::kNear);</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  masm-&gt;cmpb(operand_or_register, Immediate(static_cast&lt;uint8_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a1e237bf5860e6e63ed67593dc6d03c65">SYMBOL_TYPE</a>)));</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  masm-&gt;j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, not_unique_name, distance);</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  masm-&gt;bind(&amp;succeed);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;}</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfNotUniqueName(Operand operand,</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                                         Label* not_unique_name,</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                                         Label::Distance distance) {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  JumpIfNotUniqueNameHelper&lt;Operand&gt;(<span class="keyword">this</span>, operand, not_unique_name, distance);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;}</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfNotUniqueName(Register reg,</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                                         Label* not_unique_name,</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                                         Label::Distance distance) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  JumpIfNotUniqueNameHelper&lt;Register&gt;(<span class="keyword">this</span>, reg, not_unique_name, distance);</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;}</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Move(Register dst, Register src) {</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keywordflow">if</span> (!dst.is(src)) {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    movp(dst, src);</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  }</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;}</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Move(Register dst, Handle&lt;Object&gt; source) {</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a82eb043d79d5c97b659ec88815158ca4">AllowDeferredHandleDereference</a> smi_check;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <span class="keywordflow">if</span> (source-&gt;IsSmi()) {</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    Move(dst, Smi::cast(*source));</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    MoveHeapObject(dst, source);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  }</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;}</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Move(<span class="keyword">const</span> Operand&amp; dst, Handle&lt;Object&gt; source) {</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a82eb043d79d5c97b659ec88815158ca4">AllowDeferredHandleDereference</a> smi_check;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="keywordflow">if</span> (source-&gt;IsSmi()) {</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    Move(dst, Smi::cast(*source));</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    MoveHeapObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, source);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    movp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  }</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;}</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Cmp(Register dst, Handle&lt;Object&gt; source) {</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a82eb043d79d5c97b659ec88815158ca4">AllowDeferredHandleDereference</a> smi_check;</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;  <span class="keywordflow">if</span> (source-&gt;IsSmi()) {</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    Cmp(dst, Smi::cast(*source));</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    MoveHeapObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, source);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    cmpp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  }</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;}</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Cmp(<span class="keyword">const</span> Operand&amp; dst, Handle&lt;Object&gt; source) {</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a82eb043d79d5c97b659ec88815158ca4">AllowDeferredHandleDereference</a> smi_check;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <span class="keywordflow">if</span> (source-&gt;IsSmi()) {</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    Cmp(dst, Smi::cast(*source));</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    MoveHeapObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, source);</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    cmpp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  }</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;}</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Push(Handle&lt;Object&gt; source) {</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a82eb043d79d5c97b659ec88815158ca4">AllowDeferredHandleDereference</a> smi_check;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <span class="keywordflow">if</span> (source-&gt;IsSmi()) {</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    Push(Smi::cast(*source));</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    MoveHeapObject(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, source);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  }</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;}</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;<span class="keywordtype">void</span> MacroAssembler::MoveHeapObject(Register result,</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                                    Handle&lt;Object&gt; <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a82eb043d79d5c97b659ec88815158ca4">AllowDeferredHandleDereference</a> using_raw_address;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(object-&gt;IsHeapObject());</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="keywordflow">if</span> (isolate()-&gt;heap()-&gt;InNewSpace(*<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    Handle&lt;Cell&gt; cell = isolate()-&gt;factory()-&gt;NewCell(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    Move(result, cell, RelocInfo::CELL);</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    movp(result, Operand(result, 0));</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    Move(result, <span class="keywordtype">object</span>, RelocInfo::EMBEDDED_OBJECT);</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  }</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;}</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadGlobalCell(Register dst, Handle&lt;Cell&gt; cell) {</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <span class="keywordflow">if</span> (dst.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a82eb043d79d5c97b659ec88815158ca4">AllowDeferredHandleDereference</a> embedding_raw_address;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    load_rax(cell.location(), RelocInfo::CELL);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    Move(dst, cell, RelocInfo::CELL);</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    movp(dst, Operand(dst, 0));</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  }</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;}</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Drop(<span class="keywordtype">int</span> stack_elements) {</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="keywordflow">if</span> (stack_elements &gt; 0) {</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(stack_elements * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  }</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;}</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Push(Register src) {</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    pushq(src);</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    <span class="comment">// x32 uses 64-bit push for rbp in the prologue.</span></div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(src.code() != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>.<a class="code" href="../../dc/d02/structv8_1_1internal_1_1_register.html#a9fbb542ce0dae274d40866ba432b411a">code</a>());</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    leal(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, -4));</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    movp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0), src);</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  }</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;}</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Push(<span class="keyword">const</span> Operand&amp; src) {</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    pushq(src);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, src);</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    leal(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, -4));</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    movp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  }</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;}</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Push(Immediate value) {</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    pushq(value);</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    leal(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, -4));</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    movp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0), value);</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  }</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;}</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PushImm32(<a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> imm32) {</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    pushq_imm32(imm32);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    leal(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, -4));</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    movp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0), Immediate(imm32));</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  }</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;}</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Pop(Register dst) {</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    popq(dst);</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    <span class="comment">// x32 uses 64-bit pop for rbp in the epilogue.</span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(dst.code() != <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>.<a class="code" href="../../dc/d02/structv8_1_1internal_1_1_register.html#a9fbb542ce0dae274d40866ba432b411a">code</a>());</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    movp(dst, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0));</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    leal(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 4));</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  }</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;}</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Pop(<span class="keyword">const</span> Operand&amp; dst) {</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    popq(dst);</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    Register scratch = dst.AddressUsesRegister(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>)</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        ? <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a> : <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>;</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    movp(scratch, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0));</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    movp(dst, scratch);</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    leal(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 4));</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="keywordflow">if</span> (scratch.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>)) {</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      <span class="comment">// Restore kSmiConstantRegister.</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">kSmiConstantRegister</a>,</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;           reinterpret_cast&lt;void*&gt;(Smi::FromInt(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7246b88aed235ebebc6625ece178d0dd">kSmiConstantRegisterValue</a>)),</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;           Assembler::RelocInfoNone());</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    }</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  }</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;}</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TestBit(<span class="keyword">const</span> Operand&amp; src, <span class="keywordtype">int</span> bits) {</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <span class="keywordtype">int</span> byte_offset = bits / <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>;</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  <span class="keywordtype">int</span> bit_in_byte = bits &amp; (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a> - 1);</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  testb(Operand(src, byte_offset), Immediate(1 &lt;&lt; bit_in_byte));</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;}</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Jump(ExternalReference ext) {</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, ext);</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;  jmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;}</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Jump(<span class="keyword">const</span> Operand&amp; op) {</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    jmp(op);</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, op);</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    jmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;  }</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;}</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Jump(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> destination, RelocInfo::Mode rmode) {</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, destination, rmode);</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  jmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;}</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Jump(Handle&lt;Code&gt; code_object, RelocInfo::Mode rmode) {</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  <span class="comment">// TODO(X64): Inline this</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  jmp(code_object, rmode);</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;}</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;<span class="keywordtype">int</span> MacroAssembler::CallSize(ExternalReference ext) {</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  <span class="comment">// Opcode for call kScratchRegister is: Rex.B FF D4 (three bytes).</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  <span class="keywordflow">return</span> LoadAddressSize(ext) +</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;         Assembler::kCallScratchRegisterInstructionLength;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;}</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Call(ExternalReference ext) {</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <span class="keywordtype">int</span> end_position = pc_offset() + CallSize(ext);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, ext);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  call(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(end_position, pc_offset());</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;}</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Call(<span class="keyword">const</span> Operand&amp; op) {</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">kInt64Size</a>) {</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    call(op);</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">kInt32Size</a>);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, op);</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    call(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  }</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;}</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Call(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">Address</a> destination, RelocInfo::Mode rmode) {</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <span class="keywordtype">int</span> end_position = pc_offset() + CallSize(destination);</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, destination, rmode);</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  call(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(pc_offset(), end_position);</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;}</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Call(Handle&lt;Code&gt; code_object,</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                          RelocInfo::Mode rmode,</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                          TypeFeedbackId ast_id) {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <span class="keywordtype">int</span> end_position = pc_offset() + CallSize(code_object);</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(RelocInfo::IsCodeTarget(rmode) ||</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      rmode == RelocInfo::CODE_AGE_SEQUENCE);</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  call(code_object, rmode, ast_id);</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(end_position, pc_offset());</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;}</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Pushad() {</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>);</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>);</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>);</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <span class="comment">// Not pushing rsp or rbp.</span></div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>);</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a16e3d756c69dbae4aa6f68cd7c5423ca">r8</a>);</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a113747f07e8621eed53e102993358774">r9</a>);</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <span class="comment">// r10 is kScratchRegister.</span></div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afca275e25e2f701ebb154f525478bf57">r11</a>);</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <span class="comment">// r12 is kSmiConstantRegister.</span></div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <span class="comment">// r13 is kRootRegister.</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a55e1524b1908417bac09cae5292e9484">r14</a>);</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3d1ba31d193200ef0ab5c1f92bae2d86">r15</a>);</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(11 == <a class="code" href="../../de/de5/frames-arm64_8h.html#a5270da26d771451795798dce0d1e178c">kNumSafepointSavedRegisters</a>);</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <span class="comment">// Use lea for symmetry with Popad.</span></div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  <span class="keywordtype">int</span> sp_delta =</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;      (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a120129960270720fe1e85f660c6157ac">kNumSafepointRegisters</a> - <a class="code" href="../../de/de5/frames-arm64_8h.html#a5270da26d771451795798dce0d1e178c">kNumSafepointSavedRegisters</a>) * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  leap(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, -sp_delta));</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;}</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Popad() {</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <span class="comment">// Popad must not change the flags, so use lea instead of addq.</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <span class="keywordtype">int</span> sp_delta =</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;      (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a120129960270720fe1e85f660c6157ac">kNumSafepointRegisters</a> - <a class="code" href="../../de/de5/frames-arm64_8h.html#a5270da26d771451795798dce0d1e178c">kNumSafepointSavedRegisters</a>) * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;  leap(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, sp_delta));</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3d1ba31d193200ef0ab5c1f92bae2d86">r15</a>);</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a55e1524b1908417bac09cae5292e9484">r14</a>);</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afca275e25e2f701ebb154f525478bf57">r11</a>);</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a113747f07e8621eed53e102993358774">r9</a>);</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a16e3d756c69dbae4aa6f68cd7c5423ca">r8</a>);</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>);</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>);</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>);</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>);</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;}</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Dropad() {</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a120129960270720fe1e85f660c6157ac">kNumSafepointRegisters</a> * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;}</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;<span class="comment">// Order general registers are pushed by Pushad:</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;<span class="comment">// rax, rcx, rdx, rbx, rsi, rdi, r8, r9, r11, r14, r15.</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;MacroAssembler::kSafepointPushRegisterIndices[<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afc9485caadcdbab9ac567ff1ec54e554">Register::kNumRegisters</a>] = {</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    0,</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    1,</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    2,</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    3,</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    -1,</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    -1,</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    4,</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    5,</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    6,</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    7,</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    -1,</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    8,</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    -1,</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    -1,</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    9,</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    10</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;};</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StoreToSafepointRegisterSlot(Register dst,</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;                                                  <span class="keyword">const</span> Immediate&amp; imm) {</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  movp(SafepointRegisterSlot(dst), imm);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;}</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StoreToSafepointRegisterSlot(Register dst, Register src) {</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  movp(SafepointRegisterSlot(dst), src);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;}</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadFromSafepointRegisterSlot(Register dst, Register src) {</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  movp(dst, SafepointRegisterSlot(src));</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;}</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;Operand MacroAssembler::SafepointRegisterSlot(Register reg) {</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <span class="keywordflow">return</span> Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, SafepointRegisterStackIndex(reg.code()) * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;}</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PushTryHandler(StackHandler::Kind kind,</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                                    <span class="keywordtype">int</span> handler_index) {</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  <span class="comment">// Adjust this code if not the case.</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kSize == 4 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> +</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                                                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad7dcca21910dd40788b9f4e1acbd90c2">kFPOnStackSize</a>);</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kNextOffset == 0);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kCodeOffset == 1 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kStateOffset == 2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kContextOffset == 3 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kFPOffset == 4 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  <span class="comment">// We will build up the handler from the bottom by pushing on the stack.</span></div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  <span class="comment">// First push the frame pointer and context.</span></div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <span class="keywordflow">if</span> (kind == StackHandler::JS_ENTRY) {</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="comment">// The frame pointer does not point to a JS frame so we save NULL for</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="comment">// rbp. We expect the code throwing an exception to check rbp before</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    <span class="comment">// dereferencing it to restore the context.</span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    pushq(Immediate(0));  <span class="comment">// NULL frame pointer.</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    Push(Smi::FromInt(0));  <span class="comment">// No context.</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    pushq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  }</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  <span class="comment">// Push the state and the code object.</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  <span class="keywordtype">unsigned</span> state =</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;      StackHandler::IndexField::encode(handler_index) |</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;      StackHandler::KindField::encode(kind);</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  Push(Immediate(state));</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  Push(CodeObject());</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  <span class="comment">// Link the current handler as the next handler.</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  ExternalReference handler_address(Isolate::kHandlerAddress, isolate());</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  Push(ExternalOperand(handler_address));</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <span class="comment">// Set this new handler as the current one.</span></div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  movp(ExternalOperand(handler_address), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>);</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;}</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PopTryHandler() {</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kNextOffset == 0);</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;  ExternalReference handler_address(Isolate::kHandlerAddress, isolate());</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  Pop(ExternalOperand(handler_address));</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(StackHandlerConstants::kSize - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>));</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;}</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpToHandlerEntry() {</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  <span class="comment">// Compute the handler entry address and jump to it.  The handler table is</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;  <span class="comment">// a fixed array of (smi-tagged) code offsets.</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;  <span class="comment">// rax = exception, rdi = code object, rdx = state.</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, Code::kHandlerTableOffset));</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  shr(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, Immediate(StackHandler::kKindWidth));</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>,</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;       <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>, FixedArray::kHeaderSize));</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  SmiToInteger64(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>);</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  leap(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, Code::kHeaderSize));</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  jmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>);</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;}</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Throw(Register value) {</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  <span class="comment">// Adjust this code if not the case.</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kSize == 4 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> +</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;                                                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad7dcca21910dd40788b9f4e1acbd90c2">kFPOnStackSize</a>);</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kNextOffset == 0);</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kCodeOffset == 1 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kStateOffset == 2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kContextOffset == 3 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kFPOffset == 4 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;  <span class="comment">// The exception is expected in rax.</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  <span class="keywordflow">if</span> (!value.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, value);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  }</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="comment">// Drop the stack pointer to the top of the top handler.</span></div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;  ExternalReference handler_address(Isolate::kHandlerAddress, isolate());</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, ExternalOperand(handler_address));</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;  <span class="comment">// Restore the next handler.</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  Pop(ExternalOperand(handler_address));</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <span class="comment">// Remove the code object and state, compute the handler address in rdi.</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>);  <span class="comment">// Code object.</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>);  <span class="comment">// Offset and state.</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;  <span class="comment">// Restore the context and frame pointer.</span></div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);  <span class="comment">// Context.</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  popq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);  <span class="comment">// Frame pointer.</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  <span class="comment">// If the handler is a JS frame, restore the context to the frame.</span></div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;  <span class="comment">// (kind == ENTRY) == (rbp == 0) == (rsi == 0), so we could test either</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  <span class="comment">// rbp or rsi.</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  Label skip;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  testp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;skip, Label::kNear);</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  movp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, StandardFrameConstants::kContextOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;  bind(&amp;skip);</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  JumpToHandlerEntry();</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;}</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;<span class="keywordtype">void</span> MacroAssembler::ThrowUncatchable(Register value) {</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;  <span class="comment">// Adjust this code if not the case.</span></div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kSize == 4 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a> +</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;                                                <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad7dcca21910dd40788b9f4e1acbd90c2">kFPOnStackSize</a>);</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kNextOffset == 0);</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kCodeOffset == 1 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kStateOffset == 2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kContextOffset == 3 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandlerConstants::kFPOffset == 4 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  <span class="comment">// The exception is expected in rax.</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  <span class="keywordflow">if</span> (!value.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>)) {</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, value);</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;  }</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  <span class="comment">// Drop the stack pointer to the top of the top stack handler.</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  ExternalReference handler_address(Isolate::kHandlerAddress, isolate());</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <a class="code" href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">Load</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, handler_address);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <span class="comment">// Unwind the handlers until the top ENTRY handler is found.</span></div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  Label fetch_next, check_kind;</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  jmp(&amp;check_kind, Label::kNear);</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  bind(&amp;fetch_next);</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, StackHandlerConstants::kNextOffset));</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  bind(&amp;check_kind);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(StackHandler::JS_ENTRY == 0);</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  testl(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, StackHandlerConstants::kStateOffset),</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;        Immediate(StackHandler::KindField::kMask));</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;fetch_next);</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <span class="comment">// Set the top handler address to next handler past the top ENTRY handler.</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  Pop(ExternalOperand(handler_address));</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  <span class="comment">// Remove the code object and state, compute the handler address in rdi.</span></div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>);  <span class="comment">// Code object.</span></div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>);  <span class="comment">// Offset and state.</span></div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <span class="comment">// Clear the context pointer and frame pointer (0 was saved in the handler).</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  Pop(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  popq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  JumpToHandlerEntry();</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;}</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Ret() {</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  ret(0);</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;}</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Ret(<span class="keywordtype">int</span> bytes_dropped, Register scratch) {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="keywordflow">if</span> (is_uint16(bytes_dropped)) {</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    ret(bytes_dropped);</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    PopReturnAddressTo(scratch);</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;    addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(bytes_dropped));</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    PushReturnAddressFrom(scratch);</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    ret(0);</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  }</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;}</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;<span class="keywordtype">void</span> MacroAssembler::FCmp() {</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;  fucomip();</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;  fstp(0);</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;}</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CmpObjectType(Register heap_object,</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27">InstanceType</a> type,</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;                                   Register map) {</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  movp(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(heap_object, HeapObject::kMapOffset));</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;  CmpInstanceType(map, type);</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;}</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CmpInstanceType(Register map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27">InstanceType</a> type) {</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceTypeOffset),</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;       Immediate(static_cast&lt;int8_t&gt;(type)));</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;}</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckFastElements(Register map,</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;                                       Label* fail,</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;                                       Label::Distance distance) {</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">FAST_SMI_ELEMENTS</a> == 0);</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">FAST_HOLEY_SMI_ELEMENTS</a> == 1);</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91">FAST_ELEMENTS</a> == 2);</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6">FAST_HOLEY_ELEMENTS</a> == 3);</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField2Offset),</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;       Immediate(Map::kMaximumBitField2FastHoleyElementValue));</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, fail, distance);</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;}</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckFastObjectElements(Register map,</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;                                             Label* fail,</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;                                             Label::Distance distance) {</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">FAST_SMI_ELEMENTS</a> == 0);</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">FAST_HOLEY_SMI_ELEMENTS</a> == 1);</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91">FAST_ELEMENTS</a> == 2);</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6">FAST_HOLEY_ELEMENTS</a> == 3);</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField2Offset),</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;       Immediate(Map::kMaximumBitField2FastHoleySmiElementValue));</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">below_equal</a>, fail, distance);</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField2Offset),</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;       Immediate(Map::kMaximumBitField2FastHoleyElementValue));</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, fail, distance);</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;}</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckFastSmiElements(Register map,</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;                                          Label* fail,</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;                                          Label::Distance distance) {</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">FAST_SMI_ELEMENTS</a> == 0);</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">FAST_HOLEY_SMI_ELEMENTS</a> == 1);</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  cmpb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField2Offset),</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;       Immediate(Map::kMaximumBitField2FastHoleySmiElementValue));</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, fail, distance);</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;}</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;<span class="keywordtype">void</span> MacroAssembler::StoreNumberToDoubleElements(</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    Register maybe_number,</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    Register elements,</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    Register index,</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    XMMRegister xmm_scratch,</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    Label* fail,</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    <span class="keywordtype">int</span> elements_offset) {</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  Label smi_value, is_nan, maybe_nan, not_nan, have_double_value, done;</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  JumpIfSmi(maybe_number, &amp;smi_value, Label::kNear);</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  CheckMap(maybe_number,</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;           isolate()-&gt;factory()-&gt;heap_number_map(),</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;           fail,</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;           <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251a68f546db1d78edd21e128b742d2403dc">DONT_DO_SMI_CHECK</a>);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  <span class="comment">// Double value, canonicalize NaN.</span></div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  uint32_t offset = HeapNumber::kValueOffset + <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a818786d91ba77192f22d97260f817d77">kHoleNanLower32</a>);</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  cmpl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(maybe_number, offset),</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;       Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2723148e93023c30ba2f0bd2aed0257a">kNaNOrInfinityLowerBoundUpper32</a>));</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a2d5a0f84387e38e44f9a7663b66eddb3">greater_equal</a>, &amp;maybe_nan, Label::kNear);</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;  bind(&amp;not_nan);</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  movsd(xmm_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(maybe_number, HeapNumber::kValueOffset));</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  bind(&amp;have_double_value);</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  movsd(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, index, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>,</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                     FixedDoubleArray::kHeaderSize - elements_offset),</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        xmm_scratch);</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;  jmp(&amp;done);</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  bind(&amp;maybe_nan);</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  <span class="comment">// Could be NaN or Infinity. If fraction is not zero, it&#39;s NaN, otherwise</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  <span class="comment">// it&#39;s an Infinity, and the non-NaN code path applies.</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8ab67380aeceb97932170fbca2bcdf965f">greater</a>, &amp;is_nan, Label::kNear);</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  cmpl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(maybe_number, HeapNumber::kValueOffset), Immediate(0));</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;not_nan);</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  bind(&amp;is_nan);</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <span class="comment">// Convert all NaNs to the same canonical NaN value when they are stored in</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  <span class="comment">// the double array.</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, BitCast&lt;uint64_t&gt;(</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      FixedDoubleArray::canonical_not_the_hole_nan_as_double()));</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  movq(xmm_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;  jmp(&amp;have_double_value, Label::kNear);</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  bind(&amp;smi_value);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  <span class="comment">// Value is a smi. convert to a double and store.</span></div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  <span class="comment">// Preserve original value.</span></div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;  SmiToInteger32(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, maybe_number);</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;  Cvtlsi2sd(xmm_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;  movsd(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, index, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">times_8</a>,</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;                     FixedDoubleArray::kHeaderSize - elements_offset),</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        xmm_scratch);</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;}</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CompareMap(Register <a class="code" href="../../d4/d7d/heap-snapshot-generator_8cc.html#aab49963775d0eef29ecab5e60bdd31e6">obj</a>, Handle&lt;Map&gt; map) {</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  Cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(obj, HeapObject::kMapOffset), map);</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;}</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckMap(Register obj,</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;                              Handle&lt;Map&gt; map,</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;                              Label* fail,</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;                              <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251">SmiCheckType</a> smi_check_type) {</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="keywordflow">if</span> (smi_check_type == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1">DO_SMI_CHECK</a>) {</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    JumpIfSmi(obj, fail);</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;  }</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  CompareMap(obj, map);</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, fail);</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;}</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;<span class="keywordtype">void</span> MacroAssembler::ClampUint8(Register reg) {</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  Label done;</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  testl(reg, Immediate(0xFFFFFF00));</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  setcc(negative, reg);  <span class="comment">// 1 if negative, 0 if positive.</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;  decb(reg);  <span class="comment">// 0 if negative, 255 if positive.</span></div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;}</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;<span class="keywordtype">void</span> MacroAssembler::ClampDoubleToUint8(XMMRegister input_reg,</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;                                        XMMRegister temp_xmm_reg,</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;                                        Register result_reg) {</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  Label done;</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  Label conv_failure;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  xorps(temp_xmm_reg, temp_xmm_reg);</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  cvtsd2si(result_reg, input_reg);</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  testl(result_reg, Immediate(0xFFFFFF00));</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;  cmpl(result_reg, Immediate(1));</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">overflow</a>, &amp;conv_failure, Label::kNear);</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;  movl(result_reg, Immediate(0));</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  setcc(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a8c33592060c5e5568b3fa116c71610ba">sign</a>, result_reg);</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  subl(result_reg, Immediate(1));</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  andl(result_reg, Immediate(255));</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;  jmp(&amp;done, Label::kNear);</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;  bind(&amp;conv_failure);</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;  Set(result_reg, 0);</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;  ucomisd(input_reg, temp_xmm_reg);</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">below</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  Set(result_reg, 255);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;}</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadUint32(XMMRegister dst,</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;                                Register src,</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;                                XMMRegister scratch) {</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <span class="keywordflow">if</span> (FLAG_debug_code) {</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    cmpq(src, Immediate(0xffffffff));</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">below_equal</a>, kInputGPRIsExpectedToHaveUpper32Cleared);</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;  }</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;  cvtqsi2sd(dst, src);</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;}</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SlowTruncateToI(Register result_reg,</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;                                     Register input_reg,</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                                     <span class="keywordtype">int</span> offset) {</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;  DoubleToIStub stub(input_reg, result_reg, offset, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;  call(stub.GetCode(isolate()), RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;}</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TruncateHeapNumberToI(Register result_reg,</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;                                           Register input_reg) {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  Label done;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  movsd(<a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(input_reg, HeapNumber::kValueOffset));</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;  cvttsd2siq(result_reg, <a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>);</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  cmpq(result_reg, Immediate(1));</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <span class="comment">// Slow case.</span></div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <span class="keywordflow">if</span> (input_reg.is(result_reg)) {</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    subp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>));</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    movsd(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae8fdd39bffcc13b291c4fa04a9e185cb">MemOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0), <a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>);</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    SlowTruncateToI(result_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0);</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>));</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    SlowTruncateToI(result_reg, input_reg);</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  }</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;}</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TruncateDoubleToI(Register result_reg,</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                                       XMMRegister input_reg) {</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  Label done;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  cvttsd2siq(result_reg, input_reg);</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;  cmpq(result_reg, Immediate(1));</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">no_overflow</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  subp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>));</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;  movsd(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae8fdd39bffcc13b291c4fa04a9e185cb">MemOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0), input_reg);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;  SlowTruncateToI(result_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0);</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>));</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;}</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;<span class="keywordtype">void</span> MacroAssembler::DoubleToI(Register result_reg,</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;                               XMMRegister input_reg,</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;                               XMMRegister scratch,</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;                               <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0e5e696678088b4c989051fe2d50c9a">MinusZeroMode</a> minus_zero_mode,</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;                               Label* conversion_failed,</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;                               Label::Distance dst) {</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  cvttsd2si(result_reg, input_reg);</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  Cvtlsi2sd(<a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>, result_reg);</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  ucomisd(<a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>, input_reg);</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, conversion_failed, dst);</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a66842ed977d954218d67bc8fdd20df3d">parity_even</a>, conversion_failed, dst);  <span class="comment">// NaN.</span></div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;  <span class="keywordflow">if</span> (minus_zero_mode == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0e5e696678088b4c989051fe2d50c9aaa6383dd25bfa78e969a64e25d54f822d">FAIL_ON_MINUS_ZERO</a>) {</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    Label done;</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    <span class="comment">// The integer converted back is equal to the original. We</span></div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <span class="comment">// only have to test if we got -0 as an input.</span></div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    testl(result_reg, result_reg);</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    movmskpd(result_reg, input_reg);</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <span class="comment">// Bit 0 contains the sign of the double in input_reg.</span></div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    <span class="comment">// If input was positive, we are ok and return 0, otherwise</span></div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    <span class="comment">// jump to conversion_failed.</span></div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    andl(result_reg, Immediate(1));</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, conversion_failed, dst);</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    bind(&amp;done);</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;  }</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;}</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TaggedToI(Register result_reg,</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;                               Register input_reg,</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;                               XMMRegister temp,</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;                               <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0e5e696678088b4c989051fe2d50c9a">MinusZeroMode</a> minus_zero_mode,</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;                               Label* lost_precision,</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;                               Label::Distance dst) {</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;  Label done;</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!temp.is(<a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>));</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;  <span class="comment">// Heap number map check.</span></div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;  CompareRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(input_reg, HeapObject::kMapOffset),</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;              Heap::kHeapNumberMapRootIndex);</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, lost_precision, dst);</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  movsd(<a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(input_reg, HeapNumber::kValueOffset));</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;  cvttsd2si(result_reg, <a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>);</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;  Cvtlsi2sd(temp, result_reg);</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;  ucomisd(<a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>, temp);</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  RecordComment(<span class="stringliteral">&quot;Deferred TaggedToI: lost precision&quot;</span>);</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, lost_precision, dst);</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;  RecordComment(<span class="stringliteral">&quot;Deferred TaggedToI: NaN&quot;</span>);</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a66842ed977d954218d67bc8fdd20df3d">parity_even</a>, lost_precision, dst);  <span class="comment">// NaN.</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;  <span class="keywordflow">if</span> (minus_zero_mode == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad0e5e696678088b4c989051fe2d50c9aaa6383dd25bfa78e969a64e25d54f822d">FAIL_ON_MINUS_ZERO</a>) {</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    testl(result_reg, result_reg);</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    movmskpd(result_reg, <a class="code" href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a>);</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    andl(result_reg, Immediate(1));</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, lost_precision, dst);</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;  }</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;}</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Throw(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a71221094570a6a00adeb973c92190d">BailoutReason</a> reason) {</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* msg = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae3c559b497bf8e31b3c9e8b55dbb164b">GetBailoutReason</a>(reason);</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;  <span class="keywordflow">if</span> (msg != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>) {</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    RecordComment(<span class="stringliteral">&quot;Throw message: &quot;</span>);</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    RecordComment(msg);</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;  }</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  Push(Smi::FromInt(reason));</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;  <span class="keywordflow">if</span> (!has_frame_) {</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <span class="comment">// We don&#39;t actually want to generate a pile of code for this, so just</span></div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="comment">// claim there is a stack frame, without generating one.</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    FrameScope scope(<span class="keyword">this</span>, <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">StackFrame::NONE</a>);</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    CallRuntime(Runtime::kHiddenThrowMessage, 1);</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    CallRuntime(Runtime::kHiddenThrowMessage, 1);</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;  }</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;  <span class="comment">// Control will not return here.</span></div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;  int3();</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;}</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;<span class="keywordtype">void</span> MacroAssembler::ThrowIf(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a71221094570a6a00adeb973c92190d">BailoutReason</a> reason) {</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  Label <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae77d2fa4643ef916a7813c2ef8e8ef81a67824ecf84f5816f07b74fa956bdbcd2">L</a>;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(cc), &amp;L);</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  Throw(reason);</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  <span class="comment">// will not return here</span></div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;  bind(&amp;L);</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;}</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadInstanceDescriptors(Register map,</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                                             Register descriptors) {</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;  movp(descriptors, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kDescriptorsOffset));</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;}</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;<span class="keywordtype">void</span> MacroAssembler::NumberOfOwnDescriptors(Register dst, Register map) {</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;  movp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField3Offset));</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;  DecodeField&lt;Map::NumberOfOwnDescriptorsBits&gt;(dst);</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;}</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnumLength(Register dst, Register map) {</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(Map::EnumLengthBits::kShift == 0);</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;  movp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kBitField3Offset));</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Smi::FromInt(Map::EnumLengthBits::kMask));</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  andp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;}</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;<span class="keywordtype">void</span> MacroAssembler::DispatchMap(Register obj,</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                                 Register unused,</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                                 Handle&lt;Map&gt; map,</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                                 Handle&lt;Code&gt; success,</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;                                 <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251">SmiCheckType</a> smi_check_type) {</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;  Label fail;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  <span class="keywordflow">if</span> (smi_check_type == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1">DO_SMI_CHECK</a>) {</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;    JumpIfSmi(obj, &amp;fail);</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;  }</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;  Cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(obj, HeapObject::kMapOffset), map);</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, success, RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;  bind(&amp;fail);</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;}</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertNumber(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    Label ok;</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> is_smi = CheckSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    j(is_smi, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    Cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapObject::kMapOffset),</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        isolate()-&gt;factory()-&gt;heap_number_map());</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, kOperandIsNotANumber);</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;  }</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;}</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertNotSmi(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> is_smi = CheckSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">NegateCondition</a>(is_smi), kOperandIsASmi);</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;  }</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;}</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertSmi(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> is_smi = CheckSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    Check(is_smi, kOperandIsNotASmi);</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;  }</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;}</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertSmi(<span class="keyword">const</span> Operand&amp; <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> is_smi = CheckSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    Check(is_smi, kOperandIsNotASmi);</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;  }</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;}</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertZeroExtended(Register int32_register) {</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!int32_register.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    movq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, <a class="code" href="../../d5/d87/globals_8h.html#a70ee6962850813a39c8d4dfa2b658ca9">V8_INT64_C</a>(0x0000000100000000));</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    cmpq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, int32_register);</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5deff98b7209d461524e9b5bff3dd4bf">above_equal</a>, k32BitValueInRegisterIsNotZeroExtended);</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  }</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;}</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertString(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    testb(<span class="keywordtype">object</span>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, kOperandIsASmiAndNotAString);</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    Push(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    movp(<span class="keywordtype">object</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    CmpInstanceType(<span class="keywordtype">object</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ad939c92fc47b6c3f29db6cfbc8569cbf">FIRST_NONSTRING_TYPE</a>);</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    Pop(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">below</a>, kOperandIsNotAString);</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;  }</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;}</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertName(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    testb(<span class="keywordtype">object</span>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, kOperandIsASmiAndNotAName);</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    Push(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    movp(<span class="keywordtype">object</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    CmpInstanceType(<span class="keywordtype">object</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a754905f80c48c8866b23aca49699104f">LAST_NAME_TYPE</a>);</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    Pop(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">below_equal</a>, kOperandIsNotAName);</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;  }</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;}</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertUndefinedOrAllocationSite(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    Label done_checking;</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    AssertNotSmi(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    Cmp(<span class="keywordtype">object</span>, isolate()-&gt;factory()-&gt;undefined_value());</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;done_checking);</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    Cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">object</span>, 0), isolate()-&gt;factory()-&gt;allocation_site_map());</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, kExpectedUndefinedOrCell);</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;    bind(&amp;done_checking);</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;  }</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;}</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AssertRootValue(Register src,</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;                                     Heap::RootListIndex root_value_index,</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;                                     <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0a71221094570a6a00adeb973c92190d">BailoutReason</a> reason) {</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!src.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, root_value_index);</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    cmpp(src, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, reason);</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  }</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;}</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::IsObjectStringType(Register heap_object,</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;                                             Register map,</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;                                             Register instance_type) {</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;  movp(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(heap_object, HeapObject::kMapOffset));</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;  movzxbl(instance_type, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">kNotStringTag</a> != 0);</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;  testb(instance_type, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a>));</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;}</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> MacroAssembler::IsObjectNameType(Register heap_object,</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;                                           Register map,</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;                                           Register instance_type) {</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;  movp(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(heap_object, HeapObject::kMapOffset));</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;  movzxbl(instance_type, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  cmpb(instance_type, Immediate(static_cast&lt;uint8_t&gt;(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a754905f80c48c8866b23aca49699104f">LAST_NAME_TYPE</a>)));</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">below_equal</a>;</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;}</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TryGetFunctionPrototype(Register <span class="keyword">function</span>,</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;                                             Register result,</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;                                             Label* miss,</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;                                             <span class="keywordtype">bool</span> miss_on_bound_function) {</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <span class="comment">// Check that the receiver isn&#39;t a smi.</span></div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  testl(<span class="keyword">function</span>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">kSmiTagMask</a>));</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, miss);</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;  <span class="comment">// Check that the function really is a function.</span></div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;  CmpObjectType(<span class="keyword">function</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a02670a3c9633129c524842afc57c106d">JS_FUNCTION_TYPE</a>, result);</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, miss);</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;  <span class="keywordflow">if</span> (miss_on_bound_function) {</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>,</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kSharedFunctionInfoOffset));</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;    <span class="comment">// It&#39;s not smi-tagged (stored in the top half of a smi-tagged 8-byte</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    <span class="comment">// field).</span></div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    TestBit(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>,</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;                         SharedFunctionInfo::kCompilerHintsOffset),</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            SharedFunctionInfo::kBoundFunction);</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, miss);</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;  }</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;  <span class="comment">// Make sure that the function has an instance prototype.</span></div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;  Label non_instance;</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;  testb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, Map::kBitFieldOffset),</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;        Immediate(1 &lt;&lt; Map::kHasNonInstancePrototype));</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;non_instance, Label::kNear);</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;  <span class="comment">// Get the prototype or initial map from the function.</span></div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;  movp(result,</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;       <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kPrototypeOrInitialMapOffset));</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;  <span class="comment">// If the prototype or initial map is the hole, don&#39;t return it and</span></div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;  <span class="comment">// simply miss the cache instead. This will allow us to allocate a</span></div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;  <span class="comment">// prototype object on-demand in the runtime system.</span></div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;  CompareRoot(result, Heap::kTheHoleValueRootIndex);</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, miss);</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;  <span class="comment">// If the function does not have an initial map, we&#39;re done.</span></div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  Label done;</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  CmpObjectType(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a77dd0d910751ab1628781fb29adc69d8">MAP_TYPE</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  <span class="comment">// Get the prototype from the initial map.</span></div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;  movp(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, Map::kPrototypeOffset));</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;  jmp(&amp;done, Label::kNear);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="comment">// Non-instance prototype: Fetch prototype from constructor field</span></div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;  <span class="comment">// in initial map.</span></div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;  bind(&amp;non_instance);</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;  movp(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, Map::kConstructorOffset));</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;  <span class="comment">// All done.</span></div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;}</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;<span class="keywordtype">void</span> MacroAssembler::SetCounter(StatsCounter* counter, <span class="keywordtype">int</span> value) {</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  <span class="keywordflow">if</span> (FLAG_native_code_counters &amp;&amp; counter-&gt;Enabled()) {</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;    Operand counter_operand = ExternalOperand(ExternalReference(counter));</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    movl(counter_operand, Immediate(value));</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  }</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;}</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;<span class="keywordtype">void</span> MacroAssembler::IncrementCounter(StatsCounter* counter, <span class="keywordtype">int</span> value) {</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(value &gt; 0);</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  <span class="keywordflow">if</span> (FLAG_native_code_counters &amp;&amp; counter-&gt;Enabled()) {</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;    Operand counter_operand = ExternalOperand(ExternalReference(counter));</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    <span class="keywordflow">if</span> (value == 1) {</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      incl(counter_operand);</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      addl(counter_operand, Immediate(value));</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    }</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  }</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;}</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;<span class="keywordtype">void</span> MacroAssembler::DecrementCounter(StatsCounter* counter, <span class="keywordtype">int</span> value) {</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(value &gt; 0);</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  <span class="keywordflow">if</span> (FLAG_native_code_counters &amp;&amp; counter-&gt;Enabled()) {</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    Operand counter_operand = ExternalOperand(ExternalReference(counter));</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    <span class="keywordflow">if</span> (value == 1) {</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;      decl(counter_operand);</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;      subl(counter_operand, Immediate(value));</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    }</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;  }</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;}</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;<span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span></div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;<span class="keywordtype">void</span> MacroAssembler::DebugBreak() {</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, 0);  <span class="comment">// No arguments.</span></div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, ExternalReference(Runtime::kDebugBreak, isolate()));</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;  CEntryStub ces(1);</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(AllowThisStubCall(&amp;ces));</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  Call(ces.GetCode(isolate()), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a105546b82eb2e99e172dda630ee4fdc1a6c0c338932b450afc64a0224b4d47baa">RelocInfo::DEBUG_BREAK</a>);</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;}</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;<span class="preprocessor">#endif  // ENABLE_DEBUGGER_SUPPORT</span></div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeCode(Register <a class="code" href="../../d1/d2e/flag-definitions_8h.html#ab91e71e972251cbfe502d5f3856e5762">code</a>,</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;                                <span class="keyword">const</span> ParameterCount&amp; expected,</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;                                <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;                                <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;                                <span class="keyword">const</span> CallWrapper&amp; call_wrapper) {</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;  <span class="comment">// You can&#39;t call a function without a valid frame.</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;  Label done;</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;  <span class="keywordtype">bool</span> definitely_mismatches = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;  InvokePrologue(expected,</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;                 actual,</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;                 Handle&lt;Code&gt;::null(),</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;                 code,</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;                 &amp;done,</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                 &amp;definitely_mismatches,</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;                 flag,</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                 Label::kNear,</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                 call_wrapper);</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;  <span class="keywordflow">if</span> (!definitely_mismatches) {</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;    <span class="keywordflow">if</span> (flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396">CALL_FUNCTION</a>) {</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;      call_wrapper.BeforeCall(CallSize(code));</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;      call(code);</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;      call_wrapper.AfterCall();</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a>);</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;      jmp(code);</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;    }</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;    bind(&amp;done);</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;  }</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;}</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeFunction(Register <span class="keyword">function</span>,</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;                                    <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;                                    <span class="keyword">const</span> CallWrapper&amp; call_wrapper) {</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;  <span class="comment">// You can&#39;t call a function without a valid frame.</span></div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<span class="keyword">function</span>.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>));</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kSharedFunctionInfoOffset));</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kContextOffset));</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;  movsxlq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>,</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;          <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, SharedFunctionInfo::kFormalParameterCountOffset));</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;  <span class="comment">// Advances rdx to the end of the Code object header, to the start of</span></div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  <span class="comment">// the executable code.</span></div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, JSFunction::kCodeEntryOffset));</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;  ParameterCount expected(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>);</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;  InvokeCode(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, expected, actual, flag, call_wrapper);</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;}</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeFunction(Register <span class="keyword">function</span>,</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; expected,</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;                                    <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;                                    <span class="keyword">const</span> CallWrapper&amp; call_wrapper) {</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;  <span class="comment">// You can&#39;t call a function without a valid frame.</span></div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a> || has_frame());</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<span class="keyword">function</span>.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>));</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kContextOffset));</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  <span class="comment">// Advances rdx to the end of the Code object header, to the start of</span></div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  <span class="comment">// the executable code.</span></div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, JSFunction::kCodeEntryOffset));</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  InvokeCode(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, expected, actual, flag, call_wrapper);</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;}</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokeFunction(Handle&lt;JSFunction&gt; <span class="keyword">function</span>,</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; expected,</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;                                    <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;                                    <span class="keyword">const</span> CallWrapper&amp; call_wrapper) {</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, <span class="keyword">function</span>);</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;  InvokeFunction(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>, expected, actual, flag, call_wrapper);</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;}</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InvokePrologue(<span class="keyword">const</span> ParameterCount&amp; expected,</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;                                    <span class="keyword">const</span> ParameterCount&amp; actual,</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;                                    Handle&lt;Code&gt; code_constant,</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;                                    Register code_register,</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;                                    Label* done,</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;                                    <span class="keywordtype">bool</span>* definitely_mismatches,</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;                                    <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a> flag,</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;                                    Label::Distance near_jump,</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;                                    <span class="keyword">const</span> CallWrapper&amp; call_wrapper) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;  <span class="keywordtype">bool</span> definitely_matches = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;  *definitely_mismatches = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;  Label invoke;</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  <span class="keywordflow">if</span> (expected.is_immediate()) {</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(actual.is_immediate());</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    <span class="keywordflow">if</span> (expected.immediate() == actual.immediate()) {</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;      definitely_matches = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;      Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, actual.immediate());</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      <span class="keywordflow">if</span> (expected.immediate() ==</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;              SharedFunctionInfo::kDontAdaptArgumentsSentinel) {</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;        <span class="comment">// Don&#39;t worry about adapting arguments for built-ins that</span></div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;        <span class="comment">// don&#39;t want that done. Skip adaption code by making it look</span></div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;        <span class="comment">// like we have a match between expected and actual number of</span></div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;        <span class="comment">// arguments.</span></div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;        definitely_matches = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;        *definitely_mismatches = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;        Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, expected.immediate());</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;      }</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    }</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="keywordflow">if</span> (actual.is_immediate()) {</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;      <span class="comment">// Expected is in register, actual is immediate. This is the</span></div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;      <span class="comment">// case when we invoke function values without going through the</span></div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;      <span class="comment">// IC mechanism.</span></div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;      cmpp(expected.reg(), Immediate(actual.immediate()));</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;invoke, Label::kNear);</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(expected.reg().is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>));</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;      Set(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, actual.immediate());</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!expected.reg().is(actual.reg())) {</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      <span class="comment">// Both expected and actual are in (different) registers. This</span></div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;      <span class="comment">// is the case when we invoke functions using call and apply.</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      cmpp(expected.reg(), actual.reg());</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;invoke, Label::kNear);</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(actual.reg().is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>));</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(expected.reg().is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>));</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    }</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;  }</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;  <span class="keywordflow">if</span> (!definitely_matches) {</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;    Handle&lt;Code&gt; adaptor = isolate()-&gt;builtins()-&gt;ArgumentsAdaptorTrampoline();</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    <span class="keywordflow">if</span> (!code_constant.is_null()) {</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;      Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, code_constant, RelocInfo::EMBEDDED_OBJECT);</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;      addp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, Immediate(Code::kHeaderSize - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!code_register.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>)) {</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;      movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, code_register);</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    }</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <span class="keywordflow">if</span> (flag == <a class="code" href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396">CALL_FUNCTION</a>) {</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;      call_wrapper.BeforeCall(CallSize(adaptor));</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;      Call(adaptor, RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;      call_wrapper.AfterCall();</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;      <span class="keywordflow">if</span> (!*definitely_mismatches) {</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;        jmp(done, near_jump);</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;      }</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;      Jump(adaptor, RelocInfo::CODE_TARGET);</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    }</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    bind(&amp;invoke);</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;  }</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;}</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Prologue(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2dd387018a07035386a0b646904f2ed2">PrologueFrameMode</a> frame_mode) {</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  <span class="keywordflow">if</span> (frame_mode == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2dd387018a07035386a0b646904f2ed2af10c5618e918efcb30e098993503f475">BUILD_STUB_FRAME</a>) {</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    pushq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);  <span class="comment">// Caller&#39;s frame pointer.</span></div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>);</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);  <span class="comment">// Callee&#39;s context.</span></div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;    Push(Smi::FromInt(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260">StackFrame::STUB</a>));</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    PredictableCodeSizeScope predictible_code_size_scope(<span class="keyword">this</span>,</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;        kNoCodeAgeSequenceLength);</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    <span class="keywordflow">if</span> (isolate()-&gt;IsCodePreAgingActive()) {</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;        <span class="comment">// Pre-age the code.</span></div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;      Call(isolate()-&gt;builtins()-&gt;MarkCodeAsExecutedOnce(),</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;           RelocInfo::CODE_AGE_SEQUENCE);</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;      Nop(kNoCodeAgeSequenceLength - Assembler::kShortCallInstructionLength);</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;      pushq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);  <span class="comment">// Caller&#39;s frame pointer.</span></div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;      movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>);</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;      Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);  <span class="comment">// Callee&#39;s context.</span></div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;      Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>);  <span class="comment">// Callee&#39;s JS function.</span></div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    }</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;  }</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;}</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterFrame(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a974a07dae26fe984e240219909cb543e">StackFrame::Type</a> type) {</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;  pushq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>);</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);  <span class="comment">// Context.</span></div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  Push(Smi::FromInt(type));</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, CodeObject(), RelocInfo::EMBEDDED_OBJECT);</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>,</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;         isolate()-&gt;factory()-&gt;undefined_value(),</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;         RelocInfo::EMBEDDED_OBJECT);</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    cmpp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, 0), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, kCodeObjectNotProperlyPatched);</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;  }</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;}</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LeaveFrame(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a974a07dae26fe984e240219909cb543e">StackFrame::Type</a> type) {</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Smi::FromInt(type));</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    cmpp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, StandardFrameConstants::kMarkerOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, kStackFrameTypesMustMatch);</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;  }</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  popq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;}</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterExitFramePrologue(<span class="keywordtype">bool</span> save_rax) {</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  <span class="comment">// Set up the frame structure on the stack.</span></div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  <span class="comment">// All constants are relative to the frame pointer of the exit frame.</span></div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(ExitFrameConstants::kCallerSPDisplacement ==</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad7dcca21910dd40788b9f4e1acbd90c2">kFPOnStackSize</a> + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1815ffb4acdea32cd53364e4988aa893">kPCOnStackSize</a>);</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(ExitFrameConstants::kCallerPCOffset == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad7dcca21910dd40788b9f4e1acbd90c2">kFPOnStackSize</a>);</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(ExitFrameConstants::kCallerFPOffset == 0 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  pushq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>);</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  <span class="comment">// Reserve room for entry stack pointer and push the code object.</span></div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(ExitFrameConstants::kSPOffset == -1 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>);</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  Push(Immediate(0));  <span class="comment">// Saved entry sp, patched before call.</span></div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, CodeObject(), RelocInfo::EMBEDDED_OBJECT);</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;  Push(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);  <span class="comment">// Accessed from EditFrame::code_slot.</span></div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <span class="comment">// Save the frame pointer and the context in top.</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  <span class="keywordflow">if</span> (save_rax) {</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a55e1524b1908417bac09cae5292e9484">r14</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);  <span class="comment">// Backup rax in callee-save register.</span></div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  }</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  Store(ExternalReference(Isolate::kCEntryFPAddress, isolate()), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;  Store(ExternalReference(Isolate::kContextAddress, isolate()), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;}</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterExitFrameEpilogue(<span class="keywordtype">int</span> arg_stack_space,</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;                                            <span class="keywordtype">bool</span> save_doubles) {</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;<span class="preprocessor">#ifdef _WIN64</span></div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kShadowSpace = 4;</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  arg_stack_space += kShadowSpace;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  <span class="comment">// Optionally save all XMM registers.</span></div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="keywordflow">if</span> (save_doubles) {</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    <span class="keywordtype">int</span> space = XMMRegister::kMaxNumAllocatableRegisters * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a> +</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        arg_stack_space * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a401b4a5ba53a8291e0d8b7c5c4c083b5">kRegisterSize</a>;</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;    subp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(space));</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    <span class="keywordtype">int</span> offset = -2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; XMMRegister::NumAllocatableRegisters(); i++) {</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      XMMRegister reg = XMMRegister::FromAllocationIndex(i);</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      movsd(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, offset - ((i + 1) * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>)), reg);</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    }</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arg_stack_space &gt; 0) {</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;    subp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(arg_stack_space * kRegisterSize));</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  }</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  <span class="comment">// Get the required frame alignment for the OS.</span></div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFrameAlignment = OS::ActivationFrameAlignment();</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;  <span class="keywordflow">if</span> (kFrameAlignment &gt; 0) {</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">IsPowerOf2</a>(kFrameAlignment));</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(is_int8(kFrameAlignment));</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    andp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(-kFrameAlignment));</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  }</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;  <span class="comment">// Patch the saved entry sp.</span></div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;  movp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, ExitFrameConstants::kSPOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>);</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;}</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterExitFrame(<span class="keywordtype">int</span> arg_stack_space, <span class="keywordtype">bool</span> save_doubles) {</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;  EnterExitFramePrologue(<span class="keyword">true</span>);</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  <span class="comment">// Set up argv in callee-saved register r15. It is reused in LeaveExitFrame,</span></div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;  <span class="comment">// so it must be retained across the C-call.</span></div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;  <span class="keywordtype">int</span> offset = StandardFrameConstants::kCallerSPOffset - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;  leap(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3d1ba31d193200ef0ab5c1f92bae2d86">r15</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a55e1524b1908417bac09cae5292e9484">r14</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>, offset));</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;  EnterExitFrameEpilogue(arg_stack_space, save_doubles);</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;}</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnterApiExitFrame(<span class="keywordtype">int</span> arg_stack_space) {</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;  EnterExitFramePrologue(<span class="keyword">false</span>);</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;  EnterExitFrameEpilogue(arg_stack_space, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;}</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LeaveExitFrame(<span class="keywordtype">bool</span> save_doubles) {</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  <span class="comment">// Registers:</span></div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  <span class="comment">// r15 : argv</span></div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;  <span class="keywordflow">if</span> (save_doubles) {</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    <span class="keywordtype">int</span> offset = -2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; XMMRegister::NumAllocatableRegisters(); i++) {</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;      XMMRegister reg = XMMRegister::FromAllocationIndex(i);</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;      movsd(reg, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, offset - ((i + 1) * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">kDoubleSize</a>)));</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;    }</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;  }</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <span class="comment">// Get the return address from the stack and restore the frame pointer.</span></div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad7dcca21910dd40788b9f4e1acbd90c2">kFPOnStackSize</a>));</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, 0 * kPointerSize));</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;  <span class="comment">// Drop everything up to and including the arguments and the receiver</span></div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;  <span class="comment">// from the caller stack.</span></div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;  leap(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3d1ba31d193200ef0ab5c1f92bae2d86">r15</a>, 1 * kPointerSize));</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;  PushReturnAddressFrom(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>);</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;  LeaveExitFrameEpilogue(<span class="keyword">true</span>);</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;}</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LeaveApiExitFrame(<span class="keywordtype">bool</span> restore_context) {</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;  popq(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>);</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  LeaveExitFrameEpilogue(restore_context);</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;}</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LeaveExitFrameEpilogue(<span class="keywordtype">bool</span> restore_context) {</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  <span class="comment">// Restore current context from top and clear it in debug mode.</span></div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;  ExternalReference context_address(Isolate::kContextAddress, isolate());</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;  Operand context_operand = ExternalOperand(context_address);</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  <span class="keywordflow">if</span> (restore_context) {</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;    movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, context_operand);</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;  }</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;  movp(context_operand, Immediate(0));</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;  <span class="comment">// Clear the top frame.</span></div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;  ExternalReference c_entry_fp_address(Isolate::kCEntryFPAddress,</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;                                       isolate());</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;  Operand c_entry_fp_operand = ExternalOperand(c_entry_fp_address);</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;  movp(c_entry_fp_operand, Immediate(0));</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;}</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckAccessGlobalProxy(Register holder_reg,</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;                                            Register scratch,</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;                                            Label* miss) {</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;  Label same_contexts;</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!holder_reg.is(scratch));</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!scratch.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>));</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;  <span class="comment">// Load current lexical context from the stack frame.</span></div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;  movp(scratch, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">rbp</a>, StandardFrameConstants::kContextOffset));</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;  <span class="comment">// When generating debug code, make sure the lexical context is set.</span></div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    cmpp(scratch, Immediate(0));</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, kWeShouldNotHaveAnEmptyLexicalContext);</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;  }</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;  <span class="comment">// Load the native context of the current context.</span></div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;  <span class="keywordtype">int</span> offset =</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;      Context::kHeaderSize + Context::GLOBAL_OBJECT_INDEX * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;  movp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, offset));</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;  movp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, GlobalObject::kNativeContextOffset));</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;  <span class="comment">// Check the context is a native context.</span></div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    Cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, HeapObject::kMapOffset),</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;        isolate()-&gt;factory()-&gt;native_context_map());</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, kJSGlobalObjectNativeContextShouldBeANativeContext);</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;  }</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;  <span class="comment">// Check if both contexts are the same.</span></div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;  cmpp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(holder_reg, JSGlobalProxy::kNativeContextOffset));</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;same_contexts);</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;  <span class="comment">// Compare security tokens.</span></div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;  <span class="comment">// Check that the security token in the calling global object is</span></div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;  <span class="comment">// compatible with the security token in the receiving global</span></div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;  <span class="comment">// Check the context is a native context.</span></div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    <span class="comment">// Preserve original value of holder_reg.</span></div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    Push(holder_reg);</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;    movp(holder_reg,</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;         <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(holder_reg, JSGlobalProxy::kNativeContextOffset));</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;    CompareRoot(holder_reg, Heap::kNullValueRootIndex);</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, kJSGlobalProxyContextShouldNotBeNull);</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    <span class="comment">// Read the first word and compare to native_context_map(),</span></div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    movp(holder_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(holder_reg, HeapObject::kMapOffset));</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;    CompareRoot(holder_reg, Heap::kNativeContextMapRootIndex);</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, kJSGlobalObjectNativeContextShouldBeANativeContext);</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;    Pop(holder_reg);</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;  }</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>,</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;       <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(holder_reg, JSGlobalProxy::kNativeContextOffset));</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;  <span class="keywordtype">int</span> token_offset =</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;      Context::kHeaderSize + Context::SECURITY_TOKEN_INDEX * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;  movp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, token_offset));</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;  cmpp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, token_offset));</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, miss);</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;  bind(&amp;same_contexts);</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;}</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;<span class="comment">// Compute the hash code from the untagged key.  This must be kept in sync with</span></div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;<span class="comment">// ComputeIntegerHash in utils.h and KeyedLoadGenericElementStub in</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;<span class="comment">// code-stub-hydrogen.cc</span></div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;<span class="keywordtype">void</span> MacroAssembler::GetNumberHash(Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73c5ad80dd8c4842fdfe80fcfab50484">r0</a>, Register scratch) {</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;  <span class="comment">// First of all we assign the hash seed to scratch.</span></div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;  LoadRoot(scratch, Heap::kHashSeedRootIndex);</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;  SmiToInteger32(scratch, scratch);</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  <span class="comment">// Xor original key with a seed.</span></div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;  xorl(r0, scratch);</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <span class="comment">// Compute the hash code from the untagged key.  This must be kept in sync</span></div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <span class="comment">// with ComputeIntegerHash in utils.h.</span></div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  <span class="comment">// hash = ~hash + (hash &lt;&lt; 15);</span></div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;  movl(scratch, r0);</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;  notl(r0);</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;  shll(scratch, Immediate(15));</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;  addl(r0, scratch);</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;  <span class="comment">// hash = hash ^ (hash &gt;&gt; 12);</span></div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;  movl(scratch, r0);</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;  shrl(scratch, Immediate(12));</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;  xorl(r0, scratch);</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;  <span class="comment">// hash = hash + (hash &lt;&lt; 2);</span></div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;  leal(r0, Operand(r0, r0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">times_4</a>, 0));</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;  <span class="comment">// hash = hash ^ (hash &gt;&gt; 4);</span></div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;  movl(scratch, r0);</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;  shrl(scratch, Immediate(4));</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;  xorl(r0, scratch);</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;  <span class="comment">// hash = hash * 2057;</span></div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;  imull(r0, r0, Immediate(2057));</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;  <span class="comment">// hash = hash ^ (hash &gt;&gt; 16);</span></div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;  movl(scratch, r0);</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;  shrl(scratch, Immediate(16));</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;  xorl(r0, scratch);</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;}</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadFromNumberDictionary(Label* miss,</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;                                              Register elements,</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;                                              Register key,</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;                                              Register r0,</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;                                              Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e325b47be17d36b12096ad1d73067b1">r1</a>,</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;                                              Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6e83dd17c5de4dbc4a77cf6622fd385d">r2</a>,</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;                                              Register result) {</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;  <span class="comment">// Register use:</span></div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;  <span class="comment">// elements - holds the slow-case elements of the receiver on entry.</span></div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;  <span class="comment">//            Unchanged unless &#39;result&#39; is the same register.</span></div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;  <span class="comment">// key      - holds the smi key on entry.</span></div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;  <span class="comment">//            Unchanged unless &#39;result&#39; is the same register.</span></div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;  <span class="comment">// Scratch registers:</span></div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;  <span class="comment">// r0 - holds the untagged key on entry and holds the hash once computed.</span></div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;  <span class="comment">// r1 - used to hold the capacity mask of the dictionary</span></div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;  <span class="comment">// r2 - used for the index into the dictionary.</span></div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;  <span class="comment">// result - holds the result on exit if the load succeeded.</span></div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;  <span class="comment">//          Allowed to be the same as &#39;key&#39; or &#39;result&#39;.</span></div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;  <span class="comment">//          Unchanged on bailout so &#39;key&#39; or &#39;result&#39; can be used</span></div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;  <span class="comment">//          in further computation.</span></div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;  Label done;</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;  GetNumberHash(r0, r1);</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;  <span class="comment">// Compute capacity mask.</span></div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;  SmiToInteger32(r1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements,</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;                                  SeededNumberDictionary::kCapacityOffset));</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;  decl(r1);</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;  <span class="comment">// Generate an unrolled loop that performs a few probes before giving up.</span></div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kNumberDictionaryProbes; i++) {</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    <span class="comment">// Use r2 for index calculations and keep the hash intact in r0.</span></div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;    movp(r2, r0);</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;    <span class="comment">// Compute the masked index: (hash + i + i * i) &amp; mask.</span></div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    <span class="keywordflow">if</span> (i &gt; 0) {</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;      addl(r2, Immediate(SeededNumberDictionary::GetProbeOffset(i)));</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;    }</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;    andp(r2, r1);</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;    <span class="comment">// Scale the index by multiplying by the entry size.</span></div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(SeededNumberDictionary::kEntrySize == 3);</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;    leap(r2, Operand(r2, r2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b">times_2</a>, 0));  <span class="comment">// r2 = r2 * 3</span></div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;    <span class="comment">// Check if the key matches.</span></div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;    cmpp(key, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements,</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;                           r2,</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;                           <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>,</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;                           SeededNumberDictionary::kElementsStartOffset));</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;    <span class="keywordflow">if</span> (i != (kNumberDictionaryProbes - 1)) {</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;done);</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, miss);</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;    }</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;  }</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;  <span class="comment">// Check that the value is a normal propety.</span></div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kDetailsOffset =</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;      SeededNumberDictionary::kElementsStartOffset + 2 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7ff5a5c54f182b86d1cd993cf4512c87a50d1448013c6f17125caee18aa418af7">NORMAL</a>, 0);</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;  Test(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, r2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>, kDetailsOffset),</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;       Smi::FromInt(PropertyDetails::TypeField::kMask));</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, miss);</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;  <span class="comment">// Get the value at the masked, scaled index.</span></div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kValueOffset =</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;      SeededNumberDictionary::kElementsStartOffset + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;  movp(result, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(elements, r2, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">times_pointer_size</a>, kValueOffset));</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;}</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadAllocationTopHelper(Register result,</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;                                             Register scratch,</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;                                             <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a72ae4718167105f8e7d356f15d71182d">flags</a>) {</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;  ExternalReference allocation_top =</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;      AllocationUtils::GetAllocationTopReference(isolate(), flags);</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;  <span class="comment">// Just return if allocation top is already known.</span></div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;  <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca162096ce362c9495a792c2cd1cbc4138">RESULT_CONTAINS_TOP</a>) != 0) {</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;    <span class="comment">// No use of scratch if allocation top is provided.</span></div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!scratch.is_valid());</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;    <span class="comment">// Assert that result actually contains top on entry.</span></div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;    Operand top_operand = ExternalOperand(allocation_top);</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;    cmpp(result, top_operand);</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, kUnexpectedAllocationTop);</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;  }</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;  <span class="comment">// Move address of new object to result. Use scratch register if available,</span></div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;  <span class="comment">// and keep address in scratch until call to UpdateAllocationTopHelper.</span></div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;  <span class="keywordflow">if</span> (scratch.is_valid()) {</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;    LoadAddress(scratch, allocation_top);</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    movp(result, Operand(scratch, 0));</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;    <a class="code" href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">Load</a>(result, allocation_top);</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;  }</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;}</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;<span class="keywordtype">void</span> MacroAssembler::UpdateAllocationTopHelper(Register result_end,</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;                                               Register scratch,</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;                                               <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> flags) {</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;    testp(result_end, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>));</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, kUnalignedAllocationInNewSpace);</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;  }</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;  ExternalReference allocation_top =</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;      AllocationUtils::GetAllocationTopReference(isolate(), flags);</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;  <span class="comment">// Update new top.</span></div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;  <span class="keywordflow">if</span> (scratch.is_valid()) {</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;    <span class="comment">// Scratch already contains address of allocation top.</span></div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;    movp(Operand(scratch, 0), result_end);</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;    Store(allocation_top, result_end);</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;  }</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;}</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Allocate(<span class="keywordtype">int</span> object_size,</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;                              Register result,</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;                              Register result_end,</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;                              Register scratch,</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;                              Label* gc_required,</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;                              <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> flags) {</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>((flags &amp; (RESULT_CONTAINS_TOP | <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca5a6f701354a49210425d61c970d294f7">SIZE_IN_WORDS</a>)) == 0);</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(object_size &lt;= Page::kMaxRegularHeapObjectSize);</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;  <span class="keywordflow">if</span> (!FLAG_inline_new) {</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;      <span class="comment">// Trash the registers to simulate an allocation failure.</span></div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;      movl(result, Immediate(0x7091));</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;      <span class="keywordflow">if</span> (result_end.is_valid()) {</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;        movl(result_end, Immediate(0x7191));</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;      }</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      <span class="keywordflow">if</span> (scratch.is_valid()) {</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;        movl(scratch, Immediate(0x7291));</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;      }</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;    }</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;    jmp(gc_required);</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;  }</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!result.is(result_end));</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;  <span class="comment">// Load address of new object into result.</span></div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;  LoadAllocationTopHelper(result, scratch, flags);</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;  <span class="comment">// Align the next allocation. Storing the filler map without checking top is</span></div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;  <span class="comment">// safe in new-space because the limit of the heap is aligned there.</span></div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;  <span class="keywordflow">if</span> (((flags &amp; <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca36181690955e34f1445c12049fb2677c">DOUBLE_ALIGNMENT</a>) != 0) &amp;&amp; FLAG_debug_code) {</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;    testq(result, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6fe51c108370f1948748482356be1ab2">kDoubleAlignmentMask</a>));</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, kAllocationIsNotDoubleAligned);</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;  }</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;  <span class="comment">// Calculate new top and bail out if new space is exhausted.</span></div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;  ExternalReference allocation_limit =</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;      AllocationUtils::GetAllocationLimitReference(isolate(), flags);</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;  Register top_reg = result_end.is_valid() ? result_end : result;</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;  <span class="keywordflow">if</span> (!top_reg.is(result)) {</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;    movp(top_reg, result);</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;  }</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;  addp(top_reg, Immediate(object_size));</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d">carry</a>, gc_required);</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  Operand limit_operand = ExternalOperand(allocation_limit);</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;  cmpp(top_reg, limit_operand);</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, gc_required);</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;  <span class="comment">// Update allocation top.</span></div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;  UpdateAllocationTopHelper(top_reg, scratch, flags);</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;  <span class="keywordtype">bool</span> tag_result = (flags &amp; <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fcab024a717bd5c91ace4ff286471bff954">TAG_OBJECT</a>) != 0;</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;  <span class="keywordflow">if</span> (top_reg.is(result)) {</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;    <span class="keywordflow">if</span> (tag_result) {</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;      subp(result, Immediate(object_size - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;      subp(result, Immediate(object_size));</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;    }</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag_result) {</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;    <span class="comment">// Tag the result if requested.</span></div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a> == 1);</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;    incp(result);</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;  }</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;}</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Allocate(<span class="keywordtype">int</span> header_size,</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;                              <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9f">ScaleFactor</a> element_size,</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;                              Register element_count,</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;                              Register result,</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;                              Register result_end,</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;                              Register scratch,</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;                              Label* gc_required,</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;                              <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> flags) {</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>((flags &amp; <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca5a6f701354a49210425d61c970d294f7">SIZE_IN_WORDS</a>) == 0);</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;  leap(result_end, Operand(element_count, element_size, header_size));</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;  Allocate(result_end, result, result_end, scratch, gc_required, flags);</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;}</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;<span class="keywordtype">void</span> MacroAssembler::Allocate(Register object_size,</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;                              Register result,</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;                              Register result_end,</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;                              Register scratch,</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;                              Label* gc_required,</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;                              <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> flags) {</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>((flags &amp; <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca5a6f701354a49210425d61c970d294f7">SIZE_IN_WORDS</a>) == 0);</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;  <span class="keywordflow">if</span> (!FLAG_inline_new) {</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;    <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;      <span class="comment">// Trash the registers to simulate an allocation failure.</span></div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;      movl(result, Immediate(0x7091));</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;      movl(result_end, Immediate(0x7191));</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;      <span class="keywordflow">if</span> (scratch.is_valid()) {</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;        movl(scratch, Immediate(0x7291));</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;      }</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;      <span class="comment">// object_size is left unchanged by this function.</span></div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;    }</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;    jmp(gc_required);</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;  }</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!result.is(result_end));</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;  <span class="comment">// Load address of new object into result.</span></div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;  LoadAllocationTopHelper(result, scratch, flags);</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;  <span class="comment">// Align the next allocation. Storing the filler map without checking top is</span></div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;  <span class="comment">// safe in new-space because the limit of the heap is aligned there.</span></div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;  <span class="keywordflow">if</span> (((flags &amp; DOUBLE_ALIGNMENT) != 0) &amp;&amp; FLAG_debug_code) {</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;    testq(result, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6fe51c108370f1948748482356be1ab2">kDoubleAlignmentMask</a>));</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, kAllocationIsNotDoubleAligned);</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;  }</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;  <span class="comment">// Calculate new top and bail out if new space is exhausted.</span></div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;  ExternalReference allocation_limit =</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;      AllocationUtils::GetAllocationLimitReference(isolate(), flags);</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;  <span class="keywordflow">if</span> (!object_size.is(result_end)) {</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;    movp(result_end, object_size);</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;  }</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;  addp(result_end, result);</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d">carry</a>, gc_required);</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;  Operand limit_operand = ExternalOperand(allocation_limit);</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;  cmpp(result_end, limit_operand);</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">above</a>, gc_required);</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;  <span class="comment">// Update allocation top.</span></div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;  UpdateAllocationTopHelper(result_end, scratch, flags);</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;  <span class="comment">// Tag the result if requested.</span></div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;  <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fcab024a717bd5c91ace4ff286471bff954">TAG_OBJECT</a>) != 0) {</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    addp(result, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;  }</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;}</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;<span class="keywordtype">void</span> MacroAssembler::UndoAllocationInNewSpace(Register <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;  ExternalReference new_space_allocation_top =</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;      ExternalReference::new_space_allocation_top_address(isolate());</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;  <span class="comment">// Make sure the object has no tag before resetting top.</span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;  andp(<span class="keywordtype">object</span>, Immediate(~<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a44ee97292914fbe042fc1b7b3236f7bc">kHeapObjectTagMask</a>));</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;  Operand top_operand = ExternalOperand(new_space_allocation_top);</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;  cmpp(<span class="keywordtype">object</span>, top_operand);</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;  Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">below</a>, kUndoAllocationOfNonAllocatedMemory);</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;  movp(top_operand, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;}</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateHeapNumber(Register result,</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;                                        Register scratch,</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;                                        Label* gc_required) {</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;  Allocate(HeapNumber::kSize, result, scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a433bbae437dfea4f24022a44f95ed5bf">no_reg</a>, gc_required, TAG_OBJECT);</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;  <span class="comment">// Set the map.</span></div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Heap::kHeapNumberMapRootIndex);</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;}</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateTwoByteString(Register result,</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;                                           Register length,</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;                                           Register scratch1,</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;                                           Register scratch2,</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;                                           Register scratch3,</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;                                           Label* gc_required) {</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;  <span class="comment">// Calculate the number of bytes needed for the characters in the string while</span></div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;  <span class="comment">// observing object alignment.</span></div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kHeaderAlignment = SeqTwoByteString::kHeaderSize &amp;</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;                               <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>;</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2c9dc287b9b66f415817e67ed68cb71a">kShortSize</a> == 2);</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;  <span class="comment">// scratch1 = length * 2 + kObjectAlignmentMask.</span></div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;  leap(scratch1, Operand(length, length, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, kObjectAlignmentMask +</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;                kHeaderAlignment));</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;  andp(scratch1, Immediate(~kObjectAlignmentMask));</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;  <span class="keywordflow">if</span> (kHeaderAlignment &gt; 0) {</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;    subp(scratch1, Immediate(kHeaderAlignment));</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;  }</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;  <span class="comment">// Allocate two byte string in new space.</span></div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;  Allocate(SeqTwoByteString::kHeaderSize,</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;           <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>,</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;           scratch1,</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;           result,</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;           scratch2,</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;           scratch3,</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;           gc_required,</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;           TAG_OBJECT);</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;  <span class="comment">// Set the map, length and hash field.</span></div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Heap::kStringMapRootIndex);</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;  Integer32ToSmi(scratch1, length);</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kLengthOffset), scratch1);</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kHashFieldOffset),</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;       Immediate(String::kEmptyHashField));</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;}</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateAsciiString(Register result,</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;                                         Register length,</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;                                         Register scratch1,</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;                                         Register scratch2,</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;                                         Register scratch3,</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;                                         Label* gc_required) {</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;  <span class="comment">// Calculate the number of bytes needed for the characters in the string while</span></div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;  <span class="comment">// observing object alignment.</span></div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kHeaderAlignment = SeqOneByteString::kHeaderSize &amp;</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;                               <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">kObjectAlignmentMask</a>;</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;  movl(scratch1, length);</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab81d3518ce57dd364c1d60e0045d4a92">kCharSize</a> == 1);</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;  addp(scratch1, Immediate(kObjectAlignmentMask + kHeaderAlignment));</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;  andp(scratch1, Immediate(~kObjectAlignmentMask));</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;  <span class="keywordflow">if</span> (kHeaderAlignment &gt; 0) {</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    subp(scratch1, Immediate(kHeaderAlignment));</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;  }</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;  <span class="comment">// Allocate ASCII string in new space.</span></div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;  Allocate(SeqOneByteString::kHeaderSize,</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;           <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>,</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;           scratch1,</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;           result,</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;           scratch2,</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;           scratch3,</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;           gc_required,</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;           TAG_OBJECT);</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;  <span class="comment">// Set the map, length and hash field.</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Heap::kAsciiStringMapRootIndex);</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;  Integer32ToSmi(scratch1, length);</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kLengthOffset), scratch1);</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, String::kHashFieldOffset),</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;       Immediate(String::kEmptyHashField));</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;}</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateTwoByteConsString(Register result,</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;                                        Register scratch1,</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;                                        Register scratch2,</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;                                        Label* gc_required) {</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;  Allocate(ConsString::kSize, result, scratch1, scratch2, gc_required,</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;           TAG_OBJECT);</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;  <span class="comment">// Set the map. The other fields are left uninitialized.</span></div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Heap::kConsStringMapRootIndex);</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;}</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateAsciiConsString(Register result,</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;                                             Register scratch1,</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;                                             Register scratch2,</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;                                             Label* gc_required) {</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;  Label allocate_new_space, install_map;</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;  <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a> flags = <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fcab024a717bd5c91ace4ff286471bff954">TAG_OBJECT</a>;</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;  ExternalReference high_promotion_mode = ExternalReference::</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;      new_space_high_promotion_mode_active_address(isolate());</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;  <a class="code" href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">Load</a>(scratch1, high_promotion_mode);</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;  testb(scratch1, Immediate(1));</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;allocate_new_space);</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;  Allocate(ConsString::kSize,</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;           result,</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;           scratch1,</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;           scratch2,</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;           gc_required,</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;           static_cast&lt;AllocationFlags&gt;(flags | <a class="code" href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca6486557d762ee4662ca1dde1e7ceebe2">PRETENURE_OLD_POINTER_SPACE</a>));</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;  jmp(&amp;install_map);</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;  bind(&amp;allocate_new_space);</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;  Allocate(ConsString::kSize,</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;           result,</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;           scratch1,</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;           scratch2,</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;           gc_required,</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;           flags);</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;  bind(&amp;install_map);</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;  <span class="comment">// Set the map. The other fields are left uninitialized.</span></div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Heap::kConsAsciiStringMapRootIndex);</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;}</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateTwoByteSlicedString(Register result,</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;                                          Register scratch1,</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;                                          Register scratch2,</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;                                          Label* gc_required) {</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;  Allocate(SlicedString::kSize, result, scratch1, scratch2, gc_required,</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;           TAG_OBJECT);</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;  <span class="comment">// Set the map. The other fields are left uninitialized.</span></div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Heap::kSlicedStringMapRootIndex);</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;}</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;<span class="keywordtype">void</span> MacroAssembler::AllocateAsciiSlicedString(Register result,</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;                                               Register scratch1,</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;                                               Register scratch2,</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;                                               Label* gc_required) {</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;  <span class="comment">// Allocate heap number in new space.</span></div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;  Allocate(SlicedString::kSize, result, scratch1, scratch2, gc_required,</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;           TAG_OBJECT);</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;  <span class="comment">// Set the map. The other fields are left uninitialized.</span></div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Heap::kSlicedAsciiStringMapRootIndex);</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(result, HeapObject::kMapOffset), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;}</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;<span class="comment">// Copy memory, byte-by-byte, from source to destination.  Not optimized for</span></div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;<span class="comment">// long or aligned copies.  The contents of scratch and length are destroyed.</span></div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;<span class="comment">// Destination is incremented by length, source, length and scratch are</span></div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;<span class="comment">// clobbered.</span></div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;<span class="comment">// A simpler loop is faster on small copies, but slower on large ones.</span></div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;<span class="comment">// The cld() instruction must have been emitted, to set the direction flag(),</span></div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;<span class="comment">// before calling this function.</span></div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aeea3d03558c87a206c7bb04771e951a6">MacroAssembler::CopyBytes</a>(Register destination,</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;                               Register source,</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;                               Register length,</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;                               <span class="keywordtype">int</span> min_length,</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;                               Register scratch) {</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(min_length &gt;= 0);</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;    cmpl(length, Immediate(min_length));</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;    Assert(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a2d5a0f84387e38e44f9a7663b66eddb3">greater_equal</a>, kInvalidMinLength);</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;  }</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;  Label short_loop, len8, len16, len24, done, short_string;</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kLongStringLimit = 4 * <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">kPointerSize</a>;</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;  <span class="keywordflow">if</span> (min_length &lt;= kLongStringLimit) {</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;    cmpl(length, Immediate(kPointerSize));</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">below</a>, &amp;short_string, Label::kNear);</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;  }</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(source.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>));</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(destination.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">rdi</a>));</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(length.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>));</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;  <span class="keywordflow">if</span> (min_length &lt;= kLongStringLimit) {</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    cmpl(length, Immediate(2 * kPointerSize));</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">below_equal</a>, &amp;len8, Label::kNear);</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;    cmpl(length, Immediate(3 * kPointerSize));</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">below_equal</a>, &amp;len16, Label::kNear);</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;    cmpl(length, Immediate(4 * kPointerSize));</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">below_equal</a>, &amp;len24, Label::kNear);</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;  }</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;  <span class="comment">// Because source is 8-byte aligned in our uses of this function,</span></div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;  <span class="comment">// we keep source aligned for the rep movs operation by copying the odd bytes</span></div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;  <span class="comment">// at the end of the ranges.</span></div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;  movp(scratch, length);</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;  shrl(length, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>));</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;  repmovsp();</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;  <span class="comment">// Move remaining bytes of length.</span></div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;  andl(scratch, Immediate(kPointerSize - 1));</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;  movp(length, Operand(source, scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, -kPointerSize));</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;  movp(Operand(destination, scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, -kPointerSize), length);</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;  addp(destination, scratch);</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;  <span class="keywordflow">if</span> (min_length &lt;= kLongStringLimit) {</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;    jmp(&amp;done, Label::kNear);</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;    bind(&amp;len24);</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;    movp(scratch, Operand(source, 2 * kPointerSize));</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;    movp(Operand(destination, 2 * kPointerSize), scratch);</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;    bind(&amp;len16);</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;    movp(scratch, Operand(source, kPointerSize));</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;    movp(Operand(destination, kPointerSize), scratch);</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;    bind(&amp;len8);</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;    movp(scratch, Operand(source, 0));</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;    movp(Operand(destination, 0), scratch);</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;    <span class="comment">// Move remaining bytes of length.</span></div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;    movp(scratch, Operand(source, length, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, -kPointerSize));</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;    movp(Operand(destination, length, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">times_1</a>, -kPointerSize), scratch);</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;    addp(destination, length);</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;    jmp(&amp;done, Label::kNear);</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;    bind(&amp;short_string);</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;    <span class="keywordflow">if</span> (min_length == 0) {</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;      testl(length, length);</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;    }</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    bind(&amp;short_loop);</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    movb(scratch, Operand(source, 0));</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    movb(Operand(destination, 0), scratch);</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    incp(source);</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    incp(destination);</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    decl(length);</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;short_loop);</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;  }</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;}</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;<span class="keywordtype">void</span> MacroAssembler::InitializeFieldsWithFiller(Register start_offset,</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;                                                Register end_offset,</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;                                                Register filler) {</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;  Label loop, entry;</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;  jmp(&amp;entry);</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;  bind(&amp;loop);</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;  movp(Operand(start_offset, 0), filler);</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;  addp(start_offset, Immediate(kPointerSize));</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;  bind(&amp;entry);</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;  cmpp(start_offset, end_offset);</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1665a21bbe0fa4e1956abbeb702a170d">less</a>, &amp;loop);</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;}</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadContext(Register dst, <span class="keywordtype">int</span> context_chain_length) {</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;  <span class="keywordflow">if</span> (context_chain_length &gt; 0) {</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;    <span class="comment">// Move up the chain of contexts to the context containing the slot.</span></div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;    movp(dst, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, Context::SlotOffset(Context::PREVIOUS_INDEX)));</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; context_chain_length; i++) {</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;      movp(dst, Operand(dst, Context::SlotOffset(Context::PREVIOUS_INDEX)));</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;    }</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;    <span class="comment">// Slot is in the current function context.  Move it into the</span></div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;    <span class="comment">// destination register in case we store into it (the write barrier</span></div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;    <span class="comment">// cannot be allowed to destroy the context in rsi).</span></div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;    movp(dst, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>);</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;  }</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;  <span class="comment">// We should not have found a with context by walking the context</span></div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;  <span class="comment">// chain (i.e., the static scope chain and runtime context chain do</span></div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;  <span class="comment">// not agree).  A variable occurring in such a scope should have</span></div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;  <span class="comment">// slot type LOOKUP and not CONTEXT.</span></div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;    CompareRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(dst, HeapObject::kMapOffset),</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;                Heap::kWithContextMapRootIndex);</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;    Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, kVariableResolvedToWithContext);</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;  }</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;}</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadTransitionedArrayMapConditional(</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017">ElementsKind</a> expected_kind,</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017">ElementsKind</a> transitioned_kind,</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;    Register map_in_out,</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;    Register scratch,</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;    Label* no_map_match) {</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;  <span class="comment">// Load the global or builtins object from the current context.</span></div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;  movp(scratch,</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;       Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, Context::SlotOffset(Context::GLOBAL_OBJECT_INDEX)));</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;  movp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, GlobalObject::kNativeContextOffset));</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;  <span class="comment">// Check that the function&#39;s map is the same as the expected cached map.</span></div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;  movp(scratch, Operand(scratch,</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;                        Context::SlotOffset(Context::JS_ARRAY_MAPS_INDEX)));</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;  <span class="keywordtype">int</span> offset = expected_kind * kPointerSize +</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;      FixedArrayBase::kHeaderSize;</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;  cmpp(map_in_out, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, offset));</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, no_map_match);</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;  <span class="comment">// Use the transitioned cached map.</span></div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;  offset = transitioned_kind * kPointerSize +</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;      FixedArrayBase::kHeaderSize;</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;  movp(map_in_out, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, offset));</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;}</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;<span class="preprocessor">#ifdef _WIN64</span></div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kRegisterPassedArguments = 4;</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kRegisterPassedArguments = 6;</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadGlobalFunction(<span class="keywordtype">int</span> index, Register <span class="keyword">function</span>) {</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;  <span class="comment">// Load the global or builtins object from the current context.</span></div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;  movp(<span class="keyword">function</span>,</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;       Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">rsi</a>, Context::SlotOffset(Context::GLOBAL_OBJECT_INDEX)));</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;  <span class="comment">// Load the native context from the global or builtins object.</span></div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;  movp(<span class="keyword">function</span>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, GlobalObject::kNativeContextOffset));</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;  <span class="comment">// Load the function from the native context.</span></div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;  movp(<span class="keyword">function</span>, Operand(<span class="keyword">function</span>, Context::SlotOffset(index)));</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;}</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;<span class="keywordtype">void</span> MacroAssembler::LoadGlobalFunctionInitialMap(Register <span class="keyword">function</span>,</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;                                                  Register map) {</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;  <span class="comment">// Load the initial map.  The global functions all have initial maps.</span></div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;  movp(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keyword">function</span>, JSFunction::kPrototypeOrInitialMapOffset));</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;    Label ok, fail;</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;    CheckMap(map, isolate()-&gt;factory()-&gt;meta_map(), &amp;fail, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1">DO_SMI_CHECK</a>);</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;    jmp(&amp;ok);</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;    bind(&amp;fail);</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;    Abort(kGlobalFunctionsMustHaveInitialMap);</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;  }</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;}</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;<span class="keywordtype">int</span> MacroAssembler::ArgumentStackSlotsForCFunctionCall(<span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;  <span class="comment">// On Windows 64 stack slots are reserved by the caller for all arguments</span></div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;  <span class="comment">// including the ones passed in registers, and space is always allocated for</span></div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;  <span class="comment">// the four register arguments even if the function takes fewer than four</span></div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;  <span class="comment">// arguments.</span></div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;  <span class="comment">// On AMD64 ABI (Linux/Mac) the first six arguments are passed in registers</span></div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;  <span class="comment">// and the caller does not reserve stack slots for them.</span></div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(num_arguments &gt;= 0);</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;<span class="preprocessor">#ifdef _WIN64</span></div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kMinimumStackSlots = kRegisterPassedArguments;</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;  <span class="keywordflow">if</span> (num_arguments &lt; kMinimumStackSlots) <span class="keywordflow">return</span> kMinimumStackSlots;</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;  <span class="keywordflow">return</span> num_arguments;</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;  <span class="keywordflow">if</span> (num_arguments &lt; kRegisterPassedArguments) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;  <span class="keywordflow">return</span> num_arguments - kRegisterPassedArguments;</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;}</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EmitSeqStringSetCharCheck(Register <span class="keywordtype">string</span>,</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;                                               Register index,</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;                                               Register value,</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;                                               uint32_t encoding_mask) {</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;  Label is_object;</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;  JumpIfNotSmi(<span class="keywordtype">string</span>, &amp;is_object);</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;  Abort(kNonObject);</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;  bind(&amp;is_object);</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;  Push(value);</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;  movp(value, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">string</span>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;  movzxbp(value, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(value, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;  andb(value, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a42742b6df96d8400b0ff2cf776247a7c">kStringRepresentationMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>));</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;  cmpp(value, Immediate(encoding_mask));</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;  Pop(value);</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;  Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, kUnexpectedStringType);</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;  <span class="comment">// The index is assumed to be untagged coming in, tag it to compare with the</span></div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;  <span class="comment">// string length without using a temp register, it is restored at the end of</span></div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;  <span class="comment">// this function.</span></div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;  Integer32ToSmi(index, index);</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;  SmiCompare(index, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<span class="keywordtype">string</span>, String::kLengthOffset));</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;  Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1665a21bbe0fa4e1956abbeb702a170d">less</a>, kIndexIsTooLarge);</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;  SmiCompare(index, Smi::FromInt(0));</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;  Check(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a2d5a0f84387e38e44f9a7663b66eddb3">greater_equal</a>, kIndexIsNegative);</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;  <span class="comment">// Restore the index</span></div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;  SmiToInteger32(index, index);</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;}</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;<span class="keywordtype">void</span> MacroAssembler::PrepareCallCFunction(<span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;  <span class="keywordtype">int</span> frame_alignment = OS::ActivationFrameAlignment();</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(frame_alignment != 0);</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(num_arguments &gt;= 0);</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;  <span class="comment">// Make stack end at alignment and allocate space for arguments and old rsp.</span></div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>);</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">IsPowerOf2</a>(frame_alignment));</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;  <span class="keywordtype">int</span> argument_slots_on_stack =</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;      ArgumentStackSlotsForCFunctionCall(num_arguments);</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;  subp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate((argument_slots_on_stack + 1) * kRegisterSize));</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;  andp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Immediate(-frame_alignment));</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;  movp(Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, argument_slots_on_stack * kRegisterSize), <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;}</div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallCFunction(ExternalReference <span class="keyword">function</span>,</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;                                   <span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;  LoadAddress(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, <span class="keyword">function</span>);</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;  CallCFunction(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, num_arguments);</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;}</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CallCFunction(Register <span class="keyword">function</span>, <span class="keywordtype">int</span> num_arguments) {</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(has_frame());</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;  <span class="comment">// Check stack alignment.</span></div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;    CheckStackAlignment();</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;  }</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;  call(<span class="keyword">function</span>);</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(OS::ActivationFrameAlignment() != 0);</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(num_arguments &gt;= 0);</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;  <span class="keywordtype">int</span> argument_slots_on_stack =</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;      ArgumentStackSlotsForCFunctionCall(num_arguments);</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, Operand(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">rsp</a>, argument_slots_on_stack * kRegisterSize));</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;}</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2243fa97f60bc06fa9f2f150870fc2b3">AreAliased</a>(Register r1, Register r2, Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acf66346cbf0bfc09159ea8ecf1b2f479">r3</a>, Register <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a754b1f214379cc086e644b1d002b0ea1">r4</a>) {</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;  <span class="keywordflow">if</span> (r1.is(r2)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;  <span class="keywordflow">if</span> (r1.is(r3)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;  <span class="keywordflow">if</span> (r1.is(r4)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;  <span class="keywordflow">if</span> (r2.is(r3)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;  <span class="keywordflow">if</span> (r2.is(r4)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;  <span class="keywordflow">if</span> (r3.is(r4)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;}</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;CodePatcher::CodePatcher(<a class="code" href="../../d9/da2/namespacedisasm.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* address, <span class="keywordtype">int</span> size)</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;    : address_(address),</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;      size_(size),</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;      masm_(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a>, address, size + Assembler::kGap) {</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;  <span class="comment">// Create a new macro assembler pointing to the address of the code to patch.</span></div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;  <span class="comment">// The size is adjusted with kGap on order for the assembler to generate size</span></div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;  <span class="comment">// bytes of instructions without failing with buffer size constraints.</span></div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(masm_.reloc_info_writer.pos() == address_ + size_ + Assembler::kGap);</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;}</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;CodePatcher::~CodePatcher() {</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;  <span class="comment">// Indicate that code has changed.</span></div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;  CPU::FlushICache(address_, size_);</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;  <span class="comment">// Check that the code was patched as expected.</span></div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(masm_.pc_ == address_ + size_);</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(masm_.reloc_info_writer.pos() == address_ + size_ + Assembler::kGap);</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;}</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckPageFlag(</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;    Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;    Register scratch,</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;    <span class="keywordtype">int</span> mask,</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">Condition</a> cc,</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;    Label* condition_met,</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;    Label::Distance condition_met_distance) {</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(cc == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a> || cc == <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>);</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;  <span class="keywordflow">if</span> (scratch.is(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;    andp(scratch, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    movp(scratch, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;    andp(scratch, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;  }</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;  <span class="keywordflow">if</span> (mask &lt; (1 &lt;&lt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">kBitsPerByte</a>)) {</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;    testb(Operand(scratch, MemoryChunk::kFlagsOffset),</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;          Immediate(static_cast&lt;uint8_t&gt;(mask)));</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;    testl(Operand(scratch, MemoryChunk::kFlagsOffset), Immediate(mask));</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;  }</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;  j(cc, condition_met, condition_met_distance);</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;}</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckMapDeprecated(Handle&lt;Map&gt; map,</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;                                        Register scratch,</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;                                        Label* if_deprecated) {</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;  <span class="keywordflow">if</span> (map-&gt;CanBeDeprecated()) {</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;    Move(scratch, map);</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;    movp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, Map::kBitField3Offset));</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;    SmiToInteger32(scratch, scratch);</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    andp(scratch, Immediate(Map::Deprecated::kMask));</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, if_deprecated);</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;  }</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;}</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfBlack(Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;                                 Register bitmap_scratch,</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;                                 Register mask_scratch,</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;                                 Label* on_black,</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;                                 Label::Distance on_black_distance) {</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2243fa97f60bc06fa9f2f150870fc2b3">AreAliased</a>(<span class="keywordtype">object</span>, bitmap_scratch, mask_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>));</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;  GetMarkBits(<span class="keywordtype">object</span>, bitmap_scratch, mask_scratch);</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kBlackBitPattern, <span class="stringliteral">&quot;10&quot;</span>) == 0);</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;  <span class="comment">// The mask_scratch register contains a 1 at the position of the first bit</span></div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;  <span class="comment">// and a 0 at all other positions, including the position of the second bit.</span></div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, mask_scratch);</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;  <span class="comment">// Make rcx into a mask that covers both marking bits using the operation</span></div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;  <span class="comment">// rcx = mask | (mask &lt;&lt; 1).</span></div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;  leap(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Operand(mask_scratch, mask_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b">times_2</a>, 0));</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;  <span class="comment">// Note that we are using a 4-byte aligned 8-byte load.</span></div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;  andp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Operand(bitmap_scratch, MemoryChunk::kHeaderSize));</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;  cmpp(mask_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>);</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, on_black, on_black_distance);</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;}</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;<span class="comment">// Detect some, but not all, common pointer-free objects.  This is used by the</span></div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;<span class="comment">// incremental write barrier which doesn&#39;t care about oddballs (they are always</span></div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;<span class="comment">// marked black immediately so this code is not hit).</span></div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfDataObject(</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;    Register value,</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;    Register scratch,</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;    Label* not_data_object,</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;    Label::Distance not_data_object_distance) {</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;  Label is_data_object;</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;  movp(scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(value, HeapObject::kMapOffset));</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;  CompareRoot(scratch, Heap::kHeapNumberMapRootIndex);</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;is_data_object, Label::kNear);</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a913f4fdfcba05281542857d54a006e38">kIsIndirectStringTag</a> == 1 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a18e6dc79dee8b661595469b94c8bdf56">kIsIndirectStringMask</a> == 1);</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">kNotStringTag</a> == 0x80 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> == 0x80);</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;  <span class="comment">// If it&#39;s a string and it&#39;s not a cons string then it&#39;s an object containing</span></div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;  <span class="comment">// no GC pointers.</span></div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;  testb(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(scratch, Map::kInstanceTypeOffset),</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;        Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a18e6dc79dee8b661595469b94c8bdf56">kIsIndirectStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a>));</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, not_data_object, not_data_object_distance);</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;  bind(&amp;is_data_object);</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;}</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;<span class="keywordtype">void</span> MacroAssembler::GetMarkBits(Register addr_reg,</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;                                 Register bitmap_reg,</div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;                                 Register mask_reg) {</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2243fa97f60bc06fa9f2f150870fc2b3">AreAliased</a>(addr_reg, bitmap_reg, mask_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>));</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;  movp(bitmap_reg, addr_reg);</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;  <span class="comment">// Sign extended 32 bit immediate.</span></div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;  andp(bitmap_reg, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, addr_reg);</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;  <span class="keywordtype">int</span> shift =</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;      Bitmap::kBitsPerCellLog2 + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a> - Bitmap::kBytesPerCellLog2;</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;  shrl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Immediate(shift));</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;  andp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>,</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;       Immediate((Page::kPageAlignmentMask &gt;&gt; shift) &amp;</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;                 ~(Bitmap::kBytesPerCell - 1)));</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;  addp(bitmap_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>);</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, addr_reg);</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;  shrl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">kPointerSizeLog2</a>));</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;  andp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, Immediate((1 &lt;&lt; Bitmap::kBitsPerCellLog2) - 1));</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;  movl(mask_reg, Immediate(1));</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;  shl_cl(mask_reg);</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;}</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;<span class="keywordtype">void</span> MacroAssembler::EnsureNotWhite(</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;    Register value,</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;    Register bitmap_scratch,</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;    Register mask_scratch,</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;    Label* value_is_white_and_not_data,</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;    Label::Distance distance) {</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2243fa97f60bc06fa9f2f150870fc2b3">AreAliased</a>(value, bitmap_scratch, mask_scratch, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>));</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;  GetMarkBits(value, bitmap_scratch, mask_scratch);</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;  <span class="comment">// If the value is black or grey we don&#39;t need to do anything.</span></div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kWhiteBitPattern, <span class="stringliteral">&quot;00&quot;</span>) == 0);</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kBlackBitPattern, <span class="stringliteral">&quot;10&quot;</span>) == 0);</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kGreyBitPattern, <span class="stringliteral">&quot;11&quot;</span>) == 0);</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(strcmp(Marking::kImpossibleBitPattern, <span class="stringliteral">&quot;01&quot;</span>) == 0);</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;  Label done;</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;  <span class="comment">// Since both black and grey have a 1 in the first position and white does</span></div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;  <span class="comment">// not have a 1 there we only need to check one bit.</span></div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;  testp(Operand(bitmap_scratch, MemoryChunk::kHeaderSize), mask_scratch);</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, &amp;done, Label::kNear);</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;  <span class="keywordflow">if</span> (emit_debug_code()) {</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;    <span class="comment">// Check for impossible bit pattern.</span></div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;    Label ok;</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;    Push(mask_scratch);</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;    <span class="comment">// shl.  May overflow making the check conservative.</span></div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;    addp(mask_scratch, mask_scratch);</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;    testp(Operand(bitmap_scratch, MemoryChunk::kHeaderSize), mask_scratch);</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;    j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;ok, Label::kNear);</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;    int3();</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;    bind(&amp;ok);</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;    Pop(mask_scratch);</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;  }</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;  <span class="comment">// Value is white.  We check whether it is data that doesn&#39;t need scanning.</span></div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;  <span class="comment">// Currently only checks for HeapNumber and non-cons strings.</span></div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;  Register map = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>;  <span class="comment">// Holds map while checking type.</span></div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;  Register length = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>;  <span class="comment">// Holds length of object after checking type.</span></div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;  Label not_heap_number;</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;  Label is_data_object;</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;  <span class="comment">// Check for heap-number</span></div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;  movp(map, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(value, HeapObject::kMapOffset));</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;  CompareRoot(map, Heap::kHeapNumberMapRootIndex);</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;not_heap_number, Label::kNear);</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;  movp(length, Immediate(HeapNumber::kSize));</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;  jmp(&amp;is_data_object, Label::kNear);</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;  bind(&amp;not_heap_number);</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;  <span class="comment">// Check for strings.</span></div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a913f4fdfcba05281542857d54a006e38">kIsIndirectStringTag</a> == 1 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a18e6dc79dee8b661595469b94c8bdf56">kIsIndirectStringMask</a> == 1);</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">kNotStringTag</a> == 0x80 &amp;&amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a> == 0x80);</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;  <span class="comment">// If it&#39;s a string and it&#39;s not a cons string then it&#39;s an object containing</span></div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;  <span class="comment">// no GC pointers.</span></div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;  Register instance_type = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>;</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;  movzxbl(instance_type, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(map, Map::kInstanceTypeOffset));</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;  testb(instance_type, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a18e6dc79dee8b661595469b94c8bdf56">kIsIndirectStringMask</a> | <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">kIsNotStringMask</a>));</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">not_zero</a>, value_is_white_and_not_data);</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;  <span class="comment">// It&#39;s a non-indirect (non-cons and non-slice) string.</span></div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;  <span class="comment">// If it&#39;s external, the length is just ExternalString::kSize.</span></div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;  <span class="comment">// Otherwise it&#39;s String::kHeaderSize + string-&gt;length() * (1 or 2).</span></div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;  Label not_external;</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;  <span class="comment">// External strings are the only ones with the kExternalStringTag bit</span></div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;  <span class="comment">// set.</span></div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce">kSeqStringTag</a> &amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7">kExternalStringTag</a>);</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a>(0, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a9573c2763a4dc28701f9211693bfd103">kConsStringTag</a> &amp; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7">kExternalStringTag</a>);</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;  testb(instance_type, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7">kExternalStringTag</a>));</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a>, &amp;not_external, Label::kNear);</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;  movp(length, Immediate(ExternalString::kSize));</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;  jmp(&amp;is_data_object, Label::kNear);</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;  bind(&amp;not_external);</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;  <span class="comment">// Sequential string, either ASCII or UC16.</span></div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#af695344577b6def40287224263a9d3aa">kOneByteStringTag</a> == 0x04);</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;  andp(length, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>));</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;  xorp(length, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">kStringEncodingMask</a>));</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;  addp(length, Immediate(0x04));</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;  <span class="comment">// Value now either 4 (if ASCII) or 8 (if UC16), i.e. char-size shifted by 2.</span></div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;  imulp(length, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(value, String::kLengthOffset));</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;  shr(length, Immediate(2 + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">kSmiTagSize</a> + <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afa8d68cf6bb62505693e9b654a93cba7">kSmiShiftSize</a>));</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;  addp(length, Immediate(SeqString::kHeaderSize + kObjectAlignmentMask));</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;  andp(length, Immediate(~kObjectAlignmentMask));</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;  bind(&amp;is_data_object);</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;  <span class="comment">// Value is a data object, and it is white.  Mark it black.  Since we know</span></div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;  <span class="comment">// that the object is white we can make it black by flipping one bit.</span></div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;  orp(Operand(bitmap_scratch, MemoryChunk::kHeaderSize), mask_scratch);</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;  andp(bitmap_scratch, Immediate(~Page::kPageAlignmentMask));</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;  addl(Operand(bitmap_scratch, MemoryChunk::kLiveBytesOffset), length);</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;</div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;  bind(&amp;done);</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;}</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;<span class="keywordtype">void</span> MacroAssembler::CheckEnumCache(Register null_value, Label* call_runtime) {</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;  Label next, start;</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;  Register empty_fixed_array_value = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a16e3d756c69dbae4aa6f68cd7c5423ca">r8</a>;</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;  LoadRoot(empty_fixed_array_value, Heap::kEmptyFixedArrayRootIndex);</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;  <span class="comment">// Check if the enum length field is properly initialized, indicating that</span></div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;  <span class="comment">// there is an enum cache.</span></div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;  EnumLength(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>);</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;  Cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, Smi::FromInt(kInvalidEnumCacheSentinel));</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, call_runtime);</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;  jmp(&amp;start);</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;  bind(&amp;next);</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, HeapObject::kMapOffset));</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;  <span class="comment">// For all objects but the receiver, check that the cache is empty.</span></div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;  EnumLength(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>);</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;  Cmp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, Smi::FromInt(0));</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, call_runtime);</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;  bind(&amp;start);</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;  <span class="comment">// Check that there are no elements. Register rcx contains the current JS</span></div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;  <span class="comment">// object we&#39;ve reached through the prototype chain.</span></div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;  Label no_elements;</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;  cmpp(empty_fixed_array_value,</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;       <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, JSObject::kElementsOffset));</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, &amp;no_elements);</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;  <span class="comment">// Second chance, the object may be using the empty slow element dictionary.</span></div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;  LoadRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, Heap::kEmptySlowElementDictionaryRootIndex);</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;  cmpp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, JSObject::kElementsOffset));</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, call_runtime);</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;  bind(&amp;no_elements);</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;  movp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">rbx</a>, Map::kPrototypeOffset));</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;  cmpp(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">rcx</a>, null_value);</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;next);</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;}</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TestJSArrayForAllocationMemento(</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;    Register receiver_reg,</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;    Register scratch_reg,</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;    Label* no_memento_found) {</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;  ExternalReference new_space_start =</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;      ExternalReference::new_space_start(isolate());</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;  ExternalReference new_space_allocation_top =</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;      ExternalReference::new_space_allocation_top_address(isolate());</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;  leap(scratch_reg, Operand(receiver_reg,</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;      JSArray::kSize + AllocationMemento::kSize - <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">kHeapObjectTag</a>));</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;  Move(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>, new_space_start);</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;  cmpp(scratch_reg, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>);</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1665a21bbe0fa4e1956abbeb702a170d">less</a>, no_memento_found);</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;  cmpp(scratch_reg, ExternalOperand(new_space_allocation_top));</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8ab67380aeceb97932170fbca2bcdf965f">greater</a>, no_memento_found);</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;  CompareRoot(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae8fdd39bffcc13b291c4fa04a9e185cb">MemOperand</a>(scratch_reg, -AllocationMemento::kSize),</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;              Heap::kAllocationMementoMapRootIndex);</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;}</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;<span class="keywordtype">void</span> MacroAssembler::JumpIfDictionaryInPrototypeChain(</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;    Register <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;    Register scratch0,</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;    Register scratch1,</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    Label* found) {</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!(scratch0.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>) &amp;&amp; scratch1.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">kScratchRegister</a>)));</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!scratch1.is(scratch0));</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;  Register current = scratch0;</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;  Label loop_again;</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;  movp(current, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;  <span class="comment">// Loop based on the map going up the prototype chain.</span></div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;  bind(&amp;loop_again);</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;  movp(current, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(current, HeapObject::kMapOffset));</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;  movp(scratch1, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(current, Map::kBitField2Offset));</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;  andp(scratch1, Immediate(Map::kElementsKindMask));</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;  shr(scratch1, Immediate(Map::kElementsKindShift));</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;  cmpp(scratch1, Immediate(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a7c6c4d3aa4658f29b80f0a5c8c40dbe4">DICTIONARY_ELEMENTS</a>));</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">equal</a>, found);</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;  movp(current, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">FieldOperand</a>(current, Map::kPrototypeOffset));</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;  CompareRoot(current, Heap::kNullValueRootIndex);</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;  j(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">not_equal</a>, &amp;loop_again);</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;}</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;<span class="keywordtype">void</span> MacroAssembler::TruncatingDiv(Register dividend, <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> divisor) {</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dividend.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>));</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!dividend.is(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>));</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;  MultiplierAndShift ms(divisor);</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;  movl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, Immediate(ms.multiplier()));</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;  imull(dividend);</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;  <span class="keywordflow">if</span> (divisor &gt; 0 &amp;&amp; ms.multiplier() &lt; 0) addl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, dividend);</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;  <span class="keywordflow">if</span> (divisor &lt; 0 &amp;&amp; ms.multiplier() &gt; 0) subl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, dividend);</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;  <span class="keywordflow">if</span> (ms.shift() &gt; 0) sarl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, Immediate(ms.shift()));</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;  movl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, dividend);</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;  shrl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>, Immediate(31));</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;  addl(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">rdx</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">rax</a>);</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;}</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;} }  <span class="comment">// namespace v8::internal</span></div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;<span class="preprocessor">#endif  // V8_TARGET_ARCH_X64</span></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac7f0eb0e10bc8bbb03c793ea1256e329"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac7f0eb0e10bc8bbb03c793ea1256e329">v8::internal::Address</a></div><div class="ttdeci">byte * Address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00186">globals.h:186</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aebae97115decff3859f1c9b8b568e6b6"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aebae97115decff3859f1c9b8b568e6b6">v8::internal::rdx</a></div><div class="ttdeci">const Register rdx</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00166">assembler-x64.h:166</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_aa93c2c60a1492707ba7686a2d1579a32"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#aa93c2c60a1492707ba7686a2d1579a32">NULL</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00268">flag-definitions.h:268</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7ff5a5c54f182b86d1cd993cf4512c87a50d1448013c6f17125caee18aa418af7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7ff5a5c54f182b86d1cd993cf4512c87a50d1448013c6f17125caee18aa418af7">v8::internal::NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00072">property-details.h:72</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a9d62d9143e23b873bb925fd4d7df0cd8">v8::internal::no_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00278">assembler-ia32.h:278</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a97d86e98faf1fa957813fcad98fecf21adc7588f17692aa631f375290d50a2c8e"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a97d86e98faf1fa957813fcad98fecf21adc7588f17692aa631f375290d50a2c8e">v8::internal::INTERNAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00478">v8globals.h:478</a></div></div>
<div class="ttc" id="namespacedisasm_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="../../d9/da2/namespacedisasm.html#a0c8186d9b9b7880309c27230bbb5e69d">disasm::byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d84/disasm_8h_source.html#l00033">disasm.h:33</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_af6b70770fe43654cad4231e96f96049a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#af6b70770fe43654cad4231e96f96049a">v8::internal::kSmiTagMask</a></div><div class="ttdeci">const intptr_t kSmiTagMask</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l05480">v8.h:5480</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa9701a60c1f9a91e97852d88acfe6591b">v8::internal::times_2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00377">assembler-ia32.h:377</a></div></div>
<div class="ttc" id="checks_8h_html_a0ea8f66bf4733597f9a514fda2151ff9"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(expected, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00252">checks.h:252</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6fe51c108370f1948748482356be1ab2"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6fe51c108370f1948748482356be1ab2">v8::internal::kDoubleAlignmentMask</a></div><div class="ttdeci">const intptr_t kDoubleAlignmentMask</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00053">v8globals.h:53</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251aed20cf16e899d22ce34093f1477746b1">v8::internal::DO_SMI_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00439">v8globals.h:439</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a55e1524b1908417bac09cae5292e9484"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a55e1524b1908417bac09cae5292e9484">v8::internal::r14</a></div><div class="ttdeci">const Register r14</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00178">assembler-x64.h:178</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2dd387018a07035386a0b646904f2ed2af10c5618e918efcb30e098993503f475"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2dd387018a07035386a0b646904f2ed2af10c5618e918efcb30e098993503f475">v8::internal::BUILD_STUB_FRAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/db8/frames_8h_source.html#l00959">frames.h:959</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2723148e93023c30ba2f0bd2aed0257a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2723148e93023c30ba2f0bd2aed0257a">v8::internal::kNaNOrInfinityLowerBoundUpper32</a></div><div class="ttdeci">const uint32_t kNaNOrInfinityLowerBoundUpper32</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00456">v8globals.h:456</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a5adf92f40f8705bd9fc042cd8ed3e2fcab024a717bd5c91ace4ff286471bff954"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fcab024a717bd5c91ace4ff286471bff954">TAG_OBJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00044">macro-assembler.h:44</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acf66346cbf0bfc09159ea8ecf1b2f479"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acf66346cbf0bfc09159ea8ecf1b2f479">v8::internal::r3</a></div><div class="ttdeci">const Register r3</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00228">assembler-arm.h:228</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a29dd6ffe8f62d1541ef1c8056c028e9c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a29dd6ffe8f62d1541ef1c8056c028e9c">v8::internal::true</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths true</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00208">flags.cc:208</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5207974538b01392cb7fc18d69a0fe00">v8::internal::overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00277">assembler-ia32.h:277</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a1665a21bbe0fa4e1956abbeb702a170d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1665a21bbe0fa4e1956abbeb702a170d">v8::internal::less</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00289">assembler-ia32.h:289</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8ab67380aeceb97932170fbca2bcdf965f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8ab67380aeceb97932170fbca2bcdf965f">v8::internal::greater</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00292">assembler-ia32.h:292</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afca275e25e2f701ebb154f525478bf57"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afca275e25e2f701ebb154f525478bf57">v8::internal::r11</a></div><div class="ttdeci">const Register r11</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00175">assembler-x64.h:175</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3884db38d654abf2e032bff0f4054d56"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56">v8::internal::RememberedSetAction</a></div><div class="ttdeci">RememberedSetAction</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00061">macro-assembler-arm.h:61</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a1e237bf5860e6e63ed67593dc6d03c65"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a1e237bf5860e6e63ed67593dc6d03c65">v8::internal::SYMBOL_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00712">objects.h:712</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afc9485caadcdbab9ac567ff1ec54e554"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afc9485caadcdbab9ac567ff1ec54e554">v8::internal::kNumRegisters</a></div><div class="ttdeci">const int kNumRegisters</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00057">constants-arm.h:57</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad0e5e696678088b4c989051fe2d50c9aaa6383dd25bfa78e969a64e25d54f822d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad0e5e696678088b4c989051fe2d50c9aaa6383dd25bfa78e969a64e25d54f822d">v8::internal::FAIL_ON_MINUS_ZERO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00563">v8globals.h:563</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aaf187e57af5e095d42963d63e75bc79f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aaf187e57af5e095d42963d63e75bc79f">v8::internal::rbp</a></div><div class="ttdeci">const Register rbp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00169">assembler-x64.h:169</a></div></div>
<div class="ttc" id="debug_8h_html"><div class="ttname"><a href="../../db/d16/debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8aceec566dcc3d7dcea1417f8f54b58d07"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8aceec566dcc3d7dcea1417f8f54b58d07">v8::internal::positive</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00286">assembler-ia32.h:286</a></div></div>
<div class="ttc" id="checks_8h_html_aa49e13f06cb6965b35c085c0497e2bf7"><div class="ttname"><a href="../../d5/d16/checks_8h.html#aa49e13f06cb6965b35c085c0497e2bf7">ASSERT_NOT_NULL</a></div><div class="ttdeci">#define ASSERT_NOT_NULL(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00343">checks.h:343</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a5adf92f40f8705bd9fc042cd8ed3e2fca162096ce362c9495a792c2cd1cbc4138"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca162096ce362c9495a792c2cd1cbc4138">RESULT_CONTAINS_TOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00047">macro-assembler.h:47</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8afe4762daf05f344b9afbf670d14fcb56">v8::internal::below</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00279">assembler-ia32.h:279</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a66842ed977d954218d67bc8fdd20df3d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a66842ed977d954218d67bc8fdd20df3d">v8::internal::parity_even</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00287">assembler-ia32.h:287</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a105546b82eb2e99e172dda630ee4fdc1a6c0c338932b450afc64a0224b4d47baa"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a105546b82eb2e99e172dda630ee4fdc1a6c0c338932b450afc64a0224b4d47baa">v8::internal::DEBUG_BREAK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00274">objects.h:274</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad495a9f61af7fff07d7e97979d1ab854abf8228243e229b8ef4ab53f8317cd260">v8::internal::STUB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d24/hydrogen_8h_source.html#l00560">hydrogen.h:560</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a930a443795edf474918edc6702903f45"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a930a443795edf474918edc6702903f45">v8::internal::rsi</a></div><div class="ttdeci">const Register rsi</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00170">assembler-x64.h:170</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a4f72fcdf85abfe01d273eec97beb6595">v8::internal::not_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00282">assembler-ia32.h:282</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a974a07dae26fe984e240219909cb543e"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a974a07dae26fe984e240219909cb543e">v8::internal::Type</a></div><div class="ttdeci">TypeImpl&lt; ZoneTypeConfig &gt; Type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00062">property-details.h:62</a></div></div>
<div class="ttc" id="namespaceunibrow_html_a32f2e37ee053cf2ce8ca28d1f74630e5"><div class="ttname"><a href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/unicode_8cc_source.html#l00047">unicode.cc:47</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7400184c709423dd1731ad4cbc8e69d4"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7400184c709423dd1731ad4cbc8e69d4">v8::internal::kIsNotInternalizedMask</a></div><div class="ttdeci">const uint32_t kIsNotInternalizedMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00603">objects.h:603</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8adf8d0d2bac0a8eb72d827e194e9411e5">v8::internal::not_zero</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00298">assembler-ia32.h:298</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7b4bcf1a2476785bc7f80eacbddf1822"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822">v8::internal::SaveFPRegsMode</a></div><div class="ttdeci">SaveFPRegsMode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dec/assembler_8h_source.html#l00226">assembler.h:226</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa2ebde64c3021ee919268dd48bef65f0a">v8::internal::times_1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00376">assembler-ia32.h:376</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a754905f80c48c8866b23aca49699104f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a754905f80c48c8866b23aca49699104f">v8::internal::LAST_NAME_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00818">objects.h:818</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a5adf92f40f8705bd9fc042cd8ed3e2fca6486557d762ee4662ca1dde1e7ceebe2"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca6486557d762ee4662ca1dde1e7ceebe2">PRETENURE_OLD_POINTER_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00054">macro-assembler.h:54</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9f">v8::internal::ScaleFactor</a></div><div class="ttdeci">ScaleFactor</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00375">assembler-ia32.h:375</a></div></div>
<div class="ttc" id="checks_8h_html_ac22830a985e1daed0c9eadba8c6f606e"><div class="ttname"><a href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00329">checks.h:329</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a1d8a051dece28f124c3552c8df41ac2d">v8::internal::carry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00295">assembler-ia32.h:295</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aafe5e4a0b571d134a2e5096606bb055f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aafe5e4a0b571d134a2e5096606bb055f">v8::internal::kPointerSizeLog2</a></div><div class="ttdeci">const int kPointerSizeLog2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00281">globals.h:281</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a8c33592060c5e5568b3fa116c71610ba"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a8c33592060c5e5568b3fa116c71610ba">v8::internal::sign</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00299">assembler-ia32.h:299</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a8b2de00af2e470c341f750b71b66aebf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a8b2de00af2e470c341f750b71b66aebf">v8::internal::FIRST_SPEC_OBJECT_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00844">objects.h:844</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a264461e126618fb7e88f660a93e27548abb2fd8898260e912d8a5c09c44e0a323"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548abb2fd8898260e912d8a5c09c44e0a323">v8::internal::BAILOUT_ON_OVERFLOW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d13/macro-assembler-x64_8h_source.html#l00059">macro-assembler-x64.h:59</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a42742b6df96d8400b0ff2cf776247a7c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a42742b6df96d8400b0ff2cf776247a7c">v8::internal::kStringRepresentationMask</a></div><div class="ttdeci">const uint32_t kStringRepresentationMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00615">objects.h:615</a></div></div>
<div class="ttc" id="checks_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00075">checks.h:75</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6e83dd17c5de4dbc4a77cf6622fd385d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6e83dd17c5de4dbc4a77cf6622fd385d">v8::internal::r2</a></div><div class="ttdeci">const Register r2</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00227">assembler-arm.h:227</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a82eb043d79d5c97b659ec88815158ca4"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a82eb043d79d5c97b659ec88815158ca4">v8::internal::AllowDeferredHandleDereference</a></div><div class="ttdeci">PerThreadAssertScopeDebugOnly&lt; DEFERRED_HANDLE_DEREFERENCE_ASSERT, true &gt; AllowDeferredHandleDereference</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d64/assert-scope_8h_source.html#l00234">assert-scope.h:234</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7b4bcf1a2476785bc7f80eacbddf1822a1f66bbcb0dcf356584f55d2acbbf9f54"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7b4bcf1a2476785bc7f80eacbddf1822a1f66bbcb0dcf356584f55d2acbbf9f54">v8::internal::kSaveFPRegs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dec/assembler_8h_source.html#l00226">assembler.h:226</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3489b43407280cc0752430ea0da4e767"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3489b43407280cc0752430ea0da4e767">v8::internal::kObjectAlignmentMask</a></div><div class="ttdeci">const intptr_t kObjectAlignmentMask</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00045">v8globals.h:45</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a32df3bb76b662e0f3613654187f72aa4a819e97a39906a4b5a6f6eeb9a82efaea"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a819e97a39906a4b5a6f6eeb9a82efaea">v8::internal::OMIT_SMI_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00062">macro-assembler-arm.h:62</a></div></div>
<div class="ttc" id="bootstrapper_8h_html"><div class="ttname"><a href="../../d9/d41/bootstrapper_8h.html">bootstrapper.h</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_ae491df1d2c24e3751c368155c20fe5ef"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#ae491df1d2c24e3751c368155c20fe5ef">size</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object size</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00210">flag-definitions.h:210</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a44ee97292914fbe042fc1b7b3236f7bc"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a44ee97292914fbe042fc1b7b3236f7bc">v8::internal::kHeapObjectTagMask</a></div><div class="ttdeci">const intptr_t kHeapObjectTagMask</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l05475">v8.h:5475</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a58e8654e182fddc4db852328ca31beca">v8::internal::FAST_HOLEY_SMI_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00040">elements-kind.h:40</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_a72ae4718167105f8e7d356f15d71182d"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#a72ae4718167105f8e7d356f15d71182d">flags</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function not JSFunction itself flushes the cache of optimized code for closures on every GC functions with arguments object maximum number of escape analysis fix point iterations allow uint32 values on optimize frames if they are used only in safe operations track concurrent recompilation artificial compilation delay in ms concurrent on stack replacement do not emit check maps for constant values that have a leaf deoptimize the optimized code if the layout of the maps changes number of stack frames inspected by the profiler percentage of ICs that must have type info to allow optimization extra verbose compilation tracing generate extra emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of VFP3 instructions if available enable use of NEON instructions if enable use of SDIV and UDIV instructions if enable loading bit constant by means of movw movt instruction enable unaligned accesses for enable use of d16 d31 registers on ARM this requires VFP3 force all emitted branches to be in long expose natives in global object expose freeBuffer extension expose gc extension under the specified name expose externalize string extension number of stack frames to capture disable builtin natives files print name of functions for which code is generated use random jit cookie to mask large constants trace lazy optimization use adaptive optimizations always try to OSR functions trace optimize function deoptimization minimum length for automatic enable preparsing maximum number of optimization attempts before giving up cache prototype transitions trace debugging JSON request response trace out of bounds accesses to external arrays trace_js_array_abuse automatically set the debug break flag when debugger commands are in the queue abort by crashing maximum length of function source code printed in a stack trace max size of the new max size of the old max size of executable always perform global GCs print one trace line following each garbage collection do not print trace line after scavenger collection print statistics of the maximum memory committed for the heap in only print modified registers Don t break for ASM_UNIMPLEMENTED_BREAK macros print stack trace when an illegal exception is thrown randomize hashes to avoid predictable hash Fixed seed to use to hash property Print the time it takes to deserialize the snapshot testing_bool_flag testing_int_flag string flag tmp file in which to serialize heap Print the time it takes to lazily compile hydrogen code stubs concurrent_recompilation concurrent_sweeping Print usage including flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00664">flag-definitions.h:664</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017a7c6c4d3aa4658f29b80f0a5c8c40dbe4"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a7c6c4d3aa4658f29b80f0a5c8c40dbe4">v8::internal::DICTIONARY_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00053">elements-kind.h:53</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7551db6cf193f19a377202acf42283da"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7551db6cf193f19a377202acf42283da">v8::internal::kIntSize</a></div><div class="ttdeci">const int kIntSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00263">globals.h:263</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3884db38d654abf2e032bff0f4054d56a0281060991aef42d86dcf437f5dbb1a1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3884db38d654abf2e032bff0f4054d56a0281060991aef42d86dcf437f5dbb1a1">v8::internal::OMIT_REMEMBERED_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00061">macro-assembler-arm.h:61</a></div></div>
<div class="ttc" id="structv8_1_1internal_1_1_register_html_a9fbb542ce0dae274d40866ba432b411a"><div class="ttname"><a href="../../dc/d02/structv8_1_1internal_1_1_register.html#a9fbb542ce0dae274d40866ba432b411a">v8::internal::Register::code</a></div><div class="ttdeci">int code() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00205">assembler-arm.h:205</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa8a04ffb719cd6530da36a0330bb5e396">CALL_FUNCTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00034">macro-assembler.h:34</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8ac9e5f8199485413a934b703f69c9f452"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8ac9e5f8199485413a934b703f69c9f452">v8::internal::always</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/daa/macro-assembler-arm64_8h_source.html#l00092">macro-assembler-arm64.h:92</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a5bc761f4d3f8b632b8920cc02760bf91">v8::internal::FAST_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00045">elements-kind.h:45</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac8bc9037fb61de907d8aad828c1cc7f9"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac8bc9037fb61de907d8aad828c1cc7f9">v8::internal::is_intn</a></div><div class="ttdeci">bool is_intn(int64_t x, unsigned n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l01102">utils.h:1102</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_adfa873894470d6950e21cab8c6dadcd1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#adfa873894470d6950e21cab8c6dadcd1">v8::internal::flag</a></div><div class="ttdeci">kInstanceClassNameOffset flag</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l05115">objects-inl.h:5115</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a264461e126618fb7e88f660a93e27548a833b624d8351690eb9e433e86cbe433d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548a833b624d8351690eb9e433e86cbe433d">v8::internal::BAILOUT_ON_NO_OVERFLOW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d13/macro-assembler-x64_8h_source.html#l00058">macro-assembler-x64.h:58</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab13cff482340ab78fa710bd979e42132"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab13cff482340ab78fa710bd979e42132">v8::internal::kNotStringTag</a></div><div class="ttdeci">const uint32_t kNotStringTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00599">objects.h:599</a></div></div>
<div class="ttc" id="checks_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00052">checks.h:52</a></div></div>
<div class="ttc" id="heap_8h_html"><div class="ttname"><a href="../../da/ddb/heap_8h.html">heap.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae491df1d2c24e3751c368155c20fe5ef"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae491df1d2c24e3751c368155c20fe5ef">v8::internal::size</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object size</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00211">flags.cc:211</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017">v8::internal::ElementsKind</a></div><div class="ttdeci">ElementsKind</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00036">elements-kind.h:36</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a605c1ec41394d49785f9b9c1d3319e5b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a605c1ec41394d49785f9b9c1d3319e5b">v8::internal::kDoubleSize</a></div><div class="ttdeci">const int kDoubleSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00266">globals.h:266</a></div></div>
<div class="ttc" id="serialize_8h_html"><div class="ttname"><a href="../../df/d9d/serialize_8h.html">serialize.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0a71221094570a6a00adeb973c92190d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0a71221094570a6a00adeb973c92190d">v8::internal::BailoutReason</a></div><div class="ttdeci">BailoutReason</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l01424">objects.h:1424</a></div></div>
<div class="ttc" id="frames-arm64_8h_html_a5270da26d771451795798dce0d1e178c"><div class="ttname"><a href="../../de/de5/frames-arm64_8h.html#a5270da26d771451795798dce0d1e178c">kNumSafepointSavedRegisters</a></div><div class="ttdeci">#define kNumSafepointSavedRegisters</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de5/frames-arm64_8h_source.html#l00052">frames-arm64.h:52</a></div></div>
<div class="ttc" id="globals_8h_html_a70ee6962850813a39c8d4dfa2b658ca9"><div class="ttname"><a href="../../d5/d87/globals_8h.html#a70ee6962850813a39c8d4dfa2b658ca9">V8_INT64_C</a></div><div class="ttdeci">#define V8_INT64_C(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00218">globals.h:218</a></div></div>
<div class="ttc" id="property-details_8h_html_ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2"><div class="ttname"><a href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00037">property-details.h:37</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2dd387018a07035386a0b646904f2ed2"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2dd387018a07035386a0b646904f2ed2">v8::internal::PrologueFrameMode</a></div><div class="ttdeci">PrologueFrameMode</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db8/frames_8h_source.html#l00957">frames.h:957</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a18e6dc79dee8b661595469b94c8bdf56"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a18e6dc79dee8b661595469b94c8bdf56">v8::internal::kIsIndirectStringMask</a></div><div class="ttdeci">const uint32_t kIsIndirectStringMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00622">objects.h:622</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a113747f07e8621eed53e102993358774"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a113747f07e8621eed53e102993358774">v8::internal::r9</a></div><div class="ttdeci">const Register r9</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00237">assembler-arm.h:237</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ade2f76ca31816a0649d08bc8856fd56b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ade2f76ca31816a0649d08bc8856fd56b">v8::internal::kPointerSize</a></div><div class="ttdeci">const int kPointerSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00268">globals.h:268</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a77dd0d910751ab1628781fb29adc69d8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a77dd0d910751ab1628781fb29adc69d8">v8::internal::MAP_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00715">objects.h:715</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a5deff98b7209d461524e9b5bff3dd4bf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a5deff98b7209d461524e9b5bff3dd4bf">v8::internal::above_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00280">assembler-ia32.h:280</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2cd982c75cf137802592cdabd4b92d35"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2cd982c75cf137802592cdabd4b92d35">v8::internal::FieldOperand</a></div><div class="ttdeci">Operand FieldOperand(Register object, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d46/macro-assembler-ia32_8h_source.html#l01075">macro-assembler-ia32.h:1075</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0a8fa6d618b69c17a399f61e9a4b56b3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0a8fa6d618b69c17a399f61e9a4b56b3">v8::internal::kZapValue</a></div><div class="ttdeci">const Address kZapValue</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00082">v8globals.h:82</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_a66b940b179a9a21572629d3d5c854cb4"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#a66b940b179a9a21572629d3d5c854cb4">map</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function not JSFunction itself flushes the cache of optimized code for closures on every GC functions with arguments object maximum number of escape analysis fix point iterations allow uint32 values on optimize frames if they are used only in safe operations track concurrent recompilation artificial compilation delay in ms concurrent on stack replacement do not emit check maps for constant values that have a leaf map</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00349">flag-definitions.h:349</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a36d4343b9bd1bc95a5e5013dbb13f94c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a36d4343b9bd1bc95a5e5013dbb13f94c">v8::internal::kHeapObjectTag</a></div><div class="ttdeci">const int kHeapObjectTag</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l05473">v8.h:5473</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ada66adab5e750853950daf4371db1392"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ada66adab5e750853950daf4371db1392">v8::internal::IsAligned</a></div><div class="ttdeci">bool IsAligned(T value, U alignment)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00211">utils.h:211</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a401b4a5ba53a8291e0d8b7c5c4c083b5"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a401b4a5ba53a8291e0d8b7c5c4c083b5">v8::internal::kRegisterSize</a></div><div class="ttdeci">const int kRegisterSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00269">globals.h:269</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a1e9e7531525d3d737a2ec1b811b369b0"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a1e9e7531525d3d737a2ec1b811b369b0">v8::internal::rbx</a></div><div class="ttdeci">const Register rbx</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00167">assembler-x64.h:167</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a818786d91ba77192f22d97260f817d77"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a818786d91ba77192f22d97260f817d77">v8::internal::kHoleNanLower32</a></div><div class="ttdeci">const uint32_t kHoleNanLower32</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00455">v8globals.h:455</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a09f3d980cde7c3ededc3c8d268be8999"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a09f3d980cde7c3ededc3c8d268be8999">v8::internal::rsp</a></div><div class="ttdeci">const Register rsp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00168">assembler-x64.h:168</a></div></div>
<div class="ttc" id="codegen_8h_html"><div class="ttname"><a href="../../d1/d39/codegen_8h.html">codegen.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad7dcca21910dd40788b9f4e1acbd90c2"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad7dcca21910dd40788b9f4e1acbd90c2">v8::internal::kFPOnStackSize</a></div><div class="ttdeci">const int kFPOnStackSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00271">globals.h:271</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad0e5e696678088b4c989051fe2d50c9a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad0e5e696678088b4c989051fe2d50c9a">v8::internal::MinusZeroMode</a></div><div class="ttdeci">MinusZeroMode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00561">v8globals.h:561</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a5adf92f40f8705bd9fc042cd8ed3e2fca36181690955e34f1445c12049fb2677c"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca36181690955e34f1445c12049fb2677c">DOUBLE_ALIGNMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00052">macro-assembler.h:52</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_abf132b4ad93f3557cd3956577592ba68a58f89ea394575eb2e0940a890ad02928"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#abf132b4ad93f3557cd3956577592ba68a58f89ea394575eb2e0940a890ad02928">v8::internal::Offset</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00285">constants-arm.h:285</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a73df7ce4764b88bd39669453f6a92c26"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a73df7ce4764b88bd39669453f6a92c26">v8::internal::rax</a></div><div class="ttdeci">const Register rax</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00164">assembler-x64.h:164</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6dc7d53fd2026931ba9aec2e80e46fe6"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6dc7d53fd2026931ba9aec2e80e46fe6">v8::internal::rdi</a></div><div class="ttdeci">const Register rdi</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00171">assembler-x64.h:171</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a218145ea10aed9047915625daa5f5f46"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a218145ea10aed9047915625daa5f5f46">v8::internal::kBitsPerByte</a></div><div class="ttdeci">const int kBitsPerByte</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00287">globals.h:287</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a9bc0d401ff10065d28e305cf2d13174c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a9bc0d401ff10065d28e305cf2d13174c">v8::internal::kSmiShift</a></div><div class="ttdeci">const int kSmiShift</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ded/assembler-arm64_8h_source.html#l00620">assembler-arm64.h:620</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a73c5ad80dd8c4842fdfe80fcfab50484"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a73c5ad80dd8c4842fdfe80fcfab50484">v8::internal::r0</a></div><div class="ttdeci">const Register r0</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00225">assembler-arm.h:225</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27">v8::internal::InstanceType</a></div><div class="ttdeci">InstanceType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00659">objects.h:659</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab46d6fb6aab3e552e9fb0ab7fe9212ba"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab46d6fb6aab3e552e9fb0ab7fe9212ba">v8::internal::IsPowerOf2</a></div><div class="ttdeci">bool IsPowerOf2(T x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00051">utils.h:51</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa92d9d7b16afdb7ede9e9b0a3e26d3276">v8::internal::times_8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00379">assembler-ia32.h:379</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aaa2b5552afaab806ac61a34b16e7a1c7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aaa2b5552afaab806ac61a34b16e7a1c7">v8::internal::TenToThe</a></div><div class="ttdeci">int TenToThe(int exponent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00880">utils.h:880</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_af499ca60771333c2ada5cf46f7761d33"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#af499ca60771333c2ada5cf46f7761d33">v8::internal::kRootRegisterBias</a></div><div class="ttdeci">const int kRootRegisterBias</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d13/macro-assembler-x64_8h_source.html#l00048">macro-assembler-x64.h:48</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_macro_assembler_html_adf95c7bdba7635e6435320dabd72edc2"><div class="ttname"><a href="../../d8/db1/classv8_1_1internal_1_1_macro_assembler.html#adf95c7bdba7635e6435320dabd72edc2">v8::internal::MacroAssembler::MacroAssembler</a></div><div class="ttdeci">MacroAssembler(Isolate *isolate, void *buffer, int size)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a90286bd943f9eeda91de18b38aee2d37"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a90286bd943f9eeda91de18b38aee2d37">v8::internal::negative</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00285">assembler-ia32.h:285</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aff85f0a2c44538aab092f92d25039773"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aff85f0a2c44538aab092f92d25039773">v8::internal::kStringTag</a></div><div class="ttdeci">const uint32_t kStringTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00598">objects.h:598</a></div></div>
<div class="ttc" id="assembler-mips_8h_html_ac635718ef11c22ad46f5c0ea7f3391d9"><div class="ttname"><a href="../../d2/d46/assembler-mips_8h.html#ac635718ef11c22ad46f5c0ea7f3391d9">kRootRegister</a></div><div class="ttdeci">#define kRootRegister</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d46/assembler-mips_8h_source.html#l00315">assembler-mips.h:315</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a90fd9990c35530ac962d10e8e0eefd98"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a90fd9990c35530ac962d10e8e0eefd98">v8::internal::kInternalizedTag</a></div><div class="ttdeci">const uint32_t kInternalizedTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00605">objects.h:605</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0e008753fb0a146213a1b3822fae9031a9573c2763a4dc28701f9211693bfd103"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a9573c2763a4dc28701f9211693bfd103">v8::internal::kConsStringTag</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00618">objects.h:618</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a0fb80d1e7fafc4b00df717805a1c83ea"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0fb80d1e7fafc4b00df717805a1c83ea">v8::internal::cc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00087">constants-arm.h:87</a></div></div>
<div class="ttc" id="token_8cc_html_aeb3b320679bdd784c8fc3b5f2aa813a9"><div class="ttname"><a href="../../d4/d55/token_8cc.html#aeb3b320679bdd784c8fc3b5f2aa813a9">T</a></div><div class="ttdeci">#define T(name, string, precedence)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d55/token_8cc_source.html#l00048">token.cc:48</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a54ec24cd23f46645d647c42fc13b76da"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76da">InvokeFlag</a></div><div class="ttdeci">InvokeFlag</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00033">macro-assembler.h:33</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a54ec24cd23f46645d647c42fc13b76daa4b42ca0575007ffd974842dfa51433a4">JUMP_FUNCTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00035">macro-assembler.h:35</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a5adf92f40f8705bd9fc042cd8ed3e2fc"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fc">AllocationFlags</a></div><div class="ttdeci">AllocationFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00040">macro-assembler.h:40</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_a58a844ea91a6b0fd681a92930d913948"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#a58a844ea91a6b0fd681a92930d913948">shift</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array shift</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00210">flag-definitions.h:210</a></div></div>
<div class="ttc" id="shell_8cc_html_a3d8d27d72275827406db2004cefa1a07"><div class="ttname"><a href="../../dd/d51/shell_8cc.html#a3d8d27d72275827406db2004cefa1a07">Load</a></div><div class="ttdeci">void Load(const v8::FunctionCallbackInfo&lt; v8::Value &gt; &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d51/shell_8cc_source.html#l00171">shell.cc:171</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae77d2fa4643ef916a7813c2ef8e8ef81a67824ecf84f5816f07b74fa956bdbcd2"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae77d2fa4643ef916a7813c2ef8e8ef81a67824ecf84f5816f07b74fa956bdbcd2">v8::internal::L</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00189">constants-arm.h:189</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a31f58ba37e722444d2aa9f0bbb643860">v8::internal::above</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00284">assembler-ia32.h:284</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a1035c29a5a8ce8de42eb570ed1298a9c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a1035c29a5a8ce8de42eb570ed1298a9c">v8::internal::arg_reg_1</a></div><div class="ttdeci">const Register arg_reg_1</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00190">assembler-x64.h:190</a></div></div>
<div class="ttc" id="structv8_1_1internal_1_1_register_html_a28408cd9eb12b19e77b021e54a00aaec"><div class="ttname"><a href="../../dc/d02/structv8_1_1internal_1_1_register.html#a28408cd9eb12b19e77b021e54a00aaec">v8::internal::Register::is</a></div><div class="ttdeci">bool is(Register reg) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00204">assembler-arm.h:204</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a478a56a8b5b2d4402ab1d181a309afaf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a478a56a8b5b2d4402ab1d181a309afaf">v8::internal::kIsNotStringMask</a></div><div class="ttdeci">const uint32_t kIsNotStringMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00597">objects.h:597</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e325b47be17d36b12096ad1d73067b1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e325b47be17d36b12096ad1d73067b1">v8::internal::r1</a></div><div class="ttdeci">const Register r1</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00226">assembler-arm.h:226</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae3c559b497bf8e31b3c9e8b55dbb164b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae3c559b497bf8e31b3c9e8b55dbb164b">v8::internal::GetBailoutReason</a></div><div class="ttdeci">const char * GetBailoutReason(BailoutReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d7c/objects_8cc_source.html#l16437">objects.cc:16437</a></div></div>
<div class="ttc" id="macro-assembler_8h_html_a5adf92f40f8705bd9fc042cd8ed3e2fca5a6f701354a49210425d61c970d294f7"><div class="ttname"><a href="../../d0/d04/macro-assembler_8h.html#a5adf92f40f8705bd9fc042cd8ed3e2fca5a6f701354a49210425d61c970d294f7">SIZE_IN_WORDS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d04/macro-assembler_8h_source.html#l00050">macro-assembler.h:50</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031a1df74e17e4b4ef9e340770a2538026a7">v8::internal::kExternalStringTag</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00619">objects.h:619</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a120129960270720fe1e85f660c6157ac"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a120129960270720fe1e85f660c6157ac">v8::internal::kNumSafepointRegisters</a></div><div class="ttdeci">const int kNumSafepointRegisters</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1e/frames-arm_8h_source.html#l00092">frames-arm.h:92</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6dac5fd1cc5bac3dcd0a30f958defd69"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6dac5fd1cc5bac3dcd0a30f958defd69">v8::internal::kScratchRegister</a></div><div class="ttdeci">const Register kScratchRegister</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d13/macro-assembler-x64_8h_source.html#l00041">macro-assembler-x64.h:41</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_ab91e71e972251cbfe502d5f3856e5762"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#ab91e71e972251cbfe502d5f3856e5762">code</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function not JSFunction itself flushes the cache of optimized code for closures on every GC functions with arguments object maximum number of escape analysis fix point iterations allow uint32 values on optimize frames if they are used only in safe operations track concurrent recompilation artificial compilation delay in ms concurrent on stack replacement do not emit check maps for constant values that have a leaf deoptimize the optimized code if the layout of the maps changes number of stack frames inspected by the profiler percentage of ICs that must have type info to allow optimization extra verbose compilation tracing generate extra code(assertions) for debugging&quot;) DEFINE_bool(code_comments</div></div>
<div class="ttc" id="checks_8h_html_add09d39ec888c2d7e12877586f29368d"><div class="ttname"><a href="../../d5/d16/checks_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a></div><div class="ttdeci">#define UNIMPLEMENTED()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00050">checks.h:50</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a06bab522df30c256c75aed528f937619">v8::internal::below_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00283">assembler-ia32.h:283</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a0576af288ae58bd6263f7be5fc8a2013">v8::internal::equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00281">assembler-ia32.h:281</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afa8d68cf6bb62505693e9b654a93cba7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afa8d68cf6bb62505693e9b654a93cba7">v8::internal::kSmiShiftSize</a></div><div class="ttdeci">const int kSmiShiftSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l05539">v8.h:5539</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27a02670a3c9633129c524842afc57c106d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27a02670a3c9633129c524842afc57c106d">v8::internal::JS_FUNCTION_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00812">objects.h:812</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae8fdd39bffcc13b291c4fa04a9e185cb"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae8fdd39bffcc13b291c4fa04a9e185cb">v8::internal::MemOperand</a></div><div class="ttdeci">Operand MemOperand</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d46/macro-assembler-ia32_8h_source.html#l00040">macro-assembler-ia32.h:40</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3c41c69a6b8cd1517fc62a145fb8f180"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3c41c69a6b8cd1517fc62a145fb8f180">v8::internal::kSmiTagSize</a></div><div class="ttdeci">const int kSmiTagSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l05479">v8.h:5479</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aeea3d03558c87a206c7bb04771e951a6"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aeea3d03558c87a206c7bb04771e951a6">v8::internal::CopyBytes</a></div><div class="ttdeci">void CopyBytes(uint8_t *target, uint8_t *source)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de1/runtime_8cc_source.html#l01309">runtime.cc:1309</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a529c696f80404dc88ed86dfbce6dcd1a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a529c696f80404dc88ed86dfbce6dcd1a">v8::internal::kInt64Size</a></div><div class="ttdeci">const int kInt64Size</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00265">globals.h:265</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a16e3d756c69dbae4aa6f68cd7c5423ca"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a16e3d756c69dbae4aa6f68cd7c5423ca">v8::internal::r8</a></div><div class="ttdeci">const Register r8</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00235">assembler-arm.h:235</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8">v8::internal::Condition</a></div><div class="ttdeci">Condition</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00081">constants-arm.h:81</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5f6f886bb4e3e3295c7c62153d2ed755">v8::internal::times_4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00378">assembler-ia32.h:378</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3fb34d516553c1b2b45f23aaa856de0d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3fb34d516553c1b2b45f23aaa856de0d">v8::internal::rcx</a></div><div class="ttdeci">const Register rcx</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00165">assembler-x64.h:165</a></div></div>
<div class="ttc" id="isolate-inl_8h_html"><div class="ttname"><a href="../../d3/d36/isolate-inl_8h.html">isolate-inl.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0c3194971dfd6e181766eb2144fefbc3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0c3194971dfd6e181766eb2144fefbc3">v8::internal::NegateCondition</a></div><div class="ttdeci">Condition NegateCondition(Condition cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00109">constants-arm.h:109</a></div></div>
<div class="ttc" id="checks_8h_html_a9f578a62e6cedf3f56577f294abe2713"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a9f578a62e6cedf3f56577f294abe2713">ASSERT_EQ</a></div><div class="ttdeci">#define ASSERT_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00330">checks.h:330</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2c9dc287b9b66f415817e67ed68cb71a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2c9dc287b9b66f415817e67ed68cb71a">v8::internal::kShortSize</a></div><div class="ttdeci">const int kShortSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00262">globals.h:262</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_af695344577b6def40287224263a9d3aa"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#af695344577b6def40287224263a9d3aa">v8::internal::kOneByteStringTag</a></div><div class="ttdeci">const uint32_t kOneByteStringTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00611">objects.h:611</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a484fd1d5b717caae6eec9a21968d3b12"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a484fd1d5b717caae6eec9a21968d3b12">v8::internal::kSmiTag</a></div><div class="ttdeci">const int kSmiTag</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l05478">v8.h:5478</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">v8::internal::zero</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00297">assembler-ia32.h:297</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7246b88aed235ebebc6625ece178d0dd"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7246b88aed235ebebc6625ece178d0dd">v8::internal::kSmiConstantRegisterValue</a></div><div class="ttdeci">const int kSmiConstantRegisterValue</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d13/macro-assembler-x64_8h_source.html#l00045">macro-assembler-x64.h:45</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aec94f7c51d675bb64581e4560ee0e251"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251">v8::internal::SmiCheckType</a></div><div class="ttdeci">SmiCheckType</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00437">v8globals.h:437</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a913f4fdfcba05281542857d54a006e38"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a913f4fdfcba05281542857d54a006e38">v8::internal::kIsIndirectStringTag</a></div><div class="ttdeci">const uint32_t kIsIndirectStringTag</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00623">objects.h:623</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a264461e126618fb7e88f660a93e27548aaa1119c80d09836f3a0ff13e99b1af6f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a264461e126618fb7e88f660a93e27548aaa1119c80d09836f3a0ff13e99b1af6f">v8::internal::PRESERVE_SOURCE_REGISTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d13/macro-assembler-x64_8h_source.html#l00057">macro-assembler-x64.h:57</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4a9633f2089827507b40a10935839ed134">v8::internal::INLINE_SMI_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00062">macro-assembler-arm.h:62</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a59f2884a5c78178b804f7cfbbf9b6ca3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a59f2884a5c78178b804f7cfbbf9b6ca3">v8::internal::r10</a></div><div class="ttdeci">const Register r10</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00239">assembler-arm.h:239</a></div></div>
<div class="ttc" id="heap-snapshot-generator_8cc_html_aab49963775d0eef29ecab5e60bdd31e6"><div class="ttname"><a href="../../d4/d7d/heap-snapshot-generator_8cc.html#aab49963775d0eef29ecab5e60bdd31e6">obj</a></div><div class="ttdeci">HeapObject * obj</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7d/heap-snapshot-generator_8cc_source.html#l00533">heap-snapshot-generator.cc:533</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac667b904858a97154268e29dec306a21"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac667b904858a97154268e29dec306a21">v8::internal::false</a></div><div class="ttdeci">false</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d54/flags_8cc_source.html#l00171">flags.cc:171</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_a5adc5ec2f1a2af41381abab75250b1c8"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#a5adc5ec2f1a2af41381abab75250b1c8">mode</a></div><div class="ttdeci">enable upcoming ES6 features enable harmony block scoping enable harmony enable harmony proxies enable harmony generators enable harmony numeric enable harmony string enable harmony math functions harmony_scoping harmony_symbols harmony_collections harmony_iteration harmony_strings harmony_scoping harmony_maths tracks arrays with only smi values Optimize object Array DOM strings and string pretenure call new trace pretenuring decisions of HAllocate instructions track fields with only smi values track fields with heap values track_fields track_fields Enables optimizations which favor memory size over execution speed use string slices optimization filter maximum number of GVN fix point iterations use function inlining use allocation folding eliminate write barriers targeting allocations in optimized code maximum source size in bytes considered for a single inlining maximum cumulative number of AST nodes considered for inlining crankshaft harvests type feedback from stub cache trace check elimination phase hydrogen tracing filter trace hydrogen to given file name trace inlining decisions trace store elimination trace all use positions trace global value numbering trace hydrogen escape analysis trace the tracking of allocation sites trace map generalization environment for every instruction deoptimize every n garbage collections put a break point before deoptimizing deoptimize uncommon cases use on stack replacement trace array bounds check elimination perform array index dehoisting use load elimination use store elimination use constant folding eliminate unreachable code number of stress runs when picking a function to watch for shared function not JSFunction itself flushes the cache of optimized code for closures on every GC functions with arguments object maximum number of escape analysis fix point iterations allow uint32 values on optimize frames if they are used only in safe operations track concurrent recompilation artificial compilation delay in ms concurrent on stack replacement do not emit check maps for constant values that have a leaf deoptimize the optimized code if the layout of the maps changes number of stack frames inspected by the profiler percentage of ICs that must have type info to allow optimization extra verbose compilation tracing generate extra emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of VFP3 instructions if available enable use of NEON instructions if enable use of SDIV and UDIV instructions if enable loading bit constant by means of movw movt instruction enable unaligned accesses for enable use of d16 d31 registers on ARM this requires VFP3 force all emitted branches to be in long mode(MIPS only)&quot;)  DEFINE_string(expose_natives_as</div></div>
<div class="ttc" id="cpu-profiler_8h_html"><div class="ttname"><a href="../../d7/d16/cpu-profiler_8h.html">cpu-profiler.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a433bbae437dfea4f24022a44f95ed5bf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a433bbae437dfea4f24022a44f95ed5bf">v8::internal::no_reg</a></div><div class="ttdeci">const Register no_reg</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00223">assembler-arm.h:223</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#acd654d770cae6efae84510b1cb25ca9fa5c01a06abdcdfc2491820465f6f76da1">v8::internal::times_pointer_size</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00382">assembler-ia32.h:382</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017aedc6877512bc380ec585c711582b57c5">v8::internal::FAST_SMI_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00039">elements-kind.h:39</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a26a3c838a68914ec347efcc032d6767d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a26a3c838a68914ec347efcc032d6767d">v8::internal::kSmiConstantRegister</a></div><div class="ttdeci">const Register kSmiConstantRegister</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d13/macro-assembler-x64_8h_source.html#l00042">macro-assembler-x64.h:42</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a1815ffb4acdea32cd53364e4988aa893"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a1815ffb4acdea32cd53364e4988aa893">v8::internal::kPCOnStackSize</a></div><div class="ttdeci">const int kPCOnStackSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00270">globals.h:270</a></div></div>
<div class="ttc" id="checks_8h_html_a5842480f337ef2ee4c17fc82cc4b57cd"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a5842480f337ef2ee4c17fc82cc4b57cd">STATIC_ASSERT</a></div><div class="ttdeci">#define STATIC_ASSERT(test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00341">checks.h:341</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afc9ad27cbfae62f4c3754369a86f6c36"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afc9ad27cbfae62f4c3754369a86f6c36">v8::internal::kInt32Size</a></div><div class="ttdeci">const int kInt32Size</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00264">globals.h:264</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab03f862a07af30b4e1f1a3552f3a9017a6c3451be7265aec5faee370c7d0acbf6">v8::internal::FAST_HOLEY_ELEMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de3/elements-kind_8h_source.html#l00046">elements-kind.h:46</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a2d5a0f84387e38e44f9a7663b66eddb3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a2d5a0f84387e38e44f9a7663b66eddb3">v8::internal::greater_equal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00290">assembler-ia32.h:290</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0e008753fb0a146213a1b3822fae9031ae4cd2ed8d191fa90f635296dc4c4ffce">v8::internal::kSeqStringTag</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00617">objects.h:617</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a32df3bb76b662e0f3613654187f72aa4"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a32df3bb76b662e0f3613654187f72aa4">v8::internal::SmiCheck</a></div><div class="ttdeci">SmiCheck</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/macro-assembler-arm_8h_source.html#l00062">macro-assembler-arm.h:62</a></div></div>
<div class="ttc" id="assembler-ia32_8h_html_a1bf5e87108198cd7f485a0731a019034"><div class="ttname"><a href="../../d1/d0a/assembler-ia32_8h.html#a1bf5e87108198cd7f485a0731a019034">xmm0</a></div><div class="ttdeci">#define xmm0</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00223">assembler-ia32.h:223</a></div></div>
<div class="ttc" id="assembler-x64_8h_html"><div class="ttname"><a href="../../dd/da7/assembler-x64_8h.html">assembler-x64.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_aec94f7c51d675bb64581e4560ee0e251a68f546db1d78edd21e128b742d2403dc"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#aec94f7c51d675bb64581e4560ee0e251a68f546db1d78edd21e128b742d2403dc">v8::internal::DONT_DO_SMI_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00438">v8globals.h:438</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab81d3518ce57dd364c1d60e0045d4a92"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab81d3518ce57dd364c1d60e0045d4a92">v8::internal::kCharSize</a></div><div class="ttdeci">const int kCharSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00261">globals.h:261</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3d1ba31d193200ef0ab5c1f92bae2d86"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3d1ba31d193200ef0ab5c1f92bae2d86">v8::internal::r15</a></div><div class="ttdeci">const Register r15</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da7/assembler-x64_8h_source.html#l00179">assembler-x64.h:179</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac57fa5262e1db217c8cea56790076f27ad939c92fc47b6c3f29db6cfbc8569cbf"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac57fa5262e1db217c8cea56790076f27ad939c92fc47b6c3f29db6cfbc8569cbf">v8::internal::FIRST_NONSTRING_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00821">objects.h:821</a></div></div>
<div class="ttc" id="macro-assembler-x64_8h_html"><div class="ttname"><a href="../../d1/d13/macro-assembler-x64_8h.html">macro-assembler-x64.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ac5ad29149b1cedc93909ab1642e66a84"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ac5ad29149b1cedc93909ab1642e66a84">v8::internal::kStringEncodingMask</a></div><div class="ttdeci">const uint32_t kStringEncodingMask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00609">objects.h:609</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a2243fa97f60bc06fa9f2f150870fc2b3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a2243fa97f60bc06fa9f2f150870fc2b3">v8::internal::AreAliased</a></div><div class="ttdeci">bool AreAliased(const CPURegister &amp;reg1, const CPURegister &amp;reg2, const CPURegister &amp;reg3=NoReg, const CPURegister &amp;reg4=NoReg, const CPURegister &amp;reg5=NoReg, const CPURegister &amp;reg6=NoReg, const CPURegister &amp;reg7=NoReg, const CPURegister &amp;reg8=NoReg)</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a754b1f214379cc086e644b1d002b0ea1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a754b1f214379cc086e644b1d002b0ea1">v8::internal::r4</a></div><div class="ttdeci">const Register r4</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00229">assembler-arm.h:229</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_3aec98192bf1179f5a0cb056cdd4aba6.html">x64</a></li><li class="navelem"><a class="el" href="../../d5/df8/macro-assembler-x64_8cc.html">macro-assembler-x64.cc</a></li>
    <li class="footer">Generated on Sat Jun 7 2014 23:54:36 for v8 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
