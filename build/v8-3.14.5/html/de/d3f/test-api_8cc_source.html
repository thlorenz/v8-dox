<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>v8: test/cctest/test-api.cc Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../v8-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">v8
   &#160;<span id="projectnumber">3.14.5(node0.10.28)</span>
   </div>
   <div id="projectbrief">V8 is Google&#39;s open source JavaScript engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d3f/test-api_8cc_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">test-api.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../de/d3f/test-api_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// modification, are permitted provided that the following conditions are</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// met:</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//     * Redistributions in binary form must reproduce the above</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//       copyright notice, this list of conditions and the following</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//       disclaimer in the documentation and/or other materials provided</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//       with the distribution.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//     * Neither the name of Google Inc. nor the names of its</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//       contributors may be used to endorse or promote products derived</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//       from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#ifndef WIN32</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span>  <span class="comment">// kill</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span>  <span class="comment">// getpid</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif  // WIN32</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;v8.h&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d65/api_8h.html">api.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d1e/isolate_8h.html">isolate.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dea/compilation-cache_8h.html">compilation-cache.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d01/execution_8h.html">execution.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d91/objects_8h.html">objects.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc8/snapshot_8h.html">snapshot.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d03/platform_8h.html">platform.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d60/utils_8h.html">utils.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d84/cctest_8h.html">cctest.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d36/parser_8h.html">parser.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d37/unicode-inl_8h.html">unicode-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> kLogThreading = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> IsNaN(<span class="keywordtype">double</span> x) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">return</span> _isnan(x);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d7/d6a/win32-math_8h.html#afdf433fdb158cbe82ce818a3a2de736b">isnan</a>(x);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;using ::v8::AccessorInfo;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;using ::v8::Arguments;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;using ::v8::Context;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;using ::v8::Extension;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;using ::v8::Function;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;using ::v8::FunctionTemplate;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;using ::v8::Handle;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;using ::v8::HandleScope;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;using ::v8::Local;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;using ::v8::Message;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="../../d2/dc3/namespacev8.html#a93b6eadc434acc3fd8c23b3bfdffce04">using ::v8::MessageCallback</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">using ::v8::Object</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;using ::v8::ObjectTemplate;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;using ::v8::Persistent;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;using ::v8::Script;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;using ::v8::StackTrace;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;using ::v8::String;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;using ::v8::TryCatch;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">using ::v8::Undefined</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;using ::v8::V8;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;using ::v8::Value;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExpectString(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a965cf977d6cc4ab38c7b55d51e38652a">code</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* expected) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  Local&lt;Value&gt; result = CompileRun(code);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsString());</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  String::AsciiValue ascii(result);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected, *ascii);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExpectInt32(<span class="keyword">const</span> <span class="keywordtype">char</span>* code, <span class="keywordtype">int</span> expected) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  Local&lt;Value&gt; result = CompileRun(code);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsInt32());</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected, result-&gt;Int32Value());</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExpectBoolean(<span class="keyword">const</span> <span class="keywordtype">char</span>* code, <span class="keywordtype">bool</span> expected) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  Local&lt;Value&gt; result = CompileRun(code);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsBoolean());</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected, result-&gt;BooleanValue());</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExpectTrue(<span class="keyword">const</span> <span class="keywordtype">char</span>* code) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  ExpectBoolean(code, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExpectFalse(<span class="keyword">const</span> <span class="keywordtype">char</span>* code) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  ExpectBoolean(code, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExpectObject(<span class="keyword">const</span> <span class="keywordtype">char</span>* code, Local&lt;Value&gt; expected) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  Local&lt;Value&gt; result = CompileRun(code);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;Equals(expected));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExpectUndefined(<span class="keyword">const</span> <span class="keywordtype">char</span>* code) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  Local&lt;Value&gt; result = CompileRun(code);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsUndefined());</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> signature_callback_count;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> IncrementingSignatureCallback(</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  signature_callback_count++;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>());</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>(); i++)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(i), args[i]);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> SignatureCallback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>());</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>(); i++) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(i), args[i]);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">  146</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Handles) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  Local&lt;Context&gt; local_env;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    local_env = env.<a class="code" href="../../d7/d05/class_local_context.html#ab6e5e298162f2ddabba6d697ac27f6c2">local</a>();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// Local context should still be live.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!local_env.IsEmpty());</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  local_env-&gt;Enter();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Primitive&gt;</a> undef = <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!undef.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(undef-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a2858c3ff89ed8f4b756b94cbebcfe42f">IsUndefined</a>());</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source = <span class="stringliteral">&quot;1 + 2 + 3&quot;</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  Local&lt;String&gt; source = String::New(c_source);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  local_env-&gt;Exit();</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a92dbb5111ac4889e5169e1d5d85608ac">  171</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ReceiverSignature) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Signature&gt;</a> sig = <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  fun-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>()-&gt;Set(</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      v8_str(<span class="stringliteral">&quot;m&quot;</span>),</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(IncrementingSignatureCallback,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(),</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                sig));</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Fun&quot;</span>), fun-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  signature_callback_count = 0;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  CompileRun(</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="stringliteral">&quot;var o = new Fun();&quot;</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="stringliteral">&quot;o.m();&quot;</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, signature_callback_count);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> sub_fun = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  sub_fun-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#ab69cbe6331de0f54a4761f7a3c70db6a">Inherit</a>(fun);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;SubFun&quot;</span>), sub_fun-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  CompileRun(</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="stringliteral">&quot;var o = new SubFun();&quot;</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="stringliteral">&quot;o.m();&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, signature_callback_count);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  CompileRun(</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="stringliteral">&quot;var o = { };&quot;</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="stringliteral">&quot;o.m = Fun.prototype.m;&quot;</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="stringliteral">&quot;o.m();&quot;</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, signature_callback_count);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> unrel_fun = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  sub_fun-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#ab69cbe6331de0f54a4761f7a3c70db6a">Inherit</a>(fun);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;UnrelFun&quot;</span>), unrel_fun-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  CompileRun(</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="stringliteral">&quot;var o = new UnrelFun();&quot;</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="stringliteral">&quot;o.m = Fun.prototype.m;&quot;</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="stringliteral">&quot;o.m();&quot;</span>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, signature_callback_count);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7189f8b91300064fd191fde637c6b68b">  215</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ArgumentSignature) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> cons = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  cons-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a717f7933a379f1bf025af39545aef68e">SetClassName</a>(v8_str(<span class="stringliteral">&quot;Cons&quot;</span>));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Signature&gt;</a> sig =</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a>(), 1, &amp;cons);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun =</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(SignatureCallback, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(), sig);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Cons&quot;</span>), cons-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Fun1&quot;</span>), fun-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value1 = CompileRun(<span class="stringliteral">&quot;Fun1(4) == &#39;&#39;;&quot;</span>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value1-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3d46ba6a258e0029819606fe47d50c24">IsTrue</a>());</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value2 = CompileRun(<span class="stringliteral">&quot;Fun1(new Cons()) == &#39;[object Cons]&#39;;&quot;</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value2-&gt;IsTrue());</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value3 = CompileRun(<span class="stringliteral">&quot;Fun1() == &#39;&#39;;&quot;</span>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value3-&gt;IsTrue());</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> cons1 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  cons1-&gt;SetClassName(v8_str(<span class="stringliteral">&quot;Cons1&quot;</span>));</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> cons2 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  cons2-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a717f7933a379f1bf025af39545aef68e">SetClassName</a>(v8_str(<span class="stringliteral">&quot;Cons2&quot;</span>));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> cons3 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  cons3-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a717f7933a379f1bf025af39545aef68e">SetClassName</a>(v8_str(<span class="stringliteral">&quot;Cons3&quot;</span>));</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> args[3] = { cons1, cons2, cons3 };</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Signature&gt;</a> wsig =</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a>(), 3, args);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun2 =</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(SignatureCallback, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(), wsig);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Cons1&quot;</span>), cons1-&gt;GetFunction());</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Cons2&quot;</span>), cons2-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Cons3&quot;</span>), cons3-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Fun2&quot;</span>), fun2-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value4 = CompileRun(</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="stringliteral">&quot;Fun2(new Cons1(), new Cons2(), new Cons3()) ==&quot;</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="stringliteral">&quot;&#39;[object Cons1],[object Cons2],[object Cons3]&#39;&quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value4-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3d46ba6a258e0029819606fe47d50c24">IsTrue</a>());</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value5 = CompileRun(</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="stringliteral">&quot;Fun2(new Cons1(), new Cons2(), 5) == &#39;[object Cons1],[object Cons2],&#39;&quot;</span>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value5-&gt;IsTrue());</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value6 = CompileRun(</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="stringliteral">&quot;Fun2(new Cons3(), new Cons2(), new Cons1()) == &#39;,[object Cons2],&#39;&quot;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value6-&gt;IsTrue());</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value7 = CompileRun(</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="stringliteral">&quot;Fun2(new Cons1(), new Cons2(), new Cons3(), &#39;d&#39;) == &quot;</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="stringliteral">&quot;&#39;[object Cons1],[object Cons2],[object Cons3],d&#39;;&quot;</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value7-&gt;IsTrue());</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value8 = CompileRun(</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="stringliteral">&quot;Fun2(new Cons1(), new Cons2()) == &#39;[object Cons1],[object Cons2]&#39;&quot;</span>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value8-&gt;IsTrue());</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af82846ca2f39e973e63c3d6e3ef3dfc3">  277</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(HulIgennem) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Primitive&gt;</a> undef = <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  Local&lt;String&gt; undef_str = undef-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a91b68fb0b5558f1c9539015c1bbf7af2">ToString</a>();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordtype">char</span>* value = i::NewArray&lt;char&gt;(undef_str-&gt;Length() + 1);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  undef_str-&gt;WriteAscii(value);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(value, <span class="stringliteral">&quot;undefined&quot;</span>));</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(value);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a18fc3ce27c831fa711911f0bd6258bb9">  289</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Access) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  Local&lt;v8::Object&gt; obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  Local&lt;Value&gt; foo_before = obj-&gt;Get(v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(foo_before-&gt;IsUndefined());</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  Local&lt;String&gt; bar_str = v8_str(<span class="stringliteral">&quot;bar&quot;</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  obj-&gt;Set(v8_str(<span class="stringliteral">&quot;foo&quot;</span>), bar_str);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  Local&lt;Value&gt; foo_after = obj-&gt;Get(v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!foo_after-&gt;IsUndefined());</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(foo_after-&gt;IsString());</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(bar_str, foo_after);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a461d053cc65485f2586eecb221fbf8bf">  304</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AccessElement) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  Local&lt;v8::Object&gt; obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  Local&lt;Value&gt; before = obj-&gt;Get(1);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(before-&gt;IsUndefined());</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  Local&lt;String&gt; bar_str = v8_str(<span class="stringliteral">&quot;bar&quot;</span>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  obj-&gt;Set(1, bar_str);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  Local&lt;Value&gt; after = obj-&gt;Get(1);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!after-&gt;IsUndefined());</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(after-&gt;IsString());</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(bar_str, after);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  Local&lt;v8::Array&gt; value = CompileRun(<span class="stringliteral">&quot;[\&quot;a\&quot;, \&quot;b\&quot;]&quot;</span>).As&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;a&quot;</span>), value-&gt;Get(0));</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;b&quot;</span>), value-&gt;Get(1));</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4bfec276b1af63bf1a013d9164bda8f5">  323</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Script) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source = <span class="stringliteral">&quot;1 + 2 + 3&quot;</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  Local&lt;String&gt; source = String::New(c_source);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* AsciiToTwoByteString(<span class="keyword">const</span> <span class="keywordtype">char</span>* source) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">int</span> array_length = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(source) + 1;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* converted = i::NewArray&lt;uint16_t&gt;(array_length);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; array_length; i++) converted[i] = source[i];</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">return</span> converted;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="../../d6/d3d/class_test_resource.html">  341</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>: <span class="keyword">public</span> String::ExternalStringResource {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="../../d6/d3d/class_test_resource.html#a9b0e5954743e3e11eacf0b9a27fda1d1">  343</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d6/d3d/class_test_resource.html#a9b0e5954743e3e11eacf0b9a27fda1d1">TestResource</a>(<a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* <a class="code" href="../../d6/d3d/class_test_resource.html#ae66483e9c17fc53f1c24f5491b41a43b">data</a>, <span class="keywordtype">int</span>* counter = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    : data_(data), length_(0), counter_(counter) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">while</span> (data[length_]) ++length_;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="../../d6/d3d/class_test_resource.html#a1415d0c54e6b0b70f31880b81117f1ba">  348</a></span>&#160;  <a class="code" href="../../d6/d3d/class_test_resource.html#a1415d0c54e6b0b70f31880b81117f1ba">~TestResource</a>() {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(data_);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (counter_ != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) ++*counter_;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="../../d6/d3d/class_test_resource.html#ae66483e9c17fc53f1c24f5491b41a43b">  353</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* <a class="code" href="../../d6/d3d/class_test_resource.html#ae66483e9c17fc53f1c24f5491b41a43b">data</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">return</span> data_;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="../../d6/d3d/class_test_resource.html#a2edf269e5cd490f7863c9150bb910c85">  357</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="../../d6/d3d/class_test_resource.html#a2edf269e5cd490f7863c9150bb910c85">length</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> length_;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* data_;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordtype">size_t</span> length_;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordtype">int</span>* counter_;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;};</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="../../d3/d8e/class_test_ascii_resource.html">  367</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>: <span class="keyword">public</span> String::ExternalAsciiStringResource {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="../../d3/d8e/class_test_ascii_resource.html#ad30e49052203dc0c5afce35f274f6b18">  369</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html#ad30e49052203dc0c5afce35f274f6b18">TestAsciiResource</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d3/d8e/class_test_ascii_resource.html#a4b4ab281aadd31f29f7aba1f2796aaa5">data</a>, <span class="keywordtype">int</span>* counter = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    : data_(data), length_(strlen(data)), counter_(counter) { }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="../../d3/d8e/class_test_ascii_resource.html#acd27c20a6fd9f6b84986db858fc2f94a">  372</a></span>&#160;  <a class="code" href="../../d3/d8e/class_test_ascii_resource.html#acd27c20a6fd9f6b84986db858fc2f94a">~TestAsciiResource</a>() {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(data_);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (counter_ != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) ++*counter_;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="../../d3/d8e/class_test_ascii_resource.html#a4b4ab281aadd31f29f7aba1f2796aaa5">  377</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d3/d8e/class_test_ascii_resource.html#a4b4ab281aadd31f29f7aba1f2796aaa5">data</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> data_;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="../../d3/d8e/class_test_ascii_resource.html#a2edf269e5cd490f7863c9150bb910c85">  381</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html#a2edf269e5cd490f7863c9150bb910c85">length</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">return</span> length_;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* data_;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordtype">size_t</span> length_;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordtype">int</span>* counter_;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;};</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a701420456d433eacc9d85dccd682e9b5">  391</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptUsingStringResource) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordtype">int</span> dispose_count = 0;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source = <span class="stringliteral">&quot;1 + 2 * 3&quot;</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_source = AsciiToTwoByteString(c_source);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>* resource = <span class="keyword">new</span> <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>(two_byte_source, &amp;dispose_count);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    Local&lt;String&gt; source = String::NewExternal(resource);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    Local&lt;Value&gt; value = script-&gt;Run();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, value-&gt;Int32Value());</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(source-&gt;IsExternal());</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(resource,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;             static_cast&lt;TestResource*&gt;(source-&gt;GetExternalStringResource()));</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    String::Encoding encoding = String::UNKNOWN_ENCODING;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;const String::ExternalStringResourceBase*&gt;(resource),</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;             source-&gt;GetExternalStringResourceBase(&amp;encoding));</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(String::TWO_BYTE_ENCODING, encoding);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, dispose_count);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  v8::internal::Isolate::Current()-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllAvailableGarbage();</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, dispose_count);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a403df42ab6d60ca92e76bb8c469c6bc2">  420</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptUsingAsciiStringResource) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordtype">int</span> dispose_count = 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source = <span class="stringliteral">&quot;1 + 2 * 3&quot;</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>* resource = <span class="keyword">new</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">i::StrDup</a>(c_source),</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                                                        &amp;dispose_count);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    Local&lt;String&gt; source = String::NewExternal(resource);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(source-&gt;IsExternalAscii());</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;const String::ExternalStringResourceBase*&gt;(resource),</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;             source-&gt;GetExternalAsciiStringResource());</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    String::Encoding encoding = String::UNKNOWN_ENCODING;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;const String::ExternalStringResourceBase*&gt;(resource),</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;             source-&gt;GetExternalStringResourceBase(&amp;encoding));</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(String::ASCII_ENCODING, encoding);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    Local&lt;Value&gt; value = script-&gt;Run();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, value-&gt;Int32Value());</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, dispose_count);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  i::Isolate::Current()-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllAvailableGarbage();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, dispose_count);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aeca6f03b9f944e75122d65c8959e3958">  449</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptMakingExternalString) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordtype">int</span> dispose_count = 0;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_source = AsciiToTwoByteString(<span class="stringliteral">&quot;1 + 2 * 3&quot;</span>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    Local&lt;String&gt; source = String::New(two_byte_source);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// Trigger GCs so that the newly allocated string moves to old gen.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in survivor space now</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in old gen now</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(source-&gt;IsExternal(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(source-&gt;IsExternalAscii(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    String::Encoding encoding = String::UNKNOWN_ENCODING;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, source-&gt;GetExternalStringResourceBase(&amp;encoding));</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(String::ASCII_ENCODING, encoding);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordtype">bool</span> success = source-&gt;MakeExternal(<span class="keyword">new</span> <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>(two_byte_source,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                                         &amp;dispose_count));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(success);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    Local&lt;Value&gt; value = script-&gt;Run();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, value-&gt;Int32Value());</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, dispose_count);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  i::Isolate::Current()-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, dispose_count);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a89cee2158cabc0a883532b971b105030">  480</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptMakingExternalAsciiString) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordtype">int</span> dispose_count = 0;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source = <span class="stringliteral">&quot;1 + 2 * 3&quot;</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    Local&lt;String&gt; source = v8_str(c_source);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// Trigger GCs so that the newly allocated string moves to old gen.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in survivor space now</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in old gen now</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordtype">bool</span> success = source-&gt;MakeExternal(</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keyword">new</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">i::StrDup</a>(c_source), &amp;dispose_count));</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(success);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    Local&lt;Value&gt; value = script-&gt;Run();</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, value-&gt;Int32Value());</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, dispose_count);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  i::Isolate::Current()-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, dispose_count);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">  506</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(MakingExternalStringConditions) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// Free some space in the new space so that we can check freshness.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_string = AsciiToTwoByteString(<span class="stringliteral">&quot;s1&quot;</span>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  Local&lt;String&gt; small_string = String::New(two_byte_string);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(two_byte_string);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// We should refuse to externalize newly created small string.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!small_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// Trigger GCs so that the newly allocated string moves to old gen.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in survivor space now</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in old gen now</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// Old space strings should be accepted.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(small_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  two_byte_string = AsciiToTwoByteString(<span class="stringliteral">&quot;small string 2&quot;</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  small_string = String::New(two_byte_string);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(two_byte_string);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// We should refuse externalizing newly created small string.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!small_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    String::Value value(small_string);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// Frequently used strings should be accepted.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(small_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> buf_size = 10 * 1024;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordtype">char</span>* buf = i::NewArray&lt;char&gt;(buf_size);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  memset(buf, <span class="charliteral">&#39;a&#39;</span>, buf_size);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  buf[buf_size - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  two_byte_string = AsciiToTwoByteString(buf);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  Local&lt;String&gt; large_string = String::New(two_byte_string);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(buf);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(two_byte_string);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// Large strings should be immediately accepted.</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(large_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af99c2faa538a3ae7a9bb178caa1ea708">  552</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(MakingExternalAsciiStringConditions) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="comment">// Free some space in the new space so that we can check freshness.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  Local&lt;String&gt; small_string = String::New(<span class="stringliteral">&quot;s1&quot;</span>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// We should refuse to externalize newly created small string.</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!small_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// Trigger GCs so that the newly allocated string moves to old gen.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in survivor space now</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in old gen now</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// Old space strings should be accepted.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(small_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  small_string = String::New(<span class="stringliteral">&quot;small string 2&quot;</span>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// We should refuse externalizing newly created small string.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!small_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    String::Value value(small_string);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// Frequently used strings should be accepted.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(small_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> buf_size = 10 * 1024;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordtype">char</span>* buf = i::NewArray&lt;char&gt;(buf_size);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  memset(buf, <span class="charliteral">&#39;a&#39;</span>, buf_size);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  buf[buf_size - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  Local&lt;String&gt; large_string = String::New(buf);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(buf);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// Large strings should be immediately accepted.</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(large_string-&gt;CanMakeExternal());</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a158a4a65f14dbf358e213c86fbad897c">  589</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(UsingExternalString) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_string = AsciiToTwoByteString(<span class="stringliteral">&quot;test string&quot;</span>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    Local&lt;String&gt; <span class="keywordtype">string</span> =</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        String::NewExternal(<span class="keyword">new</span> <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>(two_byte_string));</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> istring = v8::Utils::OpenHandle(*<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// Trigger GCs so that the newly allocated string moves to old gen.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in survivor space now</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in old gen now</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> isymbol = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;SymbolFromString(istring);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isymbol-&gt;IsSymbol());</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#affb2003e1d07024b13210962df090461">  607</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(UsingExternalAsciiString) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* one_byte_string = <span class="stringliteral">&quot;test string&quot;</span>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    Local&lt;String&gt; <span class="keywordtype">string</span> = String::NewExternal(</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keyword">new</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">i::StrDup</a>(one_byte_string)));</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> istring = v8::Utils::OpenHandle(*<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// Trigger GCs so that the newly allocated string moves to old gen.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in survivor space now</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);  <span class="comment">// in old gen now</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> isymbol = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;SymbolFromString(istring);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isymbol-&gt;IsSymbol());</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a043eed1153169f7a0babcc67630c3e4d">  625</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScavengeExternalString) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordtype">int</span> dispose_count = 0;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordtype">bool</span> in_new_space = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_string = AsciiToTwoByteString(<span class="stringliteral">&quot;test string&quot;</span>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    Local&lt;String&gt; <span class="keywordtype">string</span> =</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      String::NewExternal(<span class="keyword">new</span> <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>(two_byte_string,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                           &amp;dispose_count));</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> istring = v8::Utils::OpenHandle(*<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    in_new_space = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;InNewSpace(*istring);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(in_new_space || <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;old_data_space()-&gt;Contains(*istring));</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, dispose_count);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(in_new_space ? <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a> : <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a801401fbd4894dd3bf8163a4403b9fe7">i::OLD_DATA_SPACE</a>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, dispose_count);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af4228f34fee789128e4a59801145bf38">  645</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScavengeExternalAsciiString) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordtype">int</span> dispose_count = 0;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordtype">bool</span> in_new_space = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* one_byte_string = <span class="stringliteral">&quot;test string&quot;</span>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    Local&lt;String&gt; <span class="keywordtype">string</span> = String::NewExternal(</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keyword">new</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">i::StrDup</a>(one_byte_string), &amp;dispose_count));</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> istring = v8::Utils::OpenHandle(*<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a>);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    in_new_space = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;InNewSpace(*istring);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(in_new_space || <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;old_data_space()-&gt;Contains(*istring));</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, dispose_count);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectGarbage(in_new_space ? <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">i::NEW_SPACE</a> : <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a801401fbd4894dd3bf8163a4403b9fe7">i::OLD_DATA_SPACE</a>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, dispose_count);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html">  664</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html">TestAsciiResourceWithDisposeControl</a>: <span class="keyword">public</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a> {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// Only used by non-threaded tests, so it can use static fields.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a45ff1f29c40c3c208b8dfca0e2d2369c">  667</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a45ff1f29c40c3c208b8dfca0e2d2369c">dispose_calls</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a98ad23e8d7bd019e92ad5f18240c3168">  668</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a98ad23e8d7bd019e92ad5f18240c3168">dispose_count</a>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#aea89afb6498296ae8bd87a32ff2b1a41">  670</a></span>&#160;  <a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#aea89afb6498296ae8bd87a32ff2b1a41">TestAsciiResourceWithDisposeControl</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d3/d8e/class_test_ascii_resource.html#a4b4ab281aadd31f29f7aba1f2796aaa5">data</a>, <span class="keywordtype">bool</span> dispose)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      : <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>(data, &amp;<a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a98ad23e8d7bd019e92ad5f18240c3168">dispose_count</a>),</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        dispose_(dispose) { }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a6e2d745cdb7a7b983f861ed6a9a541a7">  674</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>() {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    ++<a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a45ff1f29c40c3c208b8dfca0e2d2369c">dispose_calls</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">if</span> (dispose_) <span class="keyword">delete</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keywordtype">bool</span> dispose_;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;};</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a98ad23e8d7bd019e92ad5f18240c3168">TestAsciiResourceWithDisposeControl::dispose_count</a> = 0;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a45ff1f29c40c3c208b8dfca0e2d2369c">TestAsciiResourceWithDisposeControl::dispose_calls</a> = 0;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div>
<div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab1ff20209eada537ce85a1f130f64cfb">  687</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ExternalStringWithDisposeHandling) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source = <span class="stringliteral">&quot;1 + 2 * 3&quot;</span>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">// Use a stack allocated external string resource allocated object.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  TestAsciiResourceWithDisposeControl::dispose_count = 0;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  TestAsciiResourceWithDisposeControl::dispose_calls = 0;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html">TestAsciiResourceWithDisposeControl</a> res_stack(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">i::StrDup</a>(c_source), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    Local&lt;String&gt; source =  String::NewExternal(&amp;res_stack);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    Local&lt;Value&gt; value = script-&gt;Run();</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, value-&gt;Int32Value());</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllAvailableGarbage();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, TestAsciiResourceWithDisposeControl::dispose_count);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  i::Isolate::Current()-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllAvailableGarbage();</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, TestAsciiResourceWithDisposeControl::dispose_calls);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, TestAsciiResourceWithDisposeControl::dispose_count);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">// Use a heap allocated external string resource allocated object.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  TestAsciiResourceWithDisposeControl::dispose_count = 0;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  TestAsciiResourceWithDisposeControl::dispose_calls = 0;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>* res_heap =</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keyword">new</span> <a class="code" href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html">TestAsciiResourceWithDisposeControl</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">i::StrDup</a>(c_source), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    Local&lt;String&gt; source =  String::NewExternal(res_heap);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    Local&lt;Value&gt; value = script-&gt;Run();</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, value-&gt;Int32Value());</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllAvailableGarbage();</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, TestAsciiResourceWithDisposeControl::dispose_count);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  i::Isolate::Current()-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllAvailableGarbage();</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, TestAsciiResourceWithDisposeControl::dispose_calls);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, TestAsciiResourceWithDisposeControl::dispose_count);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div>
<div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac7614f40d35f4d52b2babcd4bb0de1c4">  733</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(StringConcat) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* one_byte_string_1 = <span class="stringliteral">&quot;function a_times_t&quot;</span>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* two_byte_string_1 = <span class="stringliteral">&quot;wo_plus_b(a, b) {return &quot;</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* one_byte_extern_1 = <span class="stringliteral">&quot;a * 2 + b;} a_times_two_plus_b(4, 8) + &quot;</span>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* two_byte_extern_1 = <span class="stringliteral">&quot;a_times_two_plus_b(4, 8) + &quot;</span>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* one_byte_string_2 = <span class="stringliteral">&quot;a_times_two_plus_b(4, 8) + &quot;</span>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* two_byte_string_2 = <span class="stringliteral">&quot;a_times_two_plus_b(4, 8) + &quot;</span>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* two_byte_extern_2 = <span class="stringliteral">&quot;a_times_two_plus_b(1, 2);&quot;</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    Local&lt;String&gt; left = v8_str(one_byte_string_1);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_source = AsciiToTwoByteString(two_byte_string_1);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    Local&lt;String&gt; right = String::New(two_byte_source);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(two_byte_source);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    Local&lt;String&gt; source = String::Concat(left, right);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    right = String::NewExternal(</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keyword">new</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">i::StrDup</a>(one_byte_extern_1)));</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    source = String::Concat(source, right);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    right = String::NewExternal(</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keyword">new</span> <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>(AsciiToTwoByteString(two_byte_extern_1)));</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    source = String::Concat(source, right);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    right = v8_str(one_byte_string_2);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    source = String::Concat(source, right);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    two_byte_source = AsciiToTwoByteString(two_byte_string_2);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    right = String::New(two_byte_source);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(two_byte_source);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    source = String::Concat(source, right);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    right = String::NewExternal(</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keyword">new</span> <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>(AsciiToTwoByteString(two_byte_extern_2)));</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    source = String::Concat(source, right);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    Local&lt;Value&gt; value = script-&gt;Run();</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(68, value-&gt;Int32Value());</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  i::Isolate::Current()-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;}</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2baedd129fc864d2747c12316921ee93">  779</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GlobalProperties) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;pi&quot;</span>), v8_num(3.1415926));</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  Local&lt;Value&gt; pi = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;pi&quot;</span>));</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3.1415926, pi-&gt;NumberValue());</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;}</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> handle_call(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">return</span> v8_num(102);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;}</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> construct_call(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), v8_num(1));</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;y&quot;</span>), v8_num(2));</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">return</span> args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> Return239(Local&lt;String&gt; name, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">return</span> v8_num(239);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;}</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div>
<div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a00d5fe46a7da9a64cd471802759f2069">  808</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionTemplate) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    Local&lt;v8::FunctionTemplate&gt; fun_templ =</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(handle_call);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), fun);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    Local&lt;Script&gt; script = v8_compile(<span class="stringliteral">&quot;obj()&quot;</span>);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(102, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">// Use SetCallHandler to initialize a function template, should work like the</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// previous one.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    Local&lt;v8::FunctionTemplate&gt; fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    fun_templ-&gt;SetCallHandler(handle_call);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), fun);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    Local&lt;Script&gt; script = v8_compile(<span class="stringliteral">&quot;obj()&quot;</span>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(102, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">// Test constructor calls.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    Local&lt;v8::FunctionTemplate&gt; fun_templ =</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(construct_call);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    fun_templ-&gt;SetClassName(v8_str(<span class="stringliteral">&quot;funky&quot;</span>));</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    fun_templ-&gt;InstanceTemplate()-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;m&quot;</span>), Return239);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), fun);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    Local&lt;Script&gt; script = v8_compile(<span class="stringliteral">&quot;var s = new obj(); s.x&quot;</span>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    Local&lt;Value&gt; result = v8_compile(<span class="stringliteral">&quot;(new obj()).toString()&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;[object funky]&quot;</span>), result);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    result = v8_compile(<span class="stringliteral">&quot;(new obj()).m&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239, result-&gt;Int32Value());</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span>* expected_ptr;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> callback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordtype">void</span>* ptr = <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a1ce111e30d6e5e8be601b45725d9142d">Data</a>());</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected_ptr, ptr);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> TestExternalPointerWrapping() {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> data = <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(expected_ptr);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;func&quot;</span>),</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;           <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(callback, data)-&gt;GetFunction());</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="stringliteral">&quot;function foo() {\n&quot;</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="stringliteral">&quot;  for (var i = 0; i &lt; 13; i++) obj.func();\n&quot;</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="stringliteral">&quot;foo(), true&quot;</span>)-&gt;BooleanValue());</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7c18fdb0831c7de32e0d7008876b7d05">  876</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalWrap) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">// Check heap allocated object.</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordtype">int</span>* ptr = <span class="keyword">new</span> int;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  expected_ptr = ptr;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  TestExternalPointerWrapping();</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keyword">delete</span> ptr;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// Check stack allocated object.</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  expected_ptr = &amp;<a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  TestExternalPointerWrapping();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// Check not aligned addresses.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> n = 100;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordtype">char</span>* s = <span class="keyword">new</span> <span class="keywordtype">char</span>[n];</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    expected_ptr = s + i;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    TestExternalPointerWrapping();</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  }</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keyword">delete</span>[] s;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">// Check several invalid addresses.</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  expected_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(1);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  TestExternalPointerWrapping();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  expected_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(0xdeadbeef);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  TestExternalPointerWrapping();</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  expected_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(0xdeadbeef + 1);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  TestExternalPointerWrapping();</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">#if defined(V8_HOST_ARCH_X64)</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// Check a value with a leading 1 bit in x64 Smi encoding.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  expected_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(0x400000000);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  TestExternalPointerWrapping();</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  expected_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(0xdeadbeefdeadbeef);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  TestExternalPointerWrapping();</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  expected_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(0xdeadbeefdeadbeef + 1);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  TestExternalPointerWrapping();</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;}</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0b6ff25d5224bc822b18f83e12600585">  922</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FindInstanceInPrototypeChain) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  Local&lt;v8::FunctionTemplate&gt; base = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  Local&lt;v8::FunctionTemplate&gt; derived = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  Local&lt;v8::FunctionTemplate&gt; other = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  derived-&gt;Inherit(base);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  Local&lt;v8::Function&gt; base_function = base-&gt;GetFunction();</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  Local&lt;v8::Function&gt; derived_function = derived-&gt;GetFunction();</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  Local&lt;v8::Function&gt; other_function = other-&gt;GetFunction();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  Local&lt;v8::Object&gt; base_instance = base_function-&gt;NewInstance();</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  Local&lt;v8::Object&gt; derived_instance = derived_function-&gt;NewInstance();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  Local&lt;v8::Object&gt; derived_instance2 = derived_function-&gt;NewInstance();</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  Local&lt;v8::Object&gt; other_instance = other_function-&gt;NewInstance();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  derived_instance2-&gt;Set(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), derived_instance);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  other_instance-&gt;Set(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), derived_instance2);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="comment">// base_instance is only an instance of base.</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(base_instance,</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;           base_instance-&gt;FindInstanceInPrototypeChain(base));</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(base_instance-&gt;FindInstanceInPrototypeChain(derived).IsEmpty());</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(base_instance-&gt;FindInstanceInPrototypeChain(other).IsEmpty());</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="comment">// derived_instance is an instance of base and derived.</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(derived_instance,</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;           derived_instance-&gt;FindInstanceInPrototypeChain(base));</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(derived_instance,</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;           derived_instance-&gt;FindInstanceInPrototypeChain(derived));</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(derived_instance-&gt;FindInstanceInPrototypeChain(other).IsEmpty());</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="comment">// other_instance is an instance of other and its immediate</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="comment">// prototype derived_instance2 is an instance of base and derived.</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="comment">// Note, derived_instance is an instance of base and derived too,</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// but it comes after derived_instance2 in the prototype chain of</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="comment">// other_instance.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(derived_instance2,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;           other_instance-&gt;FindInstanceInPrototypeChain(base));</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(derived_instance2,</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;           other_instance-&gt;FindInstanceInPrototypeChain(derived));</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(other_instance,</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;           other_instance-&gt;FindInstanceInPrototypeChain(other));</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acf5120b85b8c69440071bd1a265da4de">  969</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TinyInteger) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> value = 239;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  Local&lt;v8::Integer&gt; value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(value);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(value, isolate);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;}</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div>
<div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2c49bad2c95e47cd41c4241ad0de4168">  983</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(BigSmiInteger) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> value = <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">i::Smi::kMaxValue</a>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// We cannot add one to a Smi::kMaxValue without wrapping.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a60a11034b4c054d30552619e26db9937">i::kSmiValueSize</a> &lt; 32) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0e7b84e859a843a61642145d21d8665b">i::Smi::IsValid</a>(value));</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0e7b84e859a843a61642145d21d8665b">i::Smi::IsValid</a>(value + 1));</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    Local&lt;v8::Integer&gt; value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(value);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(value, isolate);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6cabaab0653f9467c6b8821165331545"> 1003</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(BigInteger) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="comment">// We cannot add one to a Smi::kMaxValue without wrapping.</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a60a11034b4c054d30552619e26db9937">i::kSmiValueSize</a> &lt; 32) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="comment">// The casts allow this to compile, even if Smi::kMaxValue is 2^31-1.</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="comment">// The code will not be run in that case, due to the &quot;if&quot; guard.</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> value =</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keyword">static_cast&lt;</span><a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">i::Smi::kMaxValue</a>) + 1);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value &gt; <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">i::Smi::kMaxValue</a>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0e7b84e859a843a61642145d21d8665b">i::Smi::IsValid</a>(value));</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    Local&lt;v8::Integer&gt; value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(value);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(value, isolate);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;}</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ade2ddb32eb2a654d1251daa4f944a9cd"> 1026</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TinyUnsignedInteger) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  uint32_t value = 239;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  Local&lt;v8::Integer&gt; value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(value);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(value, isolate);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a58e346f51af6c781cb1b360bef2d1a4c"> 1041</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(BigUnsignedSmiInteger) {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  uint32_t value = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">i::Smi::kMaxValue</a>);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0e7b84e859a843a61642145d21d8665b">i::Smi::IsValid</a>(value));</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0e7b84e859a843a61642145d21d8665b">i::Smi::IsValid</a>(value + 1));</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  Local&lt;v8::Integer&gt; value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(value);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(value, isolate);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;}</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afa86efa22707ed73eb58e52613dda2d7"> 1058</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(BigUnsignedInteger) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  uint32_t value = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">i::Smi::kMaxValue</a>) + 1;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value &gt; static_cast&lt;uint32_t&gt;(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">i::Smi::kMaxValue</a>));</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0e7b84e859a843a61642145d21d8665b">i::Smi::IsValid</a>(value));</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  Local&lt;v8::Integer&gt; value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(value);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(value, isolate);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;}</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div>
<div class="line"><a name="l01075"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aeb36d0292077072ec2d5cf1ce72c3ccf"> 1075</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(OutOfSignedRangeUnsignedInteger) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  uint32_t INT32_MAX_AS_UINT = (1<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abc6126af1d45847bc59afa0aa3216b04ac461e84f27bbb236874e1011cd66031f">U</a> &lt;&lt; 31) - 1;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  uint32_t value = INT32_MAX_AS_UINT + 1;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value &gt; INT32_MAX_AS_UINT);  <span class="comment">// No overflow.</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  Local&lt;v8::Integer&gt; value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(value);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  value_obj = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(value, isolate);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(value), value_obj-&gt;Value());</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;}</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div>
<div class="line"><a name="l01092"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afd38a150be2b748a2ebfc0b8e08a5bb5"> 1092</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IsNativeError) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> syntax_error = CompileRun(</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="stringliteral">&quot;var out = 0; try { eval(\&quot;#\&quot;); } catch(x) { out = x; } out; &quot;</span>);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(syntax_error-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#acb34d79df34b47ae4c19a4458e381760">IsNativeError</a>());</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> not_error = CompileRun(<span class="stringliteral">&quot;{a:42}&quot;</span>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!not_error-&gt;IsNativeError());</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> not_object = CompileRun(<span class="stringliteral">&quot;42&quot;</span>);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!not_object-&gt;IsNativeError());</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;}</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div>
<div class="line"><a name="l01105"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7407811cc0a2d46c4c1a3f3b008ec99d"> 1105</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(StringObject) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> boxed_string = CompileRun(<span class="stringliteral">&quot;new String(\&quot;test\&quot;)&quot;</span>);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(boxed_string-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#af25e7d62a095414a542b6379dae2459d">IsStringObject</a>());</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> unboxed_string = CompileRun(<span class="stringliteral">&quot;\&quot;test\&quot;&quot;</span>);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!unboxed_string-&gt;IsStringObject());</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> boxed_not_string = CompileRun(<span class="stringliteral">&quot;new Number(42)&quot;</span>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!boxed_not_string-&gt;IsStringObject());</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> not_object = CompileRun(<span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!not_object-&gt;IsStringObject());</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StringObject&gt;</a> as_boxed = boxed_string.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d9/d38/classv8_1_1_string_object.html">v8::StringObject</a>&gt;();</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!as_boxed.IsEmpty());</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  Local&lt;v8::String&gt; the_string = as_boxed-&gt;StringValue();</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!the_string.IsEmpty());</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  ExpectObject(<span class="stringliteral">&quot;\&quot;test\&quot;&quot;</span>, the_string);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> new_boxed_string = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::StringObject::New</a>(the_string);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(new_boxed_string-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#af25e7d62a095414a542b6379dae2459d">IsStringObject</a>());</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  as_boxed = new_boxed_string.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d9/d38/classv8_1_1_string_object.html">v8::StringObject</a>&gt;();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  the_string = as_boxed-&gt;<a class="code" href="../../d9/d38/classv8_1_1_string_object.html#a0f7276167cc1042526e01cc5489588e1">StringValue</a>();</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!the_string.IsEmpty());</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  ExpectObject(<span class="stringliteral">&quot;\&quot;test\&quot;&quot;</span>, the_string);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;}</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div>
<div class="line"><a name="l01130"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acd3d21c079675a4debd301959c06a35d"> 1130</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NumberObject) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> boxed_number = CompileRun(<span class="stringliteral">&quot;new Number(42)&quot;</span>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(boxed_number-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#ad737594de3cf79901597c94dfebbc26d">IsNumberObject</a>());</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> unboxed_number = CompileRun(<span class="stringliteral">&quot;42&quot;</span>);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!unboxed_number-&gt;IsNumberObject());</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> boxed_not_number = CompileRun(<span class="stringliteral">&quot;new Boolean(false)&quot;</span>);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!boxed_not_number-&gt;IsNumberObject());</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::NumberObject&gt;</a> as_boxed = boxed_number.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../da/d56/classv8_1_1_number_object.html">v8::NumberObject</a>&gt;();</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!as_boxed.IsEmpty());</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordtype">double</span> the_number = as_boxed-&gt;NumberValue();</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42.0, the_number);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> new_boxed_number = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::NumberObject::New</a>(43);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(new_boxed_number-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#ad737594de3cf79901597c94dfebbc26d">IsNumberObject</a>());</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  as_boxed = new_boxed_number.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../da/d56/classv8_1_1_number_object.html">v8::NumberObject</a>&gt;();</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  the_number = as_boxed-&gt;<a class="code" href="../../da/d56/classv8_1_1_number_object.html#a21bbf71d057f8357a5345fa4ee8b1593">NumberValue</a>();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(43.0, the_number);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;}</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3de7b937e4c294c9b1e1652431bdee3c"> 1151</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(BooleanObject) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> boxed_boolean = CompileRun(<span class="stringliteral">&quot;new Boolean(true)&quot;</span>);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(boxed_boolean-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#acdcf5d4989c90704a02ad57b74c8c787">IsBooleanObject</a>());</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> unboxed_boolean = CompileRun(<span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!unboxed_boolean-&gt;IsBooleanObject());</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> boxed_not_boolean = CompileRun(<span class="stringliteral">&quot;new Number(42)&quot;</span>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!boxed_not_boolean-&gt;IsBooleanObject());</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::BooleanObject&gt;</a> as_boxed =</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      boxed_boolean.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d9/d73/classv8_1_1_boolean_object.html">v8::BooleanObject</a>&gt;();</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!as_boxed.IsEmpty());</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordtype">bool</span> the_boolean = as_boxed-&gt;BooleanValue();</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, the_boolean);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> boxed_true = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::BooleanObject::New</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> boxed_false = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::BooleanObject::New</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(boxed_true-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#acdcf5d4989c90704a02ad57b74c8c787">IsBooleanObject</a>());</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(boxed_false-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#acdcf5d4989c90704a02ad57b74c8c787">IsBooleanObject</a>());</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  as_boxed = boxed_true.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d9/d73/classv8_1_1_boolean_object.html">v8::BooleanObject</a>&gt;();</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, as_boxed-&gt;BooleanValue());</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  as_boxed = boxed_false.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d9/d73/classv8_1_1_boolean_object.html">v8::BooleanObject</a>&gt;();</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, as_boxed-&gt;BooleanValue());</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;}</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div>
<div class="line"><a name="l01176"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acffdd223938447a8bf050929078e4b4f"> 1176</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Number) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordtype">double</span> PI = 3.1415926;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  Local&lt;v8::Number&gt; pi_obj = <a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(PI);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(PI, pi_obj-&gt;NumberValue());</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;}</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01185"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2d967a099e061c0deaf8c65b50dddc57"> 1185</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5a857fe236959ea037b3dd560a3414f0">ToNumber</a>) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  Local&lt;String&gt; str = v8_str(<span class="stringliteral">&quot;3.1415926&quot;</span>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3.1415926, str-&gt;NumberValue());</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> t = <a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>();</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1.0, t-&gt;NumberValue());</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> f = <a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>();</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0.0, f-&gt;NumberValue());</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div>
<div class="line"><a name="l01197"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a780a391e52dba76abf621b16137926db"> 1197</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Date) {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="keywordtype">double</span> PI = 3.1415926;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  Local&lt;Value&gt; date = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Date::New</a>(PI);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3.0, date-&gt;NumberValue());</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  date.As&lt;<a class="code" href="../../d4/df7/classv8_1_1_date.html">v8::Date</a>&gt;()-&gt;Set(v8_str(<span class="stringliteral">&quot;property&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, date.As&lt;<a class="code" href="../../d4/df7/classv8_1_1_date.html">v8::Date</a>&gt;()-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;property&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div>
<div class="line"><a name="l01208"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ade6c073ccd66b72faf2fa148d4c3e514"> 1208</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Boolean) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> t = <a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>();</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(t-&gt;<a class="code" href="../../d2/dac/classv8_1_1_boolean.html#a8922cf9b4a2b85f48f9cded7235e8bdd">Value</a>());</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> f = <a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>();</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!f-&gt;Value());</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Primitive&gt;</a> u = <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!u-&gt;BooleanValue());</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Primitive&gt;</a> n = <a class="code" href="../../d2/dc3/namespacev8.html#a2b822c3fdce0fedc6860872e5ebe48ae">v8::Null</a>();</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!n-&gt;BooleanValue());</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> str1 = v8_str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!str1-&gt;BooleanValue());</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> str2 = v8_str(<span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(str2-&gt;BooleanValue());</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(0)-&gt;BooleanValue());</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(-1)-&gt;BooleanValue());</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(1)-&gt;BooleanValue());</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(42)-&gt;BooleanValue());</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!v8_compile(<span class="stringliteral">&quot;NaN&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> DummyCallHandler(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordflow">return</span> v8_num(13.4);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;}</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> GetM(Local&lt;String&gt; name, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keywordflow">return</span> v8_num(876);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;}</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div>
<div class="line"><a name="l01243"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a33d3d4461bb80a860d2e91001e7efcc2"> 1243</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GlobalPrototype) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> func_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  func_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>()-&gt;Set(</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="stringliteral">&quot;dummy&quot;</span>,</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(DummyCallHandler));</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;ObjectTemplate&gt;</a> templ = func_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>();</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(<span class="stringliteral">&quot;x&quot;</span>, v8_num(200));</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;m&quot;</span>), GetM);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env(0, templ);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Script&gt;</a> script(v8_compile(<span class="stringliteral">&quot;dummy()&quot;</span>));</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>());</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(13.4, result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a21bbf71d057f8357a5345fa4ee8b1593">NumberValue</a>());</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(200, v8_compile(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(876, v8_compile(<span class="stringliteral">&quot;m&quot;</span>)-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;}</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1f062227e696f07d4e554fde99df1007"> 1261</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ObjectTemplate) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  Local&lt;ObjectTemplate&gt; templ1 = ObjectTemplate::New();</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  templ1-&gt;Set(<span class="stringliteral">&quot;x&quot;</span>, v8_num(10));</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  templ1-&gt;Set(<span class="stringliteral">&quot;y&quot;</span>, v8_num(13));</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  Local&lt;v8::Object&gt; instance1 = templ1-&gt;NewInstance();</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;p&quot;</span>), instance1);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;(p.x == 10)&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;(p.y == 13)&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  fun-&gt;PrototypeTemplate()-&gt;Set(<span class="stringliteral">&quot;nirk&quot;</span>, v8_num(123));</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  Local&lt;ObjectTemplate&gt; templ2 = fun-&gt;InstanceTemplate();</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  templ2-&gt;Set(<span class="stringliteral">&quot;a&quot;</span>, v8_num(12));</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  templ2-&gt;Set(<span class="stringliteral">&quot;b&quot;</span>, templ1);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  Local&lt;v8::Object&gt; instance2 = templ2-&gt;NewInstance();</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;q&quot;</span>), instance2);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;(q.nirk == 123)&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;(q.a == 12)&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;(q.b.x == 10)&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;(q.b.y == 13)&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;}</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> GetFlabby(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">return</span> v8_num(17.2);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;}</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> GetKnurd(Local&lt;String&gt; property, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">return</span> v8_num(15.2);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;}</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a89a1e21dd14fed678f1efbe03575fdb7"> 1297</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DescriptorInheritance) {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> super = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  super-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>()-&gt;Set(<span class="stringliteral">&quot;flabby&quot;</span>,</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                                  <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(GetFlabby));</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  super-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>()-&gt;Set(<span class="stringliteral">&quot;PI&quot;</span>, v8_num(3.14));</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  super-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>()-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;knurd&quot;</span>), GetKnurd);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> base1 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  base1-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#ab69cbe6331de0f54a4761f7a3c70db6a">Inherit</a>(super);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  base1-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>()-&gt;Set(<span class="stringliteral">&quot;v1&quot;</span>, v8_num(20.1));</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> base2 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  base2-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#ab69cbe6331de0f54a4761f7a3c70db6a">Inherit</a>(super);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  base2-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>()-&gt;Set(<span class="stringliteral">&quot;v2&quot;</span>, v8_num(10.1));</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;s&quot;</span>), super-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;base1&quot;</span>), base1-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;base2&quot;</span>), base2-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// Checks right __proto__ chain.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(<span class="stringliteral">&quot;base1.prototype.__proto__ == s.prototype&quot;</span>)-&gt;BooleanValue());</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(<span class="stringliteral">&quot;base2.prototype.__proto__ == s.prototype&quot;</span>)-&gt;BooleanValue());</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;s.prototype.PI == 3.14&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">// Instance accessor should not be visible on function object or its prototype</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(<span class="stringliteral">&quot;s.knurd == undefined&quot;</span>)-&gt;BooleanValue());</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(<span class="stringliteral">&quot;s.prototype.knurd == undefined&quot;</span>)-&gt;BooleanValue());</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(<span class="stringliteral">&quot;base1.prototype.knurd == undefined&quot;</span>)-&gt;BooleanValue());</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>),</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                     base1-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance());</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(17.2, v8_compile(<span class="stringliteral">&quot;obj.flabby()&quot;</span>)-&gt;Run()-&gt;NumberValue());</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;&#39;flabby&#39; in obj&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(15.2, v8_compile(<span class="stringliteral">&quot;obj.knurd&quot;</span>)-&gt;Run()-&gt;NumberValue());</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;&#39;knurd&#39; in obj&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(20.1, v8_compile(<span class="stringliteral">&quot;obj.v1&quot;</span>)-&gt;Run()-&gt;NumberValue());</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj2&quot;</span>),</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                     base2-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance());</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(17.2, v8_compile(<span class="stringliteral">&quot;obj2.flabby()&quot;</span>)-&gt;Run()-&gt;NumberValue());</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;&#39;flabby&#39; in obj2&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(15.2, v8_compile(<span class="stringliteral">&quot;obj2.knurd&quot;</span>)-&gt;Run()-&gt;NumberValue());</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;&#39;knurd&#39; in obj2&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(10.1, v8_compile(<span class="stringliteral">&quot;obj2.v2&quot;</span>)-&gt;Run()-&gt;NumberValue());</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">// base1 and base2 cannot cross reference to each&#39;s prototype</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;obj.v2&quot;</span>)-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;obj2.v1&quot;</span>)-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;}</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div>
<div class="line"><a name="l01353"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae25f8fd0c4557f1cefea87301ba89fe8"> 1353</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ae25f8fd0c4557f1cefea87301ba89fe8">echo_named_call_count</a>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> EchoNamedProperty(Local&lt;String&gt; name,</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                                           <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;data&quot;</span>), info.Data());</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  echo_named_call_count++;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">return</span> name;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;}</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">// Helper functions for Interceptor/Accessor interaction tests</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div>
<div class="line"><a name="l01366"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab62467315ed70d8e5d190f222656e491"> 1366</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#ab62467315ed70d8e5d190f222656e491">SimpleAccessorGetter</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                                   <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  Handle&lt;Object&gt; <span class="keyword">self</span> = info.This();</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;Get(String::Concat(v8_str(<span class="stringliteral">&quot;accessor_&quot;</span>), name));</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;}</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div>
<div class="line"><a name="l01372"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afc18414e00f3bbca3cb7d808d413f763"> 1372</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#afc18414e00f3bbca3cb7d808d413f763">SimpleAccessorSetter</a>(Local&lt;String&gt; name, Local&lt;Value&gt; value,</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                          <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  Handle&lt;Object&gt; <span class="keyword">self</span> = info.This();</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keyword">self</span>-&gt;Set(String::Concat(v8_str(<span class="stringliteral">&quot;accessor_&quot;</span>), name), value);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;}</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div>
<div class="line"><a name="l01378"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0"> 1378</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0">EmptyInterceptorGetter</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                                     <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keywordflow">return</span> Handle&lt;Value&gt;();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div>
<div class="line"><a name="l01383"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd"> 1383</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd">EmptyInterceptorSetter</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                                     Local&lt;Value&gt; value,</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                                     <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordflow">return</span> Handle&lt;Value&gt;();</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;}</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div>
<div class="line"><a name="l01389"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711"> 1389</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                                <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="comment">// Intercept names that start with &#39;interceptor_&#39;.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  String::AsciiValue ascii(name);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keywordtype">char</span>* name_str = *ascii;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keywordtype">char</span> prefix[] = <span class="stringliteral">&quot;interceptor_&quot;</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordflow">for</span> (i = 0; name_str[i] &amp;&amp; prefix[i]; ++i) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keywordflow">if</span> (name_str[i] != prefix[i]) <span class="keywordflow">return</span> Handle&lt;Value&gt;();</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  Handle&lt;Object&gt; <span class="keyword">self</span> = info.This();</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;GetHiddenValue(v8_str(name_str + i));</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div>
<div class="line"><a name="l01403"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948"> 1403</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                                Local&lt;Value&gt; value,</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                                <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="comment">// Intercept accesses that set certain integer values.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="keywordflow">if</span> (value-&gt;IsInt32() &amp;&amp; value-&gt;Int32Value() &lt; 10000) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    Handle&lt;Object&gt; <span class="keyword">self</span> = info.This();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keyword">self</span>-&gt;SetHiddenValue(name, value);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="keywordflow">return</span> Handle&lt;Value&gt;();</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;}</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div>
<div class="line"><a name="l01415"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1120a6fc2beea69913bd989b4f11e75c"> 1415</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a1120a6fc2beea69913bd989b4f11e75c">AddAccessor</a>(Handle&lt;FunctionTemplate&gt; templ,</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                 Handle&lt;String&gt; name,</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                 <a class="code" href="../../d2/dc3/namespacev8.html#afcbfc608ca1baf6b5c9028b795740164">v8::AccessorGetter</a> getter,</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                 <a class="code" href="../../d2/dc3/namespacev8.html#a7c752895ddfeebfdae44facb3ec74828">v8::AccessorSetter</a> setter) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  templ-&gt;PrototypeTemplate()-&gt;SetAccessor(name, getter, setter);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;}</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div>
<div class="line"><a name="l01422"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0"> 1422</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(Handle&lt;FunctionTemplate&gt; templ,</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                    <a class="code" href="../../d2/dc3/namespacev8.html#a0c3457f16b868f1aa66aefacbe990b54">v8::NamedPropertyGetter</a> getter,</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                    <a class="code" href="../../d2/dc3/namespacev8.html#aeec8c2ccbd1b0395e45bf657b0a3a469">v8::NamedPropertySetter</a> setter) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  templ-&gt;InstanceTemplate()-&gt;SetNamedPropertyHandler(getter, setter);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;}</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div>
<div class="line"><a name="l01428"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a21f82cb0f408a90b2cb4f5a7ff1047dd"> 1428</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(EmptyInterceptorDoesNotShadowAccessors) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  Handle&lt;FunctionTemplate&gt; parent = FunctionTemplate::New();</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  Handle&lt;FunctionTemplate&gt; child = FunctionTemplate::New();</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  child-&gt;Inherit(parent);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a1120a6fc2beea69913bd989b4f11e75c">AddAccessor</a>(parent, v8_str(<span class="stringliteral">&quot;age&quot;</span>),</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;              <a class="code" href="../../de/d3f/test-api_8cc.html#ab62467315ed70d8e5d190f222656e491">SimpleAccessorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#afc18414e00f3bbca3cb7d808d413f763">SimpleAccessorSetter</a>);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(child, <a class="code" href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0">EmptyInterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd">EmptyInterceptorSetter</a>);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Child&quot;</span>), child-&gt;GetFunction());</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  CompileRun(<span class="stringliteral">&quot;var child = new Child;&quot;</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;             <span class="stringliteral">&quot;child.age = 10;&quot;</span>);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;child.hasOwnProperty(&#39;age&#39;)&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.age&quot;</span>, 10);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.accessor_age&quot;</span>, 10);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div>
<div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a769c0a54c959db00b1d13b285ebcaa05"> 1445</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(EmptyInterceptorDoesNotShadowJSAccessors) {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  Handle&lt;FunctionTemplate&gt; parent = FunctionTemplate::New();</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  Handle&lt;FunctionTemplate&gt; child = FunctionTemplate::New();</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  child-&gt;Inherit(parent);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(child, <a class="code" href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0">EmptyInterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd">EmptyInterceptorSetter</a>);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Child&quot;</span>), child-&gt;GetFunction());</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  CompileRun(<span class="stringliteral">&quot;var child = new Child;&quot;</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;             <span class="stringliteral">&quot;var parent = child.__proto__;&quot;</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;             <span class="stringliteral">&quot;Object.defineProperty(parent, &#39;age&#39;, &quot;</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;             <span class="stringliteral">&quot;  {get: function(){ return this.accessor_age; }, &quot;</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;             <span class="stringliteral">&quot;   set: function(v){ this.accessor_age = v; }, &quot;</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;             <span class="stringliteral">&quot;   enumerable: true, configurable: true});&quot;</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;             <span class="stringliteral">&quot;child.age = 10;&quot;</span>);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;child.hasOwnProperty(&#39;age&#39;)&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.age&quot;</span>, 10);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.accessor_age&quot;</span>, 10);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;}</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div>
<div class="line"><a name="l01465"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#add21b27a27dc77c0cbc7ff6b044a8bfe"> 1465</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(EmptyInterceptorDoesNotAffectJSProperties) {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  Handle&lt;FunctionTemplate&gt; parent = FunctionTemplate::New();</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  Handle&lt;FunctionTemplate&gt; child = FunctionTemplate::New();</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  child-&gt;Inherit(parent);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(child, <a class="code" href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0">EmptyInterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd">EmptyInterceptorSetter</a>);</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Child&quot;</span>), child-&gt;GetFunction());</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  CompileRun(<span class="stringliteral">&quot;var child = new Child;&quot;</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;             <span class="stringliteral">&quot;var parent = child.__proto__;&quot;</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;             <span class="stringliteral">&quot;parent.name = &#39;Alice&#39;;&quot;</span>);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;child.hasOwnProperty(&#39;name&#39;)&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  ExpectString(<span class="stringliteral">&quot;child.name&quot;</span>, <span class="stringliteral">&quot;Alice&quot;</span>);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  CompileRun(<span class="stringliteral">&quot;child.name = &#39;Bob&#39;;&quot;</span>);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  ExpectString(<span class="stringliteral">&quot;child.name&quot;</span>, <span class="stringliteral">&quot;Bob&quot;</span>);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;child.hasOwnProperty(&#39;name&#39;)&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  ExpectString(<span class="stringliteral">&quot;parent.name&quot;</span>, <span class="stringliteral">&quot;Alice&quot;</span>);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;}</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7538389aa3638717e2e398340b50c9b7"> 1484</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SwitchFromInterceptorToAccessor) {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  Handle&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a1120a6fc2beea69913bd989b4f11e75c">AddAccessor</a>(templ, v8_str(<span class="stringliteral">&quot;age&quot;</span>),</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;              <a class="code" href="../../de/d3f/test-api_8cc.html#ab62467315ed70d8e5d190f222656e491">SimpleAccessorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#afc18414e00f3bbca3cb7d808d413f763">SimpleAccessorSetter</a>);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(templ, <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Obj&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = new Obj;&quot;</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;             <span class="stringliteral">&quot;function setAge(i){ obj.age = i; };&quot;</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;             <span class="stringliteral">&quot;for(var i = 0; i &lt;= 10000; i++) setAge(i);&quot;</span>);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="comment">// All i &lt; 10000 go to the interceptor.</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.interceptor_age&quot;</span>, 9999);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="comment">// The last i goes to the accessor.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.accessor_age&quot;</span>, 10000);</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;}</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div>
<div class="line"><a name="l01501"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af1526ced99c7e7f205dbd1d3ffa0015a"> 1501</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SwitchFromAccessorToInterceptor) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  Handle&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a1120a6fc2beea69913bd989b4f11e75c">AddAccessor</a>(templ, v8_str(<span class="stringliteral">&quot;age&quot;</span>),</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;              <a class="code" href="../../de/d3f/test-api_8cc.html#ab62467315ed70d8e5d190f222656e491">SimpleAccessorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#afc18414e00f3bbca3cb7d808d413f763">SimpleAccessorSetter</a>);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(templ, <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Obj&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = new Obj;&quot;</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;             <span class="stringliteral">&quot;function setAge(i){ obj.age = i; };&quot;</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;             <span class="stringliteral">&quot;for(var i = 20000; i &gt;= 9999; i--) setAge(i);&quot;</span>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// All i &gt;= 10000 go to the accessor.</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.accessor_age&quot;</span>, 10000);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="comment">// The last i goes to the interceptor.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.interceptor_age&quot;</span>, 9999);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;}</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div>
<div class="line"><a name="l01518"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8dc8ebf9db1470e8b7affb27c41fc4ad"> 1518</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SwitchFromInterceptorToAccessorWithInheritance) {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  Handle&lt;FunctionTemplate&gt; parent = FunctionTemplate::New();</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  Handle&lt;FunctionTemplate&gt; child = FunctionTemplate::New();</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  child-&gt;Inherit(parent);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a1120a6fc2beea69913bd989b4f11e75c">AddAccessor</a>(parent, v8_str(<span class="stringliteral">&quot;age&quot;</span>),</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;              <a class="code" href="../../de/d3f/test-api_8cc.html#ab62467315ed70d8e5d190f222656e491">SimpleAccessorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#afc18414e00f3bbca3cb7d808d413f763">SimpleAccessorSetter</a>);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(child, <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Child&quot;</span>), child-&gt;GetFunction());</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  CompileRun(<span class="stringliteral">&quot;var child = new Child;&quot;</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;             <span class="stringliteral">&quot;function setAge(i){ child.age = i; };&quot;</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;             <span class="stringliteral">&quot;for(var i = 0; i &lt;= 10000; i++) setAge(i);&quot;</span>);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// All i &lt; 10000 go to the interceptor.</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.interceptor_age&quot;</span>, 9999);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">// The last i goes to the accessor.</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.accessor_age&quot;</span>, 10000);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;}</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div>
<div class="line"><a name="l01537"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a71c6646545870e79ca3cc5cb3662f5d0"> 1537</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SwitchFromAccessorToInterceptorWithInheritance) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  Handle&lt;FunctionTemplate&gt; parent = FunctionTemplate::New();</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  Handle&lt;FunctionTemplate&gt; child = FunctionTemplate::New();</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  child-&gt;Inherit(parent);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a1120a6fc2beea69913bd989b4f11e75c">AddAccessor</a>(parent, v8_str(<span class="stringliteral">&quot;age&quot;</span>),</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;              <a class="code" href="../../de/d3f/test-api_8cc.html#ab62467315ed70d8e5d190f222656e491">SimpleAccessorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#afc18414e00f3bbca3cb7d808d413f763">SimpleAccessorSetter</a>);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(child, <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Child&quot;</span>), child-&gt;GetFunction());</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  CompileRun(<span class="stringliteral">&quot;var child = new Child;&quot;</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;             <span class="stringliteral">&quot;function setAge(i){ child.age = i; };&quot;</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;             <span class="stringliteral">&quot;for(var i = 20000; i &gt;= 9999; i--) setAge(i);&quot;</span>);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">// All i &gt;= 10000 go to the accessor.</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.accessor_age&quot;</span>, 10000);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">// The last i goes to the interceptor.</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.interceptor_age&quot;</span>, 9999);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;}</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div>
<div class="line"><a name="l01556"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a96cd2c1a1ddbd63b72615166fc96c8bb"> 1556</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SwitchFromInterceptorToJSAccessor) {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  Handle&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(templ, <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Obj&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = new Obj;&quot;</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;             <span class="stringliteral">&quot;function setter(i) { this.accessor_age = i; };&quot;</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;             <span class="stringliteral">&quot;function getter() { return this.accessor_age; };&quot;</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;             <span class="stringliteral">&quot;function setAge(i) { obj.age = i; };&quot;</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;             <span class="stringliteral">&quot;Object.defineProperty(obj, &#39;age&#39;, { get:getter, set:setter });&quot;</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;             <span class="stringliteral">&quot;for(var i = 0; i &lt;= 10000; i++) setAge(i);&quot;</span>);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="comment">// All i &lt; 10000 go to the interceptor.</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.interceptor_age&quot;</span>, 9999);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="comment">// The last i goes to the JavaScript accessor.</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.accessor_age&quot;</span>, 10000);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// The installed JavaScript getter is still intact.</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="comment">// This last part is a regression test for issue 1651 and relies on the fact</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// that both interceptor and accessor are being installed on the same object.</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.age&quot;</span>, 10000);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;obj.hasOwnProperty(&#39;age&#39;)&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj, &#39;age&#39;).value&quot;</span>);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;}</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div>
<div class="line"><a name="l01580"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa373fde1a55247a4dee1342f6f1c141b"> 1580</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SwitchFromJSAccessorToInterceptor) {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  Handle&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(templ, <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Obj&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = new Obj;&quot;</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;             <span class="stringliteral">&quot;function setter(i) { this.accessor_age = i; };&quot;</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;             <span class="stringliteral">&quot;function getter() { return this.accessor_age; };&quot;</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;             <span class="stringliteral">&quot;function setAge(i) { obj.age = i; };&quot;</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;             <span class="stringliteral">&quot;Object.defineProperty(obj, &#39;age&#39;, { get:getter, set:setter });&quot;</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;             <span class="stringliteral">&quot;for(var i = 20000; i &gt;= 9999; i--) setAge(i);&quot;</span>);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="comment">// All i &gt;= 10000 go to the accessor.</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.accessor_age&quot;</span>, 10000);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="comment">// The last i goes to the interceptor.</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.interceptor_age&quot;</span>, 9999);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">// The installed JavaScript getter is still intact.</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="comment">// This last part is a regression test for issue 1651 and relies on the fact</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// that both interceptor and accessor are being installed on the same object.</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;obj.age&quot;</span>, 10000);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;obj.hasOwnProperty(&#39;age&#39;)&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj, &#39;age&#39;).value&quot;</span>);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;}</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div>
<div class="line"><a name="l01604"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af57963286538c4ced6d03aaa05178273"> 1604</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SwitchFromInterceptorToProperty) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  Handle&lt;FunctionTemplate&gt; parent = FunctionTemplate::New();</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  Handle&lt;FunctionTemplate&gt; child = FunctionTemplate::New();</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  child-&gt;Inherit(parent);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(child, <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Child&quot;</span>), child-&gt;GetFunction());</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  CompileRun(<span class="stringliteral">&quot;var child = new Child;&quot;</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;             <span class="stringliteral">&quot;function setAge(i){ child.age = i; };&quot;</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;             <span class="stringliteral">&quot;for(var i = 0; i &lt;= 10000; i++) setAge(i);&quot;</span>);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="comment">// All i &lt; 10000 go to the interceptor.</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.interceptor_age&quot;</span>, 9999);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="comment">// The last i goes to child&#39;s own property.</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.age&quot;</span>, 10000);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;}</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div>
<div class="line"><a name="l01621"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0d52050fe912c74d657a1361b78c5320"> 1621</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SwitchFromPropertyToInterceptor) {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  Handle&lt;FunctionTemplate&gt; parent = FunctionTemplate::New();</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  Handle&lt;FunctionTemplate&gt; child = FunctionTemplate::New();</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  child-&gt;Inherit(parent);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(child, <a class="code" href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a>);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Child&quot;</span>), child-&gt;GetFunction());</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  CompileRun(<span class="stringliteral">&quot;var child = new Child;&quot;</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;             <span class="stringliteral">&quot;function setAge(i){ child.age = i; };&quot;</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;             <span class="stringliteral">&quot;for(var i = 20000; i &gt;= 9999; i--) setAge(i);&quot;</span>);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="comment">// All i &gt;= 10000 go to child&#39;s own property.</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.age&quot;</span>, 10000);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="comment">// The last i goes to the interceptor.</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;child.interceptor_age&quot;</span>, 9999);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;}</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div>
<div class="line"><a name="l01638"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7a2a751c3621199a3e4ac2794787c295"> 1638</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NamedPropertyHandlerGetter) {</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  echo_named_call_count = 0;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>()-&gt;SetNamedPropertyHandler(EchoNamedProperty,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                                                     0, 0, 0, 0,</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                                                     v8_str(<span class="stringliteral">&quot;data&quot;</span>));</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>),</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                     templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance());</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(echo_named_call_count, 0);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  v8_compile(<span class="stringliteral">&quot;obj.x&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(echo_named_call_count, 1);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code = <span class="stringliteral">&quot;var str = &#39;oddle&#39;; obj[str] + obj.poddle;&quot;</span>;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> str = CompileRun(code);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  String::AsciiValue value(str);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(*value, <span class="stringliteral">&quot;oddlepoddle&quot;</span>);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="comment">// Check default behavior</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_compile(<span class="stringliteral">&quot;obj.flob = 10;&quot;</span>)-&gt;Run()-&gt;Int32Value(), 10);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;&#39;myProperty&#39; in obj&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;delete obj.myProperty&quot;</span>)-&gt;Run()-&gt;BooleanValue());</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;}</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div>
<div class="line"><a name="l01662"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab3b5c67dc57ec427503582cb551c7e27"> 1662</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ab3b5c67dc57ec427503582cb551c7e27">echo_indexed_call_count</a> = 0;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> EchoIndexedProperty(uint32_t index,</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                                             <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(637), info.Data());</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  echo_indexed_call_count++;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="keywordflow">return</span> v8_num(index);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;}</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div>
<div class="line"><a name="l01674"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1e21ed4aad841d4a17c82e463e7109af"> 1674</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedPropertyHandlerGetter) {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>()-&gt;SetIndexedPropertyHandler(EchoIndexedProperty,</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                                                       0, 0, 0, 0,</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                                                       v8_num(637));</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>),</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                     templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance());</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  Local&lt;Script&gt; script = v8_compile(<span class="stringliteral">&quot;obj[900]&quot;</span>);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(script-&gt;Run()-&gt;Int32Value(), 900);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;}</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div>
<div class="line"><a name="l01688"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a867eb44ca3ea387269b34da7a51e5c6a"> 1688</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a867eb44ca3ea387269b34da7a51e5c6a">bottom</a>;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> CheckThisIndexedPropertyHandler(</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;}</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> CheckThisNamedPropertyHandler(</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    Local&lt;String&gt; name,</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;}</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div>
<div class="line"><a name="l01707"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0361f1f0085677210b1512b79ce277d6"> 1707</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a0361f1f0085677210b1512b79ce277d6">CheckThisIndexedPropertySetter</a>(uint32_t index,</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                                                 Local&lt;Value&gt; value,</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                                                 <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;}</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div>
<div class="line"><a name="l01716"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8204dacac9678828a960f2ba937611da"> 1716</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a8204dacac9678828a960f2ba937611da">CheckThisNamedPropertySetter</a>(Local&lt;String&gt; property,</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                                               Local&lt;Value&gt; value,</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                                               <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;}</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div>
<div class="line"><a name="l01724"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a533d8ca37e03a21e017446e5c58fe18a"> 1724</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Integer&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a533d8ca37e03a21e017446e5c58fe18a">CheckThisIndexedPropertyQuery</a>(</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Integer&gt;</a>();</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;}</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div>
<div class="line"><a name="l01733"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3c07c15bb8e0a0c5b68c5209a72ba92d"> 1733</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Integer&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a3c07c15bb8e0a0c5b68c5209a72ba92d">CheckThisNamedPropertyQuery</a>(Local&lt;String&gt; property,</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                                                    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Integer&gt;</a>();</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;}</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div>
<div class="line"><a name="l01741"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a767d385c512db157607ffeb68aa9034c"> 1741</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a767d385c512db157607ffeb68aa9034c">CheckThisIndexedPropertyDeleter</a>(</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a>();</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;}</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div>
<div class="line"><a name="l01750"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a24eb73886f25dee80a9a12f36fae6e32"> 1750</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a24eb73886f25dee80a9a12f36fae6e32">CheckThisNamedPropertyDeleter</a>(</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    Local&lt;String&gt; property,</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a>();</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;}</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div>
<div class="line"><a name="l01759"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3204a6aaeafab10dfcb5d27ff555bca5"> 1759</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a3204a6aaeafab10dfcb5d27ff555bca5">CheckThisIndexedPropertyEnumerator</a>(</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a>();</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;}</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div>
<div class="line"><a name="l01767"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a44857431848a186a61b1a14aa562278b"> 1767</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a44857431848a186a61b1a14aa562278b">CheckThisNamedPropertyEnumerator</a>(</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.This()-&gt;Equals(bottom));</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a>();</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;}</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div>
<div class="line"><a name="l01775"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a22db6c5ec0267a64dab10d42de9bbb8c"> 1775</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(PropertyHandlerInPrototype) {</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="comment">// Set up a prototype chain with three interceptors.</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>()-&gt;SetIndexedPropertyHandler(</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      CheckThisIndexedPropertyHandler,</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <a class="code" href="../../de/d3f/test-api_8cc.html#a0361f1f0085677210b1512b79ce277d6">CheckThisIndexedPropertySetter</a>,</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <a class="code" href="../../de/d3f/test-api_8cc.html#a533d8ca37e03a21e017446e5c58fe18a">CheckThisIndexedPropertyQuery</a>,</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <a class="code" href="../../de/d3f/test-api_8cc.html#a767d385c512db157607ffeb68aa9034c">CheckThisIndexedPropertyDeleter</a>,</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <a class="code" href="../../de/d3f/test-api_8cc.html#a3204a6aaeafab10dfcb5d27ff555bca5">CheckThisIndexedPropertyEnumerator</a>);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>()-&gt;SetNamedPropertyHandler(</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      CheckThisNamedPropertyHandler,</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <a class="code" href="../../de/d3f/test-api_8cc.html#a8204dacac9678828a960f2ba937611da">CheckThisNamedPropertySetter</a>,</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      <a class="code" href="../../de/d3f/test-api_8cc.html#a3c07c15bb8e0a0c5b68c5209a72ba92d">CheckThisNamedPropertyQuery</a>,</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <a class="code" href="../../de/d3f/test-api_8cc.html#a24eb73886f25dee80a9a12f36fae6e32">CheckThisNamedPropertyDeleter</a>,</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <a class="code" href="../../de/d3f/test-api_8cc.html#a44857431848a186a61b1a14aa562278b">CheckThisNamedPropertyEnumerator</a>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  bottom = templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance();</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  Local&lt;v8::Object&gt; top = templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance();</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  Local&lt;v8::Object&gt; middle = templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance();</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  bottom-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), middle);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  middle-&gt;Set(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), top);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), bottom);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="comment">// Indexed and named get.</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;obj[0]&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;obj.x&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// Indexed and named set.</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;obj[1] = 42&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;obj.y = 42&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="comment">// Indexed and named query.</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;0 in obj&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;&#39;x&#39; in obj&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="comment">// Indexed and named deleter.</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;delete obj[0]&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;delete obj.x&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="comment">// Enumerators.</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;for (var p in obj) ;&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;}</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> PrePropertyHandlerGet(Local&lt;String&gt; key,</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                                               <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="keywordflow">if</span> (v8_str(<span class="stringliteral">&quot;pre&quot;</span>)-&gt;Equals(key)) {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">return</span> v8_str(<span class="stringliteral">&quot;PrePropertyHandler: pre&quot;</span>);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  }</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a>();</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;}</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Integer&gt;</a> PrePropertyHandlerQuery(Local&lt;String&gt; key,</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                                                       <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordflow">if</span> (v8_str(<span class="stringliteral">&quot;pre&quot;</span>)-&gt;Equals(key)) {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(<a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Integer&gt;</a>();  <span class="comment">// do not intercept the call</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;}</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div>
<div class="line"><a name="l01844"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af5f9c7104c095db3b7e96c2e51228c30"> 1844</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(PrePropertyHandler) {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> desc = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  desc-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>()-&gt;SetNamedPropertyHandler(PrePropertyHandlerGet,</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                                                    0,</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                                                    PrePropertyHandlerQuery);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, desc-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>());</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  Script::Compile(v8_str(</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <span class="stringliteral">&quot;var pre = &#39;Object: pre&#39;; var on = &#39;Object: on&#39;;&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result_pre = Script::Compile(v8_str(<span class="stringliteral">&quot;pre&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;PrePropertyHandler: pre&quot;</span>), result_pre);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result_on = Script::Compile(v8_str(<span class="stringliteral">&quot;on&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;Object: on&quot;</span>), result_on);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result_post = Script::Compile(v8_str(<span class="stringliteral">&quot;post&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result_post.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;}</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div>
<div class="line"><a name="l01862"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa1d1636650b92d85b44e2cce77e72ca6"> 1862</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(UndefinedIsNotEnumerable) {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <span class="stringliteral">&quot;this.propertyIsEnumerable(undefined)&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a99d1bc1008f2933f9f9fcecc8652220c">IsFalse</a>());</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;}</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div>
<div class="line"><a name="l01871"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac1cd5d2ce060c79e6b90430f2ab29fa5"> 1871</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Script&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#ac1cd5d2ce060c79e6b90430f2ab29fa5">call_recursively_script</a>;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kTargetRecursionDepth = 200;  <span class="comment">// near maximum</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> CallScriptRecursivelyCall(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="keywordtype">int</span> depth = args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;depth&quot;</span>))-&gt;Int32Value();</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordflow">if</span> (depth == kTargetRecursionDepth) <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;depth&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(depth + 1));</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keywordflow">return</span> call_recursively_script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;}</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> CallFunctionRecursivelyCall(</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keywordtype">int</span> depth = args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;depth&quot;</span>))-&gt;Int32Value();</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="keywordflow">if</span> (depth == kTargetRecursionDepth) {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    printf(<span class="stringliteral">&quot;[depth = %d]\n&quot;</span>, depth);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;depth&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(depth + 1));</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <span class="keyword">function</span> =</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;callFunctionRecursively&quot;</span>));</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">function</span>.<a class="code" href="../../de/deb/classv8_1_1_local.html#a626f0925cb54d03f780b48ec9538618c">As</a>&lt;Function&gt;()-&gt;Call(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>(), 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;}</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div>
<div class="line"><a name="l01899"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a57d43332e766d090b70ead08cab0acfc"> 1899</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DeepCrossLanguageRecursion) {</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global = ObjectTemplate::New();</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  global-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;callScriptRecursively&quot;</span>),</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;              <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(CallScriptRecursivelyCall));</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  global-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;callFunctionRecursively&quot;</span>),</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;              <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(CallFunctionRecursivelyCall));</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;depth&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0));</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  call_recursively_script = v8_compile(<span class="stringliteral">&quot;callScriptRecursively()&quot;</span>);</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  call_recursively_script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  call_recursively_script = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Script&gt;</a>();</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;depth&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0));</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;callFunctionRecursively()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;}</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    ThrowingPropertyHandlerGet(Local&lt;String&gt; key, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(key);</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;}</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ThrowingPropertyHandlerSet(Local&lt;String&gt; key,</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                                                    Local&lt;Value&gt;,</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                                                    <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(key);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();  <span class="comment">// not the same as v8::Handle&lt;v8::Value&gt;()</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;}</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div>
<div class="line"><a name="l01933"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9a11f70a41b562274ed3340a83dc9d87"> 1933</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallbackExceptionRegression) {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj = ObjectTemplate::New();</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(ThrowingPropertyHandlerGet,</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                               ThrowingPropertyHandlerSet);</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> otto = Script::Compile(v8_str(</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <span class="stringliteral">&quot;try { with (obj) { otto; } } catch (e) { e; }&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;otto&quot;</span>), otto);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> netto = Script::Compile(v8_str(</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <span class="stringliteral">&quot;try { with (obj) { netto = 4; } } catch (e) { e; }&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;netto&quot;</span>), netto);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;}</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div>
<div class="line"><a name="l01949"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afc8a790b2928b96de51b4f08104e3f2b"> 1949</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionPrototype) {</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  Local&lt;v8::FunctionTemplate&gt; Foo = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  Foo-&gt;PrototypeTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;plak&quot;</span>), v8_num(321));</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Foo&quot;</span>), Foo-&gt;GetFunction());</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;Foo.prototype.plak&quot;</span>));</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(script-&gt;Run()-&gt;Int32Value(), 321);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;}</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;</div>
<div class="line"><a name="l01960"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4557185a058562a52f802e5e2b408b70"> 1960</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InternalFields) {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  Local&lt;v8::FunctionTemplate&gt; templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  Local&lt;v8::ObjectTemplate&gt; instance_templ = templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  instance_templ-&gt;SetInternalFieldCount(1);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, obj-&gt;InternalFieldCount());</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;GetInternalField(0)-&gt;IsUndefined());</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  obj-&gt;SetInternalField(0, v8_num(17));</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(17, obj-&gt;GetInternalField(0)-&gt;Int32Value());</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;}</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div>
<div class="line"><a name="l01975"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5775e73eaa8de89150d2d6ac51922836"> 1975</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GlobalObjectInternalFields) {</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  Local&lt;v8::ObjectTemplate&gt; global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  global_template-&gt;SetInternalFieldCount(1);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global_proxy = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = global_proxy-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aafa7e778e56fbbc49b1c0170c832f093">GetPrototype</a>().As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa33d06f1b6ca8e114ca8e1e557ce40a9">InternalFieldCount</a>());</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#afc0676f870438bb47ac16969295d56a4">GetInternalField</a>(0)-&gt;IsUndefined());</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9f5bc470012336ebd1646d7890f5a12c">SetInternalField</a>(0, v8_num(17));</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(17, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#afc0676f870438bb47ac16969295d56a4">GetInternalField</a>(0)-&gt;Int32Value());</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;}</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div>
<div class="line"><a name="l01989"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7889510d52580e6155dd139bcb1f1ec4"> 1989</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InternalFieldsNativePointers) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  Local&lt;v8::FunctionTemplate&gt; templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  Local&lt;v8::ObjectTemplate&gt; instance_templ = templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  instance_templ-&gt;SetInternalFieldCount(1);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, obj-&gt;InternalFieldCount());</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;GetPointerFromInternalField(0) == <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <span class="keywordtype">char</span>* data = <span class="keyword">new</span> <span class="keywordtype">char</span>[100];</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <span class="keywordtype">void</span>* aligned = data;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, static_cast&lt;int&gt;(reinterpret_cast&lt;uintptr_t&gt;(aligned) &amp; 0x1));</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="keywordtype">void</span>* unaligned = data + 1;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, static_cast&lt;int&gt;(reinterpret_cast&lt;uintptr_t&gt;(unaligned) &amp; 0x1));</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="comment">// Check reading and writing aligned pointers.</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  obj-&gt;SetPointerInInternalField(0, aligned);</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(aligned, obj-&gt;GetPointerFromInternalField(0));</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  <span class="comment">// Check reading and writing unaligned pointers.</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  obj-&gt;SetPointerInInternalField(0, unaligned);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(unaligned, obj-&gt;GetPointerFromInternalField(0));</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="keyword">delete</span>[] data;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;}</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;</div>
<div class="line"><a name="l02021"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af8150410b14681133a1d4775b72d80a4"> 2021</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InternalFieldsNativePointersAndExternal) {</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  Local&lt;v8::FunctionTemplate&gt; templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  Local&lt;v8::ObjectTemplate&gt; instance_templ = templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  instance_templ-&gt;SetInternalFieldCount(1);</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, obj-&gt;InternalFieldCount());</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;GetPointerFromInternalField(0) == <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="keywordtype">char</span>* data = <span class="keyword">new</span> <span class="keywordtype">char</span>[100];</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="keywordtype">void</span>* aligned = data;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, static_cast&lt;int&gt;(reinterpret_cast&lt;uintptr_t&gt;(aligned) &amp; 0x1));</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="keywordtype">void</span>* unaligned = data + 1;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, static_cast&lt;int&gt;(reinterpret_cast&lt;uintptr_t&gt;(unaligned) &amp; 0x1));</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  obj-&gt;SetPointerInInternalField(0, aligned);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(aligned, <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a>(obj-&gt;GetInternalField(0)));</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  obj-&gt;SetPointerInInternalField(0, unaligned);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(unaligned, <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a>(obj-&gt;GetInternalField(0)));</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  obj-&gt;SetInternalField(0, <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(aligned));</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(aligned, obj-&gt;GetPointerFromInternalField(0));</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  obj-&gt;SetInternalField(0, <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(unaligned));</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(unaligned, obj-&gt;GetPointerFromInternalField(0));</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="keyword">delete</span>[] data;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;}</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;</div>
<div class="line"><a name="l02059"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad0b5f2a7e0fa6b135f5780f5a444267f"> 2059</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IdentityHash) {</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="comment">// Ensure that the test starts with an fresh heap to test whether the hash</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="comment">// code is based on the address.</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  Local&lt;v8::Object&gt; obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="keywordtype">int</span> hash = obj-&gt;GetIdentityHash();</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="keywordtype">int</span> hash1 = obj-&gt;GetIdentityHash();</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(hash, hash1);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="keywordtype">int</span> hash2 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>()-&gt;GetIdentityHash();</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="comment">// Since the identity hash is essentially a random number two consecutive</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="comment">// objects should not be assigned the same hash code. If the test below fails</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="comment">// the random number generator should be evaluated.</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(hash, hash2);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="keywordtype">int</span> hash3 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>()-&gt;GetIdentityHash();</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="comment">// Make sure that the identity hash is not based on the initial address of</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="comment">// the object alone. If the test below fails the random number generator</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <span class="comment">// should be evaluated.</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(hash, hash3);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="keywordtype">int</span> hash4 = obj-&gt;GetIdentityHash();</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(hash, hash4);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <span class="comment">// Check identity hashes behaviour in the presence of JS accessors.</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="comment">// Put a getter for &#39;v8::IdentityHash&#39; on the Object&#39;s prototype:</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    CompileRun(<span class="stringliteral">&quot;Object.prototype[&#39;v8::IdentityHash&#39;] = 42;\n&quot;</span>);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    Local&lt;v8::Object&gt; o1 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    Local&lt;v8::Object&gt; o2 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(o1-&gt;GetIdentityHash(), o2-&gt;GetIdentityHash());</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  }</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  {</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    CompileRun(</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <span class="stringliteral">&quot;function cnst() { return 42; };\n&quot;</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <span class="stringliteral">&quot;Object.prototype.__defineGetter__(&#39;v8::IdentityHash&#39;, cnst);\n&quot;</span>);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    Local&lt;v8::Object&gt; o1 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    Local&lt;v8::Object&gt; o2 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(o1-&gt;GetIdentityHash(), o2-&gt;GetIdentityHash());</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  }</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div>
<div class="line"><a name="l02103"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae7eed38b2742f19db7844abb42f3259e"> 2103</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(HiddenProperties) {</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> key = v8_str(<span class="stringliteral">&quot;api-test::hidden-key&quot;</span>);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> empty = v8_str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> prop_name = v8_str(<span class="stringliteral">&quot;prop_name&quot;</span>);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <span class="comment">// Make sure delete of a non-existent hidden value works</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a06fa9cce622455b667e417e7ca367b7d">DeleteHiddenValue</a>(key));</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a98ad2e2a82b457a733bee13e4c2ba876">SetHiddenValue</a>(key, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1503)));</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1503, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a98ad2e2a82b457a733bee13e4c2ba876">SetHiddenValue</a>(key, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2002)));</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2002, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="comment">// Make sure we do not find the hidden property.</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a8aab0b4567cf4b5b01db94fe3765a278">Has</a>(empty));</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2002, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(empty)-&gt;IsUndefined());</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2002, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(empty, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2003)));</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2002, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2003, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(empty)-&gt;Int32Value());</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="comment">// Add another property and delete it afterwards to force the object in</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <span class="comment">// slow case.</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(prop_name, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2008)));</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2002, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2008, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(prop_name)-&gt;Int32Value());</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2002, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acf87d33c0190e1344dd08155006719ba">Delete</a>(prop_name));</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2002, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a98ad2e2a82b457a733bee13e4c2ba876">SetHiddenValue</a>(key, Handle&lt;Value&gt;()));</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key).IsEmpty());</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a98ad2e2a82b457a733bee13e4c2ba876">SetHiddenValue</a>(key, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2002)));</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a06fa9cce622455b667e417e7ca367b7d">DeleteHiddenValue</a>(key));</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key).IsEmpty());</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;}</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div>
<div class="line"><a name="l02155"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5ba6e50627c51e6e6dde580bee7c33cf"> 2155</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress97784) {</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">// Regression test for crbug.com/97784</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="comment">// Messing with the Object.prototype should not have effect on</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <span class="comment">// hidden properties.</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> key = v8_str(<span class="stringliteral">&quot;hidden&quot;</span>);</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  CompileRun(</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="stringliteral">&quot;set_called = false;&quot;</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <span class="stringliteral">&quot;Object.defineProperty(&quot;</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <span class="stringliteral">&quot;    Object.prototype,&quot;</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <span class="stringliteral">&quot;    &#39;hidden&#39;,&quot;</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <span class="stringliteral">&quot;    {get: function() { return 45; },&quot;</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="stringliteral">&quot;     set: function() { set_called = true; }})&quot;</span>);</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key).IsEmpty());</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <span class="comment">// Make sure that the getter and setter from Object.prototype is not invoked.</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="comment">// If it did we would have full access to the hidden properties in</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="comment">// the accessor.</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a98ad2e2a82b457a733bee13e4c2ba876">SetHiddenValue</a>(key, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42)));</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  ExpectFalse(<span class="stringliteral">&quot;set_called&quot;</span>);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;}</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> interceptor_for_hidden_properties_called;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorForHiddenProperties(</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    Local&lt;String&gt; name, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  interceptor_for_hidden_properties_called = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;}</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div>
<div class="line"><a name="l02191"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2af7d7e5b788438a1ec16709d5af4f4e"> 2191</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(HiddenPropertiesWithInterceptors) {</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  interceptor_for_hidden_properties_called = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> key = v8_str(<span class="stringliteral">&quot;api-test::hidden-key&quot;</span>);</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  <span class="comment">// Associate an interceptor with an object and start setting hidden values.</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  Local&lt;v8::ObjectTemplate&gt; instance_templ = fun_templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  instance_templ-&gt;SetNamedPropertyHandler(InterceptorForHiddenProperties);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  Local&lt;v8::Function&gt; <span class="keyword">function</span> = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  Local&lt;v8::Object&gt; obj = <span class="keyword">function</span>-&gt;NewInstance();</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;SetHiddenValue(key, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2302)));</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2302, obj-&gt;GetHiddenValue(key)-&gt;Int32Value());</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!interceptor_for_hidden_properties_called);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;}</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div>
<div class="line"><a name="l02211"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2101ae52aa5c3f2c3d1c4b780840c39e"> 2211</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(External) {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="keywordtype">int</span> x = 3;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  Local&lt;v8::External&gt; ext = <a class="code" href="../../d8/d0f/classv8_1_1_external.html#af13dc19fd1673516612ebe71ccf69ed1">v8::External::New</a>(&amp;x);</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ext&quot;</span>), ext);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  Local&lt;Value&gt; reext_obj = Script::Compile(v8_str(<span class="stringliteral">&quot;this.ext&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::External&gt;</a> reext = reext_obj.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d8/d0f/classv8_1_1_external.html">v8::External</a>&gt;();</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="keywordtype">int</span>* ptr = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span>*<span class="keyword">&gt;</span>(reext-&gt;<a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9994952e45f65562f020e2ea6b4f0b7b">Value</a>());</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(x, 3);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  *ptr = 10;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(x, 10);</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="comment">// Make sure unaligned pointers are wrapped properly.</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  <span class="keywordtype">char</span>* data = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">i::StrDup</a>(<span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  Local&lt;v8::Value&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">zero</a> = <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;data[0]);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;  Local&lt;v8::Value&gt; one = <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;data[1]);</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  Local&lt;v8::Value&gt; two = <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;data[2]);</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  Local&lt;v8::Value&gt; three = <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;data[3]);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="keywordtype">char</span>* char_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a>(zero));</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="charliteral">&#39;0&#39;</span>, *char_ptr);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  char_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a>(one));</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="charliteral">&#39;1&#39;</span>, *char_ptr);</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;  char_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a>(two));</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="charliteral">&#39;2&#39;</span>, *char_ptr);</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;  char_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a>(three));</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="charliteral">&#39;3&#39;</span>, *char_ptr);</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(data);</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;}</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div>
<div class="line"><a name="l02243"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a777e70686c3b70a404e5644c2329d071"> 2243</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GlobalHandle) {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;String&gt;</a> global;</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  {</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    Local&lt;String&gt; str = v8_str(<span class="stringliteral">&quot;str&quot;</span>);</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    global = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;String&gt;::New</a>(str);</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  }</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(global-&gt;Length(), 3);</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  global.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;}</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;</div>
<div class="line"><a name="l02255"></a><span class="lineno"><a class="line" href="../../d4/d74/class_weak_call_counter.html"> 2255</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d4/d74/class_weak_call_counter.html">WeakCallCounter</a> {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02257"></a><span class="lineno"><a class="line" href="../../d4/d74/class_weak_call_counter.html#a1f277ba177e1ce192db86f1201def216"> 2257</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d4/d74/class_weak_call_counter.html#a1f277ba177e1ce192db86f1201def216">WeakCallCounter</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) : id_(id), number_of_weak_calls_(0) { }</div>
<div class="line"><a name="l02258"></a><span class="lineno"><a class="line" href="../../d4/d74/class_weak_call_counter.html#a4a716406d3d9d4fdbbe46f100e648f3b"> 2258</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/d74/class_weak_call_counter.html#a4a716406d3d9d4fdbbe46f100e648f3b">id</a>() { <span class="keywordflow">return</span> id_; }</div>
<div class="line"><a name="l02259"></a><span class="lineno"><a class="line" href="../../d4/d74/class_weak_call_counter.html#aeb2624c7a86b765725fd80cd426e147d"> 2259</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d74/class_weak_call_counter.html#aeb2624c7a86b765725fd80cd426e147d">increment</a>() { number_of_weak_calls_++; }</div>
<div class="line"><a name="l02260"></a><span class="lineno"><a class="line" href="../../d4/d74/class_weak_call_counter.html#a037090a2fa13d046656f0065ba0c2075"> 2260</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/d74/class_weak_call_counter.html#a037090a2fa13d046656f0065ba0c2075">NumberOfWeakCalls</a>() { <span class="keywordflow">return</span> number_of_weak_calls_; }</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="keywordtype">int</span> id_;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="keywordtype">int</span> number_of_weak_calls_;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;};</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> WeakPointerCallback(Persistent&lt;Value&gt; handle, <span class="keywordtype">void</span>* <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <a class="code" href="../../d4/d74/class_weak_call_counter.html">WeakCallCounter</a>* counter = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d74/class_weak_call_counter.html">WeakCallCounter</a>*<span class="keyword">&gt;</span>(id);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, counter-&gt;<a class="code" href="../../d4/d74/class_weak_call_counter.html#a4a716406d3d9d4fdbbe46f100e648f3b">id</a>());</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  counter-&gt;<a class="code" href="../../d4/d74/class_weak_call_counter.html#aeb2624c7a86b765725fd80cd426e147d">increment</a>();</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  handle.Dispose();</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;}</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div>
<div class="line"><a name="l02275"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2b7d84f75dcb26b1290cf26430fc0ebe"> 2275</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ApiObjectGroups) {</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  Persistent&lt;Object&gt; g1s1;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  Persistent&lt;Object&gt; g1s2;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  Persistent&lt;Object&gt; g1c1;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  Persistent&lt;Object&gt; g2s1;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  Persistent&lt;Object&gt; g2s2;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  Persistent&lt;Object&gt; g2c1;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  <a class="code" href="../../d4/d74/class_weak_call_counter.html">WeakCallCounter</a> counter(1234);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  {</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    HandleScope scope;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    g1s1 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    g1s2 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    g1c1 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    g1s1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    g1s2.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    g1c1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    g2s1 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    g2s2 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    g2c1 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    g2s1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    g2s2.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    g2c1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  }</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  Persistent&lt;Object&gt; root = Persistent&lt;Object&gt;::New(g1s1);  <span class="comment">// make a root.</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <span class="comment">// Connect group 1 and 2, make a cycle.</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g1s2-&gt;Set(0, g2s2));</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g2s1-&gt;Set(0, g1s1));</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  {</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    Persistent&lt;Value&gt; g1_objects[] = { g1s1, g1s2 };</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    Persistent&lt;Value&gt; g1_children[] = { g1c1 };</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    Persistent&lt;Value&gt; g2_objects[] = { g2s1, g2s2 };</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    Persistent&lt;Value&gt; g2_children[] = { g2c1 };</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    V8::AddObjectGroup(g1_objects, 2);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    V8::AddImplicitReferences(g1s1, g1_children, 1);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    V8::AddObjectGroup(g2_objects, 2);</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    V8::AddImplicitReferences(g2s2, g2_children, 1);</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  }</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  <span class="comment">// Do a single full GC, ensure incremental marking is stopped.</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="comment">// All object should be alive.</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, counter.<a class="code" href="../../d4/d74/class_weak_call_counter.html#a037090a2fa13d046656f0065ba0c2075">NumberOfWeakCalls</a>());</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  <span class="comment">// Weaken the root.</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  root.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <span class="comment">// But make children strong roots---all the objects (except for children)</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <span class="comment">// should be collectable now.</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  g1c1.ClearWeak();</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  g2c1.ClearWeak();</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="comment">// Groups are deleted, rebuild groups.</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    Persistent&lt;Value&gt; g1_objects[] = { g1s1, g1s2 };</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    Persistent&lt;Value&gt; g1_children[] = { g1c1 };</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    Persistent&lt;Value&gt; g2_objects[] = { g2s1, g2s2 };</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    Persistent&lt;Value&gt; g2_children[] = { g2c1 };</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    V8::AddObjectGroup(g1_objects, 2);</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    V8::AddImplicitReferences(g1s1, g1_children, 1);</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    V8::AddObjectGroup(g2_objects, 2);</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    V8::AddImplicitReferences(g2s2, g2_children, 1);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="comment">// All objects should be gone. 5 global handles in total.</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, counter.<a class="code" href="../../d4/d74/class_weak_call_counter.html#a037090a2fa13d046656f0065ba0c2075">NumberOfWeakCalls</a>());</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <span class="comment">// And now make children weak again and collect them.</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  g1c1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  g2c1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, counter.<a class="code" href="../../d4/d74/class_weak_call_counter.html#a037090a2fa13d046656f0065ba0c2075">NumberOfWeakCalls</a>());</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;}</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div>
<div class="line"><a name="l02360"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aedee74b982afbe8597fb9ae8cc5ca135"> 2360</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ApiObjectGroupsCycle) {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <a class="code" href="../../d4/d74/class_weak_call_counter.html">WeakCallCounter</a> counter(1234);</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  Persistent&lt;Object&gt; g1s1;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  Persistent&lt;Object&gt; g1s2;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  Persistent&lt;Object&gt; g2s1;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  Persistent&lt;Object&gt; g2s2;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  Persistent&lt;Object&gt; g3s1;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  Persistent&lt;Object&gt; g3s2;</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  {</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    HandleScope scope;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    g1s1 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    g1s2 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    g1s1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    g1s2.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    g2s1 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    g2s2 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    g2s1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    g2s2.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    g3s1 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    g3s2 = Persistent&lt;Object&gt;::New(Object::New());</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    g3s1.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    g3s2.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  }</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  Persistent&lt;Object&gt; root = Persistent&lt;Object&gt;::New(g1s1);  <span class="comment">// make a root.</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <span class="comment">// Connect groups.  We&#39;re building the following cycle:</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="comment">// G1: { g1s1, g2s1 }, g1s1 implicitly references g2s1, ditto for other</span></div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  <span class="comment">// groups.</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  {</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    Persistent&lt;Value&gt; g1_objects[] = { g1s1, g1s2 };</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    Persistent&lt;Value&gt; g1_children[] = { g2s1 };</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    Persistent&lt;Value&gt; g2_objects[] = { g2s1, g2s2 };</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    Persistent&lt;Value&gt; g2_children[] = { g3s1 };</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    Persistent&lt;Value&gt; g3_objects[] = { g3s1, g3s2 };</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    Persistent&lt;Value&gt; g3_children[] = { g1s1 };</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    V8::AddObjectGroup(g1_objects, 2);</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    V8::AddImplicitReferences(g1s1, g1_children, 1);</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    V8::AddObjectGroup(g2_objects, 2);</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    V8::AddImplicitReferences(g2s1, g2_children, 1);</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    V8::AddObjectGroup(g3_objects, 2);</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    V8::AddImplicitReferences(g3s1, g3_children, 1);</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <span class="comment">// Do a single full GC</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="comment">// All object should be alive.</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, counter.<a class="code" href="../../d4/d74/class_weak_call_counter.html#a037090a2fa13d046656f0065ba0c2075">NumberOfWeakCalls</a>());</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="comment">// Weaken the root.</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  root.MakeWeak(reinterpret_cast&lt;void*&gt;(&amp;counter), &amp;WeakPointerCallback);</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="comment">// Groups are deleted, rebuild groups.</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  {</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    Persistent&lt;Value&gt; g1_objects[] = { g1s1, g1s2 };</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    Persistent&lt;Value&gt; g1_children[] = { g2s1 };</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    Persistent&lt;Value&gt; g2_objects[] = { g2s1, g2s2 };</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    Persistent&lt;Value&gt; g2_children[] = { g3s1 };</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    Persistent&lt;Value&gt; g3_objects[] = { g3s1, g3s2 };</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    Persistent&lt;Value&gt; g3_children[] = { g1s1 };</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    V8::AddObjectGroup(g1_objects, 2);</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    V8::AddImplicitReferences(g1s1, g1_children, 1);</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    V8::AddObjectGroup(g2_objects, 2);</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    V8::AddImplicitReferences(g2s1, g2_children, 1);</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    V8::AddObjectGroup(g3_objects, 2);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    V8::AddImplicitReferences(g3s1, g3_children, 1);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  }</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="comment">// All objects should be gone. 7 global handles in total.</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, counter.<a class="code" href="../../d4/d74/class_weak_call_counter.html#a037090a2fa13d046656f0065ba0c2075">NumberOfWeakCalls</a>());</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;}</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div>
<div class="line"><a name="l02442"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6747eece016ed8dc260acaaffdb9d230"> 2442</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptException) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;throw &#39;panama!&#39;;&quot;</span>));</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  String::AsciiValue exception_value(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(*exception_value, <span class="stringliteral">&quot;panama!&quot;</span>);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;}</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div>
<div class="line"><a name="l02455"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9a75d3b2e50a13d5eed2e8c1068f0acb"> 2455</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a9a75d3b2e50a13d5eed2e8c1068f0acb">message_received</a>;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> check_message_0(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a52143ab7f8a8ac8ea0cdbe70d282c73a">message</a>,</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                            <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> data) {</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6.75, message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a882197bfb98ad033a941d40e5445fe61">GetScriptResourceName</a>()-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a21bbf71d057f8357a5345fa4ee8b1593">NumberValue</a>());</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7.56, message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a899f334df613533a45ce9bf7ee23e1d3">GetScriptData</a>()-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a21bbf71d057f8357a5345fa4ee8b1593">NumberValue</a>());</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  message_received = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;}</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;</div>
<div class="line"><a name="l02466"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a152cd4f7a6a90916b901a82639647976"> 2466</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(MessageHandler0) {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  message_received = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!message_received);</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(check_message_0);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> origin =</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a>(v8_str(<span class="stringliteral">&quot;6.75&quot;</span>));</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> script = Script::Compile(v8_str(<span class="stringliteral">&quot;throw &#39;error&#39;&quot;</span>),</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                                                  &amp;origin);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#a404713fb4376624c69f531ee50b9db90">SetData</a>(v8_str(<span class="stringliteral">&quot;7.56&quot;</span>));</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message_received);</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  <span class="comment">// clear out the message listener</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(check_message_0);</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;}</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> check_message_1(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a52143ab7f8a8ac8ea0cdbe70d282c73a">message</a>,</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;                            <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> data) {</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(data-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1337, data-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  message_received = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;}</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div>
<div class="line"><a name="l02492"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab5bc4f4cabc5b0b969e2f12c575566e9"> 2492</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(MessageHandler1) {</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  message_received = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!message_received);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(check_message_1);</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  CompileRun(<span class="stringliteral">&quot;throw 1337;&quot;</span>);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message_received);</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="comment">// clear out the message listener</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(check_message_1);</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;}</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> check_message_2(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                            <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> data) {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(data-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a165136d736a2edcccac553aca4a5806e">IsObject</a>());</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> hidden_property =</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a>(*data)-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">GetHiddenValue</a>(v8_str(<span class="stringliteral">&quot;hidden key&quot;</span>));</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_str(<span class="stringliteral">&quot;hidden value&quot;</span>)-&gt;Equals(hidden_property));</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  message_received = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;}</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;</div>
<div class="line"><a name="l02516"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a33c9a3e97d93ccfbc8b7d4c156779966"> 2516</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(MessageHandler2) {</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  message_received = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!message_received);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(check_message_2);</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> error = <a class="code" href="../../da/d6a/classv8_1_1_exception.html#a44f54ef2da1a05eae6014be7874d1104">v8::Exception::Error</a>(v8_str(<span class="stringliteral">&quot;custom error&quot;</span>));</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a>(*error)-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a98ad2e2a82b457a733bee13e4c2ba876">SetHiddenValue</a>(v8_str(<span class="stringliteral">&quot;hidden key&quot;</span>),</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                                           v8_str(<span class="stringliteral">&quot;hidden value&quot;</span>));</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;error&quot;</span>), error);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  CompileRun(<span class="stringliteral">&quot;throw error;&quot;</span>);</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message_received);</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="comment">// clear out the message listener</span></div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(check_message_2);</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;}</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div>
<div class="line"><a name="l02533"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abf954ebaa298825026f65825d455c065"> 2533</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GetSetProperty) {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;foo&quot;</span>), v8_num(14));</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;12&quot;</span>), v8_num(92));</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(16), v8_num(32));</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_num(13), v8_num(56));</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = Script::Compile(v8_str(<span class="stringliteral">&quot;this.foo&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(14, foo-&gt;Int32Value());</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  Local&lt;Value&gt; twelve = Script::Compile(v8_str(<span class="stringliteral">&quot;this[12]&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(92, twelve-&gt;Int32Value());</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;  Local&lt;Value&gt; sixteen = Script::Compile(v8_str(<span class="stringliteral">&quot;this[16]&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32, sixteen-&gt;Int32Value());</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  Local&lt;Value&gt; thirteen = Script::Compile(v8_str(<span class="stringliteral">&quot;this[13]&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(56, thirteen-&gt;Int32Value());</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(92, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(12))-&gt;Int32Value());</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(92, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;12&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(92, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_num(12))-&gt;Int32Value());</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(16))-&gt;Int32Value());</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;16&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_num(16))-&gt;Int32Value());</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(56, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(13))-&gt;Int32Value());</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(56, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;13&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(56, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_num(13))-&gt;Int32Value());</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;}</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div>
<div class="line"><a name="l02560"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a64fd1466592e52b25d2759585560d02c"> 2560</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(<a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3">PropertyAttributes</a>) {</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <span class="comment">// none</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  Local&lt;String&gt; prop = v8_str(<span class="stringliteral">&quot;none&quot;</span>);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(prop, v8_num(7));</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a>, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;GetPropertyAttributes(prop));</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <span class="comment">// read-only</span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  prop = v8_str(<span class="stringliteral">&quot;read_only&quot;</span>);</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(prop, v8_num(7), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(prop)-&gt;Int32Value());</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;GetPropertyAttributes(prop));</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;read_only = 9&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(prop)-&gt;Int32Value());</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(prop, v8_num(10));</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(prop)-&gt;Int32Value());</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="comment">// dont-delete</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  prop = v8_str(<span class="stringliteral">&quot;dont_delete&quot;</span>);</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(prop, v8_num(13), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58">v8::DontDelete</a>);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(13, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(prop)-&gt;Int32Value());</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;delete dont_delete&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(13, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(prop)-&gt;Int32Value());</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58">v8::DontDelete</a>, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;GetPropertyAttributes(prop));</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  <span class="comment">// dont-enum</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  prop = v8_str(<span class="stringliteral">&quot;dont_enum&quot;</span>);</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(prop, v8_num(28), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a40b102bae12f7c44dea7ada8b13aa680">v8::DontEnum</a>);</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a40b102bae12f7c44dea7ada8b13aa680">v8::DontEnum</a>, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;GetPropertyAttributes(prop));</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  <span class="comment">// absent</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  prop = v8_str(<span class="stringliteral">&quot;absent&quot;</span>);</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a>, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;GetPropertyAttributes(prop));</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  Local&lt;Value&gt; fake_prop = v8_num(1);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a>, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;GetPropertyAttributes(fake_prop));</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  <span class="comment">// exception</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  Local&lt;Value&gt; exception =</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      CompileRun(<span class="stringliteral">&quot;({ toString: function() { throw &#39;exception&#39;;} })&quot;</span>);</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a>, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;GetPropertyAttributes(exception));</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  String::AsciiValue exception_value(try_catch.Exception());</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;exception&quot;</span>, *exception_value);</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;}</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;</div>
<div class="line"><a name="l02604"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab3eba789cb9986ba9f994d9d9d4a25af"> 2604</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Array) {</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  Local&lt;v8::Array&gt; array = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>();</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, array-&gt;Length());</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(array-&gt;Get(0)-&gt;IsUndefined());</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!array-&gt;Has(0));</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(array-&gt;Get(100)-&gt;IsUndefined());</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!array-&gt;Has(100));</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;  array-&gt;Set(2, v8_num(7));</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, array-&gt;Length());</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!array-&gt;Has(0));</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!array-&gt;Has(1));</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(array-&gt;Has(2));</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, array-&gt;Get(2)-&gt;Int32Value());</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;  Local&lt;Value&gt; obj = Script::Compile(v8_str(<span class="stringliteral">&quot;[1, 2, 3]&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  Local&lt;v8::Array&gt; arr = obj.As&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, arr-&gt;Length());</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, arr-&gt;Get(0)-&gt;Int32Value());</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, arr-&gt;Get(1)-&gt;Int32Value());</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, arr-&gt;Get(2)-&gt;Int32Value());</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  array = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>(27);</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(27, array-&gt;Length());</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  array = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>(-27);</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, array-&gt;Length());</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;}</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;</div>
<div class="line"><a name="l02632"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abe20430b300c607cdb042dd911ad7ddf"> 2632</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#abe20430b300c607cdb042dd911ad7ddf">HandleF</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  Local&lt;v8::Array&gt; result = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>());</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>(); i++)</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    result-&gt;Set(i, args[i]);</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="keywordflow">return</span> scope.<a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html#adb3ffeab349bfa91da0d6f8e0eb39736">Close</a>(result);</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;}</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div>
<div class="line"><a name="l02642"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae233106a3bf3dd165aee1fb03abe2b21"> 2642</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Vector) {</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  Local&lt;ObjectTemplate&gt; global = ObjectTemplate::New();</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;  global-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>), <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#abe20430b300c607cdb042dd911ad7ddf">HandleF</a>));</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, global);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* fun = <span class="stringliteral">&quot;f()&quot;</span>;</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;  Local&lt;v8::Array&gt; a0 = CompileRun(fun).As&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, a0-&gt;Length());</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* fun2 = <span class="stringliteral">&quot;f(11)&quot;</span>;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  Local&lt;v8::Array&gt; a1 = CompileRun(fun2).As&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, a1-&gt;Length());</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(11, a1-&gt;Get(0)-&gt;Int32Value());</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* fun3 = <span class="stringliteral">&quot;f(12, 13)&quot;</span>;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  Local&lt;v8::Array&gt; a2 = CompileRun(fun3).As&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, a2-&gt;Length());</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(12, a2-&gt;Get(0)-&gt;Int32Value());</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(13, a2-&gt;Get(1)-&gt;Int32Value());</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* fun4 = <span class="stringliteral">&quot;f(14, 15, 16)&quot;</span>;</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  Local&lt;v8::Array&gt; a3 = CompileRun(fun4).As&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, a3-&gt;Length());</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(14, a3-&gt;Get(0)-&gt;Int32Value());</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(15, a3-&gt;Get(1)-&gt;Int32Value());</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(16, a3-&gt;Get(2)-&gt;Int32Value());</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* fun5 = <span class="stringliteral">&quot;f(17, 18, 19, 20)&quot;</span>;</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;  Local&lt;v8::Array&gt; a4 = CompileRun(fun5).As&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, a4-&gt;Length());</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(17, a4-&gt;Get(0)-&gt;Int32Value());</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(18, a4-&gt;Get(1)-&gt;Int32Value());</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(19, a4-&gt;Get(2)-&gt;Int32Value());</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(20, a4-&gt;Get(3)-&gt;Int32Value());</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;}</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;</div>
<div class="line"><a name="l02680"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a22cf091f25d91a0fb8c05bca1148c753"> 2680</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionCall) {</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;  CompileRun(</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    <span class="stringliteral">&quot;function Foo() {&quot;</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <span class="stringliteral">&quot;  var result = [];&quot;</span></div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; arguments.length; i++) {&quot;</span></div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="stringliteral">&quot;    result.push(arguments[i]);&quot;</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <span class="stringliteral">&quot;  return result;&quot;</span></div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  Local&lt;Function&gt; Foo =</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      Local&lt;Function&gt;::Cast(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;Foo&quot;</span>)));</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>* args0 = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;  Local&lt;v8::Array&gt; a0 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;Call(Foo, 0, args0));</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, a0-&gt;Length());</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args1[] = { v8_num(1.1) };</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  Local&lt;v8::Array&gt; a1 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;Call(Foo, 1, args1));</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, a1-&gt;Length());</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1.1, a1-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;NumberValue());</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args2[] = { v8_num(2.2),</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                                v8_num(3.3) };</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  Local&lt;v8::Array&gt; a2 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;Call(Foo, 2, args2));</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, a2-&gt;Length());</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2.2, a2-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;NumberValue());</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3.3, a2-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1))-&gt;NumberValue());</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args3[] = { v8_num(4.4),</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                                v8_num(5.5),</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;                                v8_num(6.6) };</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  Local&lt;v8::Array&gt; a3 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;Call(Foo, 3, args3));</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, a3-&gt;Length());</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4.4, a3-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;NumberValue());</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5.5, a3-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1))-&gt;NumberValue());</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6.6, a3-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2))-&gt;NumberValue());</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args4[] = { v8_num(7.7),</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;                                v8_num(8.8),</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;                                v8_num(9.9),</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                                v8_num(10.11) };</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  Local&lt;v8::Array&gt; a4 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;Call(Foo, 4, args4));</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, a4-&gt;Length());</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7.7, a4-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;NumberValue());</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8.8, a4-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1))-&gt;NumberValue());</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(9.9, a4-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2))-&gt;NumberValue());</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(10.11, a4-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3))-&gt;NumberValue());</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;}</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* js_code_causing_out_of_memory =</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="stringliteral">&quot;var a = new Array(); while(true) a.push(a);&quot;</span>;</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="comment">// These tests run for a long time and prevent us from running tests</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="comment">// that come after them so they cannot run in parallel.</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aef4f63422185eb9ef53a8ce991578438"> 2738</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(OutOfMemory) {</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  <span class="comment">// It&#39;s not possible to read a snapshot into a heap with different dimensions.</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d52/classv8_1_1internal_1_1_snapshot.html#a8a49d253d7a89ed87906e2ac33c48eaa">i::Snapshot::IsEnabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <span class="comment">// Set heap limits.</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> K = 1024;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a> constraints;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#acbc7f014a83bddf32a5a29f5c9d6e6b0">set_max_young_space_size</a>(256 * K);</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#af87a04cf17d764721ff8220ce1b23de4">set_max_old_space_size</a>(4 * K * K);</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a591291cb35df7f2f371d01df15bfc2d8">v8::SetResourceConstraints</a>(&amp;constraints);</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;  <span class="comment">// Execute a script that causes out of memory.</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa5be4ced50fa5552e562823f71eb880f">v8::V8::IgnoreOutOfMemoryException</a>();</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  Local&lt;Script&gt; script =</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;      Script::Compile(String::New(js_code_causing_out_of_memory));</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  <span class="comment">// Check for out of memory state.</span></div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#ae7de191a8ae03d9dbdc72c1c2c433cda">HasOutOfMemoryException</a>());</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;}</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;</div>
<div class="line"><a name="l02762"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a414d7d6e89a88152d43f0b1ff473b80e"> 2762</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a414d7d6e89a88152d43f0b1ff473b80e">ProvokeOutOfMemory</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  Local&lt;Script&gt; script =</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;      Script::Compile(String::New(js_code_causing_out_of_memory));</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  <span class="comment">// Check for out of memory state.</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#ae7de191a8ae03d9dbdc72c1c2c433cda">HasOutOfMemoryException</a>());</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;}</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;</div>
<div class="line"><a name="l02779"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae10ed8f6a6fb40c866df8e8a4f247407"> 2779</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(OutOfMemoryNested) {</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;  <span class="comment">// It&#39;s not possible to read a snapshot into a heap with different dimensions.</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d52/classv8_1_1internal_1_1_snapshot.html#a8a49d253d7a89ed87906e2ac33c48eaa">i::Snapshot::IsEnabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <span class="comment">// Set heap limits.</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> K = 1024;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a> constraints;</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#acbc7f014a83bddf32a5a29f5c9d6e6b0">set_max_young_space_size</a>(256 * K);</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#af87a04cf17d764721ff8220ce1b23de4">set_max_old_space_size</a>(4 * K * K);</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a591291cb35df7f2f371d01df15bfc2d8">v8::SetResourceConstraints</a>(&amp;constraints);</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;ProvokeOutOfMemory&quot;</span>),</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a414d7d6e89a88152d43f0b1ff473b80e">ProvokeOutOfMemory</a>));</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa5be4ced50fa5552e562823f71eb880f">v8::V8::IgnoreOutOfMemoryException</a>();</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  Local&lt;Value&gt; result = CompileRun(</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="stringliteral">&quot;var thrown = false;&quot;</span></div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="stringliteral">&quot;  ProvokeOutOfMemory();&quot;</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <span class="stringliteral">&quot;} catch (e) {&quot;</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="stringliteral">&quot;  thrown = true;&quot;</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <span class="comment">// Check for out of memory state.</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#ae7de191a8ae03d9dbdc72c1c2c433cda">HasOutOfMemoryException</a>());</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;}</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;</div>
<div class="line"><a name="l02808"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa20bf91b1f483bbc5885e99f854ec456"> 2808</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(HugeConsStringOutOfMemory) {</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  <span class="comment">// It&#39;s not possible to read a snapshot into a heap with different dimensions.</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d52/classv8_1_1internal_1_1_snapshot.html#a8a49d253d7a89ed87906e2ac33c48eaa">i::Snapshot::IsEnabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="comment">// Set heap limits.</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> K = 1024;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a> constraints;</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#acbc7f014a83bddf32a5a29f5c9d6e6b0">set_max_young_space_size</a>(256 * K);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#af87a04cf17d764721ff8220ce1b23de4">set_max_old_space_size</a>(3 * K * K);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a591291cb35df7f2f371d01df15bfc2d8">v8::SetResourceConstraints</a>(&amp;constraints);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <span class="comment">// Execute a script that causes out of memory.</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa5be4ced50fa5552e562823f71eb880f">v8::V8::IgnoreOutOfMemoryException</a>();</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  <span class="comment">// Build huge string. This should fail with out of memory exception.</span></div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  Local&lt;Value&gt; result = CompileRun(</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="stringliteral">&quot;var str = Array.prototype.join.call({length: 513}, \&quot;A\&quot;).toUpperCase();&quot;</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 22; i++) { str = str + str; }&quot;</span>);</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="comment">// Check for out of memory state.</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#ae7de191a8ae03d9dbdc72c1c2c433cda">HasOutOfMemoryException</a>());</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;}</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;</div>
<div class="line"><a name="l02835"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac09fbd12fce0dd59fe7586bdf10970c1"> 2835</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ConstructCall) {</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  CompileRun(</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    <span class="stringliteral">&quot;function Foo() {&quot;</span></div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <span class="stringliteral">&quot;  var result = [];&quot;</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; arguments.length; i++) {&quot;</span></div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="stringliteral">&quot;    result.push(arguments[i]);&quot;</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <span class="stringliteral">&quot;  return result;&quot;</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  Local&lt;Function&gt; Foo =</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;      Local&lt;Function&gt;::Cast(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;Foo&quot;</span>)));</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>* args0 = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  Local&lt;v8::Array&gt; a0 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;NewInstance(0, args0));</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, a0-&gt;Length());</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args1[] = { v8_num(1.1) };</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;  Local&lt;v8::Array&gt; a1 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;NewInstance(1, args1));</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, a1-&gt;Length());</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1.1, a1-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;NumberValue());</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args2[] = { v8_num(2.2),</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;                                v8_num(3.3) };</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  Local&lt;v8::Array&gt; a2 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;NewInstance(2, args2));</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, a2-&gt;Length());</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2.2, a2-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;NumberValue());</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3.3, a2-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1))-&gt;NumberValue());</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args3[] = { v8_num(4.4),</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                                v8_num(5.5),</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                                v8_num(6.6) };</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  Local&lt;v8::Array&gt; a3 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;NewInstance(3, args3));</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, a3-&gt;Length());</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4.4, a3-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;NumberValue());</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5.5, a3-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1))-&gt;NumberValue());</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6.6, a3-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2))-&gt;NumberValue());</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args4[] = { v8_num(7.7),</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;                                v8_num(8.8),</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;                                v8_num(9.9),</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;                                v8_num(10.11) };</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  Local&lt;v8::Array&gt; a4 = Local&lt;v8::Array&gt;::Cast(Foo-&gt;NewInstance(4, args4));</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, a4-&gt;Length());</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7.7, a4-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;NumberValue());</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8.8, a4-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1))-&gt;NumberValue());</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(9.9, a4-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2))-&gt;NumberValue());</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(10.11, a4-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3))-&gt;NumberValue());</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;}</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckUncle(<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a>* try_catch) {</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch-&gt;<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;  String::AsciiValue str_value(try_catch-&gt;<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(*str_value, <span class="stringliteral">&quot;uncle?&quot;</span>);</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;  try_catch-&gt;<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;}</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;</div>
<div class="line"><a name="l02895"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab1e3358b3a36e321c05cdbd76c76ea81"> 2895</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ConversionNumber) {</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  <span class="comment">// Very large number.</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = Math.pow(2,32) * 1237;&quot;</span>);</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  Local&lt;Value&gt; obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5312874545152.0, obj-&gt;ToNumber()-&gt;Value());</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, obj-&gt;ToInt32()-&gt;Value());</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(0u == obj-&gt;ToUint32()-&gt;Value());  <span class="comment">// NOLINT - no CHECK_EQ for unsigned.</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  <span class="comment">// Large number.</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = -1234567890123;&quot;</span>);</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-1234567890123.0, obj-&gt;ToNumber()-&gt;Value());</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-1912276171, obj-&gt;ToInt32()-&gt;Value());</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(2382691125u == obj-&gt;ToUint32()-&gt;Value());  <span class="comment">// NOLINT</span></div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  <span class="comment">// Small positive integer.</span></div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = 42;&quot;</span>);</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42.0, obj-&gt;ToNumber()-&gt;Value());</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, obj-&gt;ToInt32()-&gt;Value());</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(42u == obj-&gt;ToUint32()-&gt;Value());  <span class="comment">// NOLINT</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  <span class="comment">// Negative integer.</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = -37;&quot;</span>);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-37.0, obj-&gt;ToNumber()-&gt;Value());</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-37, obj-&gt;ToInt32()-&gt;Value());</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(4294967259u == obj-&gt;ToUint32()-&gt;Value());  <span class="comment">// NOLINT</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;  <span class="comment">// Positive non-int32 integer.</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = 0x81234567;&quot;</span>);</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2166572391.0, obj-&gt;ToNumber()-&gt;Value());</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-2128394905, obj-&gt;ToInt32()-&gt;Value());</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(2166572391u == obj-&gt;ToUint32()-&gt;Value());  <span class="comment">// NOLINT</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  <span class="comment">// Fraction.</span></div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = 42.3;&quot;</span>);</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42.3, obj-&gt;ToNumber()-&gt;Value());</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, obj-&gt;ToInt32()-&gt;Value());</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(42u == obj-&gt;ToUint32()-&gt;Value());  <span class="comment">// NOLINT</span></div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;  <span class="comment">// Large negative fraction.</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = -5726623061.75;&quot;</span>);</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-5726623061.75, obj-&gt;ToNumber()-&gt;Value());</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-1431655765, obj-&gt;ToInt32()-&gt;Value());</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(2863311531u == obj-&gt;ToUint32()-&gt;Value());  <span class="comment">// NOLINT</span></div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;}</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;</div>
<div class="line"><a name="l02943"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#adc4c36b88c4848735627dfcfa691ef30"> 2943</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(isNumberType) {</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;  <span class="comment">// Very large number.</span></div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = Math.pow(2,32) * 1237;&quot;</span>);</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;  Local&lt;Value&gt; obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsInt32());</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsUint32());</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  <span class="comment">// Large negative number.</span></div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = -1234567890123;&quot;</span>);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsInt32());</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsUint32());</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  <span class="comment">// Small positive integer.</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = 42;&quot;</span>);</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;IsInt32());</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;IsUint32());</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  <span class="comment">// Negative integer.</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = -37;&quot;</span>);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;IsInt32());</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsUint32());</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <span class="comment">// Positive non-int32 integer.</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = 0x81234567;&quot;</span>);</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsInt32());</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;IsUint32());</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <span class="comment">// Fraction.</span></div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = 42.3;&quot;</span>);</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsInt32());</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsUint32());</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <span class="comment">// Large negative fraction.</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = -5726623061.75;&quot;</span>);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsInt32());</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsUint32());</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  <span class="comment">// Positive zero</span></div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = 0.0;&quot;</span>);</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;IsInt32());</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;IsUint32());</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <span class="comment">// Positive zero</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = -0.0;&quot;</span>);</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsInt32());</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;IsUint32());</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;}</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;</div>
<div class="line"><a name="l02994"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a15d9de3cf53d17c5b59f50ccd9a54a61"> 2994</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ConversionException) {</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  CompileRun(</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <span class="stringliteral">&quot;function TestClass() { };&quot;</span></div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="stringliteral">&quot;TestClass.prototype.toString = function () { throw &#39;uncle?&#39;; };&quot;</span></div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="stringliteral">&quot;var obj = new TestClass();&quot;</span>);</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  Local&lt;Value&gt; obj = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>));</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  Local&lt;Value&gt; to_string_result = obj-&gt;ToString();</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(to_string_result.IsEmpty());</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;  Local&lt;Value&gt; to_number_result = obj-&gt;ToNumber();</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(to_number_result.IsEmpty());</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  Local&lt;Value&gt; to_integer_result = obj-&gt;ToInteger();</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(to_integer_result.IsEmpty());</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  Local&lt;Value&gt; to_uint32_result = obj-&gt;ToUint32();</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(to_uint32_result.IsEmpty());</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  Local&lt;Value&gt; to_int32_result = obj-&gt;ToInt32();</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(to_int32_result.IsEmpty());</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;  Local&lt;Value&gt; to_object_result = <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>()-&gt;ToObject();</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(to_object_result.IsEmpty());</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;  try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> int32_value = obj-&gt;Int32Value();</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, int32_value);</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;  uint32_t uint32_value = obj-&gt;Uint32Value();</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, uint32_value);</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  <span class="keywordtype">double</span> number_value = obj-&gt;NumberValue();</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(0, IsNaN(number_value));</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  int64_t integer_value = obj-&gt;IntegerValue();</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0.0, static_cast&lt;double&gt;(integer_value));</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;  CheckUncle(&amp;try_catch);</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;}</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div>
<div class="line"><a name="l03048"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acfe62fd67d857025ff23d03385661686"> 3048</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#acfe62fd67d857025ff23d03385661686">ThrowFromC</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(v8_str(<span class="stringliteral">&quot;konto&quot;</span>));</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;}</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;</div>
<div class="line"><a name="l03054"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab71e8a1a9e7fa14d0b7cfa28980e1dc7"> 3054</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#ab71e8a1a9e7fa14d0b7cfa28980e1dc7">CCatcher</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  <span class="keywordflow">if</span> (args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>() &lt; 1) <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>();</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  Local&lt;Value&gt; result = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(args[0]-&gt;ToString())-&gt;Run();</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>() || result.IsEmpty());</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dac/classv8_1_1_boolean.html#af25ca2bc33dc64a35364943b0f1522ee">v8::Boolean::New</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;}</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;</div>
<div class="line"><a name="l03064"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a83219ce85d8ef25165f50b8f452f3616"> 3064</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(APICatch) {</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;ThrowFromC&quot;</span>),</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#acfe62fd67d857025ff23d03385661686">ThrowFromC</a>));</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  CompileRun(</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <span class="stringliteral">&quot;var thrown = false;&quot;</span></div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="stringliteral">&quot;  ThrowFromC();&quot;</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    <span class="stringliteral">&quot;} catch (e) {&quot;</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    <span class="stringliteral">&quot;  thrown = true;&quot;</span></div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  Local&lt;Value&gt; thrown = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;thrown&quot;</span>));</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(thrown-&gt;BooleanValue());</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;}</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div>
<div class="line"><a name="l03082"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a45da8de27771d7d5ada45987ca032ce7"> 3082</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(APIThrowTryCatch) {</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;ThrowFromC&quot;</span>),</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#acfe62fd67d857025ff23d03385661686">ThrowFromC</a>));</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  CompileRun(<span class="stringliteral">&quot;ThrowFromC();&quot;</span>);</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;}</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;<span class="comment">// Test that a try-finally block doesn&#39;t shadow a try-catch block</span></div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;<span class="comment">// when setting up an external handler.</span></div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="comment">// BUG(271): Some of the exception propagation does not work on the</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="comment">// ARM simulator because the simulator separates the C++ stack and the</span></div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;<span class="comment">// JS stack.  This test therefore fails on the simulator.  The test is</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;<span class="comment">// not threaded to allow the threading tests to run on the simulator.</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8752f3f847724e351d98f921082dbf4d"> 3101</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(TryCatchInTryFinally) {</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;CCatcher&quot;</span>),</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#ab71e8a1a9e7fa14d0b7cfa28980e1dc7">CCatcher</a>));</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  Local&lt;Value&gt; result = CompileRun(<span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;                                   <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;                                   <span class="stringliteral">&quot;    CCatcher(&#39;throw 7;&#39;);&quot;</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;                                   <span class="stringliteral">&quot;  } finally {&quot;</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;                                   <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;                                   <span class="stringliteral">&quot;} catch (e) {&quot;</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;                                   <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsTrue());</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;}</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> check_reference_error_message(</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> data) {</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* reference_error = <span class="stringliteral">&quot;Uncaught ReferenceError: asdf is not defined&quot;</span>;</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a723798740011db75f68bed2d5ccb4cd4">Get</a>()-&gt;Equals(v8_str(reference_error)));</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;}</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../d1/deb/test-thread-termination_8cc.html#a6b2ceb968be9cf25c70635f8862d8187">Fail</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;}</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;<span class="comment">// Test that overwritten methods are not invoked on uncaught exception</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;<span class="comment">// formatting. However, they are invoked when performing normal error</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;<span class="comment">// string conversions.</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac91ee80641b45da4ac07d9c35bcd023a"> 3136</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(APIThrowMessageOverwrittenToString) {</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(check_reference_error_message);</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;fail&quot;</span>), <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../d1/deb/test-thread-termination_8cc.html#a6b2ceb968be9cf25c70635f8862d8187">Fail</a>));</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, templ);</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;  CompileRun(<span class="stringliteral">&quot;asdf;&quot;</span>);</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  CompileRun(<span class="stringliteral">&quot;var limit = {};&quot;</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;             <span class="stringliteral">&quot;limit.valueOf = fail;&quot;</span></div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;             <span class="stringliteral">&quot;Error.stackTraceLimit = limit;&quot;</span>);</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  CompileRun(<span class="stringliteral">&quot;asdf&quot;</span>);</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;  CompileRun(<span class="stringliteral">&quot;Array.prototype.pop = fail;&quot;</span>);</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.prototype.hasOwnProperty = fail;&quot;</span>);</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.prototype.toString = function f() { return &#39;Yikes&#39;; }&quot;</span>);</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  CompileRun(<span class="stringliteral">&quot;Number.prototype.toString = function f() { return &#39;Yikes&#39;; }&quot;</span>);</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;  CompileRun(<span class="stringliteral">&quot;String.prototype.toString = function f() { return &#39;Yikes&#39;; }&quot;</span>);</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;  CompileRun(<span class="stringliteral">&quot;ReferenceError.prototype.toString =&quot;</span></div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;             <span class="stringliteral">&quot;  function() { return &#39;Whoops&#39; }&quot;</span>);</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  CompileRun(<span class="stringliteral">&quot;asdf;&quot;</span>);</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  CompileRun(<span class="stringliteral">&quot;ReferenceError.prototype.constructor.name = void 0;&quot;</span>);</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  CompileRun(<span class="stringliteral">&quot;asdf;&quot;</span>);</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  CompileRun(<span class="stringliteral">&quot;ReferenceError.prototype.constructor = void 0;&quot;</span>);</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  CompileRun(<span class="stringliteral">&quot;asdf;&quot;</span>);</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  CompileRun(<span class="stringliteral">&quot;ReferenceError.prototype.__proto__ = new Object();&quot;</span>);</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;  CompileRun(<span class="stringliteral">&quot;asdf;&quot;</span>);</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;  CompileRun(<span class="stringliteral">&quot;ReferenceError.prototype = new Object();&quot;</span>);</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  CompileRun(<span class="stringliteral">&quot;asdf;&quot;</span>);</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <span class="keywordtype">string</span> = CompileRun(<span class="stringliteral">&quot;try { asdf; } catch(e) { e + &#39;&#39;; }&quot;</span>);</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a0204658c4cdd2c008f8a8ab73d854412">Equals</a>(v8_str(<span class="stringliteral">&quot;Whoops&quot;</span>)));</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  CompileRun(<span class="stringliteral">&quot;ReferenceError.prototype.constructor = new Object();&quot;</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;             <span class="stringliteral">&quot;ReferenceError.prototype.constructor.name = 1;&quot;</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;             <span class="stringliteral">&quot;Number.prototype.toString = function() { return &#39;Whoops&#39;; };&quot;</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;             <span class="stringliteral">&quot;ReferenceError.prototype.toString = Object.prototype.toString;&quot;</span>);</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;  CompileRun(<span class="stringliteral">&quot;asdf;&quot;</span>);</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(check_reference_error_message);</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;}</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> check_custom_error_message(</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> data) {</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* uncaught_error = <span class="stringliteral">&quot;Uncaught MyError toString&quot;</span>;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a723798740011db75f68bed2d5ccb4cd4">Get</a>()-&gt;Equals(v8_str(uncaught_error)));</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;}</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;</div>
<div class="line"><a name="l03182"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac86fa13483a7fdb26d5fb9d2f9eadcd2"> 3182</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CustomErrorToString) {</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(check_custom_error_message);</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;  CompileRun(</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    <span class="stringliteral">&quot;function MyError(name, message) {                   &quot;</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <span class="stringliteral">&quot;  this.name = name;                                 &quot;</span></div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <span class="stringliteral">&quot;  this.message = message;                           &quot;</span></div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="stringliteral">&quot;}                                                   &quot;</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <span class="stringliteral">&quot;MyError.prototype = Object.create(Error.prototype); &quot;</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <span class="stringliteral">&quot;MyError.prototype.toString = function() {           &quot;</span></div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="stringliteral">&quot;  return &#39;MyError toString&#39;;                        &quot;</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    <span class="stringliteral">&quot;};                                                  &quot;</span></div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    <span class="stringliteral">&quot;throw new MyError(&#39;my name&#39;, &#39;my message&#39;);         &quot;</span>);</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(check_custom_error_message);</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;}</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> receive_message(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                            <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> data) {</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a723798740011db75f68bed2d5ccb4cd4">Get</a>();</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  message_received = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;}</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;</div>
<div class="line"><a name="l03207"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9c6dc1db6d6ca7edc093926ff60aa2b2"> 3207</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(APIThrowMessage) {</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;  message_received = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(receive_message);</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;ThrowFromC&quot;</span>),</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#acfe62fd67d857025ff23d03385661686">ThrowFromC</a>));</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  CompileRun(<span class="stringliteral">&quot;ThrowFromC();&quot;</span>);</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message_received);</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(receive_message);</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;}</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;</div>
<div class="line"><a name="l03221"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aea15d5bb4966913aaf0e6e9a90dbee5f"> 3221</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(APIThrowMessageAndVerboseTryCatch) {</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;  message_received = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(receive_message);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;ThrowFromC&quot;</span>),</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#acfe62fd67d857025ff23d03385661686">ThrowFromC</a>));</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#aefc75ae033e36266e6d4c16028e43577">SetVerbose</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;  Local&lt;Value&gt; result = CompileRun(<span class="stringliteral">&quot;ThrowFromC();&quot;</span>);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message_received);</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(receive_message);</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;}</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;</div>
<div class="line"><a name="l03239"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acf4cef855bd45de9888d306929407838"> 3239</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(APIStackOverflowAndVerboseTryCatch) {</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  message_received = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(receive_message);</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;  try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#aefc75ae033e36266e6d4c16028e43577">SetVerbose</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  Local&lt;Value&gt; result = CompileRun(<span class="stringliteral">&quot;function foo() { foo(); } foo();&quot;</span>);</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message_received);</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(receive_message);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;}</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;</div>
<div class="line"><a name="l03254"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7d7c33433f44a8e7f0ae060357002c5b"> 3254</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalScriptException) {</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;ThrowFromC&quot;</span>),</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#acfe62fd67d857025ff23d03385661686">ThrowFromC</a>));</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;  Local&lt;Script&gt; script</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      = Script::Compile(v8_str(<span class="stringliteral">&quot;ThrowFromC(); throw &#39;panama&#39;;&quot;</span>));</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;  Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;  String::AsciiValue exception_value(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;konto&quot;</span>, *exception_value);</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;}</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;</div>
<div class="line"><a name="l03273"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4faa2ae1537a98246fdece5a27bfe315"> 3273</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a4faa2ae1537a98246fdece5a27bfe315">CThrowCountDown</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>());</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  <span class="keywordtype">int</span> count = args[0]-&gt;Int32Value();</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;  <span class="keywordtype">int</span> cInterval = args[2]-&gt;Int32Value();</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;  <span class="keywordflow">if</span> (count == 0) {</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(v8_str(<span class="stringliteral">&quot;FromC&quot;</span>));</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    Local&lt;v8::Object&gt; global = Context::GetCurrent()-&gt;Global();</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    Local&lt;Value&gt; fun = global-&gt;Get(v8_str(<span class="stringliteral">&quot;JSThrowCountDown&quot;</span>));</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> argv[] = { v8_num(count - 1),</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;                                 args[1],</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;                                 args[2],</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;                                 args[3] };</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="keywordflow">if</span> (count % cInterval == 0) {</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;      <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      Local&lt;Value&gt; result = fun.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;Function&gt;()-&gt;Call(global, 4, argv);</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;      <span class="keywordtype">int</span> expected = args[3]-&gt;Int32Value();</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      <span class="keywordflow">if</span> (try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>()) {</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected, count);</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!i::Isolate::Current()-&gt;has_scheduled_exception());</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(expected, count);</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      }</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;      <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;      <span class="keywordflow">return</span> fun.As&lt;Function&gt;()-&gt;Call(global, 4, argv);</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    }</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;  }</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;}</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;</div>
<div class="line"><a name="l03306"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a99f79a043be8e4de7f839d0fb024a93a"> 3306</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a99f79a043be8e4de7f839d0fb024a93a">JSCheck</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>());</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <span class="keywordtype">bool</span> equality = args[0]-&gt;BooleanValue();</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;  <span class="keywordtype">int</span> count = args[1]-&gt;Int32Value();</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;  <span class="keywordtype">int</span> expected = args[2]-&gt;Int32Value();</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  <span class="keywordflow">if</span> (equality) {</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(count, expected);</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(count, expected);</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;  }</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;}</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;</div>
<div class="line"><a name="l03321"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab328580edadd008db936c8d732d15ddc"> 3321</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(EvalInTryFinally) {</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;  CompileRun(<span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;             <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;             <span class="stringliteral">&quot;    eval(&#39;asldkf (*&amp;^&amp;*^&#39;);&quot;</span></div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;             <span class="stringliteral">&quot;  } finally {&quot;</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;             <span class="stringliteral">&quot;    return;&quot;</span></div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;             <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;             <span class="stringliteral">&quot;})()&quot;</span>);</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;}</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;<span class="comment">// This test works by making a stack of alternating JavaScript and C</span></div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="comment">// activations.  These activations set up exception handlers with regular</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="comment">// intervals, one interval for C activations and another for JavaScript</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;<span class="comment">// activations.  When enough activations have been created an exception is</span></div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;<span class="comment">// thrown and we check that the right activation catches the exception and that</span></div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;<span class="comment">// no other activations do.  The right activation is always the topmost one with</span></div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;<span class="comment">// a handler, regardless of whether it is in JavaScript or C.</span></div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;<span class="comment">// The notation used to describe a test case looks like this:</span></div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;<span class="comment">//    *JS[4] *C[3] @JS[2] C[1] JS[0]</span></div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;<span class="comment">// Each entry is an activation, either JS or C.  The index is the count at that</span></div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;<span class="comment">// level.  Stars identify activations with exception handlers, the @ identifies</span></div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;<span class="comment">// the exception handler that should catch the exception.</span></div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;<span class="comment">// BUG(271): Some of the exception propagation does not work on the</span></div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;<span class="comment">// ARM simulator because the simulator separates the C++ stack and the</span></div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;<span class="comment">// JS stack.  This test therefore fails on the simulator.  The test is</span></div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;<span class="comment">// not threaded to allow the threading tests to run on the simulator.</span></div>
<div class="line"><a name="l03356"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa11967f8086191a1d09e88e96b7ef2e9"> 3356</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ExceptionOrder) {</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;check&quot;</span>), <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a99f79a043be8e4de7f839d0fb024a93a">JSCheck</a>));</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;CThrowCountDown&quot;</span>),</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a4faa2ae1537a98246fdece5a27bfe315">CThrowCountDown</a>));</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;  CompileRun(</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <span class="stringliteral">&quot;function JSThrowCountDown(count, jsInterval, cInterval, expected) {&quot;</span></div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <span class="stringliteral">&quot;  if (count == 0) throw &#39;FromJS&#39;;&quot;</span></div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="stringliteral">&quot;  if (count % jsInterval == 0) {&quot;</span></div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    <span class="stringliteral">&quot;    try {&quot;</span></div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <span class="stringliteral">&quot;      var value = CThrowCountDown(count - 1,&quot;</span></div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="stringliteral">&quot;                                  jsInterval,&quot;</span></div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    <span class="stringliteral">&quot;                                  cInterval,&quot;</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    <span class="stringliteral">&quot;                                  expected);&quot;</span></div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    <span class="stringliteral">&quot;      check(false, count, expected);&quot;</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;    <span class="stringliteral">&quot;      return value;&quot;</span></div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;    <span class="stringliteral">&quot;    } catch (e) {&quot;</span></div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;    <span class="stringliteral">&quot;      check(true, count, expected);&quot;</span></div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    <span class="stringliteral">&quot;  } else {&quot;</span></div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <span class="stringliteral">&quot;    return CThrowCountDown(count - 1, jsInterval, cInterval, expected);&quot;</span></div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;  Local&lt;Function&gt; fun =</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;      Local&lt;Function&gt;::Cast(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;JSThrowCountDown&quot;</span>)));</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> argc = 4;</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;  <span class="comment">//                             count      jsInterval cInterval  expected</span></div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;  <span class="comment">// *JS[4] *C[3] @JS[2] C[1] JS[0]</span></div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> a0[argc] = { v8_num(4), v8_num(2), v8_num(3), v8_num(2) };</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;  fun-&gt;Call(fun, argc, a0);</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;  <span class="comment">// JS[5] *C[4] JS[3] @C[2] JS[1] C[0]</span></div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> a1[argc] = { v8_num(5), v8_num(6), v8_num(1), v8_num(2) };</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;  fun-&gt;Call(fun, argc, a1);</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;  <span class="comment">// JS[6] @C[5] JS[4] C[3] JS[2] C[1] JS[0]</span></div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> a2[argc] = { v8_num(6), v8_num(7), v8_num(5), v8_num(5) };</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;  fun-&gt;Call(fun, argc, a2);</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;  <span class="comment">// @JS[6] C[5] JS[4] C[3] JS[2] C[1] JS[0]</span></div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> a3[argc] = { v8_num(6), v8_num(6), v8_num(7), v8_num(6) };</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;  fun-&gt;Call(fun, argc, a3);</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <span class="comment">// JS[6] *C[5] @JS[4] C[3] JS[2] C[1] JS[0]</span></div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> a4[argc] = { v8_num(6), v8_num(4), v8_num(5), v8_num(4) };</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;  fun-&gt;Call(fun, argc, a4);</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <span class="comment">// JS[6] C[5] *JS[4] @C[3] JS[2] C[1] JS[0]</span></div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> a5[argc] = { v8_num(6), v8_num(4), v8_num(3), v8_num(3) };</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;  fun-&gt;Call(fun, argc, a5);</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;}</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;</div>
<div class="line"><a name="l03413"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#adfce1877d0e64f1cef1610811e6372c9"> 3413</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#adfce1877d0e64f1cef1610811e6372c9">ThrowValue</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>());</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(args[0]);</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;}</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;</div>
<div class="line"><a name="l03420"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a767914405dc945ed9ab72130c3c4f5b6"> 3420</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ThrowValues) {</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;Throw&quot;</span>), <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#adfce1877d0e64f1cef1610811e6372c9">ThrowValue</a>));</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Array&gt;::Cast</a>(CompileRun(</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <span class="stringliteral">&quot;function Run(obj) {&quot;</span></div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    <span class="stringliteral">&quot;    Throw(obj);&quot;</span></div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="stringliteral">&quot;  } catch (e) {&quot;</span></div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <span class="stringliteral">&quot;    return e;&quot;</span></div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="stringliteral">&quot;  return &#39;no exception&#39;;&quot;</span></div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    <span class="stringliteral">&quot;[Run(&#39;str&#39;), Run(1), Run(0), Run(null), Run(void 0)];&quot;</span>));</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, result-&gt;<a class="code" href="../../d3/d32/classv8_1_1_array.html#a9d79066f5b28c73a0f6f248bbf846fe1">Length</a>());</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0))-&gt;IsString());</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1))-&gt;IsNumber());</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1))-&gt;Int32Value());</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2))-&gt;IsNumber());</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2))-&gt;Int32Value());</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3))-&gt;IsNull());</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(4))-&gt;IsUndefined());</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;}</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;</div>
<div class="line"><a name="l03446"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad08d0a3840ffbd8c4fcf1ccfa3c10fc6"> 3446</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CatchZero) {</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;throw 10&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(10, try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>()-&gt;Int32Value());</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;throw 0&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>()-&gt;Int32Value());</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;}</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;</div>
<div class="line"><a name="l03462"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad018415da18720de71233f6799d48982"> 3462</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CatchExceptionFromWith) {</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;var o = {}; with (o) { throw 42; }&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;}</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;</div>
<div class="line"><a name="l03472"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac3a2443a6559f8ac023aeb5126e2375f"> 3472</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TryCatchAndFinallyHidingException) {</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;  CompileRun(<span class="stringliteral">&quot;function f(k) { try { this[k]; } finally { return 0; } };&quot;</span>);</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;  CompileRun(<span class="stringliteral">&quot;f({toString: function() { throw 42; }});&quot;</span>);</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;}</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;</div>
<div class="line"><a name="l03483"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3cb4269abaf9e4d39fceda9d2a9b8a39"> 3483</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a3cb4269abaf9e4d39fceda9d2a9b8a39">WithTryCatch</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;}</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;</div>
<div class="line"><a name="l03489"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a73c7323727d56850a5de4599fa4d90cd"> 3489</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TryCatchAndFinally) {</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;      v8_str(<span class="stringliteral">&quot;native_with_try_catch&quot;</span>),</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a3cb4269abaf9e4d39fceda9d2a9b8a39">WithTryCatch</a>)-&gt;GetFunction());</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;  CompileRun(</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;      <span class="stringliteral">&quot;try {\n&quot;</span></div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <span class="stringliteral">&quot;  throw new Error(&#39;a&#39;);\n&quot;</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      <span class="stringliteral">&quot;} finally {\n&quot;</span></div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;      <span class="stringliteral">&quot;  native_with_try_catch();\n&quot;</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      <span class="stringliteral">&quot;}\n&quot;</span>);</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;}</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;</div>
<div class="line"><a name="l03507"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a98eacb3f2fe269725c70a15d3d566c4d"> 3507</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Equality) {</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;  <span class="comment">// Check that equality works at all before relying on CHECK_EQ</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_str(<span class="stringliteral">&quot;a&quot;</span>)-&gt;Equals(v8_str(<span class="stringliteral">&quot;a&quot;</span>)));</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!v8_str(<span class="stringliteral">&quot;a&quot;</span>)-&gt;Equals(v8_str(<span class="stringliteral">&quot;b&quot;</span>)));</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;a&quot;</span>), v8_str(<span class="stringliteral">&quot;a&quot;</span>));</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(v8_str(<span class="stringliteral">&quot;a&quot;</span>), v8_str(<span class="stringliteral">&quot;b&quot;</span>));</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(1), v8_num(1));</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(1.00), v8_num(1));</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(v8_num(1), v8_num(2));</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;  <span class="comment">// Assume String is not symbol.</span></div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_str(<span class="stringliteral">&quot;a&quot;</span>)-&gt;StrictEquals(v8_str(<span class="stringliteral">&quot;a&quot;</span>)));</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!v8_str(<span class="stringliteral">&quot;a&quot;</span>)-&gt;StrictEquals(v8_str(<span class="stringliteral">&quot;b&quot;</span>)));</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!v8_str(<span class="stringliteral">&quot;5&quot;</span>)-&gt;StrictEquals(v8_num(5)));</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_num(1)-&gt;StrictEquals(v8_num(1)));</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!v8_num(1)-&gt;StrictEquals(v8_num(2)));</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_num(0)-&gt;StrictEquals(v8_num(-0)));</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;  Local&lt;Value&gt; not_a_number = v8_num(<a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a2ad80cdfa895b81968050fa753ecda20">i::OS::nan_value</a>());</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!not_a_number-&gt;StrictEquals(not_a_number));</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>()-&gt;StrictEquals(<a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>()));</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>()-&gt;StrictEquals(<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>()));</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> alias = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(obj);</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(alias-&gt;StrictEquals(obj));</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;  alias.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;}</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;</div>
<div class="line"><a name="l03539"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2803bc47fb8e558a5d5f2a4bc55fa3e8"> 3539</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(MultiRun) {</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++)</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;    script-&gt;Run();</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;}</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> GetXValue(Local&lt;String&gt; name,</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;                                   <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.Data(), v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(name, v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;  <span class="keywordflow">return</span> name;</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;}</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;</div>
<div class="line"><a name="l03557"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3000d8224c283d840d47622a0f5e66fe"> 3557</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SimplePropertyRead) {</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;obj.x&quot;</span>));</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;  }</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;}</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;</div>
<div class="line"><a name="l03570"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1fa49391b5a58669840c48ca33dd4699"> 3570</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DefinePropertyOnAPIAccessor) {</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;  <span class="comment">// Uses getOwnPropertyDescriptor to check the configurable status</span></div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  Local&lt;Script&gt; script_desc</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;    = Script::Compile(v8_str(<span class="stringliteral">&quot;var prop = Object.getOwnPropertyDescriptor( &quot;</span></div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;                             <span class="stringliteral">&quot;obj, &#39;x&#39;);&quot;</span></div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;                             <span class="stringliteral">&quot;prop.configurable;&quot;</span>));</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  Local&lt;Value&gt; result = script_desc-&gt;Run();</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result-&gt;BooleanValue(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;  <span class="comment">// Redefine get - but still configurable</span></div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;  Local&lt;Script&gt; script_define</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;    = Script::Compile(v8_str(<span class="stringliteral">&quot;var desc = { get: function(){return 42; },&quot;</span></div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;                             <span class="stringliteral">&quot;            configurable: true };&quot;</span></div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;                             <span class="stringliteral">&quot;Object.defineProperty(obj, &#39;x&#39;, desc);&quot;</span></div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;                             <span class="stringliteral">&quot;obj.x&quot;</span>));</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;  result = script_define-&gt;Run();</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_num(42));</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;  <span class="comment">// Check that the accessor is still configurable</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;  result = script_desc-&gt;Run();</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result-&gt;BooleanValue(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;  <span class="comment">// Redefine to a non-configurable</span></div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;  script_define</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    = Script::Compile(v8_str(<span class="stringliteral">&quot;var desc = { get: function(){return 43; },&quot;</span></div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;                             <span class="stringliteral">&quot;             configurable: false };&quot;</span></div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                             <span class="stringliteral">&quot;Object.defineProperty(obj, &#39;x&#39;, desc);&quot;</span></div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;                             <span class="stringliteral">&quot;obj.x&quot;</span>));</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;  result = script_define-&gt;Run();</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_num(43));</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;  result = script_desc-&gt;Run();</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result-&gt;BooleanValue(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;  <span class="comment">// Make sure that it is not possible to redefine again</span></div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;  result = script_define-&gt;Run();</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;  String::AsciiValue exception_value(try_catch.Exception());</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(*exception_value, <span class="stringliteral">&quot;TypeError: Cannot redefine property: x&quot;</span>);</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;}</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;</div>
<div class="line"><a name="l03617"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3b74c0c3693fff7ce200b73745be31d0"> 3617</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DefinePropertyOnDefineGetterSetter) {</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;  Local&lt;Script&gt; script_desc = Script::Compile(v8_str(<span class="stringliteral">&quot;var prop =&quot;</span></div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;                                    <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor( &quot;</span></div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;                                    <span class="stringliteral">&quot;obj, &#39;x&#39;);&quot;</span></div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;                                    <span class="stringliteral">&quot;prop.configurable;&quot;</span>));</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;  Local&lt;Value&gt; result = script_desc-&gt;Run();</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result-&gt;BooleanValue(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;  Local&lt;Script&gt; script_define =</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    Script::Compile(v8_str(<span class="stringliteral">&quot;var desc = {get: function(){return 42; },&quot;</span></div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;                           <span class="stringliteral">&quot;            configurable: true };&quot;</span></div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;                           <span class="stringliteral">&quot;Object.defineProperty(obj, &#39;x&#39;, desc);&quot;</span></div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;                           <span class="stringliteral">&quot;obj.x&quot;</span>));</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;  result = script_define-&gt;Run();</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_num(42));</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  result = script_desc-&gt;Run();</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result-&gt;BooleanValue(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;  script_define =</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    Script::Compile(v8_str(<span class="stringliteral">&quot;var desc = {get: function(){return 43; },&quot;</span></div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;                           <span class="stringliteral">&quot;            configurable: false };&quot;</span></div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;                           <span class="stringliteral">&quot;Object.defineProperty(obj, &#39;x&#39;, desc);&quot;</span></div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;                           <span class="stringliteral">&quot;obj.x&quot;</span>));</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  result = script_define-&gt;Run();</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_num(43));</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  result = script_desc-&gt;Run();</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result-&gt;BooleanValue(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;  result = script_define-&gt;Run();</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;  String::AsciiValue exception_value(try_catch.Exception());</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(*exception_value, <span class="stringliteral">&quot;TypeError: Cannot redefine property: x&quot;</span>);</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;}</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> GetGlobalProperty(<a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a>* context,</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;                                                <span class="keywordtype">char</span> <span class="keyword">const</span>* name) {</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Object&gt;::Cast</a>((*context)-&gt;Global()-&gt;Get(v8_str(name)));</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;}</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;</div>
<div class="line"><a name="l03669"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2dbab624af6b4c81a085c36dc65045aa"> 3669</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DefineAPIAccessorOnObject) {</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj1&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj2 = {};&quot;</span>);</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(<span class="stringliteral">&quot;obj1.x&quot;</span>)-&gt;IsUndefined());</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(<span class="stringliteral">&quot;obj2.x&quot;</span>)-&gt;IsUndefined());</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj1&quot;</span>)-&gt;</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1.x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(<span class="stringliteral">&quot;obj2.x&quot;</span>)-&gt;IsUndefined());</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj2&quot;</span>)-&gt;</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1.x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2.x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj1, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj2, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.defineProperty(obj1, &#39;x&#39;,&quot;</span></div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;             <span class="stringliteral">&quot;{ get: function() { return &#39;y&#39;; }, configurable: true })&quot;</span>);</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1.x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>);</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2.x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.defineProperty(obj2, &#39;x&#39;,&quot;</span></div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;             <span class="stringliteral">&quot;{ get: function() { return &#39;y&#39;; }, configurable: true })&quot;</span>);</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1.x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>);</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2.x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>);</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj1, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj2, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj1&quot;</span>)-&gt;</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj2&quot;</span>)-&gt;</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1.x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2.x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj1, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj2, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;  <span class="comment">// Define getters/setters, but now make them not configurable.</span></div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.defineProperty(obj1, &#39;x&#39;,&quot;</span></div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;             <span class="stringliteral">&quot;{ get: function() { return &#39;z&#39;; }, configurable: false })&quot;</span>);</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.defineProperty(obj2, &#39;x&#39;,&quot;</span></div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;             <span class="stringliteral">&quot;{ get: function() { return &#39;z&#39;; }, configurable: false })&quot;</span>);</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;!Object.getOwnPropertyDescriptor(obj1, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;!Object.getOwnPropertyDescriptor(obj2, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1.x&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2.x&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>);</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj1&quot;</span>)-&gt;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj2&quot;</span>)-&gt;</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1.x&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>);</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2.x&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>);</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;}</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;</div>
<div class="line"><a name="l03743"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af07d5a2b01015b165f70ba04e5b5a7f3"> 3743</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DontDeleteAPIAccessorsCannotBeOverriden) {</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj1&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj2 = {};&quot;</span>);</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj1&quot;</span>)-&gt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;        v8_str(<span class="stringliteral">&quot;x&quot;</span>),</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;        GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;        v8_str(<span class="stringliteral">&quot;donut&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>, <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58">v8::DontDelete</a>));</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj2&quot;</span>)-&gt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;        v8_str(<span class="stringliteral">&quot;x&quot;</span>),</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;        GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;        v8_str(<span class="stringliteral">&quot;donut&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>, <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58">v8::DontDelete</a>));</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1.x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2.x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;!Object.getOwnPropertyDescriptor(obj1, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;!Object.getOwnPropertyDescriptor(obj2, &#39;x&#39;).configurable&quot;</span>);</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj1&quot;</span>)-&gt;</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj2&quot;</span>)-&gt;</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;      <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  {</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;    CompileRun(<span class="stringliteral">&quot;Object.defineProperty(obj1, &#39;x&#39;,&quot;</span></div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;        <span class="stringliteral">&quot;{get: function() { return &#39;func&#39;; }})&quot;</span>);</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    String::AsciiValue exception_value(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(*exception_value, <span class="stringliteral">&quot;TypeError: Cannot redefine property: x&quot;</span>);</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  }</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;  {</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    CompileRun(<span class="stringliteral">&quot;Object.defineProperty(obj2, &#39;x&#39;,&quot;</span></div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;        <span class="stringliteral">&quot;{get: function() { return &#39;func&#39;; }})&quot;</span>);</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    String::AsciiValue exception_value(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(*exception_value, <span class="stringliteral">&quot;TypeError: Cannot redefine property: x&quot;</span>);</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;  }</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;}</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> Get239Value(Local&lt;String&gt; name,</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;                                     <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.Data(), v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(name, v8_str(<span class="stringliteral">&quot;239&quot;</span>));</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  <span class="keywordflow">return</span> name;</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;}</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;</div>
<div class="line"><a name="l03799"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7961e58fed0a153bd7e69ddb6740b4d4"> 3799</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ElementAPIAccessor) {</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj1&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj2 = {};&quot;</span>);</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj1&quot;</span>)-&gt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;        v8_str(<span class="stringliteral">&quot;239&quot;</span>),</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;        Get239Value, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;        v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(GetGlobalProperty(&amp;context, <span class="stringliteral">&quot;obj2&quot;</span>)-&gt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">SetAccessor</a>(</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;        v8_str(<span class="stringliteral">&quot;239&quot;</span>),</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;        Get239Value, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;        v8_str(<span class="stringliteral">&quot;donut&quot;</span>)));</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1[239]&quot;</span>, <span class="stringliteral">&quot;239&quot;</span>);</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2[239]&quot;</span>, <span class="stringliteral">&quot;239&quot;</span>);</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj1[&#39;239&#39;]&quot;</span>, <span class="stringliteral">&quot;239&quot;</span>);</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  ExpectString(<span class="stringliteral">&quot;obj2[&#39;239&#39;]&quot;</span>, <span class="stringliteral">&quot;239&quot;</span>);</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;}</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;</div>
<div class="line"><a name="l03823"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa1dfa0d9a37fc7c3a4ec9d2a6867b489"> 3823</a></span>&#160;<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#aa1dfa0d9a37fc7c3a4ec9d2a6867b489">xValue</a>;</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SetXValue(Local&lt;String&gt; name,</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;                      Local&lt;Value&gt; value,</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;                      <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(value, v8_num(4));</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.Data(), v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(name, v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(xValue.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;  xValue = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;Value&gt;::New</a>(value);</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;}</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;</div>
<div class="line"><a name="l03837"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5f17068ce5bcb47b6effa168b50d237d"> 3837</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SimplePropertyWrite) {</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, SetXValue, v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;obj.x = 4&quot;</span>));</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(xValue.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    script-&gt;Run();</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(4), xValue);</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    xValue.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    xValue = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Value&gt;</a>();</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;  }</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;}</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;</div>
<div class="line"><a name="l03854"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afb6691288595e2a81bd91c41a018feec"> 3854</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SetterOnly) {</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, SetXValue, v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;obj.x = 4; obj.x&quot;</span>));</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(xValue.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;    script-&gt;Run();</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(4), xValue);</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;    xValue.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;    xValue = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Value&gt;</a>();</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;  }</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;}</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;</div>
<div class="line"><a name="l03871"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a568037714557639bf41258d342be1e85"> 3871</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NoAccessors) {</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;donut&quot;</span>));</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;obj.x = 4; obj.x&quot;</span>));</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;    script-&gt;Run();</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;  }</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;}</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> XPropertyGetter(Local&lt;String&gt; property,</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;                                         <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(info.Data()-&gt;IsUndefined());</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;  <span class="keywordflow">return</span> property;</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;}</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;</div>
<div class="line"><a name="l03892"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7d950ff9ebf21b1b6994523dc79102f1"> 3892</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NamedInterceptorPropertyRead) {</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;  templ-&gt;SetNamedPropertyHandler(XPropertyGetter);</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;obj.x&quot;</span>));</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;  }</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;}</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;</div>
<div class="line"><a name="l03906"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a89e75cc3e31af4ef756edebbb4bf9a6b"> 3906</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NamedInterceptorDictionaryIC) {</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;  templ-&gt;SetNamedPropertyHandler(XPropertyGetter);</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;  <span class="comment">// Create an object with a named interceptor.</span></div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;interceptor_obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;  Local&lt;Script&gt; script = Script::Compile(v8_str(<span class="stringliteral">&quot;interceptor_obj.x&quot;</span>));</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;  }</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;  <span class="comment">// Create a slow case object and a function accessing a property in</span></div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;  <span class="comment">// that slow case object (with dictionary probing in generated</span></div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;  <span class="comment">// code). Then force object with a named interceptor into slow-case,</span></div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;  <span class="comment">// pass it to the function, and check that the interceptor is called</span></div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;  <span class="comment">// instead of accessing the local property.</span></div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;  Local&lt;Value&gt; result =</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;      CompileRun(<span class="stringliteral">&quot;function get_x(o) { return o.x; };&quot;</span></div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;                 <span class="stringliteral">&quot;var obj = { x : 42, y : 0 };&quot;</span></div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;                 <span class="stringliteral">&quot;delete obj.y;&quot;</span></div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;                 <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) get_x(obj);&quot;</span></div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;                 <span class="stringliteral">&quot;interceptor_obj.x = 42;&quot;</span></div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;                 <span class="stringliteral">&quot;interceptor_obj.y = 10;&quot;</span></div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;                 <span class="stringliteral">&quot;delete interceptor_obj.y;&quot;</span></div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;                 <span class="stringliteral">&quot;get_x(interceptor_obj)&quot;</span>);</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;}</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;</div>
<div class="line"><a name="l03936"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6e7009fbddff001c67a7450ac1a94c64"> 3936</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NamedInterceptorDictionaryICMultipleContext) {</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;  templ-&gt;SetNamedPropertyHandler(XPropertyGetter);</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;  <span class="comment">// Create an object with a named interceptor.</span></div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> <span class="keywordtype">object</span> = templ-&gt;NewInstance();</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;  context1-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;interceptor_obj&quot;</span>), <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;  <span class="comment">// Force the object into the slow case.</span></div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;  CompileRun(<span class="stringliteral">&quot;interceptor_obj.y = 0;&quot;</span></div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;             <span class="stringliteral">&quot;delete interceptor_obj.y;&quot;</span>);</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;  {</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;    <span class="comment">// Introduce the object into a different context.</span></div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    <span class="comment">// Repeat named loads to exercise ICs.</span></div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context2;</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    context2-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;interceptor_obj&quot;</span>), <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;    Local&lt;Value&gt; result =</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;      CompileRun(<span class="stringliteral">&quot;function get_x(o) { return o.x; }&quot;</span></div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                 <span class="stringliteral">&quot;interceptor_obj.x = 42;&quot;</span></div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;                 <span class="stringliteral">&quot;for (var i=0; i != 10; i++) {&quot;</span></div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;                 <span class="stringliteral">&quot;  get_x(interceptor_obj);&quot;</span></div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;                 <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;                 <span class="stringliteral">&quot;get_x(interceptor_obj)&quot;</span>);</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;    <span class="comment">// Check that the interceptor was actually invoked.</span></div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;  }</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;  <span class="comment">// Return to the original context and force some object to the slow case</span></div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;  <span class="comment">// to cause the NormalizedMapCache to verify.</span></div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = { x : 0 }; delete obj.x;&quot;</span>);</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;}</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> SetXOnPrototypeGetter(Local&lt;String&gt; property,</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;                                               <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;  <span class="comment">// Set x on the prototype object and do not handle the get request.</span></div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> proto = info.Holder()-&gt;GetPrototype();</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;  proto.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(23));</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;}</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;<span class="comment">// This is a regression test for http://crbug.com/20104. Map</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;<span class="comment">// transitions should not interfere with post interceptor lookup.</span></div>
<div class="line"><a name="l03990"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a698b86e4ffd57f450ab9892a47627558"> 3990</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NamedInterceptorMapTransitionRead) {</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;  Local&lt;v8::FunctionTemplate&gt; function_template = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;  Local&lt;v8::ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a></div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;      = function_template-&gt;InstanceTemplate();</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  instance_template-&gt;SetNamedPropertyHandler(SetXOnPrototypeGetter);</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;F&quot;</span>), function_template-&gt;GetFunction());</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <span class="comment">// Create an instance of F and introduce a map transition for x.</span></div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  CompileRun(<span class="stringliteral">&quot;var o = new F(); o.x = 23;&quot;</span>);</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;  <span class="comment">// Create an instance of F and invoke the getter. The result should be 23.</span></div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  Local&lt;Value&gt; result = CompileRun(<span class="stringliteral">&quot;o = new F(); o.x&quot;</span>);</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result-&gt;Int32Value(), 23);</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;}</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../d2/dc3/namespacev8.html#a9009408600ffd120107fd6c5a0d07f9d">IndexedPropertyGetter</a>(uint32_t index,</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;                                               <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;  <span class="keywordflow">if</span> (index == 37) {</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(v8_num(625));</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;  }</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;}</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../d2/dc3/namespacev8.html#aca9e3d6c74a00ec39599be55fda66820">IndexedPropertySetter</a>(uint32_t index,</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;                                               Local&lt;Value&gt; value,</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;                                               <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;  <span class="keywordflow">if</span> (index == 39) {</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;    <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;  }</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;}</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;</div>
<div class="line"><a name="l04027"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a776f02f38ebbb5f77f8e90b4b78c9c94"> 4027</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorWithIndexedAccessor) {</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IndexedPropertyGetter,</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;                                   IndexedPropertySetter);</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;  Local&lt;Script&gt; getter_script = Script::Compile(v8_str(</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;      <span class="stringliteral">&quot;obj.__defineGetter__(\&quot;3\&quot;, function(){return 5;});obj[3];&quot;</span>));</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;  Local&lt;Script&gt; setter_script = Script::Compile(v8_str(</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;      <span class="stringliteral">&quot;obj.__defineSetter__(\&quot;17\&quot;, function(val){this.foo = val;});&quot;</span></div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;      <span class="stringliteral">&quot;obj[17] = 23;&quot;</span></div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;      <span class="stringliteral">&quot;obj.foo;&quot;</span>));</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;  Local&lt;Script&gt; interceptor_setter_script = Script::Compile(v8_str(</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;      <span class="stringliteral">&quot;obj.__defineSetter__(\&quot;39\&quot;, function(val){this.foo = \&quot;hit\&quot;;});&quot;</span></div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;      <span class="stringliteral">&quot;obj[39] = 47;&quot;</span></div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;      <span class="stringliteral">&quot;obj.foo;&quot;</span>));  <span class="comment">// This setter should not run, due to the interceptor.</span></div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;  Local&lt;Script&gt; interceptor_getter_script = Script::Compile(v8_str(</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;      <span class="stringliteral">&quot;obj[37];&quot;</span>));</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;  Local&lt;Value&gt; result = getter_script-&gt;Run();</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(5), result);</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;  result = setter_script-&gt;Run();</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(23), result);</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;  result = interceptor_setter_script-&gt;Run();</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(23), result);</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;  result = interceptor_getter_script-&gt;Run();</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(625), result);</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;}</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> UnboxedDoubleIndexedPropertyGetter(</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;  <span class="keywordflow">if</span> (index &lt; 25) {</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(v8_num(index));</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;  }</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;}</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> UnboxedDoubleIndexedPropertySetter(</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;    Local&lt;Value&gt; value,</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;  <span class="keywordflow">if</span> (index &lt; 25) {</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(v8_num(index));</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;  }</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;}</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;</div>
<div class="line"><a name="l04080"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab51e6668ccc48150451aa131b3e52046"> 4080</a></span>&#160;Handle&lt;v8::Array&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#ab51e6668ccc48150451aa131b3e52046">UnboxedDoubleIndexedPropertyEnumerator</a>(</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;  <span class="comment">// Force the list of returned keys to be stored in a FastDoubleArray.</span></div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;  Local&lt;Script&gt; indexed_property_names_script = Script::Compile(v8_str(</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;      <span class="stringliteral">&quot;keys = new Array(); keys[125000] = 1;&quot;</span></div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;      <span class="stringliteral">&quot;for(i = 0; i &lt; 80000; i++) { keys[i] = i; };&quot;</span></div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;      <span class="stringliteral">&quot;keys.length = 25; keys;&quot;</span>));</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;  Local&lt;Value&gt; result = indexed_property_names_script-&gt;Run();</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;  <span class="keywordflow">return</span> Local&lt;v8::Array&gt;(<a class="code" href="../../d3/d32/classv8_1_1_array.html#a95e772350f060d14d943dbf383548d14">::v8::Array::Cast</a>(*result));</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;}</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;<span class="comment">// Make sure that the the interceptor code in the runtime properly handles</span></div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;<span class="comment">// merging property name lists for double-array-backed arrays.</span></div>
<div class="line"><a name="l04094"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9880b1b2b257902be37ea60255cbcddd"> 4094</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorUnboxedDoubleWithIndexedAccessor) {</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;  templ-&gt;SetIndexedPropertyHandler(UnboxedDoubleIndexedPropertyGetter,</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;                                   UnboxedDoubleIndexedPropertySetter,</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;                                   0,</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;                                   0,</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;                                   <a class="code" href="../../de/d3f/test-api_8cc.html#ab51e6668ccc48150451aa131b3e52046">UnboxedDoubleIndexedPropertyEnumerator</a>);</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;  <span class="comment">// When obj is created, force it to be Stored in a FastDoubleArray.</span></div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;  Local&lt;Script&gt; create_unboxed_double_script = Script::Compile(v8_str(</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;      <span class="stringliteral">&quot;obj[125000] = 1; for(i = 0; i &lt; 80000; i+=2) { obj[i] = i; } &quot;</span></div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;      <span class="stringliteral">&quot;key_count = 0; &quot;</span></div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;      <span class="stringliteral">&quot;for (x in obj) {key_count++;};&quot;</span></div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;      <span class="stringliteral">&quot;obj;&quot;</span>));</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;  Local&lt;Value&gt; result = create_unboxed_double_script-&gt;Run();</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;ToObject()-&gt;HasRealIndexedProperty(2000));</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;  Local&lt;Script&gt; key_count_check = Script::Compile(v8_str(</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;      <span class="stringliteral">&quot;key_count;&quot;</span>));</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;  result = key_count_check-&gt;Run();</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(40013), result);</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;}</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;</div>
<div class="line"><a name="l04119"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a50ecadf05fb5b2f3a3f479367dfa3ed1"> 4119</a></span>&#160;Handle&lt;v8::Array&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a50ecadf05fb5b2f3a3f479367dfa3ed1">NonStrictArgsIndexedPropertyEnumerator</a>(</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;  <span class="comment">// Force the list of returned keys to be stored in a Arguments object.</span></div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;  Local&lt;Script&gt; indexed_property_names_script = Script::Compile(v8_str(</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;      <span class="stringliteral">&quot;function f(w,x) {&quot;</span></div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;      <span class="stringliteral">&quot; return arguments;&quot;</span></div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;      <span class="stringliteral">&quot;keys = f(0, 1, 2, 3);&quot;</span></div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;      <span class="stringliteral">&quot;keys;&quot;</span>));</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;  Local&lt;Value&gt; result = indexed_property_names_script-&gt;Run();</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;  <span class="keywordflow">return</span> Local&lt;v8::Array&gt;(<span class="keyword">static_cast&lt;</span><a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">::v8::Object::Cast</a>(*result)));</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;}</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NonStrictIndexedPropertyGetter(</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;  <span class="keywordflow">if</span> (index &lt; 4) {</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(v8_num(index));</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;  }</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;}</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;<span class="comment">// Make sure that the the interceptor code in the runtime properly handles</span></div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;<span class="comment">// merging property name lists for non-string arguments arrays.</span></div>
<div class="line"><a name="l04146"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7fc6fe6dccc84310d88b0cac34555e0e"> 4146</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorNonStrictArgsWithIndexedAccessor) {</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;  templ-&gt;SetIndexedPropertyHandler(NonStrictIndexedPropertyGetter,</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;                                   0,</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;                                   0,</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;                                   0,</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;                                   <a class="code" href="../../de/d3f/test-api_8cc.html#a50ecadf05fb5b2f3a3f479367dfa3ed1">NonStrictArgsIndexedPropertyEnumerator</a>);</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;  Local&lt;Script&gt; create_args_script =</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;      Script::Compile(v8_str(</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;          <span class="stringliteral">&quot;var key_count = 0;&quot;</span></div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;          <span class="stringliteral">&quot;for (x in obj) {key_count++;} key_count;&quot;</span>));</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;  Local&lt;Value&gt; result = create_args_script-&gt;Run();</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_num(4), result);</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;}</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> IdentityIndexedPropertyGetter(</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a>(index);</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;}</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;</div>
<div class="line"><a name="l04172"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2ba5125574123aa09a5557038e112d14"> 4172</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorWithGetOwnPropertyDescriptor) {</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;  <span class="comment">// Check fast object case.</span></div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* fast_case_code =</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj, 0).value.toString()&quot;</span>;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;  ExpectString(fast_case_code, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;  <span class="comment">// Check slow case.</span></div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* slow_case_code =</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;      <span class="stringliteral">&quot;obj.x = 1; delete obj.x;&quot;</span></div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(obj, 1).value.toString()&quot;</span>;</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;  ExpectString(slow_case_code, <span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;}</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;</div>
<div class="line"><a name="l04193"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae095d974d35bfd5eb6021ccaebdbfdb3"> 4193</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorWithNoSetter) {</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;      <span class="stringliteral">&quot;  obj[0] = 239;&quot;</span></div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;      <span class="stringliteral">&quot;    var v = obj[0];&quot;</span></div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;      <span class="stringliteral">&quot;    if (v != 0) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;}</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;</div>
<div class="line"><a name="l04216"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab344fa868e03c4092274a5ee81ffca58"> 4216</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorWithAccessorCheck) {</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acda8fc1a7add6f3e4c8250c63d37b75f">TurnOnAccessCheck</a>();</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;      <span class="stringliteral">&quot;    var v = obj[0];&quot;</span></div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;      <span class="stringliteral">&quot;    if (v != undefined) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;}</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;</div>
<div class="line"><a name="l04240"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afe781614c03aaac4bafc24b6f7329c48"> 4240</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorWithAccessorCheckSwitchedOn) {</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;      <span class="stringliteral">&quot;    var expected = i;&quot;</span></div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;      <span class="stringliteral">&quot;    if (i == 5) {&quot;</span></div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;      <span class="stringliteral">&quot;      %EnableAccessChecks(obj);&quot;</span></div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;      <span class="stringliteral">&quot;      expected = undefined;&quot;</span></div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;      <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;      <span class="stringliteral">&quot;    var v = obj[i];&quot;</span></div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;      <span class="stringliteral">&quot;    if (v != expected) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;      <span class="stringliteral">&quot;    if (i == 5) %DisableAccessChecks(obj);&quot;</span></div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;}</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;</div>
<div class="line"><a name="l04270"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae639e4439c87e7a02d4e8a7790072716"> 4270</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorWithDifferentIndices) {</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;      <span class="stringliteral">&quot;    var v = obj[i];&quot;</span></div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;      <span class="stringliteral">&quot;    if (v != i) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;}</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;</div>
<div class="line"><a name="l04293"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4defeb87dd0a96a66a649deda04b6e7f"> 4293</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorWithNegativeIndices) {</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;      <span class="stringliteral">&quot;    var expected = i;&quot;</span></div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;      <span class="stringliteral">&quot;    var key = i;&quot;</span></div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;      <span class="stringliteral">&quot;    if (i == 25) {&quot;</span></div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;      <span class="stringliteral">&quot;       key = -1;&quot;</span></div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;      <span class="stringliteral">&quot;       expected = undefined;&quot;</span></div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;      <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;      <span class="stringliteral">&quot;    if (i == 50) {&quot;</span></div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;      <span class="stringliteral">&quot;       /* probe minimal Smi number on 32-bit platforms */&quot;</span></div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;      <span class="stringliteral">&quot;       key = -(1 &lt;&lt; 30);&quot;</span></div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;      <span class="stringliteral">&quot;       expected = undefined;&quot;</span></div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;      <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;      <span class="stringliteral">&quot;    if (i == 75) {&quot;</span></div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;      <span class="stringliteral">&quot;       /* probe minimal Smi number on 64-bit platforms */&quot;</span></div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;      <span class="stringliteral">&quot;       key = 1 &lt;&lt; 31;&quot;</span></div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;      <span class="stringliteral">&quot;       expected = undefined;&quot;</span></div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;      <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;      <span class="stringliteral">&quot;    var v = obj[key];&quot;</span></div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;      <span class="stringliteral">&quot;    if (v != expected) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;}</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;</div>
<div class="line"><a name="l04332"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af61d2b8eefaabb4bf6e37f547d6111af"> 4332</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorWithNotSmiLookup) {</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      <span class="stringliteral">&quot;    var expected = i;&quot;</span></div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;      <span class="stringliteral">&quot;    var key = i;&quot;</span></div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;      <span class="stringliteral">&quot;    if (i == 50) {&quot;</span></div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;      <span class="stringliteral">&quot;       key = &#39;foobar&#39;;&quot;</span></div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;      <span class="stringliteral">&quot;       expected = undefined;&quot;</span></div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;      <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;      <span class="stringliteral">&quot;    var v = obj[key];&quot;</span></div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;      <span class="stringliteral">&quot;    if (v != expected) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;}</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;</div>
<div class="line"><a name="l04361"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acc8143fffbb225f34e7a84324168e85c"> 4361</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorGoingMegamorphic) {</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;      <span class="stringliteral">&quot;var original = obj;&quot;</span></div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;      <span class="stringliteral">&quot;    var expected = i;&quot;</span></div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;      <span class="stringliteral">&quot;    if (i == 50) {&quot;</span></div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;      <span class="stringliteral">&quot;       obj = {50: &#39;foobar&#39;};&quot;</span></div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;      <span class="stringliteral">&quot;       expected = &#39;foobar&#39;;&quot;</span></div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;      <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;      <span class="stringliteral">&quot;    var v = obj[i];&quot;</span></div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;      <span class="stringliteral">&quot;    if (v != expected) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;      <span class="stringliteral">&quot;    if (i == 50) obj = original;&quot;</span></div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;}</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;</div>
<div class="line"><a name="l04391"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a494afe758b4e3c89ae09f1f8a10df9d4"> 4391</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorReceiverTurningSmi) {</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;      <span class="stringliteral">&quot;var original = obj;&quot;</span></div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;      <span class="stringliteral">&quot;    var expected = i;&quot;</span></div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;      <span class="stringliteral">&quot;    if (i == 5) {&quot;</span></div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;      <span class="stringliteral">&quot;       obj = 239;&quot;</span></div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;      <span class="stringliteral">&quot;       expected = undefined;&quot;</span></div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;      <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;      <span class="stringliteral">&quot;    var v = obj[i];&quot;</span></div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;      <span class="stringliteral">&quot;    if (v != expected) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;      <span class="stringliteral">&quot;    if (i == 5) obj = original;&quot;</span></div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;}</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;</div>
<div class="line"><a name="l04421"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8615584cb764d4e7a653ec971a9a5d20"> 4421</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndexedInterceptorOnProto) {</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;  templ-&gt;SetIndexedPropertyHandler(IdentityIndexedPropertyGetter);</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;      <span class="stringliteral">&quot;var o = {__proto__: obj};&quot;</span></div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;      <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;      <span class="stringliteral">&quot;    var v = o[i];&quot;</span></div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;      <span class="stringliteral">&quot;    if (v != i) throw &#39;Wrong value &#39; + v + &#39; at iteration &#39; + i;&quot;</span></div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;      <span class="stringliteral">&quot;  &#39;PASSED&#39;&quot;</span></div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;      <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;      <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;}</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;</div>
<div class="line"><a name="l04445"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5d09540a88534c2bcdbc2595f60c40f1"> 4445</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(MultiContexts) {</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;  templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;dummy&quot;</span>), <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(DummyCallHandler));</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;  Local&lt;String&gt; password = v8_str(<span class="stringliteral">&quot;Password&quot;</span>);</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;  <span class="comment">// Create an environment</span></div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context0(0, templ);</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;  context0-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(password);</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global0 = context0-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;  global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;custom&quot;</span>), v8_num(1234));</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;custom&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;  <span class="comment">// Create an independent environment</span></div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context1(0, templ);</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;  context1-&gt;SetSecurityToken(password);</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;custom&quot;</span>), v8_num(1234));</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(global0, global1);</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;custom&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;custom&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;  <span class="comment">// Now create a new context with the old global</span></div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context2(0, templ, global1);</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;  context2-&gt;SetSecurityToken(password);</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global2 = context2-&gt;Global();</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(global1, global2);</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;custom&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, global2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;custom&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;}</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;</div>
<div class="line"><a name="l04478"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a302592912d8a96c53d55de4c956b0870"> 4478</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionPrototypeAcrossContexts) {</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;  <span class="comment">// Make sure that functions created by cloning boilerplates cannot</span></div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;  <span class="comment">// communicate through their __proto__ field.</span></div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env0;</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global0 =</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;      env0-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> object0 =</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;      global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;Object&quot;</span>)).As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> tostring0 =</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;      object0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;toString&quot;</span>)).As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> proto0 =</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;      tostring0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>)).As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;  proto0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;custom&quot;</span>), v8_num(1234));</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env1;</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 =</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;      env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> object1 =</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;      global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;Object&quot;</span>)).As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> tostring1 =</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;      object1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;toString&quot;</span>)).As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> proto1 =</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;      tostring1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>)).As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!proto1-&gt;Has(v8_str(<span class="stringliteral">&quot;custom&quot;</span>)));</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;}</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;</div>
<div class="line"><a name="l04508"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad81894bf1bbf92491a307a4c2de90d73"> 4508</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress892105) {</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;  <span class="comment">// Make sure that object and array literals created by cloning</span></div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;  <span class="comment">// boilerplates cannot communicate through their __proto__</span></div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;  <span class="comment">// field. This is rather difficult to check, but we try to add stuff</span></div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;  <span class="comment">// to Object.prototype and Array.prototype and create a new</span></div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;  <span class="comment">// environment. This should succeed.</span></div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;  Local&lt;String&gt; source = v8_str(<span class="stringliteral">&quot;Object.prototype.obj = 1234;&quot;</span></div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;                                <span class="stringliteral">&quot;Array.prototype.arr = 4567;&quot;</span></div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;                                <span class="stringliteral">&quot;8901&quot;</span>);</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env0;</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;  Local&lt;Script&gt; script0 = Script::Compile(source);</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8901.0, script0-&gt;Run()-&gt;NumberValue());</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env1;</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;  Local&lt;Script&gt; script1 = Script::Compile(source);</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8901.0, script1-&gt;Run()-&gt;NumberValue());</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;}</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;</div>
<div class="line"><a name="l04531"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab47b2aea2df743c73925c448dcbcabe0"> 4531</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(UndetectableObject) {</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;  Local&lt;v8::FunctionTemplate&gt; desc =</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(0, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>());</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;  desc-&gt;InstanceTemplate()-&gt;MarkAsUndetectable();  <span class="comment">// undetectable</span></div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;  Local&lt;v8::Object&gt; obj = desc-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;undetectable&quot;</span>), obj);</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;  ExpectString(<span class="stringliteral">&quot;undetectable.toString()&quot;</span>, <span class="stringliteral">&quot;[object Object]&quot;</span>);</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;  ExpectString(<span class="stringliteral">&quot;typeof undetectable&quot;</span>, <span class="stringliteral">&quot;undefined&quot;</span>);</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;  ExpectString(<span class="stringliteral">&quot;typeof(undetectable)&quot;</span>, <span class="stringliteral">&quot;undefined&quot;</span>);</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;typeof undetectable == &#39;undefined&#39;&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;typeof undetectable == &#39;object&#39;&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;if (undetectable) { true; } else { false; }&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;!undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;  ExpectObject(<span class="stringliteral">&quot;true&amp;&amp;undetectable&quot;</span>, obj);</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;false&amp;&amp;undetectable&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;true||undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;  ExpectObject(<span class="stringliteral">&quot;false||undetectable&quot;</span>, obj);</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;  ExpectObject(<span class="stringliteral">&quot;undetectable&amp;&amp;true&quot;</span>, obj);</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;  ExpectObject(<span class="stringliteral">&quot;undetectable&amp;&amp;false&quot;</span>, obj);</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable||true&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable||false&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable==null&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;null==undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable==undefined&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undefined==undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable==undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable===null&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;null===undetectable&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable===undefined&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undefined===undetectable&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable===undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;}</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;</div>
<div class="line"><a name="l04575"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7d92f7551203815d6e6acc5f4d2c7a5b"> 4575</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(VoidLiteral) {</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;  Local&lt;v8::FunctionTemplate&gt; desc =</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(0, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>());</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;  desc-&gt;InstanceTemplate()-&gt;MarkAsUndetectable();  <span class="comment">// undetectable</span></div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;  Local&lt;v8::Object&gt; obj = desc-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;undetectable&quot;</span>), obj);</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undefined == void 0&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable == void 0&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;null == void 0&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undefined === void 0&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable === void 0&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;null === void 0&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;void 0 == undefined&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;void 0 == undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;void 0 == null&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;void 0 === undefined&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;void 0 === undetectable&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;void 0 === null&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;  ExpectString(<span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;               <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;               <span class="stringliteral">&quot;    return x === void 0;&quot;</span></div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;               <span class="stringliteral">&quot;  } catch(e) {&quot;</span></div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;               <span class="stringliteral">&quot;    return e.toString();&quot;</span></div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;               <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;               <span class="stringliteral">&quot;})()&quot;</span>,</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;               <span class="stringliteral">&quot;ReferenceError: x is not defined&quot;</span>);</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;  ExpectString(<span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;               <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;               <span class="stringliteral">&quot;    return void 0 === x;&quot;</span></div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;               <span class="stringliteral">&quot;  } catch(e) {&quot;</span></div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;               <span class="stringliteral">&quot;    return e.toString();&quot;</span></div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;               <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;               <span class="stringliteral">&quot;})()&quot;</span>,</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;               <span class="stringliteral">&quot;ReferenceError: x is not defined&quot;</span>);</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;}</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;</div>
<div class="line"><a name="l04619"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a07bc71b3a9d7c1496808828767d41028"> 4619</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExtensibleOnUndetectable) {</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;  Local&lt;v8::FunctionTemplate&gt; desc =</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(0, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>());</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;  desc-&gt;InstanceTemplate()-&gt;MarkAsUndetectable();  <span class="comment">// undetectable</span></div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;  Local&lt;v8::Object&gt; obj = desc-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;undetectable&quot;</span>), obj);</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;  Local&lt;String&gt; source = v8_str(<span class="stringliteral">&quot;undetectable.x = 42;&quot;</span></div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;                                <span class="stringliteral">&quot;undetectable.x&quot;</span>);</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;  Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42), script-&gt;Run());</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;Object.isExtensible(undetectable)&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;  source = v8_str(<span class="stringliteral">&quot;Object.preventExtensions(undetectable);&quot;</span>);</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;  script = Script::Compile(source);</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;Object.isExtensible(undetectable)&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;  source = v8_str(<span class="stringliteral">&quot;undetectable.y = 2000;&quot;</span>);</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;  script = Script::Compile(source);</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable.y == undefined&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;}</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;</div>
<div class="line"><a name="l04652"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac33a7850ac0054f40fa5805eab228eb3"> 4652</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(UndetectableString) {</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;  Local&lt;String&gt; obj = String::NewUndetectable(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;undetectable&quot;</span>), obj);</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;  ExpectString(<span class="stringliteral">&quot;undetectable&quot;</span>, <span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;  ExpectString(<span class="stringliteral">&quot;typeof undetectable&quot;</span>, <span class="stringliteral">&quot;undefined&quot;</span>);</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;  ExpectString(<span class="stringliteral">&quot;typeof(undetectable)&quot;</span>, <span class="stringliteral">&quot;undefined&quot;</span>);</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;typeof undetectable == &#39;undefined&#39;&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;typeof undetectable == &#39;string&#39;&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;if (undetectable) { true; } else { false; }&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;!undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;  ExpectObject(<span class="stringliteral">&quot;true&amp;&amp;undetectable&quot;</span>, obj);</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;false&amp;&amp;undetectable&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;true||undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;  ExpectObject(<span class="stringliteral">&quot;false||undetectable&quot;</span>, obj);</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;  ExpectObject(<span class="stringliteral">&quot;undetectable&amp;&amp;true&quot;</span>, obj);</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;  ExpectObject(<span class="stringliteral">&quot;undetectable&amp;&amp;false&quot;</span>, obj);</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable||true&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable||false&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable==null&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;null==undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable==undefined&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undefined==undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable==undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable===null&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;null===undetectable&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable===undefined&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undefined===undetectable&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;undetectable===undetectable&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;}</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;</div>
<div class="line"><a name="l04692"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9b5094cdc5aa49784245663eb7e919c8"> 4692</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(UndetectableOptimized) {</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;  Local&lt;String&gt; obj = String::NewUndetectable(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;undetectable&quot;</span>), obj);</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;detectable&quot;</span>), v8_str(<span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;  ExpectString(</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;      <span class="stringliteral">&quot;function testBranch() {&quot;</span></div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;      <span class="stringliteral">&quot;  if (!%_IsUndetectableObject(undetectable)) throw 1;&quot;</span></div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;      <span class="stringliteral">&quot;  if (%_IsUndetectableObject(detectable)) throw 2;&quot;</span></div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;      <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;      <span class="stringliteral">&quot;function testBool() {&quot;</span></div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;      <span class="stringliteral">&quot;  var b1 = !%_IsUndetectableObject(undetectable);&quot;</span></div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;      <span class="stringliteral">&quot;  var b2 = %_IsUndetectableObject(detectable);&quot;</span></div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;      <span class="stringliteral">&quot;  if (b1) throw 3;&quot;</span></div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;      <span class="stringliteral">&quot;  if (b2) throw 4;&quot;</span></div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;      <span class="stringliteral">&quot;  return b1 == b2;&quot;</span></div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;      <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;      <span class="stringliteral">&quot;%OptimizeFunctionOnNextCall(testBranch);&quot;</span></div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;      <span class="stringliteral">&quot;%OptimizeFunctionOnNextCall(testBool);&quot;</span></div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;      <span class="stringliteral">&quot;  testBranch();&quot;</span></div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;      <span class="stringliteral">&quot;  testBool();&quot;</span></div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;      <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;      <span class="stringliteral">&quot;\&quot;PASS\&quot;&quot;</span>,</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;      <span class="stringliteral">&quot;PASS&quot;</span>);</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;}</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46a6342f518ffe356dd4b116eabc1e0">USE</a>(<a class="code" href="../../d4/d55/token_8cc.html#aeb3b320679bdd784c8fc3b5f2aa813a9">T</a>) { }</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;</div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;<span class="comment">// This test is not intended to be run, just type checked.</span></div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> PersistentHandles() {</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46a6342f518ffe356dd4b116eabc1e0">USE</a>(PersistentHandles);</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;  Local&lt;String&gt; str = v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;String&gt;</a> p_str = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;String&gt;::New</a>(str);</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46a6342f518ffe356dd4b116eabc1e0">USE</a>(p_str);</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;  Local&lt;Script&gt; scr = Script::Compile(v8_str(<span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Script&gt;</a> p_scr = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;Script&gt;::New</a>(scr);</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46a6342f518ffe356dd4b116eabc1e0">USE</a>(p_scr);</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;ObjectTemplate&gt;</a> p_templ =</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;    <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;ObjectTemplate&gt;::New</a>(templ);</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46a6342f518ffe356dd4b116eabc1e0">USE</a>(p_templ);</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;}</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> HandleLogDelegator(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;}</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;</div>
<div class="line"><a name="l04749"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6dba501bf5c618337e7e335d90eeee97"> 4749</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GlobalObjectTemplate) {</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;  Local&lt;ObjectTemplate&gt; global_template = ObjectTemplate::New();</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;  global_template-&gt;Set(v8_str(<span class="stringliteral">&quot;JSNI_Log&quot;</span>),</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;                       <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(HandleLogDelegator));</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context = Context::New(0, global_template);</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;  Context::Scope context_scope(context);</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;JSNI_Log(&#39;LOG&#39;)&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;  context.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;}</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kSimpleExtensionSource =</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;  <span class="stringliteral">&quot;function Foo() {&quot;</span></div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;  <span class="stringliteral">&quot;  return 4;&quot;</span></div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;  <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;</div>
<div class="line"><a name="l04767"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a654c0e77e27fd47db811237f7f9cb454"> 4767</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SimpleExtensions) {</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;simpletest&quot;</span>, kSimpleExtensionSource));</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { <span class="stringliteral">&quot;simpletest&quot;</span> };</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;  Context::Scope lock(context);</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(<span class="stringliteral">&quot;Foo()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(4));</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;}</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;</div>
<div class="line"><a name="l04779"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4ceda6a62fe1fa102fc139797852a4ae"> 4779</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NullExtensions) {</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;nulltest&quot;</span>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>));</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { <span class="stringliteral">&quot;nulltest&quot;</span> };</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;  Context::Scope lock(context);</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(<span class="stringliteral">&quot;1+3&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(4));</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;}</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kEmbeddedExtensionSource =</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;    <span class="stringliteral">&quot;function Ret54321(){return 54321;}~~@@$&quot;</span></div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;    <span class="stringliteral">&quot;$%% THIS IS A SERIES OF NON-NULL-TERMINATED STRINGS.&quot;</span>;</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kEmbeddedExtensionSourceValidLen = 34;</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;</div>
<div class="line"><a name="l04797"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6635cc03f58c339cb77605c881a500c3"> 4797</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExtensionMissingSourceLength) {</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;srclentest_fail&quot;</span>,</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;                                      kEmbeddedExtensionSource));</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { <span class="stringliteral">&quot;srclentest_fail&quot;</span> };</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, *context);</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;}</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;</div>
<div class="line"><a name="l04808"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a347b630c9063c3f2829b0f80f1487a7d"> 4808</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExtensionWithSourceLength) {</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> source_len = kEmbeddedExtensionSourceValidLen - 1;</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;       source_len &lt;= kEmbeddedExtensionSourceValidLen + 1; ++source_len) {</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;    <a class="code" href="../../da/de2/classv8_1_1internal_1_1_scoped_vector.html">i::ScopedVector&lt;char&gt;</a> extension_name(32);</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(extension_name, <span class="stringliteral">&quot;ext #%d&quot;</span>, source_len);</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(extension_name.<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#affb06cbe9d08291ab0fc1a467edec469">start</a>(),</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;                                        kEmbeddedExtensionSource, 0, 0,</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;                                        source_len));</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[1] = { extension_name.<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#affb06cbe9d08291ab0fc1a467edec469">start</a>() };</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;    <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;    <span class="keywordflow">if</span> (source_len == kEmbeddedExtensionSourceValidLen) {</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;      Context::Scope lock(context);</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(<span class="stringliteral">&quot;Ret54321()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(54321), result);</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;      <span class="comment">// Anything but exactly the right length should fail to compile.</span></div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, *context);</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;    }</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;  }</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;}</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kEvalExtensionSource1 =</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;  <span class="stringliteral">&quot;function UseEval1() {&quot;</span></div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;  <span class="stringliteral">&quot;  var x = 42;&quot;</span></div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;  <span class="stringliteral">&quot;  return eval(&#39;x&#39;);&quot;</span></div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;  <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kEvalExtensionSource2 =</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;  <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;  <span class="stringliteral">&quot;  var x = 42;&quot;</span></div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;  <span class="stringliteral">&quot;  function e() {&quot;</span></div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;  <span class="stringliteral">&quot;    return eval(&#39;x&#39;);&quot;</span></div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;  <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;  <span class="stringliteral">&quot;  this.UseEval2 = e;&quot;</span></div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;  <span class="stringliteral">&quot;})()&quot;</span>;</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;</div>
<div class="line"><a name="l04849"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7998d2248ad501d2ad7ab04cdba3b3b6"> 4849</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(UseEvalFromExtension) {</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;evaltest1&quot;</span>, kEvalExtensionSource1));</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;evaltest2&quot;</span>, kEvalExtensionSource2));</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { <span class="stringliteral">&quot;evaltest1&quot;</span>, <span class="stringliteral">&quot;evaltest2&quot;</span> };</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(2, extension_names);</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;  Context::Scope lock(context);</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(<span class="stringliteral">&quot;UseEval1()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;  result = Script::Compile(v8_str(<span class="stringliteral">&quot;UseEval2()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;}</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kWithExtensionSource1 =</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;  <span class="stringliteral">&quot;function UseWith1() {&quot;</span></div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;  <span class="stringliteral">&quot;  var x = 42;&quot;</span></div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;  <span class="stringliteral">&quot;  with({x:87}) { return x; }&quot;</span></div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;  <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kWithExtensionSource2 =</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;  <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;  <span class="stringliteral">&quot;  var x = 42;&quot;</span></div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;  <span class="stringliteral">&quot;  function e() {&quot;</span></div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;  <span class="stringliteral">&quot;    with ({x:87}) { return x; }&quot;</span></div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;  <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;  <span class="stringliteral">&quot;  this.UseWith2 = e;&quot;</span></div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;  <span class="stringliteral">&quot;})()&quot;</span>;</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;</div>
<div class="line"><a name="l04882"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a04c61e666ec3866fe410dee47489d426"> 4882</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(UseWithFromExtension) {</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;withtest1&quot;</span>, kWithExtensionSource1));</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;withtest2&quot;</span>, kWithExtensionSource2));</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { <span class="stringliteral">&quot;withtest1&quot;</span>, <span class="stringliteral">&quot;withtest2&quot;</span> };</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(2, extension_names);</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;  Context::Scope lock(context);</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(<span class="stringliteral">&quot;UseWith1()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(87));</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;  result = Script::Compile(v8_str(<span class="stringliteral">&quot;UseWith2()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(87));</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;}</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;</div>
<div class="line"><a name="l04897"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abf9b99e0181b3e1bd7b0638670e8d288"> 4897</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AutoExtensions) {</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;  Extension* extension = <span class="keyword">new</span> Extension(<span class="stringliteral">&quot;autotest&quot;</span>, kSimpleExtensionSource);</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;  extension-&gt;set_auto_enable(<span class="keyword">true</span>);</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(extension);</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New();</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;  Context::Scope lock(context);</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(<span class="stringliteral">&quot;Foo()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(4));</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;}</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kSyntaxErrorInExtensionSource =</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;    <span class="stringliteral">&quot;[&quot;</span>;</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;<span class="comment">// Test that a syntax error in an extension does not cause a fatal</span></div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;<span class="comment">// error but results in an empty context.</span></div>
<div class="line"><a name="l04915"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aff1c11c798b92e1d04699aebe0a51fc3"> 4915</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SyntaxErrorExtensions) {</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;syntaxerror&quot;</span>,</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;                                      kSyntaxErrorInExtensionSource));</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { <span class="stringliteral">&quot;syntaxerror&quot;</span> };</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;}</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kExceptionInExtensionSource =</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;    <span class="stringliteral">&quot;throw 42&quot;</span>;</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;<span class="comment">// Test that an exception when installing an extension does not cause</span></div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;<span class="comment">// a fatal error but results in an empty context.</span></div>
<div class="line"><a name="l04932"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a66e5bd2170d5553a0601c19dc115734d"> 4932</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExceptionExtensions) {</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;exception&quot;</span>,</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;                                      kExceptionInExtensionSource));</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { <span class="stringliteral">&quot;exception&quot;</span> };</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;}</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kNativeCallInExtensionSource =</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;    <span class="stringliteral">&quot;function call_runtime_last_index_of(x) {&quot;</span></div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;    <span class="stringliteral">&quot;  return %StringLastIndexOf(x, &#39;bob&#39;, 10);&quot;</span></div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kNativeCallTest =</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;    <span class="stringliteral">&quot;call_runtime_last_index_of(&#39;bobbobboellebobboellebobbob&#39;);&quot;</span>;</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;<span class="comment">// Test that a native runtime calls are supported in extensions.</span></div>
<div class="line"><a name="l04953"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a960971bea82bf2d7e657bba3147c0187"> 4953</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NativeCallInExtensions) {</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;nativecall&quot;</span>,</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;                                      kNativeCallInExtensionSource));</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { <span class="stringliteral">&quot;nativecall&quot;</span> };</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;  Context::Scope lock(context);</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(kNativeCallTest))-&gt;Run();</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3));</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;}</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;</div>
<div class="line"><a name="l04966"></a><span class="lineno"><a class="line" href="../../d9/d14/class_native_function_extension.html"> 4966</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d9/d14/class_native_function_extension.html">NativeFunctionExtension</a> : <span class="keyword">public</span> Extension {</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l04968"></a><span class="lineno"><a class="line" href="../../d9/d14/class_native_function_extension.html#a7ef9be079ae801a3b7e1a549b9fe1f2f"> 4968</a></span>&#160;  <a class="code" href="../../d9/d14/class_native_function_extension.html#a7ef9be079ae801a3b7e1a549b9fe1f2f">NativeFunctionExtension</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name,</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">char</span>* source,</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;                          <a class="code" href="../../d2/dc3/namespacev8.html#aee6870581e54ab6b4318dfb434219459">v8::InvocationCallback</a> fun = &amp;<a class="code" href="../../d9/d14/class_native_function_extension.html#a99df01432f19ffde9d39aca1f76ba11f">Echo</a>)</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;      : Extension(name, source),</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;        function_(fun) { }</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;</div>
<div class="line"><a name="l04974"></a><span class="lineno"><a class="line" href="../../d9/d14/class_native_function_extension.html#a4248e411e72ada9a9da26ef3b2ec02db"> 4974</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> <a class="code" href="../../d9/d14/class_native_function_extension.html#a4248e411e72ada9a9da26ef3b2ec02db">GetNativeFunction</a>(</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> name) {</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(function_);</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;  }</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;</div>
<div class="line"><a name="l04979"></a><span class="lineno"><a class="line" href="../../d9/d14/class_native_function_extension.html#a99df01432f19ffde9d39aca1f76ba11f"> 4979</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> <a class="code" href="../../d9/d14/class_native_function_extension.html#a99df01432f19ffde9d39aca1f76ba11f">Echo</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;    <span class="keywordflow">if</span> (args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>() &gt;= 1) <span class="keywordflow">return</span> (args[0]);</div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;  }</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#aee6870581e54ab6b4318dfb434219459">v8::InvocationCallback</a> function_;</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;};</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;</div>
<div class="line"><a name="l04988"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae80868c4e436eaab50d7bc55973644c4"> 4988</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NativeFunctionDeclaration) {</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* name = <span class="stringliteral">&quot;nativedecl&quot;</span>;</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> <a class="code" href="../../d9/d14/class_native_function_extension.html">NativeFunctionExtension</a>(name,</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;                                                    <span class="stringliteral">&quot;native function foo();&quot;</span>));</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { name };</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;  Context::Scope lock(context);</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = Script::Compile(v8_str(<span class="stringliteral">&quot;foo(42);&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;}</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;</div>
<div class="line"><a name="l05002"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a869dbd1ee9e0dc59233af2bcd3d378b1"> 5002</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NativeFunctionDeclarationError) {</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* name = <span class="stringliteral">&quot;nativedeclerr&quot;</span>;</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;  <span class="comment">// Syntax error in extension code.</span></div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> <a class="code" href="../../d9/d14/class_native_function_extension.html">NativeFunctionExtension</a>(name,</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;                                                    <span class="stringliteral">&quot;native\nfunction foo();&quot;</span>));</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { name };</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context(Context::New(&amp;extensions));</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;}</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;</div>
<div class="line"><a name="l05015"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8ee5e8d62e7acf21e168f47b8492cdc1"> 5015</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NativeFunctionDeclarationErrorEscape) {</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* name = <span class="stringliteral">&quot;nativedeclerresc&quot;</span>;</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;  <span class="comment">// Syntax error in extension code - escape code in &quot;native&quot; means that</span></div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;  <span class="comment">// it&#39;s not treated as a keyword.</span></div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> <a class="code" href="../../d9/d14/class_native_function_extension.html">NativeFunctionExtension</a>(</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;      name,</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;      <span class="stringliteral">&quot;nativ\\u0065 function foo();&quot;</span>));</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_names[] = { name };</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_names);</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context(Context::New(&amp;extensions));</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;}</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckDependencies(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keyword">const</span> <span class="keywordtype">char</span>* expected) {</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> config(1, &amp;name);</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(&amp;config);</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(String::New(expected), context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;loaded&quot;</span>)));</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;}</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;<span class="comment"> * Configuration:</span></div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;<span class="comment"> *     /-- B &lt;--\</span></div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;<span class="comment"> * A &lt;-          -- D &lt;-- E</span></div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;<span class="comment"> *     \-- C &lt;--/</span></div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l05045"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a362f5d904539ff9d876964cc5e1650ab"> 5045</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExtensionDependency) {</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kEDeps[] = { <span class="stringliteral">&quot;D&quot;</span> };</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;E&quot;</span>, <span class="stringliteral">&quot;this.loaded += &#39;E&#39;;&quot;</span>, 1, kEDeps));</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kDDeps[] = { <span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;C&quot;</span> };</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;D&quot;</span>, <span class="stringliteral">&quot;this.loaded += &#39;D&#39;;&quot;</span>, 2, kDDeps));</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kBCDeps[] = { <span class="stringliteral">&quot;A&quot;</span> };</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;this.loaded += &#39;B&#39;;&quot;</span>, 1, kBCDeps));</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;C&quot;</span>, <span class="stringliteral">&quot;this.loaded += &#39;C&#39;;&quot;</span>, 1, kBCDeps));</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;this.loaded += &#39;A&#39;;&quot;</span>));</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;  CheckDependencies(<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;undefinedA&quot;</span>);</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;  CheckDependencies(<span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;undefinedAB&quot;</span>);</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;  CheckDependencies(<span class="stringliteral">&quot;C&quot;</span>, <span class="stringliteral">&quot;undefinedAC&quot;</span>);</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;  CheckDependencies(<span class="stringliteral">&quot;D&quot;</span>, <span class="stringliteral">&quot;undefinedABCD&quot;</span>);</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;  CheckDependencies(<span class="stringliteral">&quot;E&quot;</span>, <span class="stringliteral">&quot;undefinedABCDE&quot;</span>);</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* exts[2] = { <span class="stringliteral">&quot;C&quot;</span>, <span class="stringliteral">&quot;E&quot;</span> };</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> config(2, exts);</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(&amp;config);</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;undefinedACBDE&quot;</span>), context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;loaded&quot;</span>)));</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;}</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kExtensionTestScript =</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;  <span class="stringliteral">&quot;native function A();&quot;</span></div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;  <span class="stringliteral">&quot;native function B();&quot;</span></div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;  <span class="stringliteral">&quot;native function C();&quot;</span></div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;  <span class="stringliteral">&quot;function Foo(i) {&quot;</span></div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;  <span class="stringliteral">&quot;  if (i == 0) return A();&quot;</span></div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;  <span class="stringliteral">&quot;  if (i == 1) return B();&quot;</span></div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;  <span class="stringliteral">&quot;  if (i == 2) return C();&quot;</span></div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;  <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> CallFun(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;  <span class="keywordflow">if</span> (args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a24d4f90132218b046a309a142ed3f5b2">IsConstructCall</a>()) {</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;    args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;data&quot;</span>), args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a1ce111e30d6e5e8be601b45725d9142d">Data</a>());</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a2b822c3fdce0fedc6860872e5ebe48ae">v8::Null</a>();</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;  }</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;  <span class="keywordflow">return</span> args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a1ce111e30d6e5e8be601b45725d9142d">Data</a>();</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;}</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;</div>
<div class="line"><a name="l05088"></a><span class="lineno"><a class="line" href="../../dc/d4c/class_function_extension.html"> 5088</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../dc/d4c/class_function_extension.html">FunctionExtension</a> : <span class="keyword">public</span> Extension {</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l05090"></a><span class="lineno"><a class="line" href="../../dc/d4c/class_function_extension.html#a170773790e133e160e9adf6d60e52644"> 5090</a></span>&#160;  <a class="code" href="../../dc/d4c/class_function_extension.html#a170773790e133e160e9adf6d60e52644">FunctionExtension</a>() : Extension(<span class="stringliteral">&quot;functiontest&quot;</span>, kExtensionTestScript) { }</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> <a class="code" href="../../dc/d4c/class_function_extension.html#af46f30fc7a88ec9ddb91749b8c3c8917">GetNativeFunction</a>(</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> name);</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;};</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> lookup_count = 0;</div>
<div class="line"><a name="l05097"></a><span class="lineno"><a class="line" href="../../dc/d4c/class_function_extension.html#af46f30fc7a88ec9ddb91749b8c3c8917"> 5097</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> <a class="code" href="../../dc/d4c/class_function_extension.html#af46f30fc7a88ec9ddb91749b8c3c8917">FunctionExtension::GetNativeFunction</a>(</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> name) {</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;  lookup_count++;</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;  <span class="keywordflow">if</span> (name-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a2793bb2279e2d391d1b2295110d36efe">Equals</a>(v8_str(<span class="stringliteral">&quot;A&quot;</span>))) {</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(CallFun, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(8));</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a2793bb2279e2d391d1b2295110d36efe">Equals</a>(v8_str(<span class="stringliteral">&quot;B&quot;</span>))) {</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(CallFun, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(7));</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a2793bb2279e2d391d1b2295110d36efe">Equals</a>(v8_str(<span class="stringliteral">&quot;C&quot;</span>))) {</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(CallFun, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(6));</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a>();</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;  }</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;}</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;</div>
<div class="line"><a name="l05112"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1cfc0448331af55e9838dc92cd3e0d70"> 5112</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionLookup) {</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> <a class="code" href="../../dc/d4c/class_function_extension.html">FunctionExtension</a>());</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* exts[1] = { <span class="stringliteral">&quot;functiontest&quot;</span> };</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> config(1, exts);</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(&amp;config);</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, lookup_count);</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(8), Script::Compile(v8_str(<span class="stringliteral">&quot;Foo(0)&quot;</span>))-&gt;Run());</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(7), Script::Compile(v8_str(<span class="stringliteral">&quot;Foo(1)&quot;</span>))-&gt;Run());</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(6), Script::Compile(v8_str(<span class="stringliteral">&quot;Foo(2)&quot;</span>))-&gt;Run());</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;}</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;</div>
<div class="line"><a name="l05125"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a73e1e2fa9835bf6a4d5c783cb9e69ee1"> 5125</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NativeFunctionConstructCall) {</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> <a class="code" href="../../dc/d4c/class_function_extension.html">FunctionExtension</a>());</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* exts[1] = { <span class="stringliteral">&quot;functiontest&quot;</span> };</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> config(1, exts);</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(&amp;config);</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;    <span class="comment">// Run a few times to ensure that allocation of objects doesn&#39;t</span></div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;    <span class="comment">// change behavior of a constructor function.</span></div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(8),</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;             Script::Compile(v8_str(<span class="stringliteral">&quot;(new A()).data&quot;</span>))-&gt;Run());</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(7),</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;             Script::Compile(v8_str(<span class="stringliteral">&quot;(new B()).data&quot;</span>))-&gt;Run());</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(6),</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;             Script::Compile(v8_str(<span class="stringliteral">&quot;(new C()).data&quot;</span>))-&gt;Run());</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;  }</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;}</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* last_location;</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* last_message;</div>
<div class="line"><a name="l05146"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d"> 5146</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* location, <span class="keyword">const</span> <span class="keywordtype">char</span>* message) {</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;  <span class="keywordflow">if</span> (last_location == <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) {</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;    last_location = location;</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    last_message = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a52143ab7f8a8ac8ea0cdbe70d282c73a">message</a>;</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;  }</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;}</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;<span class="comment">// ErrorReporting creates a circular extensions configuration and</span></div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;<span class="comment">// tests that the fatal error handler gets called.  This renders V8</span></div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;<span class="comment">// unusable and therefore this test cannot be run in parallel.</span></div>
<div class="line"><a name="l05157"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a284a994627904f811690d6f63437ba79"> 5157</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ErrorReporting) {</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a>);</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* aDeps[] = { <span class="stringliteral">&quot;B&quot;</span> };</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 1, aDeps));</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* bDeps[] = { <span class="stringliteral">&quot;A&quot;</span> };</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a>(<span class="keyword">new</span> Extension(<span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 1, bDeps));</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;  last_location = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> config(1, bDeps);</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context = Context::New(&amp;config);</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(last_location, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;}</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* js_code_causing_huge_string_flattening =</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;    <span class="stringliteral">&quot;var str = &#39;X&#39;;&quot;</span></div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 30; i++) {&quot;</span></div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;    <span class="stringliteral">&quot;  str = str + str;&quot;</span></div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;    <span class="stringliteral">&quot;str.match(/X/);&quot;</span>;</div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;</div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;</div>
<div class="line"><a name="l05179"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a31809c337ea681c13197f38ca38a116e"> 5179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a31809c337ea681c13197f38ca38a116e">OOMCallback</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* location, <span class="keyword">const</span> <span class="keywordtype">char</span>* message) {</div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;  exit(0);</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;}</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;</div>
<div class="line"><a name="l05184"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a309d20d1214ed903e72f9fd271dcc17d"> 5184</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RegexpOutOfMemory) {</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;  <span class="comment">// Execute a script that causes out of memory when flattening a string.</span></div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a31809c337ea681c13197f38ca38a116e">OOMCallback</a>);</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;  Local&lt;Script&gt; script =</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;      Script::Compile(String::New(js_code_causing_huge_string_flattening));</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;  last_location = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<span class="keyword">false</span>);  <span class="comment">// Should not return.</span></div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;}</div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> MissingScriptInfoMessageListener(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;                                             <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> data) {</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a882197bfb98ad033a941d40e5445fe61">GetScriptResourceName</a>()-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a2858c3ff89ed8f4b756b94cbebcfe42f">IsUndefined</a>());</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>(), message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a882197bfb98ad033a941d40e5445fe61">GetScriptResourceName</a>());</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;  message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a66c1993510fe48d9661aadbbe820ae42">GetLineNumber</a>();</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;  message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#af241afa81627d00a2f751f03fabbe505">GetSourceLine</a>();</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;}</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;</div>
<div class="line"><a name="l05207"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7d8306d2b56baeb89e8a79f4cba5fcdc"> 5207</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ErrorWithMissingScriptInfo) {</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(MissingScriptInfoMessageListener);</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;throw Error()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(MissingScriptInfoMessageListener);</div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;}</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;</div>
<div class="line"><a name="l05216"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa9006bef9943050d2bf712752ab68605"> 5216</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#aa9006bef9943050d2bf712752ab68605">global_index</a> = 0;</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;</div>
<div class="line"><a name="l05218"></a><span class="lineno"><a class="line" href="../../dc/d63/class_snorkel.html"> 5218</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../dc/d63/class_snorkel.html">Snorkel</a> {</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l05220"></a><span class="lineno"><a class="line" href="../../dc/d63/class_snorkel.html#a7db17df339628dddde3bc39a1aa65af2"> 5220</a></span>&#160;  <a class="code" href="../../dc/d63/class_snorkel.html#a7db17df339628dddde3bc39a1aa65af2">Snorkel</a>() { <a class="code" href="../../dc/d63/class_snorkel.html#aaaf1ac02dfa554a3cdffc647d512a77b">index_</a> = global_index++; }</div>
<div class="line"><a name="l05221"></a><span class="lineno"><a class="line" href="../../dc/d63/class_snorkel.html#aaaf1ac02dfa554a3cdffc647d512a77b"> 5221</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d63/class_snorkel.html#aaaf1ac02dfa554a3cdffc647d512a77b">index_</a>;</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;};</div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;</div>
<div class="line"><a name="l05224"></a><span class="lineno"><a class="line" href="../../d8/dc7/class_whammy.html"> 5224</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d8/dc7/class_whammy.html">Whammy</a> {</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l05226"></a><span class="lineno"><a class="line" href="../../d8/dc7/class_whammy.html#a3f4e7f7c94fca48e9390185dc334533d"> 5226</a></span>&#160;  <a class="code" href="../../d8/dc7/class_whammy.html#a3f4e7f7c94fca48e9390185dc334533d">Whammy</a>() {</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;    <a class="code" href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195">cursor_</a> = 0;</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;  }</div>
<div class="line"><a name="l05229"></a><span class="lineno"><a class="line" href="../../d8/dc7/class_whammy.html#a7a4cc3395fe3742d1e50e6fd87bc3d7e"> 5229</a></span>&#160;  <a class="code" href="../../d8/dc7/class_whammy.html#a7a4cc3395fe3742d1e50e6fd87bc3d7e">~Whammy</a>() {</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;    <a class="code" href="../../d8/dc7/class_whammy.html#a0f00375b491ca77495883a3a39d6215f">script_</a>.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;  }</div>
<div class="line"><a name="l05232"></a><span class="lineno"><a class="line" href="../../d8/dc7/class_whammy.html#aa32d37db82770d682b4f065e066031a8"> 5232</a></span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Script&gt;</a> <a class="code" href="../../d8/dc7/class_whammy.html#aa32d37db82770d682b4f065e066031a8">getScript</a>() {</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/dc7/class_whammy.html#a0f00375b491ca77495883a3a39d6215f">script_</a>.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>())</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;      <a class="code" href="../../d8/dc7/class_whammy.html#a0f00375b491ca77495883a3a39d6215f">script_</a> = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Script&gt;::New</a>(v8_compile(<span class="stringliteral">&quot;({}).blammo&quot;</span>));</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;    <span class="keywordflow">return</span> Local&lt;Script&gt;(*script_);</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;  }</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l05239"></a><span class="lineno"><a class="line" href="../../d8/dc7/class_whammy.html#ab0e3f13733c0c01259d716077ce54349"> 5239</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/dc7/class_whammy.html#ab0e3f13733c0c01259d716077ce54349">kObjectCount</a> = 256;</div>
<div class="line"><a name="l05240"></a><span class="lineno"><a class="line" href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195"> 5240</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195">cursor_</a>;</div>
<div class="line"><a name="l05241"></a><span class="lineno"><a class="line" href="../../d8/dc7/class_whammy.html#a9677b5cf9ed74805782fac9ac70227fd"> 5241</a></span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> <a class="code" href="../../d8/dc7/class_whammy.html#a9677b5cf9ed74805782fac9ac70227fd">objects_</a>[<a class="code" href="../../d8/dc7/class_whammy.html#ab0e3f13733c0c01259d716077ce54349">kObjectCount</a>];</div>
<div class="line"><a name="l05242"></a><span class="lineno"><a class="line" href="../../d8/dc7/class_whammy.html#a0f00375b491ca77495883a3a39d6215f"> 5242</a></span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Script&gt;</a> <a class="code" href="../../d8/dc7/class_whammy.html#a0f00375b491ca77495883a3a39d6215f">script_</a>;</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;};</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> HandleWeakReference(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> obj, <span class="keywordtype">void</span>* data) {</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;  <a class="code" href="../../dc/d63/class_snorkel.html">Snorkel</a>* snorkel = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../dc/d63/class_snorkel.html">Snorkel</a>*<span class="keyword">&gt;</span>(data);</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;  <span class="keyword">delete</span> snorkel;</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;  obj.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a7fbf1c0bfd2cad0da59b4c13bd437353">ClearWeak</a>();</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;}</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;</div>
<div class="line"><a name="l05251"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3c31857e5f7402225b227674222a5028"> 5251</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a3c31857e5f7402225b227674222a5028">WhammyPropertyGetter</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;                                       <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;  <a class="code" href="../../d8/dc7/class_whammy.html">Whammy</a>* whammy =</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="../../d8/dc7/class_whammy.html">Whammy</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::External&gt;::Cast</a>(info.Data())-&gt;Value());</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> prev = whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#a9677b5cf9ed74805782fac9ac70227fd">objects_</a>[whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195">cursor_</a>];</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> global = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(obj);</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;  <span class="keywordflow">if</span> (!prev.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>()) {</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;    prev-&gt;Set(v8_str(<span class="stringliteral">&quot;next&quot;</span>), obj);</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;    prev.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a5610d667bc793ba0af838bb134941bec">MakeWeak</a>(<span class="keyword">new</span> <a class="code" href="../../dc/d63/class_snorkel.html">Snorkel</a>(), &amp;HandleWeakReference);</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;    whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#a9677b5cf9ed74805782fac9ac70227fd">objects_</a>[whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195">cursor_</a>].<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;  }</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;  whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#a9677b5cf9ed74805782fac9ac70227fd">objects_</a>[whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195">cursor_</a>] = global;</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;  whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195">cursor_</a> = (whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195">cursor_</a> + 1) % <a class="code" href="../../d8/dc7/class_whammy.html#ab0e3f13733c0c01259d716077ce54349">Whammy::kObjectCount</a>;</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;  <span class="keywordflow">return</span> whammy-&gt;<a class="code" href="../../d8/dc7/class_whammy.html#aa32d37db82770d682b4f065e066031a8">getScript</a>()-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;}</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;</div>
<div class="line"><a name="l05270"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab620010028dd9ceca37fa80fe80fe9f3"> 5270</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(WeakReference) {</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ= <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;  <a class="code" href="../../d8/dc7/class_whammy.html">Whammy</a>* whammy = <span class="keyword">new</span> <a class="code" href="../../d8/dc7/class_whammy.html">Whammy</a>();</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a3c31857e5f7402225b227674222a5028">WhammyPropertyGetter</a>,</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;                                 0, 0, 0, 0,</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;                                 <a class="code" href="../../d8/d0f/classv8_1_1_external.html#af13dc19fd1673516612ebe71ccf69ed1">v8::External::New</a>(whammy));</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_list[] = { <span class="stringliteral">&quot;v8/gc&quot;</span> };</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;  <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_list);</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context = Context::New(&amp;extensions);</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;  Context::Scope context_scope(context);</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> interceptor = templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;  context-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;whammy&quot;</span>), interceptor);</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;      <span class="stringliteral">&quot;var last;&quot;</span></div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10000; i++) {&quot;</span></div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;      <span class="stringliteral">&quot;  var obj = whammy.length;&quot;</span></div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;      <span class="stringliteral">&quot;  if (last) last.next = obj;&quot;</span></div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;      <span class="stringliteral">&quot;  last = obj;&quot;</span></div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;      <span class="stringliteral">&quot;gc();&quot;</span></div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;      <span class="stringliteral">&quot;4&quot;</span>;</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = CompileRun(code);</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4.0, result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a21bbf71d057f8357a5345fa4ee8b1593">NumberValue</a>());</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;  <span class="keyword">delete</span> whammy;</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;  context.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;}</div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> DisposeAndSetFlag(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> obj, <span class="keywordtype">void</span>* data) {</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;  obj.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;  obj.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;  *(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">bool</span>*<span class="keyword">&gt;</span>(data)) = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;}</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;</div>
<div class="line"><a name="l05307"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6c73614365f6c77514dae21aae4e1ca3"> 5307</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndependentWeakHandle) {</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context = Context::New();</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;  Context::Scope context_scope(context);</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;</div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> object_a;</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;  {</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;    object_a = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;  }</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;  <span class="keywordtype">bool</span> object_a_disposed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;  object_a.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a5610d667bc793ba0af838bb134941bec">MakeWeak</a>(&amp;object_a_disposed, &amp;DisposeAndSetFlag);</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!object_a.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ab7f36531c05fb591f26fb461d0ce560e">IsIndependent</a>());</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;  object_a.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a42b43d78514ac4b011af584f3058da98">MarkIndependent</a>();</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object_a.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ab7f36531c05fb591f26fb461d0ce560e">IsIndependent</a>());</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;PerformScavenge();</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object_a_disposed);</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;}</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;</div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InvokeScavenge() {</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;PerformScavenge();</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;}</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InvokeMarkSweep() {</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;}</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ForceScavenge(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> obj, <span class="keywordtype">void</span>* data) {</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;  obj.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;  obj.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;  *(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">bool</span>*<span class="keyword">&gt;</span>(data)) = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;  InvokeScavenge();</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;}</div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ForceMarkSweep(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> obj, <span class="keywordtype">void</span>* data) {</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;  obj.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;  obj.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;  *(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">bool</span>*<span class="keyword">&gt;</span>(data)) = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;  InvokeMarkSweep();</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;}</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;</div>
<div class="line"><a name="l05354"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af3b7545e18a1f5e9bcc16806028f11ed"> 5354</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GCFromWeakCallbacks) {</div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context = Context::New();</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;  Context::Scope context_scope(context);</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;</div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNumberOfGCTypes = 2;</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a8e04bec100ff9e4d91edc074d3efba57">v8::WeakReferenceCallback</a> gc_forcing_callback[kNumberOfGCTypes] =</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;      {&amp;ForceScavenge, &amp;ForceMarkSweep};</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;  <span class="keyword">typedef</span> void (*GCInvoker)();</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;  GCInvoker invoke_gc[kNumberOfGCTypes] = {&amp;InvokeScavenge, &amp;InvokeMarkSweep};</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> outer_gc = 0; outer_gc &lt; kNumberOfGCTypes; outer_gc++) {</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> inner_gc = 0; inner_gc &lt; kNumberOfGCTypes; inner_gc++) {</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;      <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> object;</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;      {</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;        <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;        <span class="keywordtype">object</span> = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;      }</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;      <span class="keywordtype">bool</span> disposed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;      <span class="keywordtype">object</span>.MakeWeak(&amp;disposed, gc_forcing_callback[inner_gc]);</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;      <span class="keywordtype">object</span>.MarkIndependent();</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;      invoke_gc[outer_gc]();</div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(disposed);</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;    }</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;  }</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;}</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;</div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RevivingCallback(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> obj, <span class="keywordtype">void</span>* data) {</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;  obj.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a7fbf1c0bfd2cad0da59b4c13bd437353">ClearWeak</a>();</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;  *(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">bool</span>*<span class="keyword">&gt;</span>(data)) = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;}</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;</div>
<div class="line"><a name="l05388"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9be1acb481f2e8dbb30bb17c9f6f11a0"> 5388</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IndependentHandleRevival) {</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context = Context::New();</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;  Context::Scope context_scope(context);</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> object;</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;  {</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;    <span class="keywordtype">object</span> = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;    <span class="keywordtype">object</span>-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1));</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;String&gt;</a> y_str = v8_str(<span class="stringliteral">&quot;y&quot;</span>);</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;    <span class="keywordtype">object</span>-&gt;Set(y_str, y_str);</div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;  }</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;  <span class="keywordtype">bool</span> revived = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;  <span class="keywordtype">object</span>.MakeWeak(&amp;revived, &amp;RevivingCallback);</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;  <span class="keywordtype">object</span>.MarkIndependent();</div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;PerformScavenge();</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(revived);</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;  {</div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;String&gt;</a> y_str = v8_str(<span class="stringliteral">&quot;y&quot;</span>);</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1), object-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>)));</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object-&gt;Get(y_str)-&gt;Equals(y_str));</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;  }</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;}</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;</div>
<div class="line"><a name="l05415"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7c838431fef6bd211d7d5313d5a765fa"> 5415</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Function&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a7c838431fef6bd211d7d5313d5a765fa">args_fun</a>;</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ArgumentsTestCallback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(args_fun, args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a0310a886b8284573e22313dcb3b113cc">Callee</a>());</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>());</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1), args[0]);</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2), args[1]);</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3), args[2]);</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>(), args[3]);</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;}</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;</div>
<div class="line"><a name="l05432"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6e5333a0f2ed18d9b9604ed71be9d4b7"> 5432</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Arguments) {</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global = ObjectTemplate::New();</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;  global-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;f&quot;</span>), <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(ArgumentsTestCallback));</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global);</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;  args_fun = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;f&quot;</span>)).<a class="code" href="../../de/deb/classv8_1_1_local.html#a626f0925cb54d03f780b48ec9538618c">As</a>&lt;Function&gt;();</div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;  v8_compile(<span class="stringliteral">&quot;f(1, 2, 3)&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;}</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NoBlockGetterX(Local&lt;String&gt; name,</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;                                        <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;}</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NoBlockGetterI(uint32_t index,</div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;                                        <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;}</div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;</div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> PDeleter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;                                        <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;  <span class="keywordflow">if</span> (!name-&gt;Equals(v8_str(<span class="stringliteral">&quot;foo&quot;</span>))) {</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a>();  <span class="comment">// not intercepted</span></div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;  }</div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;</div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>();  <span class="comment">// intercepted, and don&#39;t delete the property</span></div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;}</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> IDeleter(uint32_t index, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;  <span class="keywordflow">if</span> (index != 2) {</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a>();  <span class="comment">// not intercepted</span></div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;  }</div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>();  <span class="comment">// intercepted, and don&#39;t delete the property</span></div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;}</div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;</div>
<div class="line"><a name="l05473"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a09a0906ffa4dbf10c2ed42d2e23acfba"> 5473</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Deleter) {</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj = ObjectTemplate::New();</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, PDeleter, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ad3baf9d0959cbc49663a33718d7dd8a3">SetIndexedPropertyHandler</a>(NoBlockGetterI, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, IDeleter, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;k&quot;</span>), obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;  CompileRun(</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;    <span class="stringliteral">&quot;k.foo = &#39;foo&#39;;&quot;</span></div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;    <span class="stringliteral">&quot;k.bar = &#39;bar&#39;;&quot;</span></div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;    <span class="stringliteral">&quot;k[2] = 2;&quot;</span></div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;    <span class="stringliteral">&quot;k[4] = 4;&quot;</span>);</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;delete k.foo&quot;</span>)-&gt;Run()-&gt;IsFalse());</div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;delete k.bar&quot;</span>)-&gt;Run()-&gt;IsTrue());</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_compile(<span class="stringliteral">&quot;k.foo&quot;</span>)-&gt;Run(), v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;k.bar&quot;</span>)-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;delete k[2]&quot;</span>)-&gt;Run()-&gt;IsFalse());</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;delete k[4]&quot;</span>)-&gt;Run()-&gt;IsTrue());</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_compile(<span class="stringliteral">&quot;k[2]&quot;</span>)-&gt;Run(), v8_num(2));</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;k[4]&quot;</span>)-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;}</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> GetK(Local&lt;String&gt; name, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;  <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)) ||</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;      name-&gt;Equals(v8_str(<span class="stringliteral">&quot;bar&quot;</span>)) ||</div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;      name-&gt;Equals(v8_str(<span class="stringliteral">&quot;baz&quot;</span>))) {</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;  }</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;}</div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;</div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> IndexedGetK(uint32_t index, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;  <span class="keywordflow">if</span> (index == 0 || index == 1) <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;}</div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;</div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;</div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> NamedEnum(<span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>(3);</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;  result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0), v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;  result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1), v8_str(<span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;  result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2), v8_str(<span class="stringliteral">&quot;baz&quot;</span>));</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;}</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;</div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> IndexedEnum(<span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>(2);</div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;  result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0), v8_str(<span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;  result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1), v8_str(<span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;}</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;</div>
<div class="line"><a name="l05536"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#accd759221c92befbf423145c4bc5b27c"> 5536</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Enumerators) {</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj = ObjectTemplate::New();</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(GetK, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, NamedEnum);</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ad3baf9d0959cbc49663a33718d7dd8a3">SetIndexedPropertyHandler</a>(IndexedGetK, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, IndexedEnum);</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;k&quot;</span>), obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Array&gt;::Cast</a>(CompileRun(</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;    <span class="stringliteral">&quot;k[10] = 0;&quot;</span></div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;    <span class="stringliteral">&quot;k.a = 0;&quot;</span></div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;    <span class="stringliteral">&quot;k[5] = 0;&quot;</span></div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;    <span class="stringliteral">&quot;k.b = 0;&quot;</span></div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;    <span class="stringliteral">&quot;k[4294967295] = 0;&quot;</span></div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;    <span class="stringliteral">&quot;k.c = 0;&quot;</span></div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;    <span class="stringliteral">&quot;k[4294967296] = 0;&quot;</span></div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;    <span class="stringliteral">&quot;k.d = 0;&quot;</span></div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;    <span class="stringliteral">&quot;k[140000] = 0;&quot;</span></div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;    <span class="stringliteral">&quot;k.e = 0;&quot;</span></div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;    <span class="stringliteral">&quot;k[30000000000] = 0;&quot;</span></div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;    <span class="stringliteral">&quot;k.f = 0;&quot;</span></div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;    <span class="stringliteral">&quot;var result = [];&quot;</span></div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;    <span class="stringliteral">&quot;for (var prop in k) {&quot;</span></div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;    <span class="stringliteral">&quot;  result.push(prop);&quot;</span></div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;    <span class="stringliteral">&quot;result&quot;</span>));</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;  <span class="comment">// Check that we get all the property names returned including the</span></div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;  <span class="comment">// ones from the enumerators in the right order: indexed properties</span></div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;  <span class="comment">// in numerical order, indexed interceptor properties, named</span></div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;  <span class="comment">// properties in insertion order, named interceptor properties.</span></div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;  <span class="comment">// This order is not mandated by the spec, so this test is just</span></div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;  <span class="comment">// documenting our behavior.</span></div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(17, result-&gt;<a class="code" href="../../d3/d32/classv8_1_1_array.html#a9d79066f5b28c73a0f6f248bbf846fe1">Length</a>());</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;  <span class="comment">// Indexed properties in numerical order.</span></div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;5&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0)));</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;10&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1)));</div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;140000&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2)));</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;4294967295&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3)));</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;  <span class="comment">// Indexed interceptor properties in the order they are returned</span></div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;  <span class="comment">// from the enumerator interceptor.</span></div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(4)));</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;1&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(5)));</div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;  <span class="comment">// Named properties in insertion order.</span></div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;a&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(6)));</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;b&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(7)));</div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;c&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(8)));</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;4294967296&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(9)));</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;d&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(10)));</div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;e&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(11)));</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;30000000000&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(12)));</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;f&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(13)));</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;  <span class="comment">// Named interceptor properties.</span></div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;foo&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(14)));</div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;bar&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(15)));</div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;baz&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(16)));</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;}</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;</div>
<div class="line"><a name="l05593"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1c7a1580fb42beaa6b34f633c2abe974"> 5593</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a1c7a1580fb42beaa6b34f633c2abe974">p_getter_count</a>;</div>
<div class="line"><a name="l05594"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae70b03092707fc7693a8f6e82a197b5a"> 5594</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ae70b03092707fc7693a8f6e82a197b5a">p_getter_count2</a>;</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> PGetter(Local&lt;String&gt; name, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;  p_getter_count++;</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = Context::GetCurrent()-&gt;Global();</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.Holder(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o1&quot;</span>)));</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;  <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;p1&quot;</span>))) {</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.This(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o1&quot;</span>)));</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;p2&quot;</span>))) {</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.This(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o2&quot;</span>)));</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;p3&quot;</span>))) {</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.This(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o3&quot;</span>)));</div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;p4&quot;</span>))) {</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.This(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o4&quot;</span>)));</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;  }</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;}</div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RunHolderTest(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj) {</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o1&quot;</span>), obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;  CompileRun(</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;    <span class="stringliteral">&quot;o1.__proto__ = { };&quot;</span></div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;    <span class="stringliteral">&quot;var o2 = { __proto__: o1 };&quot;</span></div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;    <span class="stringliteral">&quot;var o3 = { __proto__: o2 };&quot;</span></div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;    <span class="stringliteral">&quot;var o4 = { __proto__: o3 };&quot;</span></div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) o4.p4;&quot;</span></div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) o3.p3;&quot;</span></div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) o2.p2;&quot;</span></div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) o1.p1;&quot;</span>);</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;}</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> PGetter2(Local&lt;String&gt; name,</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;                                  <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;  p_getter_count2++;</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = Context::GetCurrent()-&gt;Global();</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.Holder(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o1&quot;</span>)));</div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;  <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;p1&quot;</span>))) {</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.This(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o1&quot;</span>)));</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;p2&quot;</span>))) {</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.This(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o2&quot;</span>)));</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;p3&quot;</span>))) {</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.This(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o3&quot;</span>)));</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;p4&quot;</span>))) {</div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(info.This(), global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;o4&quot;</span>)));</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;  }</div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;}</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;</div>
<div class="line"><a name="l05650"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2341df6410aa20ec699c6fc9d54bbe51"> 5650</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GetterHolders) {</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj = ObjectTemplate::New();</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;p1&quot;</span>), PGetter);</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;p2&quot;</span>), PGetter);</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;p3&quot;</span>), PGetter);</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;p4&quot;</span>), PGetter);</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;  p_getter_count = 0;</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;  RunHolderTest(obj);</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(40, p_getter_count);</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;}</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;</div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;</div>
<div class="line"><a name="l05663"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4082f2bec05612fb9d984eb91ae395c2"> 5663</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(PreInterceptorHolders) {</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj = ObjectTemplate::New();</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(PGetter2);</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;  p_getter_count2 = 0;</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;  RunHolderTest(obj);</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(40, p_getter_count2);</div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;}</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;</div>
<div class="line"><a name="l05673"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a336ba829e3b906ec23c686056fe8c333"> 5673</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ObjectInstantiation) {</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;t&quot;</span>), PGetter2);</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> inner_scope;</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(obj, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;o&quot;</span>)));</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o2&quot;</span>), obj);</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value =</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;        Script::Compile(v8_str(<span class="stringliteral">&quot;o.__proto__ === o2.__proto__&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>(), value);</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), obj);</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;  }</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;}</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> StrCmp16(<a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* a, <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* b) {</div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;    <span class="keywordflow">if</span> (*a == 0 &amp;&amp; *b == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;    <span class="keywordflow">if</span> (*a != *b) <span class="keywordflow">return</span> 0 + *a - *b;</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;    a++;</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;    b++;</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;  }</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;}</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> StrNCmp16(<a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* a, <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* b, <span class="keywordtype">int</span> n) {</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    <span class="keywordflow">if</span> (n-- == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;    <span class="keywordflow">if</span> (*a == 0 &amp;&amp; *b == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;    <span class="keywordflow">if</span> (*a != *b) <span class="keywordflow">return</span> 0 + *a - *b;</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    a++;</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;    b++;</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;  }</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;}</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;</div>
<div class="line"><a name="l05713"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad8398b8671b8c35ed3b5e312d8385b92"> 5713</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ad8398b8671b8c35ed3b5e312d8385b92">GetUtf8Length</a>(Handle&lt;String&gt; str) {</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;  <span class="keywordtype">int</span> len = str-&gt;Utf8Length();</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;  <span class="keywordflow">if</span> (len &lt; 0) {</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> istr(v8::Utils::OpenHandle(*str));</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">i::FlattenString</a>(istr);</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;    len = str-&gt;Utf8Length();</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;  }</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;  <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;}</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;</div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;</div>
<div class="line"><a name="l05724"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7b629a09e32a8c8288813b61775b0622"> 5724</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(StringWrite) {</div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> str = v8_str(<span class="stringliteral">&quot;abcde&quot;</span>);</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;  <span class="comment">// abc&lt;Icelandic eth&gt;&lt;Unicode snowman&gt;.</span></div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> str2 = v8_str(<span class="stringliteral">&quot;abc\303\260\342\230\203&quot;</span>);</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> str3 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;abc\0def&quot;</span>, 7);</div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kStride = 4;  <span class="comment">// Must match stride in for loops in JS below.</span></div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;  CompileRun(</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;      <span class="stringliteral">&quot;var left = &#39;&#39;;&quot;</span></div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 0xd800; i += 4) {&quot;</span></div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;      <span class="stringliteral">&quot;  left = left + String.fromCharCode(i);&quot;</span></div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;  CompileRun(</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;      <span class="stringliteral">&quot;var right = &#39;&#39;;&quot;</span></div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 0xd800; i += 4) {&quot;</span></div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;      <span class="stringliteral">&quot;  right = String.fromCharCode(i) + right;&quot;</span></div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = Context::GetCurrent()-&gt;Global();</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;  Handle&lt;String&gt; left_tree = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;left&quot;</span>)).As&lt;String&gt;();</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;  Handle&lt;String&gt; right_tree = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;right&quot;</span>)).As&lt;String&gt;();</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, str2-&gt;Length());</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xd800 / kStride, left_tree-&gt;Length());</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xd800 / kStride, right_tree-&gt;Length());</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;  <span class="keywordtype">char</span> buf[100];</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;  <span class="keywordtype">char</span> utf8buf[0xd800 * 3];</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> wbuf[100];</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;  <span class="keywordtype">int</span> len;</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;  <span class="keywordtype">int</span> charlen;</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;  memset(utf8buf, 0x1, 1000);</div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, <span class="keyword">sizeof</span>(utf8buf), &amp;charlen);</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(9, len);</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, charlen);</div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(utf8buf, <span class="stringliteral">&quot;abc\303\260\342\230\203&quot;</span>));</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;  memset(utf8buf, 0x1, 1000);</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, 8, &amp;charlen);</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8, len);</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, charlen);</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(utf8buf, <span class="stringliteral">&quot;abc\303\260\342\230\203\1&quot;</span>, 9));</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;  memset(utf8buf, 0x1, 1000);</div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, 7, &amp;charlen);</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, charlen);</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(utf8buf, <span class="stringliteral">&quot;abc\303\260\1&quot;</span>, 5));</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;  memset(utf8buf, 0x1, 1000);</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, 6, &amp;charlen);</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, charlen);</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(utf8buf, <span class="stringliteral">&quot;abc\303\260\1&quot;</span>, 5));</div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;  memset(utf8buf, 0x1, 1000);</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, 5, &amp;charlen);</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, charlen);</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(utf8buf, <span class="stringliteral">&quot;abc\303\260\1&quot;</span>, 5));</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;  memset(utf8buf, 0x1, 1000);</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, 4, &amp;charlen);</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, len);</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, charlen);</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(utf8buf, <span class="stringliteral">&quot;abc\1&quot;</span>, 4));</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;  memset(utf8buf, 0x1, 1000);</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, 3, &amp;charlen);</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, len);</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, charlen);</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(utf8buf, <span class="stringliteral">&quot;abc\1&quot;</span>, 4));</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;  memset(utf8buf, 0x1, 1000);</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, 2, &amp;charlen);</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, len);</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, charlen);</div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(utf8buf, <span class="stringliteral">&quot;ab\1&quot;</span>, 3));</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;  memset(utf8buf, 0x1, <span class="keyword">sizeof</span>(utf8buf));</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;  len = <a class="code" href="../../de/d3f/test-api_8cc.html#ad8398b8671b8c35ed3b5e312d8385b92">GetUtf8Length</a>(left_tree);</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;  <span class="keywordtype">int</span> utf8_expected =</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;      (0x80 + (0x800 - 0x80) * 2 + (0xd800 - 0x800) * 3) / kStride;</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(utf8_expected, len);</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;  len = left_tree-&gt;WriteUtf8(utf8buf, utf8_expected, &amp;charlen);</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(utf8_expected, len);</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xd800 / kStride, charlen);</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xed, static_cast&lt;unsigned char&gt;(utf8buf[utf8_expected - 3]));</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0x9f, static_cast&lt;unsigned char&gt;(utf8buf[utf8_expected - 2]));</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xc0 - kStride,</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;           static_cast&lt;unsigned char&gt;(utf8buf[utf8_expected - 1]));</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, utf8buf[utf8_expected]);</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;  memset(utf8buf, 0x1, <span class="keyword">sizeof</span>(utf8buf));</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;  len = <a class="code" href="../../de/d3f/test-api_8cc.html#ad8398b8671b8c35ed3b5e312d8385b92">GetUtf8Length</a>(right_tree);</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(utf8_expected, len);</div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;  len = right_tree-&gt;WriteUtf8(utf8buf, utf8_expected, &amp;charlen);</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(utf8_expected, len);</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xd800 / kStride, charlen);</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xed, static_cast&lt;unsigned char&gt;(utf8buf[0]));</div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0x9f, static_cast&lt;unsigned char&gt;(utf8buf[1]));</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xc0 - kStride, static_cast&lt;unsigned char&gt;(utf8buf[2]));</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, utf8buf[utf8_expected]);</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;  len = str-&gt;WriteAscii(buf);</div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;  len = str-&gt;Write(wbuf);</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(<span class="stringliteral">&quot;abcde&quot;</span>, buf));</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer1[] = {<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;\0&#39;</span>};</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrCmp16(answer1, wbuf));</div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;</div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;  len = str-&gt;WriteAscii(buf, 0, 4);</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, len);</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;  len = str-&gt;Write(wbuf, 0, 4);</div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, len);</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(<span class="stringliteral">&quot;abcd\1&quot;</span>, buf, 5));</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer2[] = {<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, 0x101};</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrNCmp16(answer2, wbuf, 5));</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;</div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;  len = str-&gt;WriteAscii(buf, 0, 5);</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;  len = str-&gt;Write(wbuf, 0, 5);</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(<span class="stringliteral">&quot;abcde\1&quot;</span>, buf, 6));</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer3[] = {<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, 0x101};</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrNCmp16(answer3, wbuf, 6));</div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;  len = str-&gt;WriteAscii(buf, 0, 6);</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;  len = str-&gt;Write(wbuf, 0, 6);</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(<span class="stringliteral">&quot;abcde&quot;</span>, buf));</div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer4[] = {<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;\0&#39;</span>};</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrCmp16(answer4, wbuf));</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;  len = str-&gt;WriteAscii(buf, 4, -1);</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, len);</div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;  len = str-&gt;Write(wbuf, 4, -1);</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, len);</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(<span class="stringliteral">&quot;e&quot;</span>, buf));</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer5[] = {<span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;\0&#39;</span>};</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrCmp16(answer5, wbuf));</div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;  len = str-&gt;WriteAscii(buf, 4, 6);</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, len);</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;  len = str-&gt;Write(wbuf, 4, 6);</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, len);</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(<span class="stringliteral">&quot;e&quot;</span>, buf));</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrCmp16(answer5, wbuf));</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;  len = str-&gt;WriteAscii(buf, 4, 1);</div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, len);</div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;  len = str-&gt;Write(wbuf, 4, 1);</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, len);</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(<span class="stringliteral">&quot;e\1&quot;</span>, buf, 2));</div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer6[] = {<span class="charliteral">&#39;e&#39;</span>, 0x101};</div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrNCmp16(answer6, wbuf, 2));</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;  len = str-&gt;WriteAscii(buf, 3, 1);</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, len);</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;  len = str-&gt;Write(wbuf, 3, 1);</div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, len);</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(<span class="stringliteral">&quot;d\1&quot;</span>, buf, 2));</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer7[] = {<span class="charliteral">&#39;d&#39;</span>, 0x101};</div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrNCmp16(answer7, wbuf, 2));</div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;</div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;  memset(wbuf, 0x1, <span class="keyword">sizeof</span>(wbuf));</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;  wbuf[5] = <span class="charliteral">&#39;X&#39;</span>;</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;  len = str-&gt;Write(wbuf, 0, 6, String::NO_NULL_TERMINATION);</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="charliteral">&#39;X&#39;</span>, wbuf[5]);</div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer8a[] = {<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;e&#39;</span>};</div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> answer8b[] = {<span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;\0&#39;</span>};</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrNCmp16(answer8a, wbuf, 5));</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(0, StrCmp16(answer8b, wbuf));</div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;  wbuf[5] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, StrCmp16(answer8b, wbuf));</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;  buf[5] = <span class="charliteral">&#39;X&#39;</span>;</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;  len = str-&gt;WriteAscii(buf, 0, 6, String::NO_NULL_TERMINATION);</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="charliteral">&#39;X&#39;</span>, buf[5]);</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(<span class="stringliteral">&quot;abcde&quot;</span>, buf, 5));</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(0, strcmp(<span class="stringliteral">&quot;abcde&quot;</span>, buf));</div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;  buf[5] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(<span class="stringliteral">&quot;abcde&quot;</span>, buf));</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;  memset(utf8buf, 0x1, <span class="keyword">sizeof</span>(utf8buf));</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;  utf8buf[8] = <span class="charliteral">&#39;X&#39;</span>;</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;  len = str2-&gt;WriteUtf8(utf8buf, <span class="keyword">sizeof</span>(utf8buf), &amp;charlen,</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;                        String::NO_NULL_TERMINATION);</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8, len);</div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="charliteral">&#39;X&#39;</span>, utf8buf[8]);</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, charlen);</div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strncmp(utf8buf, <span class="stringliteral">&quot;abc\303\260\342\230\203&quot;</span>, 8));</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(0, strcmp(utf8buf, <span class="stringliteral">&quot;abc\303\260\342\230\203&quot;</span>));</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;  utf8buf[8] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(utf8buf, <span class="stringliteral">&quot;abc\303\260\342\230\203&quot;</span>));</div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;  memset(utf8buf, 0x1, <span class="keyword">sizeof</span>(utf8buf));</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;  utf8buf[5] = <span class="charliteral">&#39;X&#39;</span>;</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;  len = str-&gt;WriteUtf8(utf8buf, <span class="keyword">sizeof</span>(utf8buf), &amp;charlen,</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;                        String::NO_NULL_TERMINATION);</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, len);</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="charliteral">&#39;X&#39;</span>, utf8buf[5]);  <span class="comment">// Test that the sixth character is untouched.</span></div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, charlen);</div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;  utf8buf[5] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(utf8buf, <span class="stringliteral">&quot;abcde&quot;</span>));</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;  len = str3-&gt;WriteAscii(buf);</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, len);</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(<span class="stringliteral">&quot;abc def&quot;</span>, buf));</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;  len = str3-&gt;WriteAscii(buf, 0, -1, String::PRESERVE_ASCII_NULL);</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, len);</div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(<span class="stringliteral">&quot;abc&quot;</span>, buf));</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, buf[3]);</div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(<span class="stringliteral">&quot;def&quot;</span>, buf + 4));</div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;}</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> Utf16Helper(</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a>&amp; context,</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* name,</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* lengths_name,</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;    <span class="keywordtype">int</span> len) {</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;  Local&lt;v8::Array&gt; a =</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;      Local&lt;v8::Array&gt;::Cast(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(name)));</div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;  Local&lt;v8::Array&gt; alens =</div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;      Local&lt;v8::Array&gt;::Cast(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(lengths_name)));</div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; len; i++) {</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;    Local&lt;v8::String&gt; <span class="keywordtype">string</span> =</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;      Local&lt;v8::String&gt;::Cast(a-&gt;Get(i));</div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;    Local&lt;v8::Number&gt; expected_len =</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;      Local&lt;v8::Number&gt;::Cast(alens-&gt;Get(i));</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected_len-&gt;Value() != <span class="keywordtype">string</span>-&gt;Length(),</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;             <span class="keywordtype">string</span>-&gt;MayContainNonAscii());</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;    <span class="keywordtype">int</span> length = <a class="code" href="../../de/d3f/test-api_8cc.html#ad8398b8671b8c35ed3b5e312d8385b92">GetUtf8Length</a>(<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int&gt;(expected_len-&gt;Value()), length);</div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;  }</div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;}</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;</div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> StringGet(Handle&lt;String&gt; str, <span class="keywordtype">int</span> index) {</div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> istring =</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;      v8::Utils::OpenHandle(String::Cast(*str));</div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;  <span class="keywordflow">return</span> istring-&gt;Get(index);</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;}</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> WriteUtf8Helper(</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a>&amp; context,</div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* name,</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* lengths_name,</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;    <span class="keywordtype">int</span> len) {</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;  Local&lt;v8::Array&gt; b =</div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;      Local&lt;v8::Array&gt;::Cast(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(name)));</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;  Local&lt;v8::Array&gt; alens =</div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;      Local&lt;v8::Array&gt;::Cast(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(lengths_name)));</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;  <span class="keywordtype">char</span> buffer[1000];</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;  <span class="keywordtype">char</span> buffer2[1000];</div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; len; i++) {</div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;    Local&lt;v8::String&gt; <span class="keywordtype">string</span> =</div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;      Local&lt;v8::String&gt;::Cast(b-&gt;Get(i));</div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;    Local&lt;v8::Number&gt; expected_len =</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;      Local&lt;v8::Number&gt;::Cast(alens-&gt;Get(i));</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;    <span class="keywordtype">int</span> utf8_length = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(expected_len-&gt;Value());</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = utf8_length + 1; j &gt;= 0; j--) {</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;      memset(reinterpret_cast&lt;void*&gt;(&amp;buffer), 42, <span class="keyword">sizeof</span>(buffer));</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;      memset(reinterpret_cast&lt;void*&gt;(&amp;buffer2), 42, <span class="keyword">sizeof</span>(buffer2));</div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;      <span class="keywordtype">int</span> nchars;</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;      <span class="keywordtype">int</span> utf8_written =</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;          <span class="keywordtype">string</span>-&gt;WriteUtf8(buffer, j, &amp;nchars, String::NO_OPTIONS);</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;      <span class="keywordtype">int</span> utf8_written2 =</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;          <span class="keywordtype">string</span>-&gt;WriteUtf8(buffer2, j, &amp;nchars, String::NO_NULL_TERMINATION);</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(utf8_length + 1, utf8_written);</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(utf8_length, utf8_written2);</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; utf8_written2; k++) {</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(buffer[k], buffer2[k]);</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;      }</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(nchars * 3 &gt;= utf8_written - 1);</div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(nchars &lt;= utf8_written);</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;      <span class="keywordflow">if</span> (j == utf8_length + 1) {</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(utf8_written2, utf8_length);</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(utf8_written2 + 1, utf8_written);</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;      }</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(buffer[utf8_written], 42);</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;      <span class="keywordflow">if</span> (j &gt; utf8_length) {</div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;        <span class="keywordflow">if</span> (utf8_written != 0) <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(buffer[utf8_written - 1], 0);</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;        <span class="keywordflow">if</span> (utf8_written &gt; 1) <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(buffer[utf8_written - 2], 42);</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;        Handle&lt;String&gt; roundtrip = v8_str(buffer);</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(roundtrip-&gt;Equals(<span class="keywordtype">string</span>));</div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;        <span class="keywordflow">if</span> (utf8_written != 0) <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(buffer[utf8_written - 1], 42);</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;      }</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;      <span class="keywordflow">if</span> (utf8_written2 != 0) <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(buffer[utf8_written - 1], 42);</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;      <span class="keywordflow">if</span> (nchars &gt;= 2) {</div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;        <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> trail = StringGet(<span class="keywordtype">string</span>, nchars - 1);</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;        <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> lead = StringGet(<span class="keywordtype">string</span>, nchars - 2);</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;        <span class="keywordflow">if</span> (((lead &amp; 0xfc00) == 0xd800) &amp;&amp;</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;            ((trail &amp; 0xfc00) == 0xdc00)) {</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> u1 = buffer2[utf8_written2 - 4];</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> u2 = buffer2[utf8_written2 - 3];</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> u3 = buffer2[utf8_written2 - 2];</div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> u4 = buffer2[utf8_written2 - 1];</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>((u1 &amp; 0xf8), 0xf0);</div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>((u2 &amp; 0xc0), 0x80);</div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>((u3 &amp; 0xc0), 0x80);</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>((u4 &amp; 0xc0), 0x80);</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;          uint32_t c = 0x10000 + ((lead &amp; 0x3ff) &lt;&lt; 10) + (trail &amp; 0x3ff);</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>((u4 &amp; 0x3f), (c &amp; 0x3f));</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>((u3 &amp; 0x3f), ((c &gt;&gt; 6) &amp; 0x3f));</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>((u2 &amp; 0x3f), ((c &gt;&gt; 12) &amp; 0x3f));</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>((u1 &amp; 0x3), c &gt;&gt; 18);</div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;        }</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;      }</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;    }</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;  }</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;}</div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;</div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;</div>
<div class="line"><a name="l06066"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7196bbfb4c63460fc956b40bb999fdab"> 6066</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Utf16) {</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;  CompileRun(</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;      <span class="stringliteral">&quot;var pad = &#39;01234567890123456789&#39;;&quot;</span></div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;      <span class="stringliteral">&quot;var p = [];&quot;</span></div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;      <span class="stringliteral">&quot;var plens = [20, 3, 3];&quot;</span></div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;      <span class="stringliteral">&quot;p.push(&#39;01234567890123456789&#39;);&quot;</span></div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;      <span class="stringliteral">&quot;var lead = 0xd800;&quot;</span></div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;      <span class="stringliteral">&quot;var trail = 0xdc00;&quot;</span></div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;      <span class="stringliteral">&quot;p.push(String.fromCharCode(0xd800));&quot;</span></div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;      <span class="stringliteral">&quot;p.push(String.fromCharCode(0xdc00));&quot;</span></div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;      <span class="stringliteral">&quot;var a = [];&quot;</span></div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;      <span class="stringliteral">&quot;var b = [];&quot;</span></div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;      <span class="stringliteral">&quot;var c = [];&quot;</span></div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;      <span class="stringliteral">&quot;var alens = [];&quot;</span></div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 3; i++) {&quot;</span></div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;      <span class="stringliteral">&quot;  p[1] = String.fromCharCode(lead++);&quot;</span></div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;      <span class="stringliteral">&quot;  for (var j = 0; j &lt; 3; j++) {&quot;</span></div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;      <span class="stringliteral">&quot;    p[2] = String.fromCharCode(trail++);&quot;</span></div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;      <span class="stringliteral">&quot;    a.push(p[i] + p[j]);&quot;</span></div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;      <span class="stringliteral">&quot;    b.push(p[i] + p[j]);&quot;</span></div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;      <span class="stringliteral">&quot;    c.push(p[i] + p[j]);&quot;</span></div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;      <span class="stringliteral">&quot;    alens.push(plens[i] + plens[j]);&quot;</span></div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;      <span class="stringliteral">&quot;alens[5] -= 2;&quot;</span>  <span class="comment">// Here the surrogate pairs match up.</span></div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;      <span class="stringliteral">&quot;var a2 = [];&quot;</span></div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;      <span class="stringliteral">&quot;var b2 = [];&quot;</span></div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;      <span class="stringliteral">&quot;var c2 = [];&quot;</span></div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;      <span class="stringliteral">&quot;var a2lens = [];&quot;</span></div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;      <span class="stringliteral">&quot;for (var m = 0; m &lt; 9; m++) {&quot;</span></div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;      <span class="stringliteral">&quot;  for (var n = 0; n &lt; 9; n++) {&quot;</span></div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;      <span class="stringliteral">&quot;    a2.push(a[m] + a[n]);&quot;</span></div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;      <span class="stringliteral">&quot;    b2.push(b[m] + b[n]);&quot;</span></div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;      <span class="stringliteral">&quot;    var newc = &#39;x&#39; + c[m] + c[n] + &#39;y&#39;;&quot;</span></div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;      <span class="stringliteral">&quot;    c2.push(newc.substring(1, newc.length - 1));&quot;</span></div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;      <span class="stringliteral">&quot;    var utf = alens[m] + alens[n];&quot;</span>  <span class="comment">// And here.</span></div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;           <span class="comment">// The &#39;n&#39;s that start with 0xdc.. are 6-8</span></div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;           <span class="comment">// The &#39;m&#39;s that end with 0xd8.. are 1, 4 and 7</span></div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;      <span class="stringliteral">&quot;    if ((m % 3) == 1 &amp;&amp; n &gt;= 6) utf -= 2;&quot;</span></div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;      <span class="stringliteral">&quot;    a2lens.push(utf);&quot;</span></div>
<div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;  Utf16Helper(context, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;alens&quot;</span>, 9);</div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;  Utf16Helper(context, <span class="stringliteral">&quot;a2&quot;</span>, <span class="stringliteral">&quot;a2lens&quot;</span>, 81);</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;  WriteUtf8Helper(context, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;alens&quot;</span>, 9);</div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;  WriteUtf8Helper(context, <span class="stringliteral">&quot;b2&quot;</span>, <span class="stringliteral">&quot;a2lens&quot;</span>, 81);</div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;  WriteUtf8Helper(context, <span class="stringliteral">&quot;c2&quot;</span>, <span class="stringliteral">&quot;a2lens&quot;</span>, 81);</div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;}</div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;</div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;</div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> SameSymbol(Handle&lt;String&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00b253ab5971676c7634e1eba361c47a">s1</a>, Handle&lt;String&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a1eb1a8d3d782d6567661dc32158c735c">s2</a>) {</div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> is1(v8::Utils::OpenHandle(*s1));</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> is2(v8::Utils::OpenHandle(*s2));</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;  <span class="keywordflow">return</span> *is1 == *is2;</div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;}</div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SameSymbolHelper(<span class="keyword">const</span> <span class="keywordtype">char</span>* a, <span class="keyword">const</span> <span class="keywordtype">char</span>* b) {</div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;  Handle&lt;String&gt; symbol1 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(a);</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;  Handle&lt;String&gt; symbol2 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(b);</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(SameSymbol(symbol1, symbol2));</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;}</div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;</div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;</div>
<div class="line"><a name="l06132"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4f28a5142609b8898241887424c292c3"> 6132</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Utf16Symbol) {</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;</div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;  Handle&lt;String&gt; symbol1 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(<span class="stringliteral">&quot;abc&quot;</span>);</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;  Handle&lt;String&gt; symbol2 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(<span class="stringliteral">&quot;abc&quot;</span>);</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(SameSymbol(symbol1, symbol2));</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;  SameSymbolHelper(<span class="stringliteral">&quot;\360\220\220\205&quot;</span>,  <span class="comment">// 4 byte encoding.</span></div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;                   <span class="stringliteral">&quot;\355\240\201\355\260\205&quot;</span>);  <span class="comment">// 2 3-byte surrogates.</span></div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;  SameSymbolHelper(<span class="stringliteral">&quot;\355\240\201\355\260\206&quot;</span>,  <span class="comment">// 2 3-byte surrogates.</span></div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;                   <span class="stringliteral">&quot;\360\220\220\206&quot;</span>);  <span class="comment">// 4 byte encoding.</span></div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;  SameSymbolHelper(<span class="stringliteral">&quot;x\360\220\220\205&quot;</span>,  <span class="comment">// 4 byte encoding.</span></div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;                   <span class="stringliteral">&quot;x\355\240\201\355\260\205&quot;</span>);  <span class="comment">// 2 3-byte surrogates.</span></div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;  SameSymbolHelper(<span class="stringliteral">&quot;x\355\240\201\355\260\206&quot;</span>,  <span class="comment">// 2 3-byte surrogates.</span></div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;                   <span class="stringliteral">&quot;x\360\220\220\206&quot;</span>);  <span class="comment">// 4 byte encoding.</span></div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;  CompileRun(</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;      <span class="stringliteral">&quot;var sym0 = &#39;benedictus&#39;;&quot;</span></div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;      <span class="stringliteral">&quot;var sym0b = &#39;S\303\270ren&#39;;&quot;</span></div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;      <span class="stringliteral">&quot;var sym1 = &#39;\355\240\201\355\260\207&#39;;&quot;</span></div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;      <span class="stringliteral">&quot;var sym2 = &#39;\360\220\220\210&#39;;&quot;</span></div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;      <span class="stringliteral">&quot;var sym3 = &#39;x\355\240\201\355\260\207&#39;;&quot;</span></div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;      <span class="stringliteral">&quot;var sym4 = &#39;x\360\220\220\210&#39;;&quot;</span></div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;      <span class="stringliteral">&quot;if (sym1.length != 2) throw sym1;&quot;</span></div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;      <span class="stringliteral">&quot;if (sym1.charCodeAt(1) != 0xdc07) throw sym1.charCodeAt(1);&quot;</span></div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;      <span class="stringliteral">&quot;if (sym2.length != 2) throw sym2;&quot;</span></div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;      <span class="stringliteral">&quot;if (sym2.charCodeAt(1) != 0xdc08) throw sym2.charCodeAt(2);&quot;</span></div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;      <span class="stringliteral">&quot;if (sym3.length != 3) throw sym3;&quot;</span></div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;      <span class="stringliteral">&quot;if (sym3.charCodeAt(2) != 0xdc07) throw sym1.charCodeAt(2);&quot;</span></div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;      <span class="stringliteral">&quot;if (sym4.length != 3) throw sym4;&quot;</span></div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;      <span class="stringliteral">&quot;if (sym4.charCodeAt(2) != 0xdc08) throw sym2.charCodeAt(2);&quot;</span>);</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;  Handle&lt;String&gt; sym0 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(<span class="stringliteral">&quot;benedictus&quot;</span>);</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;  Handle&lt;String&gt; sym0b = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(<span class="stringliteral">&quot;S\303\270ren&quot;</span>);</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;  Handle&lt;String&gt; sym1 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(<span class="stringliteral">&quot;\355\240\201\355\260\207&quot;</span>);</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;  Handle&lt;String&gt; sym2 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(<span class="stringliteral">&quot;\360\220\220\210&quot;</span>);</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;  Handle&lt;String&gt; sym3 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(<span class="stringliteral">&quot;x\355\240\201\355\260\207&quot;</span>);</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;  Handle&lt;String&gt; sym4 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a>(<span class="stringliteral">&quot;x\360\220\220\210&quot;</span>);</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> global = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#abb28d8fe89a3e73aad95fafcf37f8e04">s0</a> = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;sym0&quot;</span>));</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;  Local&lt;Value&gt; s0b = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;sym0b&quot;</span>));</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;  Local&lt;Value&gt; s1 = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;sym1&quot;</span>));</div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;  Local&lt;Value&gt; s2 = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;sym2&quot;</span>));</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a06bfec7de016bb7b546e0f2bc7db042d">s3</a> = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;sym3&quot;</span>));</div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ad3a822557e029dc57828165341a40da8">s4</a> = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;sym4&quot;</span>));</div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(SameSymbol(sym0, Handle&lt;String&gt;(String::Cast(*s0))));</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(SameSymbol(sym0b, Handle&lt;String&gt;(String::Cast(*s0b))));</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(SameSymbol(sym1, Handle&lt;String&gt;(String::Cast(*s1))));</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(SameSymbol(sym2, Handle&lt;String&gt;(String::Cast(*s2))));</div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(SameSymbol(sym3, Handle&lt;String&gt;(String::Cast(*s3))));</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(SameSymbol(sym4, Handle&lt;String&gt;(String::Cast(*s4))));</div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;}</div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;</div>
<div class="line"><a name="l06185"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a42eff5f1c711709e4a478e35b8adc79a"> 6185</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ToArrayIndex) {</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> str = v8_str(<span class="stringliteral">&quot;42&quot;</span>);</div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Uint32&gt;</a> index = str-&gt;<a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html#af6ef63d83b1a20df1158803c7a3b7c4c">ToArrayIndex</a>();</div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!index.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42.0, index-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3edf775c6a025374ad865189a5586718">Uint32Value</a>());</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;  str = v8_str(<span class="stringliteral">&quot;42asdf&quot;</span>);</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;  index = str-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8d6d1a96172d3198857342e6f3ee807e">ToArrayIndex</a>();</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(index.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;  str = v8_str(<span class="stringliteral">&quot;-42&quot;</span>);</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;  index = str-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8d6d1a96172d3198857342e6f3ee807e">ToArrayIndex</a>();</div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(index.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;  str = v8_str(<span class="stringliteral">&quot;4294967295&quot;</span>);</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;  index = str-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8d6d1a96172d3198857342e6f3ee807e">ToArrayIndex</a>();</div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!index.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4294967295.0, index-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3edf775c6a025374ad865189a5586718">Uint32Value</a>());</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Number&gt;</a> num = <a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(1);</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;  index = num-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8d6d1a96172d3198857342e6f3ee807e">ToArrayIndex</a>();</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!index.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1.0, index-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3edf775c6a025374ad865189a5586718">Uint32Value</a>());</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;  num = <a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(-1);</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;  index = num-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8d6d1a96172d3198857342e6f3ee807e">ToArrayIndex</a>();</div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(index.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;  index = obj-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8d6d1a96172d3198857342e6f3ee807e">ToArrayIndex</a>();</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(index.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;}</div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;</div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;</div>
<div class="line"><a name="l06216"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5ddd1a1662314a86e639b670b44b778a"> 6216</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ErrorConstruction) {</div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> message = v8_str(<span class="stringliteral">&quot;message&quot;</span>);</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> range_error = <a class="code" href="../../da/d6a/classv8_1_1_exception.html#ab69d3dd2c7b10df614866c1dbfdd82ae">v8::Exception::RangeError</a>(foo);</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(range_error-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a165136d736a2edcccac553aca4a5806e">IsObject</a>());</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(range_error.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(message)-&gt;Equals(foo));</div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> reference_error = <a class="code" href="../../da/d6a/classv8_1_1_exception.html#ad9caf2c7996a032e755b8ca74939314a">v8::Exception::ReferenceError</a>(foo);</div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(reference_error-&gt;IsObject());</div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(reference_error.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(message)-&gt;Equals(foo));</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> syntax_error = <a class="code" href="../../da/d6a/classv8_1_1_exception.html#a491e77f6e498b321c12e711ea5f167cc">v8::Exception::SyntaxError</a>(foo);</div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(syntax_error-&gt;IsObject());</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(syntax_error.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(message)-&gt;Equals(foo));</div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> type_error = <a class="code" href="../../da/d6a/classv8_1_1_exception.html#ad528b70e6cf3ef58f5f308d26f9e9018">v8::Exception::TypeError</a>(foo);</div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(type_error-&gt;IsObject());</div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(type_error.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(message)-&gt;Equals(foo));</div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> error = <a class="code" href="../../da/d6a/classv8_1_1_exception.html#a44f54ef2da1a05eae6014be7874d1104">v8::Exception::Error</a>(foo);</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(error-&gt;IsObject());</div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(error.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(message)-&gt;Equals(foo));</div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;}</div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;</div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;</div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> YGetter(Local&lt;String&gt; name, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;  <span class="keywordflow">return</span> v8_num(10);</div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;}</div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;</div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;</div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> YSetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;                    Local&lt;Value&gt; value,</div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;                    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;  <span class="keywordflow">if</span> (info.This()-&gt;Has(name)) {</div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;    info.This()-&gt;Delete(name);</div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;  }</div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;  info.This()-&gt;Set(name, value);</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;}</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;</div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;</div>
<div class="line"><a name="l06256"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abefa205779096180e55fc0f216d1cc6b"> 6256</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DeleteAccessor) {</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj = ObjectTemplate::New();</div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), YGetter, YSetter);</div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> holder = obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;holder&quot;</span>), holder);</div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = CompileRun(</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;      <span class="stringliteral">&quot;holder.y = 11; holder.y = 12; holder.y&quot;</span>);</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(12, result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3edf775c6a025374ad865189a5586718">Uint32Value</a>());</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;}</div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;</div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;</div>
<div class="line"><a name="l06269"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1b21bc1fdd09ad81d572b33c2e238fa2"> 6269</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TypeSwitch) {</div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> templ1 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> templ2 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> templ3 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> templs[3] = { templ1, templ2, templ3 };</div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::TypeSwitch&gt;</a> type_switch = <a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#a5a633d89c4e251dd0b361fbd7b0bdfe1">v8::TypeSwitch::New</a>(3, templs);</div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj0 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj1 = templ1-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance();</div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj2 = templ2-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance();</div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj3 = templ3-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance();</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, type_switch-&gt;<a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">match</a>(obj0));</div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, type_switch-&gt;<a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">match</a>(obj1));</div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, type_switch-&gt;<a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">match</a>(obj2));</div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, type_switch-&gt;<a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">match</a>(obj3));</div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, type_switch-&gt;<a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">match</a>(obj3));</div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, type_switch-&gt;<a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">match</a>(obj2));</div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, type_switch-&gt;<a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">match</a>(obj1));</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, type_switch-&gt;<a class="code" href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">match</a>(obj0));</div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;  }</div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;}</div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;</div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;</div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;<span class="comment">// For use within the TestSecurityHandler() test.</span></div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> g_security_callback_result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> NamedSecurityTestCallback(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;                                      Local&lt;Value&gt; name,</div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;                                      <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;                                      Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;  <span class="comment">// Always allow read access.</span></div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;  <span class="keywordflow">if</span> (type == <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>)</div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;</div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;  <span class="comment">// Sometimes allow other access.</span></div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;  <span class="keywordflow">return</span> g_security_callback_result;</div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;}</div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;</div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> IndexedSecurityTestCallback(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;                                        uint32_t key,</div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;                                        <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;                                        Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;  <span class="comment">// Always allow read access.</span></div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;  <span class="keywordflow">if</span> (type == <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>)</div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;</div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;  <span class="comment">// Sometimes allow other access.</span></div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;  <span class="keywordflow">return</span> g_security_callback_result;</div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;}</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;</div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> trouble_nesting = 0;</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> TroubleCallback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;  trouble_nesting++;</div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;  <span class="comment">// Call a JS function that throws an uncaught exception.</span></div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;  Local&lt;v8::Object&gt; arg_this = Context::GetCurrent()-&gt;Global();</div>
<div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;  Local&lt;Value&gt; trouble_callee = (trouble_nesting == 3) ?</div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;    arg_this-&gt;Get(v8_str(<span class="stringliteral">&quot;trouble_callee&quot;</span>)) :</div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;    arg_this-&gt;Get(v8_str(<span class="stringliteral">&quot;trouble_caller&quot;</span>));</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(trouble_callee-&gt;IsFunction());</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;  <span class="keywordflow">return</span> Function::Cast(*trouble_callee)-&gt;Call(arg_this, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;}</div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;</div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> report_count = 0;</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ApiUncaughtExceptionTestListener(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a>,</div>
<div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;                                             <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>) {</div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;  report_count++;</div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;}</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;</div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;</div>
<div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;<span class="comment">// Counts uncaught exceptions, but other tests running in parallel</span></div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;<span class="comment">// also have uncaught exceptions.</span></div>
<div class="line"><a name="l06346"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2e7578998e354171089ebdadcb53ce59"> 6346</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ApiUncaughtException) {</div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;  report_count = 0;</div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(ApiUncaughtExceptionTestListener);</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;</div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(TroubleCallback);</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> global = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;trouble&quot;</span>), fun-&gt;GetFunction());</div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;</div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;function trouble_callee() {&quot;</span></div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;                         <span class="stringliteral">&quot;  var x = null;&quot;</span></div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;                         <span class="stringliteral">&quot;  return x.foo;&quot;</span></div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;                         <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;                         <span class="stringliteral">&quot;function trouble_caller() {&quot;</span></div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;                         <span class="stringliteral">&quot;  trouble();&quot;</span></div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;                         <span class="stringliteral">&quot;};&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;  Local&lt;Value&gt; trouble = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;trouble&quot;</span>));</div>
<div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(trouble-&gt;IsFunction());</div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;  Local&lt;Value&gt; trouble_callee = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;trouble_callee&quot;</span>));</div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(trouble_callee-&gt;IsFunction());</div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;  Local&lt;Value&gt; trouble_caller = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;trouble_caller&quot;</span>));</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(trouble_caller-&gt;IsFunction());</div>
<div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;  Function::Cast(*trouble_caller)-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, report_count);</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(ApiUncaughtExceptionTestListener);</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;}</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;</div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* script_resource_name = <span class="stringliteral">&quot;ExceptionInNativeScript.js&quot;</span>;</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExceptionInNativeScriptTestListener(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;                                                <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>) {</div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> name_val = message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a882197bfb98ad033a941d40e5445fe61">GetScriptResourceName</a>();</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!name_val.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>() &amp;&amp; name_val-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#abfee0d12e50e0499ce0e3eac2612b3a2">IsString</a>());</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;  <a class="code" href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a> name(message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a882197bfb98ad033a941d40e5445fe61">GetScriptResourceName</a>());</div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(script_resource_name, *name);</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a66c1993510fe48d9661aadbbe820ae42">GetLineNumber</a>());</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;  <a class="code" href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a> source_line(message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#af241afa81627d00a2f751f03fabbe505">GetSourceLine</a>());</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;  new o.foo();&quot;</span>, *source_line);</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;}</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;</div>
<div class="line"><a name="l06386"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae1b131fa0e85dfb59962f002b19504d3"> 6386</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ExceptionInNativeScript) {</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(ExceptionInNativeScriptTestListener);</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;</div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(TroubleCallback);</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> global = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;trouble&quot;</span>), fun-&gt;GetFunction());</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;function trouble() {\n&quot;</span></div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;                         <span class="stringliteral">&quot;  var o = {};\n&quot;</span></div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;                         <span class="stringliteral">&quot;  new o.foo();\n&quot;</span></div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;                         <span class="stringliteral">&quot;};&quot;</span>), <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(script_resource_name))-&gt;Run();</div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;  Local&lt;Value&gt; trouble = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;trouble&quot;</span>));</div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(trouble-&gt;IsFunction());</div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;  Function::Cast(*trouble)-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(ExceptionInNativeScriptTestListener);</div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;}</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;</div>
<div class="line"><a name="l06406"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a84c8ae87c5a8b2aa3fef8821452082b8"> 6406</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CompilationErrorUsingTryCatchHandler) {</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;This doesn&#39;t &amp;*&amp;@#$&amp;*^ compile.&quot;</span>));</div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, *try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;}</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;</div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;</div>
<div class="line"><a name="l06416"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af7e1ae5577340b81c354b3372198d208"> 6416</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(TryCatchFinallyUsingTryCatchHandler) {</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;try { throw &#39;&#39;; } catch (e) {}&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;try { throw &#39;&#39;; } finally {}&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;  try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;                         <span class="stringliteral">&quot;try { throw &#39;&#39;; } finally { return; }&quot;</span></div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;                         <span class="stringliteral">&quot;})()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;(function()&quot;</span></div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;                         <span class="stringliteral">&quot;  { try { throw &#39;&#39;; } finally { throw 0; }&quot;</span></div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;                         <span class="stringliteral">&quot;})()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;}</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;</div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;<span class="comment">// SecurityHandler can&#39;t be run twice</span></div>
<div class="line"><a name="l06437"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a01e0115739950bf72f7280a00b5b0544"> 6437</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(SecurityHandler) {</div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope0;</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedSecurityTestCallback,</div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;                                           IndexedSecurityTestCallback);</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;  <span class="comment">// Create an environment</span></div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 =</div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;    Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global0 = context0-&gt;Global();</div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Script&gt;</a> script0 = v8_compile(<span class="stringliteral">&quot;foo = 111&quot;</span>);</div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;  script0-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;  global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>), v8_num(999));</div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> foo0 = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(111, foo0-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> z0 = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(999, z0-&gt;Int32Value());</div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;  <span class="comment">// Create another environment, should fail security checks.</span></div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope1;</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;</div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 =</div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;    Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;</div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;othercontext&quot;</span>), global0);</div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;  <span class="comment">// This set will fail the security check.</span></div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Script&gt;</a> script1 =</div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;    v8_compile(<span class="stringliteral">&quot;othercontext.foo = 222; othercontext[0] = 888;&quot;</span>);</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;  script1-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;  <span class="comment">// This read will pass the security check.</span></div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> foo1 = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(111, foo1-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;  <span class="comment">// This read will pass the security check.</span></div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> z1 = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(999, z1-&gt;Int32Value());</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;</div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;  <span class="comment">// Create another environment, should pass security checks.</span></div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;  { g_security_callback_result = <span class="keyword">true</span>;  <span class="comment">// allow security handler to pass.</span></div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope2;</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context2;</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global2 = context2-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;    global2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;othercontext&quot;</span>), global0);</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Script&gt;</a> script2 =</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;        v8_compile(<span class="stringliteral">&quot;othercontext.foo = 333; othercontext[0] = 888;&quot;</span>);</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;    script2-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> foo2 = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(333, foo2-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> z2 = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(888, z2-&gt;Int32Value());</div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;  }</div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;</div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;}</div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;</div>
<div class="line"><a name="l06499"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7b45047026e51016787ca0496714c626"> 6499</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SecurityChecks) {</div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env1;</div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env2 = Context::New();</div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;</div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a2df8914184cddeed49ac0b633472d973">bar</a> = v8_str(<span class="stringliteral">&quot;bar&quot;</span>);</div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;</div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;  <span class="comment">// Set to the same domain.</span></div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(foo);</div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;</div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;  <span class="comment">// Create a function in env1.</span></div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;spy=function(){return spy;}&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;  Local&lt;Value&gt; spy = env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;spy&quot;</span>));</div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(spy-&gt;IsFunction());</div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;  <span class="comment">// Create another function accessing global objects.</span></div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;spy2=function(){return new this.Array();}&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;  Local&lt;Value&gt; spy2 = env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;spy2&quot;</span>));</div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(spy2-&gt;IsFunction());</div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;  <span class="comment">// Switch to env2 in the same domain and invoke spy on env2.</span></div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;  {</div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;    env2-&gt;SetSecurityToken(foo);</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;    <span class="comment">// Enter env2</span></div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;    Context::Scope scope_env2(env2);</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;    Local&lt;Value&gt; result = Function::Cast(*spy)-&gt;Call(env2-&gt;Global(), 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsFunction());</div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;  }</div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;</div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;  {</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;    env2-&gt;SetSecurityToken(bar);</div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;    Context::Scope scope_env2(env2);</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;</div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;    <span class="comment">// Call cross_domain_call, it should throw an exception</span></div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;    Function::Cast(*spy2)-&gt;Call(env2-&gt;Global(), 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;  }</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;  env2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;}</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;<span class="comment">// Regression test case for issue 1183439.</span></div>
<div class="line"><a name="l06544"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a289aef7b09117a58e3659c54007db7d9"> 6544</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SecurityChecksForPrototypeChain) {</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> current;</div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> other = Context::New();</div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;  <span class="comment">// Change context to be able to get to the Object function in the</span></div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;  <span class="comment">// other context without hitting the security checks.</span></div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;Value&gt;</a> other_object;</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;  { Context::Scope scope(other);</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;    other_object = other-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;Object&quot;</span>));</div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;    other-&gt;Global()-&gt;Set(v8_num(42), v8_num(87));</div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;  }</div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;</div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;  current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;other&quot;</span>), other-&gt;Global());</div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_compile(<span class="stringliteral">&quot;other&quot;</span>)-&gt;Run()-&gt;Equals(other-&gt;Global()));</div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;</div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;  <span class="comment">// Make sure the security check fails here and we get an undefined</span></div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;  <span class="comment">// result instead of getting the Object function. Repeat in a loop</span></div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;  <span class="comment">// to make sure to exercise the IC code.</span></div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;Script&gt;</a> access_other0 = v8_compile(<span class="stringliteral">&quot;other.Object&quot;</span>);</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;Script&gt;</a> access_other1 = v8_compile(<span class="stringliteral">&quot;other[42]&quot;</span>);</div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 5; i++) {</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!access_other0-&gt;Run()-&gt;Equals(other_object));</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(access_other0-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!access_other1-&gt;Run()-&gt;Equals(v8_num(87)));</div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(access_other1-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;  }</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;  <span class="comment">// Create an object that has &#39;other&#39; in its prototype chain and make</span></div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;  <span class="comment">// sure we cannot access the Object function indirectly through</span></div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;  <span class="comment">// that. Repeat in a loop to make sure to exercise the IC code.</span></div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;  v8_compile(<span class="stringliteral">&quot;function F() { };&quot;</span></div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;             <span class="stringliteral">&quot;F.prototype = other;&quot;</span></div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;             <span class="stringliteral">&quot;var f = new F();&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;Script&gt;</a> access_f0 = v8_compile(<span class="stringliteral">&quot;f.Object&quot;</span>);</div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;Script&gt;</a> access_f1 = v8_compile(<span class="stringliteral">&quot;f[42]&quot;</span>);</div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 5; j++) {</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!access_f0-&gt;Run()-&gt;Equals(other_object));</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(access_f0-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!access_f1-&gt;Run()-&gt;Equals(v8_num(87)));</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(access_f1-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;  }</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;</div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;  <span class="comment">// Now it gets hairy: Set the prototype for the other global object</span></div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;  <span class="comment">// to be the current global object. The prototype chain for &#39;f&#39; now</span></div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;  <span class="comment">// goes through &#39;other&#39; but ends up in the current global object.</span></div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;  { Context::Scope scope(other);</div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;    other-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>());</div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;  }</div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;  <span class="comment">// Set a named and an index property on the current global</span></div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;  <span class="comment">// object. To force the lookup to go through the other global object,</span></div>
<div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;  <span class="comment">// the properties must not exist in the other global object.</span></div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;  current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;foo&quot;</span>), v8_num(100));</div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;  current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_num(99), v8_num(101));</div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;  <span class="comment">// Try to read the properties from f and make sure that the access</span></div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;  <span class="comment">// gets stopped by the security checks on the other global object.</span></div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;  Local&lt;Script&gt; access_f2 = v8_compile(<span class="stringliteral">&quot;f.foo&quot;</span>);</div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;  Local&lt;Script&gt; access_f3 = v8_compile(<span class="stringliteral">&quot;f[99]&quot;</span>);</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 5; k++) {</div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!access_f2-&gt;Run()-&gt;Equals(v8_num(100)));</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(access_f2-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!access_f3-&gt;Run()-&gt;Equals(v8_num(101)));</div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(access_f3-&gt;Run()-&gt;IsUndefined());</div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;  }</div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;  other.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;}</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;</div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;</div>
<div class="line"><a name="l06612"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac9336c79fcad149b2f03ea07a9b2208a"> 6612</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CrossDomainDelete) {</div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env1;</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env2 = Context::New();</div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a2df8914184cddeed49ac0b633472d973">bar</a> = v8_str(<span class="stringliteral">&quot;bar&quot;</span>);</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;</div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;  <span class="comment">// Set to the same domain.</span></div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(foo);</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;  env2-&gt;SetSecurityToken(foo);</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;</div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;prop&quot;</span>), v8_num(3));</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;  env2-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;env1&quot;</span>), env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>());</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;</div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;  <span class="comment">// Change env2 to a different domain and delete env1.prop.</span></div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;  env2-&gt;SetSecurityToken(bar);</div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;  {</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;    Context::Scope scope_env2(env2);</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;    Local&lt;Value&gt; result =</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;        Script::Compile(v8_str(<span class="stringliteral">&quot;delete env1.prop&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsFalse());</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;  }</div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;</div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;  <span class="comment">// Check that env1.prop still exists.</span></div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;  Local&lt;Value&gt; v = env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;prop&quot;</span>));</div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v-&gt;IsNumber());</div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, v-&gt;Int32Value());</div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;  env2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;}</div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;</div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;</div>
<div class="line"><a name="l06645"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6d86a7e9bf9cdf5e523571e9f2e28780"> 6645</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CrossDomainIsPropertyEnumerable) {</div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env1;</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env2 = Context::New();</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;</div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a2df8914184cddeed49ac0b633472d973">bar</a> = v8_str(<span class="stringliteral">&quot;bar&quot;</span>);</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;</div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;  <span class="comment">// Set to the same domain.</span></div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(foo);</div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;  env2-&gt;SetSecurityToken(foo);</div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;</div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;prop&quot;</span>), v8_num(3));</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;  env2-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;env1&quot;</span>), env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>());</div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;  <span class="comment">// env1.prop is enumerable in env2.</span></div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;  Local&lt;String&gt; test = v8_str(<span class="stringliteral">&quot;propertyIsEnumerable.call(env1, &#39;prop&#39;)&quot;</span>);</div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;  {</div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;    Context::Scope scope_env2(env2);</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;    Local&lt;Value&gt; result = Script::Compile(test)-&gt;Run();</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsTrue());</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;  }</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;  <span class="comment">// Change env2 to a different domain and test again.</span></div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;  env2-&gt;SetSecurityToken(bar);</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;  {</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;    Context::Scope scope_env2(env2);</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;    Local&lt;Value&gt; result = Script::Compile(test)-&gt;Run();</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsFalse());</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;  }</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;  env2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;}</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;</div>
<div class="line"><a name="l06680"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5fc5107330da508b1ff26f7706466860"> 6680</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CrossDomainForIn) {</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env1;</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env2 = Context::New();</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;</div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a2df8914184cddeed49ac0b633472d973">bar</a> = v8_str(<span class="stringliteral">&quot;bar&quot;</span>);</div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;  <span class="comment">// Set to the same domain.</span></div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(foo);</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;  env2-&gt;SetSecurityToken(foo);</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;prop&quot;</span>), v8_num(3));</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;  env2-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;env1&quot;</span>), env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>());</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;  <span class="comment">// Change env2 to a different domain and set env1&#39;s global object</span></div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;  <span class="comment">// as the __proto__ of an object in env2 and enumerate properties</span></div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;  <span class="comment">// in for-in. It shouldn&#39;t enumerate properties on env1&#39;s global</span></div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;  env2-&gt;SetSecurityToken(bar);</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;  {</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;    Context::Scope scope_env2(env2);</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;    Local&lt;Value&gt; result =</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;        CompileRun(<span class="stringliteral">&quot;(function(){var obj = {&#39;__proto__&#39;:env1};&quot;</span></div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;                   <span class="stringliteral">&quot;for (var p in obj)&quot;</span></div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;                   <span class="stringliteral">&quot;   if (p == &#39;prop&#39;) return false;&quot;</span></div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;                   <span class="stringliteral">&quot;return true;})()&quot;</span>);</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsTrue());</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;  }</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;  env2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;}</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;</div>
<div class="line"><a name="l06713"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abcebcd07669be1ca78197cdc12dec24c"> 6713</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ContextDetachGlobal) {</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env1;</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env2 = Context::New();</div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;</div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;  Local&lt;v8::Object&gt; global1 = env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;</div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;  <span class="comment">// Set to the same domain.</span></div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(foo);</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;  env2-&gt;SetSecurityToken(foo);</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;</div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;  <span class="comment">// Enter env2</span></div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;  env2-&gt;Enter();</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;  <span class="comment">// Create a function in env2 and add a reference to it in env1.</span></div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;  Local&lt;v8::Object&gt; global2 = env2-&gt;Global();</div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;  global2-&gt;Set(v8_str(<span class="stringliteral">&quot;prop&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1));</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;  CompileRun(<span class="stringliteral">&quot;function getProp() {return prop;}&quot;</span>);</div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;getProp&quot;</span>),</div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;                      global2-&gt;Get(v8_str(<span class="stringliteral">&quot;getProp&quot;</span>)));</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;</div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;  <span class="comment">// Detach env2&#39;s global, and reuse the global object of env2</span></div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;  env2-&gt;Exit();</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;  env2-&gt;DetachGlobal();</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;  <span class="comment">// env2 has a new global object.</span></div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!env2-&gt;Global()-&gt;Equals(global2));</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env3 =</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;      Context::New(0, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a>(), global2);</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;  env3-&gt;SetSecurityToken(v8_str(<span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;  env3-&gt;Enter();</div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;  Local&lt;v8::Object&gt; global3 = env3-&gt;Global();</div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(global2, global3);</div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global3-&gt;Get(v8_str(<span class="stringliteral">&quot;prop&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global3-&gt;Get(v8_str(<span class="stringliteral">&quot;getProp&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;  global3-&gt;Set(v8_str(<span class="stringliteral">&quot;prop&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(-1));</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;  global3-&gt;Set(v8_str(<span class="stringliteral">&quot;prop2&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2));</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;  env3-&gt;Exit();</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;  <span class="comment">// Call getProp in env1, and it should return the value 1</span></div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;  {</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;    Local&lt;Value&gt; get_prop = global1-&gt;Get(v8_str(<span class="stringliteral">&quot;getProp&quot;</span>));</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(get_prop-&gt;IsFunction());</div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;    Local&lt;Value&gt; r = Function::Cast(*get_prop)-&gt;Call(global1, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.HasCaught());</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, r-&gt;Int32Value());</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;  }</div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;  <span class="comment">// Check that env3 is not accessible from env1</span></div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;  {</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;    Local&lt;Value&gt; r = global3-&gt;Get(v8_str(<span class="stringliteral">&quot;prop2&quot;</span>));</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(r-&gt;IsUndefined());</div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;  }</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;  env2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;  env3.Dispose();</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;}</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;</div>
<div class="line"><a name="l06777"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aebbfe807990283eb74b682f203bdd68c"> 6777</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DetachAndReattachGlobal) {</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env1;</div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;  <span class="comment">// Create second environment.</span></div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env2 = Context::New();</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;</div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;  <span class="comment">// Set same security token for env1 and env2.</span></div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(foo);</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;  env2-&gt;SetSecurityToken(foo);</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;</div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;  <span class="comment">// Create a property on the global object in env2.</span></div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;  {</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> scope(env2);</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;    env2-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;p&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;  }</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;  <span class="comment">// Create a reference to env2 global from env1 global.</span></div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;  env1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;other&quot;</span>), env2-&gt;Global());</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;</div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;  <span class="comment">// Check that we have access to other.p in env2 from env1.</span></div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;  Local&lt;Value&gt; result = CompileRun(<span class="stringliteral">&quot;other.p&quot;</span>);</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsInt32());</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, result-&gt;Int32Value());</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;  <span class="comment">// Hold on to global from env2 and detach global from env2.</span></div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;  Local&lt;v8::Object&gt; global2 = env2-&gt;Global();</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;  env2-&gt;DetachGlobal();</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;  <span class="comment">// Check that the global has been detached. No other.p property can</span></div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;  <span class="comment">// be found.</span></div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;other.p&quot;</span>);</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsUndefined());</div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;  <span class="comment">// Reuse global2 for env3.</span></div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env3 =</div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;      Context::New(0, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a>(), global2);</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(global2, env3-&gt;Global());</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;  <span class="comment">// Start by using the same security token for env3 as for env1 and env2.</span></div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;  env3-&gt;SetSecurityToken(foo);</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;  <span class="comment">// Create a property on the global object in env3.</span></div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;  {</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> scope(env3);</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;    env3-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;p&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(24));</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;  }</div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;  <span class="comment">// Check that other.p is now the property in env3 and that we have access.</span></div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;other.p&quot;</span>);</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsInt32());</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(24, result-&gt;Int32Value());</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;  <span class="comment">// Change security token for env3 to something different from env1 and env2.</span></div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;  env3-&gt;SetSecurityToken(v8_str(<span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;  <span class="comment">// Check that we do not have access to other.p in env1. |other| is now</span></div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;  <span class="comment">// the global object for env3 which has a different security token,</span></div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;  <span class="comment">// so access should be blocked.</span></div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;other.p&quot;</span>);</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsUndefined());</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;</div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;  <span class="comment">// Detach the global for env3 and reattach it to env2.</span></div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;  env3-&gt;DetachGlobal();</div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;  env2-&gt;ReattachGlobal(global2);</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;  <span class="comment">// Check that we have access to other.p again in env1.  |other| is now</span></div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;  <span class="comment">// the global object for env2 which has the same security token as env1.</span></div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;other.p&quot;</span>);</div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsInt32());</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, result-&gt;Int32Value());</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;  env2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;  env3.Dispose();</div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;}</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;</div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478a1615bd957fa979a1af6d726fdad14e46">v8::ACCESS_KEYS</a> + 1] = { <span class="keyword">false</span> };</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> NamedAccessBlocker(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;                               Local&lt;Value&gt; name,</div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;                               <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;                               Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;  <span class="keywordflow">return</span> Context::GetCurrent()-&gt;Global()-&gt;Equals(global) ||</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;      allowed_access_type[type];</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;}</div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;</div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> IndexedAccessBlocker(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;                                 uint32_t key,</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;                                 <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;                                 Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;  <span class="keywordflow">return</span> Context::GetCurrent()-&gt;Global()-&gt;Equals(global) ||</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;      allowed_access_type[type];</div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;}</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;</div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> g_echo_value = -1;</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> EchoGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;                                    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;  <span class="keywordflow">return</span> v8_num(g_echo_value);</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;}</div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> EchoSetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;                       Local&lt;Value&gt; value,</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;                       <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;  <span class="keywordflow">if</span> (value-&gt;IsNumber())</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;    g_echo_value = value-&gt;Int32Value();</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;}</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> UnreachableGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;                                           <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<span class="keyword">false</span>);  <span class="comment">// This function should not be called..</span></div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;}</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> UnreachableSetter(Local&lt;String&gt;, Local&lt;Value&gt;,</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;                              <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<span class="keyword">false</span>);  <span class="comment">// This function should nto be called.</span></div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;}</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;</div>
<div class="line"><a name="l06903"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4067954d31786b0ba03b94e95cd07694"> 6903</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9fa">AccessControl</a>) {</div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedAccessBlocker,</div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;                                           IndexedAccessBlocker);</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;  <span class="comment">// Add an accessor accessible by cross-domain JS code.</span></div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;      v8_str(<span class="stringliteral">&quot;accessible_prop&quot;</span>),</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;      EchoGetter, EchoSetter,</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(),</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9fa">v8::AccessControl</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa51a8c9fb5d86daa1e245d087c2331037">v8::ALL_CAN_READ</a> | <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa8184abbb8ba084f35692bbf8bc5657f0">v8::ALL_CAN_WRITE</a>));</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;</div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;  <span class="comment">// Add an accessor that is not accessible by cross-domain JS code.</span></div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;blocked_prop&quot;</span>),</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;                               UnreachableGetter, UnreachableSetter,</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;                               <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(),</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;                               <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>);</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;  <span class="comment">// Create an environment</span></div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global0 = context0-&gt;Global();</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;  <span class="comment">// Define a property with JS getter and setter.</span></div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;  CompileRun(</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;      <span class="stringliteral">&quot;function getter() { return &#39;getter&#39;; };\n&quot;</span></div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;      <span class="stringliteral">&quot;function setter() { return &#39;setter&#39;; }\n&quot;</span></div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;      <span class="stringliteral">&quot;Object.defineProperty(this, &#39;js_accessor_p&#39;, {get:getter, set:setter})&quot;</span>);</div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;</div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;  Local&lt;Value&gt; getter = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;getter&quot;</span>));</div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;  Local&lt;Value&gt; setter = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;setter&quot;</span>));</div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;</div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;  <span class="comment">// And define normal element.</span></div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;  global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(239, v8_str(<span class="stringliteral">&quot;239&quot;</span>));</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;</div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;  <span class="comment">// Define an element with JS getter and setter.</span></div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;  CompileRun(</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;      <span class="stringliteral">&quot;function el_getter() { return &#39;el_getter&#39;; };\n&quot;</span></div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;      <span class="stringliteral">&quot;function el_setter() { return &#39;el_setter&#39;; };\n&quot;</span></div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;      <span class="stringliteral">&quot;Object.defineProperty(this, &#39;42&#39;, {get: el_getter, set: el_setter});&quot;</span>);</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;  Local&lt;Value&gt; el_getter = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;el_getter&quot;</span>));</div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;  Local&lt;Value&gt; el_setter = global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;el_setter&quot;</span>));</div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope1;</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;other&quot;</span>), global0);</div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;  <span class="comment">// Access blocked property.</span></div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;  CompileRun(<span class="stringliteral">&quot;other.blocked_prop = 1&quot;</span>);</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other.blocked_prop&quot;</span>);</div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;blocked_prop&#39;)&quot;</span>);</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;  ExpectFalse(<span class="stringliteral">&quot;propertyIsEnumerable.call(other, &#39;blocked_prop&#39;)&quot;</span>);</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;  <span class="comment">// Enable ACCESS_HAS</span></div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other.blocked_prop&quot;</span>);</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;  <span class="comment">// ... and now we can get the descriptor...</span></div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;blocked_prop&#39;).value&quot;</span>);</div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;  <span class="comment">// ... and enumerate the property.</span></div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;propertyIsEnumerable.call(other, &#39;blocked_prop&#39;)&quot;</span>);</div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;  <span class="comment">// Access blocked element.</span></div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;  CompileRun(<span class="stringliteral">&quot;other[239] = 1&quot;</span>);</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;</div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other[239]&quot;</span>);</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;239&#39;)&quot;</span>);</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;  ExpectFalse(<span class="stringliteral">&quot;propertyIsEnumerable.call(other, &#39;239&#39;)&quot;</span>);</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;  <span class="comment">// Enable ACCESS_HAS</span></div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other[239]&quot;</span>);</div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;  <span class="comment">// ... and now we can get the descriptor...</span></div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;239&#39;).value&quot;</span>);</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;  <span class="comment">// ... and enumerate the property.</span></div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;propertyIsEnumerable.call(other, &#39;239&#39;)&quot;</span>);</div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;  <span class="comment">// Access a property with JS accessor.</span></div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;  CompileRun(<span class="stringliteral">&quot;other.js_accessor_p = 2&quot;</span>);</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;</div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other.js_accessor_p&quot;</span>);</div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;)&quot;</span>);</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;  <span class="comment">// Enable ACCESS_HAS.</span></div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other.js_accessor_p&quot;</span>);</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).get&quot;</span>);</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).set&quot;</span>);</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;</div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;  <span class="comment">// Enable both ACCESS_HAS and ACCESS_GET.</span></div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;  ExpectString(<span class="stringliteral">&quot;other.js_accessor_p&quot;</span>, <span class="stringliteral">&quot;getter&quot;</span>);</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;  ExpectObject(</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).get&quot;</span>, getter);</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).set&quot;</span>);</div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;</div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;  <span class="comment">// Enable both ACCESS_HAS and ACCESS_SET.</span></div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other.js_accessor_p&quot;</span>);</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).get&quot;</span>);</div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;  ExpectObject(</div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).set&quot;</span>, setter);</div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;</div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;  <span class="comment">// Enable both ACCESS_HAS, ACCESS_GET and ACCESS_SET.</span></div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;</div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;  ExpectString(<span class="stringliteral">&quot;other.js_accessor_p&quot;</span>, <span class="stringliteral">&quot;getter&quot;</span>);</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;  ExpectObject(</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).get&quot;</span>, getter);</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;  ExpectObject(</div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).set&quot;</span>, setter);</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;js_accessor_p&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;</div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;  <span class="comment">// Access an element with JS accessor.</span></div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;  CompileRun(<span class="stringliteral">&quot;other[42] = 2&quot;</span>);</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;</div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other[42]&quot;</span>);</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;)&quot;</span>);</div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;  <span class="comment">// Enable ACCESS_HAS.</span></div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other[42]&quot;</span>);</div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).get&quot;</span>);</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).set&quot;</span>);</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;  <span class="comment">// Enable both ACCESS_HAS and ACCESS_GET.</span></div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;</div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;  ExpectString(<span class="stringliteral">&quot;other[42]&quot;</span>, <span class="stringliteral">&quot;el_getter&quot;</span>);</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;  ExpectObject(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).get&quot;</span>, el_getter);</div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).set&quot;</span>);</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;</div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;  <span class="comment">// Enable both ACCESS_HAS and ACCESS_SET.</span></div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;</div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other[42]&quot;</span>);</div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).get&quot;</span>);</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;  ExpectObject(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).set&quot;</span>, el_setter);</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;</div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;  <span class="comment">// Enable both ACCESS_HAS, ACCESS_GET and ACCESS_SET.</span></div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;  ExpectString(<span class="stringliteral">&quot;other[42]&quot;</span>, <span class="stringliteral">&quot;el_getter&quot;</span>);</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;  ExpectObject(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).get&quot;</span>, el_getter);</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;  ExpectObject(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).set&quot;</span>, el_setter);</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;42&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;</div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;  allowed_access_type[<a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value;</div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;  <span class="comment">// Access accessible property</span></div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;other.accessible_prop = 3&quot;</span>);</div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, g_echo_value);</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;other.accessible_prop&quot;</span>);</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;  value = CompileRun(</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;accessible_prop&#39;).value&quot;</span>);</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, value-&gt;Int32Value());</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;propertyIsEnumerable.call(other, &#39;accessible_prop&#39;)&quot;</span>);</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsTrue());</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;  <span class="comment">// Enumeration doesn&#39;t enumerate accessors from inaccessible objects in</span></div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;  <span class="comment">// the prototype chain even if the accessors are in themselves accessible.</span></div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;  value =</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;      CompileRun(<span class="stringliteral">&quot;(function(){var obj = {&#39;__proto__&#39;:other};&quot;</span></div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;                 <span class="stringliteral">&quot;for (var p in obj)&quot;</span></div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;                 <span class="stringliteral">&quot;   if (p == &#39;accessible_prop&#39; || p == &#39;blocked_prop&#39;) {&quot;</span></div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;                 <span class="stringliteral">&quot;     return false;&quot;</span></div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;                 <span class="stringliteral">&quot;   }&quot;</span></div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;                 <span class="stringliteral">&quot;return true;})()&quot;</span>);</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsTrue());</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;}</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;</div>
<div class="line"><a name="l07147"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a434433ec017d6b983a2f8de489e28c6c"> 7147</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(AccessControlES5) {</div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedAccessBlocker,</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;                                           IndexedAccessBlocker);</div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;  <span class="comment">// Add accessible accessor.</span></div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;      v8_str(<span class="stringliteral">&quot;accessible_prop&quot;</span>),</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;      EchoGetter, EchoSetter,</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(),</div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9fa">v8::AccessControl</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa51a8c9fb5d86daa1e245d087c2331037">v8::ALL_CAN_READ</a> | <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa8184abbb8ba084f35692bbf8bc5657f0">v8::ALL_CAN_WRITE</a>));</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;  <span class="comment">// Add an accessor that is not accessible by cross-domain JS code.</span></div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;blocked_prop&quot;</span>),</div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;                               UnreachableGetter, UnreachableSetter,</div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;                               <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(),</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;                               <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>);</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;  <span class="comment">// Create an environment</span></div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global0 = context0-&gt;Global();</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;other&quot;</span>), global0);</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;</div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;  <span class="comment">// Regression test for issue 1154.</span></div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.keys(other).indexOf(&#39;blocked_prop&#39;) == -1&quot;</span>);</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other.blocked_prop&quot;</span>);</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;  <span class="comment">// Regression test for issue 1027.</span></div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.defineProperty(\n&quot;</span></div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;             <span class="stringliteral">&quot;  other, &#39;blocked_prop&#39;, {configurable: false})&quot;</span>);</div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other.blocked_prop&quot;</span>);</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;  ExpectUndefined(</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;      <span class="stringliteral">&quot;Object.getOwnPropertyDescriptor(other, &#39;blocked_prop&#39;)&quot;</span>);</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;  <span class="comment">// Regression test for issue 1171.</span></div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.isExtensible(other)&quot;</span>);</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.preventExtensions(other)&quot;</span>);</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.isExtensible(other)&quot;</span>);</div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;  <span class="comment">// Object.seal and Object.freeze.</span></div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.freeze(other)&quot;</span>);</div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.isExtensible(other)&quot;</span>);</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.seal(other)&quot;</span>);</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;Object.isExtensible(other)&quot;</span>);</div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;  <span class="comment">// Regression test for issue 1250.</span></div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;  <span class="comment">// Make sure that we can set the accessible accessors value using normal</span></div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;  <span class="comment">// assignment.</span></div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;  CompileRun(<span class="stringliteral">&quot;other.accessible_prop = 42&quot;</span>);</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, g_echo_value);</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value;</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;  <span class="comment">// We follow Safari in ignoring assignments to host object accessors.</span></div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.defineProperty(other, &#39;accessible_prop&#39;, {value: -1})&quot;</span>);</div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;other.accessible_prop == 42&quot;</span>);</div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3d46ba6a258e0029819606fe47d50c24">IsTrue</a>());</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;}</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;</div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> GetOwnPropertyNamesNamedBlocker(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;                                            Local&lt;Value&gt; name,</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;                                            <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;                                            Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;}</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> GetOwnPropertyNamesIndexedBlocker(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;                                              uint32_t key,</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;                                              <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;                                              Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;}</div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;</div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;</div>
<div class="line"><a name="l07233"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad6a9a85cdfed229ed6f12ce781dd6a13"> 7233</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AccessControlGetOwnPropertyNames) {</div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;  obj_template-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;  obj_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(GetOwnPropertyNamesNamedBlocker,</div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;                                        GetOwnPropertyNamesIndexedBlocker);</div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;  <span class="comment">// Create an environment</span></div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, obj_template);</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;</div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global0 = context0-&gt;Global();</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;</div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope1;</div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;</div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;</div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;other&quot;</span>), global0);</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;object&quot;</span>), obj_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value;</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;  <span class="comment">// Attempt to get the property names of the other global object and</span></div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;  <span class="comment">// of an object that requires access checks.  Accessing the other</span></div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;  <span class="comment">// global object should be blocked by access checks on the global</span></div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;  <span class="comment">// proxy object.  Accessing the object that requires access checks</span></div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;  <span class="comment">// is blocked by the access checks on the object itself.</span></div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;Object.getOwnPropertyNames(other).length == 0&quot;</span>);</div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3d46ba6a258e0029819606fe47d50c24">IsTrue</a>());</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;Object.getOwnPropertyNames(object).length == 0&quot;</span>);</div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsTrue());</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;}</div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;</div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> <a class="code" href="../../d2/dc3/namespacev8.html#a7a892b6d7692bbde54cbce6345010016">NamedPropertyEnumerator</a>(<span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>(1);</div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;  result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(0, v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;}</div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;</div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;</div>
<div class="line"><a name="l07283"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a57bdd0839a62d939cc1c8cfc73beecdf"> 7283</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GetOwnPropertyNamesWithInterceptor) {</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;</div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;  obj_template-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;  obj_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;                                        NamedPropertyEnumerator);</div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;object&quot;</span>), obj_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;</div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value =</div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;      CompileRun(<span class="stringliteral">&quot;Object.getOwnPropertyNames(object).join(&#39;,&#39;)&quot;</span>);</div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), value);</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;}</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;</div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ConstTenGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;                                        <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;  <span class="keywordflow">return</span> v8_num(10);</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;}</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;</div>
<div class="line"><a name="l07307"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a22a181dccd6f5f4c4c81a41c63339198"> 7307</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CrossDomainAccessors) {</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> func_template = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global_template =</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;      func_template-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>();</div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_template =</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;      func_template-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;  <span class="comment">// Add an accessor to proto that&#39;s accessible by cross-domain JS code.</span></div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;  proto_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;accessible&quot;</span>),</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;                              ConstTenGetter, 0,</div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;                              <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(),</div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;                              <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa51a8c9fb5d86daa1e245d087c2331037">v8::ALL_CAN_READ</a>);</div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;  <span class="comment">// Add an accessor that is not accessible by cross-domain JS code.</span></div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;unreachable&quot;</span>),</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;                               UnreachableGetter, 0,</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;                               <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(),</div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;                               <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>);</div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;</div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;</div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;  Local&lt;v8::Object&gt; global = context0-&gt;Global();</div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;  <span class="comment">// Add a normal property that shadows &#39;accessible&#39;</span></div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;  global-&gt;Set(v8_str(<span class="stringliteral">&quot;accessible&quot;</span>), v8_num(11));</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;</div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;  <span class="comment">// Enter a new context.</span></div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope1;</div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;</div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;other&quot;</span>), global);</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;</div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;  <span class="comment">// Should return 10, instead of 11</span></div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = v8_compile(<span class="stringliteral">&quot;other.accessible&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(10, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;other.unreachable&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsUndefined());</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;</div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;}</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;</div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> named_access_count = 0;</div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> indexed_access_count = 0;</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> NamedAccessCounter(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;                               Local&lt;Value&gt; name,</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;                               <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;                               Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;  named_access_count++;</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;}</div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;</div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;</div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> IndexedAccessCounter(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;                                 uint32_t key,</div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;                                 <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;                                 Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;  indexed_access_count++;</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;}</div>
<div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;</div>
<div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;</div>
<div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;<span class="comment">// This one is too easily disturbed by other tests.</span></div>
<div class="line"><a name="l07382"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a01110ac62a8dfcff52f1304b8140306d"> 7382</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(AccessControlIC) {</div>
<div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;  named_access_count = 0;</div>
<div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;  indexed_access_count = 0;</div>
<div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;</div>
<div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;</div>
<div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;  <span class="comment">// Create an environment.</span></div>
<div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New();</div>
<div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;</div>
<div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;  <span class="comment">// Create an object that requires access-check functions to be</span></div>
<div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;  <span class="comment">// called for cross-domain access.</span></div>
<div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> object_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;  object_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedAccessCounter,</div>
<div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;                                           IndexedAccessCounter);</div>
<div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;  Local&lt;v8::Object&gt; <span class="keywordtype">object</span> = object_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;</div>
<div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope1;</div>
<div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;</div>
<div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;  <span class="comment">// Create another environment.</span></div>
<div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;</div>
<div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;  <span class="comment">// Make easy access to the object from the other environment.</span></div>
<div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;</div>
<div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value;</div>
<div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;</div>
<div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;  <span class="comment">// Check that the named access-control function is called every time.</span></div>
<div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;  CompileRun(<span class="stringliteral">&quot;function testProp(obj) {&quot;</span></div>
<div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;             <span class="stringliteral">&quot;  for (var i = 0; i &lt; 10; i++) obj.prop = 1;&quot;</span></div>
<div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;             <span class="stringliteral">&quot;  for (var j = 0; j &lt; 10; j++) obj.prop;&quot;</span></div>
<div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;             <span class="stringliteral">&quot;  return obj.prop&quot;</span></div>
<div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;             <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;testProp(obj)&quot;</span>);</div>
<div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(21, named_access_count);</div>
<div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;</div>
<div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;  <span class="comment">// Check that the named access-control function is called every time.</span></div>
<div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;  CompileRun(<span class="stringliteral">&quot;var p = &#39;prop&#39;;&quot;</span></div>
<div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;             <span class="stringliteral">&quot;function testKeyed(obj) {&quot;</span></div>
<div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;             <span class="stringliteral">&quot;  for (var i = 0; i &lt; 10; i++) obj[p] = 1;&quot;</span></div>
<div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;             <span class="stringliteral">&quot;  for (var j = 0; j &lt; 10; j++) obj[p];&quot;</span></div>
<div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;             <span class="stringliteral">&quot;  return obj[p];&quot;</span></div>
<div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;             <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;  <span class="comment">// Use obj which requires access checks.  No inline caching is used</span></div>
<div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;  <span class="comment">// in that case.</span></div>
<div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;testKeyed(obj)&quot;</span>);</div>
<div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, named_access_count);</div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;  <span class="comment">// Force the inline caches into generic state and try again.</span></div>
<div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;  CompileRun(<span class="stringliteral">&quot;testKeyed({ a: 0 })&quot;</span>);</div>
<div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;  CompileRun(<span class="stringliteral">&quot;testKeyed({ b: 0 })&quot;</span>);</div>
<div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;testKeyed(obj)&quot;</span>);</div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(63, named_access_count);</div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;  <span class="comment">// Check that the indexed access-control function is called every time.</span></div>
<div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;  CompileRun(<span class="stringliteral">&quot;function testIndexed(obj) {&quot;</span></div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;             <span class="stringliteral">&quot;  for (var i = 0; i &lt; 10; i++) obj[0] = 1;&quot;</span></div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;             <span class="stringliteral">&quot;  for (var j = 0; j &lt; 10; j++) obj[0];&quot;</span></div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;             <span class="stringliteral">&quot;  return obj[0]&quot;</span></div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;             <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;testIndexed(obj)&quot;</span>);</div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(21, indexed_access_count);</div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;  <span class="comment">// Force the inline caches into generic state.</span></div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;  CompileRun(<span class="stringliteral">&quot;testIndexed(new Array(1))&quot;</span>);</div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;  <span class="comment">// Test that the indexed access check is called.</span></div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;testIndexed(obj)&quot;</span>);</div>
<div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, indexed_access_count);</div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;</div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;  <span class="comment">// Check that the named access check is called when invoking</span></div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;  <span class="comment">// functions on an object that requires access checks.</span></div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;  CompileRun(<span class="stringliteral">&quot;obj.f = function() {}&quot;</span>);</div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;  CompileRun(<span class="stringliteral">&quot;function testCallNormal(obj) {&quot;</span></div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;             <span class="stringliteral">&quot;  for (var i = 0; i &lt; 10; i++) obj.f();&quot;</span></div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;             <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;  CompileRun(<span class="stringliteral">&quot;testCallNormal(obj)&quot;</span>);</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(74, named_access_count);</div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;</div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;  <span class="comment">// Force obj into slow case.</span></div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;delete obj.prop&quot;</span>);</div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">BooleanValue</a>());</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;  <span class="comment">// Force inline caches into dictionary probing mode.</span></div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;  CompileRun(<span class="stringliteral">&quot;var o = { x: 0 }; delete o.x; testProp(o);&quot;</span>);</div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;  <span class="comment">// Test that the named access check is called.</span></div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;testProp(obj);&quot;</span>);</div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(96, named_access_count);</div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;</div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;  <span class="comment">// Force the call inline cache into dictionary probing mode.</span></div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;  CompileRun(<span class="stringliteral">&quot;o.f = function() {}; testCallNormal(o)&quot;</span>);</div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;  <span class="comment">// Test that the named access check is still called for each</span></div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;  <span class="comment">// invocation of the function.</span></div>
<div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;testCallNormal(obj)&quot;</span>);</div>
<div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(106, named_access_count);</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;</div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;}</div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;</div>
<div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;</div>
<div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> NamedAccessFlatten(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;                               Local&lt;Value&gt; name,</div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;                               <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;                               Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;  <span class="keywordtype">char</span> buf[100];</div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;  <span class="keywordtype">int</span> len;</div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;</div>
<div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(name-&gt;IsString());</div>
<div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;</div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;  len = name.As&lt;String&gt;()-&gt;WriteAscii(buf);</div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, len);</div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;</div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> buf2[100];</div>
<div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;</div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;  memset(buf, 0x1, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;  len = name.As&lt;String&gt;()-&gt;Write(buf2);</div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, len);</div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;</div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;}</div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;</div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;</div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> IndexedAccessFlatten(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;                                 uint32_t key,</div>
<div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;                                 <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;                                 Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;}</div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;</div>
<div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;</div>
<div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;<span class="comment">// Regression test.  In access checks, operations that may cause</span></div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;<span class="comment">// garbage collection are not allowed.  It used to be the case that</span></div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;<span class="comment">// using the Write operation on a string could cause a garbage</span></div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;<span class="comment">// collection due to flattening of the string.  This is no longer the</span></div>
<div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;<span class="comment">// case.</span></div>
<div class="line"><a name="l07531"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3b7ac51d34c923641ff9a2adc6d1f8fd"> 7531</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AccessControlFlatten) {</div>
<div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;  named_access_count = 0;</div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;  indexed_access_count = 0;</div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;</div>
<div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;</div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;  <span class="comment">// Create an environment.</span></div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New();</div>
<div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;  <span class="comment">// Create an object that requires access-check functions to be</span></div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;  <span class="comment">// called for cross-domain access.</span></div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> object_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;  object_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedAccessFlatten,</div>
<div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;                                           IndexedAccessFlatten);</div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;  Local&lt;v8::Object&gt; <span class="keywordtype">object</span> = object_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope1;</div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;</div>
<div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;  <span class="comment">// Create another environment.</span></div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;</div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;  <span class="comment">// Make easy access to the object from the other environment.</span></div>
<div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;</div>
<div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value;</div>
<div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;</div>
<div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;var p = &#39;as&#39; + &#39;df&#39;;&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;obj[p];&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160;</div>
<div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;}</div>
<div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;</div>
<div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;</div>
<div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> AccessControlNamedGetter(</div>
<div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;    Local&lt;String&gt;, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42);</div>
<div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;}</div>
<div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;</div>
<div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;</div>
<div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> AccessControlNamedSetter(</div>
<div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;    Local&lt;String&gt;, Local&lt;Value&gt; value, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;  <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;}</div>
<div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;</div>
<div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;</div>
<div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> AccessControlIndexedGetter(</div>
<div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;      uint32_t index,</div>
<div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;      <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;  <span class="keywordflow">return</span> v8_num(42);</div>
<div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;}</div>
<div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;</div>
<div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;</div>
<div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> AccessControlIndexedSetter(</div>
<div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;    uint32_t, Local&lt;Value&gt; value, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;  <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;}</div>
<div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;</div>
<div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;</div>
<div class="line"><a name="l07595"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3ea375f1c39f36b395c0294941bf7af5"> 7595</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AccessControlInterceptorIC) {</div>
<div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;  named_access_count = 0;</div>
<div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;  indexed_access_count = 0;</div>
<div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;</div>
<div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;</div>
<div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;  <span class="comment">// Create an environment.</span></div>
<div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New();</div>
<div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;</div>
<div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;  <span class="comment">// Create an object that requires access-check functions to be</span></div>
<div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;  <span class="comment">// called for cross-domain access.  The object also has interceptors</span></div>
<div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;  <span class="comment">// interceptor.</span></div>
<div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> object_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;  object_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedAccessCounter,</div>
<div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;                                           IndexedAccessCounter);</div>
<div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;  object_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(AccessControlNamedGetter,</div>
<div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;                                           AccessControlNamedSetter);</div>
<div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;  object_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ad3baf9d0959cbc49663a33718d7dd8a3">SetIndexedPropertyHandler</a>(AccessControlIndexedGetter,</div>
<div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;                                             AccessControlIndexedSetter);</div>
<div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;  Local&lt;v8::Object&gt; <span class="keywordtype">object</span> = object_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;</div>
<div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope1;</div>
<div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;</div>
<div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;  <span class="comment">// Create another environment.</span></div>
<div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;</div>
<div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;  <span class="comment">// Make easy access to the object from the other environment.</span></div>
<div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global1 = context1-&gt;Global();</div>
<div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;  global1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;</div>
<div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value;</div>
<div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;</div>
<div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;  <span class="comment">// Check that the named access-control function is called every time</span></div>
<div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;  <span class="comment">// eventhough there is an interceptor on the object.</span></div>
<div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) obj.x = 1;&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) obj.x;&quot;</span></div>
<div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;                     <span class="stringliteral">&quot;obj.x&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(21, named_access_count);</div>
<div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;</div>
<div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;var p = &#39;x&#39;;&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) obj[p] = 1;&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) obj[p];&quot;</span></div>
<div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;                     <span class="stringliteral">&quot;obj[p]&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, named_access_count);</div>
<div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;</div>
<div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;  <span class="comment">// Check that the indexed access-control function is called every</span></div>
<div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;  <span class="comment">// time eventhough there is an interceptor on the object.</span></div>
<div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) obj[0] = 1;&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) obj[0];&quot;</span></div>
<div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;                     <span class="stringliteral">&quot;obj[0]&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(21, indexed_access_count);</div>
<div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;</div>
<div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;}</div>
<div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;</div>
<div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;</div>
<div class="line"><a name="l07662"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a69604623615f444f59caed81738871c9"> 7662</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(<a class="code" href="../../dd/d51/shell_8cc.html#a32c498445e9d00c9f615371af93c3565">Version</a>) {</div>
<div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a5cfcef5d0edc9785a78629ce9212930f">v8::V8::GetVersion</a>();</div>
<div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;}</div>
<div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;</div>
<div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;</div>
<div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InstanceFunctionCallback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;  <span class="keywordflow">return</span> v8_num(12);</div>
<div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160;}</div>
<div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;</div>
<div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;</div>
<div class="line"><a name="l07673"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a22a8060ad5c6e2b9a946120b15e2d7ed"> 7673</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InstanceProperties) {</div>
<div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;</div>
<div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;  Local&lt;ObjectTemplate&gt; instance = t-&gt;InstanceTemplate();</div>
<div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;</div>
<div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;  instance-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), v8_num(42));</div>
<div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;  instance-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>),</div>
<div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;                <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(InstanceFunctionCallback));</div>
<div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;</div>
<div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;  Local&lt;Value&gt; o = t-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;</div>
<div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;i&quot;</span>), o);</div>
<div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;  Local&lt;Value&gt; value = Script::Compile(v8_str(<span class="stringliteral">&quot;i.x&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;</div>
<div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;  value = Script::Compile(v8_str(<span class="stringliteral">&quot;i.f()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(12, value-&gt;Int32Value());</div>
<div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;}</div>
<div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;</div>
<div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;</div>
<div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a></div>
<div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;GlobalObjectInstancePropertiesGet(Local&lt;String&gt; key, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;}</div>
<div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;</div>
<div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;</div>
<div class="line"><a name="l07702"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3f6e384f96e590fb2da3a1d5b9baf6e9"> 7702</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GlobalObjectInstanceProperties) {</div>
<div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;</div>
<div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;  Local&lt;Value&gt; global_object;</div>
<div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;</div>
<div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;  t-&gt;InstanceTemplate()-&gt;SetNamedPropertyHandler(</div>
<div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;      GlobalObjectInstancePropertiesGet);</div>
<div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;  Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = t-&gt;InstanceTemplate();</div>
<div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;  instance_template-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), v8_num(42));</div>
<div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;  instance_template-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>),</div>
<div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;                         <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(InstanceFunctionCallback));</div>
<div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;</div>
<div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;  <span class="comment">// The script to check how Crankshaft compiles missing global function</span></div>
<div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;  <span class="comment">// invocations.  function g is not defined and should throw on call.</span></div>
<div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script =</div>
<div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;      <span class="stringliteral">&quot;function wrapper(call) {&quot;</span></div>
<div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;      <span class="stringliteral">&quot;  var x = 0, y = 1;&quot;</span></div>
<div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;      <span class="stringliteral">&quot;    x += i * 100;&quot;</span></div>
<div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;      <span class="stringliteral">&quot;    y += i * 100;&quot;</span></div>
<div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;      <span class="stringliteral">&quot;  if (call) g();&quot;</span></div>
<div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 17; i++) wrapper(false);&quot;</span></div>
<div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;      <span class="stringliteral">&quot;var thrown = 0;&quot;</span></div>
<div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;      <span class="stringliteral">&quot;try { wrapper(true); } catch (e) { thrown = 1; };&quot;</span></div>
<div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;      <span class="stringliteral">&quot;thrown&quot;</span>;</div>
<div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;</div>
<div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;  {</div>
<div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, instance_template);</div>
<div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;    <span class="comment">// Hold on to the global object so it can be used again in another</span></div>
<div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;    <span class="comment">// environment initialization.</span></div>
<div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;    global_object = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;</div>
<div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;    Local&lt;Value&gt; value = Script::Compile(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;    value = Script::Compile(v8_str(<span class="stringliteral">&quot;f()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(12, value-&gt;Int32Value());</div>
<div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;    value = Script::Compile(v8_str(script))-&gt;Run();</div>
<div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;Int32Value());</div>
<div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;  }</div>
<div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;</div>
<div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;  {</div>
<div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;    <span class="comment">// Create new environment reusing the global object.</span></div>
<div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, instance_template, global_object);</div>
<div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;    Local&lt;Value&gt; value = Script::Compile(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;    value = Script::Compile(v8_str(<span class="stringliteral">&quot;f()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(12, value-&gt;Int32Value());</div>
<div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;    value = Script::Compile(v8_str(script))-&gt;Run();</div>
<div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;Int32Value());</div>
<div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;  }</div>
<div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160;}</div>
<div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;</div>
<div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;</div>
<div class="line"><a name="l07758"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a07d502958d02fd8ed3c0ec679a8edf12"> 7758</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallKnownGlobalReceiver) {</div>
<div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;</div>
<div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;  Local&lt;Value&gt; global_object;</div>
<div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;</div>
<div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;  Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = t-&gt;InstanceTemplate();</div>
<div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;</div>
<div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;  <span class="comment">// The script to check that we leave global object not</span></div>
<div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;  <span class="comment">// global object proxy on stack when we deoptimize from inside</span></div>
<div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;  <span class="comment">// arguments evaluation.</span></div>
<div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;  <span class="comment">// To provoke error we need to both force deoptimization</span></div>
<div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;  <span class="comment">// from arguments evaluation and to force CallIC to take</span></div>
<div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;  <span class="comment">// CallIC_Miss code path that can&#39;t cope with global proxy.</span></div>
<div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script =</div>
<div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;      <span class="stringliteral">&quot;function bar(x, y) { try { } finally { } }&quot;</span></div>
<div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;      <span class="stringliteral">&quot;function baz(x) { try { } finally { } }&quot;</span></div>
<div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;      <span class="stringliteral">&quot;function bom(x) { try { } finally { } }&quot;</span></div>
<div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;      <span class="stringliteral">&quot;function foo(x) { bar([x], bom(2)); }&quot;</span></div>
<div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10000; i++) foo(1);&quot;</span></div>
<div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;      <span class="stringliteral">&quot;foo&quot;</span>;</div>
<div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;</div>
<div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a>;</div>
<div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;  {</div>
<div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, instance_template);</div>
<div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;    <span class="comment">// Hold on to the global object so it can be used again in another</span></div>
<div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;    <span class="comment">// environment initialization.</span></div>
<div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;    global_object = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;    foo = Script::Compile(v8_str(script))-&gt;Run();</div>
<div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;  }</div>
<div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;</div>
<div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;  {</div>
<div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;    <span class="comment">// Create new environment reusing the global object.</span></div>
<div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, instance_template, global_object);</div>
<div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;foo&quot;</span>), foo);</div>
<div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;    Script::Compile(v8_str(<span class="stringliteral">&quot;foo()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;  }</div>
<div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;}</div>
<div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;</div>
<div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;</div>
<div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ShadowFunctionCallback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;  <span class="keywordflow">return</span> v8_num(42);</div>
<div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;}</div>
<div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;</div>
<div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;</div>
<div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> shadow_y;</div>
<div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> shadow_y_setter_call_count;</div>
<div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> shadow_y_getter_call_count;</div>
<div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;</div>
<div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;</div>
<div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ShadowYSetter(Local&lt;String&gt;, Local&lt;Value&gt;, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;  shadow_y_setter_call_count++;</div>
<div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;  shadow_y = 42;</div>
<div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;}</div>
<div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;</div>
<div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;</div>
<div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ShadowYGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;                                       <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;  shadow_y_getter_call_count++;</div>
<div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;  <span class="keywordflow">return</span> v8_num(shadow_y);</div>
<div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;}</div>
<div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;</div>
<div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;</div>
<div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ShadowIndexedGet(uint32_t index,</div>
<div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;                                          <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;}</div>
<div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;</div>
<div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;</div>
<div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ShadowNamedGet(Local&lt;String&gt; key,</div>
<div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;                                        <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;}</div>
<div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;</div>
<div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;</div>
<div class="line"><a name="l07835"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a013e7ae1f7b2b2ef53ac7ef31694f2e0"> 7835</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ShadowObject) {</div>
<div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;  shadow_y = shadow_y_setter_call_count = shadow_y_getter_call_count = 0;</div>
<div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;</div>
<div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;  Local&lt;ObjectTemplate&gt; global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;</div>
<div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;  t-&gt;InstanceTemplate()-&gt;SetNamedPropertyHandler(ShadowNamedGet);</div>
<div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;  t-&gt;InstanceTemplate()-&gt;SetIndexedPropertyHandler(ShadowIndexedGet);</div>
<div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;  Local&lt;ObjectTemplate&gt; proto = t-&gt;PrototypeTemplate();</div>
<div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;  Local&lt;ObjectTemplate&gt; instance = t-&gt;InstanceTemplate();</div>
<div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;</div>
<div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;  <span class="comment">// Only allow calls of f on instances of t.</span></div>
<div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;  Local&lt;v8::Signature&gt; signature = <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(t);</div>
<div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;  proto-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>),</div>
<div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(ShadowFunctionCallback,</div>
<div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;                                       Local&lt;Value&gt;(),</div>
<div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;                                       signature));</div>
<div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;  proto-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), v8_num(12));</div>
<div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;</div>
<div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;  instance-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;y&quot;</span>), ShadowYGetter, ShadowYSetter);</div>
<div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;</div>
<div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;  Local&lt;Value&gt; o = t-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), o);</div>
<div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;</div>
<div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;  Local&lt;Value&gt; value =</div>
<div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;this.propertyIsEnumerable(0)&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsBoolean());</div>
<div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!value-&gt;BooleanValue());</div>
<div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;</div>
<div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;  value = Script::Compile(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(12, value-&gt;Int32Value());</div>
<div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;</div>
<div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;  value = Script::Compile(v8_str(<span class="stringliteral">&quot;f()&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;</div>
<div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;y = 43&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, shadow_y_setter_call_count);</div>
<div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;  value = Script::Compile(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, shadow_y_getter_call_count);</div>
<div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;}</div>
<div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;</div>
<div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;</div>
<div class="line"><a name="l07880"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9c3846a2ad7444848d8ee575a2b17044"> 7880</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(HiddenPrototype) {</div>
<div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;</div>
<div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t0 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;  t0-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), v8_num(0));</div>
<div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t1 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;  t1-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;  t1-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;y&quot;</span>), v8_num(1));</div>
<div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t2 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;  t2-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;  t2-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;z&quot;</span>), v8_num(2));</div>
<div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t3 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;  t3-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;u&quot;</span>), v8_num(3));</div>
<div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;</div>
<div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;  Local&lt;v8::Object&gt; o0 = t0-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;  Local&lt;v8::Object&gt; o1 = t1-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;  Local&lt;v8::Object&gt; o2 = t2-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;  Local&lt;v8::Object&gt; o3 = t3-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;</div>
<div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;  <span class="comment">// Setting the prototype on an object skips hidden prototypes.</span></div>
<div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;  o0-&gt;Set(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), o1);</div>
<div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;  o0-&gt;Set(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), o2);</div>
<div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;z&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;  o0-&gt;Set(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>), o3);</div>
<div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;z&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;u&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;</div>
<div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;  <span class="comment">// Getting the prototype of o0 should get the first visible one</span></div>
<div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;  <span class="comment">// which is o3.  Therefore, z should not be defined on the prototype</span></div>
<div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;  Local&lt;Value&gt; proto = o0-&gt;Get(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>));</div>
<div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(proto-&gt;IsObject());</div>
<div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(proto.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;z&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;}</div>
<div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;</div>
<div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;</div>
<div class="line"><a name="l07924"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1c0775c625af1089276b2e8abf8bb66e"> 7924</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a7ab5706e948e5e4106f1a8218734d08a">SetPrototype</a>) {</div>
<div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;</div>
<div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t0 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;  t0-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), v8_num(0));</div>
<div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t1 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;  t1-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;  t1-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;y&quot;</span>), v8_num(1));</div>
<div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t2 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;  t2-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;  t2-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;z&quot;</span>), v8_num(2));</div>
<div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t3 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;  t3-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;u&quot;</span>), v8_num(3));</div>
<div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;</div>
<div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;  Local&lt;v8::Object&gt; o0 = t0-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;  Local&lt;v8::Object&gt; o1 = t1-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;  Local&lt;v8::Object&gt; o2 = t2-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;  Local&lt;v8::Object&gt; o3 = t3-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;</div>
<div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;  <span class="comment">// Setting the prototype on an object does not skip hidden prototypes.</span></div>
<div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o0-&gt;SetPrototype(o1));</div>
<div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o1-&gt;SetPrototype(o2));</div>
<div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;z&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o2-&gt;SetPrototype(o3));</div>
<div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;z&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, o0-&gt;Get(v8_str(<span class="stringliteral">&quot;u&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;</div>
<div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;  <span class="comment">// Getting the prototype of o0 should get the first visible one</span></div>
<div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;  <span class="comment">// which is o3.  Therefore, z should not be defined on the prototype</span></div>
<div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;  Local&lt;Value&gt; proto = o0-&gt;Get(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>));</div>
<div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(proto-&gt;IsObject());</div>
<div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(proto.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;(), o3);</div>
<div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;</div>
<div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;  <span class="comment">// However, Object::GetPrototype ignores hidden prototype.</span></div>
<div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;  Local&lt;Value&gt; proto0 = o0-&gt;GetPrototype();</div>
<div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(proto0-&gt;IsObject());</div>
<div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(proto0.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;(), o1);</div>
<div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;</div>
<div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;  Local&lt;Value&gt; proto1 = o1-&gt;GetPrototype();</div>
<div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(proto1-&gt;IsObject());</div>
<div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(proto1.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;(), o2);</div>
<div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;</div>
<div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;  Local&lt;Value&gt; proto2 = o2-&gt;GetPrototype();</div>
<div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(proto2-&gt;IsObject());</div>
<div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(proto2.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;(), o3);</div>
<div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;}</div>
<div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;</div>
<div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;</div>
<div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;<span class="comment">// Getting property names of an object with a prototype chain that</span></div>
<div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;<span class="comment">// triggers dictionary elements in GetLocalPropertyNames() shouldn&#39;t</span></div>
<div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;<span class="comment">// crash the runtime.</span></div>
<div class="line"><a name="l07984"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3a8012d09d8e02918771845c7f05de8d"> 7984</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress91517) {</div>
<div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;</div>
<div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t1 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;  t1-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;  t1-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;foo&quot;</span>), v8_num(1));</div>
<div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t2 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;  t2-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;  t2-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;fuz1&quot;</span>), v8_num(2));</div>
<div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;  t2-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;objects&quot;</span>), <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;  t2-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;fuz2&quot;</span>), v8_num(2));</div>
<div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t3 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;  t3-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;  t3-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;boo&quot;</span>), v8_num(3));</div>
<div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t4 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;  t4-&gt;InstanceTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;baz&quot;</span>), v8_num(4));</div>
<div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;</div>
<div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;  <span class="comment">// Force dictionary-based properties.</span></div>
<div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;  <a class="code" href="../../da/de2/classv8_1_1internal_1_1_scoped_vector.html">i::ScopedVector&lt;char&gt;</a> name_buf(1024);</div>
<div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= 1000; i++) {</div>
<div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(name_buf, <span class="stringliteral">&quot;sdf%d&quot;</span>, i);</div>
<div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;    t2-&gt;InstanceTemplate()-&gt;Set(v8_str(name_buf.<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#affb06cbe9d08291ab0fc1a467edec469">start</a>()), v8_num(2));</div>
<div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;  }</div>
<div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;</div>
<div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;  Local&lt;v8::Object&gt; o1 = t1-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;  Local&lt;v8::Object&gt; o2 = t2-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;  Local&lt;v8::Object&gt; o3 = t3-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;  Local&lt;v8::Object&gt; o4 = t4-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;</div>
<div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;  <span class="comment">// Create prototype chain of hidden prototypes.</span></div>
<div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o4-&gt;SetPrototype(o3));</div>
<div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o3-&gt;SetPrototype(o2));</div>
<div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o2-&gt;SetPrototype(o1));</div>
<div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;</div>
<div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;  <span class="comment">// Call the runtime version of GetLocalPropertyNames() on the natively</span></div>
<div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;  <span class="comment">// created object through JavaScript.</span></div>
<div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), o4);</div>
<div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;  CompileRun(<span class="stringliteral">&quot;var names = %GetLocalPropertyNames(obj);&quot;</span>);</div>
<div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;</div>
<div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;names.length&quot;</span>, 1006);</div>
<div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;names.indexOf(\&quot;baz\&quot;) &gt;= 0&quot;</span>);</div>
<div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;names.indexOf(\&quot;boo\&quot;) &gt;= 0&quot;</span>);</div>
<div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;names.indexOf(\&quot;foo\&quot;) &gt;= 0&quot;</span>);</div>
<div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;names.indexOf(\&quot;fuz1\&quot;) &gt;= 0&quot;</span>);</div>
<div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;names.indexOf(\&quot;fuz2\&quot;) &gt;= 0&quot;</span>);</div>
<div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;  ExpectFalse(<span class="stringliteral">&quot;names[1005] == undefined&quot;</span>);</div>
<div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;}</div>
<div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;</div>
<div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;</div>
<div class="line"><a name="l08035"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9822d2219c523329ca936948b8419562"> 8035</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionReadOnlyPrototype) {</div>
<div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;</div>
<div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t1 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;  t1-&gt;PrototypeTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;  t1-&gt;ReadOnlyPrototype();</div>
<div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;func1&quot;</span>), t1-&gt;GetFunction());</div>
<div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;  <span class="comment">// Configured value of ReadOnly flag.</span></div>
<div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(</div>
<div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;      <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;      <span class="stringliteral">&quot;  descriptor = Object.getOwnPropertyDescriptor(func1, &#39;prototype&#39;);&quot;</span></div>
<div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;      <span class="stringliteral">&quot;  return (descriptor[&#39;writable&#39;] == false);&quot;</span></div>
<div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;      <span class="stringliteral">&quot;})()&quot;</span>)-&gt;BooleanValue());</div>
<div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, CompileRun(<span class="stringliteral">&quot;func1.prototype.x&quot;</span>)-&gt;Int32Value());</div>
<div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42,</div>
<div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;           CompileRun(<span class="stringliteral">&quot;func1.prototype = {}; func1.prototype.x&quot;</span>)-&gt;Int32Value());</div>
<div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;</div>
<div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t2 = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;  t2-&gt;PrototypeTemplate()-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;func2&quot;</span>), t2-&gt;GetFunction());</div>
<div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;  <span class="comment">// Default value of ReadOnly flag.</span></div>
<div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(</div>
<div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;      <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;      <span class="stringliteral">&quot;  descriptor = Object.getOwnPropertyDescriptor(func2, &#39;prototype&#39;);&quot;</span></div>
<div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;      <span class="stringliteral">&quot;  return (descriptor[&#39;writable&#39;] == true);&quot;</span></div>
<div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;      <span class="stringliteral">&quot;})()&quot;</span>)-&gt;BooleanValue());</div>
<div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, CompileRun(<span class="stringliteral">&quot;func2.prototype.x&quot;</span>)-&gt;Int32Value());</div>
<div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;}</div>
<div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;</div>
<div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;</div>
<div class="line"><a name="l08066"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a142b5e84601725b354af85dad3018034"> 8066</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SetPrototypeThrows) {</div>
<div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;</div>
<div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;  Local&lt;v8::FunctionTemplate&gt; t = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;</div>
<div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;  Local&lt;v8::Object&gt; o0 = t-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;  Local&lt;v8::Object&gt; o1 = t-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;</div>
<div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o0-&gt;SetPrototype(o1));</div>
<div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;  <span class="comment">// If setting the prototype leads to the cycle, SetPrototype should</span></div>
<div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;  <span class="comment">// return false and keep VM in sane state.</span></div>
<div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!o1-&gt;SetPrototype(o0));</div>
<div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.HasCaught());</div>
<div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!i::Isolate::Current()-&gt;has_pending_exception());</div>
<div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;</div>
<div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, CompileRun(<span class="stringliteral">&quot;function f() { return 42; }; f()&quot;</span>)-&gt;Int32Value());</div>
<div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;}</div>
<div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;</div>
<div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;</div>
<div class="line"><a name="l08087"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a310f254ffacf61adf787e6772a45e7c3"> 8087</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GetterSetterExceptions) {</div>
<div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;  CompileRun(</div>
<div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;    <span class="stringliteral">&quot;function Foo() { };&quot;</span></div>
<div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;    <span class="stringliteral">&quot;function Throw() { throw 5; };&quot;</span></div>
<div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;    <span class="stringliteral">&quot;var x = { };&quot;</span></div>
<div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;    <span class="stringliteral">&quot;x.__defineSetter__(&#39;set&#39;, Throw);&quot;</span></div>
<div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;    <span class="stringliteral">&quot;x.__defineGetter__(&#39;get&#39;, Throw);&quot;</span>);</div>
<div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;  Local&lt;v8::Object&gt; x =</div>
<div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;      Local&lt;v8::Object&gt;::Cast(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>)));</div>
<div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;  x-&gt;Set(v8_str(<span class="stringliteral">&quot;set&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(8));</div>
<div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;  x-&gt;Get(v8_str(<span class="stringliteral">&quot;get&quot;</span>));</div>
<div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;  x-&gt;Set(v8_str(<span class="stringliteral">&quot;set&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(8));</div>
<div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;  x-&gt;Get(v8_str(<span class="stringliteral">&quot;get&quot;</span>));</div>
<div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;  x-&gt;Set(v8_str(<span class="stringliteral">&quot;set&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(8));</div>
<div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;  x-&gt;Get(v8_str(<span class="stringliteral">&quot;get&quot;</span>));</div>
<div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;  x-&gt;Set(v8_str(<span class="stringliteral">&quot;set&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(8));</div>
<div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;  x-&gt;Get(v8_str(<span class="stringliteral">&quot;get&quot;</span>));</div>
<div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;}</div>
<div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;</div>
<div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;</div>
<div class="line"><a name="l08110"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae6805b34d50afd2b86de497030962b06"> 8110</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Constructor) {</div>
<div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;  Local&lt;v8::FunctionTemplate&gt; templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160;  templ-&gt;SetClassName(v8_str(<span class="stringliteral">&quot;Fun&quot;</span>));</div>
<div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;  Local&lt;Function&gt; cons = templ-&gt;GetFunction();</div>
<div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Fun&quot;</span>), cons);</div>
<div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;  Local&lt;v8::Object&gt; inst = cons-&gt;NewInstance();</div>
<div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::JSObject&gt;</a> obj(v8::Utils::OpenHandle(*inst));</div>
<div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;IsJSObject());</div>
<div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;  Local&lt;Value&gt; value = CompileRun(<span class="stringliteral">&quot;(new Fun()).constructor === Fun&quot;</span>);</div>
<div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;BooleanValue());</div>
<div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;}</div>
<div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;</div>
<div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;</div>
<div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;<span class="keyword">static</span> Handle&lt;Value&gt; ConstructorCallback(<span class="keyword">const</span> Arguments&amp; args) {</div>
<div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;  Local&lt;Object&gt; This;</div>
<div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;</div>
<div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160;  <span class="keywordflow">if</span> (args.IsConstructCall()) {</div>
<div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;    Local&lt;Object&gt; Holder = args.Holder();</div>
<div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;    This = Object::New();</div>
<div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;    Local&lt;Value&gt; proto = Holder-&gt;GetPrototype();</div>
<div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160;    <span class="keywordflow">if</span> (proto-&gt;IsObject()) {</div>
<div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;      This-&gt;SetPrototype(proto);</div>
<div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;    }</div>
<div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;    This = args.This();</div>
<div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;  }</div>
<div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;</div>
<div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;  This-&gt;Set(v8_str(<span class="stringliteral">&quot;a&quot;</span>), args[0]);</div>
<div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;  <span class="keywordflow">return</span> This;</div>
<div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;}</div>
<div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;</div>
<div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;</div>
<div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;<span class="keyword">static</span> Handle&lt;Value&gt; FakeConstructorCallback(<span class="keyword">const</span> Arguments&amp; args) {</div>
<div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;  <span class="keywordflow">return</span> args[0];</div>
<div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;}</div>
<div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;</div>
<div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;</div>
<div class="line"><a name="l08151"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5ad2997e365240220c869818e671eb76"> 8151</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ConstructorForObject) {</div>
<div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;</div>
<div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;  { Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = ObjectTemplate::New();</div>
<div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;    instance_template-&gt;SetCallAsFunctionHandler(ConstructorCallback);</div>
<div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;    Local&lt;Object&gt; instance = instance_template-&gt;NewInstance();</div>
<div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), instance);</div>
<div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;    Local&lt;Value&gt; value;</div>
<div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;</div>
<div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;    <span class="comment">// Call the Object&#39;s constructor with a 32-bit signed integer.</span></div>
<div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;(function() { var o = new obj(28); return o.a; })()&quot;</span>);</div>
<div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsInt32());</div>
<div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, value-&gt;Int32Value());</div>
<div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;</div>
<div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;    Local&lt;Value&gt; args1[] = { v8_num(28) };</div>
<div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;    Local&lt;Value&gt; value_obj1 = instance-&gt;CallAsConstructor(1, args1);</div>
<div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value_obj1-&gt;IsObject());</div>
<div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;    Local&lt;Object&gt; object1 = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">Local&lt;Object&gt;::Cast</a>(value_obj1);</div>
<div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;    value = object1-&gt;Get(v8_str(<span class="stringliteral">&quot;a&quot;</span>));</div>
<div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsInt32());</div>
<div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, value-&gt;Int32Value());</div>
<div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;</div>
<div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;    <span class="comment">// Call the Object&#39;s constructor with a String.</span></div>
<div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;    value = CompileRun(</div>
<div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;        <span class="stringliteral">&quot;(function() { var o = new obj(&#39;tipli&#39;); return o.a; })()&quot;</span>);</div>
<div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsString());</div>
<div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;    String::AsciiValue string_value1(value-&gt;ToString());</div>
<div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;tipli&quot;</span>, *string_value1);</div>
<div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;</div>
<div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;    Local&lt;Value&gt; args2[] = { v8_str(<span class="stringliteral">&quot;tipli&quot;</span>) };</div>
<div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;    Local&lt;Value&gt; value_obj2 = instance-&gt;CallAsConstructor(1, args2);</div>
<div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value_obj2-&gt;IsObject());</div>
<div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;    Local&lt;Object&gt; object2 = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">Local&lt;Object&gt;::Cast</a>(value_obj2);</div>
<div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;    value = object2-&gt;Get(v8_str(<span class="stringliteral">&quot;a&quot;</span>));</div>
<div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsString());</div>
<div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;    String::AsciiValue string_value2(value-&gt;ToString());</div>
<div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;tipli&quot;</span>, *string_value2);</div>
<div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;</div>
<div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;    <span class="comment">// Call the Object&#39;s constructor with a Boolean.</span></div>
<div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;(function() { var o = new obj(true); return o.a; })()&quot;</span>);</div>
<div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsBoolean());</div>
<div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, value-&gt;BooleanValue());</div>
<div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;</div>
<div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;    Handle&lt;Value&gt; args3[] = { <a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>() };</div>
<div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;    Local&lt;Value&gt; value_obj3 = instance-&gt;CallAsConstructor(1, args3);</div>
<div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value_obj3-&gt;IsObject());</div>
<div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;    Local&lt;Object&gt; object3 = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">Local&lt;Object&gt;::Cast</a>(value_obj3);</div>
<div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;    value = object3-&gt;Get(v8_str(<span class="stringliteral">&quot;a&quot;</span>));</div>
<div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsBoolean());</div>
<div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, value-&gt;BooleanValue());</div>
<div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;</div>
<div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;    <span class="comment">// Call the Object&#39;s constructor with undefined.</span></div>
<div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;    Handle&lt;Value&gt; args4[] = { <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>() };</div>
<div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160;    Local&lt;Value&gt; value_obj4 = instance-&gt;CallAsConstructor(1, args4);</div>
<div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value_obj4-&gt;IsObject());</div>
<div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;    Local&lt;Object&gt; object4 = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">Local&lt;Object&gt;::Cast</a>(value_obj4);</div>
<div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;    value = object4-&gt;Get(v8_str(<span class="stringliteral">&quot;a&quot;</span>));</div>
<div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsUndefined());</div>
<div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;</div>
<div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;    <span class="comment">// Call the Object&#39;s constructor with null.</span></div>
<div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;    Handle&lt;Value&gt; args5[] = { <a class="code" href="../../d2/dc3/namespacev8.html#a2b822c3fdce0fedc6860872e5ebe48ae">v8::Null</a>() };</div>
<div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;    Local&lt;Value&gt; value_obj5 = instance-&gt;CallAsConstructor(1, args5);</div>
<div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value_obj5-&gt;IsObject());</div>
<div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160;    Local&lt;Object&gt; object5 = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">Local&lt;Object&gt;::Cast</a>(value_obj5);</div>
<div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;    value = object5-&gt;Get(v8_str(<span class="stringliteral">&quot;a&quot;</span>));</div>
<div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNull());</div>
<div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;  }</div>
<div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;</div>
<div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;  <span class="comment">// Check exception handling when there is no constructor set for the Object.</span></div>
<div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;  { Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = ObjectTemplate::New();</div>
<div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;    Local&lt;Object&gt; instance = instance_template-&gt;NewInstance();</div>
<div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj2&quot;</span>), instance);</div>
<div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;    Local&lt;Value&gt; value;</div>
<div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;</div>
<div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;new obj2(28)&quot;</span>);</div>
<div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;    String::AsciiValue exception_value1(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;TypeError: object is not a function&quot;</span>, *exception_value1);</div>
<div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;    try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160;</div>
<div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;    Local&lt;Value&gt; args[] = { v8_num(29) };</div>
<div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;    value = instance-&gt;CallAsConstructor(1, args);</div>
<div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;    String::AsciiValue exception_value2(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;TypeError: #&lt;Object&gt; is not a function&quot;</span>, *exception_value2);</div>
<div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;    try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;  }</div>
<div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;</div>
<div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;  <span class="comment">// Check the case when constructor throws exception.</span></div>
<div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160;  { Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = ObjectTemplate::New();</div>
<div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;    instance_template-&gt;SetCallAsFunctionHandler(<a class="code" href="../../de/d3f/test-api_8cc.html#adfce1877d0e64f1cef1610811e6372c9">ThrowValue</a>);</div>
<div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;    Local&lt;Object&gt; instance = instance_template-&gt;NewInstance();</div>
<div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj3&quot;</span>), instance);</div>
<div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08258"></a><span class="lineno"> 8258</span>&#160;    Local&lt;Value&gt; value;</div>
<div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;</div>
<div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;new obj3(22)&quot;</span>);</div>
<div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;    String::AsciiValue exception_value1(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;22&quot;</span>, *exception_value1);</div>
<div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;    try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;</div>
<div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;    Local&lt;Value&gt; args[] = { v8_num(23) };</div>
<div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;    value = instance-&gt;CallAsConstructor(1, args);</div>
<div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;    String::AsciiValue exception_value2(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;23&quot;</span>, *exception_value2);</div>
<div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;    try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;  }</div>
<div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;</div>
<div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;  <span class="comment">// Check whether constructor returns with an object or non-object.</span></div>
<div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;  { Local&lt;FunctionTemplate&gt; function_template =</div>
<div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;        FunctionTemplate::New(FakeConstructorCallback);</div>
<div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;    Local&lt;Function&gt; <span class="keyword">function</span> = function_template-&gt;GetFunction();</div>
<div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160;    Local&lt;Object&gt; instance1 = <span class="keyword">function</span>;</div>
<div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj4&quot;</span>), instance1);</div>
<div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160;    Local&lt;Value&gt; value;</div>
<div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;</div>
<div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance1-&gt;IsObject());</div>
<div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance1-&gt;IsFunction());</div>
<div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;</div>
<div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;new obj4(28)&quot;</span>);</div>
<div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsObject());</div>
<div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;</div>
<div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;    Local&lt;Value&gt; args1[] = { v8_num(28) };</div>
<div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160;    value = instance1-&gt;CallAsConstructor(1, args1);</div>
<div class="line"><a name="l08294"></a><span class="lineno"> 8294</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsObject());</div>
<div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160;</div>
<div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;    Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = ObjectTemplate::New();</div>
<div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160;    instance_template-&gt;SetCallAsFunctionHandler(FakeConstructorCallback);</div>
<div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;    Local&lt;Object&gt; instance2 = instance_template-&gt;NewInstance();</div>
<div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj5&quot;</span>), instance2);</div>
<div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;</div>
<div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance2-&gt;IsObject());</div>
<div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance2-&gt;IsFunction());</div>
<div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;</div>
<div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;new obj5(28)&quot;</span>);</div>
<div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!value-&gt;IsObject());</div>
<div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;</div>
<div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;    Local&lt;Value&gt; args2[] = { v8_num(28) };</div>
<div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160;    value = instance2-&gt;CallAsConstructor(1, args2);</div>
<div class="line"><a name="l08312"></a><span class="lineno"> 8312</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!value-&gt;IsObject());</div>
<div class="line"><a name="l08314"></a><span class="lineno"> 8314</span>&#160;  }</div>
<div class="line"><a name="l08315"></a><span class="lineno"> 8315</span>&#160;}</div>
<div class="line"><a name="l08316"></a><span class="lineno"> 8316</span>&#160;</div>
<div class="line"><a name="l08317"></a><span class="lineno"> 8317</span>&#160;</div>
<div class="line"><a name="l08318"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa10e8406192e1bfaf1da72d8821a980f"> 8318</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionDescriptorException) {</div>
<div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;  Local&lt;v8::FunctionTemplate&gt; templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;  templ-&gt;SetClassName(v8_str(<span class="stringliteral">&quot;Fun&quot;</span>));</div>
<div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;  Local&lt;Function&gt; cons = templ-&gt;GetFunction();</div>
<div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Fun&quot;</span>), cons);</div>
<div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160;  Local&lt;Value&gt; value = CompileRun(</div>
<div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;    <span class="stringliteral">&quot;function test() {&quot;</span></div>
<div class="line"><a name="l08327"></a><span class="lineno"> 8327</span>&#160;    <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;    <span class="stringliteral">&quot;    (new Fun()).blah()&quot;</span></div>
<div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;    <span class="stringliteral">&quot;  } catch (e) {&quot;</span></div>
<div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;    <span class="stringliteral">&quot;    var str = String(e);&quot;</span></div>
<div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;    <span class="stringliteral">&quot;    if (str.indexOf(&#39;TypeError&#39;) == -1) return 1;&quot;</span></div>
<div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;    <span class="stringliteral">&quot;    if (str.indexOf(&#39;[object Fun]&#39;) != -1) return 2;&quot;</span></div>
<div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160;    <span class="stringliteral">&quot;    if (str.indexOf(&#39;#&lt;Fun&gt;&#39;) == -1) return 3;&quot;</span></div>
<div class="line"><a name="l08334"></a><span class="lineno"> 8334</span>&#160;    <span class="stringliteral">&quot;    return 0;&quot;</span></div>
<div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;    <span class="stringliteral">&quot;  return 4;&quot;</span></div>
<div class="line"><a name="l08337"></a><span class="lineno"> 8337</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160;    <span class="stringliteral">&quot;test();&quot;</span>);</div>
<div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, value-&gt;Int32Value());</div>
<div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160;}</div>
<div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160;</div>
<div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;</div>
<div class="line"><a name="l08343"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac952e314cb774354de46b318fb5041b4"> 8343</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(EvalAliasedDynamic) {</div>
<div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> current;</div>
<div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;</div>
<div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;  <span class="comment">// Tests where aliased eval can only be resolved dynamically.</span></div>
<div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160;  Local&lt;Script&gt; script =</div>
<div class="line"><a name="l08349"></a><span class="lineno"> 8349</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;function f(x) { &quot;</span></div>
<div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160;                             <span class="stringliteral">&quot;  var foo = 2;&quot;</span></div>
<div class="line"><a name="l08351"></a><span class="lineno"> 8351</span>&#160;                             <span class="stringliteral">&quot;  with (x) { return eval(&#39;foo&#39;); }&quot;</span></div>
<div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;                             <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;                             <span class="stringliteral">&quot;foo = 0;&quot;</span></div>
<div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;                             <span class="stringliteral">&quot;result1 = f(new Object());&quot;</span></div>
<div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;                             <span class="stringliteral">&quot;result2 = f(this);&quot;</span></div>
<div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;                             <span class="stringliteral">&quot;var x = new Object();&quot;</span></div>
<div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;                             <span class="stringliteral">&quot;x.eval = function(x) { return 1; };&quot;</span></div>
<div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;                             <span class="stringliteral">&quot;result3 = f(x);&quot;</span>));</div>
<div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result1&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l08361"></a><span class="lineno"> 8361</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result2&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result3&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;</div>
<div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160;  script =</div>
<div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;    Script::Compile(v8_str(<span class="stringliteral">&quot;function f(x) { &quot;</span></div>
<div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160;                           <span class="stringliteral">&quot;  var bar = 2;&quot;</span></div>
<div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;                           <span class="stringliteral">&quot;  with (x) { return eval(&#39;bar&#39;); }&quot;</span></div>
<div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;                           <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;                           <span class="stringliteral">&quot;result4 = f(this)&quot;</span>));</div>
<div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.HasCaught());</div>
<div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result4&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;</div>
<div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160;}</div>
<div class="line"><a name="l08377"></a><span class="lineno"> 8377</span>&#160;</div>
<div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160;</div>
<div class="line"><a name="l08379"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae23a182d3e018675ffe313ad01530e81"> 8379</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CrossEval) {</div>
<div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> other;</div>
<div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> current;</div>
<div class="line"><a name="l08383"></a><span class="lineno"> 8383</span>&#160;</div>
<div class="line"><a name="l08384"></a><span class="lineno"> 8384</span>&#160;  Local&lt;String&gt; token = v8_str(<span class="stringliteral">&quot;&lt;security token&gt;&quot;</span>);</div>
<div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160;  other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(token);</div>
<div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;  current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(token);</div>
<div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;</div>
<div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;  <span class="comment">// Set up reference from current to other.</span></div>
<div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160;  current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;other&quot;</span>), other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>());</div>
<div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;</div>
<div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;  <span class="comment">// Check that new variables are introduced in other context.</span></div>
<div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;  Local&lt;Script&gt; script =</div>
<div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;other.eval(&#39;var foo = 1234&#39;)&quot;</span>));</div>
<div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l08395"></a><span class="lineno"> 8395</span>&#160;  Local&lt;Value&gt; <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> = other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l08396"></a><span class="lineno"> 8396</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, foo-&gt;Int32Value());</div>
<div class="line"><a name="l08397"></a><span class="lineno"> 8397</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Has(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l08398"></a><span class="lineno"> 8398</span>&#160;</div>
<div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;  <span class="comment">// Check that writing to non-existing properties introduces them in</span></div>
<div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;  <span class="comment">// the other context.</span></div>
<div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160;  script =</div>
<div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;other.eval(&#39;na = 1234&#39;)&quot;</span>));</div>
<div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;na&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Has(v8_str(<span class="stringliteral">&quot;na&quot;</span>)));</div>
<div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;</div>
<div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160;  <span class="comment">// Check that global variables in current context are not visible in other</span></div>
<div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;  <span class="comment">// context.</span></div>
<div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;  script =</div>
<div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;var bar = 42; other.eval(&#39;bar&#39;);&quot;</span>));</div>
<div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;  Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;</div>
<div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;  <span class="comment">// Check that local variables in current context are not visible in other</span></div>
<div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;  <span class="comment">// context.</span></div>
<div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;  script =</div>
<div class="line"><a name="l08419"></a><span class="lineno"> 8419</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;(function() { &quot;</span></div>
<div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;                             <span class="stringliteral">&quot;  var baz = 87;&quot;</span></div>
<div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;                             <span class="stringliteral">&quot;  return other.eval(&#39;baz&#39;);&quot;</span></div>
<div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;                             <span class="stringliteral">&quot;})();&quot;</span>));</div>
<div class="line"><a name="l08423"></a><span class="lineno"> 8423</span>&#160;  result = script-&gt;Run();</div>
<div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160;</div>
<div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;  <span class="comment">// Check that global variables in the other environment are visible</span></div>
<div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;  <span class="comment">// when evaluting code.</span></div>
<div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;  other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;bis&quot;</span>), v8_num(1234));</div>
<div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;  script = Script::Compile(v8_str(<span class="stringliteral">&quot;other.eval(&#39;bis&#39;)&quot;</span>));</div>
<div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.HasCaught());</div>
<div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;</div>
<div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;  <span class="comment">// Check that the &#39;this&#39; pointer points to the global object evaluating</span></div>
<div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;  <span class="comment">// code.</span></div>
<div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160;  other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;t&quot;</span>), other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>());</div>
<div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160;  script = Script::Compile(v8_str(<span class="stringliteral">&quot;other.eval(&#39;this == t&#39;)&quot;</span>));</div>
<div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160;  result = script-&gt;Run();</div>
<div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsTrue());</div>
<div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.HasCaught());</div>
<div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;</div>
<div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;  <span class="comment">// Check that variables introduced in with-statement are not visible in</span></div>
<div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;  <span class="comment">// other context.</span></div>
<div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;  script =</div>
<div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;with({x:2}){other.eval(&#39;x&#39;)}&quot;</span>));</div>
<div class="line"><a name="l08446"></a><span class="lineno"> 8446</span>&#160;  result = script-&gt;Run();</div>
<div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;</div>
<div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160;  <span class="comment">// Check that you cannot use &#39;eval.call&#39; with another object than the</span></div>
<div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;  <span class="comment">// current global object.</span></div>
<div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;  script =</div>
<div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;other.y = 1; eval.call(other, &#39;y&#39;)&quot;</span>));</div>
<div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;  result = script-&gt;Run();</div>
<div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;}</div>
<div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;</div>
<div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;</div>
<div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160;<span class="comment">// Test that calling eval in a context which has been detached from</span></div>
<div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;<span class="comment">// its global throws an exception.  This behavior is consistent with</span></div>
<div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;<span class="comment">// other JavaScript implementations.</span></div>
<div class="line"><a name="l08462"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aabaae0b56eb44f4728f406084a0e8509"> 8462</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(EvalInDetachedGlobal) {</div>
<div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;</div>
<div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New();</div>
<div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;</div>
<div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;  <span class="comment">// Set up function in context0 that uses eval from context0.</span></div>
<div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> fun =</div>
<div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160;      CompileRun(<span class="stringliteral">&quot;var x = 42;&quot;</span></div>
<div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;                 <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;                 <span class="stringliteral">&quot;  var e = eval;&quot;</span></div>
<div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;                 <span class="stringliteral">&quot;  return function(s) { return e(s); }&quot;</span></div>
<div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;                 <span class="stringliteral">&quot;})()&quot;</span>);</div>
<div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;</div>
<div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;  <span class="comment">// Put the function into context1 and call it before and after</span></div>
<div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160;  <span class="comment">// detaching the global.  Before detaching, the call succeeds and</span></div>
<div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;  <span class="comment">// after detaching and exception is thrown.</span></div>
<div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;  context1-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;fun&quot;</span>), fun);</div>
<div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> x_value = CompileRun(<span class="stringliteral">&quot;fun(&#39;x&#39;)&quot;</span>);</div>
<div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, x_value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160;  context0-&gt;DetachGlobal();</div>
<div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> catcher;</div>
<div class="line"><a name="l08487"></a><span class="lineno"> 8487</span>&#160;  x_value = CompileRun(<span class="stringliteral">&quot;fun(&#39;x&#39;)&quot;</span>);</div>
<div class="line"><a name="l08488"></a><span class="lineno"> 8488</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(x_value.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l08489"></a><span class="lineno"> 8489</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(catcher.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160;</div>
<div class="line"><a name="l08492"></a><span class="lineno"> 8492</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l08493"></a><span class="lineno"> 8493</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;}</div>
<div class="line"><a name="l08495"></a><span class="lineno"> 8495</span>&#160;</div>
<div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160;</div>
<div class="line"><a name="l08497"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2b9d5b3b5fbea5b1e06d5bbb3055d668"> 8497</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CrossLazyLoad) {</div>
<div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> other;</div>
<div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> current;</div>
<div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160;</div>
<div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;  Local&lt;String&gt; token = v8_str(<span class="stringliteral">&quot;&lt;security token&gt;&quot;</span>);</div>
<div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;  other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(token);</div>
<div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;  current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(token);</div>
<div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;</div>
<div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160;  <span class="comment">// Set up reference from current to other.</span></div>
<div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;  current-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;other&quot;</span>), other-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>());</div>
<div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;</div>
<div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;  <span class="comment">// Trigger lazy loading in other context.</span></div>
<div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;  Local&lt;Script&gt; script =</div>
<div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;      Script::Compile(v8_str(<span class="stringliteral">&quot;other.eval(&#39;new Date(42)&#39;)&quot;</span>));</div>
<div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160;  Local&lt;Value&gt; value = script-&gt;Run();</div>
<div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42.0, value-&gt;NumberValue());</div>
<div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;}</div>
<div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;</div>
<div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;</div>
<div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> call_as_function(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l08518"></a><span class="lineno"> 8518</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;  <span class="keywordflow">if</span> (args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a24d4f90132218b046a309a142ed3f5b2">IsConstructCall</a>()) {</div>
<div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;    <span class="keywordflow">if</span> (args[0]-&gt;IsInt32()) {</div>
<div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;       <span class="keywordflow">return</span> v8_num(-args[0]-&gt;Int32Value());</div>
<div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;    }</div>
<div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;  }</div>
<div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160;</div>
<div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;  <span class="keywordflow">return</span> args[0];</div>
<div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;}</div>
<div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;</div>
<div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;</div>
<div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;<span class="comment">// Test that a call handler can be set for objects which will allow</span></div>
<div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;<span class="comment">// non-function objects created through the API to be called as</span></div>
<div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;<span class="comment">// functions.</span></div>
<div class="line"><a name="l08532"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1affea63bdb48a280a3338994fbbabb2"> 8532</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallAsFunction) {</div>
<div class="line"><a name="l08533"></a><span class="lineno"> 8533</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;</div>
<div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;  { Local&lt;v8::FunctionTemplate&gt; t = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;    Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = t-&gt;InstanceTemplate();</div>
<div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;    instance_template-&gt;SetCallAsFunctionHandler(call_as_function);</div>
<div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;    Local&lt;v8::Object&gt; instance = t-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), instance);</div>
<div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160;    Local&lt;Value&gt; value;</div>
<div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;</div>
<div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;obj(42)&quot;</span>);</div>
<div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;</div>
<div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;(function(o){return o(49)})(obj)&quot;</span>);</div>
<div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(49, value-&gt;Int32Value());</div>
<div class="line"><a name="l08552"></a><span class="lineno"> 8552</span>&#160;</div>
<div class="line"><a name="l08553"></a><span class="lineno"> 8553</span>&#160;    <span class="comment">// test special case of call as function</span></div>
<div class="line"><a name="l08554"></a><span class="lineno"> 8554</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;[obj][&#39;0&#39;](45)&quot;</span>);</div>
<div class="line"><a name="l08555"></a><span class="lineno"> 8555</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08556"></a><span class="lineno"> 8556</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(45, value-&gt;Int32Value());</div>
<div class="line"><a name="l08557"></a><span class="lineno"> 8557</span>&#160;</div>
<div class="line"><a name="l08558"></a><span class="lineno"> 8558</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;obj.call = Function.prototype.call;&quot;</span></div>
<div class="line"><a name="l08559"></a><span class="lineno"> 8559</span>&#160;                       <span class="stringliteral">&quot;obj.call(null, 87)&quot;</span>);</div>
<div class="line"><a name="l08560"></a><span class="lineno"> 8560</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(87, value-&gt;Int32Value());</div>
<div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160;</div>
<div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;    <span class="comment">// Regression tests for bug #1116356: Calling call through call/apply</span></div>
<div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;    <span class="comment">// must work for non-function receivers.</span></div>
<div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* apply_99 = <span class="stringliteral">&quot;Function.prototype.call.apply(obj, [this, 99])&quot;</span>;</div>
<div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;    value = CompileRun(apply_99);</div>
<div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(99, value-&gt;Int32Value());</div>
<div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;</div>
<div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* call_17 = <span class="stringliteral">&quot;Function.prototype.call.call(obj, this, 17)&quot;</span>;</div>
<div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;    value = CompileRun(call_17);</div>
<div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08573"></a><span class="lineno"> 8573</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(17, value-&gt;Int32Value());</div>
<div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;</div>
<div class="line"><a name="l08575"></a><span class="lineno"> 8575</span>&#160;    <span class="comment">// Check that the call-as-function handler can be called through</span></div>
<div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;    <span class="comment">// new.</span></div>
<div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;new obj(43)&quot;</span>);</div>
<div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-43, value-&gt;Int32Value());</div>
<div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;</div>
<div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;    <span class="comment">// Check that the call-as-function handler can be called through</span></div>
<div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160;    <span class="comment">// the API.</span></div>
<div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args[] = { v8_num(28) };</div>
<div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;    value = instance-&gt;CallAsFunction(instance, 1, args);</div>
<div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, value-&gt;Int32Value());</div>
<div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;  }</div>
<div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;</div>
<div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;  { Local&lt;v8::FunctionTemplate&gt; t = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160;    Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a>(t-&gt;InstanceTemplate());</div>
<div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160;    USE(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a>);</div>
<div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;    Local&lt;v8::Object&gt; instance = t-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj2&quot;</span>), instance);</div>
<div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;    Local&lt;Value&gt; value;</div>
<div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;</div>
<div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;    <span class="comment">// Call an object without call-as-function handler through the JS</span></div>
<div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;obj2(28)&quot;</span>);</div>
<div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value.IsEmpty());</div>
<div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;    String::AsciiValue exception_value1(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;TypeError: Property &#39;obj2&#39; of object #&lt;Object&gt; is not a function&quot;</span>,</div>
<div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;             *exception_value1);</div>
<div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;    try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160;</div>
<div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160;    <span class="comment">// Call an object without call-as-function handler through the API</span></div>
<div class="line"><a name="l08608"></a><span class="lineno"> 8608</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;obj2(28)&quot;</span>);</div>
<div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args[] = { v8_num(28) };</div>
<div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160;    value = instance-&gt;CallAsFunction(instance, 1, args);</div>
<div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value.IsEmpty());</div>
<div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;    String::AsciiValue exception_value2(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;TypeError: [object Object] is not a function&quot;</span>, *exception_value2);</div>
<div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;    try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;  }</div>
<div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160;</div>
<div class="line"><a name="l08618"></a><span class="lineno"> 8618</span>&#160;  { Local&lt;v8::FunctionTemplate&gt; t = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160;    Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = t-&gt;InstanceTemplate();</div>
<div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;    instance_template-&gt;SetCallAsFunctionHandler(<a class="code" href="../../de/d3f/test-api_8cc.html#adfce1877d0e64f1cef1610811e6372c9">ThrowValue</a>);</div>
<div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;    Local&lt;v8::Object&gt; instance = t-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj3&quot;</span>), instance);</div>
<div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;    Local&lt;Value&gt; value;</div>
<div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;</div>
<div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;    <span class="comment">// Catch the exception which is thrown by call-as-function handler</span></div>
<div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;    value = CompileRun(<span class="stringliteral">&quot;obj3(22)&quot;</span>);</div>
<div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;    String::AsciiValue exception_value1(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;22&quot;</span>, *exception_value1);</div>
<div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160;    try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160;</div>
<div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args[] = { v8_num(23) };</div>
<div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;    value = instance-&gt;CallAsFunction(instance, 1, args);</div>
<div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;    String::AsciiValue exception_value2(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;23&quot;</span>, *exception_value2);</div>
<div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;    try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;  }</div>
<div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160;}</div>
<div class="line"><a name="l08642"></a><span class="lineno"> 8642</span>&#160;</div>
<div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;</div>
<div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;<span class="comment">// Check whether a non-function object is callable.</span></div>
<div class="line"><a name="l08645"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a98e18d96963e2a07b36d445d14e99139"> 8645</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallableObject) {</div>
<div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160;</div>
<div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;  { Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = ObjectTemplate::New();</div>
<div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;    instance_template-&gt;SetCallAsFunctionHandler(call_as_function);</div>
<div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;    Local&lt;Object&gt; instance = instance_template-&gt;NewInstance();</div>
<div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;</div>
<div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;IsCallable());</div>
<div class="line"><a name="l08655"></a><span class="lineno"> 8655</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;  }</div>
<div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160;</div>
<div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;  { Local&lt;ObjectTemplate&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">instance_template</a> = ObjectTemplate::New();</div>
<div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160;    Local&lt;Object&gt; instance = instance_template-&gt;NewInstance();</div>
<div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160;</div>
<div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;IsCallable());</div>
<div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;  }</div>
<div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;</div>
<div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;  { Local&lt;FunctionTemplate&gt; function_template =</div>
<div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;        FunctionTemplate::New(call_as_function);</div>
<div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;    Local&lt;Function&gt; <span class="keyword">function</span> = function_template-&gt;GetFunction();</div>
<div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;    Local&lt;Object&gt; instance = <span class="keyword">function</span>;</div>
<div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;</div>
<div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;IsCallable());</div>
<div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;  }</div>
<div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;</div>
<div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160;  { Local&lt;FunctionTemplate&gt; function_template = FunctionTemplate::New();</div>
<div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160;    Local&lt;Function&gt; <span class="keyword">function</span> = function_template-&gt;GetFunction();</div>
<div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;    Local&lt;Object&gt; instance = <span class="keyword">function</span>;</div>
<div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160;</div>
<div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;IsCallable());</div>
<div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;  }</div>
<div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;}</div>
<div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;</div>
<div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;</div>
<div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> CountHandles() {</div>
<div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html#ab5f7f87f945f118b2e14c3f7d68881ab">v8::HandleScope::NumberOfHandles</a>();</div>
<div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;}</div>
<div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;</div>
<div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;</div>
<div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> Recurse(<span class="keywordtype">int</span> depth, <span class="keywordtype">int</span> iterations) {</div>
<div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;  <span class="keywordflow">if</span> (depth == 0) <span class="keywordflow">return</span> CountHandles();</div>
<div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; iterations; i++) {</div>
<div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;    Local&lt;v8::Number&gt; n(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;  }</div>
<div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;  <span class="keywordflow">return</span> Recurse(depth - 1, iterations);</div>
<div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;}</div>
<div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160;</div>
<div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;</div>
<div class="line"><a name="l08702"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a759a131f130390fbcaa472f46f0cafeb"> 8702</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(HandleIteration) {</div>
<div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kIterations = 500;</div>
<div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNesting = 200;</div>
<div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, CountHandles());</div>
<div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;  {</div>
<div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope1;</div>
<div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, CountHandles());</div>
<div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kIterations; i++) {</div>
<div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;      Local&lt;v8::Number&gt; n(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(i + 1, CountHandles());</div>
<div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;    }</div>
<div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;</div>
<div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(kIterations, CountHandles());</div>
<div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;    {</div>
<div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;      <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope2;</div>
<div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; kIterations; j++) {</div>
<div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160;        Local&lt;v8::Number&gt; n(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42));</div>
<div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(j + 1 + kIterations, CountHandles());</div>
<div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160;      }</div>
<div class="line"><a name="l08721"></a><span class="lineno"> 8721</span>&#160;    }</div>
<div class="line"><a name="l08722"></a><span class="lineno"> 8722</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(kIterations, CountHandles());</div>
<div class="line"><a name="l08723"></a><span class="lineno"> 8723</span>&#160;  }</div>
<div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, CountHandles());</div>
<div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(kNesting * kIterations, Recurse(kNesting, kIterations));</div>
<div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;}</div>
<div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;</div>
<div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;</div>
<div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorHasOwnPropertyGetter(</div>
<div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;    Local&lt;String&gt; name,</div>
<div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;}</div>
<div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160;</div>
<div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160;</div>
<div class="line"><a name="l08737"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5144990c44de62d01bd7bca42d75dead"> 8737</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorHasOwnProperty) {</div>
<div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;  Local&lt;v8::ObjectTemplate&gt; instance_templ = fun_templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;  instance_templ-&gt;SetNamedPropertyHandler(InterceptorHasOwnPropertyGetter);</div>
<div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;  Local&lt;Function&gt; <span class="keyword">function</span> = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;constructor&quot;</span>), <span class="keyword">function</span>);</div>
<div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;      <span class="stringliteral">&quot;var o = new constructor();&quot;</span></div>
<div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;      <span class="stringliteral">&quot;o.hasOwnProperty(&#39;ostehaps&#39;);&quot;</span>);</div>
<div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">BooleanValue</a>());</div>
<div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;  value = CompileRun(</div>
<div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;      <span class="stringliteral">&quot;o.ostehaps = 42;&quot;</span></div>
<div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;      <span class="stringliteral">&quot;o.hasOwnProperty(&#39;ostehaps&#39;);&quot;</span>);</div>
<div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, value-&gt;BooleanValue());</div>
<div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160;  value = CompileRun(</div>
<div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;      <span class="stringliteral">&quot;var p = new constructor();&quot;</span></div>
<div class="line"><a name="l08755"></a><span class="lineno"> 8755</span>&#160;      <span class="stringliteral">&quot;p.hasOwnProperty(&#39;ostehaps&#39;);&quot;</span>);</div>
<div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, value-&gt;BooleanValue());</div>
<div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160;}</div>
<div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160;</div>
<div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;</div>
<div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorHasOwnPropertyGetterGC(</div>
<div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160;    Local&lt;String&gt; name,</div>
<div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160;}</div>
<div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;</div>
<div class="line"><a name="l08768"></a><span class="lineno"> 8768</span>&#160;</div>
<div class="line"><a name="l08769"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad0c1e2bbfe93f73b2e1fc11bb8dfdf5a"> 8769</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorHasOwnPropertyCausingGC) {</div>
<div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;  Local&lt;v8::ObjectTemplate&gt; instance_templ = fun_templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160;  instance_templ-&gt;SetNamedPropertyHandler(InterceptorHasOwnPropertyGetterGC);</div>
<div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160;  Local&lt;Function&gt; <span class="keyword">function</span> = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;constructor&quot;</span>), <span class="keyword">function</span>);</div>
<div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160;  <span class="comment">// Let&#39;s first make some stuff so we can be sure to get a good GC.</span></div>
<div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160;  CompileRun(</div>
<div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160;      <span class="stringliteral">&quot;function makestr(size) {&quot;</span></div>
<div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;      <span class="stringliteral">&quot;  switch (size) {&quot;</span></div>
<div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160;      <span class="stringliteral">&quot;    case 1: return &#39;f&#39;;&quot;</span></div>
<div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;      <span class="stringliteral">&quot;    case 2: return &#39;fo&#39;;&quot;</span></div>
<div class="line"><a name="l08783"></a><span class="lineno"> 8783</span>&#160;      <span class="stringliteral">&quot;    case 3: return &#39;foo&#39;;&quot;</span></div>
<div class="line"><a name="l08784"></a><span class="lineno"> 8784</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l08785"></a><span class="lineno"> 8785</span>&#160;      <span class="stringliteral">&quot;  return makestr(size &gt;&gt; 1) + makestr((size + 1) &gt;&gt; 1);&quot;</span></div>
<div class="line"><a name="l08786"></a><span class="lineno"> 8786</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160;      <span class="stringliteral">&quot;var x = makestr(12345);&quot;</span></div>
<div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;      <span class="stringliteral">&quot;x = makestr(31415);&quot;</span></div>
<div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160;      <span class="stringliteral">&quot;x = makestr(23456);&quot;</span>);</div>
<div class="line"><a name="l08790"></a><span class="lineno"> 8790</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160;      <span class="stringliteral">&quot;var o = new constructor();&quot;</span></div>
<div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;      <span class="stringliteral">&quot;o.__proto__ = new String(x);&quot;</span></div>
<div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160;      <span class="stringliteral">&quot;o.hasOwnProperty(&#39;ostehaps&#39;);&quot;</span>);</div>
<div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">BooleanValue</a>());</div>
<div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;}</div>
<div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;</div>
<div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;</div>
<div class="line"><a name="l08798"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aec84a86b4ffa5df2aa90fd3d785528b7"> 8798</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> (*NamedPropertyGetter)(Local&lt;String&gt; property,</div>
<div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;                                                 <span class="keyword">const</span> AccessorInfo&amp; info);</div>
<div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;</div>
<div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;</div>
<div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckInterceptorLoadIC(<a class="code" href="../../de/d3f/test-api_8cc.html#aec84a86b4ffa5df2aa90fd3d785528b7">NamedPropertyGetter</a> getter,</div>
<div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span>* source,</div>
<div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;                                   <span class="keywordtype">int</span> expected) {</div>
<div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(getter, 0, 0, 0, 0, v8_str(<span class="stringliteral">&quot;data&quot;</span>));</div>
<div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(source);</div>
<div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;}</div>
<div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;</div>
<div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;</div>
<div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorLoadICGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;                                                 <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(isolate, info.GetIsolate());</div>
<div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;data&quot;</span>), info.Data());</div>
<div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), name);</div>
<div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42);</div>
<div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;}</div>
<div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;</div>
<div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;</div>
<div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;<span class="comment">// This test should hit the load IC for the interceptor case.</span></div>
<div class="line"><a name="l08827"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7db9abd1ed83b66240ea8a8f9fe43189"> 8827</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadIC) {</div>
<div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadICGetter,</div>
<div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;    <span class="stringliteral">&quot;  result = o.x;&quot;</span></div>
<div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>,</div>
<div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160;    42);</div>
<div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;}</div>
<div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;</div>
<div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;</div>
<div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;<span class="comment">// Below go several tests which verify that JITing for various</span></div>
<div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;<span class="comment">// configurations of interceptor and explicit fields works fine</span></div>
<div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;<span class="comment">// (those cases are special cased to get better performance).</span></div>
<div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;</div>
<div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorLoadXICGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;                                                 <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;  <span class="keywordflow">return</span> v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name)</div>
<div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;      ? <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42) : v8::Handle&lt;v8::Value&gt;();</div>
<div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;}</div>
<div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160;</div>
<div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;</div>
<div class="line"><a name="l08849"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a77806ddecc084483454b8b0851d0c8e6"> 8849</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICWithFieldOnHolder) {</div>
<div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadXICGetter,</div>
<div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;    <span class="stringliteral">&quot;o.y = 239;&quot;</span></div>
<div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;    <span class="stringliteral">&quot;  result = o.y;&quot;</span></div>
<div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>,</div>
<div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;    239);</div>
<div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;}</div>
<div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;</div>
<div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;</div>
<div class="line"><a name="l08860"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aaceed626b2b0e87836cdb6698a81f452"> 8860</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICWithSubstitutedProto) {</div>
<div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadXICGetter,</div>
<div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = { &#39;y&#39;: 239 };&quot;</span></div>
<div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;    <span class="stringliteral">&quot;  result = o.y + o.x;&quot;</span></div>
<div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>,</div>
<div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;    239 + 42);</div>
<div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;}</div>
<div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;</div>
<div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;</div>
<div class="line"><a name="l08871"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a619654119354b006925330d25dea5b22"> 8871</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICWithPropertyOnProto) {</div>
<div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadXICGetter,</div>
<div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;    <span class="stringliteral">&quot;o.__proto__.y = 239;&quot;</span></div>
<div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;    <span class="stringliteral">&quot;  result = o.y + o.x;&quot;</span></div>
<div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>,</div>
<div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;    239 + 42);</div>
<div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160;}</div>
<div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;</div>
<div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160;</div>
<div class="line"><a name="l08882"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2f2242151340378c46762b30e2bb4018"> 8882</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICUndefined) {</div>
<div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadXICGetter,</div>
<div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;    <span class="stringliteral">&quot;  result = (o.y == undefined) ? 239 : 42;&quot;</span></div>
<div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>,</div>
<div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160;    239);</div>
<div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;}</div>
<div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;</div>
<div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;</div>
<div class="line"><a name="l08892"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a784efe019e81dcf9f6a8900805842e9e"> 8892</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICWithOverride) {</div>
<div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadXICGetter,</div>
<div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;    <span class="stringliteral">&quot;fst = new Object();  fst.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;    <span class="stringliteral">&quot;snd = new Object();  snd.__proto__ = fst;&quot;</span></div>
<div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160;    <span class="stringliteral">&quot;var result1 = 0;&quot;</span></div>
<div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000;  i++) {&quot;</span></div>
<div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160;    <span class="stringliteral">&quot;  result1 = snd.x;&quot;</span></div>
<div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08900"></a><span class="lineno"> 8900</span>&#160;    <span class="stringliteral">&quot;fst.x = 239;&quot;</span></div>
<div class="line"><a name="l08901"></a><span class="lineno"> 8901</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08902"></a><span class="lineno"> 8902</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08903"></a><span class="lineno"> 8903</span>&#160;    <span class="stringliteral">&quot;  result = snd.x;&quot;</span></div>
<div class="line"><a name="l08904"></a><span class="lineno"> 8904</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08905"></a><span class="lineno"> 8905</span>&#160;    <span class="stringliteral">&quot;result + result1&quot;</span>,</div>
<div class="line"><a name="l08906"></a><span class="lineno"> 8906</span>&#160;    239 + 42);</div>
<div class="line"><a name="l08907"></a><span class="lineno"> 8907</span>&#160;}</div>
<div class="line"><a name="l08908"></a><span class="lineno"> 8908</span>&#160;</div>
<div class="line"><a name="l08909"></a><span class="lineno"> 8909</span>&#160;</div>
<div class="line"><a name="l08910"></a><span class="lineno"> 8910</span>&#160;<span class="comment">// Test the case when we stored field into</span></div>
<div class="line"><a name="l08911"></a><span class="lineno"> 8911</span>&#160;<span class="comment">// a stub, but interceptor produced value on its own.</span></div>
<div class="line"><a name="l08912"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a51d0ac2a45f43faa1665835cf36bb1ab"> 8912</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICFieldNotNeeded) {</div>
<div class="line"><a name="l08913"></a><span class="lineno"> 8913</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadXICGetter,</div>
<div class="line"><a name="l08914"></a><span class="lineno"> 8914</span>&#160;    <span class="stringliteral">&quot;proto = new Object();&quot;</span></div>
<div class="line"><a name="l08915"></a><span class="lineno"> 8915</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto;&quot;</span></div>
<div class="line"><a name="l08916"></a><span class="lineno"> 8916</span>&#160;    <span class="stringliteral">&quot;proto.x = 239;&quot;</span></div>
<div class="line"><a name="l08917"></a><span class="lineno"> 8917</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08918"></a><span class="lineno"> 8918</span>&#160;    <span class="stringliteral">&quot;  o.x;&quot;</span></div>
<div class="line"><a name="l08919"></a><span class="lineno"> 8919</span>&#160;    <span class="comment">// Now it should be ICed and keep a reference to x defined on proto</span></div>
<div class="line"><a name="l08920"></a><span class="lineno"> 8920</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08921"></a><span class="lineno"> 8921</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08922"></a><span class="lineno"> 8922</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08923"></a><span class="lineno"> 8923</span>&#160;    <span class="stringliteral">&quot;  result += o.x;&quot;</span></div>
<div class="line"><a name="l08924"></a><span class="lineno"> 8924</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08925"></a><span class="lineno"> 8925</span>&#160;    <span class="stringliteral">&quot;result;&quot;</span>,</div>
<div class="line"><a name="l08926"></a><span class="lineno"> 8926</span>&#160;    42 * 1000);</div>
<div class="line"><a name="l08927"></a><span class="lineno"> 8927</span>&#160;}</div>
<div class="line"><a name="l08928"></a><span class="lineno"> 8928</span>&#160;</div>
<div class="line"><a name="l08929"></a><span class="lineno"> 8929</span>&#160;</div>
<div class="line"><a name="l08930"></a><span class="lineno"> 8930</span>&#160;<span class="comment">// Test the case when we stored field into</span></div>
<div class="line"><a name="l08931"></a><span class="lineno"> 8931</span>&#160;<span class="comment">// a stub, but it got invalidated later on.</span></div>
<div class="line"><a name="l08932"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a26c685443e79f81c20d81ec573012c8e"> 8932</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICInvalidatedField) {</div>
<div class="line"><a name="l08933"></a><span class="lineno"> 8933</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadXICGetter,</div>
<div class="line"><a name="l08934"></a><span class="lineno"> 8934</span>&#160;    <span class="stringliteral">&quot;proto1 = new Object();&quot;</span></div>
<div class="line"><a name="l08935"></a><span class="lineno"> 8935</span>&#160;    <span class="stringliteral">&quot;proto2 = new Object();&quot;</span></div>
<div class="line"><a name="l08936"></a><span class="lineno"> 8936</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto1;&quot;</span></div>
<div class="line"><a name="l08937"></a><span class="lineno"> 8937</span>&#160;    <span class="stringliteral">&quot;proto1.__proto__ = proto2;&quot;</span></div>
<div class="line"><a name="l08938"></a><span class="lineno"> 8938</span>&#160;    <span class="stringliteral">&quot;proto2.y = 239;&quot;</span></div>
<div class="line"><a name="l08939"></a><span class="lineno"> 8939</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08940"></a><span class="lineno"> 8940</span>&#160;    <span class="stringliteral">&quot;  o.y;&quot;</span></div>
<div class="line"><a name="l08941"></a><span class="lineno"> 8941</span>&#160;    <span class="comment">// Now it should be ICed and keep a reference to y defined on proto2</span></div>
<div class="line"><a name="l08942"></a><span class="lineno"> 8942</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08943"></a><span class="lineno"> 8943</span>&#160;    <span class="stringliteral">&quot;proto1.y = 42;&quot;</span></div>
<div class="line"><a name="l08944"></a><span class="lineno"> 8944</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160;    <span class="stringliteral">&quot;  result += o.y;&quot;</span></div>
<div class="line"><a name="l08947"></a><span class="lineno"> 8947</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;    <span class="stringliteral">&quot;result;&quot;</span>,</div>
<div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;    42 * 1000);</div>
<div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160;}</div>
<div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160;</div>
<div class="line"><a name="l08952"></a><span class="lineno"> 8952</span>&#160;</div>
<div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> interceptor_load_not_handled_calls = 0;</div>
<div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorLoadNotHandled(Local&lt;String&gt; name,</div>
<div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160;                                                   <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;  ++interceptor_load_not_handled_calls;</div>
<div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a>();</div>
<div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;}</div>
<div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;</div>
<div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160;</div>
<div class="line"><a name="l08961"></a><span class="lineno"> 8961</span>&#160;<span class="comment">// Test how post-interceptor lookups are done in the non-cacheable</span></div>
<div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160;<span class="comment">// case: the interceptor should not be invoked during this lookup.</span></div>
<div class="line"><a name="l08963"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acccf78ff28a57978941e084cf73c4e0c"> 8963</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICPostInterceptor) {</div>
<div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;  interceptor_load_not_handled_calls = 0;</div>
<div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadNotHandled,</div>
<div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;    <span class="stringliteral">&quot;receiver = new Object();&quot;</span></div>
<div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;    <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;    <span class="stringliteral">&quot;proto = new Object();&quot;</span></div>
<div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;    <span class="stringliteral">&quot;/* Make proto a slow-case object. */&quot;</span></div>
<div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;    <span class="stringliteral">&quot;  proto[\&quot;xxxxxxxx\&quot; + i] = [];&quot;</span></div>
<div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;    <span class="stringliteral">&quot;proto.x = 17;&quot;</span></div>
<div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto;&quot;</span></div>
<div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;    <span class="stringliteral">&quot;  result += receiver.x;&quot;</span></div>
<div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160;    <span class="stringliteral">&quot;result;&quot;</span>,</div>
<div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;    17 * 1000);</div>
<div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1000, interceptor_load_not_handled_calls);</div>
<div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;}</div>
<div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;</div>
<div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;</div>
<div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160;<span class="comment">// Test the case when we stored field into</span></div>
<div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;<span class="comment">// a stub, but it got invalidated later on due to override on</span></div>
<div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;<span class="comment">// global object which is between interceptor and fields&#39; holders.</span></div>
<div class="line"><a name="l08988"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a31aed36e56dbb7c05c81cb6460728992"> 8988</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICInvalidatedFieldViaGlobal) {</div>
<div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadXICGetter,</div>
<div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = this;&quot;</span>  <span class="comment">// set a global to be a proto of o.</span></div>
<div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;    <span class="stringliteral">&quot;this.__proto__.y = 239;&quot;</span></div>
<div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;    <span class="stringliteral">&quot;  if (o.y != 239) throw &#39;oops: &#39; + o.y;&quot;</span></div>
<div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;    <span class="comment">// Now it should be ICed and keep a reference to y defined on field_holder.</span></div>
<div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;    <span class="stringliteral">&quot;this.y = 42;&quot;</span>  <span class="comment">// Assign on a global.</span></div>
<div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;    <span class="stringliteral">&quot;  result += o.y;&quot;</span></div>
<div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;    <span class="stringliteral">&quot;result;&quot;</span>,</div>
<div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;    42 * 10);</div>
<div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;}</div>
<div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;</div>
<div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;</div>
<div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SetOnThis(Local&lt;String&gt; name,</div>
<div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;                      Local&lt;Value&gt; value,</div>
<div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;                      <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160;  info.This()-&gt;ForceSet(name, value);</div>
<div class="line"><a name="l09010"></a><span class="lineno"> 9010</span>&#160;}</div>
<div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160;</div>
<div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;</div>
<div class="line"><a name="l09013"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8fc86a864291fca2d30140c01bfd862f"> 9013</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICWithCallbackOnHolder) {</div>
<div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorLoadXICGetter);</div>
<div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), Return239);</div>
<div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160;</div>
<div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160;  <span class="comment">// Check the case when receiver and interceptor&#39;s holder</span></div>
<div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;  <span class="comment">// are the same objects.</span></div>
<div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160;      <span class="stringliteral">&quot;  result = o.y;&quot;</span></div>
<div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;</div>
<div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160;  <span class="comment">// Check the case when interceptor&#39;s holder is in proto chain</span></div>
<div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;  <span class="comment">// of receiver.</span></div>
<div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160;  value = CompileRun(</div>
<div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160;      <span class="stringliteral">&quot;r = { __proto__: o };&quot;</span></div>
<div class="line"><a name="l09034"></a><span class="lineno"> 9034</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160;      <span class="stringliteral">&quot;  result = r.y;&quot;</span></div>
<div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239, value-&gt;Int32Value());</div>
<div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;}</div>
<div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;</div>
<div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160;</div>
<div class="line"><a name="l09042"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3cc831027b8d3b8f0358a0d9fe54ae6e"> 9042</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICWithCallbackOnProto) {</div>
<div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_o = ObjectTemplate::New();</div>
<div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;  templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorLoadXICGetter);</div>
<div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_p = ObjectTemplate::New();</div>
<div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;  templ_p-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), Return239);</div>
<div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160;</div>
<div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;p&quot;</span>), templ_p-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;</div>
<div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;  <span class="comment">// Check the case when receiver and interceptor&#39;s holder</span></div>
<div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;  <span class="comment">// are the same objects.</span></div>
<div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;      <span class="stringliteral">&quot;o.__proto__ = p;&quot;</span></div>
<div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;      <span class="stringliteral">&quot;  result = o.x + o.y;&quot;</span></div>
<div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239 + 42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;</div>
<div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;  <span class="comment">// Check the case when interceptor&#39;s holder is in proto chain</span></div>
<div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;  <span class="comment">// of receiver.</span></div>
<div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;  value = CompileRun(</div>
<div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;      <span class="stringliteral">&quot;r = { __proto__: o };&quot;</span></div>
<div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;      <span class="stringliteral">&quot;  result = r.x + r.y;&quot;</span></div>
<div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239 + 42, value-&gt;Int32Value());</div>
<div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;}</div>
<div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;</div>
<div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;</div>
<div class="line"><a name="l09075"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab0e27e57acca7ceab5e2789c5b23351e"> 9075</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICForCallbackWithOverride) {</div>
<div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorLoadXICGetter);</div>
<div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), Return239);</div>
<div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;</div>
<div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160;</div>
<div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;    <span class="stringliteral">&quot;fst = new Object();  fst.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;    <span class="stringliteral">&quot;snd = new Object();  snd.__proto__ = fst;&quot;</span></div>
<div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;    <span class="stringliteral">&quot;var result1 = 0;&quot;</span></div>
<div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7;  i++) {&quot;</span></div>
<div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;    <span class="stringliteral">&quot;  result1 = snd.x;&quot;</span></div>
<div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;    <span class="stringliteral">&quot;fst.x = 239;&quot;</span></div>
<div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;    <span class="stringliteral">&quot;  result = snd.x;&quot;</span></div>
<div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;    <span class="stringliteral">&quot;result + result1&quot;</span>);</div>
<div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239 + 42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;}</div>
<div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;</div>
<div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;</div>
<div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;<span class="comment">// Test the case when we stored callback into</span></div>
<div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;<span class="comment">// a stub, but interceptor produced value on its own.</span></div>
<div class="line"><a name="l09103"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a533215564399dc6e5909416e967bd9ee"> 9103</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICCallbackNotNeeded) {</div>
<div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09105"></a><span class="lineno"> 9105</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_o = ObjectTemplate::New();</div>
<div class="line"><a name="l09106"></a><span class="lineno"> 9106</span>&#160;  templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorLoadXICGetter);</div>
<div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_p = ObjectTemplate::New();</div>
<div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;  templ_p-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), Return239);</div>
<div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;</div>
<div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;p&quot;</span>), templ_p-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;</div>
<div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = p;&quot;</span></div>
<div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;    <span class="stringliteral">&quot;  o.x;&quot;</span></div>
<div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;    <span class="comment">// Now it should be ICed and keep a reference to x defined on p</span></div>
<div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;    <span class="stringliteral">&quot;  result += o.x;&quot;</span></div>
<div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160;    <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l09125"></a><span class="lineno"> 9125</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42 * 7, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;}</div>
<div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;</div>
<div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;</div>
<div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160;<span class="comment">// Test the case when we stored callback into</span></div>
<div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;<span class="comment">// a stub, but it got invalidated later on.</span></div>
<div class="line"><a name="l09131"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a995fc5d4f5f00bb5b97b8530b5235dd5"> 9131</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICInvalidatedCallback) {</div>
<div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_o = ObjectTemplate::New();</div>
<div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;  templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorLoadXICGetter);</div>
<div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_p = ObjectTemplate::New();</div>
<div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;  templ_p-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), Return239, SetOnThis);</div>
<div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160;</div>
<div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;p&quot;</span>), templ_p-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;</div>
<div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160;    <span class="stringliteral">&quot;inbetween = new Object();&quot;</span></div>
<div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = inbetween;&quot;</span></div>
<div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160;    <span class="stringliteral">&quot;inbetween.__proto__ = p;&quot;</span></div>
<div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;    <span class="stringliteral">&quot;  o.y;&quot;</span></div>
<div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;    <span class="comment">// Now it should be ICed and keep a reference to y defined on p</span></div>
<div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;    <span class="stringliteral">&quot;inbetween.y = 42;&quot;</span></div>
<div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160;    <span class="stringliteral">&quot;  result += o.y;&quot;</span></div>
<div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;    <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42 * 10, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;}</div>
<div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;</div>
<div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;</div>
<div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;<span class="comment">// Test the case when we stored callback into</span></div>
<div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;<span class="comment">// a stub, but it got invalidated later on due to override on</span></div>
<div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;<span class="comment">// global object which is between interceptor and callbacks&#39; holders.</span></div>
<div class="line"><a name="l09163"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a09f8ad760d7fe9cdec3521c63f01083d"> 9163</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorLoadICInvalidatedCallbackViaGlobal) {</div>
<div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_o = ObjectTemplate::New();</div>
<div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;  templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorLoadXICGetter);</div>
<div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_p = ObjectTemplate::New();</div>
<div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;  templ_p-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), Return239, SetOnThis);</div>
<div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;</div>
<div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;p&quot;</span>), templ_p-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;</div>
<div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = this;&quot;</span></div>
<div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;    <span class="stringliteral">&quot;this.__proto__ = p;&quot;</span></div>
<div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160;    <span class="stringliteral">&quot;  if (o.y != 239) throw &#39;oops: &#39; + o.y;&quot;</span></div>
<div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;    <span class="comment">// Now it should be ICed and keep a reference to y defined on p</span></div>
<div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;    <span class="stringliteral">&quot;this.y = 42;&quot;</span></div>
<div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;    <span class="stringliteral">&quot;  result += o.y;&quot;</span></div>
<div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;    <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42 * 10, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;}</div>
<div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160;</div>
<div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;</div>
<div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorLoadICGetter0(Local&lt;String&gt; name,</div>
<div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;                                                  <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name));</div>
<div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0);</div>
<div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;}</div>
<div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;</div>
<div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;</div>
<div class="line"><a name="l09199"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9fe572a5569acce955244db88ac1577d"> 9199</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorReturningZero) {</div>
<div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;  CheckInterceptorLoadIC(InterceptorLoadICGetter0,</div>
<div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;     <span class="stringliteral">&quot;o.x == undefined ? 1 : 0&quot;</span>,</div>
<div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160;     0);</div>
<div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;}</div>
<div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;</div>
<div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;</div>
<div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorStoreICSetter(</div>
<div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;    Local&lt;String&gt; key, Local&lt;Value&gt; value, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(key));</div>
<div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;  <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;}</div>
<div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;</div>
<div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160;</div>
<div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;<span class="comment">// This test should hit the store IC for the interceptor case.</span></div>
<div class="line"><a name="l09215"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afed96759aded50a2abcb0b2eac489a0f"> 9215</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorStoreIC) {</div>
<div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorLoadICGetter,</div>
<div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;                                 InterceptorStoreICSetter,</div>
<div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;                                 0, 0, 0, v8_str(<span class="stringliteral">&quot;data&quot;</span>));</div>
<div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09224"></a><span class="lineno"> 9224</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l09225"></a><span class="lineno"> 9225</span>&#160;      <span class="stringliteral">&quot;  o.x = 42;&quot;</span></div>
<div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;}</div>
<div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;</div>
<div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;</div>
<div class="line"><a name="l09230"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a14a98ee80ba67fc339d90fdf892878f5"> 9230</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorStoreICWithNoSetter) {</div>
<div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorLoadXICGetter);</div>
<div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;    <span class="stringliteral">&quot;  o.y = 239;&quot;</span></div>
<div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160;    <span class="stringliteral">&quot;42 + o.y&quot;</span>);</div>
<div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239 + 42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;}</div>
<div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160;</div>
<div class="line"><a name="l09244"></a><span class="lineno"> 9244</span>&#160;</div>
<div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;</div>
<div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;</div>
<div class="line"><a name="l09247"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac556072dce9a92c1f996885a0f0195f6"> 9247</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#ac556072dce9a92c1f996885a0f0195f6">call_ic_function</a>;</div>
<div class="line"><a name="l09248"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6c4f588fe2a7272c6c769aa2af688250"> 9248</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a6c4f588fe2a7272c6c769aa2af688250">call_ic_function2</a>;</div>
<div class="line"><a name="l09249"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a605b65d61829aa91bf519237260b0af0"> 9249</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a605b65d61829aa91bf519237260b0af0">call_ic_function3</a>;</div>
<div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;</div>
<div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorCallICGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;                                                 <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name));</div>
<div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ac556072dce9a92c1f996885a0f0195f6">call_ic_function</a>;</div>
<div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;}</div>
<div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;</div>
<div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;</div>
<div class="line"><a name="l09259"></a><span class="lineno"> 9259</span>&#160;<span class="comment">// This test should hit the call IC for the interceptor case.</span></div>
<div class="line"><a name="l09260"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ade63d958c40dbb72f425dfb8b3be361e"> 9260</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallIC) {</div>
<div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICGetter);</div>
<div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;  call_ic_function =</div>
<div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160;      v8_compile(<span class="stringliteral">&quot;function f(x) { return x + 1; }; f&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l09268"></a><span class="lineno"> 9268</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160;    <span class="stringliteral">&quot;  result = o.x(41);&quot;</span></div>
<div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160;}</div>
<div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160;</div>
<div class="line"><a name="l09276"></a><span class="lineno"> 9276</span>&#160;</div>
<div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160;<span class="comment">// This test checks that if interceptor doesn&#39;t provide</span></div>
<div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;<span class="comment">// a value, we can fetch regular value.</span></div>
<div class="line"><a name="l09279"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0100b999e656f5e03967a009548d69fc"> 9279</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICSeesOthers) {</div>
<div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160;    <span class="stringliteral">&quot;o.x = function f(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09289"></a><span class="lineno"> 9289</span>&#160;    <span class="stringliteral">&quot;  result = o.x(41);&quot;</span></div>
<div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160;}</div>
<div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;</div>
<div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;</div>
<div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> call_ic_function4;</div>
<div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorCallICGetter4(Local&lt;String&gt; name,</div>
<div class="line"><a name="l09297"></a><span class="lineno"> 9297</span>&#160;                                                  <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name));</div>
<div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;  <span class="keywordflow">return</span> call_ic_function4;</div>
<div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160;}</div>
<div class="line"><a name="l09302"></a><span class="lineno"> 9302</span>&#160;</div>
<div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160;</div>
<div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;<span class="comment">// This test checks that if interceptor provides a function,</span></div>
<div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;<span class="comment">// even if we cached shadowed variant, interceptor&#39;s function</span></div>
<div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;<span class="comment">// is invoked</span></div>
<div class="line"><a name="l09307"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#adb935d35358825db4f93aa06fc49648b"> 9307</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICCacheableNotNeeded) {</div>
<div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICGetter4);</div>
<div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160;  call_ic_function4 =</div>
<div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160;      v8_compile(<span class="stringliteral">&quot;function f(x) { return x - 1; }; f&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160;    <span class="stringliteral">&quot;o.__proto__.x = function(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09318"></a><span class="lineno"> 9318</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;    <span class="stringliteral">&quot;  result = o.x(42);&quot;</span></div>
<div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(41, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160;}</div>
<div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160;</div>
<div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;</div>
<div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160;<span class="comment">// Test the case when we stored cacheable lookup into</span></div>
<div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;<span class="comment">// a stub, but it got invalidated later on</span></div>
<div class="line"><a name="l09327"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0d8e90fcedc2a528194f58c7fb2f0f6b"> 9327</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICInvalidatedCacheable) {</div>
<div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;    <span class="stringliteral">&quot;proto1 = new Object();&quot;</span></div>
<div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160;    <span class="stringliteral">&quot;proto2 = new Object();&quot;</span></div>
<div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto1;&quot;</span></div>
<div class="line"><a name="l09337"></a><span class="lineno"> 9337</span>&#160;    <span class="stringliteral">&quot;proto1.__proto__ = proto2;&quot;</span></div>
<div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;    <span class="stringliteral">&quot;proto2.y = function(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;    <span class="comment">// Invoke it many times to compile a stub</span></div>
<div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;    <span class="stringliteral">&quot;  o.y(42);&quot;</span></div>
<div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;    <span class="stringliteral">&quot;proto1.y = function(x) { return x - 1; };&quot;</span></div>
<div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;    <span class="stringliteral">&quot;  result += o.y(42);&quot;</span></div>
<div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(41 * 7, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;}</div>
<div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;</div>
<div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;</div>
<div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;<span class="comment">// This test checks that if interceptor doesn&#39;t provide a function,</span></div>
<div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;<span class="comment">// cached constant function is used</span></div>
<div class="line"><a name="l09354"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa63673297bf06b32cc63ed7493f5be8b"> 9354</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICConstantFunctionUsed) {</div>
<div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;    <span class="stringliteral">&quot;function inc(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;    <span class="stringliteral">&quot;inc(1);&quot;</span></div>
<div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160;    <span class="stringliteral">&quot;o.x = inc;&quot;</span></div>
<div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;    <span class="stringliteral">&quot;  result = o.x(42);&quot;</span></div>
<div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(43, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;}</div>
<div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;</div>
<div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160;</div>
<div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> call_ic_function5;</div>
<div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorCallICGetter5(Local&lt;String&gt; name,</div>
<div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;                                                  <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;  <span class="keywordflow">if</span> (v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name))</div>
<div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;    <span class="keywordflow">return</span> call_ic_function5;</div>
<div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;    <span class="keywordflow">return</span> Local&lt;Value&gt;();</div>
<div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;}</div>
<div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;</div>
<div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;</div>
<div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;<span class="comment">// This test checks that if interceptor provides a function,</span></div>
<div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;<span class="comment">// even if we cached constant function, interceptor&#39;s function</span></div>
<div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;<span class="comment">// is invoked</span></div>
<div class="line"><a name="l09386"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a85d9d32fc0f8da887a38c60ad064d1f7"> 9386</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICConstantFunctionNotNeeded) {</div>
<div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICGetter5);</div>
<div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;  call_ic_function5 =</div>
<div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;      v8_compile(<span class="stringliteral">&quot;function f(x) { return x - 1; }; f&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;    <span class="stringliteral">&quot;function inc(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;    <span class="stringliteral">&quot;inc(1);&quot;</span></div>
<div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;    <span class="stringliteral">&quot;o.x = inc;&quot;</span></div>
<div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160;    <span class="stringliteral">&quot;  result = o.x(42);&quot;</span></div>
<div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(41, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;}</div>
<div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160;</div>
<div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;</div>
<div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> call_ic_function6;</div>
<div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorCallICGetter6(Local&lt;String&gt; name,</div>
<div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;                                                  <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160;  <span class="keywordflow">if</span> (v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name))</div>
<div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;    <span class="keywordflow">return</span> call_ic_function6;</div>
<div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;    <span class="keywordflow">return</span> Local&lt;Value&gt;();</div>
<div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160;}</div>
<div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;</div>
<div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;</div>
<div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;<span class="comment">// Same test as above, except the code is wrapped in a function</span></div>
<div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;<span class="comment">// to test the optimized compiler.</span></div>
<div class="line"><a name="l09419"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a468588bc2f7b28264e72656891f02001"> 9419</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICConstantFunctionNotNeededWrapped) {</div>
<div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICGetter6);</div>
<div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;  call_ic_function6 =</div>
<div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;      v8_compile(<span class="stringliteral">&quot;function f(x) { return x - 1; }; f&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160;    <span class="stringliteral">&quot;function inc(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;    <span class="stringliteral">&quot;inc(1);&quot;</span></div>
<div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;    <span class="stringliteral">&quot;o.x = inc;&quot;</span></div>
<div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;    <span class="stringliteral">&quot;function test() {&quot;</span></div>
<div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160;    <span class="stringliteral">&quot;  var result = 0;&quot;</span></div>
<div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;    <span class="stringliteral">&quot;    result = o.x(42);&quot;</span></div>
<div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;    <span class="stringliteral">&quot;  return result;&quot;</span></div>
<div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;    <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160;    <span class="stringliteral">&quot;test();&quot;</span></div>
<div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;    <span class="stringliteral">&quot;test();&quot;</span></div>
<div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;    <span class="stringliteral">&quot;test();&quot;</span></div>
<div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;    <span class="stringliteral">&quot;%OptimizeFunctionOnNextCall(test);&quot;</span></div>
<div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;    <span class="stringliteral">&quot;test()&quot;</span>);</div>
<div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(41, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160;}</div>
<div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;</div>
<div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;</div>
<div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;<span class="comment">// Test the case when we stored constant function into</span></div>
<div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;<span class="comment">// a stub, but it got invalidated later on</span></div>
<div class="line"><a name="l09450"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a379ed931a1a91312b6d0454c3de406e5"> 9450</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICInvalidatedConstantFunction) {</div>
<div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;    <span class="stringliteral">&quot;function inc(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;    <span class="stringliteral">&quot;inc(1);&quot;</span></div>
<div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160;    <span class="stringliteral">&quot;proto1 = new Object();&quot;</span></div>
<div class="line"><a name="l09460"></a><span class="lineno"> 9460</span>&#160;    <span class="stringliteral">&quot;proto2 = new Object();&quot;</span></div>
<div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto1;&quot;</span></div>
<div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;    <span class="stringliteral">&quot;proto1.__proto__ = proto2;&quot;</span></div>
<div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160;    <span class="stringliteral">&quot;proto2.y = inc;&quot;</span></div>
<div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160;    <span class="comment">// Invoke it many times to compile a stub</span></div>
<div class="line"><a name="l09465"></a><span class="lineno"> 9465</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160;    <span class="stringliteral">&quot;  o.y(42);&quot;</span></div>
<div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;    <span class="stringliteral">&quot;proto1.y = function(x) { return x - 1; };&quot;</span></div>
<div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;    <span class="stringliteral">&quot;  result += o.y(42);&quot;</span></div>
<div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(41 * 7, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;}</div>
<div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160;</div>
<div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;</div>
<div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;<span class="comment">// Test the case when we stored constant function into</span></div>
<div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;<span class="comment">// a stub, but it got invalidated later on due to override on</span></div>
<div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;<span class="comment">// global object which is between interceptor and constant function&#39; holders.</span></div>
<div class="line"><a name="l09480"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0b0aa3dee576fc8804bed54f2fdcd579"> 9480</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICInvalidatedConstantFunctionViaGlobal) {</div>
<div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;    <span class="stringliteral">&quot;function inc(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160;    <span class="stringliteral">&quot;inc(1);&quot;</span></div>
<div class="line"><a name="l09489"></a><span class="lineno"> 9489</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = this;&quot;</span></div>
<div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;    <span class="stringliteral">&quot;this.__proto__.y = inc;&quot;</span></div>
<div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160;    <span class="comment">// Invoke it many times to compile a stub</span></div>
<div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;    <span class="stringliteral">&quot;  if (o.y(42) != 43) throw &#39;oops: &#39; + o.y(42);&quot;</span></div>
<div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;    <span class="stringliteral">&quot;this.y = function(x) { return x - 1; };&quot;</span></div>
<div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 7; i++) {&quot;</span></div>
<div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;    <span class="stringliteral">&quot;  result += o.y(42);&quot;</span></div>
<div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(41 * 7, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160;}</div>
<div class="line"><a name="l09502"></a><span class="lineno"> 9502</span>&#160;</div>
<div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;</div>
<div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;<span class="comment">// Test the case when actual function to call sits on global object.</span></div>
<div class="line"><a name="l09505"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae044358c4d30c4326521824b29f4338b"> 9505</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICCachedFromGlobal) {</div>
<div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09507"></a><span class="lineno"> 9507</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_o = ObjectTemplate::New();</div>
<div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160;  templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160;</div>
<div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09512"></a><span class="lineno"> 9512</span>&#160;</div>
<div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;    <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;    <span class="stringliteral">&quot;  o.__proto__ = this;&quot;</span></div>
<div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;    <span class="stringliteral">&quot;    var v = o.parseFloat(&#39;239&#39;);&quot;</span></div>
<div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160;    <span class="stringliteral">&quot;    if (v != 239) throw v;&quot;</span></div>
<div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160;      <span class="comment">// Now it should be ICed and keep a reference to parseFloat.</span></div>
<div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09521"></a><span class="lineno"> 9521</span>&#160;    <span class="stringliteral">&quot;  var result = 0;&quot;</span></div>
<div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160;    <span class="stringliteral">&quot;    result += o.parseFloat(&#39;239&#39;);&quot;</span></div>
<div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160;    <span class="stringliteral">&quot;  result&quot;</span></div>
<div class="line"><a name="l09526"></a><span class="lineno"> 9526</span>&#160;    <span class="stringliteral">&quot;} catch(e) {&quot;</span></div>
<div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;    <span class="stringliteral">&quot;  e&quot;</span></div>
<div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;    <span class="stringliteral">&quot;};&quot;</span>);</div>
<div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239 * 10, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;}</div>
<div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160;</div>
<div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorCallICFastApi(Local&lt;String&gt; name,</div>
<div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;                                                  <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160;  <span class="keywordtype">int</span>* <a class="code" href="../../d1/deb/test-thread-termination_8cc.html#a5e0f60888f1d0bb3daf99036125b899a">call_count</a> = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">int</span>*<span class="keyword">&gt;</span>(<a class="code" href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a>(info.Data()));</div>
<div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;  ++(*call_count);</div>
<div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;  <span class="keywordflow">if</span> ((*call_count) % 20 == 0) {</div>
<div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;  }</div>
<div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;}</div>
<div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;</div>
<div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> FastApiCallback_TrivialSignature(</div>
<div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(isolate, args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#ac3f173d8c461c065f8d6bd01aea4e450">GetIsolate</a>());</div>
<div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>(), args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a2a24da997322cb518c30467a10a54582">Holder</a>());</div>
<div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a1ce111e30d6e5e8be601b45725d9142d">Data</a>()-&gt;Equals(v8_str(<span class="stringliteral">&quot;method_data&quot;</span>)));</div>
<div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(args[0]-&gt;Int32Value() + 1);</div>
<div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;}</div>
<div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;</div>
<div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> FastApiCallback_SimpleSignature(</div>
<div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(isolate, args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#ac3f173d8c461c065f8d6bd01aea4e450">GetIsolate</a>());</div>
<div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">This</a>()-&gt;GetPrototype(), args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a2a24da997322cb518c30467a10a54582">Holder</a>());</div>
<div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a1ce111e30d6e5e8be601b45725d9142d">Data</a>()-&gt;Equals(v8_str(<span class="stringliteral">&quot;method_data&quot;</span>)));</div>
<div class="line"><a name="l09560"></a><span class="lineno"> 9560</span>&#160;  <span class="comment">// Note, we&#39;re using HasRealNamedProperty instead of Has to avoid</span></div>
<div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;  <span class="comment">// invoking the interceptor again.</span></div>
<div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a2a24da997322cb518c30467a10a54582">Holder</a>()-&gt;HasRealNamedProperty(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(args[0]-&gt;Int32Value() + 1);</div>
<div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;}</div>
<div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;</div>
<div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;<span class="comment">// Helper to maximize the odds of object moving.</span></div>
<div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> GenerateSomeGarbage() {</div>
<div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;      <span class="stringliteral">&quot;var garbage;&quot;</span></div>
<div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;      <span class="stringliteral">&quot;  garbage = [1/i, \&quot;garbage\&quot; + i, garbage, {foo: garbage}];&quot;</span></div>
<div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;      <span class="stringliteral">&quot;garbage = undefined;&quot;</span>);</div>
<div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;}</div>
<div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;</div>
<div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;</div>
<div class="line"><a name="l09577"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad73855e701ea4502ecb164456481fe73"> 9577</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#ad73855e701ea4502ecb164456481fe73">DirectApiCallback</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l09578"></a><span class="lineno"> 9578</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;  <span class="keywordflow">if</span> (count++ % 3 == 0) {</div>
<div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160;        <span class="comment">// This should move the stub</span></div>
<div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;    GenerateSomeGarbage();  <span class="comment">// This should ensure the old stub memory is flushed</span></div>
<div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;  }</div>
<div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a>();</div>
<div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;}</div>
<div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160;</div>
<div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;</div>
<div class="line"><a name="l09588"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a52db27b075f0126ca41dbb19a99a862d"> 9588</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallICFastApi_DirectCall_GCMoveStub) {</div>
<div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> nativeobject_templ = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;  nativeobject_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(<span class="stringliteral">&quot;callback&quot;</span>,</div>
<div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;                          <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#ad73855e701ea4502ecb164456481fe73">DirectApiCallback</a>));</div>
<div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> nativeobject_obj = nativeobject_templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;nativeobject&quot;</span>), nativeobject_obj);</div>
<div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;  <span class="comment">// call the api function multiple times to ensure direct call stub creation.</span></div>
<div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;        <span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;        <span class="stringliteral">&quot;  for (var i = 1; i &lt;= 30; i++) {&quot;</span></div>
<div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160;        <span class="stringliteral">&quot;    nativeobject.callback();&quot;</span></div>
<div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;        <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;        <span class="stringliteral">&quot;f();&quot;</span>);</div>
<div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;}</div>
<div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;</div>
<div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;</div>
<div class="line"><a name="l09607"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af87c7d3bb5fd473c2de44fa64d58a4a2"> 9607</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#af87c7d3bb5fd473c2de44fa64d58a4a2">ThrowingDirectApiCallback</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(v8_str(<span class="stringliteral">&quot;g&quot;</span>));</div>
<div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;}</div>
<div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;</div>
<div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;</div>
<div class="line"><a name="l09612"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9f9eeb5e0567703155c6efada402cbe0"> 9612</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallICFastApi_DirectCall_Throw) {</div>
<div class="line"><a name="l09613"></a><span class="lineno"> 9613</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> nativeobject_templ = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160;  nativeobject_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(<span class="stringliteral">&quot;callback&quot;</span>,</div>
<div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160;                          <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#af87c7d3bb5fd473c2de44fa64d58a4a2">ThrowingDirectApiCallback</a>));</div>
<div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> nativeobject_obj = nativeobject_templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;nativeobject&quot;</span>), nativeobject_obj);</div>
<div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;  <span class="comment">// call the api function multiple times to ensure direct call stub creation.</span></div>
<div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = CompileRun(</div>
<div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160;      <span class="stringliteral">&quot;var result = &#39;&#39;;&quot;</span></div>
<div class="line"><a name="l09623"></a><span class="lineno"> 9623</span>&#160;      <span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160;      <span class="stringliteral">&quot;  for (var i = 1; i &lt;= 5; i++) {&quot;</span></div>
<div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;      <span class="stringliteral">&quot;    try { nativeobject.callback(); } catch (e) { result += e; }&quot;</span></div>
<div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;      <span class="stringliteral">&quot;f(); result;&quot;</span>);</div>
<div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;ggggg&quot;</span>), result);</div>
<div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;}</div>
<div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;</div>
<div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;</div>
<div class="line"><a name="l09633"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a21ff6163c1eebe32997f52d4b23b56ed"> 9633</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a21ff6163c1eebe32997f52d4b23b56ed">DirectGetterCallback</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a>&amp; info) {</div>
<div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;  <span class="keywordflow">if</span> (++p_getter_count % 3 == 0) {</div>
<div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;    GenerateSomeGarbage();</div>
<div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;  }</div>
<div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a>();</div>
<div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;}</div>
<div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;</div>
<div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;</div>
<div class="line"><a name="l09643"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a46f5cb1dcabb08a56d7e9930f1648511"> 9643</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(LoadICFastApi_DirectCall_GCMoveStub) {</div>
<div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;p1&quot;</span>), <a class="code" href="../../de/d3f/test-api_8cc.html#a21ff6163c1eebe32997f52d4b23b56ed">DirectGetterCallback</a>);</div>
<div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o1&quot;</span>), obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;  p_getter_count = 0;</div>
<div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;      <span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 30; i++) o1.p1;&quot;</span></div>
<div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;      <span class="stringliteral">&quot;f();&quot;</span>);</div>
<div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(30, p_getter_count);</div>
<div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160;}</div>
<div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;</div>
<div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;</div>
<div class="line"><a name="l09659"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a574474c90f1bb935aec8b86ca3f820ab"> 9659</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a574474c90f1bb935aec8b86ca3f820ab">ThrowingDirectGetterCallback</a>(</div>
<div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;    Local&lt;String&gt; name, <span class="keyword">const</span> <a class="code" href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a>&amp; info) {</div>
<div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(v8_str(<span class="stringliteral">&quot;g&quot;</span>));</div>
<div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160;}</div>
<div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;</div>
<div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;</div>
<div class="line"><a name="l09665"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9f3bb2c81187056f57e1928a851f73e2"> 9665</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(LoadICFastApi_DirectCall_Throw) {</div>
<div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> obj = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;  obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;p1&quot;</span>), <a class="code" href="../../de/d3f/test-api_8cc.html#a574474c90f1bb935aec8b86ca3f820ab">ThrowingDirectGetterCallback</a>);</div>
<div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o1&quot;</span>), obj-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> result = CompileRun(</div>
<div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160;      <span class="stringliteral">&quot;var result = &#39;&#39;;&quot;</span></div>
<div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 5; i++) {&quot;</span></div>
<div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;      <span class="stringliteral">&quot;    try { o1.p1; } catch (e) { result += e; }&quot;</span></div>
<div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;      <span class="stringliteral">&quot;result;&quot;</span>);</div>
<div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;ggggg&quot;</span>), result);</div>
<div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;}</div>
<div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160;</div>
<div class="line"><a name="l09680"></a><span class="lineno"> 9680</span>&#160;</div>
<div class="line"><a name="l09681"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6dd079c960d00285bdaa8ad2f345dd27"> 9681</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICFastApi_TrivialSignature) {</div>
<div class="line"><a name="l09682"></a><span class="lineno"> 9682</span>&#160;  <span class="keywordtype">int</span> interceptor_call_count = 0;</div>
<div class="line"><a name="l09683"></a><span class="lineno"> 9683</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09684"></a><span class="lineno"> 9684</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09685"></a><span class="lineno"> 9685</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09686"></a><span class="lineno"> 9686</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_TrivialSignature,</div>
<div class="line"><a name="l09687"></a><span class="lineno"> 9687</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09688"></a><span class="lineno"> 9688</span>&#160;                                <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Signature&gt;</a>());</div>
<div class="line"><a name="l09689"></a><span class="lineno"> 9689</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09690"></a><span class="lineno"> 9690</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09691"></a><span class="lineno"> 9691</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>();</div>
<div class="line"><a name="l09692"></a><span class="lineno"> 9692</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICFastApi,</div>
<div class="line"><a name="l09693"></a><span class="lineno"> 9693</span>&#160;                                 <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l09694"></a><span class="lineno"> 9694</span>&#160;                                 <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;interceptor_call_count));</div>
<div class="line"><a name="l09695"></a><span class="lineno"> 9695</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09696"></a><span class="lineno"> 9696</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09697"></a><span class="lineno"> 9697</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09698"></a><span class="lineno"> 9698</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09699"></a><span class="lineno"> 9699</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09700"></a><span class="lineno"> 9700</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09701"></a><span class="lineno"> 9701</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09702"></a><span class="lineno"> 9702</span>&#160;      <span class="stringliteral">&quot;  result = o.method(41);&quot;</span></div>
<div class="line"><a name="l09703"></a><span class="lineno"> 9703</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09704"></a><span class="lineno"> 9704</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09705"></a><span class="lineno"> 9705</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(100, interceptor_call_count);</div>
<div class="line"><a name="l09706"></a><span class="lineno"> 9706</span>&#160;}</div>
<div class="line"><a name="l09707"></a><span class="lineno"> 9707</span>&#160;</div>
<div class="line"><a name="l09708"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a07dca6a5757ae39c5ddf32762f19dd5f"> 9708</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICFastApi_SimpleSignature) {</div>
<div class="line"><a name="l09709"></a><span class="lineno"> 9709</span>&#160;  <span class="keywordtype">int</span> interceptor_call_count = 0;</div>
<div class="line"><a name="l09710"></a><span class="lineno"> 9710</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09711"></a><span class="lineno"> 9711</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09712"></a><span class="lineno"> 9712</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09713"></a><span class="lineno"> 9713</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_SimpleSignature,</div>
<div class="line"><a name="l09714"></a><span class="lineno"> 9714</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09715"></a><span class="lineno"> 9715</span>&#160;                                <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun_templ));</div>
<div class="line"><a name="l09716"></a><span class="lineno"> 9716</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09717"></a><span class="lineno"> 9717</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09718"></a><span class="lineno"> 9718</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>();</div>
<div class="line"><a name="l09719"></a><span class="lineno"> 9719</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICFastApi,</div>
<div class="line"><a name="l09720"></a><span class="lineno"> 9720</span>&#160;                                 <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l09721"></a><span class="lineno"> 9721</span>&#160;                                 <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;interceptor_call_count));</div>
<div class="line"><a name="l09722"></a><span class="lineno"> 9722</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09723"></a><span class="lineno"> 9723</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09724"></a><span class="lineno"> 9724</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09725"></a><span class="lineno"> 9725</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09726"></a><span class="lineno"> 9726</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09727"></a><span class="lineno"> 9727</span>&#160;      <span class="stringliteral">&quot;o.foo = 17;&quot;</span></div>
<div class="line"><a name="l09728"></a><span class="lineno"> 9728</span>&#160;      <span class="stringliteral">&quot;var receiver = {};&quot;</span></div>
<div class="line"><a name="l09729"></a><span class="lineno"> 9729</span>&#160;      <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09730"></a><span class="lineno"> 9730</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09731"></a><span class="lineno"> 9731</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09732"></a><span class="lineno"> 9732</span>&#160;      <span class="stringliteral">&quot;  result = receiver.method(41);&quot;</span></div>
<div class="line"><a name="l09733"></a><span class="lineno"> 9733</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09734"></a><span class="lineno"> 9734</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09735"></a><span class="lineno"> 9735</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(100, interceptor_call_count);</div>
<div class="line"><a name="l09736"></a><span class="lineno"> 9736</span>&#160;}</div>
<div class="line"><a name="l09737"></a><span class="lineno"> 9737</span>&#160;</div>
<div class="line"><a name="l09738"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a943f82292602b43ce837f43ee4688ab6"> 9738</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICFastApi_SimpleSignature_Miss1) {</div>
<div class="line"><a name="l09739"></a><span class="lineno"> 9739</span>&#160;  <span class="keywordtype">int</span> interceptor_call_count = 0;</div>
<div class="line"><a name="l09740"></a><span class="lineno"> 9740</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09741"></a><span class="lineno"> 9741</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09742"></a><span class="lineno"> 9742</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09743"></a><span class="lineno"> 9743</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_SimpleSignature,</div>
<div class="line"><a name="l09744"></a><span class="lineno"> 9744</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09745"></a><span class="lineno"> 9745</span>&#160;                                <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun_templ));</div>
<div class="line"><a name="l09746"></a><span class="lineno"> 9746</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09747"></a><span class="lineno"> 9747</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09748"></a><span class="lineno"> 9748</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>();</div>
<div class="line"><a name="l09749"></a><span class="lineno"> 9749</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICFastApi,</div>
<div class="line"><a name="l09750"></a><span class="lineno"> 9750</span>&#160;                                 <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l09751"></a><span class="lineno"> 9751</span>&#160;                                 <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;interceptor_call_count));</div>
<div class="line"><a name="l09752"></a><span class="lineno"> 9752</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09753"></a><span class="lineno"> 9753</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09754"></a><span class="lineno"> 9754</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09755"></a><span class="lineno"> 9755</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09756"></a><span class="lineno"> 9756</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09757"></a><span class="lineno"> 9757</span>&#160;      <span class="stringliteral">&quot;o.foo = 17;&quot;</span></div>
<div class="line"><a name="l09758"></a><span class="lineno"> 9758</span>&#160;      <span class="stringliteral">&quot;var receiver = {};&quot;</span></div>
<div class="line"><a name="l09759"></a><span class="lineno"> 9759</span>&#160;      <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09760"></a><span class="lineno"> 9760</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09761"></a><span class="lineno"> 9761</span>&#160;      <span class="stringliteral">&quot;var saved_result = 0;&quot;</span></div>
<div class="line"><a name="l09762"></a><span class="lineno"> 9762</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09763"></a><span class="lineno"> 9763</span>&#160;      <span class="stringliteral">&quot;  result = receiver.method(41);&quot;</span></div>
<div class="line"><a name="l09764"></a><span class="lineno"> 9764</span>&#160;      <span class="stringliteral">&quot;  if (i == 50) {&quot;</span></div>
<div class="line"><a name="l09765"></a><span class="lineno"> 9765</span>&#160;      <span class="stringliteral">&quot;    saved_result = result;&quot;</span></div>
<div class="line"><a name="l09766"></a><span class="lineno"> 9766</span>&#160;      <span class="stringliteral">&quot;    receiver = {method: function(x) { return x - 1 }};&quot;</span></div>
<div class="line"><a name="l09767"></a><span class="lineno"> 9767</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09768"></a><span class="lineno"> 9768</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09769"></a><span class="lineno"> 9769</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(40, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09770"></a><span class="lineno"> 9770</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;saved_result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09771"></a><span class="lineno"> 9771</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(interceptor_call_count, 50);</div>
<div class="line"><a name="l09772"></a><span class="lineno"> 9772</span>&#160;}</div>
<div class="line"><a name="l09773"></a><span class="lineno"> 9773</span>&#160;</div>
<div class="line"><a name="l09774"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a59d62dbdbdff1bc28768e4877057da4e"> 9774</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICFastApi_SimpleSignature_Miss2) {</div>
<div class="line"><a name="l09775"></a><span class="lineno"> 9775</span>&#160;  <span class="keywordtype">int</span> interceptor_call_count = 0;</div>
<div class="line"><a name="l09776"></a><span class="lineno"> 9776</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09777"></a><span class="lineno"> 9777</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09778"></a><span class="lineno"> 9778</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09779"></a><span class="lineno"> 9779</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_SimpleSignature,</div>
<div class="line"><a name="l09780"></a><span class="lineno"> 9780</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09781"></a><span class="lineno"> 9781</span>&#160;                                <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun_templ));</div>
<div class="line"><a name="l09782"></a><span class="lineno"> 9782</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09783"></a><span class="lineno"> 9783</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09784"></a><span class="lineno"> 9784</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>();</div>
<div class="line"><a name="l09785"></a><span class="lineno"> 9785</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICFastApi,</div>
<div class="line"><a name="l09786"></a><span class="lineno"> 9786</span>&#160;                                 <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l09787"></a><span class="lineno"> 9787</span>&#160;                                 <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;interceptor_call_count));</div>
<div class="line"><a name="l09788"></a><span class="lineno"> 9788</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09789"></a><span class="lineno"> 9789</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09790"></a><span class="lineno"> 9790</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09791"></a><span class="lineno"> 9791</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09792"></a><span class="lineno"> 9792</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09793"></a><span class="lineno"> 9793</span>&#160;      <span class="stringliteral">&quot;o.foo = 17;&quot;</span></div>
<div class="line"><a name="l09794"></a><span class="lineno"> 9794</span>&#160;      <span class="stringliteral">&quot;var receiver = {};&quot;</span></div>
<div class="line"><a name="l09795"></a><span class="lineno"> 9795</span>&#160;      <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09796"></a><span class="lineno"> 9796</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09797"></a><span class="lineno"> 9797</span>&#160;      <span class="stringliteral">&quot;var saved_result = 0;&quot;</span></div>
<div class="line"><a name="l09798"></a><span class="lineno"> 9798</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09799"></a><span class="lineno"> 9799</span>&#160;      <span class="stringliteral">&quot;  result = receiver.method(41);&quot;</span></div>
<div class="line"><a name="l09800"></a><span class="lineno"> 9800</span>&#160;      <span class="stringliteral">&quot;  if (i == 50) {&quot;</span></div>
<div class="line"><a name="l09801"></a><span class="lineno"> 9801</span>&#160;      <span class="stringliteral">&quot;    saved_result = result;&quot;</span></div>
<div class="line"><a name="l09802"></a><span class="lineno"> 9802</span>&#160;      <span class="stringliteral">&quot;    o.method = function(x) { return x - 1 };&quot;</span></div>
<div class="line"><a name="l09803"></a><span class="lineno"> 9803</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09804"></a><span class="lineno"> 9804</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09805"></a><span class="lineno"> 9805</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(40, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09806"></a><span class="lineno"> 9806</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;saved_result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09807"></a><span class="lineno"> 9807</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(interceptor_call_count, 50);</div>
<div class="line"><a name="l09808"></a><span class="lineno"> 9808</span>&#160;}</div>
<div class="line"><a name="l09809"></a><span class="lineno"> 9809</span>&#160;</div>
<div class="line"><a name="l09810"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acbe193bff60e86e489601082cfa52272"> 9810</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICFastApi_SimpleSignature_Miss3) {</div>
<div class="line"><a name="l09811"></a><span class="lineno"> 9811</span>&#160;  <span class="keywordtype">int</span> interceptor_call_count = 0;</div>
<div class="line"><a name="l09812"></a><span class="lineno"> 9812</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09813"></a><span class="lineno"> 9813</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09814"></a><span class="lineno"> 9814</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09815"></a><span class="lineno"> 9815</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_SimpleSignature,</div>
<div class="line"><a name="l09816"></a><span class="lineno"> 9816</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09817"></a><span class="lineno"> 9817</span>&#160;                                <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun_templ));</div>
<div class="line"><a name="l09818"></a><span class="lineno"> 9818</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09819"></a><span class="lineno"> 9819</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09820"></a><span class="lineno"> 9820</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>();</div>
<div class="line"><a name="l09821"></a><span class="lineno"> 9821</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICFastApi,</div>
<div class="line"><a name="l09822"></a><span class="lineno"> 9822</span>&#160;                                 <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l09823"></a><span class="lineno"> 9823</span>&#160;                                 <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;interceptor_call_count));</div>
<div class="line"><a name="l09824"></a><span class="lineno"> 9824</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09825"></a><span class="lineno"> 9825</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09826"></a><span class="lineno"> 9826</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09827"></a><span class="lineno"> 9827</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09828"></a><span class="lineno"> 9828</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l09829"></a><span class="lineno"> 9829</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09830"></a><span class="lineno"> 9830</span>&#160;      <span class="stringliteral">&quot;o.foo = 17;&quot;</span></div>
<div class="line"><a name="l09831"></a><span class="lineno"> 9831</span>&#160;      <span class="stringliteral">&quot;var receiver = {};&quot;</span></div>
<div class="line"><a name="l09832"></a><span class="lineno"> 9832</span>&#160;      <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09833"></a><span class="lineno"> 9833</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09834"></a><span class="lineno"> 9834</span>&#160;      <span class="stringliteral">&quot;var saved_result = 0;&quot;</span></div>
<div class="line"><a name="l09835"></a><span class="lineno"> 9835</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09836"></a><span class="lineno"> 9836</span>&#160;      <span class="stringliteral">&quot;  result = receiver.method(41);&quot;</span></div>
<div class="line"><a name="l09837"></a><span class="lineno"> 9837</span>&#160;      <span class="stringliteral">&quot;  if (i == 50) {&quot;</span></div>
<div class="line"><a name="l09838"></a><span class="lineno"> 9838</span>&#160;      <span class="stringliteral">&quot;    saved_result = result;&quot;</span></div>
<div class="line"><a name="l09839"></a><span class="lineno"> 9839</span>&#160;      <span class="stringliteral">&quot;    receiver = 333;&quot;</span></div>
<div class="line"><a name="l09840"></a><span class="lineno"> 9840</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09841"></a><span class="lineno"> 9841</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09842"></a><span class="lineno"> 9842</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l09843"></a><span class="lineno"> 9843</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;TypeError: Object 333 has no method &#39;method&#39;&quot;</span>),</div>
<div class="line"><a name="l09844"></a><span class="lineno"> 9844</span>&#160;           try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>()-&gt;ToString());</div>
<div class="line"><a name="l09845"></a><span class="lineno"> 9845</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;saved_result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09846"></a><span class="lineno"> 9846</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(interceptor_call_count, 50);</div>
<div class="line"><a name="l09847"></a><span class="lineno"> 9847</span>&#160;}</div>
<div class="line"><a name="l09848"></a><span class="lineno"> 9848</span>&#160;</div>
<div class="line"><a name="l09849"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aedce13228d9fb18c55510471f012f17d"> 9849</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorCallICFastApi_SimpleSignature_TypeError) {</div>
<div class="line"><a name="l09850"></a><span class="lineno"> 9850</span>&#160;  <span class="keywordtype">int</span> interceptor_call_count = 0;</div>
<div class="line"><a name="l09851"></a><span class="lineno"> 9851</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09852"></a><span class="lineno"> 9852</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09853"></a><span class="lineno"> 9853</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09854"></a><span class="lineno"> 9854</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_SimpleSignature,</div>
<div class="line"><a name="l09855"></a><span class="lineno"> 9855</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09856"></a><span class="lineno"> 9856</span>&#160;                                <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun_templ));</div>
<div class="line"><a name="l09857"></a><span class="lineno"> 9857</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09858"></a><span class="lineno"> 9858</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09859"></a><span class="lineno"> 9859</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>();</div>
<div class="line"><a name="l09860"></a><span class="lineno"> 9860</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorCallICFastApi,</div>
<div class="line"><a name="l09861"></a><span class="lineno"> 9861</span>&#160;                                 <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>,</div>
<div class="line"><a name="l09862"></a><span class="lineno"> 9862</span>&#160;                                 <a class="code" href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a>(&amp;interceptor_call_count));</div>
<div class="line"><a name="l09863"></a><span class="lineno"> 9863</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09864"></a><span class="lineno"> 9864</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09865"></a><span class="lineno"> 9865</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09866"></a><span class="lineno"> 9866</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09867"></a><span class="lineno"> 9867</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l09868"></a><span class="lineno"> 9868</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09869"></a><span class="lineno"> 9869</span>&#160;      <span class="stringliteral">&quot;o.foo = 17;&quot;</span></div>
<div class="line"><a name="l09870"></a><span class="lineno"> 9870</span>&#160;      <span class="stringliteral">&quot;var receiver = {};&quot;</span></div>
<div class="line"><a name="l09871"></a><span class="lineno"> 9871</span>&#160;      <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09872"></a><span class="lineno"> 9872</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09873"></a><span class="lineno"> 9873</span>&#160;      <span class="stringliteral">&quot;var saved_result = 0;&quot;</span></div>
<div class="line"><a name="l09874"></a><span class="lineno"> 9874</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09875"></a><span class="lineno"> 9875</span>&#160;      <span class="stringliteral">&quot;  result = receiver.method(41);&quot;</span></div>
<div class="line"><a name="l09876"></a><span class="lineno"> 9876</span>&#160;      <span class="stringliteral">&quot;  if (i == 50) {&quot;</span></div>
<div class="line"><a name="l09877"></a><span class="lineno"> 9877</span>&#160;      <span class="stringliteral">&quot;    saved_result = result;&quot;</span></div>
<div class="line"><a name="l09878"></a><span class="lineno"> 9878</span>&#160;      <span class="stringliteral">&quot;    receiver = {method: receiver.method};&quot;</span></div>
<div class="line"><a name="l09879"></a><span class="lineno"> 9879</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09880"></a><span class="lineno"> 9880</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09881"></a><span class="lineno"> 9881</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l09882"></a><span class="lineno"> 9882</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;TypeError: Illegal invocation&quot;</span>),</div>
<div class="line"><a name="l09883"></a><span class="lineno"> 9883</span>&#160;           try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>()-&gt;ToString());</div>
<div class="line"><a name="l09884"></a><span class="lineno"> 9884</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;saved_result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09885"></a><span class="lineno"> 9885</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(interceptor_call_count, 50);</div>
<div class="line"><a name="l09886"></a><span class="lineno"> 9886</span>&#160;}</div>
<div class="line"><a name="l09887"></a><span class="lineno"> 9887</span>&#160;</div>
<div class="line"><a name="l09888"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7e06c547e13cecd919eba926ba331506"> 9888</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallICFastApi_TrivialSignature) {</div>
<div class="line"><a name="l09889"></a><span class="lineno"> 9889</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09890"></a><span class="lineno"> 9890</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09891"></a><span class="lineno"> 9891</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09892"></a><span class="lineno"> 9892</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_TrivialSignature,</div>
<div class="line"><a name="l09893"></a><span class="lineno"> 9893</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09894"></a><span class="lineno"> 9894</span>&#160;                                <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Signature&gt;</a>());</div>
<div class="line"><a name="l09895"></a><span class="lineno"> 9895</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09896"></a><span class="lineno"> 9896</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09897"></a><span class="lineno"> 9897</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ(fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>());</div>
<div class="line"><a name="l09898"></a><span class="lineno"> 9898</span>&#160;  USE(templ);</div>
<div class="line"><a name="l09899"></a><span class="lineno"> 9899</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09900"></a><span class="lineno"> 9900</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09901"></a><span class="lineno"> 9901</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09902"></a><span class="lineno"> 9902</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09903"></a><span class="lineno"> 9903</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09904"></a><span class="lineno"> 9904</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09905"></a><span class="lineno"> 9905</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09906"></a><span class="lineno"> 9906</span>&#160;      <span class="stringliteral">&quot;  result = o.method(41);&quot;</span></div>
<div class="line"><a name="l09907"></a><span class="lineno"> 9907</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09908"></a><span class="lineno"> 9908</span>&#160;</div>
<div class="line"><a name="l09909"></a><span class="lineno"> 9909</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09910"></a><span class="lineno"> 9910</span>&#160;}</div>
<div class="line"><a name="l09911"></a><span class="lineno"> 9911</span>&#160;</div>
<div class="line"><a name="l09912"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a723f507a7869032b630c58e731938c42"> 9912</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallICFastApi_SimpleSignature) {</div>
<div class="line"><a name="l09913"></a><span class="lineno"> 9913</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09914"></a><span class="lineno"> 9914</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09915"></a><span class="lineno"> 9915</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09916"></a><span class="lineno"> 9916</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_SimpleSignature,</div>
<div class="line"><a name="l09917"></a><span class="lineno"> 9917</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09918"></a><span class="lineno"> 9918</span>&#160;                                <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun_templ));</div>
<div class="line"><a name="l09919"></a><span class="lineno"> 9919</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09920"></a><span class="lineno"> 9920</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09921"></a><span class="lineno"> 9921</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ(fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>());</div>
<div class="line"><a name="l09922"></a><span class="lineno"> 9922</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!templ.IsEmpty());</div>
<div class="line"><a name="l09923"></a><span class="lineno"> 9923</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09924"></a><span class="lineno"> 9924</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09925"></a><span class="lineno"> 9925</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09926"></a><span class="lineno"> 9926</span>&#160;  context-&gt;Global()-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09927"></a><span class="lineno"> 9927</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09928"></a><span class="lineno"> 9928</span>&#160;      <span class="stringliteral">&quot;o.foo = 17;&quot;</span></div>
<div class="line"><a name="l09929"></a><span class="lineno"> 9929</span>&#160;      <span class="stringliteral">&quot;var receiver = {};&quot;</span></div>
<div class="line"><a name="l09930"></a><span class="lineno"> 9930</span>&#160;      <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09931"></a><span class="lineno"> 9931</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09932"></a><span class="lineno"> 9932</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09933"></a><span class="lineno"> 9933</span>&#160;      <span class="stringliteral">&quot;  result = receiver.method(41);&quot;</span></div>
<div class="line"><a name="l09934"></a><span class="lineno"> 9934</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09935"></a><span class="lineno"> 9935</span>&#160;</div>
<div class="line"><a name="l09936"></a><span class="lineno"> 9936</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09937"></a><span class="lineno"> 9937</span>&#160;}</div>
<div class="line"><a name="l09938"></a><span class="lineno"> 9938</span>&#160;</div>
<div class="line"><a name="l09939"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5efe646de935f86af9534596a36a1f6b"> 9939</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallICFastApi_SimpleSignature_Miss1) {</div>
<div class="line"><a name="l09940"></a><span class="lineno"> 9940</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09941"></a><span class="lineno"> 9941</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09942"></a><span class="lineno"> 9942</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09943"></a><span class="lineno"> 9943</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_SimpleSignature,</div>
<div class="line"><a name="l09944"></a><span class="lineno"> 9944</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09945"></a><span class="lineno"> 9945</span>&#160;                                <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun_templ));</div>
<div class="line"><a name="l09946"></a><span class="lineno"> 9946</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09947"></a><span class="lineno"> 9947</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09948"></a><span class="lineno"> 9948</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ(fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>());</div>
<div class="line"><a name="l09949"></a><span class="lineno"> 9949</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!templ.IsEmpty());</div>
<div class="line"><a name="l09950"></a><span class="lineno"> 9950</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09951"></a><span class="lineno"> 9951</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09952"></a><span class="lineno"> 9952</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09953"></a><span class="lineno"> 9953</span>&#160;  context-&gt;Global()-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09954"></a><span class="lineno"> 9954</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09955"></a><span class="lineno"> 9955</span>&#160;      <span class="stringliteral">&quot;o.foo = 17;&quot;</span></div>
<div class="line"><a name="l09956"></a><span class="lineno"> 9956</span>&#160;      <span class="stringliteral">&quot;var receiver = {};&quot;</span></div>
<div class="line"><a name="l09957"></a><span class="lineno"> 9957</span>&#160;      <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09958"></a><span class="lineno"> 9958</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09959"></a><span class="lineno"> 9959</span>&#160;      <span class="stringliteral">&quot;var saved_result = 0;&quot;</span></div>
<div class="line"><a name="l09960"></a><span class="lineno"> 9960</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09961"></a><span class="lineno"> 9961</span>&#160;      <span class="stringliteral">&quot;  result = receiver.method(41);&quot;</span></div>
<div class="line"><a name="l09962"></a><span class="lineno"> 9962</span>&#160;      <span class="stringliteral">&quot;  if (i == 50) {&quot;</span></div>
<div class="line"><a name="l09963"></a><span class="lineno"> 9963</span>&#160;      <span class="stringliteral">&quot;    saved_result = result;&quot;</span></div>
<div class="line"><a name="l09964"></a><span class="lineno"> 9964</span>&#160;      <span class="stringliteral">&quot;    receiver = {method: function(x) { return x - 1 }};&quot;</span></div>
<div class="line"><a name="l09965"></a><span class="lineno"> 9965</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09966"></a><span class="lineno"> 9966</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l09967"></a><span class="lineno"> 9967</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(40, context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09968"></a><span class="lineno"> 9968</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;saved_result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l09969"></a><span class="lineno"> 9969</span>&#160;}</div>
<div class="line"><a name="l09970"></a><span class="lineno"> 9970</span>&#160;</div>
<div class="line"><a name="l09971"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3ab017879e02441ac53374eeed650336"> 9971</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallICFastApi_SimpleSignature_Miss2) {</div>
<div class="line"><a name="l09972"></a><span class="lineno"> 9972</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l09973"></a><span class="lineno"> 9973</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l09974"></a><span class="lineno"> 9974</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> method_templ =</div>
<div class="line"><a name="l09975"></a><span class="lineno"> 9975</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FastApiCallback_SimpleSignature,</div>
<div class="line"><a name="l09976"></a><span class="lineno"> 9976</span>&#160;                                v8_str(<span class="stringliteral">&quot;method_data&quot;</span>),</div>
<div class="line"><a name="l09977"></a><span class="lineno"> 9977</span>&#160;                                <a class="code" href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a>(fun_templ));</div>
<div class="line"><a name="l09978"></a><span class="lineno"> 9978</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> proto_templ = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">PrototypeTemplate</a>();</div>
<div class="line"><a name="l09979"></a><span class="lineno"> 9979</span>&#160;  proto_templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;method&quot;</span>), method_templ);</div>
<div class="line"><a name="l09980"></a><span class="lineno"> 9980</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ(fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>());</div>
<div class="line"><a name="l09981"></a><span class="lineno"> 9981</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!templ.IsEmpty());</div>
<div class="line"><a name="l09982"></a><span class="lineno"> 9982</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l09983"></a><span class="lineno"> 9983</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> fun = fun_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>();</div>
<div class="line"><a name="l09984"></a><span class="lineno"> 9984</span>&#160;  GenerateSomeGarbage();</div>
<div class="line"><a name="l09985"></a><span class="lineno"> 9985</span>&#160;  context-&gt;Global()-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(v8_str(<span class="stringliteral">&quot;o&quot;</span>), fun-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">NewInstance</a>());</div>
<div class="line"><a name="l09986"></a><span class="lineno"> 9986</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l09987"></a><span class="lineno"> 9987</span>&#160;  CompileRun(</div>
<div class="line"><a name="l09988"></a><span class="lineno"> 9988</span>&#160;      <span class="stringliteral">&quot;o.foo = 17;&quot;</span></div>
<div class="line"><a name="l09989"></a><span class="lineno"> 9989</span>&#160;      <span class="stringliteral">&quot;var receiver = {};&quot;</span></div>
<div class="line"><a name="l09990"></a><span class="lineno"> 9990</span>&#160;      <span class="stringliteral">&quot;receiver.__proto__ = o;&quot;</span></div>
<div class="line"><a name="l09991"></a><span class="lineno"> 9991</span>&#160;      <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l09992"></a><span class="lineno"> 9992</span>&#160;      <span class="stringliteral">&quot;var saved_result = 0;&quot;</span></div>
<div class="line"><a name="l09993"></a><span class="lineno"> 9993</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l09994"></a><span class="lineno"> 9994</span>&#160;      <span class="stringliteral">&quot;  result = receiver.method(41);&quot;</span></div>
<div class="line"><a name="l09995"></a><span class="lineno"> 9995</span>&#160;      <span class="stringliteral">&quot;  if (i == 50) {&quot;</span></div>
<div class="line"><a name="l09996"></a><span class="lineno"> 9996</span>&#160;      <span class="stringliteral">&quot;    saved_result = result;&quot;</span></div>
<div class="line"><a name="l09997"></a><span class="lineno"> 9997</span>&#160;      <span class="stringliteral">&quot;    receiver = 333;&quot;</span></div>
<div class="line"><a name="l09998"></a><span class="lineno"> 9998</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l09999"></a><span class="lineno"> 9999</span>&#160;      <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l10000"></a><span class="lineno">10000</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l10001"></a><span class="lineno">10001</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;TypeError: Object 333 has no method &#39;method&#39;&quot;</span>),</div>
<div class="line"><a name="l10002"></a><span class="lineno">10002</span>&#160;           try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>()-&gt;ToString());</div>
<div class="line"><a name="l10003"></a><span class="lineno">10003</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;saved_result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l10004"></a><span class="lineno">10004</span>&#160;}</div>
<div class="line"><a name="l10005"></a><span class="lineno">10005</span>&#160;</div>
<div class="line"><a name="l10006"></a><span class="lineno">10006</span>&#160;</div>
<div class="line"><a name="l10007"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab74796fdba209fc526f9359ec28cbe4e">10007</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#ab74796fdba209fc526f9359ec28cbe4e">keyed_call_ic_function</a>;</div>
<div class="line"><a name="l10008"></a><span class="lineno">10008</span>&#160;</div>
<div class="line"><a name="l10009"></a><span class="lineno">10009</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorKeyedCallICGetter(</div>
<div class="line"><a name="l10010"></a><span class="lineno">10010</span>&#160;    Local&lt;String&gt; name, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l10011"></a><span class="lineno">10011</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10012"></a><span class="lineno">10012</span>&#160;  <span class="keywordflow">if</span> (v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name)) {</div>
<div class="line"><a name="l10013"></a><span class="lineno">10013</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ab74796fdba209fc526f9359ec28cbe4e">keyed_call_ic_function</a>;</div>
<div class="line"><a name="l10014"></a><span class="lineno">10014</span>&#160;  }</div>
<div class="line"><a name="l10015"></a><span class="lineno">10015</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l10016"></a><span class="lineno">10016</span>&#160;}</div>
<div class="line"><a name="l10017"></a><span class="lineno">10017</span>&#160;</div>
<div class="line"><a name="l10018"></a><span class="lineno">10018</span>&#160;</div>
<div class="line"><a name="l10019"></a><span class="lineno">10019</span>&#160;<span class="comment">// Test the case when we stored cacheable lookup into</span></div>
<div class="line"><a name="l10020"></a><span class="lineno">10020</span>&#160;<span class="comment">// a stub, but the function name changed (to another cacheable function).</span></div>
<div class="line"><a name="l10021"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aea22ba7176ca75786264452082c9d0bc">10021</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorKeyedCallICKeyChange1) {</div>
<div class="line"><a name="l10022"></a><span class="lineno">10022</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10023"></a><span class="lineno">10023</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l10024"></a><span class="lineno">10024</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l10025"></a><span class="lineno">10025</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10026"></a><span class="lineno">10026</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l10027"></a><span class="lineno">10027</span>&#160;  CompileRun(</div>
<div class="line"><a name="l10028"></a><span class="lineno">10028</span>&#160;    <span class="stringliteral">&quot;proto = new Object();&quot;</span></div>
<div class="line"><a name="l10029"></a><span class="lineno">10029</span>&#160;    <span class="stringliteral">&quot;proto.y = function(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l10030"></a><span class="lineno">10030</span>&#160;    <span class="stringliteral">&quot;proto.z = function(x) { return x - 1; };&quot;</span></div>
<div class="line"><a name="l10031"></a><span class="lineno">10031</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto;&quot;</span></div>
<div class="line"><a name="l10032"></a><span class="lineno">10032</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l10033"></a><span class="lineno">10033</span>&#160;    <span class="stringliteral">&quot;var method = &#39;y&#39;;&quot;</span></div>
<div class="line"><a name="l10034"></a><span class="lineno">10034</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l10035"></a><span class="lineno">10035</span>&#160;    <span class="stringliteral">&quot;  if (i == 5) { method = &#39;z&#39;; };&quot;</span></div>
<div class="line"><a name="l10036"></a><span class="lineno">10036</span>&#160;    <span class="stringliteral">&quot;  result += o[method](41);&quot;</span></div>
<div class="line"><a name="l10037"></a><span class="lineno">10037</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l10038"></a><span class="lineno">10038</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42*5 + 40*5, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l10039"></a><span class="lineno">10039</span>&#160;}</div>
<div class="line"><a name="l10040"></a><span class="lineno">10040</span>&#160;</div>
<div class="line"><a name="l10041"></a><span class="lineno">10041</span>&#160;</div>
<div class="line"><a name="l10042"></a><span class="lineno">10042</span>&#160;<span class="comment">// Test the case when we stored cacheable lookup into</span></div>
<div class="line"><a name="l10043"></a><span class="lineno">10043</span>&#160;<span class="comment">// a stub, but the function name changed (and the new function is present</span></div>
<div class="line"><a name="l10044"></a><span class="lineno">10044</span>&#160;<span class="comment">// both before and after the interceptor in the prototype chain).</span></div>
<div class="line"><a name="l10045"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7ef5aeef989728a77023b6a693400c96">10045</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorKeyedCallICKeyChange2) {</div>
<div class="line"><a name="l10046"></a><span class="lineno">10046</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10047"></a><span class="lineno">10047</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l10048"></a><span class="lineno">10048</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorKeyedCallICGetter);</div>
<div class="line"><a name="l10049"></a><span class="lineno">10049</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10050"></a><span class="lineno">10050</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;proto1&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l10051"></a><span class="lineno">10051</span>&#160;  keyed_call_ic_function =</div>
<div class="line"><a name="l10052"></a><span class="lineno">10052</span>&#160;      v8_compile(<span class="stringliteral">&quot;function f(x) { return x - 1; }; f&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10053"></a><span class="lineno">10053</span>&#160;  CompileRun(</div>
<div class="line"><a name="l10054"></a><span class="lineno">10054</span>&#160;    <span class="stringliteral">&quot;o = new Object();&quot;</span></div>
<div class="line"><a name="l10055"></a><span class="lineno">10055</span>&#160;    <span class="stringliteral">&quot;proto2 = new Object();&quot;</span></div>
<div class="line"><a name="l10056"></a><span class="lineno">10056</span>&#160;    <span class="stringliteral">&quot;o.y = function(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l10057"></a><span class="lineno">10057</span>&#160;    <span class="stringliteral">&quot;proto2.y = function(x) { return x + 2; };&quot;</span></div>
<div class="line"><a name="l10058"></a><span class="lineno">10058</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto1;&quot;</span></div>
<div class="line"><a name="l10059"></a><span class="lineno">10059</span>&#160;    <span class="stringliteral">&quot;proto1.__proto__ = proto2;&quot;</span></div>
<div class="line"><a name="l10060"></a><span class="lineno">10060</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l10061"></a><span class="lineno">10061</span>&#160;    <span class="stringliteral">&quot;var method = &#39;x&#39;;&quot;</span></div>
<div class="line"><a name="l10062"></a><span class="lineno">10062</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l10063"></a><span class="lineno">10063</span>&#160;    <span class="stringliteral">&quot;  if (i == 5) { method = &#39;y&#39;; };&quot;</span></div>
<div class="line"><a name="l10064"></a><span class="lineno">10064</span>&#160;    <span class="stringliteral">&quot;  result += o[method](41);&quot;</span></div>
<div class="line"><a name="l10065"></a><span class="lineno">10065</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l10066"></a><span class="lineno">10066</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42*5 + 40*5, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l10067"></a><span class="lineno">10067</span>&#160;}</div>
<div class="line"><a name="l10068"></a><span class="lineno">10068</span>&#160;</div>
<div class="line"><a name="l10069"></a><span class="lineno">10069</span>&#160;</div>
<div class="line"><a name="l10070"></a><span class="lineno">10070</span>&#160;<span class="comment">// Same as InterceptorKeyedCallICKeyChange1 only the cacheable function sit</span></div>
<div class="line"><a name="l10071"></a><span class="lineno">10071</span>&#160;<span class="comment">// on the global object.</span></div>
<div class="line"><a name="l10072"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1328fcf52469e1efc3cd44dcbb659ec3">10072</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorKeyedCallICKeyChangeOnGlobal) {</div>
<div class="line"><a name="l10073"></a><span class="lineno">10073</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10074"></a><span class="lineno">10074</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l10075"></a><span class="lineno">10075</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l10076"></a><span class="lineno">10076</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10077"></a><span class="lineno">10077</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l10078"></a><span class="lineno">10078</span>&#160;  CompileRun(</div>
<div class="line"><a name="l10079"></a><span class="lineno">10079</span>&#160;    <span class="stringliteral">&quot;function inc(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l10080"></a><span class="lineno">10080</span>&#160;    <span class="stringliteral">&quot;inc(1);&quot;</span></div>
<div class="line"><a name="l10081"></a><span class="lineno">10081</span>&#160;    <span class="stringliteral">&quot;function dec(x) { return x - 1; };&quot;</span></div>
<div class="line"><a name="l10082"></a><span class="lineno">10082</span>&#160;    <span class="stringliteral">&quot;dec(1);&quot;</span></div>
<div class="line"><a name="l10083"></a><span class="lineno">10083</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = this;&quot;</span></div>
<div class="line"><a name="l10084"></a><span class="lineno">10084</span>&#160;    <span class="stringliteral">&quot;this.__proto__.x = inc;&quot;</span></div>
<div class="line"><a name="l10085"></a><span class="lineno">10085</span>&#160;    <span class="stringliteral">&quot;this.__proto__.y = dec;&quot;</span></div>
<div class="line"><a name="l10086"></a><span class="lineno">10086</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l10087"></a><span class="lineno">10087</span>&#160;    <span class="stringliteral">&quot;var method = &#39;x&#39;;&quot;</span></div>
<div class="line"><a name="l10088"></a><span class="lineno">10088</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l10089"></a><span class="lineno">10089</span>&#160;    <span class="stringliteral">&quot;  if (i == 5) { method = &#39;y&#39;; };&quot;</span></div>
<div class="line"><a name="l10090"></a><span class="lineno">10090</span>&#160;    <span class="stringliteral">&quot;  result += o[method](41);&quot;</span></div>
<div class="line"><a name="l10091"></a><span class="lineno">10091</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l10092"></a><span class="lineno">10092</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42*5 + 40*5, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l10093"></a><span class="lineno">10093</span>&#160;}</div>
<div class="line"><a name="l10094"></a><span class="lineno">10094</span>&#160;</div>
<div class="line"><a name="l10095"></a><span class="lineno">10095</span>&#160;</div>
<div class="line"><a name="l10096"></a><span class="lineno">10096</span>&#160;<span class="comment">// Test the case when actual function to call sits on global object.</span></div>
<div class="line"><a name="l10097"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af69e695a6f6506a30d9d15e06643f8f8">10097</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorKeyedCallICFromGlobal) {</div>
<div class="line"><a name="l10098"></a><span class="lineno">10098</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10099"></a><span class="lineno">10099</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_o = ObjectTemplate::New();</div>
<div class="line"><a name="l10100"></a><span class="lineno">10100</span>&#160;  templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l10101"></a><span class="lineno">10101</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10102"></a><span class="lineno">10102</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l10103"></a><span class="lineno">10103</span>&#160;</div>
<div class="line"><a name="l10104"></a><span class="lineno">10104</span>&#160;  CompileRun(</div>
<div class="line"><a name="l10105"></a><span class="lineno">10105</span>&#160;    <span class="stringliteral">&quot;function len(x) { return x.length; };&quot;</span></div>
<div class="line"><a name="l10106"></a><span class="lineno">10106</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = this;&quot;</span></div>
<div class="line"><a name="l10107"></a><span class="lineno">10107</span>&#160;    <span class="stringliteral">&quot;var m = &#39;parseFloat&#39;;&quot;</span></div>
<div class="line"><a name="l10108"></a><span class="lineno">10108</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l10109"></a><span class="lineno">10109</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l10110"></a><span class="lineno">10110</span>&#160;    <span class="stringliteral">&quot;  if (i == 5) {&quot;</span></div>
<div class="line"><a name="l10111"></a><span class="lineno">10111</span>&#160;    <span class="stringliteral">&quot;    m = &#39;len&#39;;&quot;</span></div>
<div class="line"><a name="l10112"></a><span class="lineno">10112</span>&#160;    <span class="stringliteral">&quot;    saved_result = result;&quot;</span></div>
<div class="line"><a name="l10113"></a><span class="lineno">10113</span>&#160;    <span class="stringliteral">&quot;  };&quot;</span></div>
<div class="line"><a name="l10114"></a><span class="lineno">10114</span>&#160;    <span class="stringliteral">&quot;  result = o[m](&#39;239&#39;);&quot;</span></div>
<div class="line"><a name="l10115"></a><span class="lineno">10115</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l10116"></a><span class="lineno">10116</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l10117"></a><span class="lineno">10117</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(239, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;saved_result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l10118"></a><span class="lineno">10118</span>&#160;}</div>
<div class="line"><a name="l10119"></a><span class="lineno">10119</span>&#160;</div>
<div class="line"><a name="l10120"></a><span class="lineno">10120</span>&#160;<span class="comment">// Test the map transition before the interceptor.</span></div>
<div class="line"><a name="l10121"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1862158eec1d63009a6738706a4cfd8e">10121</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorKeyedCallICMapChangeBefore) {</div>
<div class="line"><a name="l10122"></a><span class="lineno">10122</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10123"></a><span class="lineno">10123</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_o = ObjectTemplate::New();</div>
<div class="line"><a name="l10124"></a><span class="lineno">10124</span>&#160;  templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l10125"></a><span class="lineno">10125</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10126"></a><span class="lineno">10126</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;proto&quot;</span>), templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l10127"></a><span class="lineno">10127</span>&#160;</div>
<div class="line"><a name="l10128"></a><span class="lineno">10128</span>&#160;  CompileRun(</div>
<div class="line"><a name="l10129"></a><span class="lineno">10129</span>&#160;    <span class="stringliteral">&quot;var o = new Object();&quot;</span></div>
<div class="line"><a name="l10130"></a><span class="lineno">10130</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto;&quot;</span></div>
<div class="line"><a name="l10131"></a><span class="lineno">10131</span>&#160;    <span class="stringliteral">&quot;o.method = function(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l10132"></a><span class="lineno">10132</span>&#160;    <span class="stringliteral">&quot;var m = &#39;method&#39;;&quot;</span></div>
<div class="line"><a name="l10133"></a><span class="lineno">10133</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l10134"></a><span class="lineno">10134</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l10135"></a><span class="lineno">10135</span>&#160;    <span class="stringliteral">&quot;  if (i == 5) { o.method = function(x) { return x - 1; }; };&quot;</span></div>
<div class="line"><a name="l10136"></a><span class="lineno">10136</span>&#160;    <span class="stringliteral">&quot;  result += o[m](41);&quot;</span></div>
<div class="line"><a name="l10137"></a><span class="lineno">10137</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l10138"></a><span class="lineno">10138</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42*5 + 40*5, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l10139"></a><span class="lineno">10139</span>&#160;}</div>
<div class="line"><a name="l10140"></a><span class="lineno">10140</span>&#160;</div>
<div class="line"><a name="l10141"></a><span class="lineno">10141</span>&#160;</div>
<div class="line"><a name="l10142"></a><span class="lineno">10142</span>&#160;<span class="comment">// Test the map transition after the interceptor.</span></div>
<div class="line"><a name="l10143"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9ac4f67440564277f0317eb2b39124d4">10143</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorKeyedCallICMapChangeAfter) {</div>
<div class="line"><a name="l10144"></a><span class="lineno">10144</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10145"></a><span class="lineno">10145</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ_o = ObjectTemplate::New();</div>
<div class="line"><a name="l10146"></a><span class="lineno">10146</span>&#160;  templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(NoBlockGetterX);</div>
<div class="line"><a name="l10147"></a><span class="lineno">10147</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10148"></a><span class="lineno">10148</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), templ_o-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>());</div>
<div class="line"><a name="l10149"></a><span class="lineno">10149</span>&#160;</div>
<div class="line"><a name="l10150"></a><span class="lineno">10150</span>&#160;  CompileRun(</div>
<div class="line"><a name="l10151"></a><span class="lineno">10151</span>&#160;    <span class="stringliteral">&quot;var proto = new Object();&quot;</span></div>
<div class="line"><a name="l10152"></a><span class="lineno">10152</span>&#160;    <span class="stringliteral">&quot;o.__proto__ = proto;&quot;</span></div>
<div class="line"><a name="l10153"></a><span class="lineno">10153</span>&#160;    <span class="stringliteral">&quot;proto.method = function(x) { return x + 1; };&quot;</span></div>
<div class="line"><a name="l10154"></a><span class="lineno">10154</span>&#160;    <span class="stringliteral">&quot;var m = &#39;method&#39;;&quot;</span></div>
<div class="line"><a name="l10155"></a><span class="lineno">10155</span>&#160;    <span class="stringliteral">&quot;var result = 0;&quot;</span></div>
<div class="line"><a name="l10156"></a><span class="lineno">10156</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; i++) {&quot;</span></div>
<div class="line"><a name="l10157"></a><span class="lineno">10157</span>&#160;    <span class="stringliteral">&quot;  if (i == 5) { proto.method = function(x) { return x - 1; }; };&quot;</span></div>
<div class="line"><a name="l10158"></a><span class="lineno">10158</span>&#160;    <span class="stringliteral">&quot;  result += o[m](41);&quot;</span></div>
<div class="line"><a name="l10159"></a><span class="lineno">10159</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l10160"></a><span class="lineno">10160</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42*5 + 40*5, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l10161"></a><span class="lineno">10161</span>&#160;}</div>
<div class="line"><a name="l10162"></a><span class="lineno">10162</span>&#160;</div>
<div class="line"><a name="l10163"></a><span class="lineno">10163</span>&#160;</div>
<div class="line"><a name="l10164"></a><span class="lineno">10164</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> interceptor_call_count = 0;</div>
<div class="line"><a name="l10165"></a><span class="lineno">10165</span>&#160;</div>
<div class="line"><a name="l10166"></a><span class="lineno">10166</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorICRefErrorGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l10167"></a><span class="lineno">10167</span>&#160;                                                     <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l10168"></a><span class="lineno">10168</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10169"></a><span class="lineno">10169</span>&#160;  <span class="keywordflow">if</span> (v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name) &amp;&amp; interceptor_call_count++ &lt; 20) {</div>
<div class="line"><a name="l10170"></a><span class="lineno">10170</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a6c4f588fe2a7272c6c769aa2af688250">call_ic_function2</a>;</div>
<div class="line"><a name="l10171"></a><span class="lineno">10171</span>&#160;  }</div>
<div class="line"><a name="l10172"></a><span class="lineno">10172</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l10173"></a><span class="lineno">10173</span>&#160;}</div>
<div class="line"><a name="l10174"></a><span class="lineno">10174</span>&#160;</div>
<div class="line"><a name="l10175"></a><span class="lineno">10175</span>&#160;</div>
<div class="line"><a name="l10176"></a><span class="lineno">10176</span>&#160;<span class="comment">// This test should hit load and call ICs for the interceptor case.</span></div>
<div class="line"><a name="l10177"></a><span class="lineno">10177</span>&#160;<span class="comment">// Once in a while, the interceptor will reply that a property was not</span></div>
<div class="line"><a name="l10178"></a><span class="lineno">10178</span>&#160;<span class="comment">// found in which case we should get a reference error.</span></div>
<div class="line"><a name="l10179"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af2e6891bf17f9b9c667d0af9f1063ef7">10179</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorICReferenceErrors) {</div>
<div class="line"><a name="l10180"></a><span class="lineno">10180</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10181"></a><span class="lineno">10181</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l10182"></a><span class="lineno">10182</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorICRefErrorGetter);</div>
<div class="line"><a name="l10183"></a><span class="lineno">10183</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>());</div>
<div class="line"><a name="l10184"></a><span class="lineno">10184</span>&#160;  call_ic_function2 = v8_compile(<span class="stringliteral">&quot;function h(x) { return x; }; h&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10185"></a><span class="lineno">10185</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l10186"></a><span class="lineno">10186</span>&#160;    <span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l10187"></a><span class="lineno">10187</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l10188"></a><span class="lineno">10188</span>&#160;    <span class="stringliteral">&quot;    try { x; } catch(e) { return true; }&quot;</span></div>
<div class="line"><a name="l10189"></a><span class="lineno">10189</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l10190"></a><span class="lineno">10190</span>&#160;    <span class="stringliteral">&quot;  return false;&quot;</span></div>
<div class="line"><a name="l10191"></a><span class="lineno">10191</span>&#160;    <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l10192"></a><span class="lineno">10192</span>&#160;    <span class="stringliteral">&quot;f();&quot;</span>);</div>
<div class="line"><a name="l10193"></a><span class="lineno">10193</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">BooleanValue</a>());</div>
<div class="line"><a name="l10194"></a><span class="lineno">10194</span>&#160;  interceptor_call_count = 0;</div>
<div class="line"><a name="l10195"></a><span class="lineno">10195</span>&#160;  value = CompileRun(</div>
<div class="line"><a name="l10196"></a><span class="lineno">10196</span>&#160;    <span class="stringliteral">&quot;function g() {&quot;</span></div>
<div class="line"><a name="l10197"></a><span class="lineno">10197</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; 1000; i++) {&quot;</span></div>
<div class="line"><a name="l10198"></a><span class="lineno">10198</span>&#160;    <span class="stringliteral">&quot;    try { x(42); } catch(e) { return true; }&quot;</span></div>
<div class="line"><a name="l10199"></a><span class="lineno">10199</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l10200"></a><span class="lineno">10200</span>&#160;    <span class="stringliteral">&quot;  return false;&quot;</span></div>
<div class="line"><a name="l10201"></a><span class="lineno">10201</span>&#160;    <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l10202"></a><span class="lineno">10202</span>&#160;    <span class="stringliteral">&quot;g();&quot;</span>);</div>
<div class="line"><a name="l10203"></a><span class="lineno">10203</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">BooleanValue</a>());</div>
<div class="line"><a name="l10204"></a><span class="lineno">10204</span>&#160;}</div>
<div class="line"><a name="l10205"></a><span class="lineno">10205</span>&#160;</div>
<div class="line"><a name="l10206"></a><span class="lineno">10206</span>&#160;</div>
<div class="line"><a name="l10207"></a><span class="lineno">10207</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> interceptor_ic_exception_get_count = 0;</div>
<div class="line"><a name="l10208"></a><span class="lineno">10208</span>&#160;</div>
<div class="line"><a name="l10209"></a><span class="lineno">10209</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorICExceptionGetter(</div>
<div class="line"><a name="l10210"></a><span class="lineno">10210</span>&#160;    Local&lt;String&gt; name,</div>
<div class="line"><a name="l10211"></a><span class="lineno">10211</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l10212"></a><span class="lineno">10212</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10213"></a><span class="lineno">10213</span>&#160;  <span class="keywordflow">if</span> (v8_str(<span class="stringliteral">&quot;x&quot;</span>)-&gt;Equals(name) &amp;&amp; ++interceptor_ic_exception_get_count &lt; 20) {</div>
<div class="line"><a name="l10214"></a><span class="lineno">10214</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a605b65d61829aa91bf519237260b0af0">call_ic_function3</a>;</div>
<div class="line"><a name="l10215"></a><span class="lineno">10215</span>&#160;  }</div>
<div class="line"><a name="l10216"></a><span class="lineno">10216</span>&#160;  <span class="keywordflow">if</span> (interceptor_ic_exception_get_count == 20) {</div>
<div class="line"><a name="l10217"></a><span class="lineno">10217</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(v8_num(42));</div>
<div class="line"><a name="l10218"></a><span class="lineno">10218</span>&#160;  }</div>
<div class="line"><a name="l10219"></a><span class="lineno">10219</span>&#160;  <span class="comment">// Do not handle get for properties other than x.</span></div>
<div class="line"><a name="l10220"></a><span class="lineno">10220</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l10221"></a><span class="lineno">10221</span>&#160;}</div>
<div class="line"><a name="l10222"></a><span class="lineno">10222</span>&#160;</div>
<div class="line"><a name="l10223"></a><span class="lineno">10223</span>&#160;<span class="comment">// Test interceptor load/call IC where the interceptor throws an</span></div>
<div class="line"><a name="l10224"></a><span class="lineno">10224</span>&#160;<span class="comment">// exception once in a while.</span></div>
<div class="line"><a name="l10225"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a42bbd580af6fcbf2748110cc6f83d8a9">10225</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorICGetterExceptions) {</div>
<div class="line"><a name="l10226"></a><span class="lineno">10226</span>&#160;  interceptor_ic_exception_get_count = 0;</div>
<div class="line"><a name="l10227"></a><span class="lineno">10227</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10228"></a><span class="lineno">10228</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l10229"></a><span class="lineno">10229</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(InterceptorICExceptionGetter);</div>
<div class="line"><a name="l10230"></a><span class="lineno">10230</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>());</div>
<div class="line"><a name="l10231"></a><span class="lineno">10231</span>&#160;  call_ic_function3 = v8_compile(<span class="stringliteral">&quot;function h(x) { return x; }; h&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10232"></a><span class="lineno">10232</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l10233"></a><span class="lineno">10233</span>&#160;    <span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l10234"></a><span class="lineno">10234</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l10235"></a><span class="lineno">10235</span>&#160;    <span class="stringliteral">&quot;    try { x; } catch(e) { return true; }&quot;</span></div>
<div class="line"><a name="l10236"></a><span class="lineno">10236</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l10237"></a><span class="lineno">10237</span>&#160;    <span class="stringliteral">&quot;  return false;&quot;</span></div>
<div class="line"><a name="l10238"></a><span class="lineno">10238</span>&#160;    <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l10239"></a><span class="lineno">10239</span>&#160;    <span class="stringliteral">&quot;f();&quot;</span>);</div>
<div class="line"><a name="l10240"></a><span class="lineno">10240</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">BooleanValue</a>());</div>
<div class="line"><a name="l10241"></a><span class="lineno">10241</span>&#160;  interceptor_ic_exception_get_count = 0;</div>
<div class="line"><a name="l10242"></a><span class="lineno">10242</span>&#160;  value = CompileRun(</div>
<div class="line"><a name="l10243"></a><span class="lineno">10243</span>&#160;    <span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l10244"></a><span class="lineno">10244</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l10245"></a><span class="lineno">10245</span>&#160;    <span class="stringliteral">&quot;    try { x(42); } catch(e) { return true; }&quot;</span></div>
<div class="line"><a name="l10246"></a><span class="lineno">10246</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l10247"></a><span class="lineno">10247</span>&#160;    <span class="stringliteral">&quot;  return false;&quot;</span></div>
<div class="line"><a name="l10248"></a><span class="lineno">10248</span>&#160;    <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l10249"></a><span class="lineno">10249</span>&#160;    <span class="stringliteral">&quot;f();&quot;</span>);</div>
<div class="line"><a name="l10250"></a><span class="lineno">10250</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">BooleanValue</a>());</div>
<div class="line"><a name="l10251"></a><span class="lineno">10251</span>&#160;}</div>
<div class="line"><a name="l10252"></a><span class="lineno">10252</span>&#160;</div>
<div class="line"><a name="l10253"></a><span class="lineno">10253</span>&#160;</div>
<div class="line"><a name="l10254"></a><span class="lineno">10254</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> interceptor_ic_exception_set_count = 0;</div>
<div class="line"><a name="l10255"></a><span class="lineno">10255</span>&#160;</div>
<div class="line"><a name="l10256"></a><span class="lineno">10256</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> InterceptorICExceptionSetter(</div>
<div class="line"><a name="l10257"></a><span class="lineno">10257</span>&#160;      Local&lt;String&gt; key, Local&lt;Value&gt; value, <span class="keyword">const</span> AccessorInfo&amp;) {</div>
<div class="line"><a name="l10258"></a><span class="lineno">10258</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10259"></a><span class="lineno">10259</span>&#160;  <span class="keywordflow">if</span> (++interceptor_ic_exception_set_count &gt; 20) {</div>
<div class="line"><a name="l10260"></a><span class="lineno">10260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(v8_num(42));</div>
<div class="line"><a name="l10261"></a><span class="lineno">10261</span>&#160;  }</div>
<div class="line"><a name="l10262"></a><span class="lineno">10262</span>&#160;  <span class="comment">// Do not actually handle setting.</span></div>
<div class="line"><a name="l10263"></a><span class="lineno">10263</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l10264"></a><span class="lineno">10264</span>&#160;}</div>
<div class="line"><a name="l10265"></a><span class="lineno">10265</span>&#160;</div>
<div class="line"><a name="l10266"></a><span class="lineno">10266</span>&#160;<span class="comment">// Test interceptor store IC where the interceptor throws an exception</span></div>
<div class="line"><a name="l10267"></a><span class="lineno">10267</span>&#160;<span class="comment">// once in a while.</span></div>
<div class="line"><a name="l10268"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa1eacdbaeac9c25896639348674308d1">10268</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorICSetterExceptions) {</div>
<div class="line"><a name="l10269"></a><span class="lineno">10269</span>&#160;  interceptor_ic_exception_set_count = 0;</div>
<div class="line"><a name="l10270"></a><span class="lineno">10270</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10271"></a><span class="lineno">10271</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l10272"></a><span class="lineno">10272</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(0, InterceptorICExceptionSetter);</div>
<div class="line"><a name="l10273"></a><span class="lineno">10273</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ, <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>());</div>
<div class="line"><a name="l10274"></a><span class="lineno">10274</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(</div>
<div class="line"><a name="l10275"></a><span class="lineno">10275</span>&#160;    <span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l10276"></a><span class="lineno">10276</span>&#160;    <span class="stringliteral">&quot;  for (var i = 0; i &lt; 100; i++) {&quot;</span></div>
<div class="line"><a name="l10277"></a><span class="lineno">10277</span>&#160;    <span class="stringliteral">&quot;    try { x = 42; } catch(e) { return true; }&quot;</span></div>
<div class="line"><a name="l10278"></a><span class="lineno">10278</span>&#160;    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l10279"></a><span class="lineno">10279</span>&#160;    <span class="stringliteral">&quot;  return false;&quot;</span></div>
<div class="line"><a name="l10280"></a><span class="lineno">10280</span>&#160;    <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l10281"></a><span class="lineno">10281</span>&#160;    <span class="stringliteral">&quot;f();&quot;</span>);</div>
<div class="line"><a name="l10282"></a><span class="lineno">10282</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">BooleanValue</a>());</div>
<div class="line"><a name="l10283"></a><span class="lineno">10283</span>&#160;}</div>
<div class="line"><a name="l10284"></a><span class="lineno">10284</span>&#160;</div>
<div class="line"><a name="l10285"></a><span class="lineno">10285</span>&#160;</div>
<div class="line"><a name="l10286"></a><span class="lineno">10286</span>&#160;<span class="comment">// Test that we ignore null interceptors.</span></div>
<div class="line"><a name="l10287"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7dea6babed596a781f8cdee785e75fd1">10287</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NullNamedInterceptor) {</div>
<div class="line"><a name="l10288"></a><span class="lineno">10288</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10289"></a><span class="lineno">10289</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l10290"></a><span class="lineno">10290</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(0);</div>
<div class="line"><a name="l10291"></a><span class="lineno">10291</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10292"></a><span class="lineno">10292</span>&#160;  templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(<span class="stringliteral">&quot;x&quot;</span>, v8_num(42));</div>
<div class="line"><a name="l10293"></a><span class="lineno">10293</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l10294"></a><span class="lineno">10294</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l10295"></a><span class="lineno">10295</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(<span class="stringliteral">&quot;obj.x&quot;</span>);</div>
<div class="line"><a name="l10296"></a><span class="lineno">10296</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a0f3af8b6d8f31677d3df93407dbb2122">IsInt32</a>());</div>
<div class="line"><a name="l10297"></a><span class="lineno">10297</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l10298"></a><span class="lineno">10298</span>&#160;}</div>
<div class="line"><a name="l10299"></a><span class="lineno">10299</span>&#160;</div>
<div class="line"><a name="l10300"></a><span class="lineno">10300</span>&#160;</div>
<div class="line"><a name="l10301"></a><span class="lineno">10301</span>&#160;<span class="comment">// Test that we ignore null interceptors.</span></div>
<div class="line"><a name="l10302"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2e810f1348efea5da8250d36c0df54e1">10302</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NullIndexedInterceptor) {</div>
<div class="line"><a name="l10303"></a><span class="lineno">10303</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10304"></a><span class="lineno">10304</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = ObjectTemplate::New();</div>
<div class="line"><a name="l10305"></a><span class="lineno">10305</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ad3baf9d0959cbc49663a33718d7dd8a3">SetIndexedPropertyHandler</a>(0);</div>
<div class="line"><a name="l10306"></a><span class="lineno">10306</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10307"></a><span class="lineno">10307</span>&#160;  templ-&gt;<a class="code" href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">Set</a>(<span class="stringliteral">&quot;42&quot;</span>, v8_num(42));</div>
<div class="line"><a name="l10308"></a><span class="lineno">10308</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l10309"></a><span class="lineno">10309</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l10310"></a><span class="lineno">10310</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(<span class="stringliteral">&quot;obj[42]&quot;</span>);</div>
<div class="line"><a name="l10311"></a><span class="lineno">10311</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a0f3af8b6d8f31677d3df93407dbb2122">IsInt32</a>());</div>
<div class="line"><a name="l10312"></a><span class="lineno">10312</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l10313"></a><span class="lineno">10313</span>&#160;}</div>
<div class="line"><a name="l10314"></a><span class="lineno">10314</span>&#160;</div>
<div class="line"><a name="l10315"></a><span class="lineno">10315</span>&#160;</div>
<div class="line"><a name="l10316"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0c29821b33a97625a1ba7596b19d73fd">10316</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NamedPropertyHandlerGetterAttributes) {</div>
<div class="line"><a name="l10317"></a><span class="lineno">10317</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10318"></a><span class="lineno">10318</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l10319"></a><span class="lineno">10319</span>&#160;  templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">InstanceTemplate</a>()-&gt;SetNamedPropertyHandler(InterceptorLoadXICGetter);</div>
<div class="line"><a name="l10320"></a><span class="lineno">10320</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l10321"></a><span class="lineno">10321</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>),</div>
<div class="line"><a name="l10322"></a><span class="lineno">10322</span>&#160;                     templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>()-&gt;NewInstance());</div>
<div class="line"><a name="l10323"></a><span class="lineno">10323</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;obj.x === 42&quot;</span>);</div>
<div class="line"><a name="l10324"></a><span class="lineno">10324</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;!obj.propertyIsEnumerable(&#39;x&#39;)&quot;</span>);</div>
<div class="line"><a name="l10325"></a><span class="lineno">10325</span>&#160;}</div>
<div class="line"><a name="l10326"></a><span class="lineno">10326</span>&#160;</div>
<div class="line"><a name="l10327"></a><span class="lineno">10327</span>&#160;</div>
<div class="line"><a name="l10328"></a><span class="lineno">10328</span>&#160;<span class="keyword">static</span> Handle&lt;Value&gt; ThrowingGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l10329"></a><span class="lineno">10329</span>&#160;                                    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l10330"></a><span class="lineno">10330</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10331"></a><span class="lineno">10331</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">ThrowException</a>(Handle&lt;Value&gt;());</div>
<div class="line"><a name="l10332"></a><span class="lineno">10332</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">Undefined</a>();</div>
<div class="line"><a name="l10333"></a><span class="lineno">10333</span>&#160;}</div>
<div class="line"><a name="l10334"></a><span class="lineno">10334</span>&#160;</div>
<div class="line"><a name="l10335"></a><span class="lineno">10335</span>&#160;</div>
<div class="line"><a name="l10336"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0ee24add9303ed0e7210715e13e63b0d">10336</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(VariousGetPropertiesAndThrowingCallbacks) {</div>
<div class="line"><a name="l10337"></a><span class="lineno">10337</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l10338"></a><span class="lineno">10338</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10339"></a><span class="lineno">10339</span>&#160;</div>
<div class="line"><a name="l10340"></a><span class="lineno">10340</span>&#160;  Local&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l10341"></a><span class="lineno">10341</span>&#160;  Local&lt;ObjectTemplate&gt; instance_templ = templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l10342"></a><span class="lineno">10342</span>&#160;  instance_templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;f&quot;</span>), ThrowingGetter);</div>
<div class="line"><a name="l10343"></a><span class="lineno">10343</span>&#160;</div>
<div class="line"><a name="l10344"></a><span class="lineno">10344</span>&#160;  Local&lt;Object&gt; instance = templ-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l10345"></a><span class="lineno">10345</span>&#160;</div>
<div class="line"><a name="l10346"></a><span class="lineno">10346</span>&#160;  Local&lt;Object&gt; another = Object::New();</div>
<div class="line"><a name="l10347"></a><span class="lineno">10347</span>&#160;  another-&gt;SetPrototype(instance);</div>
<div class="line"><a name="l10348"></a><span class="lineno">10348</span>&#160;</div>
<div class="line"><a name="l10349"></a><span class="lineno">10349</span>&#160;  Local&lt;Object&gt; with_js_getter = CompileRun(</div>
<div class="line"><a name="l10350"></a><span class="lineno">10350</span>&#160;      <span class="stringliteral">&quot;o = {};\n&quot;</span></div>
<div class="line"><a name="l10351"></a><span class="lineno">10351</span>&#160;      <span class="stringliteral">&quot;o.__defineGetter__(&#39;f&#39;, function() { throw undefined; });\n&quot;</span></div>
<div class="line"><a name="l10352"></a><span class="lineno">10352</span>&#160;      <span class="stringliteral">&quot;o\n&quot;</span>).As&lt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>&gt;();</div>
<div class="line"><a name="l10353"></a><span class="lineno">10353</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!with_js_getter.IsEmpty());</div>
<div class="line"><a name="l10354"></a><span class="lineno">10354</span>&#160;</div>
<div class="line"><a name="l10355"></a><span class="lineno">10355</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l10356"></a><span class="lineno">10356</span>&#160;</div>
<div class="line"><a name="l10357"></a><span class="lineno">10357</span>&#160;  Local&lt;Value&gt; result = instance-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a6b0fdb76d5ff7b46f48f6b725be93ad8">GetRealNamedProperty</a>(v8_str(<span class="stringliteral">&quot;f&quot;</span>));</div>
<div class="line"><a name="l10358"></a><span class="lineno">10358</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l10359"></a><span class="lineno">10359</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l10360"></a><span class="lineno">10360</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l10361"></a><span class="lineno">10361</span>&#160;</div>
<div class="line"><a name="l10362"></a><span class="lineno">10362</span>&#160;  result = another-&gt;GetRealNamedProperty(v8_str(<span class="stringliteral">&quot;f&quot;</span>));</div>
<div class="line"><a name="l10363"></a><span class="lineno">10363</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l10364"></a><span class="lineno">10364</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l10365"></a><span class="lineno">10365</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l10366"></a><span class="lineno">10366</span>&#160;</div>
<div class="line"><a name="l10367"></a><span class="lineno">10367</span>&#160;  result = another-&gt;GetRealNamedPropertyInPrototypeChain(v8_str(<span class="stringliteral">&quot;f&quot;</span>));</div>
<div class="line"><a name="l10368"></a><span class="lineno">10368</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l10369"></a><span class="lineno">10369</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l10370"></a><span class="lineno">10370</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l10371"></a><span class="lineno">10371</span>&#160;</div>
<div class="line"><a name="l10372"></a><span class="lineno">10372</span>&#160;  result = another-&gt;Get(v8_str(<span class="stringliteral">&quot;f&quot;</span>));</div>
<div class="line"><a name="l10373"></a><span class="lineno">10373</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l10374"></a><span class="lineno">10374</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l10375"></a><span class="lineno">10375</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l10376"></a><span class="lineno">10376</span>&#160;</div>
<div class="line"><a name="l10377"></a><span class="lineno">10377</span>&#160;  result = with_js_getter-&gt;GetRealNamedProperty(v8_str(<span class="stringliteral">&quot;f&quot;</span>));</div>
<div class="line"><a name="l10378"></a><span class="lineno">10378</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l10379"></a><span class="lineno">10379</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l10380"></a><span class="lineno">10380</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l10381"></a><span class="lineno">10381</span>&#160;</div>
<div class="line"><a name="l10382"></a><span class="lineno">10382</span>&#160;  result = with_js_getter-&gt;Get(v8_str(<span class="stringliteral">&quot;f&quot;</span>));</div>
<div class="line"><a name="l10383"></a><span class="lineno">10383</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l10384"></a><span class="lineno">10384</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l10385"></a><span class="lineno">10385</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l10386"></a><span class="lineno">10386</span>&#160;}</div>
<div class="line"><a name="l10387"></a><span class="lineno">10387</span>&#160;</div>
<div class="line"><a name="l10388"></a><span class="lineno">10388</span>&#160;</div>
<div class="line"><a name="l10389"></a><span class="lineno">10389</span>&#160;<span class="keyword">static</span> Handle&lt;Value&gt; ThrowingCallbackWithTryCatch(<span class="keyword">const</span> Arguments&amp; args) {</div>
<div class="line"><a name="l10390"></a><span class="lineno">10390</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l10391"></a><span class="lineno">10391</span>&#160;  <span class="comment">// Verboseness is important: it triggers message delivery which can call into</span></div>
<div class="line"><a name="l10392"></a><span class="lineno">10392</span>&#160;  <span class="comment">// external code.</span></div>
<div class="line"><a name="l10393"></a><span class="lineno">10393</span>&#160;  try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#aefc75ae033e36266e6d4c16028e43577">SetVerbose</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l10394"></a><span class="lineno">10394</span>&#160;  CompileRun(<span class="stringliteral">&quot;throw &#39;from JS&#39;;&quot;</span>);</div>
<div class="line"><a name="l10395"></a><span class="lineno">10395</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l10396"></a><span class="lineno">10396</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!i::Isolate::Current()-&gt;has_pending_exception());</div>
<div class="line"><a name="l10397"></a><span class="lineno">10397</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!i::Isolate::Current()-&gt;has_scheduled_exception());</div>
<div class="line"><a name="l10398"></a><span class="lineno">10398</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">Undefined</a>();</div>
<div class="line"><a name="l10399"></a><span class="lineno">10399</span>&#160;}</div>
<div class="line"><a name="l10400"></a><span class="lineno">10400</span>&#160;</div>
<div class="line"><a name="l10401"></a><span class="lineno">10401</span>&#160;</div>
<div class="line"><a name="l10402"></a><span class="lineno">10402</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> call_depth;</div>
<div class="line"><a name="l10403"></a><span class="lineno">10403</span>&#160;</div>
<div class="line"><a name="l10404"></a><span class="lineno">10404</span>&#160;</div>
<div class="line"><a name="l10405"></a><span class="lineno">10405</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a3cb4269abaf9e4d39fceda9d2a9b8a39">WithTryCatch</a>(Handle&lt;Message&gt; message, Handle&lt;Value&gt; data) {</div>
<div class="line"><a name="l10406"></a><span class="lineno">10406</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l10407"></a><span class="lineno">10407</span>&#160;}</div>
<div class="line"><a name="l10408"></a><span class="lineno">10408</span>&#160;</div>
<div class="line"><a name="l10409"></a><span class="lineno">10409</span>&#160;</div>
<div class="line"><a name="l10410"></a><span class="lineno">10410</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ThrowFromJS(Handle&lt;Message&gt; message, Handle&lt;Value&gt; data) {</div>
<div class="line"><a name="l10411"></a><span class="lineno">10411</span>&#160;  <span class="keywordflow">if</span> (--call_depth) CompileRun(<span class="stringliteral">&quot;throw &#39;ThrowInJS&#39;;&quot;</span>);</div>
<div class="line"><a name="l10412"></a><span class="lineno">10412</span>&#160;}</div>
<div class="line"><a name="l10413"></a><span class="lineno">10413</span>&#160;</div>
<div class="line"><a name="l10414"></a><span class="lineno">10414</span>&#160;</div>
<div class="line"><a name="l10415"></a><span class="lineno">10415</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ThrowViaApi(Handle&lt;Message&gt; message, Handle&lt;Value&gt; data) {</div>
<div class="line"><a name="l10416"></a><span class="lineno">10416</span>&#160;  <span class="keywordflow">if</span> (--call_depth) <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">ThrowException</a>(v8_str(<span class="stringliteral">&quot;ThrowViaApi&quot;</span>));</div>
<div class="line"><a name="l10417"></a><span class="lineno">10417</span>&#160;}</div>
<div class="line"><a name="l10418"></a><span class="lineno">10418</span>&#160;</div>
<div class="line"><a name="l10419"></a><span class="lineno">10419</span>&#160;</div>
<div class="line"><a name="l10420"></a><span class="lineno">10420</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> WebKitLike(Handle&lt;Message&gt; message, Handle&lt;Value&gt; data) {</div>
<div class="line"><a name="l10421"></a><span class="lineno">10421</span>&#160;  Handle&lt;String&gt; errorMessageString = message-&gt;Get();</div>
<div class="line"><a name="l10422"></a><span class="lineno">10422</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!errorMessageString.IsEmpty());</div>
<div class="line"><a name="l10423"></a><span class="lineno">10423</span>&#160;  message-&gt;GetStackTrace();</div>
<div class="line"><a name="l10424"></a><span class="lineno">10424</span>&#160;  message-&gt;GetScriptResourceName();</div>
<div class="line"><a name="l10425"></a><span class="lineno">10425</span>&#160;}</div>
<div class="line"><a name="l10426"></a><span class="lineno">10426</span>&#160;</div>
<div class="line"><a name="l10427"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a48f891a1237d55c44d32c7a892b67459">10427</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExceptionsDoNotPropagatePastTryCatch) {</div>
<div class="line"><a name="l10428"></a><span class="lineno">10428</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l10429"></a><span class="lineno">10429</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10430"></a><span class="lineno">10430</span>&#160;</div>
<div class="line"><a name="l10431"></a><span class="lineno">10431</span>&#160;  Local&lt;Function&gt; func =</div>
<div class="line"><a name="l10432"></a><span class="lineno">10432</span>&#160;      FunctionTemplate::New(ThrowingCallbackWithTryCatch)-&gt;GetFunction();</div>
<div class="line"><a name="l10433"></a><span class="lineno">10433</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;func&quot;</span>), func);</div>
<div class="line"><a name="l10434"></a><span class="lineno">10434</span>&#160;</div>
<div class="line"><a name="l10435"></a><span class="lineno">10435</span>&#160;  <a class="code" href="../../d2/dc3/namespacev8.html#a93b6eadc434acc3fd8c23b3bfdffce04">MessageCallback</a> callbacks[] =</div>
<div class="line"><a name="l10436"></a><span class="lineno">10436</span>&#160;      { <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, WebKitLike, ThrowViaApi, ThrowFromJS, <a class="code" href="../../de/d3f/test-api_8cc.html#a3cb4269abaf9e4d39fceda9d2a9b8a39">WithTryCatch</a> };</div>
<div class="line"><a name="l10437"></a><span class="lineno">10437</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <span class="keyword">sizeof</span>(callbacks)/<span class="keyword">sizeof</span>(callbacks[0]); i++) {</div>
<div class="line"><a name="l10438"></a><span class="lineno">10438</span>&#160;    <a class="code" href="../../d2/dc3/namespacev8.html#a93b6eadc434acc3fd8c23b3bfdffce04">MessageCallback</a> callback = callbacks[i];</div>
<div class="line"><a name="l10439"></a><span class="lineno">10439</span>&#160;    <span class="keywordflow">if</span> (callback != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) {</div>
<div class="line"><a name="l10440"></a><span class="lineno">10440</span>&#160;      V8::AddMessageListener(callback);</div>
<div class="line"><a name="l10441"></a><span class="lineno">10441</span>&#160;    }</div>
<div class="line"><a name="l10442"></a><span class="lineno">10442</span>&#160;    <span class="comment">// Some small number to control number of times message handler should</span></div>
<div class="line"><a name="l10443"></a><span class="lineno">10443</span>&#160;    <span class="comment">// throw an exception.</span></div>
<div class="line"><a name="l10444"></a><span class="lineno">10444</span>&#160;    call_depth = 5;</div>
<div class="line"><a name="l10445"></a><span class="lineno">10445</span>&#160;    ExpectFalse(</div>
<div class="line"><a name="l10446"></a><span class="lineno">10446</span>&#160;        <span class="stringliteral">&quot;var thrown = false;\n&quot;</span></div>
<div class="line"><a name="l10447"></a><span class="lineno">10447</span>&#160;        <span class="stringliteral">&quot;try { func(); } catch(e) { thrown = true; }\n&quot;</span></div>
<div class="line"><a name="l10448"></a><span class="lineno">10448</span>&#160;        <span class="stringliteral">&quot;thrown\n&quot;</span>);</div>
<div class="line"><a name="l10449"></a><span class="lineno">10449</span>&#160;    <span class="keywordflow">if</span> (callback != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) {</div>
<div class="line"><a name="l10450"></a><span class="lineno">10450</span>&#160;      V8::RemoveMessageListeners(callback);</div>
<div class="line"><a name="l10451"></a><span class="lineno">10451</span>&#160;    }</div>
<div class="line"><a name="l10452"></a><span class="lineno">10452</span>&#160;  }</div>
<div class="line"><a name="l10453"></a><span class="lineno">10453</span>&#160;}</div>
<div class="line"><a name="l10454"></a><span class="lineno">10454</span>&#160;</div>
<div class="line"><a name="l10455"></a><span class="lineno">10455</span>&#160;</div>
<div class="line"><a name="l10456"></a><span class="lineno">10456</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ParentGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l10457"></a><span class="lineno">10457</span>&#160;                                      <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l10458"></a><span class="lineno">10458</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10459"></a><span class="lineno">10459</span>&#160;  <span class="keywordflow">return</span> v8_num(1);</div>
<div class="line"><a name="l10460"></a><span class="lineno">10460</span>&#160;}</div>
<div class="line"><a name="l10461"></a><span class="lineno">10461</span>&#160;</div>
<div class="line"><a name="l10462"></a><span class="lineno">10462</span>&#160;</div>
<div class="line"><a name="l10463"></a><span class="lineno">10463</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ChildGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l10464"></a><span class="lineno">10464</span>&#160;                                     <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l10465"></a><span class="lineno">10465</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10466"></a><span class="lineno">10466</span>&#160;  <span class="keywordflow">return</span> v8_num(42);</div>
<div class="line"><a name="l10467"></a><span class="lineno">10467</span>&#160;}</div>
<div class="line"><a name="l10468"></a><span class="lineno">10468</span>&#160;</div>
<div class="line"><a name="l10469"></a><span class="lineno">10469</span>&#160;</div>
<div class="line"><a name="l10470"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad662a789efc86af1a4d85af5a55c7164">10470</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Overriding) {</div>
<div class="line"><a name="l10471"></a><span class="lineno">10471</span>&#160;  i::FLAG_es5_readonly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10472"></a><span class="lineno">10472</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10473"></a><span class="lineno">10473</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10474"></a><span class="lineno">10474</span>&#160;</div>
<div class="line"><a name="l10475"></a><span class="lineno">10475</span>&#160;  <span class="comment">// Parent template.</span></div>
<div class="line"><a name="l10476"></a><span class="lineno">10476</span>&#160;  Local&lt;v8::FunctionTemplate&gt; parent_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l10477"></a><span class="lineno">10477</span>&#160;  Local&lt;ObjectTemplate&gt; parent_instance_templ =</div>
<div class="line"><a name="l10478"></a><span class="lineno">10478</span>&#160;      parent_templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l10479"></a><span class="lineno">10479</span>&#160;  parent_instance_templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;f&quot;</span>), ParentGetter);</div>
<div class="line"><a name="l10480"></a><span class="lineno">10480</span>&#160;</div>
<div class="line"><a name="l10481"></a><span class="lineno">10481</span>&#160;  <span class="comment">// Template that inherits from the parent template.</span></div>
<div class="line"><a name="l10482"></a><span class="lineno">10482</span>&#160;  Local&lt;v8::FunctionTemplate&gt; child_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l10483"></a><span class="lineno">10483</span>&#160;  Local&lt;ObjectTemplate&gt; child_instance_templ =</div>
<div class="line"><a name="l10484"></a><span class="lineno">10484</span>&#160;      child_templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l10485"></a><span class="lineno">10485</span>&#160;  child_templ-&gt;Inherit(parent_templ);</div>
<div class="line"><a name="l10486"></a><span class="lineno">10486</span>&#160;  <span class="comment">// Override &#39;f&#39;.  The child version of &#39;f&#39; should get called for child</span></div>
<div class="line"><a name="l10487"></a><span class="lineno">10487</span>&#160;  <span class="comment">// instances.</span></div>
<div class="line"><a name="l10488"></a><span class="lineno">10488</span>&#160;  child_instance_templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;f&quot;</span>), ChildGetter);</div>
<div class="line"><a name="l10489"></a><span class="lineno">10489</span>&#160;  <span class="comment">// Add &#39;g&#39; twice.  The &#39;g&#39; added last should get called for instances.</span></div>
<div class="line"><a name="l10490"></a><span class="lineno">10490</span>&#160;  child_instance_templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;g&quot;</span>), ParentGetter);</div>
<div class="line"><a name="l10491"></a><span class="lineno">10491</span>&#160;  child_instance_templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;g&quot;</span>), ChildGetter);</div>
<div class="line"><a name="l10492"></a><span class="lineno">10492</span>&#160;</div>
<div class="line"><a name="l10493"></a><span class="lineno">10493</span>&#160;  <span class="comment">// Add &#39;h&#39; as an accessor to the proto template with ReadOnly attributes</span></div>
<div class="line"><a name="l10494"></a><span class="lineno">10494</span>&#160;  <span class="comment">// so &#39;h&#39; can be shadowed on the instance object.</span></div>
<div class="line"><a name="l10495"></a><span class="lineno">10495</span>&#160;  Local&lt;ObjectTemplate&gt; child_proto_templ = child_templ-&gt;PrototypeTemplate();</div>
<div class="line"><a name="l10496"></a><span class="lineno">10496</span>&#160;  child_proto_templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;h&quot;</span>), ParentGetter, 0,</div>
<div class="line"><a name="l10497"></a><span class="lineno">10497</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(), <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>, <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l10498"></a><span class="lineno">10498</span>&#160;</div>
<div class="line"><a name="l10499"></a><span class="lineno">10499</span>&#160;  <span class="comment">// Add &#39;i&#39; as an accessor to the instance template with ReadOnly attributes</span></div>
<div class="line"><a name="l10500"></a><span class="lineno">10500</span>&#160;  <span class="comment">// but the attribute does not have effect because it is duplicated with</span></div>
<div class="line"><a name="l10501"></a><span class="lineno">10501</span>&#160;  <span class="comment">// NULL setter.</span></div>
<div class="line"><a name="l10502"></a><span class="lineno">10502</span>&#160;  child_instance_templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;i&quot;</span>), ChildGetter, 0,</div>
<div class="line"><a name="l10503"></a><span class="lineno">10503</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>(), <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>, <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l10504"></a><span class="lineno">10504</span>&#160;</div>
<div class="line"><a name="l10505"></a><span class="lineno">10505</span>&#160;</div>
<div class="line"><a name="l10506"></a><span class="lineno">10506</span>&#160;</div>
<div class="line"><a name="l10507"></a><span class="lineno">10507</span>&#160;  <span class="comment">// Instantiate the child template.</span></div>
<div class="line"><a name="l10508"></a><span class="lineno">10508</span>&#160;  Local&lt;v8::Object&gt; instance = child_templ-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l10509"></a><span class="lineno">10509</span>&#160;</div>
<div class="line"><a name="l10510"></a><span class="lineno">10510</span>&#160;  <span class="comment">// Check that the child function overrides the parent one.</span></div>
<div class="line"><a name="l10511"></a><span class="lineno">10511</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), instance);</div>
<div class="line"><a name="l10512"></a><span class="lineno">10512</span>&#160;  Local&lt;Value&gt; value = v8_compile(<span class="stringliteral">&quot;o.f&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10513"></a><span class="lineno">10513</span>&#160;  <span class="comment">// Check that the &#39;g&#39; that was added last is hit.</span></div>
<div class="line"><a name="l10514"></a><span class="lineno">10514</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l10515"></a><span class="lineno">10515</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;o.g&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10516"></a><span class="lineno">10516</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l10517"></a><span class="lineno">10517</span>&#160;</div>
<div class="line"><a name="l10518"></a><span class="lineno">10518</span>&#160;  <span class="comment">// Check that &#39;h&#39; cannot be shadowed.</span></div>
<div class="line"><a name="l10519"></a><span class="lineno">10519</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;o.h = 3; o.h&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10520"></a><span class="lineno">10520</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, value-&gt;Int32Value());</div>
<div class="line"><a name="l10521"></a><span class="lineno">10521</span>&#160;</div>
<div class="line"><a name="l10522"></a><span class="lineno">10522</span>&#160;  <span class="comment">// Check that &#39;i&#39; cannot be shadowed or changed.</span></div>
<div class="line"><a name="l10523"></a><span class="lineno">10523</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;o.i = 3; o.i&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10524"></a><span class="lineno">10524</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l10525"></a><span class="lineno">10525</span>&#160;}</div>
<div class="line"><a name="l10526"></a><span class="lineno">10526</span>&#160;</div>
<div class="line"><a name="l10527"></a><span class="lineno">10527</span>&#160;</div>
<div class="line"><a name="l10528"></a><span class="lineno">10528</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> IsConstructHandler(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l10529"></a><span class="lineno">10529</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10530"></a><span class="lineno">10530</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dac/classv8_1_1_boolean.html#af25ca2bc33dc64a35364943b0f1522ee">v8::Boolean::New</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a24d4f90132218b046a309a142ed3f5b2">IsConstructCall</a>());</div>
<div class="line"><a name="l10531"></a><span class="lineno">10531</span>&#160;}</div>
<div class="line"><a name="l10532"></a><span class="lineno">10532</span>&#160;</div>
<div class="line"><a name="l10533"></a><span class="lineno">10533</span>&#160;</div>
<div class="line"><a name="l10534"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9cb5607c0660e50cdea8ae66b8dd96f4">10534</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(IsConstructCall) {</div>
<div class="line"><a name="l10535"></a><span class="lineno">10535</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10536"></a><span class="lineno">10536</span>&#160;</div>
<div class="line"><a name="l10537"></a><span class="lineno">10537</span>&#160;  <span class="comment">// Function template with call handler.</span></div>
<div class="line"><a name="l10538"></a><span class="lineno">10538</span>&#160;  Local&lt;v8::FunctionTemplate&gt; templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l10539"></a><span class="lineno">10539</span>&#160;  templ-&gt;SetCallHandler(IsConstructHandler);</div>
<div class="line"><a name="l10540"></a><span class="lineno">10540</span>&#160;</div>
<div class="line"><a name="l10541"></a><span class="lineno">10541</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10542"></a><span class="lineno">10542</span>&#160;</div>
<div class="line"><a name="l10543"></a><span class="lineno">10543</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l10544"></a><span class="lineno">10544</span>&#160;  Local&lt;Value&gt; value = v8_compile(<span class="stringliteral">&quot;f()&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10545"></a><span class="lineno">10545</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!value-&gt;BooleanValue());</div>
<div class="line"><a name="l10546"></a><span class="lineno">10546</span>&#160;  value = v8_compile(<span class="stringliteral">&quot;new f()&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10547"></a><span class="lineno">10547</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;BooleanValue());</div>
<div class="line"><a name="l10548"></a><span class="lineno">10548</span>&#160;}</div>
<div class="line"><a name="l10549"></a><span class="lineno">10549</span>&#160;</div>
<div class="line"><a name="l10550"></a><span class="lineno">10550</span>&#160;</div>
<div class="line"><a name="l10551"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac43548f12307c98d7eb2deb50b0c09ec">10551</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ObjectProtoToString) {</div>
<div class="line"><a name="l10552"></a><span class="lineno">10552</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10553"></a><span class="lineno">10553</span>&#160;  Local&lt;v8::FunctionTemplate&gt; templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l10554"></a><span class="lineno">10554</span>&#160;  templ-&gt;SetClassName(v8_str(<span class="stringliteral">&quot;MyClass&quot;</span>));</div>
<div class="line"><a name="l10555"></a><span class="lineno">10555</span>&#160;</div>
<div class="line"><a name="l10556"></a><span class="lineno">10556</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10557"></a><span class="lineno">10557</span>&#160;</div>
<div class="line"><a name="l10558"></a><span class="lineno">10558</span>&#160;  Local&lt;String&gt; customized_tostring = v8_str(<span class="stringliteral">&quot;customized toString&quot;</span>);</div>
<div class="line"><a name="l10559"></a><span class="lineno">10559</span>&#160;</div>
<div class="line"><a name="l10560"></a><span class="lineno">10560</span>&#160;  <span class="comment">// Replace Object.prototype.toString</span></div>
<div class="line"><a name="l10561"></a><span class="lineno">10561</span>&#160;  v8_compile(<span class="stringliteral">&quot;Object.prototype.toString = function() {&quot;</span></div>
<div class="line"><a name="l10562"></a><span class="lineno">10562</span>&#160;                  <span class="stringliteral">&quot;  return &#39;customized toString&#39;;&quot;</span></div>
<div class="line"><a name="l10563"></a><span class="lineno">10563</span>&#160;                  <span class="stringliteral">&quot;}&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10564"></a><span class="lineno">10564</span>&#160;</div>
<div class="line"><a name="l10565"></a><span class="lineno">10565</span>&#160;  <span class="comment">// Normal ToString call should call replaced Object.prototype.toString</span></div>
<div class="line"><a name="l10566"></a><span class="lineno">10566</span>&#160;  Local&lt;v8::Object&gt; instance = templ-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l10567"></a><span class="lineno">10567</span>&#160;  Local&lt;String&gt; value = instance-&gt;ToString();</div>
<div class="line"><a name="l10568"></a><span class="lineno">10568</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsString() &amp;&amp; value-&gt;Equals(customized_tostring));</div>
<div class="line"><a name="l10569"></a><span class="lineno">10569</span>&#160;</div>
<div class="line"><a name="l10570"></a><span class="lineno">10570</span>&#160;  <span class="comment">// ObjectProtoToString should not call replace toString function.</span></div>
<div class="line"><a name="l10571"></a><span class="lineno">10571</span>&#160;  value = instance-&gt;ObjectProtoToString();</div>
<div class="line"><a name="l10572"></a><span class="lineno">10572</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsString() &amp;&amp; value-&gt;Equals(v8_str(<span class="stringliteral">&quot;[object MyClass]&quot;</span>)));</div>
<div class="line"><a name="l10573"></a><span class="lineno">10573</span>&#160;</div>
<div class="line"><a name="l10574"></a><span class="lineno">10574</span>&#160;  <span class="comment">// Check global</span></div>
<div class="line"><a name="l10575"></a><span class="lineno">10575</span>&#160;  value = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;ObjectProtoToString();</div>
<div class="line"><a name="l10576"></a><span class="lineno">10576</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsString() &amp;&amp; value-&gt;Equals(v8_str(<span class="stringliteral">&quot;[object global]&quot;</span>)));</div>
<div class="line"><a name="l10577"></a><span class="lineno">10577</span>&#160;</div>
<div class="line"><a name="l10578"></a><span class="lineno">10578</span>&#160;  <span class="comment">// Check ordinary object</span></div>
<div class="line"><a name="l10579"></a><span class="lineno">10579</span>&#160;  Local&lt;Value&gt; <span class="keywordtype">object</span> = v8_compile(<span class="stringliteral">&quot;new Object()&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10580"></a><span class="lineno">10580</span>&#160;  value = <span class="keywordtype">object</span>.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;ObjectProtoToString();</div>
<div class="line"><a name="l10581"></a><span class="lineno">10581</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsString() &amp;&amp; value-&gt;Equals(v8_str(<span class="stringliteral">&quot;[object Object]&quot;</span>)));</div>
<div class="line"><a name="l10582"></a><span class="lineno">10582</span>&#160;}</div>
<div class="line"><a name="l10583"></a><span class="lineno">10583</span>&#160;</div>
<div class="line"><a name="l10584"></a><span class="lineno">10584</span>&#160;</div>
<div class="line"><a name="l10585"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2498c0a56fae2c2631244cff0b2c6884">10585</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ObjectGetConstructorName) {</div>
<div class="line"><a name="l10586"></a><span class="lineno">10586</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10587"></a><span class="lineno">10587</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10588"></a><span class="lineno">10588</span>&#160;  v8_compile(<span class="stringliteral">&quot;function Parent() {};&quot;</span></div>
<div class="line"><a name="l10589"></a><span class="lineno">10589</span>&#160;             <span class="stringliteral">&quot;function Child() {};&quot;</span></div>
<div class="line"><a name="l10590"></a><span class="lineno">10590</span>&#160;             <span class="stringliteral">&quot;Child.prototype = new Parent();&quot;</span></div>
<div class="line"><a name="l10591"></a><span class="lineno">10591</span>&#160;             <span class="stringliteral">&quot;var outer = { inner: function() { } };&quot;</span></div>
<div class="line"><a name="l10592"></a><span class="lineno">10592</span>&#160;             <span class="stringliteral">&quot;var p = new Parent();&quot;</span></div>
<div class="line"><a name="l10593"></a><span class="lineno">10593</span>&#160;             <span class="stringliteral">&quot;var c = new Child();&quot;</span></div>
<div class="line"><a name="l10594"></a><span class="lineno">10594</span>&#160;             <span class="stringliteral">&quot;var x = new outer.inner();&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10595"></a><span class="lineno">10595</span>&#160;</div>
<div class="line"><a name="l10596"></a><span class="lineno">10596</span>&#160;  Local&lt;v8::Value&gt; p = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;p&quot;</span>));</div>
<div class="line"><a name="l10597"></a><span class="lineno">10597</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(p-&gt;IsObject() &amp;&amp; p-&gt;ToObject()-&gt;GetConstructorName()-&gt;Equals(</div>
<div class="line"><a name="l10598"></a><span class="lineno">10598</span>&#160;      v8_str(<span class="stringliteral">&quot;Parent&quot;</span>)));</div>
<div class="line"><a name="l10599"></a><span class="lineno">10599</span>&#160;</div>
<div class="line"><a name="l10600"></a><span class="lineno">10600</span>&#160;  Local&lt;v8::Value&gt; c = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;c&quot;</span>));</div>
<div class="line"><a name="l10601"></a><span class="lineno">10601</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(c-&gt;IsObject() &amp;&amp; c-&gt;ToObject()-&gt;GetConstructorName()-&gt;Equals(</div>
<div class="line"><a name="l10602"></a><span class="lineno">10602</span>&#160;      v8_str(<span class="stringliteral">&quot;Child&quot;</span>)));</div>
<div class="line"><a name="l10603"></a><span class="lineno">10603</span>&#160;</div>
<div class="line"><a name="l10604"></a><span class="lineno">10604</span>&#160;  Local&lt;v8::Value&gt; x = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line"><a name="l10605"></a><span class="lineno">10605</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(x-&gt;IsObject() &amp;&amp; x-&gt;ToObject()-&gt;GetConstructorName()-&gt;Equals(</div>
<div class="line"><a name="l10606"></a><span class="lineno">10606</span>&#160;      v8_str(<span class="stringliteral">&quot;outer.inner&quot;</span>)));</div>
<div class="line"><a name="l10607"></a><span class="lineno">10607</span>&#160;}</div>
<div class="line"><a name="l10608"></a><span class="lineno">10608</span>&#160;</div>
<div class="line"><a name="l10609"></a><span class="lineno">10609</span>&#160;</div>
<div class="line"><a name="l10610"></a><span class="lineno">10610</span>&#160;<span class="keywordtype">bool</span> ApiTestFuzzer::fuzzing_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10611"></a><span class="lineno">10611</span>&#160;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html">i::Semaphore</a>* ApiTestFuzzer::all_tests_done_=</div>
<div class="line"><a name="l10612"></a><span class="lineno">10612</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#afa44df2a14037562568d7f965d50833c">i::OS::CreateSemaphore</a>(0);</div>
<div class="line"><a name="l10613"></a><span class="lineno">10613</span>&#160;<span class="keywordtype">int</span> ApiTestFuzzer::active_tests_;</div>
<div class="line"><a name="l10614"></a><span class="lineno">10614</span>&#160;<span class="keywordtype">int</span> ApiTestFuzzer::tests_being_run_;</div>
<div class="line"><a name="l10615"></a><span class="lineno">10615</span>&#160;<span class="keywordtype">int</span> ApiTestFuzzer::current_;</div>
<div class="line"><a name="l10616"></a><span class="lineno">10616</span>&#160;</div>
<div class="line"><a name="l10617"></a><span class="lineno">10617</span>&#160;</div>
<div class="line"><a name="l10618"></a><span class="lineno">10618</span>&#160;<span class="comment">// We are in a callback and want to switch to another thread (if we</span></div>
<div class="line"><a name="l10619"></a><span class="lineno">10619</span>&#160;<span class="comment">// are currently running the thread fuzzing test).</span></div>
<div class="line"><a name="l10620"></a><span class="lineno"><a class="line" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">10620</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>() {</div>
<div class="line"><a name="l10621"></a><span class="lineno">10621</span>&#160;  <span class="keywordflow">if</span> (!fuzzing_) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l10622"></a><span class="lineno">10622</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html">ApiTestFuzzer</a>* test = <a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(current_)-&gt;<a class="code" href="../../dd/d72/class_register_threaded_test.html#a19c8896164e1d6e87aa70fee2621a726">fuzzer_</a>;</div>
<div class="line"><a name="l10623"></a><span class="lineno">10623</span>&#160;  test-&gt;ContextSwitch();</div>
<div class="line"><a name="l10624"></a><span class="lineno">10624</span>&#160;}</div>
<div class="line"><a name="l10625"></a><span class="lineno">10625</span>&#160;</div>
<div class="line"><a name="l10626"></a><span class="lineno">10626</span>&#160;</div>
<div class="line"><a name="l10627"></a><span class="lineno">10627</span>&#160;<span class="comment">// Let the next thread go.  Since it is also waiting on the V8 lock it may</span></div>
<div class="line"><a name="l10628"></a><span class="lineno">10628</span>&#160;<span class="comment">// not start immediately.</span></div>
<div class="line"><a name="l10629"></a><span class="lineno">10629</span>&#160;<span class="keywordtype">bool</span> ApiTestFuzzer::NextThread() {</div>
<div class="line"><a name="l10630"></a><span class="lineno">10630</span>&#160;  <span class="keywordtype">int</span> test_position = GetNextTestNumber();</div>
<div class="line"><a name="l10631"></a><span class="lineno">10631</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* test_name = <a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(current_)-&gt;<a class="code" href="../../dd/d72/class_register_threaded_test.html#a16e46e7c65078b1877d239968152a04e">name</a>();</div>
<div class="line"><a name="l10632"></a><span class="lineno">10632</span>&#160;  <span class="keywordflow">if</span> (test_position == current_) {</div>
<div class="line"><a name="l10633"></a><span class="lineno">10633</span>&#160;    <span class="keywordflow">if</span> (kLogThreading)</div>
<div class="line"><a name="l10634"></a><span class="lineno">10634</span>&#160;      printf(<span class="stringliteral">&quot;Stay with %s\n&quot;</span>, test_name);</div>
<div class="line"><a name="l10635"></a><span class="lineno">10635</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10636"></a><span class="lineno">10636</span>&#160;  }</div>
<div class="line"><a name="l10637"></a><span class="lineno">10637</span>&#160;  <span class="keywordflow">if</span> (kLogThreading) {</div>
<div class="line"><a name="l10638"></a><span class="lineno">10638</span>&#160;    printf(<span class="stringliteral">&quot;Switch from %s to %s\n&quot;</span>,</div>
<div class="line"><a name="l10639"></a><span class="lineno">10639</span>&#160;           test_name,</div>
<div class="line"><a name="l10640"></a><span class="lineno">10640</span>&#160;           <a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(test_position)-&gt;<a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#a862958aa3c2b9bf36903f1f0f2e81c54">name</a>());</div>
<div class="line"><a name="l10641"></a><span class="lineno">10641</span>&#160;  }</div>
<div class="line"><a name="l10642"></a><span class="lineno">10642</span>&#160;  current_ = test_position;</div>
<div class="line"><a name="l10643"></a><span class="lineno">10643</span>&#160;  <a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(current_)-&gt;<a class="code" href="../../dd/d72/class_register_threaded_test.html#a19c8896164e1d6e87aa70fee2621a726">fuzzer_</a>-&gt;gate_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a089a008fd80ce776f6dc455104cbfb9d">Signal</a>();</div>
<div class="line"><a name="l10644"></a><span class="lineno">10644</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10645"></a><span class="lineno">10645</span>&#160;}</div>
<div class="line"><a name="l10646"></a><span class="lineno">10646</span>&#160;</div>
<div class="line"><a name="l10647"></a><span class="lineno">10647</span>&#160;</div>
<div class="line"><a name="l10648"></a><span class="lineno"><a class="line" href="../../d3/d62/class_api_test_fuzzer.html#aa3eca255b6be227d7d901cc2a72017a5">10648</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#aa3eca255b6be227d7d901cc2a72017a5">ApiTestFuzzer::Run</a>() {</div>
<div class="line"><a name="l10649"></a><span class="lineno">10649</span>&#160;  <span class="comment">// When it is our turn...</span></div>
<div class="line"><a name="l10650"></a><span class="lineno">10650</span>&#160;  gate_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a7a15988824b783d07f7f7b5a226118d3">Wait</a>();</div>
<div class="line"><a name="l10651"></a><span class="lineno">10651</span>&#160;  {</div>
<div class="line"><a name="l10652"></a><span class="lineno">10652</span>&#160;    <span class="comment">// ... get the V8 lock and start running the test.</span></div>
<div class="line"><a name="l10653"></a><span class="lineno">10653</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker;</div>
<div class="line"><a name="l10654"></a><span class="lineno">10654</span>&#160;    <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#aa0283c089cd21a684112c69993dfc3f3">CallTest</a>();</div>
<div class="line"><a name="l10655"></a><span class="lineno">10655</span>&#160;  }</div>
<div class="line"><a name="l10656"></a><span class="lineno">10656</span>&#160;  <span class="comment">// This test finished.</span></div>
<div class="line"><a name="l10657"></a><span class="lineno">10657</span>&#160;  active_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10658"></a><span class="lineno">10658</span>&#160;  active_tests_--;</div>
<div class="line"><a name="l10659"></a><span class="lineno">10659</span>&#160;  <span class="comment">// If it was the last then signal that fact.</span></div>
<div class="line"><a name="l10660"></a><span class="lineno">10660</span>&#160;  <span class="keywordflow">if</span> (active_tests_ == 0) {</div>
<div class="line"><a name="l10661"></a><span class="lineno">10661</span>&#160;    all_tests_done_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a089a008fd80ce776f6dc455104cbfb9d">Signal</a>();</div>
<div class="line"><a name="l10662"></a><span class="lineno">10662</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10663"></a><span class="lineno">10663</span>&#160;    <span class="comment">// Otherwise select a new test and start that.</span></div>
<div class="line"><a name="l10664"></a><span class="lineno">10664</span>&#160;    NextThread();</div>
<div class="line"><a name="l10665"></a><span class="lineno">10665</span>&#160;  }</div>
<div class="line"><a name="l10666"></a><span class="lineno">10666</span>&#160;}</div>
<div class="line"><a name="l10667"></a><span class="lineno">10667</span>&#160;</div>
<div class="line"><a name="l10668"></a><span class="lineno">10668</span>&#160;</div>
<div class="line"><a name="l10669"></a><span class="lineno">10669</span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> linear_congruential_generator;</div>
<div class="line"><a name="l10670"></a><span class="lineno">10670</span>&#160;</div>
<div class="line"><a name="l10671"></a><span class="lineno">10671</span>&#160;</div>
<div class="line"><a name="l10672"></a><span class="lineno"><a class="line" href="../../d3/d62/class_api_test_fuzzer.html#a64c3fc883e9b7c4835020628d5297380">10672</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a64c3fc883e9b7c4835020628d5297380">ApiTestFuzzer::SetUp</a>(<a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4e">PartOfTest</a> part) {</div>
<div class="line"><a name="l10673"></a><span class="lineno">10673</span>&#160;  linear_congruential_generator = i::FLAG_testing_prng_seed;</div>
<div class="line"><a name="l10674"></a><span class="lineno">10674</span>&#160;  fuzzing_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10675"></a><span class="lineno">10675</span>&#160;  <span class="keywordtype">int</span> count = <a class="code" href="../../dd/d72/class_register_threaded_test.html#a09624f463911151150731cf8f9cb485d">RegisterThreadedTest::count</a>();</div>
<div class="line"><a name="l10676"></a><span class="lineno">10676</span>&#160;  <span class="keywordtype">int</span> start =  count * part / (<a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ead08c767f90a211701b3b88143f427916">LAST_PART</a> + 1);</div>
<div class="line"><a name="l10677"></a><span class="lineno">10677</span>&#160;  <span class="keywordtype">int</span> end = (count * (part + 1) / (<a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ead08c767f90a211701b3b88143f427916">LAST_PART</a> + 1)) - 1;</div>
<div class="line"><a name="l10678"></a><span class="lineno">10678</span>&#160;  active_tests_ = tests_being_run_ = end - start + 1;</div>
<div class="line"><a name="l10679"></a><span class="lineno">10679</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tests_being_run_; i++) {</div>
<div class="line"><a name="l10680"></a><span class="lineno">10680</span>&#160;    <a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(i)-&gt;<a class="code" href="../../dd/d72/class_register_threaded_test.html#a19c8896164e1d6e87aa70fee2621a726">fuzzer_</a> = <span class="keyword">new</span> <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a5142a8694e4392249e7859f5500150f9">ApiTestFuzzer</a>(i + start);</div>
<div class="line"><a name="l10681"></a><span class="lineno">10681</span>&#160;  }</div>
<div class="line"><a name="l10682"></a><span class="lineno">10682</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; active_tests_; i++) {</div>
<div class="line"><a name="l10683"></a><span class="lineno">10683</span>&#160;    <a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(i)-&gt;<a class="code" href="../../dd/d72/class_register_threaded_test.html#a19c8896164e1d6e87aa70fee2621a726">fuzzer_</a>-&gt;<a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a>();</div>
<div class="line"><a name="l10684"></a><span class="lineno">10684</span>&#160;  }</div>
<div class="line"><a name="l10685"></a><span class="lineno">10685</span>&#160;}</div>
<div class="line"><a name="l10686"></a><span class="lineno">10686</span>&#160;</div>
<div class="line"><a name="l10687"></a><span class="lineno">10687</span>&#160;</div>
<div class="line"><a name="l10688"></a><span class="lineno">10688</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CallTestNumber(<span class="keywordtype">int</span> test_number) {</div>
<div class="line"><a name="l10689"></a><span class="lineno">10689</span>&#160;  (<a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(test_number)-&gt;<a class="code" href="../../dd/d72/class_register_threaded_test.html#accc97bb33468bba3183666bddbb8892c">callback</a>())();</div>
<div class="line"><a name="l10690"></a><span class="lineno">10690</span>&#160;}</div>
<div class="line"><a name="l10691"></a><span class="lineno">10691</span>&#160;</div>
<div class="line"><a name="l10692"></a><span class="lineno">10692</span>&#160;</div>
<div class="line"><a name="l10693"></a><span class="lineno"><a class="line" href="../../d3/d62/class_api_test_fuzzer.html#a681847cb468289c483c1f110b251f91c">10693</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a681847cb468289c483c1f110b251f91c">ApiTestFuzzer::RunAllTests</a>() {</div>
<div class="line"><a name="l10694"></a><span class="lineno">10694</span>&#160;  <span class="comment">// Set off the first test.</span></div>
<div class="line"><a name="l10695"></a><span class="lineno">10695</span>&#160;  current_ = -1;</div>
<div class="line"><a name="l10696"></a><span class="lineno">10696</span>&#160;  NextThread();</div>
<div class="line"><a name="l10697"></a><span class="lineno">10697</span>&#160;  <span class="comment">// Wait till they are all done.</span></div>
<div class="line"><a name="l10698"></a><span class="lineno">10698</span>&#160;  all_tests_done_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a7a15988824b783d07f7f7b5a226118d3">Wait</a>();</div>
<div class="line"><a name="l10699"></a><span class="lineno">10699</span>&#160;}</div>
<div class="line"><a name="l10700"></a><span class="lineno">10700</span>&#160;</div>
<div class="line"><a name="l10701"></a><span class="lineno">10701</span>&#160;</div>
<div class="line"><a name="l10702"></a><span class="lineno">10702</span>&#160;<span class="keywordtype">int</span> ApiTestFuzzer::GetNextTestNumber() {</div>
<div class="line"><a name="l10703"></a><span class="lineno">10703</span>&#160;  <span class="keywordtype">int</span> next_test;</div>
<div class="line"><a name="l10704"></a><span class="lineno">10704</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l10705"></a><span class="lineno">10705</span>&#160;    next_test = (linear_congruential_generator &gt;&gt; 16) % tests_being_run_;</div>
<div class="line"><a name="l10706"></a><span class="lineno">10706</span>&#160;    linear_congruential_generator *= 1664525u;</div>
<div class="line"><a name="l10707"></a><span class="lineno">10707</span>&#160;    linear_congruential_generator += 1013904223u;</div>
<div class="line"><a name="l10708"></a><span class="lineno">10708</span>&#160;  } <span class="keywordflow">while</span> (!<a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(next_test)-&gt;<a class="code" href="../../dd/d72/class_register_threaded_test.html#a19c8896164e1d6e87aa70fee2621a726">fuzzer_</a>-&gt;active_);</div>
<div class="line"><a name="l10709"></a><span class="lineno">10709</span>&#160;  <span class="keywordflow">return</span> next_test;</div>
<div class="line"><a name="l10710"></a><span class="lineno">10710</span>&#160;}</div>
<div class="line"><a name="l10711"></a><span class="lineno">10711</span>&#160;</div>
<div class="line"><a name="l10712"></a><span class="lineno">10712</span>&#160;</div>
<div class="line"><a name="l10713"></a><span class="lineno">10713</span>&#160;<span class="keywordtype">void</span> ApiTestFuzzer::ContextSwitch() {</div>
<div class="line"><a name="l10714"></a><span class="lineno">10714</span>&#160;  <span class="comment">// If the new thread is the same as the current thread there is nothing to do.</span></div>
<div class="line"><a name="l10715"></a><span class="lineno">10715</span>&#160;  <span class="keywordflow">if</span> (NextThread()) {</div>
<div class="line"><a name="l10716"></a><span class="lineno">10716</span>&#160;    <span class="comment">// Now it can start.</span></div>
<div class="line"><a name="l10717"></a><span class="lineno">10717</span>&#160;    <a class="code" href="../../d6/da8/classv8_1_1_unlocker.html">v8::Unlocker</a> unlocker;</div>
<div class="line"><a name="l10718"></a><span class="lineno">10718</span>&#160;    <span class="comment">// Wait till someone starts us again.</span></div>
<div class="line"><a name="l10719"></a><span class="lineno">10719</span>&#160;    gate_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a7a15988824b783d07f7f7b5a226118d3">Wait</a>();</div>
<div class="line"><a name="l10720"></a><span class="lineno">10720</span>&#160;    <span class="comment">// And we&#39;re off.</span></div>
<div class="line"><a name="l10721"></a><span class="lineno">10721</span>&#160;  }</div>
<div class="line"><a name="l10722"></a><span class="lineno">10722</span>&#160;}</div>
<div class="line"><a name="l10723"></a><span class="lineno">10723</span>&#160;</div>
<div class="line"><a name="l10724"></a><span class="lineno">10724</span>&#160;</div>
<div class="line"><a name="l10725"></a><span class="lineno"><a class="line" href="../../d3/d62/class_api_test_fuzzer.html#a931587596081ef8178c2b128facb0411">10725</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a931587596081ef8178c2b128facb0411">ApiTestFuzzer::TearDown</a>() {</div>
<div class="line"><a name="l10726"></a><span class="lineno">10726</span>&#160;  fuzzing_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10727"></a><span class="lineno">10727</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../dd/d72/class_register_threaded_test.html#a09624f463911151150731cf8f9cb485d">RegisterThreadedTest::count</a>(); i++) {</div>
<div class="line"><a name="l10728"></a><span class="lineno">10728</span>&#160;    <a class="code" href="../../d3/d62/class_api_test_fuzzer.html">ApiTestFuzzer</a> *fuzzer = <a class="code" href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a>(i)-&gt;<a class="code" href="../../dd/d72/class_register_threaded_test.html#a19c8896164e1d6e87aa70fee2621a726">fuzzer_</a>;</div>
<div class="line"><a name="l10729"></a><span class="lineno">10729</span>&#160;    <span class="keywordflow">if</span> (fuzzer != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) fuzzer-&gt;<a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#ac24a06ec0749cb482b60f621833bddd7">Join</a>();</div>
<div class="line"><a name="l10730"></a><span class="lineno">10730</span>&#160;  }</div>
<div class="line"><a name="l10731"></a><span class="lineno">10731</span>&#160;}</div>
<div class="line"><a name="l10732"></a><span class="lineno">10732</span>&#160;</div>
<div class="line"><a name="l10733"></a><span class="lineno">10733</span>&#160;</div>
<div class="line"><a name="l10734"></a><span class="lineno">10734</span>&#160;<span class="comment">// Lets not be needlessly self-referential.</span></div>
<div class="line"><a name="l10735"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a57e88a53f8de005fd216f20a0dd82252">10735</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(Threading) {</div>
<div class="line"><a name="l10736"></a><span class="lineno">10736</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a64c3fc883e9b7c4835020628d5297380">ApiTestFuzzer::SetUp</a>(<a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ea114d34b421021eb2ac7e5f44da41db78">ApiTestFuzzer::FIRST_PART</a>);</div>
<div class="line"><a name="l10737"></a><span class="lineno">10737</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a681847cb468289c483c1f110b251f91c">ApiTestFuzzer::RunAllTests</a>();</div>
<div class="line"><a name="l10738"></a><span class="lineno">10738</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a931587596081ef8178c2b128facb0411">ApiTestFuzzer::TearDown</a>();</div>
<div class="line"><a name="l10739"></a><span class="lineno">10739</span>&#160;}</div>
<div class="line"><a name="l10740"></a><span class="lineno">10740</span>&#160;</div>
<div class="line"><a name="l10741"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a363a347891d5795bd0417922bc37062b">10741</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(Threading2) {</div>
<div class="line"><a name="l10742"></a><span class="lineno">10742</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a64c3fc883e9b7c4835020628d5297380">ApiTestFuzzer::SetUp</a>(<a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ea835d902e5aba1c0bf956cfd43ad64987">ApiTestFuzzer::SECOND_PART</a>);</div>
<div class="line"><a name="l10743"></a><span class="lineno">10743</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a681847cb468289c483c1f110b251f91c">ApiTestFuzzer::RunAllTests</a>();</div>
<div class="line"><a name="l10744"></a><span class="lineno">10744</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a931587596081ef8178c2b128facb0411">ApiTestFuzzer::TearDown</a>();</div>
<div class="line"><a name="l10745"></a><span class="lineno">10745</span>&#160;}</div>
<div class="line"><a name="l10746"></a><span class="lineno">10746</span>&#160;</div>
<div class="line"><a name="l10747"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0ef51968c58bacaa68fe47de3a79e64e">10747</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(Threading3) {</div>
<div class="line"><a name="l10748"></a><span class="lineno">10748</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a64c3fc883e9b7c4835020628d5297380">ApiTestFuzzer::SetUp</a>(<a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ea229260f339f7a6497d50fa56da453d6f">ApiTestFuzzer::THIRD_PART</a>);</div>
<div class="line"><a name="l10749"></a><span class="lineno">10749</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a681847cb468289c483c1f110b251f91c">ApiTestFuzzer::RunAllTests</a>();</div>
<div class="line"><a name="l10750"></a><span class="lineno">10750</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a931587596081ef8178c2b128facb0411">ApiTestFuzzer::TearDown</a>();</div>
<div class="line"><a name="l10751"></a><span class="lineno">10751</span>&#160;}</div>
<div class="line"><a name="l10752"></a><span class="lineno">10752</span>&#160;</div>
<div class="line"><a name="l10753"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa3ec7ab0494673247ab7d5a38d3da593">10753</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(Threading4) {</div>
<div class="line"><a name="l10754"></a><span class="lineno">10754</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a64c3fc883e9b7c4835020628d5297380">ApiTestFuzzer::SetUp</a>(<a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4eada621347bd95e2408d21301c0ef090c5">ApiTestFuzzer::FOURTH_PART</a>);</div>
<div class="line"><a name="l10755"></a><span class="lineno">10755</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a681847cb468289c483c1f110b251f91c">ApiTestFuzzer::RunAllTests</a>();</div>
<div class="line"><a name="l10756"></a><span class="lineno">10756</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#a931587596081ef8178c2b128facb0411">ApiTestFuzzer::TearDown</a>();</div>
<div class="line"><a name="l10757"></a><span class="lineno">10757</span>&#160;}</div>
<div class="line"><a name="l10758"></a><span class="lineno">10758</span>&#160;</div>
<div class="line"><a name="l10759"></a><span class="lineno"><a class="line" href="../../d3/d62/class_api_test_fuzzer.html#aa0283c089cd21a684112c69993dfc3f3">10759</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#aa0283c089cd21a684112c69993dfc3f3">ApiTestFuzzer::CallTest</a>() {</div>
<div class="line"><a name="l10760"></a><span class="lineno">10760</span>&#160;  <span class="keywordflow">if</span> (kLogThreading)</div>
<div class="line"><a name="l10761"></a><span class="lineno">10761</span>&#160;    printf(<span class="stringliteral">&quot;Start test %d\n&quot;</span>, test_number_);</div>
<div class="line"><a name="l10762"></a><span class="lineno">10762</span>&#160;  CallTestNumber(test_number_);</div>
<div class="line"><a name="l10763"></a><span class="lineno">10763</span>&#160;  <span class="keywordflow">if</span> (kLogThreading)</div>
<div class="line"><a name="l10764"></a><span class="lineno">10764</span>&#160;    printf(<span class="stringliteral">&quot;End test %d\n&quot;</span>, test_number_);</div>
<div class="line"><a name="l10765"></a><span class="lineno">10765</span>&#160;}</div>
<div class="line"><a name="l10766"></a><span class="lineno">10766</span>&#160;</div>
<div class="line"><a name="l10767"></a><span class="lineno">10767</span>&#160;</div>
<div class="line"><a name="l10768"></a><span class="lineno">10768</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ThrowInJS(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l10769"></a><span class="lineno">10769</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d1/d80/classv8_1_1_locker.html#a6b4fbf2757abc790f9a1d229716066aa">v8::Locker::IsLocked</a>());</div>
<div class="line"><a name="l10770"></a><span class="lineno">10770</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10771"></a><span class="lineno">10771</span>&#160;  <a class="code" href="../../d6/da8/classv8_1_1_unlocker.html">v8::Unlocker</a> unlocker;</div>
<div class="line"><a name="l10772"></a><span class="lineno">10772</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code = <span class="stringliteral">&quot;throw 7;&quot;</span>;</div>
<div class="line"><a name="l10773"></a><span class="lineno">10773</span>&#160;  {</div>
<div class="line"><a name="l10774"></a><span class="lineno">10774</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> nested_locker;</div>
<div class="line"><a name="l10775"></a><span class="lineno">10775</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10776"></a><span class="lineno">10776</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> exception;</div>
<div class="line"><a name="l10777"></a><span class="lineno">10777</span>&#160;    { <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l10778"></a><span class="lineno">10778</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(code);</div>
<div class="line"><a name="l10779"></a><span class="lineno">10779</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l10780"></a><span class="lineno">10780</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l10781"></a><span class="lineno">10781</span>&#160;      <span class="comment">// Make sure to wrap the exception in a new handle because</span></div>
<div class="line"><a name="l10782"></a><span class="lineno">10782</span>&#160;      <span class="comment">// the handle returned from the TryCatch is destroyed</span></div>
<div class="line"><a name="l10783"></a><span class="lineno">10783</span>&#160;      <span class="comment">// when the TryCatch is destroyed.</span></div>
<div class="line"><a name="l10784"></a><span class="lineno">10784</span>&#160;      exception = Local&lt;Value&gt;::New(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l10785"></a><span class="lineno">10785</span>&#160;    }</div>
<div class="line"><a name="l10786"></a><span class="lineno">10786</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a>(exception);</div>
<div class="line"><a name="l10787"></a><span class="lineno">10787</span>&#160;  }</div>
<div class="line"><a name="l10788"></a><span class="lineno">10788</span>&#160;}</div>
<div class="line"><a name="l10789"></a><span class="lineno">10789</span>&#160;</div>
<div class="line"><a name="l10790"></a><span class="lineno">10790</span>&#160;</div>
<div class="line"><a name="l10791"></a><span class="lineno">10791</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> ThrowInJSNoCatch(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l10792"></a><span class="lineno">10792</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d1/d80/classv8_1_1_locker.html#a6b4fbf2757abc790f9a1d229716066aa">v8::Locker::IsLocked</a>());</div>
<div class="line"><a name="l10793"></a><span class="lineno">10793</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10794"></a><span class="lineno">10794</span>&#160;  <a class="code" href="../../d6/da8/classv8_1_1_unlocker.html">v8::Unlocker</a> unlocker;</div>
<div class="line"><a name="l10795"></a><span class="lineno">10795</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code = <span class="stringliteral">&quot;throw 7;&quot;</span>;</div>
<div class="line"><a name="l10796"></a><span class="lineno">10796</span>&#160;  {</div>
<div class="line"><a name="l10797"></a><span class="lineno">10797</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> nested_locker;</div>
<div class="line"><a name="l10798"></a><span class="lineno">10798</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10799"></a><span class="lineno">10799</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = CompileRun(code);</div>
<div class="line"><a name="l10800"></a><span class="lineno">10800</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l10801"></a><span class="lineno">10801</span>&#160;    <span class="keywordflow">return</span> v8_str(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l10802"></a><span class="lineno">10802</span>&#160;  }</div>
<div class="line"><a name="l10803"></a><span class="lineno">10803</span>&#160;}</div>
<div class="line"><a name="l10804"></a><span class="lineno">10804</span>&#160;</div>
<div class="line"><a name="l10805"></a><span class="lineno">10805</span>&#160;</div>
<div class="line"><a name="l10806"></a><span class="lineno">10806</span>&#160;<span class="comment">// These are locking tests that don&#39;t need to be run again</span></div>
<div class="line"><a name="l10807"></a><span class="lineno">10807</span>&#160;<span class="comment">// as part of the locking aggregation tests.</span></div>
<div class="line"><a name="l10808"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6743914b22ff5c3502d6254940b1f492">10808</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(NestedLockers) {</div>
<div class="line"><a name="l10809"></a><span class="lineno">10809</span>&#160;  <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker;</div>
<div class="line"><a name="l10810"></a><span class="lineno">10810</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d1/d80/classv8_1_1_locker.html#a6b4fbf2757abc790f9a1d229716066aa">v8::Locker::IsLocked</a>());</div>
<div class="line"><a name="l10811"></a><span class="lineno">10811</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10812"></a><span class="lineno">10812</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l10813"></a><span class="lineno">10813</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(ThrowInJS);</div>
<div class="line"><a name="l10814"></a><span class="lineno">10814</span>&#160;  Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l10815"></a><span class="lineno">10815</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;throw_in_js&quot;</span>), fun);</div>
<div class="line"><a name="l10816"></a><span class="lineno">10816</span>&#160;  Local&lt;Script&gt; script = v8_compile(<span class="stringliteral">&quot;(function () {&quot;</span></div>
<div class="line"><a name="l10817"></a><span class="lineno">10817</span>&#160;                                    <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l10818"></a><span class="lineno">10818</span>&#160;                                    <span class="stringliteral">&quot;    throw_in_js();&quot;</span></div>
<div class="line"><a name="l10819"></a><span class="lineno">10819</span>&#160;                                    <span class="stringliteral">&quot;    return 42;&quot;</span></div>
<div class="line"><a name="l10820"></a><span class="lineno">10820</span>&#160;                                    <span class="stringliteral">&quot;  } catch (e) {&quot;</span></div>
<div class="line"><a name="l10821"></a><span class="lineno">10821</span>&#160;                                    <span class="stringliteral">&quot;    return e * 13;&quot;</span></div>
<div class="line"><a name="l10822"></a><span class="lineno">10822</span>&#160;                                    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l10823"></a><span class="lineno">10823</span>&#160;                                    <span class="stringliteral">&quot;})();&quot;</span>);</div>
<div class="line"><a name="l10824"></a><span class="lineno">10824</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(91, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l10825"></a><span class="lineno">10825</span>&#160;}</div>
<div class="line"><a name="l10826"></a><span class="lineno">10826</span>&#160;</div>
<div class="line"><a name="l10827"></a><span class="lineno">10827</span>&#160;</div>
<div class="line"><a name="l10828"></a><span class="lineno">10828</span>&#160;<span class="comment">// These are locking tests that don&#39;t need to be run again</span></div>
<div class="line"><a name="l10829"></a><span class="lineno">10829</span>&#160;<span class="comment">// as part of the locking aggregation tests.</span></div>
<div class="line"><a name="l10830"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7682775323aa398cf13b44a3b0a740e1">10830</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(NestedLockersNoTryCatch) {</div>
<div class="line"><a name="l10831"></a><span class="lineno">10831</span>&#160;  <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker;</div>
<div class="line"><a name="l10832"></a><span class="lineno">10832</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10833"></a><span class="lineno">10833</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l10834"></a><span class="lineno">10834</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun_templ =</div>
<div class="line"><a name="l10835"></a><span class="lineno">10835</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(ThrowInJSNoCatch);</div>
<div class="line"><a name="l10836"></a><span class="lineno">10836</span>&#160;  Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l10837"></a><span class="lineno">10837</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;throw_in_js&quot;</span>), fun);</div>
<div class="line"><a name="l10838"></a><span class="lineno">10838</span>&#160;  Local&lt;Script&gt; script = v8_compile(<span class="stringliteral">&quot;(function () {&quot;</span></div>
<div class="line"><a name="l10839"></a><span class="lineno">10839</span>&#160;                                    <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l10840"></a><span class="lineno">10840</span>&#160;                                    <span class="stringliteral">&quot;    throw_in_js();&quot;</span></div>
<div class="line"><a name="l10841"></a><span class="lineno">10841</span>&#160;                                    <span class="stringliteral">&quot;    return 42;&quot;</span></div>
<div class="line"><a name="l10842"></a><span class="lineno">10842</span>&#160;                                    <span class="stringliteral">&quot;  } catch (e) {&quot;</span></div>
<div class="line"><a name="l10843"></a><span class="lineno">10843</span>&#160;                                    <span class="stringliteral">&quot;    return e * 13;&quot;</span></div>
<div class="line"><a name="l10844"></a><span class="lineno">10844</span>&#160;                                    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l10845"></a><span class="lineno">10845</span>&#160;                                    <span class="stringliteral">&quot;})();&quot;</span>);</div>
<div class="line"><a name="l10846"></a><span class="lineno">10846</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(91, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l10847"></a><span class="lineno">10847</span>&#160;}</div>
<div class="line"><a name="l10848"></a><span class="lineno">10848</span>&#160;</div>
<div class="line"><a name="l10849"></a><span class="lineno">10849</span>&#160;</div>
<div class="line"><a name="l10850"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8a2cf5d7e0e393eba607f155a298ed6b">10850</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(RecursiveLocking) {</div>
<div class="line"><a name="l10851"></a><span class="lineno">10851</span>&#160;  <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker;</div>
<div class="line"><a name="l10852"></a><span class="lineno">10852</span>&#160;  {</div>
<div class="line"><a name="l10853"></a><span class="lineno">10853</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker2;</div>
<div class="line"><a name="l10854"></a><span class="lineno">10854</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d1/d80/classv8_1_1_locker.html#a6b4fbf2757abc790f9a1d229716066aa">v8::Locker::IsLocked</a>());</div>
<div class="line"><a name="l10855"></a><span class="lineno">10855</span>&#160;  }</div>
<div class="line"><a name="l10856"></a><span class="lineno">10856</span>&#160;}</div>
<div class="line"><a name="l10857"></a><span class="lineno">10857</span>&#160;</div>
<div class="line"><a name="l10858"></a><span class="lineno">10858</span>&#160;</div>
<div class="line"><a name="l10859"></a><span class="lineno">10859</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> UnlockForAMoment(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l10860"></a><span class="lineno">10860</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l10861"></a><span class="lineno">10861</span>&#160;  <a class="code" href="../../d6/da8/classv8_1_1_unlocker.html">v8::Unlocker</a> unlocker;</div>
<div class="line"><a name="l10862"></a><span class="lineno">10862</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l10863"></a><span class="lineno">10863</span>&#160;}</div>
<div class="line"><a name="l10864"></a><span class="lineno">10864</span>&#160;</div>
<div class="line"><a name="l10865"></a><span class="lineno">10865</span>&#160;</div>
<div class="line"><a name="l10866"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1cb026aed23f02cc36ef799361cc439a">10866</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(LockUnlockLock) {</div>
<div class="line"><a name="l10867"></a><span class="lineno">10867</span>&#160;  {</div>
<div class="line"><a name="l10868"></a><span class="lineno">10868</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker;</div>
<div class="line"><a name="l10869"></a><span class="lineno">10869</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10870"></a><span class="lineno">10870</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l10871"></a><span class="lineno">10871</span>&#160;    Local&lt;v8::FunctionTemplate&gt; fun_templ =</div>
<div class="line"><a name="l10872"></a><span class="lineno">10872</span>&#160;        <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(UnlockForAMoment);</div>
<div class="line"><a name="l10873"></a><span class="lineno">10873</span>&#160;    Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l10874"></a><span class="lineno">10874</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;unlock_for_a_moment&quot;</span>), fun);</div>
<div class="line"><a name="l10875"></a><span class="lineno">10875</span>&#160;    Local&lt;Script&gt; script = v8_compile(<span class="stringliteral">&quot;(function () {&quot;</span></div>
<div class="line"><a name="l10876"></a><span class="lineno">10876</span>&#160;                                      <span class="stringliteral">&quot;  unlock_for_a_moment();&quot;</span></div>
<div class="line"><a name="l10877"></a><span class="lineno">10877</span>&#160;                                      <span class="stringliteral">&quot;  return 42;&quot;</span></div>
<div class="line"><a name="l10878"></a><span class="lineno">10878</span>&#160;                                      <span class="stringliteral">&quot;})();&quot;</span>);</div>
<div class="line"><a name="l10879"></a><span class="lineno">10879</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l10880"></a><span class="lineno">10880</span>&#160;  }</div>
<div class="line"><a name="l10881"></a><span class="lineno">10881</span>&#160;  {</div>
<div class="line"><a name="l10882"></a><span class="lineno">10882</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker;</div>
<div class="line"><a name="l10883"></a><span class="lineno">10883</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10884"></a><span class="lineno">10884</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l10885"></a><span class="lineno">10885</span>&#160;    Local&lt;v8::FunctionTemplate&gt; fun_templ =</div>
<div class="line"><a name="l10886"></a><span class="lineno">10886</span>&#160;        <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(UnlockForAMoment);</div>
<div class="line"><a name="l10887"></a><span class="lineno">10887</span>&#160;    Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l10888"></a><span class="lineno">10888</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;unlock_for_a_moment&quot;</span>), fun);</div>
<div class="line"><a name="l10889"></a><span class="lineno">10889</span>&#160;    Local&lt;Script&gt; script = v8_compile(<span class="stringliteral">&quot;(function () {&quot;</span></div>
<div class="line"><a name="l10890"></a><span class="lineno">10890</span>&#160;                                      <span class="stringliteral">&quot;  unlock_for_a_moment();&quot;</span></div>
<div class="line"><a name="l10891"></a><span class="lineno">10891</span>&#160;                                      <span class="stringliteral">&quot;  return 42;&quot;</span></div>
<div class="line"><a name="l10892"></a><span class="lineno">10892</span>&#160;                                      <span class="stringliteral">&quot;})();&quot;</span>);</div>
<div class="line"><a name="l10893"></a><span class="lineno">10893</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, script-&gt;Run()-&gt;Int32Value());</div>
<div class="line"><a name="l10894"></a><span class="lineno">10894</span>&#160;  }</div>
<div class="line"><a name="l10895"></a><span class="lineno">10895</span>&#160;}</div>
<div class="line"><a name="l10896"></a><span class="lineno">10896</span>&#160;</div>
<div class="line"><a name="l10897"></a><span class="lineno">10897</span>&#160;</div>
<div class="line"><a name="l10898"></a><span class="lineno">10898</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> GetGlobalObjectsCount() {</div>
<div class="line"><a name="l10899"></a><span class="lineno">10899</span>&#160;  i::Isolate::Current()-&gt;heap()-&gt;EnsureHeapIsIterable();</div>
<div class="line"><a name="l10900"></a><span class="lineno">10900</span>&#160;  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l10901"></a><span class="lineno">10901</span>&#160;  i::HeapIterator it;</div>
<div class="line"><a name="l10902"></a><span class="lineno">10902</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html">i::HeapObject</a>* <span class="keywordtype">object</span> = it.next(); <span class="keywordtype">object</span> != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>; <span class="keywordtype">object</span> = it.next())</div>
<div class="line"><a name="l10903"></a><span class="lineno">10903</span>&#160;    <span class="keywordflow">if</span> (object-&gt;IsJSGlobalObject()) count++;</div>
<div class="line"><a name="l10904"></a><span class="lineno">10904</span>&#160;  <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l10905"></a><span class="lineno">10905</span>&#160;}</div>
<div class="line"><a name="l10906"></a><span class="lineno">10906</span>&#160;</div>
<div class="line"><a name="l10907"></a><span class="lineno">10907</span>&#160;</div>
<div class="line"><a name="l10908"></a><span class="lineno">10908</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckSurvivingGlobalObjectsCount(<span class="keywordtype">int</span> expected) {</div>
<div class="line"><a name="l10909"></a><span class="lineno">10909</span>&#160;  <span class="comment">// We need to collect all garbage twice to be sure that everything</span></div>
<div class="line"><a name="l10910"></a><span class="lineno">10910</span>&#160;  <span class="comment">// has been collected.  This is because inline caches are cleared in</span></div>
<div class="line"><a name="l10911"></a><span class="lineno">10911</span>&#160;  <span class="comment">// the first garbage collection but some of the maps have already</span></div>
<div class="line"><a name="l10912"></a><span class="lineno">10912</span>&#160;  <span class="comment">// been marked at that point.  Therefore some of the maps are not</span></div>
<div class="line"><a name="l10913"></a><span class="lineno">10913</span>&#160;  <span class="comment">// collected until the second garbage collection.</span></div>
<div class="line"><a name="l10914"></a><span class="lineno">10914</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l10915"></a><span class="lineno">10915</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#afbaa9137eb86d66f958fcc41a77c2fea">i::Heap::kMakeHeapIterableMask</a>);</div>
<div class="line"><a name="l10916"></a><span class="lineno">10916</span>&#160;  <span class="keywordtype">int</span> count = GetGlobalObjectsCount();</div>
<div class="line"><a name="l10917"></a><span class="lineno">10917</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l10918"></a><span class="lineno">10918</span>&#160;  <span class="keywordflow">if</span> (count != expected) <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;TracePathToGlobal();</div>
<div class="line"><a name="l10919"></a><span class="lineno">10919</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l10920"></a><span class="lineno">10920</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected, count);</div>
<div class="line"><a name="l10921"></a><span class="lineno">10921</span>&#160;}</div>
<div class="line"><a name="l10922"></a><span class="lineno">10922</span>&#160;</div>
<div class="line"><a name="l10923"></a><span class="lineno">10923</span>&#160;</div>
<div class="line"><a name="l10924"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8d1bb9a72841f11da5e002ebd16e94d4">10924</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DontLeakGlobalObjects) {</div>
<div class="line"><a name="l10925"></a><span class="lineno">10925</span>&#160;  <span class="comment">// Regression test for issues 1139850 and 1174891.</span></div>
<div class="line"><a name="l10926"></a><span class="lineno">10926</span>&#160;</div>
<div class="line"><a name="l10927"></a><span class="lineno">10927</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l10928"></a><span class="lineno">10928</span>&#160;</div>
<div class="line"><a name="l10929"></a><span class="lineno">10929</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 5; i++) {</div>
<div class="line"><a name="l10930"></a><span class="lineno">10930</span>&#160;    { <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10931"></a><span class="lineno">10931</span>&#160;      <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10932"></a><span class="lineno">10932</span>&#160;    }</div>
<div class="line"><a name="l10933"></a><span class="lineno">10933</span>&#160;    <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l10934"></a><span class="lineno">10934</span>&#160;    CheckSurvivingGlobalObjectsCount(0);</div>
<div class="line"><a name="l10935"></a><span class="lineno">10935</span>&#160;</div>
<div class="line"><a name="l10936"></a><span class="lineno">10936</span>&#160;    { <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10937"></a><span class="lineno">10937</span>&#160;      <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10938"></a><span class="lineno">10938</span>&#160;      v8_compile(<span class="stringliteral">&quot;Date&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10939"></a><span class="lineno">10939</span>&#160;    }</div>
<div class="line"><a name="l10940"></a><span class="lineno">10940</span>&#160;    <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l10941"></a><span class="lineno">10941</span>&#160;    CheckSurvivingGlobalObjectsCount(0);</div>
<div class="line"><a name="l10942"></a><span class="lineno">10942</span>&#160;</div>
<div class="line"><a name="l10943"></a><span class="lineno">10943</span>&#160;    { <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10944"></a><span class="lineno">10944</span>&#160;      <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10945"></a><span class="lineno">10945</span>&#160;      v8_compile(<span class="stringliteral">&quot;/aaa/&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10946"></a><span class="lineno">10946</span>&#160;    }</div>
<div class="line"><a name="l10947"></a><span class="lineno">10947</span>&#160;    <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l10948"></a><span class="lineno">10948</span>&#160;    CheckSurvivingGlobalObjectsCount(0);</div>
<div class="line"><a name="l10949"></a><span class="lineno">10949</span>&#160;</div>
<div class="line"><a name="l10950"></a><span class="lineno">10950</span>&#160;    { <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10951"></a><span class="lineno">10951</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* extension_list[] = { <span class="stringliteral">&quot;v8/gc&quot;</span> };</div>
<div class="line"><a name="l10952"></a><span class="lineno">10952</span>&#160;      <a class="code" href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a> extensions(1, extension_list);</div>
<div class="line"><a name="l10953"></a><span class="lineno">10953</span>&#160;      <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(&amp;extensions);</div>
<div class="line"><a name="l10954"></a><span class="lineno">10954</span>&#160;      v8_compile(<span class="stringliteral">&quot;gc();&quot;</span>)-&gt;Run();</div>
<div class="line"><a name="l10955"></a><span class="lineno">10955</span>&#160;    }</div>
<div class="line"><a name="l10956"></a><span class="lineno">10956</span>&#160;    <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l10957"></a><span class="lineno">10957</span>&#160;    CheckSurvivingGlobalObjectsCount(0);</div>
<div class="line"><a name="l10958"></a><span class="lineno">10958</span>&#160;  }</div>
<div class="line"><a name="l10959"></a><span class="lineno">10959</span>&#160;}</div>
<div class="line"><a name="l10960"></a><span class="lineno">10960</span>&#160;</div>
<div class="line"><a name="l10961"></a><span class="lineno">10961</span>&#160;</div>
<div class="line"><a name="l10962"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5ec71a180fc7b6e909170dbd40572ec2">10962</a></span>&#160;<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a5ec71a180fc7b6e909170dbd40572ec2">some_object</a>;</div>
<div class="line"><a name="l10963"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af3432807190055ecefc6fed6533e00d3">10963</a></span>&#160;<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#af3432807190055ecefc6fed6533e00d3">bad_handle</a>;</div>
<div class="line"><a name="l10964"></a><span class="lineno">10964</span>&#160;</div>
<div class="line"><a name="l10965"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1d9b6a814f5cf4498c92c9e9d0a1d5d3">10965</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a1d9b6a814f5cf4498c92c9e9d0a1d5d3">NewPersistentHandleCallback</a>(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> handle, <span class="keywordtype">void</span>*) {</div>
<div class="line"><a name="l10966"></a><span class="lineno">10966</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10967"></a><span class="lineno">10967</span>&#160;  bad_handle = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(some_object);</div>
<div class="line"><a name="l10968"></a><span class="lineno">10968</span>&#160;  handle.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l10969"></a><span class="lineno">10969</span>&#160;}</div>
<div class="line"><a name="l10970"></a><span class="lineno">10970</span>&#160;</div>
<div class="line"><a name="l10971"></a><span class="lineno">10971</span>&#160;</div>
<div class="line"><a name="l10972"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a10611180d5e3231aebd35abdb12f9593">10972</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NewPersistentHandleFromWeakCallback) {</div>
<div class="line"><a name="l10973"></a><span class="lineno">10973</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l10974"></a><span class="lineno">10974</span>&#160;</div>
<div class="line"><a name="l10975"></a><span class="lineno">10975</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> handle1, handle2;</div>
<div class="line"><a name="l10976"></a><span class="lineno">10976</span>&#160;  {</div>
<div class="line"><a name="l10977"></a><span class="lineno">10977</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l10978"></a><span class="lineno">10978</span>&#160;    some_object = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l10979"></a><span class="lineno">10979</span>&#160;    handle1 = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l10980"></a><span class="lineno">10980</span>&#160;    handle2 = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l10981"></a><span class="lineno">10981</span>&#160;  }</div>
<div class="line"><a name="l10982"></a><span class="lineno">10982</span>&#160;  <span class="comment">// Note: order is implementation dependent alas: currently</span></div>
<div class="line"><a name="l10983"></a><span class="lineno">10983</span>&#160;  <span class="comment">// global handle nodes are processed by PostGarbageCollectionProcessing</span></div>
<div class="line"><a name="l10984"></a><span class="lineno">10984</span>&#160;  <span class="comment">// in reverse allocation order, so if second allocated handle is deleted,</span></div>
<div class="line"><a name="l10985"></a><span class="lineno">10985</span>&#160;  <span class="comment">// weak callback of the first handle would be able to &#39;reallocate&#39; it.</span></div>
<div class="line"><a name="l10986"></a><span class="lineno">10986</span>&#160;  handle1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a5610d667bc793ba0af838bb134941bec">MakeWeak</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a1d9b6a814f5cf4498c92c9e9d0a1d5d3">NewPersistentHandleCallback</a>);</div>
<div class="line"><a name="l10987"></a><span class="lineno">10987</span>&#160;  handle2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l10988"></a><span class="lineno">10988</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l10989"></a><span class="lineno">10989</span>&#160;}</div>
<div class="line"><a name="l10990"></a><span class="lineno">10990</span>&#160;</div>
<div class="line"><a name="l10991"></a><span class="lineno">10991</span>&#160;</div>
<div class="line"><a name="l10992"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aaa262b83e38c857579e8aa51aa8286ed">10992</a></span>&#160;<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#aaa262b83e38c857579e8aa51aa8286ed">to_be_disposed</a>;</div>
<div class="line"><a name="l10993"></a><span class="lineno">10993</span>&#160;</div>
<div class="line"><a name="l10994"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0cdcc7fd63457b883bf222b5a182ac1c">10994</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a0cdcc7fd63457b883bf222b5a182ac1c">DisposeAndForceGcCallback</a>(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> handle, <span class="keywordtype">void</span>*) {</div>
<div class="line"><a name="l10995"></a><span class="lineno">10995</span>&#160;  to_be_disposed.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l10996"></a><span class="lineno">10996</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l10997"></a><span class="lineno">10997</span>&#160;  handle.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l10998"></a><span class="lineno">10998</span>&#160;}</div>
<div class="line"><a name="l10999"></a><span class="lineno">10999</span>&#160;</div>
<div class="line"><a name="l11000"></a><span class="lineno">11000</span>&#160;</div>
<div class="line"><a name="l11001"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab6547c0d634d76311bc9459441b6602a">11001</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DoNotUseDeletedNodesInSecondLevelGc) {</div>
<div class="line"><a name="l11002"></a><span class="lineno">11002</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11003"></a><span class="lineno">11003</span>&#160;</div>
<div class="line"><a name="l11004"></a><span class="lineno">11004</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> handle1, handle2;</div>
<div class="line"><a name="l11005"></a><span class="lineno">11005</span>&#160;  {</div>
<div class="line"><a name="l11006"></a><span class="lineno">11006</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11007"></a><span class="lineno">11007</span>&#160;    handle1 = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l11008"></a><span class="lineno">11008</span>&#160;    handle2 = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l11009"></a><span class="lineno">11009</span>&#160;  }</div>
<div class="line"><a name="l11010"></a><span class="lineno">11010</span>&#160;  handle1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a5610d667bc793ba0af838bb134941bec">MakeWeak</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a0cdcc7fd63457b883bf222b5a182ac1c">DisposeAndForceGcCallback</a>);</div>
<div class="line"><a name="l11011"></a><span class="lineno">11011</span>&#160;  to_be_disposed = handle2;</div>
<div class="line"><a name="l11012"></a><span class="lineno">11012</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l11013"></a><span class="lineno">11013</span>&#160;}</div>
<div class="line"><a name="l11014"></a><span class="lineno">11014</span>&#160;</div>
<div class="line"><a name="l11015"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aff4453b613830466f1275e222d0e54d1">11015</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#aff4453b613830466f1275e222d0e54d1">DisposingCallback</a>(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> handle, <span class="keywordtype">void</span>*) {</div>
<div class="line"><a name="l11016"></a><span class="lineno">11016</span>&#160;  handle.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l11017"></a><span class="lineno">11017</span>&#160;}</div>
<div class="line"><a name="l11018"></a><span class="lineno">11018</span>&#160;</div>
<div class="line"><a name="l11019"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4975dd062d6f5f17a8ee20177807fe22">11019</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a4975dd062d6f5f17a8ee20177807fe22">HandleCreatingCallback</a>(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> handle, <span class="keywordtype">void</span>*) {</div>
<div class="line"><a name="l11020"></a><span class="lineno">11020</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11021"></a><span class="lineno">11021</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l11022"></a><span class="lineno">11022</span>&#160;  handle.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l11023"></a><span class="lineno">11023</span>&#160;}</div>
<div class="line"><a name="l11024"></a><span class="lineno">11024</span>&#160;</div>
<div class="line"><a name="l11025"></a><span class="lineno">11025</span>&#160;</div>
<div class="line"><a name="l11026"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa0c67ee672616d24c2b2b8ff971f4aa8">11026</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NoGlobalHandlesOrphaningDueToWeakCallback) {</div>
<div class="line"><a name="l11027"></a><span class="lineno">11027</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11028"></a><span class="lineno">11028</span>&#160;</div>
<div class="line"><a name="l11029"></a><span class="lineno">11029</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> handle1, handle2, handle3;</div>
<div class="line"><a name="l11030"></a><span class="lineno">11030</span>&#160;  {</div>
<div class="line"><a name="l11031"></a><span class="lineno">11031</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11032"></a><span class="lineno">11032</span>&#160;    handle3 = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l11033"></a><span class="lineno">11033</span>&#160;    handle2 = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l11034"></a><span class="lineno">11034</span>&#160;    handle1 = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l11035"></a><span class="lineno">11035</span>&#160;  }</div>
<div class="line"><a name="l11036"></a><span class="lineno">11036</span>&#160;  handle2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a5610d667bc793ba0af838bb134941bec">MakeWeak</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#aff4453b613830466f1275e222d0e54d1">DisposingCallback</a>);</div>
<div class="line"><a name="l11037"></a><span class="lineno">11037</span>&#160;  handle3.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a5610d667bc793ba0af838bb134941bec">MakeWeak</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a4975dd062d6f5f17a8ee20177807fe22">HandleCreatingCallback</a>);</div>
<div class="line"><a name="l11038"></a><span class="lineno">11038</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l11039"></a><span class="lineno">11039</span>&#160;}</div>
<div class="line"><a name="l11040"></a><span class="lineno">11040</span>&#160;</div>
<div class="line"><a name="l11041"></a><span class="lineno">11041</span>&#160;</div>
<div class="line"><a name="l11042"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a624f349b8f10f6d904c931a95d5a8efb">11042</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CheckForCrossContextObjectLiterals) {</div>
<div class="line"><a name="l11043"></a><span class="lineno">11043</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l11044"></a><span class="lineno">11044</span>&#160;</div>
<div class="line"><a name="l11045"></a><span class="lineno">11045</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> nof = 2;</div>
<div class="line"><a name="l11046"></a><span class="lineno">11046</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* sources[nof] = {</div>
<div class="line"><a name="l11047"></a><span class="lineno">11047</span>&#160;    <span class="stringliteral">&quot;try { [ 2, 3, 4 ].forEach(5); } catch(e) { e.toString(); }&quot;</span>,</div>
<div class="line"><a name="l11048"></a><span class="lineno">11048</span>&#160;    <span class="stringliteral">&quot;Object()&quot;</span></div>
<div class="line"><a name="l11049"></a><span class="lineno">11049</span>&#160;  };</div>
<div class="line"><a name="l11050"></a><span class="lineno">11050</span>&#160;</div>
<div class="line"><a name="l11051"></a><span class="lineno">11051</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nof; i++) {</div>
<div class="line"><a name="l11052"></a><span class="lineno">11052</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* source = sources[i];</div>
<div class="line"><a name="l11053"></a><span class="lineno">11053</span>&#160;    { <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11054"></a><span class="lineno">11054</span>&#160;      <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11055"></a><span class="lineno">11055</span>&#160;      CompileRun(source);</div>
<div class="line"><a name="l11056"></a><span class="lineno">11056</span>&#160;    }</div>
<div class="line"><a name="l11057"></a><span class="lineno">11057</span>&#160;    { <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11058"></a><span class="lineno">11058</span>&#160;      <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11059"></a><span class="lineno">11059</span>&#160;      CompileRun(source);</div>
<div class="line"><a name="l11060"></a><span class="lineno">11060</span>&#160;    }</div>
<div class="line"><a name="l11061"></a><span class="lineno">11061</span>&#160;  }</div>
<div class="line"><a name="l11062"></a><span class="lineno">11062</span>&#160;}</div>
<div class="line"><a name="l11063"></a><span class="lineno">11063</span>&#160;</div>
<div class="line"><a name="l11064"></a><span class="lineno">11064</span>&#160;</div>
<div class="line"><a name="l11065"></a><span class="lineno">11065</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NestedScope(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env) {</div>
<div class="line"><a name="l11066"></a><span class="lineno">11066</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> inner;</div>
<div class="line"><a name="l11067"></a><span class="lineno">11067</span>&#160;  env-&gt;Enter();</div>
<div class="line"><a name="l11068"></a><span class="lineno">11068</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> three = v8_num(3);</div>
<div class="line"><a name="l11069"></a><span class="lineno">11069</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = inner.<a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html#adb3ffeab349bfa91da0d6f8e0eb39736">Close</a>(three);</div>
<div class="line"><a name="l11070"></a><span class="lineno">11070</span>&#160;  env-&gt;Exit();</div>
<div class="line"><a name="l11071"></a><span class="lineno">11071</span>&#160;  <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l11072"></a><span class="lineno">11072</span>&#160;}</div>
<div class="line"><a name="l11073"></a><span class="lineno">11073</span>&#160;</div>
<div class="line"><a name="l11074"></a><span class="lineno">11074</span>&#160;</div>
<div class="line"><a name="l11075"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a53515510550570019ec02675df0d0b06">11075</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(NestedHandleScopeAndContexts) {</div>
<div class="line"><a name="l11076"></a><span class="lineno">11076</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> outer;</div>
<div class="line"><a name="l11077"></a><span class="lineno">11077</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env = Context::New();</div>
<div class="line"><a name="l11078"></a><span class="lineno">11078</span>&#160;  env-&gt;Enter();</div>
<div class="line"><a name="l11079"></a><span class="lineno">11079</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> value = NestedScope(env);</div>
<div class="line"><a name="l11080"></a><span class="lineno">11080</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;String&gt;</a> str(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a91b68fb0b5558f1c9539015c1bbf7af2">ToString</a>());</div>
<div class="line"><a name="l11081"></a><span class="lineno">11081</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!str.IsEmpty());</div>
<div class="line"><a name="l11082"></a><span class="lineno">11082</span>&#160;  env-&gt;Exit();</div>
<div class="line"><a name="l11083"></a><span class="lineno">11083</span>&#160;  env.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l11084"></a><span class="lineno">11084</span>&#160;}</div>
<div class="line"><a name="l11085"></a><span class="lineno">11085</span>&#160;</div>
<div class="line"><a name="l11086"></a><span class="lineno">11086</span>&#160;</div>
<div class="line"><a name="l11087"></a><span class="lineno">11087</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::JSFunction&gt;</a>* foo_ptr = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11088"></a><span class="lineno">11088</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> foo_count = 0;</div>
<div class="line"><a name="l11089"></a><span class="lineno">11089</span>&#160;<span class="keyword">static</span> <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::JSFunction&gt;</a>* bar_ptr = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11090"></a><span class="lineno">11090</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> bar_count = 0;</div>
<div class="line"><a name="l11091"></a><span class="lineno">11091</span>&#160;</div>
<div class="line"><a name="l11092"></a><span class="lineno">11092</span>&#160;</div>
<div class="line"><a name="l11093"></a><span class="lineno">11093</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> entry_hook(uintptr_t <span class="keyword">function</span>,</div>
<div class="line"><a name="l11094"></a><span class="lineno">11094</span>&#160;                       uintptr_t return_addr_location) {</div>
<div class="line"><a name="l11095"></a><span class="lineno">11095</span>&#160;  <a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html">i::Code</a>* code = <a class="code" href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">i::Code::GetCodeFromTargetAddress</a>(</div>
<div class="line"><a name="l11096"></a><span class="lineno">11096</span>&#160;      reinterpret_cast&lt;i::Address&gt;(<span class="keyword">function</span>));</div>
<div class="line"><a name="l11097"></a><span class="lineno">11097</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(code != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11098"></a><span class="lineno">11098</span>&#160;</div>
<div class="line"><a name="l11099"></a><span class="lineno">11099</span>&#160;  <span class="keywordflow">if</span> (bar_ptr != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a> &amp;&amp; code == (*bar_ptr)-&gt;code())</div>
<div class="line"><a name="l11100"></a><span class="lineno">11100</span>&#160;    ++bar_count;</div>
<div class="line"><a name="l11101"></a><span class="lineno">11101</span>&#160;</div>
<div class="line"><a name="l11102"></a><span class="lineno">11102</span>&#160;  <span class="keywordflow">if</span> (foo_ptr != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a> &amp;&amp; code == (*foo_ptr)-&gt;code())</div>
<div class="line"><a name="l11103"></a><span class="lineno">11103</span>&#160;    ++foo_count;</div>
<div class="line"><a name="l11104"></a><span class="lineno">11104</span>&#160;</div>
<div class="line"><a name="l11105"></a><span class="lineno">11105</span>&#160;  <span class="comment">// TODO(siggi): Verify return_addr_location.</span></div>
<div class="line"><a name="l11106"></a><span class="lineno">11106</span>&#160;  <span class="comment">//     This can be done by capturing JitCodeEvents, but requires an ordered</span></div>
<div class="line"><a name="l11107"></a><span class="lineno">11107</span>&#160;  <span class="comment">//     collection.</span></div>
<div class="line"><a name="l11108"></a><span class="lineno">11108</span>&#160;}</div>
<div class="line"><a name="l11109"></a><span class="lineno">11109</span>&#160;</div>
<div class="line"><a name="l11110"></a><span class="lineno">11110</span>&#160;</div>
<div class="line"><a name="l11111"></a><span class="lineno">11111</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RunLoopInNewEnv() {</div>
<div class="line"><a name="l11112"></a><span class="lineno">11112</span>&#160;  bar_ptr = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11113"></a><span class="lineno">11113</span>&#160;  foo_ptr = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11114"></a><span class="lineno">11114</span>&#160;</div>
<div class="line"><a name="l11115"></a><span class="lineno">11115</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> outer;</div>
<div class="line"><a name="l11116"></a><span class="lineno">11116</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env = Context::New();</div>
<div class="line"><a name="l11117"></a><span class="lineno">11117</span>&#160;  env-&gt;Enter();</div>
<div class="line"><a name="l11118"></a><span class="lineno">11118</span>&#160;</div>
<div class="line"><a name="l11119"></a><span class="lineno">11119</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script =</div>
<div class="line"><a name="l11120"></a><span class="lineno">11120</span>&#160;      <span class="stringliteral">&quot;function bar() {&quot;</span></div>
<div class="line"><a name="l11121"></a><span class="lineno">11121</span>&#160;      <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l11122"></a><span class="lineno">11122</span>&#160;      <span class="stringliteral">&quot;  for (i = 0; i &lt; 100; ++i)&quot;</span></div>
<div class="line"><a name="l11123"></a><span class="lineno">11123</span>&#160;      <span class="stringliteral">&quot;    sum = foo(i);&quot;</span></div>
<div class="line"><a name="l11124"></a><span class="lineno">11124</span>&#160;      <span class="stringliteral">&quot;  return sum;&quot;</span></div>
<div class="line"><a name="l11125"></a><span class="lineno">11125</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l11126"></a><span class="lineno">11126</span>&#160;      <span class="stringliteral">&quot;function foo(i) { return i * i; }&quot;</span>;</div>
<div class="line"><a name="l11127"></a><span class="lineno">11127</span>&#160;  CompileRun(script);</div>
<div class="line"><a name="l11128"></a><span class="lineno">11128</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::JSFunction&gt;</a> <a class="code" href="../../d6/df1/test-accessors_8cc.html#a2df8914184cddeed49ac0b633472d973">bar</a> =</div>
<div class="line"><a name="l11129"></a><span class="lineno">11129</span>&#160;      <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">i::Handle&lt;i::JSFunction&gt;::cast</a>(</div>
<div class="line"><a name="l11130"></a><span class="lineno">11130</span>&#160;          v8::Utils::OpenHandle(*env-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;bar&quot;</span>))));</div>
<div class="line"><a name="l11131"></a><span class="lineno">11131</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(*bar);</div>
<div class="line"><a name="l11132"></a><span class="lineno">11132</span>&#160;</div>
<div class="line"><a name="l11133"></a><span class="lineno">11133</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::JSFunction&gt;</a> <a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a> =</div>
<div class="line"><a name="l11134"></a><span class="lineno">11134</span>&#160;      <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">i::Handle&lt;i::JSFunction&gt;::cast</a>(</div>
<div class="line"><a name="l11135"></a><span class="lineno">11135</span>&#160;           v8::Utils::OpenHandle(*env-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;foo&quot;</span>))));</div>
<div class="line"><a name="l11136"></a><span class="lineno">11136</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(*foo);</div>
<div class="line"><a name="l11137"></a><span class="lineno">11137</span>&#160;</div>
<div class="line"><a name="l11138"></a><span class="lineno">11138</span>&#160;  bar_ptr = &amp;<a class="code" href="../../d6/df1/test-accessors_8cc.html#a2df8914184cddeed49ac0b633472d973">bar</a>;</div>
<div class="line"><a name="l11139"></a><span class="lineno">11139</span>&#160;  foo_ptr = &amp;<a class="code" href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a>;</div>
<div class="line"><a name="l11140"></a><span class="lineno">11140</span>&#160;</div>
<div class="line"><a name="l11141"></a><span class="lineno">11141</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> value = CompileRun(<span class="stringliteral">&quot;bar();&quot;</span>);</div>
<div class="line"><a name="l11142"></a><span class="lineno">11142</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">IsNumber</a>());</div>
<div class="line"><a name="l11143"></a><span class="lineno">11143</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(9801.0, <a class="code" href="../../d9/d29/classv8_1_1_number.html#aff893f5c7d1b6a11523b930684649c0a">v8::Number::Cast</a>(*value)-&gt;<a class="code" href="../../d9/d29/classv8_1_1_number.html#a968d42d5659e1ae200e249f0a9b52f57">Value</a>());</div>
<div class="line"><a name="l11144"></a><span class="lineno">11144</span>&#160;</div>
<div class="line"><a name="l11145"></a><span class="lineno">11145</span>&#160;  <span class="comment">// Test the optimized codegen path.</span></div>
<div class="line"><a name="l11146"></a><span class="lineno">11146</span>&#160;  value = CompileRun(<span class="stringliteral">&quot;%OptimizeFunctionOnNextCall(foo);&quot;</span></div>
<div class="line"><a name="l11147"></a><span class="lineno">11147</span>&#160;                     <span class="stringliteral">&quot;bar();&quot;</span>);</div>
<div class="line"><a name="l11148"></a><span class="lineno">11148</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l11149"></a><span class="lineno">11149</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(9801.0, <a class="code" href="../../d9/d29/classv8_1_1_number.html#aff893f5c7d1b6a11523b930684649c0a">v8::Number::Cast</a>(*value)-&gt;<a class="code" href="../../d9/d29/classv8_1_1_number.html#a968d42d5659e1ae200e249f0a9b52f57">Value</a>());</div>
<div class="line"><a name="l11150"></a><span class="lineno">11150</span>&#160;</div>
<div class="line"><a name="l11151"></a><span class="lineno">11151</span>&#160;  env-&gt;Exit();</div>
<div class="line"><a name="l11152"></a><span class="lineno">11152</span>&#160;}</div>
<div class="line"><a name="l11153"></a><span class="lineno">11153</span>&#160;</div>
<div class="line"><a name="l11154"></a><span class="lineno">11154</span>&#160;</div>
<div class="line"><a name="l11155"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7fa3ac6c454fa53c54862b788c3cc4c7">11155</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(SetFunctionEntryHook) {</div>
<div class="line"><a name="l11156"></a><span class="lineno">11156</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l11157"></a><span class="lineno">11157</span>&#160;</div>
<div class="line"><a name="l11158"></a><span class="lineno">11158</span>&#160;  <span class="comment">// Test setting and resetting the entry hook.</span></div>
<div class="line"><a name="l11159"></a><span class="lineno">11159</span>&#160;  <span class="comment">// Nulling it should always succeed.</span></div>
<div class="line"><a name="l11160"></a><span class="lineno">11160</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../df/d43/classv8_1_1_v8.html#af663335b4f25f060fff98530ed9ae2c7">v8::V8::SetFunctionEntryHook</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>));</div>
<div class="line"><a name="l11161"></a><span class="lineno">11161</span>&#160;</div>
<div class="line"><a name="l11162"></a><span class="lineno">11162</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../df/d43/classv8_1_1_v8.html#af663335b4f25f060fff98530ed9ae2c7">v8::V8::SetFunctionEntryHook</a>(entry_hook));</div>
<div class="line"><a name="l11163"></a><span class="lineno">11163</span>&#160;  <span class="comment">// Setting a hook while one&#39;s active should fail.</span></div>
<div class="line"><a name="l11164"></a><span class="lineno">11164</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, <a class="code" href="../../df/d43/classv8_1_1_v8.html#af663335b4f25f060fff98530ed9ae2c7">v8::V8::SetFunctionEntryHook</a>(entry_hook));</div>
<div class="line"><a name="l11165"></a><span class="lineno">11165</span>&#160;</div>
<div class="line"><a name="l11166"></a><span class="lineno">11166</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../df/d43/classv8_1_1_v8.html#af663335b4f25f060fff98530ed9ae2c7">v8::V8::SetFunctionEntryHook</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>));</div>
<div class="line"><a name="l11167"></a><span class="lineno">11167</span>&#160;</div>
<div class="line"><a name="l11168"></a><span class="lineno">11168</span>&#160;  <span class="comment">// Reset the entry count to zero and set the entry hook.</span></div>
<div class="line"><a name="l11169"></a><span class="lineno">11169</span>&#160;  bar_count = 0;</div>
<div class="line"><a name="l11170"></a><span class="lineno">11170</span>&#160;  foo_count = 0;</div>
<div class="line"><a name="l11171"></a><span class="lineno">11171</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../df/d43/classv8_1_1_v8.html#af663335b4f25f060fff98530ed9ae2c7">v8::V8::SetFunctionEntryHook</a>(entry_hook));</div>
<div class="line"><a name="l11172"></a><span class="lineno">11172</span>&#160;  RunLoopInNewEnv();</div>
<div class="line"><a name="l11173"></a><span class="lineno">11173</span>&#160;</div>
<div class="line"><a name="l11174"></a><span class="lineno">11174</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, bar_count);</div>
<div class="line"><a name="l11175"></a><span class="lineno">11175</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(200, foo_count);</div>
<div class="line"><a name="l11176"></a><span class="lineno">11176</span>&#160;</div>
<div class="line"><a name="l11177"></a><span class="lineno">11177</span>&#160;  <span class="comment">// Clear the entry hook and count.</span></div>
<div class="line"><a name="l11178"></a><span class="lineno">11178</span>&#160;  bar_count = 0;</div>
<div class="line"><a name="l11179"></a><span class="lineno">11179</span>&#160;  foo_count = 0;</div>
<div class="line"><a name="l11180"></a><span class="lineno">11180</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af663335b4f25f060fff98530ed9ae2c7">v8::V8::SetFunctionEntryHook</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11181"></a><span class="lineno">11181</span>&#160;</div>
<div class="line"><a name="l11182"></a><span class="lineno">11182</span>&#160;  <span class="comment">// Clear the compilation cache to make sure we don&#39;t reuse the</span></div>
<div class="line"><a name="l11183"></a><span class="lineno">11183</span>&#160;  <span class="comment">// functions from the previous invocation.</span></div>
<div class="line"><a name="l11184"></a><span class="lineno">11184</span>&#160;  v8::internal::Isolate::Current()-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l11185"></a><span class="lineno">11185</span>&#160;</div>
<div class="line"><a name="l11186"></a><span class="lineno">11186</span>&#160;  <span class="comment">// Verify that entry hooking is now disabled.</span></div>
<div class="line"><a name="l11187"></a><span class="lineno">11187</span>&#160;  RunLoopInNewEnv();</div>
<div class="line"><a name="l11188"></a><span class="lineno">11188</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0u, bar_count);</div>
<div class="line"><a name="l11189"></a><span class="lineno">11189</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0u, foo_count);</div>
<div class="line"><a name="l11190"></a><span class="lineno">11190</span>&#160;}</div>
<div class="line"><a name="l11191"></a><span class="lineno">11191</span>&#160;</div>
<div class="line"><a name="l11192"></a><span class="lineno">11192</span>&#160;</div>
<div class="line"><a name="l11193"></a><span class="lineno">11193</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html">i::HashMap</a>* code_map = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11194"></a><span class="lineno">11194</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> saw_bar = 0;</div>
<div class="line"><a name="l11195"></a><span class="lineno">11195</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> move_events = 0;</div>
<div class="line"><a name="l11196"></a><span class="lineno">11196</span>&#160;</div>
<div class="line"><a name="l11197"></a><span class="lineno">11197</span>&#160;</div>
<div class="line"><a name="l11198"></a><span class="lineno">11198</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> FunctionNameIs(<span class="keyword">const</span> <span class="keywordtype">char</span>* expected,</div>
<div class="line"><a name="l11199"></a><span class="lineno">11199</span>&#160;                           <span class="keyword">const</span> <a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html">v8::JitCodeEvent</a>* event) {</div>
<div class="line"><a name="l11200"></a><span class="lineno">11200</span>&#160;  <span class="comment">// Log lines for functions are of the general form:</span></div>
<div class="line"><a name="l11201"></a><span class="lineno">11201</span>&#160;  <span class="comment">// &quot;LazyCompile:&lt;type&gt;&lt;function_name&gt;&quot;, where the type is one of</span></div>
<div class="line"><a name="l11202"></a><span class="lineno">11202</span>&#160;  <span class="comment">// &quot;*&quot;, &quot;~&quot; or &quot;&quot;.</span></div>
<div class="line"><a name="l11203"></a><span class="lineno">11203</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> kPreamble[] = <span class="stringliteral">&quot;LazyCompile:&quot;</span>;</div>
<div class="line"><a name="l11204"></a><span class="lineno">11204</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">size_t</span> kPreambleLen = <span class="keyword">sizeof</span>(kPreamble) - 1;</div>
<div class="line"><a name="l11205"></a><span class="lineno">11205</span>&#160;</div>
<div class="line"><a name="l11206"></a><span class="lineno">11206</span>&#160;  <span class="keywordflow">if</span> (event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#afedd19aa08d43151432e811be952c091">name</a>.len &lt; <span class="keyword">sizeof</span>(kPreamble) - 1 ||</div>
<div class="line"><a name="l11207"></a><span class="lineno">11207</span>&#160;      strncmp(kPreamble, event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#afedd19aa08d43151432e811be952c091">name</a>.str, kPreambleLen) != 0) {</div>
<div class="line"><a name="l11208"></a><span class="lineno">11208</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11209"></a><span class="lineno">11209</span>&#160;  }</div>
<div class="line"><a name="l11210"></a><span class="lineno">11210</span>&#160;</div>
<div class="line"><a name="l11211"></a><span class="lineno">11211</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* tail = <span class="keyword">event</span>-&gt;name.str + kPreambleLen;</div>
<div class="line"><a name="l11212"></a><span class="lineno">11212</span>&#160;  <span class="keywordtype">size_t</span> tail_len = <span class="keyword">event</span>-&gt;name.len - kPreambleLen;</div>
<div class="line"><a name="l11213"></a><span class="lineno">11213</span>&#160;  <span class="keywordtype">size_t</span> expected_len = strlen(expected);</div>
<div class="line"><a name="l11214"></a><span class="lineno">11214</span>&#160;  <span class="keywordflow">if</span> (tail_len == expected_len + 1) {</div>
<div class="line"><a name="l11215"></a><span class="lineno">11215</span>&#160;    <span class="keywordflow">if</span> (*tail == <span class="charliteral">&#39;*&#39;</span> || *tail == <span class="charliteral">&#39;~&#39;</span>) {</div>
<div class="line"><a name="l11216"></a><span class="lineno">11216</span>&#160;      --tail_len;</div>
<div class="line"><a name="l11217"></a><span class="lineno">11217</span>&#160;      ++tail;</div>
<div class="line"><a name="l11218"></a><span class="lineno">11218</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11219"></a><span class="lineno">11219</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11220"></a><span class="lineno">11220</span>&#160;    }</div>
<div class="line"><a name="l11221"></a><span class="lineno">11221</span>&#160;  }</div>
<div class="line"><a name="l11222"></a><span class="lineno">11222</span>&#160;</div>
<div class="line"><a name="l11223"></a><span class="lineno">11223</span>&#160;  <span class="keywordflow">if</span> (tail_len != expected_len)</div>
<div class="line"><a name="l11224"></a><span class="lineno">11224</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11225"></a><span class="lineno">11225</span>&#160;</div>
<div class="line"><a name="l11226"></a><span class="lineno">11226</span>&#160;  <span class="keywordflow">return</span> strncmp(tail, expected, expected_len) == 0;</div>
<div class="line"><a name="l11227"></a><span class="lineno">11227</span>&#160;}</div>
<div class="line"><a name="l11228"></a><span class="lineno">11228</span>&#160;</div>
<div class="line"><a name="l11229"></a><span class="lineno">11229</span>&#160;</div>
<div class="line"><a name="l11230"></a><span class="lineno">11230</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> event_handler(<span class="keyword">const</span> <a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html">v8::JitCodeEvent</a>* event) {</div>
<div class="line"><a name="l11231"></a><span class="lineno">11231</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(event != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11232"></a><span class="lineno">11232</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(code_map != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11233"></a><span class="lineno">11233</span>&#160;</div>
<div class="line"><a name="l11234"></a><span class="lineno">11234</span>&#160;  <span class="keywordflow">switch</span> (event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a2f18e60350b641236ab0e724d0622d1d">type</a>) {</div>
<div class="line"><a name="l11235"></a><span class="lineno">11235</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a2628ea8d12e8b2563c32f05dc7fff6faa878e45290410d9203c9e8ce4f58c456a">v8::JitCodeEvent::CODE_ADDED</a>: {</div>
<div class="line"><a name="l11236"></a><span class="lineno">11236</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a84b3fda875956f11da9e8936ac570124">code_start</a> != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11237"></a><span class="lineno">11237</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(0, static_cast&lt;int&gt;(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#abc3a32a49d962fb0540195f5d121edec">code_len</a>));</div>
<div class="line"><a name="l11238"></a><span class="lineno">11238</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#afedd19aa08d43151432e811be952c091">name</a>.str != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11239"></a><span class="lineno">11239</span>&#160;        i::HashMap::Entry* entry =</div>
<div class="line"><a name="l11240"></a><span class="lineno">11240</span>&#160;            code_map-&gt;<a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#a5172f06f3e2ee3d3e1f4ac8f1246662e">Lookup</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a84b3fda875956f11da9e8936ac570124">code_start</a>,</div>
<div class="line"><a name="l11241"></a><span class="lineno">11241</span>&#160;                             <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6fae7d3a2b2ccdbe699526f1fb5bcd93">i::ComputePointerHash</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a84b3fda875956f11da9e8936ac570124">code_start</a>),</div>
<div class="line"><a name="l11242"></a><span class="lineno">11242</span>&#160;                             <span class="keyword">true</span>);</div>
<div class="line"><a name="l11243"></a><span class="lineno">11243</span>&#160;        entry-&gt;value = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<span class="keyword">event</span>-&gt;code_len);</div>
<div class="line"><a name="l11244"></a><span class="lineno">11244</span>&#160;</div>
<div class="line"><a name="l11245"></a><span class="lineno">11245</span>&#160;        <span class="keywordflow">if</span> (FunctionNameIs(<span class="stringliteral">&quot;bar&quot;</span>, event)) {</div>
<div class="line"><a name="l11246"></a><span class="lineno">11246</span>&#160;          ++saw_bar;</div>
<div class="line"><a name="l11247"></a><span class="lineno">11247</span>&#160;        }</div>
<div class="line"><a name="l11248"></a><span class="lineno">11248</span>&#160;      }</div>
<div class="line"><a name="l11249"></a><span class="lineno">11249</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11250"></a><span class="lineno">11250</span>&#160;</div>
<div class="line"><a name="l11251"></a><span class="lineno">11251</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a2628ea8d12e8b2563c32f05dc7fff6faab78fc0987507f8c657dd2944d2a48190">v8::JitCodeEvent::CODE_MOVED</a>: {</div>
<div class="line"><a name="l11252"></a><span class="lineno">11252</span>&#160;        uint32_t hash = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6fae7d3a2b2ccdbe699526f1fb5bcd93">i::ComputePointerHash</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a84b3fda875956f11da9e8936ac570124">code_start</a>);</div>
<div class="line"><a name="l11253"></a><span class="lineno">11253</span>&#160;        <span class="comment">// We would like to never see code move that we haven&#39;t seen before,</span></div>
<div class="line"><a name="l11254"></a><span class="lineno">11254</span>&#160;        <span class="comment">// but the code creation event does not happen until the line endings</span></div>
<div class="line"><a name="l11255"></a><span class="lineno">11255</span>&#160;        <span class="comment">// have been calculated (this is so that we can report the line in the</span></div>
<div class="line"><a name="l11256"></a><span class="lineno">11256</span>&#160;        <span class="comment">// script at which the function source is found, see</span></div>
<div class="line"><a name="l11257"></a><span class="lineno">11257</span>&#160;        <span class="comment">// Compiler::RecordFunctionCompilation) and the line endings</span></div>
<div class="line"><a name="l11258"></a><span class="lineno">11258</span>&#160;        <span class="comment">// calculations can cause a GC, which can move the newly created code</span></div>
<div class="line"><a name="l11259"></a><span class="lineno">11259</span>&#160;        <span class="comment">// before its existence can be logged.</span></div>
<div class="line"><a name="l11260"></a><span class="lineno">11260</span>&#160;        i::HashMap::Entry* entry =</div>
<div class="line"><a name="l11261"></a><span class="lineno">11261</span>&#160;            code_map-&gt;<a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#a5172f06f3e2ee3d3e1f4ac8f1246662e">Lookup</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a84b3fda875956f11da9e8936ac570124">code_start</a>, hash, <span class="keyword">false</span>);</div>
<div class="line"><a name="l11262"></a><span class="lineno">11262</span>&#160;        <span class="keywordflow">if</span> (entry != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) {</div>
<div class="line"><a name="l11263"></a><span class="lineno">11263</span>&#160;          ++move_events;</div>
<div class="line"><a name="l11264"></a><span class="lineno">11264</span>&#160;</div>
<div class="line"><a name="l11265"></a><span class="lineno">11265</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(reinterpret_cast&lt;void*&gt;(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#abc3a32a49d962fb0540195f5d121edec">code_len</a>), entry-&gt;value);</div>
<div class="line"><a name="l11266"></a><span class="lineno">11266</span>&#160;          code_map-&gt;<a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#ae83da1da30eed329356d4eb63049c651">Remove</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a84b3fda875956f11da9e8936ac570124">code_start</a>, hash);</div>
<div class="line"><a name="l11267"></a><span class="lineno">11267</span>&#160;</div>
<div class="line"><a name="l11268"></a><span class="lineno">11268</span>&#160;          entry = code_map-&gt;<a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#a5172f06f3e2ee3d3e1f4ac8f1246662e">Lookup</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a86e5125350ff81eea971701cf8ad5fa5">new_code_start</a>,</div>
<div class="line"><a name="l11269"></a><span class="lineno">11269</span>&#160;                                   <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6fae7d3a2b2ccdbe699526f1fb5bcd93">i::ComputePointerHash</a>(event-&gt;<a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a86e5125350ff81eea971701cf8ad5fa5">new_code_start</a>),</div>
<div class="line"><a name="l11270"></a><span class="lineno">11270</span>&#160;                                   <span class="keyword">true</span>);</div>
<div class="line"><a name="l11271"></a><span class="lineno">11271</span>&#160;          <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(entry != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11272"></a><span class="lineno">11272</span>&#160;          entry-&gt;value = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<span class="keyword">event</span>-&gt;code_len);</div>
<div class="line"><a name="l11273"></a><span class="lineno">11273</span>&#160;        }</div>
<div class="line"><a name="l11274"></a><span class="lineno">11274</span>&#160;      }</div>
<div class="line"><a name="l11275"></a><span class="lineno">11275</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11276"></a><span class="lineno">11276</span>&#160;</div>
<div class="line"><a name="l11277"></a><span class="lineno">11277</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d0/d39/structv8_1_1_jit_code_event.html#a2628ea8d12e8b2563c32f05dc7fff6faa133b73408fb1c1b4ffd1fca7f3f15ed6">v8::JitCodeEvent::CODE_REMOVED</a>:</div>
<div class="line"><a name="l11278"></a><span class="lineno">11278</span>&#160;      <span class="comment">// Object/code removal events are currently not dispatched from the GC.</span></div>
<div class="line"><a name="l11279"></a><span class="lineno">11279</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l11280"></a><span class="lineno">11280</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11281"></a><span class="lineno">11281</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l11282"></a><span class="lineno">11282</span>&#160;      <span class="comment">// Impossible event.</span></div>
<div class="line"><a name="l11283"></a><span class="lineno">11283</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l11284"></a><span class="lineno">11284</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11285"></a><span class="lineno">11285</span>&#160;  }</div>
<div class="line"><a name="l11286"></a><span class="lineno">11286</span>&#160;}</div>
<div class="line"><a name="l11287"></a><span class="lineno">11287</span>&#160;</div>
<div class="line"><a name="l11288"></a><span class="lineno">11288</span>&#160;</div>
<div class="line"><a name="l11289"></a><span class="lineno">11289</span>&#160;<span class="comment">// Implemented in the test-alloc.cc test suite.</span></div>
<div class="line"><a name="l11290"></a><span class="lineno">11290</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a82aebd4de23b4d1cacffbf3bb74b0c05">SimulateFullSpace</a>(<a class="code" href="../../d4/dbe/classv8_1_1internal_1_1_paged_space.html">i::PagedSpace</a>* space);</div>
<div class="line"><a name="l11291"></a><span class="lineno">11291</span>&#160;</div>
<div class="line"><a name="l11292"></a><span class="lineno">11292</span>&#160;</div>
<div class="line"><a name="l11293"></a><span class="lineno">11293</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> MatchPointers(<span class="keywordtype">void</span>* key1, <span class="keywordtype">void</span>* key2) {</div>
<div class="line"><a name="l11294"></a><span class="lineno">11294</span>&#160;  <span class="keywordflow">return</span> key1 == key2;</div>
<div class="line"><a name="l11295"></a><span class="lineno">11295</span>&#160;}</div>
<div class="line"><a name="l11296"></a><span class="lineno">11296</span>&#160;</div>
<div class="line"><a name="l11297"></a><span class="lineno">11297</span>&#160;</div>
<div class="line"><a name="l11298"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aba8f12ac6912cad01b815d5fa53a9343">11298</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(SetJitCodeEventHandler) {</div>
<div class="line"><a name="l11299"></a><span class="lineno">11299</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script =</div>
<div class="line"><a name="l11300"></a><span class="lineno">11300</span>&#160;    <span class="stringliteral">&quot;function bar() {&quot;</span></div>
<div class="line"><a name="l11301"></a><span class="lineno">11301</span>&#160;    <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l11302"></a><span class="lineno">11302</span>&#160;    <span class="stringliteral">&quot;  for (i = 0; i &lt; 100; ++i)&quot;</span></div>
<div class="line"><a name="l11303"></a><span class="lineno">11303</span>&#160;    <span class="stringliteral">&quot;    sum = foo(i);&quot;</span></div>
<div class="line"><a name="l11304"></a><span class="lineno">11304</span>&#160;    <span class="stringliteral">&quot;  return sum;&quot;</span></div>
<div class="line"><a name="l11305"></a><span class="lineno">11305</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l11306"></a><span class="lineno">11306</span>&#160;    <span class="stringliteral">&quot;function foo(i) { return i * i; };&quot;</span></div>
<div class="line"><a name="l11307"></a><span class="lineno">11307</span>&#160;    <span class="stringliteral">&quot;bar();&quot;</span>;</div>
<div class="line"><a name="l11308"></a><span class="lineno">11308</span>&#160;</div>
<div class="line"><a name="l11309"></a><span class="lineno">11309</span>&#160;  <span class="comment">// Run this test in a new isolate to make sure we don&#39;t</span></div>
<div class="line"><a name="l11310"></a><span class="lineno">11310</span>&#160;  <span class="comment">// have remnants of state from other code.</span></div>
<div class="line"><a name="l11311"></a><span class="lineno">11311</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l11312"></a><span class="lineno">11312</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a94107f5c39b9788624af5ff1b6cf6a88">Enter</a>();</div>
<div class="line"><a name="l11313"></a><span class="lineno">11313</span>&#160;</div>
<div class="line"><a name="l11314"></a><span class="lineno">11314</span>&#160;  {</div>
<div class="line"><a name="l11315"></a><span class="lineno">11315</span>&#160;    <a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html">i::HashMap</a> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a965cf977d6cc4ab38c7b55d51e38652a">code</a>(MatchPointers);</div>
<div class="line"><a name="l11316"></a><span class="lineno">11316</span>&#160;    code_map = &amp;<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a965cf977d6cc4ab38c7b55d51e38652a">code</a>;</div>
<div class="line"><a name="l11317"></a><span class="lineno">11317</span>&#160;</div>
<div class="line"><a name="l11318"></a><span class="lineno">11318</span>&#160;    saw_bar = 0;</div>
<div class="line"><a name="l11319"></a><span class="lineno">11319</span>&#160;    move_events = 0;</div>
<div class="line"><a name="l11320"></a><span class="lineno">11320</span>&#160;</div>
<div class="line"><a name="l11321"></a><span class="lineno">11321</span>&#160;    i::FLAG_stress_compaction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l11322"></a><span class="lineno">11322</span>&#160;    V8::SetJitCodeEventHandler(<a class="code" href="../../d2/dc3/namespacev8.html#a8490f8c3ad68a8c8b419500f6ab95be0adbef2a13294bb25b573c0b8848cbb03c">v8::kJitCodeEventDefault</a>, event_handler);</div>
<div class="line"><a name="l11323"></a><span class="lineno">11323</span>&#160;</div>
<div class="line"><a name="l11324"></a><span class="lineno">11324</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11325"></a><span class="lineno">11325</span>&#160;    <span class="comment">// Generate new code objects sparsely distributed across several</span></div>
<div class="line"><a name="l11326"></a><span class="lineno">11326</span>&#160;    <span class="comment">// different fragmented code-space pages.</span></div>
<div class="line"><a name="l11327"></a><span class="lineno">11327</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> kIterations = 10;</div>
<div class="line"><a name="l11328"></a><span class="lineno">11328</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kIterations; ++i) {</div>
<div class="line"><a name="l11329"></a><span class="lineno">11329</span>&#160;      <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l11330"></a><span class="lineno">11330</span>&#160;</div>
<div class="line"><a name="l11331"></a><span class="lineno">11331</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> compiled_script;</div>
<div class="line"><a name="l11332"></a><span class="lineno">11332</span>&#160;      {</div>
<div class="line"><a name="l11333"></a><span class="lineno">11333</span>&#160;        <a class="code" href="../../d4/d81/classv8_1_1internal_1_1_always_allocate_scope.html">i::AlwaysAllocateScope</a> always_allocate;</div>
<div class="line"><a name="l11334"></a><span class="lineno">11334</span>&#160;        <a class="code" href="../../de/d3f/test-api_8cc.html#a82aebd4de23b4d1cacffbf3bb74b0c05">SimulateFullSpace</a>(<a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;code_space());</div>
<div class="line"><a name="l11335"></a><span class="lineno">11335</span>&#160;        compiled_script = v8_compile(script);</div>
<div class="line"><a name="l11336"></a><span class="lineno">11336</span>&#160;      }</div>
<div class="line"><a name="l11337"></a><span class="lineno">11337</span>&#160;      compiled_script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l11338"></a><span class="lineno">11338</span>&#160;</div>
<div class="line"><a name="l11339"></a><span class="lineno">11339</span>&#160;      <span class="comment">// Clear the compilation cache to get more wastage.</span></div>
<div class="line"><a name="l11340"></a><span class="lineno">11340</span>&#160;      <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;compilation_cache()-&gt;Clear();</div>
<div class="line"><a name="l11341"></a><span class="lineno">11341</span>&#160;    }</div>
<div class="line"><a name="l11342"></a><span class="lineno">11342</span>&#160;</div>
<div class="line"><a name="l11343"></a><span class="lineno">11343</span>&#160;    <span class="comment">// Force code movement.</span></div>
<div class="line"><a name="l11344"></a><span class="lineno">11344</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllAvailableGarbage(<span class="stringliteral">&quot;TestSetJitCodeEventHandler&quot;</span>);</div>
<div class="line"><a name="l11345"></a><span class="lineno">11345</span>&#160;</div>
<div class="line"><a name="l11346"></a><span class="lineno">11346</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a90b329b303c3a01760b7ad27fe92733f">CHECK_LE</a>(kIterations, saw_bar);</div>
<div class="line"><a name="l11347"></a><span class="lineno">11347</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(0, move_events);</div>
<div class="line"><a name="l11348"></a><span class="lineno">11348</span>&#160;</div>
<div class="line"><a name="l11349"></a><span class="lineno">11349</span>&#160;    code_map = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11350"></a><span class="lineno">11350</span>&#160;    V8::SetJitCodeEventHandler(<a class="code" href="../../d2/dc3/namespacev8.html#a8490f8c3ad68a8c8b419500f6ab95be0adbef2a13294bb25b573c0b8848cbb03c">v8::kJitCodeEventDefault</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11351"></a><span class="lineno">11351</span>&#160;  }</div>
<div class="line"><a name="l11352"></a><span class="lineno">11352</span>&#160;</div>
<div class="line"><a name="l11353"></a><span class="lineno">11353</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a1a6a7739e9cc01ba888b57d1f9457f4c">Exit</a>();</div>
<div class="line"><a name="l11354"></a><span class="lineno">11354</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l11355"></a><span class="lineno">11355</span>&#160;</div>
<div class="line"><a name="l11356"></a><span class="lineno">11356</span>&#160;  <span class="comment">// Do this in a new isolate.</span></div>
<div class="line"><a name="l11357"></a><span class="lineno">11357</span>&#160;  isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l11358"></a><span class="lineno">11358</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a94107f5c39b9788624af5ff1b6cf6a88">Enter</a>();</div>
<div class="line"><a name="l11359"></a><span class="lineno">11359</span>&#160;</div>
<div class="line"><a name="l11360"></a><span class="lineno">11360</span>&#160;  <span class="comment">// Verify that we get callbacks for existing code objects when we</span></div>
<div class="line"><a name="l11361"></a><span class="lineno">11361</span>&#160;  <span class="comment">// request enumeration of existing code.</span></div>
<div class="line"><a name="l11362"></a><span class="lineno">11362</span>&#160;  {</div>
<div class="line"><a name="l11363"></a><span class="lineno">11363</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11364"></a><span class="lineno">11364</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l11365"></a><span class="lineno">11365</span>&#160;    CompileRun(script);</div>
<div class="line"><a name="l11366"></a><span class="lineno">11366</span>&#160;</div>
<div class="line"><a name="l11367"></a><span class="lineno">11367</span>&#160;    <span class="comment">// Now get code through initial iteration.</span></div>
<div class="line"><a name="l11368"></a><span class="lineno">11368</span>&#160;    <a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html">i::HashMap</a> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a965cf977d6cc4ab38c7b55d51e38652a">code</a>(MatchPointers);</div>
<div class="line"><a name="l11369"></a><span class="lineno">11369</span>&#160;    code_map = &amp;<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a965cf977d6cc4ab38c7b55d51e38652a">code</a>;</div>
<div class="line"><a name="l11370"></a><span class="lineno">11370</span>&#160;</div>
<div class="line"><a name="l11371"></a><span class="lineno">11371</span>&#160;    V8::SetJitCodeEventHandler(<a class="code" href="../../d2/dc3/namespacev8.html#a8490f8c3ad68a8c8b419500f6ab95be0a96625f71abdaecbb7e353dbcec8c6f76">v8::kJitCodeEventEnumExisting</a>, event_handler);</div>
<div class="line"><a name="l11372"></a><span class="lineno">11372</span>&#160;    V8::SetJitCodeEventHandler(<a class="code" href="../../d2/dc3/namespacev8.html#a8490f8c3ad68a8c8b419500f6ab95be0adbef2a13294bb25b573c0b8848cbb03c">v8::kJitCodeEventDefault</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11373"></a><span class="lineno">11373</span>&#160;</div>
<div class="line"><a name="l11374"></a><span class="lineno">11374</span>&#160;    code_map = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11375"></a><span class="lineno">11375</span>&#160;</div>
<div class="line"><a name="l11376"></a><span class="lineno">11376</span>&#160;    <span class="comment">// We expect that we got some events. Note that if we could get code removal</span></div>
<div class="line"><a name="l11377"></a><span class="lineno">11377</span>&#160;    <span class="comment">// notifications, we could compare two collections, one created by listening</span></div>
<div class="line"><a name="l11378"></a><span class="lineno">11378</span>&#160;    <span class="comment">// from the time of creation of an isolate, and the other by subscribing</span></div>
<div class="line"><a name="l11379"></a><span class="lineno">11379</span>&#160;    <span class="comment">// with EnumExisting.</span></div>
<div class="line"><a name="l11380"></a><span class="lineno">11380</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(0, code.<a class="code" href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#a99e21bdad83d2838aae0ef33bd1dfdc8">occupancy</a>());</div>
<div class="line"><a name="l11381"></a><span class="lineno">11381</span>&#160;  }</div>
<div class="line"><a name="l11382"></a><span class="lineno">11382</span>&#160;</div>
<div class="line"><a name="l11383"></a><span class="lineno">11383</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a1a6a7739e9cc01ba888b57d1f9457f4c">Exit</a>();</div>
<div class="line"><a name="l11384"></a><span class="lineno">11384</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l11385"></a><span class="lineno">11385</span>&#160;}</div>
<div class="line"><a name="l11386"></a><span class="lineno">11386</span>&#160;</div>
<div class="line"><a name="l11387"></a><span class="lineno">11387</span>&#160;</div>
<div class="line"><a name="l11388"></a><span class="lineno">11388</span>&#160;<span class="keyword">static</span> int64_t cast(intptr_t x) { <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(x); }</div>
<div class="line"><a name="l11389"></a><span class="lineno">11389</span>&#160;</div>
<div class="line"><a name="l11390"></a><span class="lineno">11390</span>&#160;</div>
<div class="line"><a name="l11391"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad2f57f83a65d5d4fa43a8548bdea5f2a">11391</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalAllocatedMemory) {</div>
<div class="line"><a name="l11392"></a><span class="lineno">11392</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> outer;</div>
<div class="line"><a name="l11393"></a><span class="lineno">11393</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> env(Context::New());</div>
<div class="line"><a name="l11394"></a><span class="lineno">11394</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!env.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l11395"></a><span class="lineno">11395</span>&#160;  <span class="keyword">const</span> intptr_t kSize = 1024*1024;</div>
<div class="line"><a name="l11396"></a><span class="lineno">11396</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(cast(<a class="code" href="../../df/d43/classv8_1_1_v8.html#adf5e8aa5ee30c45cf47b05b9f1f2bbc6">v8::V8::AdjustAmountOfExternalAllocatedMemory</a>(kSize)),</div>
<div class="line"><a name="l11397"></a><span class="lineno">11397</span>&#160;           cast(kSize));</div>
<div class="line"><a name="l11398"></a><span class="lineno">11398</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(cast(<a class="code" href="../../df/d43/classv8_1_1_v8.html#adf5e8aa5ee30c45cf47b05b9f1f2bbc6">v8::V8::AdjustAmountOfExternalAllocatedMemory</a>(-kSize)),</div>
<div class="line"><a name="l11399"></a><span class="lineno">11399</span>&#160;           cast(0));</div>
<div class="line"><a name="l11400"></a><span class="lineno">11400</span>&#160;}</div>
<div class="line"><a name="l11401"></a><span class="lineno">11401</span>&#160;</div>
<div class="line"><a name="l11402"></a><span class="lineno">11402</span>&#160;</div>
<div class="line"><a name="l11403"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a32ae50888eef39ab9fdbbcd3c42a57e8">11403</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DisposeEnteredContext) {</div>
<div class="line"><a name="l11404"></a><span class="lineno">11404</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11405"></a><span class="lineno">11405</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> outer;</div>
<div class="line"><a name="l11406"></a><span class="lineno">11406</span>&#160;  { <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Context&gt;</a> inner = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l11407"></a><span class="lineno">11407</span>&#160;    inner-&gt;Enter();</div>
<div class="line"><a name="l11408"></a><span class="lineno">11408</span>&#160;    inner.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l11409"></a><span class="lineno">11409</span>&#160;    inner.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"><a name="l11410"></a><span class="lineno">11410</span>&#160;    inner-&gt;Exit();</div>
<div class="line"><a name="l11411"></a><span class="lineno">11411</span>&#160;  }</div>
<div class="line"><a name="l11412"></a><span class="lineno">11412</span>&#160;}</div>
<div class="line"><a name="l11413"></a><span class="lineno">11413</span>&#160;</div>
<div class="line"><a name="l11414"></a><span class="lineno">11414</span>&#160;</div>
<div class="line"><a name="l11415"></a><span class="lineno">11415</span>&#160;<span class="comment">// Regression test for issue 54, object templates with internal fields</span></div>
<div class="line"><a name="l11416"></a><span class="lineno">11416</span>&#160;<span class="comment">// but no accessors or interceptors did not get their internal field</span></div>
<div class="line"><a name="l11417"></a><span class="lineno">11417</span>&#160;<span class="comment">// count set on instances.</span></div>
<div class="line"><a name="l11418"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a4a2e0f67cdd5f1a4e110ca1fcbbd5001">11418</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress54) {</div>
<div class="line"><a name="l11419"></a><span class="lineno">11419</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> outer;</div>
<div class="line"><a name="l11420"></a><span class="lineno">11420</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11421"></a><span class="lineno">11421</span>&#160;  <span class="keyword">static</span> <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::ObjectTemplate&gt;</a> templ;</div>
<div class="line"><a name="l11422"></a><span class="lineno">11422</span>&#160;  <span class="keywordflow">if</span> (templ.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>()) {</div>
<div class="line"><a name="l11423"></a><span class="lineno">11423</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> inner;</div>
<div class="line"><a name="l11424"></a><span class="lineno">11424</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> local = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l11425"></a><span class="lineno">11425</span>&#160;    local-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a0f3ad8f58cd74a05d35eb3292fe9bd7f">SetInternalFieldCount</a>(1);</div>
<div class="line"><a name="l11426"></a><span class="lineno">11426</span>&#160;    templ = <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::ObjectTemplate&gt;::New</a>(inner.<a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html#adb3ffeab349bfa91da0d6f8e0eb39736">Close</a>(local));</div>
<div class="line"><a name="l11427"></a><span class="lineno">11427</span>&#160;  }</div>
<div class="line"><a name="l11428"></a><span class="lineno">11428</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> result = templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l11429"></a><span class="lineno">11429</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa33d06f1b6ca8e114ca8e1e557ce40a9">InternalFieldCount</a>());</div>
<div class="line"><a name="l11430"></a><span class="lineno">11430</span>&#160;}</div>
<div class="line"><a name="l11431"></a><span class="lineno">11431</span>&#160;</div>
<div class="line"><a name="l11432"></a><span class="lineno">11432</span>&#160;</div>
<div class="line"><a name="l11433"></a><span class="lineno">11433</span>&#160;<span class="comment">// If part of the threaded tests, this test makes ThreadingTest fail</span></div>
<div class="line"><a name="l11434"></a><span class="lineno">11434</span>&#160;<span class="comment">// on mac.</span></div>
<div class="line"><a name="l11435"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a56f7d258cbb469e04be204f0b950ac6d">11435</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CatchStackOverflow) {</div>
<div class="line"><a name="l11436"></a><span class="lineno">11436</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11437"></a><span class="lineno">11437</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11438"></a><span class="lineno">11438</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l11439"></a><span class="lineno">11439</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l11440"></a><span class="lineno">11440</span>&#160;    <span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l11441"></a><span class="lineno">11441</span>&#160;    <span class="stringliteral">&quot;  return f();&quot;</span></div>
<div class="line"><a name="l11442"></a><span class="lineno">11442</span>&#160;    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l11443"></a><span class="lineno">11443</span>&#160;    <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l11444"></a><span class="lineno">11444</span>&#160;    <span class="stringliteral">&quot;f();&quot;</span>));</div>
<div class="line"><a name="l11445"></a><span class="lineno">11445</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> result = script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l11446"></a><span class="lineno">11446</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l11447"></a><span class="lineno">11447</span>&#160;}</div>
<div class="line"><a name="l11448"></a><span class="lineno">11448</span>&#160;</div>
<div class="line"><a name="l11449"></a><span class="lineno">11449</span>&#160;</div>
<div class="line"><a name="l11450"></a><span class="lineno">11450</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckTryCatchSourceInfo(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> script,</div>
<div class="line"><a name="l11451"></a><span class="lineno">11451</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">char</span>* resource_name,</div>
<div class="line"><a name="l11452"></a><span class="lineno">11452</span>&#160;                                    <span class="keywordtype">int</span> line_offset) {</div>
<div class="line"><a name="l11453"></a><span class="lineno">11453</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11454"></a><span class="lineno">11454</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l11455"></a><span class="lineno">11455</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> result = script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l11456"></a><span class="lineno">11456</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l11457"></a><span class="lineno">11457</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l11458"></a><span class="lineno">11458</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message = try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a0e4e0c42f9819d78b73f6f72793b3caa">Message</a>();</div>
<div class="line"><a name="l11459"></a><span class="lineno">11459</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!message.IsEmpty());</div>
<div class="line"><a name="l11460"></a><span class="lineno">11460</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(10 + line_offset, message-&gt;GetLineNumber());</div>
<div class="line"><a name="l11461"></a><span class="lineno">11461</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(91, message-&gt;GetStartPosition());</div>
<div class="line"><a name="l11462"></a><span class="lineno">11462</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(92, message-&gt;GetEndPosition());</div>
<div class="line"><a name="l11463"></a><span class="lineno">11463</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, message-&gt;GetStartColumn());</div>
<div class="line"><a name="l11464"></a><span class="lineno">11464</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, message-&gt;GetEndColumn());</div>
<div class="line"><a name="l11465"></a><span class="lineno">11465</span>&#160;  <a class="code" href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a> line(message-&gt;GetSourceLine());</div>
<div class="line"><a name="l11466"></a><span class="lineno">11466</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;  throw &#39;nirk&#39;;&quot;</span>, *line);</div>
<div class="line"><a name="l11467"></a><span class="lineno">11467</span>&#160;  <a class="code" href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a> name(message-&gt;GetScriptResourceName());</div>
<div class="line"><a name="l11468"></a><span class="lineno">11468</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(resource_name, *name);</div>
<div class="line"><a name="l11469"></a><span class="lineno">11469</span>&#160;}</div>
<div class="line"><a name="l11470"></a><span class="lineno">11470</span>&#160;</div>
<div class="line"><a name="l11471"></a><span class="lineno">11471</span>&#160;</div>
<div class="line"><a name="l11472"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af796ea680ef13e38325579308a1d9955">11472</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TryCatchSourceInfo) {</div>
<div class="line"><a name="l11473"></a><span class="lineno">11473</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11474"></a><span class="lineno">11474</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11475"></a><span class="lineno">11475</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> source = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l11476"></a><span class="lineno">11476</span>&#160;      <span class="stringliteral">&quot;function Foo() {\n&quot;</span></div>
<div class="line"><a name="l11477"></a><span class="lineno">11477</span>&#160;      <span class="stringliteral">&quot;  return Bar();\n&quot;</span></div>
<div class="line"><a name="l11478"></a><span class="lineno">11478</span>&#160;      <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l11479"></a><span class="lineno">11479</span>&#160;      <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l11480"></a><span class="lineno">11480</span>&#160;      <span class="stringliteral">&quot;function Bar() {\n&quot;</span></div>
<div class="line"><a name="l11481"></a><span class="lineno">11481</span>&#160;      <span class="stringliteral">&quot;  return Baz();\n&quot;</span></div>
<div class="line"><a name="l11482"></a><span class="lineno">11482</span>&#160;      <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l11483"></a><span class="lineno">11483</span>&#160;      <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l11484"></a><span class="lineno">11484</span>&#160;      <span class="stringliteral">&quot;function Baz() {\n&quot;</span></div>
<div class="line"><a name="l11485"></a><span class="lineno">11485</span>&#160;      <span class="stringliteral">&quot;  throw &#39;nirk&#39;;\n&quot;</span></div>
<div class="line"><a name="l11486"></a><span class="lineno">11486</span>&#160;      <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l11487"></a><span class="lineno">11487</span>&#160;      <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l11488"></a><span class="lineno">11488</span>&#160;      <span class="stringliteral">&quot;Foo();\n&quot;</span>);</div>
<div class="line"><a name="l11489"></a><span class="lineno">11489</span>&#160;</div>
<div class="line"><a name="l11490"></a><span class="lineno">11490</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* resource_name;</div>
<div class="line"><a name="l11491"></a><span class="lineno">11491</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> script;</div>
<div class="line"><a name="l11492"></a><span class="lineno">11492</span>&#160;  resource_name = <span class="stringliteral">&quot;test.js&quot;</span>;</div>
<div class="line"><a name="l11493"></a><span class="lineno">11493</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(source, <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(resource_name));</div>
<div class="line"><a name="l11494"></a><span class="lineno">11494</span>&#160;  CheckTryCatchSourceInfo(script, resource_name, 0);</div>
<div class="line"><a name="l11495"></a><span class="lineno">11495</span>&#160;</div>
<div class="line"><a name="l11496"></a><span class="lineno">11496</span>&#160;  resource_name = <span class="stringliteral">&quot;test1.js&quot;</span>;</div>
<div class="line"><a name="l11497"></a><span class="lineno">11497</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> origin1(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(resource_name));</div>
<div class="line"><a name="l11498"></a><span class="lineno">11498</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(source, &amp;origin1);</div>
<div class="line"><a name="l11499"></a><span class="lineno">11499</span>&#160;  CheckTryCatchSourceInfo(script, resource_name, 0);</div>
<div class="line"><a name="l11500"></a><span class="lineno">11500</span>&#160;</div>
<div class="line"><a name="l11501"></a><span class="lineno">11501</span>&#160;  resource_name = <span class="stringliteral">&quot;test2.js&quot;</span>;</div>
<div class="line"><a name="l11502"></a><span class="lineno">11502</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> origin2(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(resource_name), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(7));</div>
<div class="line"><a name="l11503"></a><span class="lineno">11503</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(source, &amp;origin2);</div>
<div class="line"><a name="l11504"></a><span class="lineno">11504</span>&#160;  CheckTryCatchSourceInfo(script, resource_name, 7);</div>
<div class="line"><a name="l11505"></a><span class="lineno">11505</span>&#160;}</div>
<div class="line"><a name="l11506"></a><span class="lineno">11506</span>&#160;</div>
<div class="line"><a name="l11507"></a><span class="lineno">11507</span>&#160;</div>
<div class="line"><a name="l11508"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8e7412e2192c2cef666f9f74f4ab50d0">11508</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CompilationCache) {</div>
<div class="line"><a name="l11509"></a><span class="lineno">11509</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11510"></a><span class="lineno">11510</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11511"></a><span class="lineno">11511</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> source0 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;1234&quot;</span>);</div>
<div class="line"><a name="l11512"></a><span class="lineno">11512</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> source1 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;1234&quot;</span>);</div>
<div class="line"><a name="l11513"></a><span class="lineno">11513</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> script0 =</div>
<div class="line"><a name="l11514"></a><span class="lineno">11514</span>&#160;      <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(source0, <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;test.js&quot;</span>));</div>
<div class="line"><a name="l11515"></a><span class="lineno">11515</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> script1 =</div>
<div class="line"><a name="l11516"></a><span class="lineno">11516</span>&#160;      <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(source1, <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;test.js&quot;</span>));</div>
<div class="line"><a name="l11517"></a><span class="lineno">11517</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> script2 =</div>
<div class="line"><a name="l11518"></a><span class="lineno">11518</span>&#160;      <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(source0);  <span class="comment">// different origin</span></div>
<div class="line"><a name="l11519"></a><span class="lineno">11519</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, script0-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>()-&gt;Int32Value());</div>
<div class="line"><a name="l11520"></a><span class="lineno">11520</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, script1-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>()-&gt;Int32Value());</div>
<div class="line"><a name="l11521"></a><span class="lineno">11521</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1234, script2-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>()-&gt;Int32Value());</div>
<div class="line"><a name="l11522"></a><span class="lineno">11522</span>&#160;}</div>
<div class="line"><a name="l11523"></a><span class="lineno">11523</span>&#160;</div>
<div class="line"><a name="l11524"></a><span class="lineno">11524</span>&#160;</div>
<div class="line"><a name="l11525"></a><span class="lineno">11525</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> FunctionNameCallback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l11526"></a><span class="lineno">11526</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l11527"></a><span class="lineno">11527</span>&#160;  <span class="keywordflow">return</span> v8_num(42);</div>
<div class="line"><a name="l11528"></a><span class="lineno">11528</span>&#160;}</div>
<div class="line"><a name="l11529"></a><span class="lineno">11529</span>&#160;</div>
<div class="line"><a name="l11530"></a><span class="lineno">11530</span>&#160;</div>
<div class="line"><a name="l11531"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3b0e2c93290d5d14e95f789bbcfd55e1">11531</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallbackFunctionName) {</div>
<div class="line"><a name="l11532"></a><span class="lineno">11532</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11533"></a><span class="lineno">11533</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11534"></a><span class="lineno">11534</span>&#160;  Local&lt;ObjectTemplate&gt; t = ObjectTemplate::New();</div>
<div class="line"><a name="l11535"></a><span class="lineno">11535</span>&#160;  t-&gt;Set(v8_str(<span class="stringliteral">&quot;asdf&quot;</span>), <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(FunctionNameCallback));</div>
<div class="line"><a name="l11536"></a><span class="lineno">11536</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), t-&gt;NewInstance());</div>
<div class="line"><a name="l11537"></a><span class="lineno">11537</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> value = CompileRun(<span class="stringliteral">&quot;obj.asdf.name&quot;</span>);</div>
<div class="line"><a name="l11538"></a><span class="lineno">11538</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#abfee0d12e50e0499ce0e3eac2612b3a2">IsString</a>());</div>
<div class="line"><a name="l11539"></a><span class="lineno">11539</span>&#160;  <a class="code" href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a> name(value);</div>
<div class="line"><a name="l11540"></a><span class="lineno">11540</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;asdf&quot;</span>, *name);</div>
<div class="line"><a name="l11541"></a><span class="lineno">11541</span>&#160;}</div>
<div class="line"><a name="l11542"></a><span class="lineno">11542</span>&#160;</div>
<div class="line"><a name="l11543"></a><span class="lineno">11543</span>&#160;</div>
<div class="line"><a name="l11544"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9927db9a99bca202f126bdd2536abf3b">11544</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DateAccess) {</div>
<div class="line"><a name="l11545"></a><span class="lineno">11545</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11546"></a><span class="lineno">11546</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11547"></a><span class="lineno">11547</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> date = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Date::New</a>(1224744689038.0);</div>
<div class="line"><a name="l11548"></a><span class="lineno">11548</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(date-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a76733e4c8f10856bf7826a603b266a7d">IsDate</a>());</div>
<div class="line"><a name="l11549"></a><span class="lineno">11549</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1224744689038.0, date.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d4/df7/classv8_1_1_date.html">v8::Date</a>&gt;()-&gt;<a class="code" href="../../d4/df7/classv8_1_1_date.html#a21bbf71d057f8357a5345fa4ee8b1593">NumberValue</a>());</div>
<div class="line"><a name="l11550"></a><span class="lineno">11550</span>&#160;}</div>
<div class="line"><a name="l11551"></a><span class="lineno">11551</span>&#160;</div>
<div class="line"><a name="l11552"></a><span class="lineno">11552</span>&#160;</div>
<div class="line"><a name="l11553"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa29c07229bf364873702f5f1ccde11f0">11553</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#aa29c07229bf364873702f5f1ccde11f0">CheckProperties</a>(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> val, <span class="keywordtype">int</span> elmc, <span class="keyword">const</span> <span class="keywordtype">char</span>* elmv[]) {</div>
<div class="line"><a name="l11554"></a><span class="lineno">11554</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = val.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l11555"></a><span class="lineno">11555</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> props = obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a3c379929a1274f8a2ba585a5eef66338">GetPropertyNames</a>();</div>
<div class="line"><a name="l11556"></a><span class="lineno">11556</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(elmc, props-&gt;Length());</div>
<div class="line"><a name="l11557"></a><span class="lineno">11557</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; elmc; i++) {</div>
<div class="line"><a name="l11558"></a><span class="lineno">11558</span>&#160;    <a class="code" href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a> elm(props-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(i)));</div>
<div class="line"><a name="l11559"></a><span class="lineno">11559</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(elmv[i], *elm);</div>
<div class="line"><a name="l11560"></a><span class="lineno">11560</span>&#160;  }</div>
<div class="line"><a name="l11561"></a><span class="lineno">11561</span>&#160;}</div>
<div class="line"><a name="l11562"></a><span class="lineno">11562</span>&#160;</div>
<div class="line"><a name="l11563"></a><span class="lineno">11563</span>&#160;</div>
<div class="line"><a name="l11564"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac73228ef4153f2c901604c3a842f21cc">11564</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ac73228ef4153f2c901604c3a842f21cc">CheckOwnProperties</a>(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> val,</div>
<div class="line"><a name="l11565"></a><span class="lineno">11565</span>&#160;                        <span class="keywordtype">int</span> elmc,</div>
<div class="line"><a name="l11566"></a><span class="lineno">11566</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span>* elmv[]) {</div>
<div class="line"><a name="l11567"></a><span class="lineno">11567</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = val.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l11568"></a><span class="lineno">11568</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> props = obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a93e45647c7bcfa01615f28ff07d3cea6">GetOwnPropertyNames</a>();</div>
<div class="line"><a name="l11569"></a><span class="lineno">11569</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(elmc, props-&gt;Length());</div>
<div class="line"><a name="l11570"></a><span class="lineno">11570</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; elmc; i++) {</div>
<div class="line"><a name="l11571"></a><span class="lineno">11571</span>&#160;    <a class="code" href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a> elm(props-&gt;Get(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(i)));</div>
<div class="line"><a name="l11572"></a><span class="lineno">11572</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(elmv[i], *elm);</div>
<div class="line"><a name="l11573"></a><span class="lineno">11573</span>&#160;  }</div>
<div class="line"><a name="l11574"></a><span class="lineno">11574</span>&#160;}</div>
<div class="line"><a name="l11575"></a><span class="lineno">11575</span>&#160;</div>
<div class="line"><a name="l11576"></a><span class="lineno">11576</span>&#160;</div>
<div class="line"><a name="l11577"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae8f5781b24a18703d405eb540297d42b">11577</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(PropertyEnumeration) {</div>
<div class="line"><a name="l11578"></a><span class="lineno">11578</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11579"></a><span class="lineno">11579</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11580"></a><span class="lineno">11580</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> obj = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l11581"></a><span class="lineno">11581</span>&#160;      <span class="stringliteral">&quot;var result = [];&quot;</span></div>
<div class="line"><a name="l11582"></a><span class="lineno">11582</span>&#160;      <span class="stringliteral">&quot;result[0] = {};&quot;</span></div>
<div class="line"><a name="l11583"></a><span class="lineno">11583</span>&#160;      <span class="stringliteral">&quot;result[1] = {a: 1, b: 2};&quot;</span></div>
<div class="line"><a name="l11584"></a><span class="lineno">11584</span>&#160;      <span class="stringliteral">&quot;result[2] = [1, 2, 3];&quot;</span></div>
<div class="line"><a name="l11585"></a><span class="lineno">11585</span>&#160;      <span class="stringliteral">&quot;var proto = {x: 1, y: 2, z: 3};&quot;</span></div>
<div class="line"><a name="l11586"></a><span class="lineno">11586</span>&#160;      <span class="stringliteral">&quot;var x = { __proto__: proto, w: 0, z: 1 };&quot;</span></div>
<div class="line"><a name="l11587"></a><span class="lineno">11587</span>&#160;      <span class="stringliteral">&quot;result[3] = x;&quot;</span></div>
<div class="line"><a name="l11588"></a><span class="lineno">11588</span>&#160;      <span class="stringliteral">&quot;result;&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l11589"></a><span class="lineno">11589</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> elms = obj.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l11590"></a><span class="lineno">11590</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, elms-&gt;<a class="code" href="../../d3/d32/classv8_1_1_array.html#a9d79066f5b28c73a0f6f248bbf846fe1">Length</a>());</div>
<div class="line"><a name="l11591"></a><span class="lineno">11591</span>&#160;  <span class="keywordtype">int</span> elmc0 = 0;</div>
<div class="line"><a name="l11592"></a><span class="lineno">11592</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>** elmv0 = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11593"></a><span class="lineno">11593</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#aa29c07229bf364873702f5f1ccde11f0">CheckProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0)), elmc0, elmv0);</div>
<div class="line"><a name="l11594"></a><span class="lineno">11594</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac73228ef4153f2c901604c3a842f21cc">CheckOwnProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0)), elmc0, elmv0);</div>
<div class="line"><a name="l11595"></a><span class="lineno">11595</span>&#160;  <span class="keywordtype">int</span> elmc1 = 2;</div>
<div class="line"><a name="l11596"></a><span class="lineno">11596</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* elmv1[] = {<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>};</div>
<div class="line"><a name="l11597"></a><span class="lineno">11597</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#aa29c07229bf364873702f5f1ccde11f0">CheckProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1)), elmc1, elmv1);</div>
<div class="line"><a name="l11598"></a><span class="lineno">11598</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac73228ef4153f2c901604c3a842f21cc">CheckOwnProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(1)), elmc1, elmv1);</div>
<div class="line"><a name="l11599"></a><span class="lineno">11599</span>&#160;  <span class="keywordtype">int</span> elmc2 = 3;</div>
<div class="line"><a name="l11600"></a><span class="lineno">11600</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* elmv2[] = {<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>};</div>
<div class="line"><a name="l11601"></a><span class="lineno">11601</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#aa29c07229bf364873702f5f1ccde11f0">CheckProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2)), elmc2, elmv2);</div>
<div class="line"><a name="l11602"></a><span class="lineno">11602</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac73228ef4153f2c901604c3a842f21cc">CheckOwnProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2)), elmc2, elmv2);</div>
<div class="line"><a name="l11603"></a><span class="lineno">11603</span>&#160;  <span class="keywordtype">int</span> elmc3 = 4;</div>
<div class="line"><a name="l11604"></a><span class="lineno">11604</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* elmv3[] = {<span class="stringliteral">&quot;w&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>};</div>
<div class="line"><a name="l11605"></a><span class="lineno">11605</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#aa29c07229bf364873702f5f1ccde11f0">CheckProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3)), elmc3, elmv3);</div>
<div class="line"><a name="l11606"></a><span class="lineno">11606</span>&#160;  <span class="keywordtype">int</span> elmc4 = 2;</div>
<div class="line"><a name="l11607"></a><span class="lineno">11607</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* elmv4[] = {<span class="stringliteral">&quot;w&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>};</div>
<div class="line"><a name="l11608"></a><span class="lineno">11608</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac73228ef4153f2c901604c3a842f21cc">CheckOwnProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3)), elmc4, elmv4);</div>
<div class="line"><a name="l11609"></a><span class="lineno">11609</span>&#160;}</div>
<div class="line"><a name="l11610"></a><span class="lineno">11610</span>&#160;</div>
<div class="line"><a name="l11611"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae84b0d3f1b4373e5c8121cbe73f4b88e">11611</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(PropertyEnumeration2) {</div>
<div class="line"><a name="l11612"></a><span class="lineno">11612</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11613"></a><span class="lineno">11613</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11614"></a><span class="lineno">11614</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> obj = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l11615"></a><span class="lineno">11615</span>&#160;      <span class="stringliteral">&quot;var result = [];&quot;</span></div>
<div class="line"><a name="l11616"></a><span class="lineno">11616</span>&#160;      <span class="stringliteral">&quot;result[0] = {};&quot;</span></div>
<div class="line"><a name="l11617"></a><span class="lineno">11617</span>&#160;      <span class="stringliteral">&quot;result[1] = {a: 1, b: 2};&quot;</span></div>
<div class="line"><a name="l11618"></a><span class="lineno">11618</span>&#160;      <span class="stringliteral">&quot;result[2] = [1, 2, 3];&quot;</span></div>
<div class="line"><a name="l11619"></a><span class="lineno">11619</span>&#160;      <span class="stringliteral">&quot;var proto = {x: 1, y: 2, z: 3};&quot;</span></div>
<div class="line"><a name="l11620"></a><span class="lineno">11620</span>&#160;      <span class="stringliteral">&quot;var x = { __proto__: proto, w: 0, z: 1 };&quot;</span></div>
<div class="line"><a name="l11621"></a><span class="lineno">11621</span>&#160;      <span class="stringliteral">&quot;result[3] = x;&quot;</span></div>
<div class="line"><a name="l11622"></a><span class="lineno">11622</span>&#160;      <span class="stringliteral">&quot;result;&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l11623"></a><span class="lineno">11623</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> elms = obj.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../d3/d32/classv8_1_1_array.html">v8::Array</a>&gt;();</div>
<div class="line"><a name="l11624"></a><span class="lineno">11624</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, elms-&gt;<a class="code" href="../../d3/d32/classv8_1_1_array.html#a9d79066f5b28c73a0f6f248bbf846fe1">Length</a>());</div>
<div class="line"><a name="l11625"></a><span class="lineno">11625</span>&#160;  <span class="keywordtype">int</span> elmc0 = 0;</div>
<div class="line"><a name="l11626"></a><span class="lineno">11626</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>** elmv0 = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l11627"></a><span class="lineno">11627</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#aa29c07229bf364873702f5f1ccde11f0">CheckProperties</a>(elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0)), elmc0, elmv0);</div>
<div class="line"><a name="l11628"></a><span class="lineno">11628</span>&#160;</div>
<div class="line"><a name="l11629"></a><span class="lineno">11629</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> val = elms-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0));</div>
<div class="line"><a name="l11630"></a><span class="lineno">11630</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> props = val.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;()-&gt;GetPropertyNames();</div>
<div class="line"><a name="l11631"></a><span class="lineno">11631</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, props-&gt;<a class="code" href="../../d3/d32/classv8_1_1_array.html#a9d79066f5b28c73a0f6f248bbf846fe1">Length</a>());</div>
<div class="line"><a name="l11632"></a><span class="lineno">11632</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; props-&gt;<a class="code" href="../../d3/d32/classv8_1_1_array.html#a9d79066f5b28c73a0f6f248bbf846fe1">Length</a>(); i++) {</div>
<div class="line"><a name="l11633"></a><span class="lineno">11633</span>&#160;    printf(<span class="stringliteral">&quot;p[%d]\n&quot;</span>, i);</div>
<div class="line"><a name="l11634"></a><span class="lineno">11634</span>&#160;  }</div>
<div class="line"><a name="l11635"></a><span class="lineno">11635</span>&#160;}</div>
<div class="line"><a name="l11636"></a><span class="lineno">11636</span>&#160;</div>
<div class="line"><a name="l11637"></a><span class="lineno">11637</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> NamedSetAccessBlocker(Local&lt;v8::Object&gt; obj,</div>
<div class="line"><a name="l11638"></a><span class="lineno">11638</span>&#160;                                  Local&lt;Value&gt; name,</div>
<div class="line"><a name="l11639"></a><span class="lineno">11639</span>&#160;                                  <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l11640"></a><span class="lineno">11640</span>&#160;                                  Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l11641"></a><span class="lineno">11641</span>&#160;  <span class="keywordflow">return</span> type != <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>;</div>
<div class="line"><a name="l11642"></a><span class="lineno">11642</span>&#160;}</div>
<div class="line"><a name="l11643"></a><span class="lineno">11643</span>&#160;</div>
<div class="line"><a name="l11644"></a><span class="lineno">11644</span>&#160;</div>
<div class="line"><a name="l11645"></a><span class="lineno">11645</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> IndexedSetAccessBlocker(Local&lt;v8::Object&gt; obj,</div>
<div class="line"><a name="l11646"></a><span class="lineno">11646</span>&#160;                                    uint32_t key,</div>
<div class="line"><a name="l11647"></a><span class="lineno">11647</span>&#160;                                    <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l11648"></a><span class="lineno">11648</span>&#160;                                    Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l11649"></a><span class="lineno">11649</span>&#160;  <span class="keywordflow">return</span> type != <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a>;</div>
<div class="line"><a name="l11650"></a><span class="lineno">11650</span>&#160;}</div>
<div class="line"><a name="l11651"></a><span class="lineno">11651</span>&#160;</div>
<div class="line"><a name="l11652"></a><span class="lineno">11652</span>&#160;</div>
<div class="line"><a name="l11653"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2e7a64302745fbd103439a36ff5d28a7">11653</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DisableAccessChecksWhileConfiguring) {</div>
<div class="line"><a name="l11654"></a><span class="lineno">11654</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11655"></a><span class="lineno">11655</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11656"></a><span class="lineno">11656</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l11657"></a><span class="lineno">11657</span>&#160;  templ-&gt;SetAccessCheckCallbacks(NamedSetAccessBlocker,</div>
<div class="line"><a name="l11658"></a><span class="lineno">11658</span>&#160;                                 IndexedSetAccessBlocker);</div>
<div class="line"><a name="l11659"></a><span class="lineno">11659</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>());</div>
<div class="line"><a name="l11660"></a><span class="lineno">11660</span>&#160;  Local&lt;v8::Object&gt; instance = templ-&gt;NewInstance();</div>
<div class="line"><a name="l11661"></a><span class="lineno">11661</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), instance);</div>
<div class="line"><a name="l11662"></a><span class="lineno">11662</span>&#160;  Local&lt;Value&gt; value = CompileRun(<span class="stringliteral">&quot;obj.x&quot;</span>);</div>
<div class="line"><a name="l11663"></a><span class="lineno">11663</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;BooleanValue());</div>
<div class="line"><a name="l11664"></a><span class="lineno">11664</span>&#160;}</div>
<div class="line"><a name="l11665"></a><span class="lineno">11665</span>&#160;</div>
<div class="line"><a name="l11666"></a><span class="lineno">11666</span>&#160;</div>
<div class="line"><a name="l11667"></a><span class="lineno">11667</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> NamedGetAccessBlocker(Local&lt;v8::Object&gt; obj,</div>
<div class="line"><a name="l11668"></a><span class="lineno">11668</span>&#160;                                  Local&lt;Value&gt; name,</div>
<div class="line"><a name="l11669"></a><span class="lineno">11669</span>&#160;                                  <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l11670"></a><span class="lineno">11670</span>&#160;                                  Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l11671"></a><span class="lineno">11671</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11672"></a><span class="lineno">11672</span>&#160;}</div>
<div class="line"><a name="l11673"></a><span class="lineno">11673</span>&#160;</div>
<div class="line"><a name="l11674"></a><span class="lineno">11674</span>&#160;</div>
<div class="line"><a name="l11675"></a><span class="lineno">11675</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> IndexedGetAccessBlocker(Local&lt;v8::Object&gt; obj,</div>
<div class="line"><a name="l11676"></a><span class="lineno">11676</span>&#160;                                    uint32_t key,</div>
<div class="line"><a name="l11677"></a><span class="lineno">11677</span>&#160;                                    <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l11678"></a><span class="lineno">11678</span>&#160;                                    Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l11679"></a><span class="lineno">11679</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11680"></a><span class="lineno">11680</span>&#160;}</div>
<div class="line"><a name="l11681"></a><span class="lineno">11681</span>&#160;</div>
<div class="line"><a name="l11682"></a><span class="lineno">11682</span>&#160;</div>
<div class="line"><a name="l11683"></a><span class="lineno">11683</span>&#160;</div>
<div class="line"><a name="l11684"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abd7ee578aa9d682ca9a64572179ebe1c">11684</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AccessChecksReenabledCorrectly) {</div>
<div class="line"><a name="l11685"></a><span class="lineno">11685</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11686"></a><span class="lineno">11686</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11687"></a><span class="lineno">11687</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l11688"></a><span class="lineno">11688</span>&#160;  templ-&gt;SetAccessCheckCallbacks(NamedGetAccessBlocker,</div>
<div class="line"><a name="l11689"></a><span class="lineno">11689</span>&#160;                                 IndexedGetAccessBlocker);</div>
<div class="line"><a name="l11690"></a><span class="lineno">11690</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;a&quot;</span>), v8_str(<span class="stringliteral">&quot;a&quot;</span>));</div>
<div class="line"><a name="l11691"></a><span class="lineno">11691</span>&#160;  <span class="comment">// Add more than 8 (see kMaxFastProperties) properties</span></div>
<div class="line"><a name="l11692"></a><span class="lineno">11692</span>&#160;  <span class="comment">// so that the constructor will force copying map.</span></div>
<div class="line"><a name="l11693"></a><span class="lineno">11693</span>&#160;  <span class="comment">// Cannot sprintf, gcc complains unsafety.</span></div>
<div class="line"><a name="l11694"></a><span class="lineno">11694</span>&#160;  <span class="keywordtype">char</span> buf[4];</div>
<div class="line"><a name="l11695"></a><span class="lineno">11695</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">char</span> i = <span class="charliteral">&#39;0&#39;</span>; i &lt;= <span class="charliteral">&#39;9&#39;</span> ; i++) {</div>
<div class="line"><a name="l11696"></a><span class="lineno">11696</span>&#160;    buf[0] = i;</div>
<div class="line"><a name="l11697"></a><span class="lineno">11697</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">char</span> j = <span class="charliteral">&#39;0&#39;</span>; j &lt;= <span class="charliteral">&#39;9&#39;</span>; j++) {</div>
<div class="line"><a name="l11698"></a><span class="lineno">11698</span>&#160;      buf[1] = j;</div>
<div class="line"><a name="l11699"></a><span class="lineno">11699</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">char</span> k = <span class="charliteral">&#39;0&#39;</span>; k &lt;= <span class="charliteral">&#39;9&#39;</span>; k++) {</div>
<div class="line"><a name="l11700"></a><span class="lineno">11700</span>&#160;        buf[2] = k;</div>
<div class="line"><a name="l11701"></a><span class="lineno">11701</span>&#160;        buf[3] = 0;</div>
<div class="line"><a name="l11702"></a><span class="lineno">11702</span>&#160;        templ-&gt;Set(v8_str(buf), <a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(k));</div>
<div class="line"><a name="l11703"></a><span class="lineno">11703</span>&#160;      }</div>
<div class="line"><a name="l11704"></a><span class="lineno">11704</span>&#160;    }</div>
<div class="line"><a name="l11705"></a><span class="lineno">11705</span>&#160;  }</div>
<div class="line"><a name="l11706"></a><span class="lineno">11706</span>&#160;</div>
<div class="line"><a name="l11707"></a><span class="lineno">11707</span>&#160;  Local&lt;v8::Object&gt; instance_1 = templ-&gt;NewInstance();</div>
<div class="line"><a name="l11708"></a><span class="lineno">11708</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj_1&quot;</span>), instance_1);</div>
<div class="line"><a name="l11709"></a><span class="lineno">11709</span>&#160;</div>
<div class="line"><a name="l11710"></a><span class="lineno">11710</span>&#160;  Local&lt;Value&gt; value_1 = CompileRun(<span class="stringliteral">&quot;obj_1.a&quot;</span>);</div>
<div class="line"><a name="l11711"></a><span class="lineno">11711</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value_1-&gt;IsUndefined());</div>
<div class="line"><a name="l11712"></a><span class="lineno">11712</span>&#160;</div>
<div class="line"><a name="l11713"></a><span class="lineno">11713</span>&#160;  Local&lt;v8::Object&gt; instance_2 = templ-&gt;NewInstance();</div>
<div class="line"><a name="l11714"></a><span class="lineno">11714</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj_2&quot;</span>), instance_2);</div>
<div class="line"><a name="l11715"></a><span class="lineno">11715</span>&#160;</div>
<div class="line"><a name="l11716"></a><span class="lineno">11716</span>&#160;  Local&lt;Value&gt; value_2 = CompileRun(<span class="stringliteral">&quot;obj_2.a&quot;</span>);</div>
<div class="line"><a name="l11717"></a><span class="lineno">11717</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value_2-&gt;IsUndefined());</div>
<div class="line"><a name="l11718"></a><span class="lineno">11718</span>&#160;}</div>
<div class="line"><a name="l11719"></a><span class="lineno">11719</span>&#160;</div>
<div class="line"><a name="l11720"></a><span class="lineno">11720</span>&#160;</div>
<div class="line"><a name="l11721"></a><span class="lineno">11721</span>&#160;<span class="comment">// This tests that access check information remains on the global</span></div>
<div class="line"><a name="l11722"></a><span class="lineno">11722</span>&#160;<span class="comment">// object template when creating contexts.</span></div>
<div class="line"><a name="l11723"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a313ffabc3d0ffb8dd6b1798e01813e2b">11723</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AccessControlRepeatedContextCreation) {</div>
<div class="line"><a name="l11724"></a><span class="lineno">11724</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l11725"></a><span class="lineno">11725</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l11726"></a><span class="lineno">11726</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedSetAccessBlocker,</div>
<div class="line"><a name="l11727"></a><span class="lineno">11727</span>&#160;                                           IndexedSetAccessBlocker);</div>
<div class="line"><a name="l11728"></a><span class="lineno">11728</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::ObjectTemplateInfo&gt;</a> internal_template =</div>
<div class="line"><a name="l11729"></a><span class="lineno">11729</span>&#160;      v8::Utils::OpenHandle(*global_template);</div>
<div class="line"><a name="l11730"></a><span class="lineno">11730</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!internal_template-&gt;constructor()-&gt;IsUndefined());</div>
<div class="line"><a name="l11731"></a><span class="lineno">11731</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::FunctionTemplateInfo&gt;</a> constructor(</div>
<div class="line"><a name="l11732"></a><span class="lineno">11732</span>&#160;      <a class="code" href="../../da/dc6/classv8_1_1internal_1_1_function_template_info.html#ab160857983866e9ed90e3cc5b615ccf9">i::FunctionTemplateInfo::cast</a>(internal_template-&gt;constructor()));</div>
<div class="line"><a name="l11733"></a><span class="lineno">11733</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!constructor-&gt;access_check_info()-&gt;IsUndefined());</div>
<div class="line"><a name="l11734"></a><span class="lineno">11734</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0(Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template));</div>
<div class="line"><a name="l11735"></a><span class="lineno">11735</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!context0.IsEmpty());</div>
<div class="line"><a name="l11736"></a><span class="lineno">11736</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!constructor-&gt;access_check_info()-&gt;IsUndefined());</div>
<div class="line"><a name="l11737"></a><span class="lineno">11737</span>&#160;}</div>
<div class="line"><a name="l11738"></a><span class="lineno">11738</span>&#160;</div>
<div class="line"><a name="l11739"></a><span class="lineno">11739</span>&#160;</div>
<div class="line"><a name="l11740"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac79dda5325881c81cec7f6051491013c">11740</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TurnOnAccessCheck) {</div>
<div class="line"><a name="l11741"></a><span class="lineno">11741</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l11742"></a><span class="lineno">11742</span>&#160;</div>
<div class="line"><a name="l11743"></a><span class="lineno">11743</span>&#160;  <span class="comment">// Create an environment with access check to the global object disabled by</span></div>
<div class="line"><a name="l11744"></a><span class="lineno">11744</span>&#160;  <span class="comment">// default.</span></div>
<div class="line"><a name="l11745"></a><span class="lineno">11745</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l11746"></a><span class="lineno">11746</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedGetAccessBlocker,</div>
<div class="line"><a name="l11747"></a><span class="lineno">11747</span>&#160;                                           IndexedGetAccessBlocker,</div>
<div class="line"><a name="l11748"></a><span class="lineno">11748</span>&#160;                                           <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a>(),</div>
<div class="line"><a name="l11749"></a><span class="lineno">11749</span>&#160;                                           <span class="keyword">false</span>);</div>
<div class="line"><a name="l11750"></a><span class="lineno">11750</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context = Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l11751"></a><span class="lineno">11751</span>&#160;  Context::Scope context_scope(context);</div>
<div class="line"><a name="l11752"></a><span class="lineno">11752</span>&#160;</div>
<div class="line"><a name="l11753"></a><span class="lineno">11753</span>&#160;  <span class="comment">// Set up a property and a number of functions.</span></div>
<div class="line"><a name="l11754"></a><span class="lineno">11754</span>&#160;  context-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;a&quot;</span>), v8_num(1));</div>
<div class="line"><a name="l11755"></a><span class="lineno">11755</span>&#160;  CompileRun(<span class="stringliteral">&quot;function f1() {return a;}&quot;</span></div>
<div class="line"><a name="l11756"></a><span class="lineno">11756</span>&#160;             <span class="stringliteral">&quot;function f2() {return a;}&quot;</span></div>
<div class="line"><a name="l11757"></a><span class="lineno">11757</span>&#160;             <span class="stringliteral">&quot;function g1() {return h();}&quot;</span></div>
<div class="line"><a name="l11758"></a><span class="lineno">11758</span>&#160;             <span class="stringliteral">&quot;function g2() {return h();}&quot;</span></div>
<div class="line"><a name="l11759"></a><span class="lineno">11759</span>&#160;             <span class="stringliteral">&quot;function h() {return 1;}&quot;</span>);</div>
<div class="line"><a name="l11760"></a><span class="lineno">11760</span>&#160;  Local&lt;Function&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a62faa0b827a826722636f447051be4af">f1</a> =</div>
<div class="line"><a name="l11761"></a><span class="lineno">11761</span>&#160;      Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;f1&quot;</span>)));</div>
<div class="line"><a name="l11762"></a><span class="lineno">11762</span>&#160;  Local&lt;Function&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a61f71fa44dbac342ed3919921c4fc95b">f2</a> =</div>
<div class="line"><a name="l11763"></a><span class="lineno">11763</span>&#160;      Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;f2&quot;</span>)));</div>
<div class="line"><a name="l11764"></a><span class="lineno">11764</span>&#160;  Local&lt;Function&gt; g1 =</div>
<div class="line"><a name="l11765"></a><span class="lineno">11765</span>&#160;      Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;g1&quot;</span>)));</div>
<div class="line"><a name="l11766"></a><span class="lineno">11766</span>&#160;  Local&lt;Function&gt; g2 =</div>
<div class="line"><a name="l11767"></a><span class="lineno">11767</span>&#160;      Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;g2&quot;</span>)));</div>
<div class="line"><a name="l11768"></a><span class="lineno">11768</span>&#160;  Local&lt;Function&gt; h =</div>
<div class="line"><a name="l11769"></a><span class="lineno">11769</span>&#160;      Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;h&quot;</span>)));</div>
<div class="line"><a name="l11770"></a><span class="lineno">11770</span>&#160;</div>
<div class="line"><a name="l11771"></a><span class="lineno">11771</span>&#160;  <span class="comment">// Get the global object.</span></div>
<div class="line"><a name="l11772"></a><span class="lineno">11772</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;Global();</div>
<div class="line"><a name="l11773"></a><span class="lineno">11773</span>&#160;</div>
<div class="line"><a name="l11774"></a><span class="lineno">11774</span>&#160;  <span class="comment">// Call f1 one time and f2 a number of times. This will ensure that f1 still</span></div>
<div class="line"><a name="l11775"></a><span class="lineno">11775</span>&#160;  <span class="comment">// uses the runtime system to retreive property a whereas f2 uses global load</span></div>
<div class="line"><a name="l11776"></a><span class="lineno">11776</span>&#160;  <span class="comment">// inline cache.</span></div>
<div class="line"><a name="l11777"></a><span class="lineno">11777</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11778"></a><span class="lineno">11778</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l11779"></a><span class="lineno">11779</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11780"></a><span class="lineno">11780</span>&#160;  }</div>
<div class="line"><a name="l11781"></a><span class="lineno">11781</span>&#160;</div>
<div class="line"><a name="l11782"></a><span class="lineno">11782</span>&#160;  <span class="comment">// Same for g1 and g2.</span></div>
<div class="line"><a name="l11783"></a><span class="lineno">11783</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11784"></a><span class="lineno">11784</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l11785"></a><span class="lineno">11785</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11786"></a><span class="lineno">11786</span>&#160;  }</div>
<div class="line"><a name="l11787"></a><span class="lineno">11787</span>&#160;</div>
<div class="line"><a name="l11788"></a><span class="lineno">11788</span>&#160;  <span class="comment">// Detach the global and turn on access check.</span></div>
<div class="line"><a name="l11789"></a><span class="lineno">11789</span>&#160;  context-&gt;DetachGlobal();</div>
<div class="line"><a name="l11790"></a><span class="lineno">11790</span>&#160;  context-&gt;Global()-&gt;TurnOnAccessCheck();</div>
<div class="line"><a name="l11791"></a><span class="lineno">11791</span>&#160;</div>
<div class="line"><a name="l11792"></a><span class="lineno">11792</span>&#160;  <span class="comment">// Failing access check to property get results in undefined.</span></div>
<div class="line"><a name="l11793"></a><span class="lineno">11793</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;IsUndefined());</div>
<div class="line"><a name="l11794"></a><span class="lineno">11794</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;IsUndefined());</div>
<div class="line"><a name="l11795"></a><span class="lineno">11795</span>&#160;</div>
<div class="line"><a name="l11796"></a><span class="lineno">11796</span>&#160;  <span class="comment">// Failing access check to function call results in exception.</span></div>
<div class="line"><a name="l11797"></a><span class="lineno">11797</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>).IsEmpty());</div>
<div class="line"><a name="l11798"></a><span class="lineno">11798</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>).IsEmpty());</div>
<div class="line"><a name="l11799"></a><span class="lineno">11799</span>&#160;</div>
<div class="line"><a name="l11800"></a><span class="lineno">11800</span>&#160;  <span class="comment">// No failing access check when just returning a constant.</span></div>
<div class="line"><a name="l11801"></a><span class="lineno">11801</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(h-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11802"></a><span class="lineno">11802</span>&#160;}</div>
<div class="line"><a name="l11803"></a><span class="lineno">11803</span>&#160;</div>
<div class="line"><a name="l11804"></a><span class="lineno">11804</span>&#160;</div>
<div class="line"><a name="l11805"></a><span class="lineno">11805</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kPropertyA = <span class="stringliteral">&quot;a&quot;</span>;</div>
<div class="line"><a name="l11806"></a><span class="lineno">11806</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kPropertyH = <span class="stringliteral">&quot;h&quot;</span>;</div>
<div class="line"><a name="l11807"></a><span class="lineno">11807</span>&#160;</div>
<div class="line"><a name="l11808"></a><span class="lineno">11808</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> NamedGetAccessBlockAandH(Local&lt;v8::Object&gt; obj,</div>
<div class="line"><a name="l11809"></a><span class="lineno">11809</span>&#160;                                       Local&lt;Value&gt; name,</div>
<div class="line"><a name="l11810"></a><span class="lineno">11810</span>&#160;                                       <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l11811"></a><span class="lineno">11811</span>&#160;                                       Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l11812"></a><span class="lineno">11812</span>&#160;  <span class="keywordflow">if</span> (!name-&gt;IsString()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11813"></a><span class="lineno">11813</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> name_handle =</div>
<div class="line"><a name="l11814"></a><span class="lineno">11814</span>&#160;      v8::Utils::OpenHandle(String::Cast(*name));</div>
<div class="line"><a name="l11815"></a><span class="lineno">11815</span>&#160;  <span class="keywordflow">return</span> !name_handle-&gt;IsEqualTo(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">i::CStrVector</a>(kPropertyA))</div>
<div class="line"><a name="l11816"></a><span class="lineno">11816</span>&#160;      &amp;&amp; !name_handle-&gt;IsEqualTo(<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">i::CStrVector</a>(kPropertyH));</div>
<div class="line"><a name="l11817"></a><span class="lineno">11817</span>&#160;}</div>
<div class="line"><a name="l11818"></a><span class="lineno">11818</span>&#160;</div>
<div class="line"><a name="l11819"></a><span class="lineno">11819</span>&#160;</div>
<div class="line"><a name="l11820"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad5bcac8a61e42729fed16474de78e06e">11820</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TurnOnAccessCheckAndRecompile) {</div>
<div class="line"><a name="l11821"></a><span class="lineno">11821</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l11822"></a><span class="lineno">11822</span>&#160;</div>
<div class="line"><a name="l11823"></a><span class="lineno">11823</span>&#160;  <span class="comment">// Create an environment with access check to the global object disabled by</span></div>
<div class="line"><a name="l11824"></a><span class="lineno">11824</span>&#160;  <span class="comment">// default. When the registered access checker will block access to properties</span></div>
<div class="line"><a name="l11825"></a><span class="lineno">11825</span>&#160;  <span class="comment">// a and h.</span></div>
<div class="line"><a name="l11826"></a><span class="lineno">11826</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l11827"></a><span class="lineno">11827</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedGetAccessBlockAandH,</div>
<div class="line"><a name="l11828"></a><span class="lineno">11828</span>&#160;                                           IndexedGetAccessBlocker,</div>
<div class="line"><a name="l11829"></a><span class="lineno">11829</span>&#160;                                           <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a>(),</div>
<div class="line"><a name="l11830"></a><span class="lineno">11830</span>&#160;                                           <span class="keyword">false</span>);</div>
<div class="line"><a name="l11831"></a><span class="lineno">11831</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context = Context::New(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l11832"></a><span class="lineno">11832</span>&#160;  Context::Scope context_scope(context);</div>
<div class="line"><a name="l11833"></a><span class="lineno">11833</span>&#160;</div>
<div class="line"><a name="l11834"></a><span class="lineno">11834</span>&#160;  <span class="comment">// Set up a property and a number of functions.</span></div>
<div class="line"><a name="l11835"></a><span class="lineno">11835</span>&#160;  context-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;a&quot;</span>), v8_num(1));</div>
<div class="line"><a name="l11836"></a><span class="lineno">11836</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* source = <span class="stringliteral">&quot;function f1() {return a;}&quot;</span></div>
<div class="line"><a name="l11837"></a><span class="lineno">11837</span>&#160;                              <span class="stringliteral">&quot;function f2() {return a;}&quot;</span></div>
<div class="line"><a name="l11838"></a><span class="lineno">11838</span>&#160;                              <span class="stringliteral">&quot;function g1() {return h();}&quot;</span></div>
<div class="line"><a name="l11839"></a><span class="lineno">11839</span>&#160;                              <span class="stringliteral">&quot;function g2() {return h();}&quot;</span></div>
<div class="line"><a name="l11840"></a><span class="lineno">11840</span>&#160;                              <span class="stringliteral">&quot;function h() {return 1;}&quot;</span>;</div>
<div class="line"><a name="l11841"></a><span class="lineno">11841</span>&#160;</div>
<div class="line"><a name="l11842"></a><span class="lineno">11842</span>&#160;  CompileRun(source);</div>
<div class="line"><a name="l11843"></a><span class="lineno">11843</span>&#160;  Local&lt;Function&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a62faa0b827a826722636f447051be4af">f1</a>;</div>
<div class="line"><a name="l11844"></a><span class="lineno">11844</span>&#160;  Local&lt;Function&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a61f71fa44dbac342ed3919921c4fc95b">f2</a>;</div>
<div class="line"><a name="l11845"></a><span class="lineno">11845</span>&#160;  Local&lt;Function&gt; g1;</div>
<div class="line"><a name="l11846"></a><span class="lineno">11846</span>&#160;  Local&lt;Function&gt; g2;</div>
<div class="line"><a name="l11847"></a><span class="lineno">11847</span>&#160;  Local&lt;Function&gt; h;</div>
<div class="line"><a name="l11848"></a><span class="lineno">11848</span>&#160;  f1 = Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;f1&quot;</span>)));</div>
<div class="line"><a name="l11849"></a><span class="lineno">11849</span>&#160;  f2 = Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;f2&quot;</span>)));</div>
<div class="line"><a name="l11850"></a><span class="lineno">11850</span>&#160;  g1 = Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;g1&quot;</span>)));</div>
<div class="line"><a name="l11851"></a><span class="lineno">11851</span>&#160;  g2 = Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;g2&quot;</span>)));</div>
<div class="line"><a name="l11852"></a><span class="lineno">11852</span>&#160;  h =  Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;h&quot;</span>)));</div>
<div class="line"><a name="l11853"></a><span class="lineno">11853</span>&#160;</div>
<div class="line"><a name="l11854"></a><span class="lineno">11854</span>&#160;  <span class="comment">// Get the global object.</span></div>
<div class="line"><a name="l11855"></a><span class="lineno">11855</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;Global();</div>
<div class="line"><a name="l11856"></a><span class="lineno">11856</span>&#160;</div>
<div class="line"><a name="l11857"></a><span class="lineno">11857</span>&#160;  <span class="comment">// Call f1 one time and f2 a number of times. This will ensure that f1 still</span></div>
<div class="line"><a name="l11858"></a><span class="lineno">11858</span>&#160;  <span class="comment">// uses the runtime system to retreive property a whereas f2 uses global load</span></div>
<div class="line"><a name="l11859"></a><span class="lineno">11859</span>&#160;  <span class="comment">// inline cache.</span></div>
<div class="line"><a name="l11860"></a><span class="lineno">11860</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11861"></a><span class="lineno">11861</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l11862"></a><span class="lineno">11862</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11863"></a><span class="lineno">11863</span>&#160;  }</div>
<div class="line"><a name="l11864"></a><span class="lineno">11864</span>&#160;</div>
<div class="line"><a name="l11865"></a><span class="lineno">11865</span>&#160;  <span class="comment">// Same for g1 and g2.</span></div>
<div class="line"><a name="l11866"></a><span class="lineno">11866</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11867"></a><span class="lineno">11867</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l11868"></a><span class="lineno">11868</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11869"></a><span class="lineno">11869</span>&#160;  }</div>
<div class="line"><a name="l11870"></a><span class="lineno">11870</span>&#160;</div>
<div class="line"><a name="l11871"></a><span class="lineno">11871</span>&#160;  <span class="comment">// Detach the global and turn on access check now blocking access to property</span></div>
<div class="line"><a name="l11872"></a><span class="lineno">11872</span>&#160;  <span class="comment">// a and function h.</span></div>
<div class="line"><a name="l11873"></a><span class="lineno">11873</span>&#160;  context-&gt;DetachGlobal();</div>
<div class="line"><a name="l11874"></a><span class="lineno">11874</span>&#160;  context-&gt;Global()-&gt;TurnOnAccessCheck();</div>
<div class="line"><a name="l11875"></a><span class="lineno">11875</span>&#160;</div>
<div class="line"><a name="l11876"></a><span class="lineno">11876</span>&#160;  <span class="comment">// Failing access check to property get results in undefined.</span></div>
<div class="line"><a name="l11877"></a><span class="lineno">11877</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;IsUndefined());</div>
<div class="line"><a name="l11878"></a><span class="lineno">11878</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;IsUndefined());</div>
<div class="line"><a name="l11879"></a><span class="lineno">11879</span>&#160;</div>
<div class="line"><a name="l11880"></a><span class="lineno">11880</span>&#160;  <span class="comment">// Failing access check to function call results in exception.</span></div>
<div class="line"><a name="l11881"></a><span class="lineno">11881</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>).IsEmpty());</div>
<div class="line"><a name="l11882"></a><span class="lineno">11882</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>).IsEmpty());</div>
<div class="line"><a name="l11883"></a><span class="lineno">11883</span>&#160;</div>
<div class="line"><a name="l11884"></a><span class="lineno">11884</span>&#160;  <span class="comment">// No failing access check when just returning a constant.</span></div>
<div class="line"><a name="l11885"></a><span class="lineno">11885</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(h-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;Equals(v8_num(1)));</div>
<div class="line"><a name="l11886"></a><span class="lineno">11886</span>&#160;</div>
<div class="line"><a name="l11887"></a><span class="lineno">11887</span>&#160;  <span class="comment">// Now compile the source again. And get the newly compiled functions, except</span></div>
<div class="line"><a name="l11888"></a><span class="lineno">11888</span>&#160;  <span class="comment">// for h for which access is blocked.</span></div>
<div class="line"><a name="l11889"></a><span class="lineno">11889</span>&#160;  CompileRun(source);</div>
<div class="line"><a name="l11890"></a><span class="lineno">11890</span>&#160;  f1 = Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;f1&quot;</span>)));</div>
<div class="line"><a name="l11891"></a><span class="lineno">11891</span>&#160;  f2 = Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;f2&quot;</span>)));</div>
<div class="line"><a name="l11892"></a><span class="lineno">11892</span>&#160;  g1 = Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;g1&quot;</span>)));</div>
<div class="line"><a name="l11893"></a><span class="lineno">11893</span>&#160;  g2 = Local&lt;Function&gt;::Cast(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;g2&quot;</span>)));</div>
<div class="line"><a name="l11894"></a><span class="lineno">11894</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;h&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l11895"></a><span class="lineno">11895</span>&#160;</div>
<div class="line"><a name="l11896"></a><span class="lineno">11896</span>&#160;  <span class="comment">// Failing access check to property get results in undefined.</span></div>
<div class="line"><a name="l11897"></a><span class="lineno">11897</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;IsUndefined());</div>
<div class="line"><a name="l11898"></a><span class="lineno">11898</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(f2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>)-&gt;IsUndefined());</div>
<div class="line"><a name="l11899"></a><span class="lineno">11899</span>&#160;</div>
<div class="line"><a name="l11900"></a><span class="lineno">11900</span>&#160;  <span class="comment">// Failing access check to function call results in exception.</span></div>
<div class="line"><a name="l11901"></a><span class="lineno">11901</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g1-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>).IsEmpty());</div>
<div class="line"><a name="l11902"></a><span class="lineno">11902</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(g2-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>).IsEmpty());</div>
<div class="line"><a name="l11903"></a><span class="lineno">11903</span>&#160;}</div>
<div class="line"><a name="l11904"></a><span class="lineno">11904</span>&#160;</div>
<div class="line"><a name="l11905"></a><span class="lineno">11905</span>&#160;</div>
<div class="line"><a name="l11906"></a><span class="lineno">11906</span>&#160;<span class="comment">// This test verifies that pre-compilation (aka preparsing) can be called</span></div>
<div class="line"><a name="l11907"></a><span class="lineno">11907</span>&#160;<span class="comment">// without initializing the whole VM. Thus we cannot run this test in a</span></div>
<div class="line"><a name="l11908"></a><span class="lineno">11908</span>&#160;<span class="comment">// multi-threaded setup.</span></div>
<div class="line"><a name="l11909"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac625d15eca88d54db6047f9f18fdea45">11909</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(PreCompile) {</div>
<div class="line"><a name="l11910"></a><span class="lineno">11910</span>&#160;  <span class="comment">// TODO(155): This test would break without the initialization of V8. This is</span></div>
<div class="line"><a name="l11911"></a><span class="lineno">11911</span>&#160;  <span class="comment">// a workaround for now to make this test not fail.</span></div>
<div class="line"><a name="l11912"></a><span class="lineno">11912</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l11913"></a><span class="lineno">11913</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script = <span class="stringliteral">&quot;function foo(a) { return a+1; }&quot;</span>;</div>
<div class="line"><a name="l11914"></a><span class="lineno">11914</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd =</div>
<div class="line"><a name="l11915"></a><span class="lineno">11915</span>&#160;      <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(script, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(script));</div>
<div class="line"><a name="l11916"></a><span class="lineno">11916</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>(), 0);</div>
<div class="line"><a name="l11917"></a><span class="lineno">11917</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>(), <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l11918"></a><span class="lineno">11918</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#af9e55cb0256f103ca177a4a4be1c561c">HasError</a>());</div>
<div class="line"><a name="l11919"></a><span class="lineno">11919</span>&#160;  <span class="keyword">delete</span> sd;</div>
<div class="line"><a name="l11920"></a><span class="lineno">11920</span>&#160;}</div>
<div class="line"><a name="l11921"></a><span class="lineno">11921</span>&#160;</div>
<div class="line"><a name="l11922"></a><span class="lineno">11922</span>&#160;</div>
<div class="line"><a name="l11923"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af198da259209158dbd827bf6d4178397">11923</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(PreCompileWithError) {</div>
<div class="line"><a name="l11924"></a><span class="lineno">11924</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l11925"></a><span class="lineno">11925</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script = <span class="stringliteral">&quot;function foo(a) { return 1 * * 2; }&quot;</span>;</div>
<div class="line"><a name="l11926"></a><span class="lineno">11926</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd =</div>
<div class="line"><a name="l11927"></a><span class="lineno">11927</span>&#160;      <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(script, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(script));</div>
<div class="line"><a name="l11928"></a><span class="lineno">11928</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#af9e55cb0256f103ca177a4a4be1c561c">HasError</a>());</div>
<div class="line"><a name="l11929"></a><span class="lineno">11929</span>&#160;  <span class="keyword">delete</span> sd;</div>
<div class="line"><a name="l11930"></a><span class="lineno">11930</span>&#160;}</div>
<div class="line"><a name="l11931"></a><span class="lineno">11931</span>&#160;</div>
<div class="line"><a name="l11932"></a><span class="lineno">11932</span>&#160;</div>
<div class="line"><a name="l11933"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac1975adace3d00368583f6b43efe79b1">11933</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(Regress31661) {</div>
<div class="line"><a name="l11934"></a><span class="lineno">11934</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l11935"></a><span class="lineno">11935</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script = <span class="stringliteral">&quot; The Definintive Guide&quot;</span>;</div>
<div class="line"><a name="l11936"></a><span class="lineno">11936</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd =</div>
<div class="line"><a name="l11937"></a><span class="lineno">11937</span>&#160;      <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(script, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(script));</div>
<div class="line"><a name="l11938"></a><span class="lineno">11938</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#af9e55cb0256f103ca177a4a4be1c561c">HasError</a>());</div>
<div class="line"><a name="l11939"></a><span class="lineno">11939</span>&#160;  <span class="keyword">delete</span> sd;</div>
<div class="line"><a name="l11940"></a><span class="lineno">11940</span>&#160;}</div>
<div class="line"><a name="l11941"></a><span class="lineno">11941</span>&#160;</div>
<div class="line"><a name="l11942"></a><span class="lineno">11942</span>&#160;</div>
<div class="line"><a name="l11943"></a><span class="lineno">11943</span>&#160;<span class="comment">// Tests that ScriptData can be serialized and deserialized.</span></div>
<div class="line"><a name="l11944"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1f4c3ec994d298651757116197dd10fb">11944</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(PreCompileSerialization) {</div>
<div class="line"><a name="l11945"></a><span class="lineno">11945</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l11946"></a><span class="lineno">11946</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script = <span class="stringliteral">&quot;function foo(a) { return a+1; }&quot;</span>;</div>
<div class="line"><a name="l11947"></a><span class="lineno">11947</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd =</div>
<div class="line"><a name="l11948"></a><span class="lineno">11948</span>&#160;      <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(script, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(script));</div>
<div class="line"><a name="l11949"></a><span class="lineno">11949</span>&#160;</div>
<div class="line"><a name="l11950"></a><span class="lineno">11950</span>&#160;  <span class="comment">// Serialize.</span></div>
<div class="line"><a name="l11951"></a><span class="lineno">11951</span>&#160;  <span class="keywordtype">int</span> serialized_data_length = sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>();</div>
<div class="line"><a name="l11952"></a><span class="lineno">11952</span>&#160;  <span class="keywordtype">char</span>* serialized_data = i::NewArray&lt;char&gt;(serialized_data_length);</div>
<div class="line"><a name="l11953"></a><span class="lineno">11953</span>&#160;  memcpy(serialized_data, sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>(), serialized_data_length);</div>
<div class="line"><a name="l11954"></a><span class="lineno">11954</span>&#160;</div>
<div class="line"><a name="l11955"></a><span class="lineno">11955</span>&#160;  <span class="comment">// Deserialize.</span></div>
<div class="line"><a name="l11956"></a><span class="lineno">11956</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* deserialized_sd =</div>
<div class="line"><a name="l11957"></a><span class="lineno">11957</span>&#160;      <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a8c7c45257c432a5745914bac2b7c2f6f">v8::ScriptData::New</a>(serialized_data, serialized_data_length);</div>
<div class="line"><a name="l11958"></a><span class="lineno">11958</span>&#160;</div>
<div class="line"><a name="l11959"></a><span class="lineno">11959</span>&#160;  <span class="comment">// Verify that the original is the same as the deserialized.</span></div>
<div class="line"><a name="l11960"></a><span class="lineno">11960</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>(), deserialized_sd-&gt;Length());</div>
<div class="line"><a name="l11961"></a><span class="lineno">11961</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, memcmp(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>(), deserialized_sd-&gt;Data(), sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>()));</div>
<div class="line"><a name="l11962"></a><span class="lineno">11962</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#af9e55cb0256f103ca177a4a4be1c561c">HasError</a>(), deserialized_sd-&gt;HasError());</div>
<div class="line"><a name="l11963"></a><span class="lineno">11963</span>&#160;</div>
<div class="line"><a name="l11964"></a><span class="lineno">11964</span>&#160;  <span class="keyword">delete</span> sd;</div>
<div class="line"><a name="l11965"></a><span class="lineno">11965</span>&#160;  <span class="keyword">delete</span> deserialized_sd;</div>
<div class="line"><a name="l11966"></a><span class="lineno">11966</span>&#160;}</div>
<div class="line"><a name="l11967"></a><span class="lineno">11967</span>&#160;</div>
<div class="line"><a name="l11968"></a><span class="lineno">11968</span>&#160;</div>
<div class="line"><a name="l11969"></a><span class="lineno">11969</span>&#160;<span class="comment">// Attempts to deserialize bad data.</span></div>
<div class="line"><a name="l11970"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae6a788d4c61f7aae361141ecf28e9c17">11970</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(PreCompileDeserializationError) {</div>
<div class="line"><a name="l11971"></a><span class="lineno">11971</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l11972"></a><span class="lineno">11972</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* data = <span class="stringliteral">&quot;DONT CARE&quot;</span>;</div>
<div class="line"><a name="l11973"></a><span class="lineno">11973</span>&#160;  <span class="keywordtype">int</span> invalid_size = 3;</div>
<div class="line"><a name="l11974"></a><span class="lineno">11974</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd = <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a8c7c45257c432a5745914bac2b7c2f6f">v8::ScriptData::New</a>(data, invalid_size);</div>
<div class="line"><a name="l11975"></a><span class="lineno">11975</span>&#160;</div>
<div class="line"><a name="l11976"></a><span class="lineno">11976</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>());</div>
<div class="line"><a name="l11977"></a><span class="lineno">11977</span>&#160;</div>
<div class="line"><a name="l11978"></a><span class="lineno">11978</span>&#160;  <span class="keyword">delete</span> sd;</div>
<div class="line"><a name="l11979"></a><span class="lineno">11979</span>&#160;}</div>
<div class="line"><a name="l11980"></a><span class="lineno">11980</span>&#160;</div>
<div class="line"><a name="l11981"></a><span class="lineno">11981</span>&#160;</div>
<div class="line"><a name="l11982"></a><span class="lineno">11982</span>&#160;<span class="comment">// Attempts to deserialize bad data.</span></div>
<div class="line"><a name="l11983"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a08a4ea25539039bc0e5ac17566139243">11983</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(PreCompileInvalidPreparseDataError) {</div>
<div class="line"><a name="l11984"></a><span class="lineno">11984</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l11985"></a><span class="lineno">11985</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l11986"></a><span class="lineno">11986</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l11987"></a><span class="lineno">11987</span>&#160;</div>
<div class="line"><a name="l11988"></a><span class="lineno">11988</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* script = <span class="stringliteral">&quot;function foo(){ return 5;}\n&quot;</span></div>
<div class="line"><a name="l11989"></a><span class="lineno">11989</span>&#160;      <span class="stringliteral">&quot;function bar(){ return 6 + 7;}  foo();&quot;</span>;</div>
<div class="line"><a name="l11990"></a><span class="lineno">11990</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd =</div>
<div class="line"><a name="l11991"></a><span class="lineno">11991</span>&#160;      <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(script, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(script));</div>
<div class="line"><a name="l11992"></a><span class="lineno">11992</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#af9e55cb0256f103ca177a4a4be1c561c">HasError</a>());</div>
<div class="line"><a name="l11993"></a><span class="lineno">11993</span>&#160;  <span class="comment">// ScriptDataImpl private implementation details</span></div>
<div class="line"><a name="l11994"></a><span class="lineno">11994</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kHeaderSize = <a class="code" href="../../d0/dfe/structv8_1_1internal_1_1_preparse_data_constants.html#ac1cb10d97e8091bf949042b4d67f91c8">i::PreparseDataConstants::kHeaderSize</a>;</div>
<div class="line"><a name="l11995"></a><span class="lineno">11995</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFunctionEntrySize = i::FunctionEntry::kSize;</div>
<div class="line"><a name="l11996"></a><span class="lineno">11996</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFunctionEntryStartOffset = 0;</div>
<div class="line"><a name="l11997"></a><span class="lineno">11997</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kFunctionEntryEndOffset = 1;</div>
<div class="line"><a name="l11998"></a><span class="lineno">11998</span>&#160;  <span class="keywordtype">unsigned</span>* sd_data =</div>
<div class="line"><a name="l11999"></a><span class="lineno">11999</span>&#160;      <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span>*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>()));</div>
<div class="line"><a name="l12000"></a><span class="lineno">12000</span>&#160;</div>
<div class="line"><a name="l12001"></a><span class="lineno">12001</span>&#160;  <span class="comment">// Overwrite function bar&#39;s end position with 0.</span></div>
<div class="line"><a name="l12002"></a><span class="lineno">12002</span>&#160;  sd_data[kHeaderSize + 1 * kFunctionEntrySize + kFunctionEntryEndOffset] = 0;</div>
<div class="line"><a name="l12003"></a><span class="lineno">12003</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l12004"></a><span class="lineno">12004</span>&#160;</div>
<div class="line"><a name="l12005"></a><span class="lineno">12005</span>&#160;  Local&lt;String&gt; source = String::New(script);</div>
<div class="line"><a name="l12006"></a><span class="lineno">12006</span>&#160;  Local&lt;Script&gt; compiled_script = Script::New(source, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, sd);</div>
<div class="line"><a name="l12007"></a><span class="lineno">12007</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l12008"></a><span class="lineno">12008</span>&#160;  String::AsciiValue exception_value(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a0e4e0c42f9819d78b73f6f72793b3caa">Message</a>()-&gt;Get());</div>
<div class="line"><a name="l12009"></a><span class="lineno">12009</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;Uncaught SyntaxError: Invalid preparser data for function bar&quot;</span>,</div>
<div class="line"><a name="l12010"></a><span class="lineno">12010</span>&#160;           *exception_value);</div>
<div class="line"><a name="l12011"></a><span class="lineno">12011</span>&#160;</div>
<div class="line"><a name="l12012"></a><span class="lineno">12012</span>&#160;  try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a>();</div>
<div class="line"><a name="l12013"></a><span class="lineno">12013</span>&#160;</div>
<div class="line"><a name="l12014"></a><span class="lineno">12014</span>&#160;  <span class="comment">// Overwrite function bar&#39;s start position with 200.  The function entry</span></div>
<div class="line"><a name="l12015"></a><span class="lineno">12015</span>&#160;  <span class="comment">// will not be found when searching for it by position and we should fall</span></div>
<div class="line"><a name="l12016"></a><span class="lineno">12016</span>&#160;  <span class="comment">// back on eager compilation.</span></div>
<div class="line"><a name="l12017"></a><span class="lineno">12017</span>&#160;  sd = <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(script, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(script));</div>
<div class="line"><a name="l12018"></a><span class="lineno">12018</span>&#160;  sd_data = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span>*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(sd-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>()));</div>
<div class="line"><a name="l12019"></a><span class="lineno">12019</span>&#160;  sd_data[kHeaderSize + 1 * kFunctionEntrySize + kFunctionEntryStartOffset] =</div>
<div class="line"><a name="l12020"></a><span class="lineno">12020</span>&#160;      200;</div>
<div class="line"><a name="l12021"></a><span class="lineno">12021</span>&#160;  compiled_script = Script::New(source, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, sd);</div>
<div class="line"><a name="l12022"></a><span class="lineno">12022</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l12023"></a><span class="lineno">12023</span>&#160;</div>
<div class="line"><a name="l12024"></a><span class="lineno">12024</span>&#160;  <span class="keyword">delete</span> sd;</div>
<div class="line"><a name="l12025"></a><span class="lineno">12025</span>&#160;}</div>
<div class="line"><a name="l12026"></a><span class="lineno">12026</span>&#160;</div>
<div class="line"><a name="l12027"></a><span class="lineno">12027</span>&#160;</div>
<div class="line"><a name="l12028"></a><span class="lineno">12028</span>&#160;<span class="comment">// Verifies that the Handle&lt;String&gt; and const char* versions of the API produce</span></div>
<div class="line"><a name="l12029"></a><span class="lineno">12029</span>&#160;<span class="comment">// the same results (at least for one trivial case).</span></div>
<div class="line"><a name="l12030"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1243a905442fa406ce92db490ffdf9dc">12030</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(PreCompileAPIVariationsAreSame) {</div>
<div class="line"><a name="l12031"></a><span class="lineno">12031</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l12032"></a><span class="lineno">12032</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12033"></a><span class="lineno">12033</span>&#160;</div>
<div class="line"><a name="l12034"></a><span class="lineno">12034</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* cstring = <span class="stringliteral">&quot;function foo(a) { return a+1; }&quot;</span>;</div>
<div class="line"><a name="l12035"></a><span class="lineno">12035</span>&#160;</div>
<div class="line"><a name="l12036"></a><span class="lineno">12036</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd_from_cstring =</div>
<div class="line"><a name="l12037"></a><span class="lineno">12037</span>&#160;      <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(cstring, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(cstring));</div>
<div class="line"><a name="l12038"></a><span class="lineno">12038</span>&#160;</div>
<div class="line"><a name="l12039"></a><span class="lineno">12039</span>&#160;  <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>* resource = <span class="keyword">new</span> <a class="code" href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a>(cstring);</div>
<div class="line"><a name="l12040"></a><span class="lineno">12040</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd_from_external_string = <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(</div>
<div class="line"><a name="l12041"></a><span class="lineno">12041</span>&#160;      <a class="code" href="../../d2/db3/classv8_1_1_string.html#a973aec0759c01b6fb411d7fca8300e6a">v8::String::NewExternal</a>(resource));</div>
<div class="line"><a name="l12042"></a><span class="lineno">12042</span>&#160;</div>
<div class="line"><a name="l12043"></a><span class="lineno">12043</span>&#160;  <a class="code" href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a>* sd_from_string = <a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a>(</div>
<div class="line"><a name="l12044"></a><span class="lineno">12044</span>&#160;      <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(cstring));</div>
<div class="line"><a name="l12045"></a><span class="lineno">12045</span>&#160;</div>
<div class="line"><a name="l12046"></a><span class="lineno">12046</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(sd_from_cstring-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>(), sd_from_external_string-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>());</div>
<div class="line"><a name="l12047"></a><span class="lineno">12047</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, memcmp(sd_from_cstring-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>(),</div>
<div class="line"><a name="l12048"></a><span class="lineno">12048</span>&#160;                     sd_from_external_string-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>(),</div>
<div class="line"><a name="l12049"></a><span class="lineno">12049</span>&#160;                     sd_from_cstring-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>()));</div>
<div class="line"><a name="l12050"></a><span class="lineno">12050</span>&#160;</div>
<div class="line"><a name="l12051"></a><span class="lineno">12051</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(sd_from_cstring-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>(), sd_from_string-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>());</div>
<div class="line"><a name="l12052"></a><span class="lineno">12052</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, memcmp(sd_from_cstring-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>(),</div>
<div class="line"><a name="l12053"></a><span class="lineno">12053</span>&#160;                     sd_from_string-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">Data</a>(),</div>
<div class="line"><a name="l12054"></a><span class="lineno">12054</span>&#160;                     sd_from_cstring-&gt;<a class="code" href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">Length</a>()));</div>
<div class="line"><a name="l12055"></a><span class="lineno">12055</span>&#160;</div>
<div class="line"><a name="l12056"></a><span class="lineno">12056</span>&#160;</div>
<div class="line"><a name="l12057"></a><span class="lineno">12057</span>&#160;  <span class="keyword">delete</span> sd_from_cstring;</div>
<div class="line"><a name="l12058"></a><span class="lineno">12058</span>&#160;  <span class="keyword">delete</span> sd_from_external_string;</div>
<div class="line"><a name="l12059"></a><span class="lineno">12059</span>&#160;  <span class="keyword">delete</span> sd_from_string;</div>
<div class="line"><a name="l12060"></a><span class="lineno">12060</span>&#160;}</div>
<div class="line"><a name="l12061"></a><span class="lineno">12061</span>&#160;</div>
<div class="line"><a name="l12062"></a><span class="lineno">12062</span>&#160;</div>
<div class="line"><a name="l12063"></a><span class="lineno">12063</span>&#160;<span class="comment">// This tests that we do not allow dictionary load/call inline caches</span></div>
<div class="line"><a name="l12064"></a><span class="lineno">12064</span>&#160;<span class="comment">// to use functions that have not yet been compiled.  The potential</span></div>
<div class="line"><a name="l12065"></a><span class="lineno">12065</span>&#160;<span class="comment">// problem of loading a function that has not yet been compiled can</span></div>
<div class="line"><a name="l12066"></a><span class="lineno">12066</span>&#160;<span class="comment">// arise because we share code between contexts via the compilation</span></div>
<div class="line"><a name="l12067"></a><span class="lineno">12067</span>&#160;<span class="comment">// cache.</span></div>
<div class="line"><a name="l12068"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aad033cae1cb8719b9bd879306a7e042e">12068</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(DictionaryICLoadedFunction) {</div>
<div class="line"><a name="l12069"></a><span class="lineno">12069</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12070"></a><span class="lineno">12070</span>&#160;  <span class="comment">// Test LoadIC.</span></div>
<div class="line"><a name="l12071"></a><span class="lineno">12071</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {</div>
<div class="line"><a name="l12072"></a><span class="lineno">12072</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l12073"></a><span class="lineno">12073</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;tmp&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>());</div>
<div class="line"><a name="l12074"></a><span class="lineno">12074</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Delete(v8_str(<span class="stringliteral">&quot;tmp&quot;</span>));</div>
<div class="line"><a name="l12075"></a><span class="lineno">12075</span>&#160;    CompileRun(<span class="stringliteral">&quot;for (var j = 0; j &lt; 10; j++) new RegExp(&#39;&#39;);&quot;</span>);</div>
<div class="line"><a name="l12076"></a><span class="lineno">12076</span>&#160;  }</div>
<div class="line"><a name="l12077"></a><span class="lineno">12077</span>&#160;  <span class="comment">// Test CallIC.</span></div>
<div class="line"><a name="l12078"></a><span class="lineno">12078</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {</div>
<div class="line"><a name="l12079"></a><span class="lineno">12079</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l12080"></a><span class="lineno">12080</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;tmp&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>());</div>
<div class="line"><a name="l12081"></a><span class="lineno">12081</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Delete(v8_str(<span class="stringliteral">&quot;tmp&quot;</span>));</div>
<div class="line"><a name="l12082"></a><span class="lineno">12082</span>&#160;    CompileRun(<span class="stringliteral">&quot;for (var j = 0; j &lt; 10; j++) RegExp(&#39;&#39;)&quot;</span>);</div>
<div class="line"><a name="l12083"></a><span class="lineno">12083</span>&#160;  }</div>
<div class="line"><a name="l12084"></a><span class="lineno">12084</span>&#160;}</div>
<div class="line"><a name="l12085"></a><span class="lineno">12085</span>&#160;</div>
<div class="line"><a name="l12086"></a><span class="lineno">12086</span>&#160;</div>
<div class="line"><a name="l12087"></a><span class="lineno">12087</span>&#160;<span class="comment">// Test that cross-context new calls use the context of the callee to</span></div>
<div class="line"><a name="l12088"></a><span class="lineno">12088</span>&#160;<span class="comment">// create the new JavaScript object.</span></div>
<div class="line"><a name="l12089"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af2bf555255e42649d19f3de1838b214c">12089</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CrossContextNew) {</div>
<div class="line"><a name="l12090"></a><span class="lineno">12090</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12091"></a><span class="lineno">12091</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context0 = Context::New();</div>
<div class="line"><a name="l12092"></a><span class="lineno">12092</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context1 = Context::New();</div>
<div class="line"><a name="l12093"></a><span class="lineno">12093</span>&#160;</div>
<div class="line"><a name="l12094"></a><span class="lineno">12094</span>&#160;  <span class="comment">// Allow cross-domain access.</span></div>
<div class="line"><a name="l12095"></a><span class="lineno">12095</span>&#160;  Local&lt;String&gt; token = v8_str(<span class="stringliteral">&quot;&lt;security token&gt;&quot;</span>);</div>
<div class="line"><a name="l12096"></a><span class="lineno">12096</span>&#160;  context0-&gt;SetSecurityToken(token);</div>
<div class="line"><a name="l12097"></a><span class="lineno">12097</span>&#160;  context1-&gt;SetSecurityToken(token);</div>
<div class="line"><a name="l12098"></a><span class="lineno">12098</span>&#160;</div>
<div class="line"><a name="l12099"></a><span class="lineno">12099</span>&#160;  <span class="comment">// Set an &#39;x&#39; property on the Object prototype and define a</span></div>
<div class="line"><a name="l12100"></a><span class="lineno">12100</span>&#160;  <span class="comment">// constructor function in context0.</span></div>
<div class="line"><a name="l12101"></a><span class="lineno">12101</span>&#160;  context0-&gt;Enter();</div>
<div class="line"><a name="l12102"></a><span class="lineno">12102</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.prototype.x = 42; function C() {};&quot;</span>);</div>
<div class="line"><a name="l12103"></a><span class="lineno">12103</span>&#160;  context0-&gt;Exit();</div>
<div class="line"><a name="l12104"></a><span class="lineno">12104</span>&#160;</div>
<div class="line"><a name="l12105"></a><span class="lineno">12105</span>&#160;  <span class="comment">// Call the constructor function from context0 and check that the</span></div>
<div class="line"><a name="l12106"></a><span class="lineno">12106</span>&#160;  <span class="comment">// result has the &#39;x&#39; property.</span></div>
<div class="line"><a name="l12107"></a><span class="lineno">12107</span>&#160;  context1-&gt;Enter();</div>
<div class="line"><a name="l12108"></a><span class="lineno">12108</span>&#160;  context1-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;other&quot;</span>), context0-&gt;Global());</div>
<div class="line"><a name="l12109"></a><span class="lineno">12109</span>&#160;  Local&lt;Value&gt; value = CompileRun(<span class="stringliteral">&quot;var instance = new other.C(); instance.x&quot;</span>);</div>
<div class="line"><a name="l12110"></a><span class="lineno">12110</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsInt32());</div>
<div class="line"><a name="l12111"></a><span class="lineno">12111</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, value-&gt;Int32Value());</div>
<div class="line"><a name="l12112"></a><span class="lineno">12112</span>&#160;  context1-&gt;Exit();</div>
<div class="line"><a name="l12113"></a><span class="lineno">12113</span>&#160;</div>
<div class="line"><a name="l12114"></a><span class="lineno">12114</span>&#160;  <span class="comment">// Dispose the contexts to allow them to be garbage collected.</span></div>
<div class="line"><a name="l12115"></a><span class="lineno">12115</span>&#160;  context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l12116"></a><span class="lineno">12116</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l12117"></a><span class="lineno">12117</span>&#160;}</div>
<div class="line"><a name="l12118"></a><span class="lineno">12118</span>&#160;</div>
<div class="line"><a name="l12119"></a><span class="lineno">12119</span>&#160;</div>
<div class="line"><a name="l12120"></a><span class="lineno"><a class="line" href="../../dc/d6f/class_reg_exp_interrupt_test.html">12120</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../dc/d6f/class_reg_exp_interrupt_test.html">RegExpInterruptTest</a> {</div>
<div class="line"><a name="l12121"></a><span class="lineno">12121</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l12122"></a><span class="lineno"><a class="line" href="../../dc/d6f/class_reg_exp_interrupt_test.html#aa1ae9c0370244b9b54ce2333b002af7a">12122</a></span>&#160;  <a class="code" href="../../dc/d6f/class_reg_exp_interrupt_test.html#aa1ae9c0370244b9b54ce2333b002af7a">RegExpInterruptTest</a>() : block_(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) {}</div>
<div class="line"><a name="l12123"></a><span class="lineno"><a class="line" href="../../dc/d6f/class_reg_exp_interrupt_test.html#a0b6a206fe3e5c8926eaceb5eb50fa102">12123</a></span>&#160;  <a class="code" href="../../dc/d6f/class_reg_exp_interrupt_test.html#a0b6a206fe3e5c8926eaceb5eb50fa102">~RegExpInterruptTest</a>() { <span class="keyword">delete</span> block_; }</div>
<div class="line"><a name="l12124"></a><span class="lineno"><a class="line" href="../../dc/d6f/class_reg_exp_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">12124</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../dc/d6f/class_reg_exp_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RunTest</a>() {</div>
<div class="line"><a name="l12125"></a><span class="lineno">12125</span>&#160;    block_ = <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#afa44df2a14037562568d7f965d50833c">i::OS::CreateSemaphore</a>(0);</div>
<div class="line"><a name="l12126"></a><span class="lineno">12126</span>&#160;    gc_count_ = 0;</div>
<div class="line"><a name="l12127"></a><span class="lineno">12127</span>&#160;    gc_during_regexp_ = 0;</div>
<div class="line"><a name="l12128"></a><span class="lineno">12128</span>&#160;    regexp_success_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12129"></a><span class="lineno">12129</span>&#160;    gc_success_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12130"></a><span class="lineno">12130</span>&#160;    GCThread gc_thread(<span class="keyword">this</span>);</div>
<div class="line"><a name="l12131"></a><span class="lineno">12131</span>&#160;    gc_thread.Start();</div>
<div class="line"><a name="l12132"></a><span class="lineno">12132</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html#ac74b881e53953264262b42ec4647bea9">v8::Locker::StartPreemption</a>(1);</div>
<div class="line"><a name="l12133"></a><span class="lineno">12133</span>&#160;</div>
<div class="line"><a name="l12134"></a><span class="lineno">12134</span>&#160;    LongRunningRegExp();</div>
<div class="line"><a name="l12135"></a><span class="lineno">12135</span>&#160;    {</div>
<div class="line"><a name="l12136"></a><span class="lineno">12136</span>&#160;      <a class="code" href="../../d6/da8/classv8_1_1_unlocker.html">v8::Unlocker</a> unlock;</div>
<div class="line"><a name="l12137"></a><span class="lineno">12137</span>&#160;      gc_thread.Join();</div>
<div class="line"><a name="l12138"></a><span class="lineno">12138</span>&#160;    }</div>
<div class="line"><a name="l12139"></a><span class="lineno">12139</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html#a2fb959ab79a93eeb597d108d666340f9">v8::Locker::StopPreemption</a>();</div>
<div class="line"><a name="l12140"></a><span class="lineno">12140</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(regexp_success_);</div>
<div class="line"><a name="l12141"></a><span class="lineno">12141</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(gc_success_);</div>
<div class="line"><a name="l12142"></a><span class="lineno">12142</span>&#160;  }</div>
<div class="line"><a name="l12143"></a><span class="lineno">12143</span>&#160;</div>
<div class="line"><a name="l12144"></a><span class="lineno">12144</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l12145"></a><span class="lineno">12145</span>&#160;  <span class="comment">// Number of garbage collections required.</span></div>
<div class="line"><a name="l12146"></a><span class="lineno">12146</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kRequiredGCs = 5;</div>
<div class="line"><a name="l12147"></a><span class="lineno">12147</span>&#160;</div>
<div class="line"><a name="l12148"></a><span class="lineno">12148</span>&#160;  <span class="keyword">class </span>GCThread : <span class="keyword">public</span> <a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html">i::Thread</a> {</div>
<div class="line"><a name="l12149"></a><span class="lineno">12149</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l12150"></a><span class="lineno">12150</span>&#160;    <span class="keyword">explicit</span> GCThread(<a class="code" href="../../dc/d6f/class_reg_exp_interrupt_test.html">RegExpInterruptTest</a>* test)</div>
<div class="line"><a name="l12151"></a><span class="lineno">12151</span>&#160;        : Thread(<span class="stringliteral">&quot;GCThread&quot;</span>), test_(test) {}</div>
<div class="line"><a name="l12152"></a><span class="lineno">12152</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Run() {</div>
<div class="line"><a name="l12153"></a><span class="lineno">12153</span>&#160;      test_-&gt;CollectGarbage();</div>
<div class="line"><a name="l12154"></a><span class="lineno">12154</span>&#160;    }</div>
<div class="line"><a name="l12155"></a><span class="lineno">12155</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l12156"></a><span class="lineno">12156</span>&#160;     <a class="code" href="../../dc/d6f/class_reg_exp_interrupt_test.html">RegExpInterruptTest</a>* test_;</div>
<div class="line"><a name="l12157"></a><span class="lineno">12157</span>&#160;  };</div>
<div class="line"><a name="l12158"></a><span class="lineno">12158</span>&#160;</div>
<div class="line"><a name="l12159"></a><span class="lineno">12159</span>&#160;  <span class="keywordtype">void</span> CollectGarbage() {</div>
<div class="line"><a name="l12160"></a><span class="lineno">12160</span>&#160;    block_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a7a15988824b783d07f7f7b5a226118d3">Wait</a>();</div>
<div class="line"><a name="l12161"></a><span class="lineno">12161</span>&#160;    <span class="keywordflow">while</span> (gc_during_regexp_ &lt; kRequiredGCs) {</div>
<div class="line"><a name="l12162"></a><span class="lineno">12162</span>&#160;      {</div>
<div class="line"><a name="l12163"></a><span class="lineno">12163</span>&#160;        <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> lock;</div>
<div class="line"><a name="l12164"></a><span class="lineno">12164</span>&#160;        <span class="comment">// TODO(lrn): Perhaps create some garbage before collecting.</span></div>
<div class="line"><a name="l12165"></a><span class="lineno">12165</span>&#160;        <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l12166"></a><span class="lineno">12166</span>&#160;        gc_count_++;</div>
<div class="line"><a name="l12167"></a><span class="lineno">12167</span>&#160;      }</div>
<div class="line"><a name="l12168"></a><span class="lineno">12168</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a93167fd3ca0557191f8854f4236e29e4">i::OS::Sleep</a>(1);</div>
<div class="line"><a name="l12169"></a><span class="lineno">12169</span>&#160;    }</div>
<div class="line"><a name="l12170"></a><span class="lineno">12170</span>&#160;    gc_success_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12171"></a><span class="lineno">12171</span>&#160;  }</div>
<div class="line"><a name="l12172"></a><span class="lineno">12172</span>&#160;</div>
<div class="line"><a name="l12173"></a><span class="lineno">12173</span>&#160;  <span class="keywordtype">void</span> LongRunningRegExp() {</div>
<div class="line"><a name="l12174"></a><span class="lineno">12174</span>&#160;    block_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a089a008fd80ce776f6dc455104cbfb9d">Signal</a>();  <span class="comment">// Enable garbage collection thread on next preemption.</span></div>
<div class="line"><a name="l12175"></a><span class="lineno">12175</span>&#160;    <span class="keywordtype">int</span> rounds = 0;</div>
<div class="line"><a name="l12176"></a><span class="lineno">12176</span>&#160;    <span class="keywordflow">while</span> (gc_during_regexp_ &lt; kRequiredGCs) {</div>
<div class="line"><a name="l12177"></a><span class="lineno">12177</span>&#160;      <span class="keywordtype">int</span> gc_before = gc_count_;</div>
<div class="line"><a name="l12178"></a><span class="lineno">12178</span>&#160;      {</div>
<div class="line"><a name="l12179"></a><span class="lineno">12179</span>&#160;        <span class="comment">// Match 15-30 &quot;a&quot;&#39;s against 14 and a &quot;b&quot;.</span></div>
<div class="line"><a name="l12180"></a><span class="lineno">12180</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source =</div>
<div class="line"><a name="l12181"></a><span class="lineno">12181</span>&#160;            <span class="stringliteral">&quot;/a?a?a?a?a?a?a?a?a?a?a?a?a?a?aaaaaaaaaaaaaaaa/&quot;</span></div>
<div class="line"><a name="l12182"></a><span class="lineno">12182</span>&#160;            <span class="stringliteral">&quot;.exec(&#39;aaaaaaaaaaaaaaab&#39;) === null&quot;</span>;</div>
<div class="line"><a name="l12183"></a><span class="lineno">12183</span>&#160;        Local&lt;String&gt; source = String::New(c_source);</div>
<div class="line"><a name="l12184"></a><span class="lineno">12184</span>&#160;        Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l12185"></a><span class="lineno">12185</span>&#160;        Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l12186"></a><span class="lineno">12186</span>&#160;        <span class="keywordflow">if</span> (!result-&gt;BooleanValue()) {</div>
<div class="line"><a name="l12187"></a><span class="lineno">12187</span>&#160;          gc_during_regexp_ = kRequiredGCs;  <span class="comment">// Allow gc thread to exit.</span></div>
<div class="line"><a name="l12188"></a><span class="lineno">12188</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12189"></a><span class="lineno">12189</span>&#160;        }</div>
<div class="line"><a name="l12190"></a><span class="lineno">12190</span>&#160;      }</div>
<div class="line"><a name="l12191"></a><span class="lineno">12191</span>&#160;      {</div>
<div class="line"><a name="l12192"></a><span class="lineno">12192</span>&#160;        <span class="comment">// Match 15-30 &quot;a&quot;&#39;s against 15 and a &quot;b&quot;.</span></div>
<div class="line"><a name="l12193"></a><span class="lineno">12193</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source =</div>
<div class="line"><a name="l12194"></a><span class="lineno">12194</span>&#160;            <span class="stringliteral">&quot;/a?a?a?a?a?a?a?a?a?a?a?a?a?a?aaaaaaaaaaaaaaaa/&quot;</span></div>
<div class="line"><a name="l12195"></a><span class="lineno">12195</span>&#160;            <span class="stringliteral">&quot;.exec(&#39;aaaaaaaaaaaaaaaab&#39;)[0] === &#39;aaaaaaaaaaaaaaaa&#39;&quot;</span>;</div>
<div class="line"><a name="l12196"></a><span class="lineno">12196</span>&#160;        Local&lt;String&gt; source = String::New(c_source);</div>
<div class="line"><a name="l12197"></a><span class="lineno">12197</span>&#160;        Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l12198"></a><span class="lineno">12198</span>&#160;        Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l12199"></a><span class="lineno">12199</span>&#160;        <span class="keywordflow">if</span> (!result-&gt;BooleanValue()) {</div>
<div class="line"><a name="l12200"></a><span class="lineno">12200</span>&#160;          gc_during_regexp_ = kRequiredGCs;</div>
<div class="line"><a name="l12201"></a><span class="lineno">12201</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12202"></a><span class="lineno">12202</span>&#160;        }</div>
<div class="line"><a name="l12203"></a><span class="lineno">12203</span>&#160;      }</div>
<div class="line"><a name="l12204"></a><span class="lineno">12204</span>&#160;      <span class="keywordtype">int</span> gc_after = gc_count_;</div>
<div class="line"><a name="l12205"></a><span class="lineno">12205</span>&#160;      gc_during_regexp_ += gc_after - gc_before;</div>
<div class="line"><a name="l12206"></a><span class="lineno">12206</span>&#160;      rounds++;</div>
<div class="line"><a name="l12207"></a><span class="lineno">12207</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a93167fd3ca0557191f8854f4236e29e4">i::OS::Sleep</a>(1);</div>
<div class="line"><a name="l12208"></a><span class="lineno">12208</span>&#160;    }</div>
<div class="line"><a name="l12209"></a><span class="lineno">12209</span>&#160;    regexp_success_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12210"></a><span class="lineno">12210</span>&#160;  }</div>
<div class="line"><a name="l12211"></a><span class="lineno">12211</span>&#160;</div>
<div class="line"><a name="l12212"></a><span class="lineno">12212</span>&#160;  <a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html">i::Semaphore</a>* block_;</div>
<div class="line"><a name="l12213"></a><span class="lineno">12213</span>&#160;  <span class="keywordtype">int</span> gc_count_;</div>
<div class="line"><a name="l12214"></a><span class="lineno">12214</span>&#160;  <span class="keywordtype">int</span> gc_during_regexp_;</div>
<div class="line"><a name="l12215"></a><span class="lineno">12215</span>&#160;  <span class="keywordtype">bool</span> regexp_success_;</div>
<div class="line"><a name="l12216"></a><span class="lineno">12216</span>&#160;  <span class="keywordtype">bool</span> gc_success_;</div>
<div class="line"><a name="l12217"></a><span class="lineno">12217</span>&#160;};</div>
<div class="line"><a name="l12218"></a><span class="lineno">12218</span>&#160;</div>
<div class="line"><a name="l12219"></a><span class="lineno">12219</span>&#160;</div>
<div class="line"><a name="l12220"></a><span class="lineno">12220</span>&#160;<span class="comment">// Test that a regular expression execution can be interrupted and</span></div>
<div class="line"><a name="l12221"></a><span class="lineno">12221</span>&#160;<span class="comment">// survive a garbage collection.</span></div>
<div class="line"><a name="l12222"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa209aa823c00ff747df8356901cdcc4c">12222</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RegExpInterruption) {</div>
<div class="line"><a name="l12223"></a><span class="lineno">12223</span>&#160;  <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> lock;</div>
<div class="line"><a name="l12224"></a><span class="lineno">12224</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l12225"></a><span class="lineno">12225</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12226"></a><span class="lineno">12226</span>&#160;  Local&lt;Context&gt; local_env;</div>
<div class="line"><a name="l12227"></a><span class="lineno">12227</span>&#160;  {</div>
<div class="line"><a name="l12228"></a><span class="lineno">12228</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l12229"></a><span class="lineno">12229</span>&#160;    local_env = env.<a class="code" href="../../d7/d05/class_local_context.html#ab6e5e298162f2ddabba6d697ac27f6c2">local</a>();</div>
<div class="line"><a name="l12230"></a><span class="lineno">12230</span>&#160;  }</div>
<div class="line"><a name="l12231"></a><span class="lineno">12231</span>&#160;</div>
<div class="line"><a name="l12232"></a><span class="lineno">12232</span>&#160;  <span class="comment">// Local context should still be live.</span></div>
<div class="line"><a name="l12233"></a><span class="lineno">12233</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!local_env.IsEmpty());</div>
<div class="line"><a name="l12234"></a><span class="lineno">12234</span>&#160;  local_env-&gt;Enter();</div>
<div class="line"><a name="l12235"></a><span class="lineno">12235</span>&#160;</div>
<div class="line"><a name="l12236"></a><span class="lineno">12236</span>&#160;  <span class="comment">// Should complete without problems.</span></div>
<div class="line"><a name="l12237"></a><span class="lineno">12237</span>&#160;  <a class="code" href="../../dc/d6f/class_reg_exp_interrupt_test.html">RegExpInterruptTest</a>().<a class="code" href="../../dc/d6f/class_reg_exp_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RunTest</a>();</div>
<div class="line"><a name="l12238"></a><span class="lineno">12238</span>&#160;</div>
<div class="line"><a name="l12239"></a><span class="lineno">12239</span>&#160;  local_env-&gt;Exit();</div>
<div class="line"><a name="l12240"></a><span class="lineno">12240</span>&#160;}</div>
<div class="line"><a name="l12241"></a><span class="lineno">12241</span>&#160;</div>
<div class="line"><a name="l12242"></a><span class="lineno">12242</span>&#160;</div>
<div class="line"><a name="l12243"></a><span class="lineno"><a class="line" href="../../d3/de5/class_apply_interrupt_test.html">12243</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d3/de5/class_apply_interrupt_test.html">ApplyInterruptTest</a> {</div>
<div class="line"><a name="l12244"></a><span class="lineno">12244</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l12245"></a><span class="lineno"><a class="line" href="../../d3/de5/class_apply_interrupt_test.html#af0016d843fa7eaa248fa6e0bbfc22a3e">12245</a></span>&#160;  <a class="code" href="../../d3/de5/class_apply_interrupt_test.html#af0016d843fa7eaa248fa6e0bbfc22a3e">ApplyInterruptTest</a>() : block_(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) {}</div>
<div class="line"><a name="l12246"></a><span class="lineno"><a class="line" href="../../d3/de5/class_apply_interrupt_test.html#a1256c7ec975dc043b1ffcddc1770c242">12246</a></span>&#160;  <a class="code" href="../../d3/de5/class_apply_interrupt_test.html#a1256c7ec975dc043b1ffcddc1770c242">~ApplyInterruptTest</a>() { <span class="keyword">delete</span> block_; }</div>
<div class="line"><a name="l12247"></a><span class="lineno"><a class="line" href="../../d3/de5/class_apply_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">12247</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d3/de5/class_apply_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RunTest</a>() {</div>
<div class="line"><a name="l12248"></a><span class="lineno">12248</span>&#160;    block_ = <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#afa44df2a14037562568d7f965d50833c">i::OS::CreateSemaphore</a>(0);</div>
<div class="line"><a name="l12249"></a><span class="lineno">12249</span>&#160;    gc_count_ = 0;</div>
<div class="line"><a name="l12250"></a><span class="lineno">12250</span>&#160;    gc_during_apply_ = 0;</div>
<div class="line"><a name="l12251"></a><span class="lineno">12251</span>&#160;    apply_success_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12252"></a><span class="lineno">12252</span>&#160;    gc_success_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12253"></a><span class="lineno">12253</span>&#160;    GCThread gc_thread(<span class="keyword">this</span>);</div>
<div class="line"><a name="l12254"></a><span class="lineno">12254</span>&#160;    gc_thread.Start();</div>
<div class="line"><a name="l12255"></a><span class="lineno">12255</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html#ac74b881e53953264262b42ec4647bea9">v8::Locker::StartPreemption</a>(1);</div>
<div class="line"><a name="l12256"></a><span class="lineno">12256</span>&#160;</div>
<div class="line"><a name="l12257"></a><span class="lineno">12257</span>&#160;    LongRunningApply();</div>
<div class="line"><a name="l12258"></a><span class="lineno">12258</span>&#160;    {</div>
<div class="line"><a name="l12259"></a><span class="lineno">12259</span>&#160;      <a class="code" href="../../d6/da8/classv8_1_1_unlocker.html">v8::Unlocker</a> unlock;</div>
<div class="line"><a name="l12260"></a><span class="lineno">12260</span>&#160;      gc_thread.Join();</div>
<div class="line"><a name="l12261"></a><span class="lineno">12261</span>&#160;    }</div>
<div class="line"><a name="l12262"></a><span class="lineno">12262</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html#a2fb959ab79a93eeb597d108d666340f9">v8::Locker::StopPreemption</a>();</div>
<div class="line"><a name="l12263"></a><span class="lineno">12263</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(apply_success_);</div>
<div class="line"><a name="l12264"></a><span class="lineno">12264</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(gc_success_);</div>
<div class="line"><a name="l12265"></a><span class="lineno">12265</span>&#160;  }</div>
<div class="line"><a name="l12266"></a><span class="lineno">12266</span>&#160;</div>
<div class="line"><a name="l12267"></a><span class="lineno">12267</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l12268"></a><span class="lineno">12268</span>&#160;  <span class="comment">// Number of garbage collections required.</span></div>
<div class="line"><a name="l12269"></a><span class="lineno">12269</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kRequiredGCs = 2;</div>
<div class="line"><a name="l12270"></a><span class="lineno">12270</span>&#160;</div>
<div class="line"><a name="l12271"></a><span class="lineno">12271</span>&#160;  <span class="keyword">class </span>GCThread : <span class="keyword">public</span> <a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html">i::Thread</a> {</div>
<div class="line"><a name="l12272"></a><span class="lineno">12272</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l12273"></a><span class="lineno">12273</span>&#160;    <span class="keyword">explicit</span> GCThread(<a class="code" href="../../d3/de5/class_apply_interrupt_test.html">ApplyInterruptTest</a>* test)</div>
<div class="line"><a name="l12274"></a><span class="lineno">12274</span>&#160;        : Thread(<span class="stringliteral">&quot;GCThread&quot;</span>), test_(test) {}</div>
<div class="line"><a name="l12275"></a><span class="lineno">12275</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Run() {</div>
<div class="line"><a name="l12276"></a><span class="lineno">12276</span>&#160;      test_-&gt;CollectGarbage();</div>
<div class="line"><a name="l12277"></a><span class="lineno">12277</span>&#160;    }</div>
<div class="line"><a name="l12278"></a><span class="lineno">12278</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l12279"></a><span class="lineno">12279</span>&#160;     <a class="code" href="../../d3/de5/class_apply_interrupt_test.html">ApplyInterruptTest</a>* test_;</div>
<div class="line"><a name="l12280"></a><span class="lineno">12280</span>&#160;  };</div>
<div class="line"><a name="l12281"></a><span class="lineno">12281</span>&#160;</div>
<div class="line"><a name="l12282"></a><span class="lineno">12282</span>&#160;  <span class="keywordtype">void</span> CollectGarbage() {</div>
<div class="line"><a name="l12283"></a><span class="lineno">12283</span>&#160;    block_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a7a15988824b783d07f7f7b5a226118d3">Wait</a>();</div>
<div class="line"><a name="l12284"></a><span class="lineno">12284</span>&#160;    <span class="keywordflow">while</span> (gc_during_apply_ &lt; kRequiredGCs) {</div>
<div class="line"><a name="l12285"></a><span class="lineno">12285</span>&#160;      {</div>
<div class="line"><a name="l12286"></a><span class="lineno">12286</span>&#160;        <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> lock;</div>
<div class="line"><a name="l12287"></a><span class="lineno">12287</span>&#160;        <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l12288"></a><span class="lineno">12288</span>&#160;        gc_count_++;</div>
<div class="line"><a name="l12289"></a><span class="lineno">12289</span>&#160;      }</div>
<div class="line"><a name="l12290"></a><span class="lineno">12290</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a93167fd3ca0557191f8854f4236e29e4">i::OS::Sleep</a>(1);</div>
<div class="line"><a name="l12291"></a><span class="lineno">12291</span>&#160;    }</div>
<div class="line"><a name="l12292"></a><span class="lineno">12292</span>&#160;    gc_success_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12293"></a><span class="lineno">12293</span>&#160;  }</div>
<div class="line"><a name="l12294"></a><span class="lineno">12294</span>&#160;</div>
<div class="line"><a name="l12295"></a><span class="lineno">12295</span>&#160;  <span class="keywordtype">void</span> LongRunningApply() {</div>
<div class="line"><a name="l12296"></a><span class="lineno">12296</span>&#160;    block_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a089a008fd80ce776f6dc455104cbfb9d">Signal</a>();</div>
<div class="line"><a name="l12297"></a><span class="lineno">12297</span>&#160;    <span class="keywordtype">int</span> rounds = 0;</div>
<div class="line"><a name="l12298"></a><span class="lineno">12298</span>&#160;    <span class="keywordflow">while</span> (gc_during_apply_ &lt; kRequiredGCs) {</div>
<div class="line"><a name="l12299"></a><span class="lineno">12299</span>&#160;      <span class="keywordtype">int</span> gc_before = gc_count_;</div>
<div class="line"><a name="l12300"></a><span class="lineno">12300</span>&#160;      {</div>
<div class="line"><a name="l12301"></a><span class="lineno">12301</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source =</div>
<div class="line"><a name="l12302"></a><span class="lineno">12302</span>&#160;            <span class="stringliteral">&quot;function do_very_little(bar) {&quot;</span></div>
<div class="line"><a name="l12303"></a><span class="lineno">12303</span>&#160;            <span class="stringliteral">&quot;  this.foo = bar;&quot;</span></div>
<div class="line"><a name="l12304"></a><span class="lineno">12304</span>&#160;            <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l12305"></a><span class="lineno">12305</span>&#160;            <span class="stringliteral">&quot;for (var i = 0; i &lt; 100000; i++) {&quot;</span></div>
<div class="line"><a name="l12306"></a><span class="lineno">12306</span>&#160;            <span class="stringliteral">&quot;  do_very_little.apply(this, [&#39;bar&#39;]);&quot;</span></div>
<div class="line"><a name="l12307"></a><span class="lineno">12307</span>&#160;            <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l12308"></a><span class="lineno">12308</span>&#160;        Local&lt;String&gt; source = String::New(c_source);</div>
<div class="line"><a name="l12309"></a><span class="lineno">12309</span>&#160;        Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l12310"></a><span class="lineno">12310</span>&#160;        Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l12311"></a><span class="lineno">12311</span>&#160;        <span class="comment">// Check that no exception was thrown.</span></div>
<div class="line"><a name="l12312"></a><span class="lineno">12312</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!result.IsEmpty());</div>
<div class="line"><a name="l12313"></a><span class="lineno">12313</span>&#160;      }</div>
<div class="line"><a name="l12314"></a><span class="lineno">12314</span>&#160;      <span class="keywordtype">int</span> gc_after = gc_count_;</div>
<div class="line"><a name="l12315"></a><span class="lineno">12315</span>&#160;      gc_during_apply_ += gc_after - gc_before;</div>
<div class="line"><a name="l12316"></a><span class="lineno">12316</span>&#160;      rounds++;</div>
<div class="line"><a name="l12317"></a><span class="lineno">12317</span>&#160;    }</div>
<div class="line"><a name="l12318"></a><span class="lineno">12318</span>&#160;    apply_success_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12319"></a><span class="lineno">12319</span>&#160;  }</div>
<div class="line"><a name="l12320"></a><span class="lineno">12320</span>&#160;</div>
<div class="line"><a name="l12321"></a><span class="lineno">12321</span>&#160;  <a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html">i::Semaphore</a>* block_;</div>
<div class="line"><a name="l12322"></a><span class="lineno">12322</span>&#160;  <span class="keywordtype">int</span> gc_count_;</div>
<div class="line"><a name="l12323"></a><span class="lineno">12323</span>&#160;  <span class="keywordtype">int</span> gc_during_apply_;</div>
<div class="line"><a name="l12324"></a><span class="lineno">12324</span>&#160;  <span class="keywordtype">bool</span> apply_success_;</div>
<div class="line"><a name="l12325"></a><span class="lineno">12325</span>&#160;  <span class="keywordtype">bool</span> gc_success_;</div>
<div class="line"><a name="l12326"></a><span class="lineno">12326</span>&#160;};</div>
<div class="line"><a name="l12327"></a><span class="lineno">12327</span>&#160;</div>
<div class="line"><a name="l12328"></a><span class="lineno">12328</span>&#160;</div>
<div class="line"><a name="l12329"></a><span class="lineno">12329</span>&#160;<span class="comment">// Test that nothing bad happens if we get a preemption just when we were</span></div>
<div class="line"><a name="l12330"></a><span class="lineno">12330</span>&#160;<span class="comment">// about to do an apply().</span></div>
<div class="line"><a name="l12331"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9743b880058ab72a7781235d5c3f98b1">12331</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ApplyInterruption) {</div>
<div class="line"><a name="l12332"></a><span class="lineno">12332</span>&#160;  <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> lock;</div>
<div class="line"><a name="l12333"></a><span class="lineno">12333</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l12334"></a><span class="lineno">12334</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12335"></a><span class="lineno">12335</span>&#160;  Local&lt;Context&gt; local_env;</div>
<div class="line"><a name="l12336"></a><span class="lineno">12336</span>&#160;  {</div>
<div class="line"><a name="l12337"></a><span class="lineno">12337</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l12338"></a><span class="lineno">12338</span>&#160;    local_env = env.<a class="code" href="../../d7/d05/class_local_context.html#ab6e5e298162f2ddabba6d697ac27f6c2">local</a>();</div>
<div class="line"><a name="l12339"></a><span class="lineno">12339</span>&#160;  }</div>
<div class="line"><a name="l12340"></a><span class="lineno">12340</span>&#160;</div>
<div class="line"><a name="l12341"></a><span class="lineno">12341</span>&#160;  <span class="comment">// Local context should still be live.</span></div>
<div class="line"><a name="l12342"></a><span class="lineno">12342</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!local_env.IsEmpty());</div>
<div class="line"><a name="l12343"></a><span class="lineno">12343</span>&#160;  local_env-&gt;Enter();</div>
<div class="line"><a name="l12344"></a><span class="lineno">12344</span>&#160;</div>
<div class="line"><a name="l12345"></a><span class="lineno">12345</span>&#160;  <span class="comment">// Should complete without problems.</span></div>
<div class="line"><a name="l12346"></a><span class="lineno">12346</span>&#160;  <a class="code" href="../../d3/de5/class_apply_interrupt_test.html">ApplyInterruptTest</a>().<a class="code" href="../../d3/de5/class_apply_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RunTest</a>();</div>
<div class="line"><a name="l12347"></a><span class="lineno">12347</span>&#160;</div>
<div class="line"><a name="l12348"></a><span class="lineno">12348</span>&#160;  local_env-&gt;Exit();</div>
<div class="line"><a name="l12349"></a><span class="lineno">12349</span>&#160;}</div>
<div class="line"><a name="l12350"></a><span class="lineno">12350</span>&#160;</div>
<div class="line"><a name="l12351"></a><span class="lineno">12351</span>&#160;</div>
<div class="line"><a name="l12352"></a><span class="lineno">12352</span>&#160;<span class="comment">// Verify that we can clone an object</span></div>
<div class="line"><a name="l12353"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a85d6045cbe987dba6fd7fd49ca37e8a3">12353</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ObjectClone) {</div>
<div class="line"><a name="l12354"></a><span class="lineno">12354</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12355"></a><span class="lineno">12355</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l12356"></a><span class="lineno">12356</span>&#160;</div>
<div class="line"><a name="l12357"></a><span class="lineno">12357</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d6/d1b/test-log-stack-tracer_8cc.html#a39f7231eef589ea82f0b77319ef65e81">sample</a> =</div>
<div class="line"><a name="l12358"></a><span class="lineno">12358</span>&#160;    <span class="stringliteral">&quot;var rv = {};&quot;</span>      \</div>
<div class="line"><a name="l12359"></a><span class="lineno">12359</span>&#160;    <span class="stringliteral">&quot;rv.alpha = &#39;hello&#39;;&quot;</span> \</div>
<div class="line"><a name="l12360"></a><span class="lineno">12360</span>&#160;    <span class="stringliteral">&quot;rv.beta = 123;&quot;</span>     \</div>
<div class="line"><a name="l12361"></a><span class="lineno">12361</span>&#160;    <span class="stringliteral">&quot;rv;&quot;</span>;</div>
<div class="line"><a name="l12362"></a><span class="lineno">12362</span>&#160;</div>
<div class="line"><a name="l12363"></a><span class="lineno">12363</span>&#160;  <span class="comment">// Create an object, verify basics.</span></div>
<div class="line"><a name="l12364"></a><span class="lineno">12364</span>&#160;  Local&lt;Value&gt; val = CompileRun(sample);</div>
<div class="line"><a name="l12365"></a><span class="lineno">12365</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(val-&gt;IsObject());</div>
<div class="line"><a name="l12366"></a><span class="lineno">12366</span>&#160;  Local&lt;v8::Object&gt; obj = val.As&lt;<a class="code" href="../../db/d85/classv8_1_1_object.html">v8::Object</a>&gt;();</div>
<div class="line"><a name="l12367"></a><span class="lineno">12367</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;gamma&quot;</span>), v8_str(<span class="stringliteral">&quot;cloneme&quot;</span>));</div>
<div class="line"><a name="l12368"></a><span class="lineno">12368</span>&#160;</div>
<div class="line"><a name="l12369"></a><span class="lineno">12369</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;hello&quot;</span>), obj-&gt;Get(v8_str(<span class="stringliteral">&quot;alpha&quot;</span>)));</div>
<div class="line"><a name="l12370"></a><span class="lineno">12370</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(123), obj-&gt;Get(v8_str(<span class="stringliteral">&quot;beta&quot;</span>)));</div>
<div class="line"><a name="l12371"></a><span class="lineno">12371</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;cloneme&quot;</span>), obj-&gt;Get(v8_str(<span class="stringliteral">&quot;gamma&quot;</span>)));</div>
<div class="line"><a name="l12372"></a><span class="lineno">12372</span>&#160;</div>
<div class="line"><a name="l12373"></a><span class="lineno">12373</span>&#160;  <span class="comment">// Clone it.</span></div>
<div class="line"><a name="l12374"></a><span class="lineno">12374</span>&#160;  Local&lt;v8::Object&gt; clone = obj-&gt;Clone();</div>
<div class="line"><a name="l12375"></a><span class="lineno">12375</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;hello&quot;</span>), clone-&gt;Get(v8_str(<span class="stringliteral">&quot;alpha&quot;</span>)));</div>
<div class="line"><a name="l12376"></a><span class="lineno">12376</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(123), clone-&gt;Get(v8_str(<span class="stringliteral">&quot;beta&quot;</span>)));</div>
<div class="line"><a name="l12377"></a><span class="lineno">12377</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;cloneme&quot;</span>), clone-&gt;Get(v8_str(<span class="stringliteral">&quot;gamma&quot;</span>)));</div>
<div class="line"><a name="l12378"></a><span class="lineno">12378</span>&#160;</div>
<div class="line"><a name="l12379"></a><span class="lineno">12379</span>&#160;  <span class="comment">// Set a property on the clone, verify each object.</span></div>
<div class="line"><a name="l12380"></a><span class="lineno">12380</span>&#160;  clone-&gt;Set(v8_str(<span class="stringliteral">&quot;beta&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(456));</div>
<div class="line"><a name="l12381"></a><span class="lineno">12381</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(123), obj-&gt;Get(v8_str(<span class="stringliteral">&quot;beta&quot;</span>)));</div>
<div class="line"><a name="l12382"></a><span class="lineno">12382</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(456), clone-&gt;Get(v8_str(<span class="stringliteral">&quot;beta&quot;</span>)));</div>
<div class="line"><a name="l12383"></a><span class="lineno">12383</span>&#160;}</div>
<div class="line"><a name="l12384"></a><span class="lineno">12384</span>&#160;</div>
<div class="line"><a name="l12385"></a><span class="lineno">12385</span>&#160;</div>
<div class="line"><a name="l12386"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html">12386</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d3/db2/class_ascii_vector_resource.html">AsciiVectorResource</a> : <span class="keyword">public</span> <a class="code" href="../../de/dea/classv8_1_1_string_1_1_external_ascii_string_resource.html">v8::String::ExternalAsciiStringResource</a> {</div>
<div class="line"><a name="l12387"></a><span class="lineno">12387</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l12388"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html#ab59290224b145b93fa2767f3a85b0209">12388</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d3/db2/class_ascii_vector_resource.html#ab59290224b145b93fa2767f3a85b0209">AsciiVectorResource</a>(<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const char&gt;</a> vector)</div>
<div class="line"><a name="l12389"></a><span class="lineno">12389</span>&#160;      : data_(vector) {}</div>
<div class="line"><a name="l12390"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html#ac127add068c00f6e9196071753bb6fb3">12390</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="../../d3/db2/class_ascii_vector_resource.html#ac127add068c00f6e9196071753bb6fb3">~AsciiVectorResource</a>() {}</div>
<div class="line"><a name="l12391"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d">12391</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d3/db2/class_ascii_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#a57b988236ee6a3a5e572d126d3fbccc1">length</a>(); }</div>
<div class="line"><a name="l12392"></a><span class="lineno"><a class="line" href="../../d3/db2/class_ascii_vector_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">12392</a></span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d3/db2/class_ascii_vector_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#affb06cbe9d08291ab0fc1a467edec469">start</a>(); }</div>
<div class="line"><a name="l12393"></a><span class="lineno">12393</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l12394"></a><span class="lineno">12394</span>&#160;  <a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const char&gt;</a> data_;</div>
<div class="line"><a name="l12395"></a><span class="lineno">12395</span>&#160;};</div>
<div class="line"><a name="l12396"></a><span class="lineno">12396</span>&#160;</div>
<div class="line"><a name="l12397"></a><span class="lineno">12397</span>&#160;</div>
<div class="line"><a name="l12398"></a><span class="lineno"><a class="line" href="../../d4/d2b/class_u_c16_vector_resource.html">12398</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html">UC16VectorResource</a> : <span class="keyword">public</span> <a class="code" href="../../d3/d29/classv8_1_1_string_1_1_external_string_resource.html">v8::String::ExternalStringResource</a> {</div>
<div class="line"><a name="l12399"></a><span class="lineno">12399</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l12400"></a><span class="lineno"><a class="line" href="../../d4/d2b/class_u_c16_vector_resource.html#a55f81a5d35a7271bff4b4b3c50778e0d">12400</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html#a55f81a5d35a7271bff4b4b3c50778e0d">UC16VectorResource</a>(<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const i::uc16&gt;</a> vector)</div>
<div class="line"><a name="l12401"></a><span class="lineno">12401</span>&#160;      : data_(vector) {}</div>
<div class="line"><a name="l12402"></a><span class="lineno"><a class="line" href="../../d4/d2b/class_u_c16_vector_resource.html#a1c242584827924dd7ce789a774372aa4">12402</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html#a1c242584827924dd7ce789a774372aa4">~UC16VectorResource</a>() {}</div>
<div class="line"><a name="l12403"></a><span class="lineno"><a class="line" href="../../d4/d2b/class_u_c16_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d">12403</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#a57b988236ee6a3a5e572d126d3fbccc1">length</a>(); }</div>
<div class="line"><a name="l12404"></a><span class="lineno"><a class="line" href="../../d4/d2b/class_u_c16_vector_resource.html#a064cecc15ef4dcc47affd479b964fc08">12404</a></span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">i::uc16</a>* <a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html#a064cecc15ef4dcc47affd479b964fc08">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_.<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#affb06cbe9d08291ab0fc1a467edec469">start</a>(); }</div>
<div class="line"><a name="l12405"></a><span class="lineno">12405</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l12406"></a><span class="lineno">12406</span>&#160;  <a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const i::uc16&gt;</a> data_;</div>
<div class="line"><a name="l12407"></a><span class="lineno">12407</span>&#160;};</div>
<div class="line"><a name="l12408"></a><span class="lineno">12408</span>&#160;</div>
<div class="line"><a name="l12409"></a><span class="lineno">12409</span>&#160;</div>
<div class="line"><a name="l12410"></a><span class="lineno">12410</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> MorphAString(<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html">i::String</a>* <span class="keywordtype">string</span>,</div>
<div class="line"><a name="l12411"></a><span class="lineno">12411</span>&#160;                         <a class="code" href="../../d3/db2/class_ascii_vector_resource.html">AsciiVectorResource</a>* ascii_resource,</div>
<div class="line"><a name="l12412"></a><span class="lineno">12412</span>&#160;                         <a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html">UC16VectorResource</a>* uc16_resource) {</div>
<div class="line"><a name="l12413"></a><span class="lineno">12413</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(i::StringShape(<span class="keywordtype">string</span>).IsExternal());</div>
<div class="line"><a name="l12414"></a><span class="lineno">12414</span>&#160;  <span class="keywordflow">if</span> (string-&gt;<a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a8b4e89ec6d0d6198cff345e5162c1ce9">IsAsciiRepresentation</a>()) {</div>
<div class="line"><a name="l12415"></a><span class="lineno">12415</span>&#160;    <span class="comment">// Check old map is not symbol or long.</span></div>
<div class="line"><a name="l12416"></a><span class="lineno">12416</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;<a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a25498e38628343f204c8dc99c642860d">map</a>() == <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;external_ascii_string_map());</div>
<div class="line"><a name="l12417"></a><span class="lineno">12417</span>&#160;    <span class="comment">// Morph external string to be TwoByte string.</span></div>
<div class="line"><a name="l12418"></a><span class="lineno">12418</span>&#160;    <span class="keywordtype">string</span>-&gt;set_map(<a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;external_string_map());</div>
<div class="line"><a name="l12419"></a><span class="lineno">12419</span>&#160;    <a class="code" href="../../d2/d61/classv8_1_1internal_1_1_external_two_byte_string.html">i::ExternalTwoByteString</a>* morphed =</div>
<div class="line"><a name="l12420"></a><span class="lineno">12420</span>&#160;         <a class="code" href="../../d2/d61/classv8_1_1internal_1_1_external_two_byte_string.html#af3ce25de865a8cce7740f323036f3894">i::ExternalTwoByteString::cast</a>(<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l12421"></a><span class="lineno">12421</span>&#160;    morphed-&gt;<a class="code" href="../../d2/d61/classv8_1_1internal_1_1_external_two_byte_string.html#a4c77a9be9ee15c63ec924deced362488">set_resource</a>(uc16_resource);</div>
<div class="line"><a name="l12422"></a><span class="lineno">12422</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12423"></a><span class="lineno">12423</span>&#160;    <span class="comment">// Check old map is not symbol or long.</span></div>
<div class="line"><a name="l12424"></a><span class="lineno">12424</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;<a class="code" href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a25498e38628343f204c8dc99c642860d">map</a>() == <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;external_string_map());</div>
<div class="line"><a name="l12425"></a><span class="lineno">12425</span>&#160;    <span class="comment">// Morph external string to be ASCII string.</span></div>
<div class="line"><a name="l12426"></a><span class="lineno">12426</span>&#160;    <span class="keywordtype">string</span>-&gt;set_map(<a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;external_ascii_string_map());</div>
<div class="line"><a name="l12427"></a><span class="lineno">12427</span>&#160;    <a class="code" href="../../d2/da1/classv8_1_1internal_1_1_external_ascii_string.html">i::ExternalAsciiString</a>* morphed =</div>
<div class="line"><a name="l12428"></a><span class="lineno">12428</span>&#160;         <a class="code" href="../../d2/da1/classv8_1_1internal_1_1_external_ascii_string.html#a9987d1cd368b10a2bc5dee20a1726be5">i::ExternalAsciiString::cast</a>(<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l12429"></a><span class="lineno">12429</span>&#160;    morphed-&gt;<a class="code" href="../../d2/da1/classv8_1_1internal_1_1_external_ascii_string.html#a4c77a9be9ee15c63ec924deced362488">set_resource</a>(ascii_resource);</div>
<div class="line"><a name="l12430"></a><span class="lineno">12430</span>&#160;  }</div>
<div class="line"><a name="l12431"></a><span class="lineno">12431</span>&#160;}</div>
<div class="line"><a name="l12432"></a><span class="lineno">12432</span>&#160;</div>
<div class="line"><a name="l12433"></a><span class="lineno">12433</span>&#160;</div>
<div class="line"><a name="l12434"></a><span class="lineno">12434</span>&#160;<span class="comment">// Test that we can still flatten a string if the components it is built up</span></div>
<div class="line"><a name="l12435"></a><span class="lineno">12435</span>&#160;<span class="comment">// from have been turned into 16 bit strings in the mean time.</span></div>
<div class="line"><a name="l12436"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6b8783b6aa59b4eb8461fbf296569b47">12436</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(MorphCompositeStringTest) {</div>
<div class="line"><a name="l12437"></a><span class="lineno">12437</span>&#160;  <span class="keywordtype">char</span> utf_buffer[129];</div>
<div class="line"><a name="l12438"></a><span class="lineno">12438</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* c_string = <span class="stringliteral">&quot;Now is the time for all good men&quot;</span></div>
<div class="line"><a name="l12439"></a><span class="lineno">12439</span>&#160;                         <span class="stringliteral">&quot; to come to the aid of the party&quot;</span>;</div>
<div class="line"><a name="l12440"></a><span class="lineno">12440</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_string = AsciiToTwoByteString(c_string);</div>
<div class="line"><a name="l12441"></a><span class="lineno">12441</span>&#160;  {</div>
<div class="line"><a name="l12442"></a><span class="lineno">12442</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12443"></a><span class="lineno">12443</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l12444"></a><span class="lineno">12444</span>&#160;    <a class="code" href="../../d3/db2/class_ascii_vector_resource.html">AsciiVectorResource</a> ascii_resource(</div>
<div class="line"><a name="l12445"></a><span class="lineno">12445</span>&#160;        <a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const char&gt;</a>(c_string, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(c_string)));</div>
<div class="line"><a name="l12446"></a><span class="lineno">12446</span>&#160;    <a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html">UC16VectorResource</a> uc16_resource(</div>
<div class="line"><a name="l12447"></a><span class="lineno">12447</span>&#160;        <a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const uint16_t&gt;</a>(two_byte_string,</div>
<div class="line"><a name="l12448"></a><span class="lineno">12448</span>&#160;                                  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(c_string)));</div>
<div class="line"><a name="l12449"></a><span class="lineno">12449</span>&#160;</div>
<div class="line"><a name="l12450"></a><span class="lineno">12450</span>&#160;    Local&lt;String&gt; lhs(<a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(</div>
<div class="line"><a name="l12451"></a><span class="lineno">12451</span>&#160;        <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;NewExternalStringFromAscii(&amp;ascii_resource)));</div>
<div class="line"><a name="l12452"></a><span class="lineno">12452</span>&#160;    Local&lt;String&gt; rhs(<a class="code" href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a>(</div>
<div class="line"><a name="l12453"></a><span class="lineno">12453</span>&#160;        <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;NewExternalStringFromAscii(&amp;ascii_resource)));</div>
<div class="line"><a name="l12454"></a><span class="lineno">12454</span>&#160;</div>
<div class="line"><a name="l12455"></a><span class="lineno">12455</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;lhs&quot;</span>), lhs);</div>
<div class="line"><a name="l12456"></a><span class="lineno">12456</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;rhs&quot;</span>), rhs);</div>
<div class="line"><a name="l12457"></a><span class="lineno">12457</span>&#160;</div>
<div class="line"><a name="l12458"></a><span class="lineno">12458</span>&#160;    CompileRun(</div>
<div class="line"><a name="l12459"></a><span class="lineno">12459</span>&#160;        <span class="stringliteral">&quot;var cons = lhs + rhs;&quot;</span></div>
<div class="line"><a name="l12460"></a><span class="lineno">12460</span>&#160;        <span class="stringliteral">&quot;var slice = lhs.substring(1, lhs.length - 1);&quot;</span></div>
<div class="line"><a name="l12461"></a><span class="lineno">12461</span>&#160;        <span class="stringliteral">&quot;var slice_on_cons = (lhs + rhs).substring(1, lhs.length *2 - 1);&quot;</span>);</div>
<div class="line"><a name="l12462"></a><span class="lineno">12462</span>&#160;</div>
<div class="line"><a name="l12463"></a><span class="lineno">12463</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!lhs-&gt;MayContainNonAscii());</div>
<div class="line"><a name="l12464"></a><span class="lineno">12464</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!rhs-&gt;MayContainNonAscii());</div>
<div class="line"><a name="l12465"></a><span class="lineno">12465</span>&#160;</div>
<div class="line"><a name="l12466"></a><span class="lineno">12466</span>&#160;    MorphAString(*v8::Utils::OpenHandle(*lhs), &amp;ascii_resource, &amp;uc16_resource);</div>
<div class="line"><a name="l12467"></a><span class="lineno">12467</span>&#160;    MorphAString(*v8::Utils::OpenHandle(*rhs), &amp;ascii_resource, &amp;uc16_resource);</div>
<div class="line"><a name="l12468"></a><span class="lineno">12468</span>&#160;</div>
<div class="line"><a name="l12469"></a><span class="lineno">12469</span>&#160;    <span class="comment">// This should UTF-8 without flattening, since everything is ASCII.</span></div>
<div class="line"><a name="l12470"></a><span class="lineno">12470</span>&#160;    Handle&lt;String&gt; cons = v8_compile(<span class="stringliteral">&quot;cons&quot;</span>)-&gt;Run().As&lt;String&gt;();</div>
<div class="line"><a name="l12471"></a><span class="lineno">12471</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(128, cons-&gt;Utf8Length());</div>
<div class="line"><a name="l12472"></a><span class="lineno">12472</span>&#160;    <span class="keywordtype">int</span> nchars = -1;</div>
<div class="line"><a name="l12473"></a><span class="lineno">12473</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(129, cons-&gt;WriteUtf8(utf_buffer, -1, &amp;nchars));</div>
<div class="line"><a name="l12474"></a><span class="lineno">12474</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(128, nchars);</div>
<div class="line"><a name="l12475"></a><span class="lineno">12475</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(</div>
<div class="line"><a name="l12476"></a><span class="lineno">12476</span>&#160;        utf_buffer,</div>
<div class="line"><a name="l12477"></a><span class="lineno">12477</span>&#160;        <span class="stringliteral">&quot;Now is the time for all good men to come to the aid of the party&quot;</span></div>
<div class="line"><a name="l12478"></a><span class="lineno">12478</span>&#160;        <span class="stringliteral">&quot;Now is the time for all good men to come to the aid of the party&quot;</span>));</div>
<div class="line"><a name="l12479"></a><span class="lineno">12479</span>&#160;</div>
<div class="line"><a name="l12480"></a><span class="lineno">12480</span>&#160;    <span class="comment">// Now do some stuff to make sure the strings are flattened, etc.</span></div>
<div class="line"><a name="l12481"></a><span class="lineno">12481</span>&#160;    CompileRun(</div>
<div class="line"><a name="l12482"></a><span class="lineno">12482</span>&#160;        <span class="stringliteral">&quot;/[^a-z]/.test(cons);&quot;</span></div>
<div class="line"><a name="l12483"></a><span class="lineno">12483</span>&#160;        <span class="stringliteral">&quot;/[^a-z]/.test(slice);&quot;</span></div>
<div class="line"><a name="l12484"></a><span class="lineno">12484</span>&#160;        <span class="stringliteral">&quot;/[^a-z]/.test(slice_on_cons);&quot;</span>);</div>
<div class="line"><a name="l12485"></a><span class="lineno">12485</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* expected_cons =</div>
<div class="line"><a name="l12486"></a><span class="lineno">12486</span>&#160;        <span class="stringliteral">&quot;Now is the time for all good men to come to the aid of the party&quot;</span></div>
<div class="line"><a name="l12487"></a><span class="lineno">12487</span>&#160;        <span class="stringliteral">&quot;Now is the time for all good men to come to the aid of the party&quot;</span>;</div>
<div class="line"><a name="l12488"></a><span class="lineno">12488</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* expected_slice =</div>
<div class="line"><a name="l12489"></a><span class="lineno">12489</span>&#160;        <span class="stringliteral">&quot;ow is the time for all good men to come to the aid of the part&quot;</span>;</div>
<div class="line"><a name="l12490"></a><span class="lineno">12490</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* expected_slice_on_cons =</div>
<div class="line"><a name="l12491"></a><span class="lineno">12491</span>&#160;        <span class="stringliteral">&quot;ow is the time for all good men to come to the aid of the party&quot;</span></div>
<div class="line"><a name="l12492"></a><span class="lineno">12492</span>&#160;        <span class="stringliteral">&quot;Now is the time for all good men to come to the aid of the part&quot;</span>;</div>
<div class="line"><a name="l12493"></a><span class="lineno">12493</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(String::New(expected_cons),</div>
<div class="line"><a name="l12494"></a><span class="lineno">12494</span>&#160;             env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;cons&quot;</span>)));</div>
<div class="line"><a name="l12495"></a><span class="lineno">12495</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(String::New(expected_slice),</div>
<div class="line"><a name="l12496"></a><span class="lineno">12496</span>&#160;             env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;slice&quot;</span>)));</div>
<div class="line"><a name="l12497"></a><span class="lineno">12497</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(String::New(expected_slice_on_cons),</div>
<div class="line"><a name="l12498"></a><span class="lineno">12498</span>&#160;             env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;slice_on_cons&quot;</span>)));</div>
<div class="line"><a name="l12499"></a><span class="lineno">12499</span>&#160;  }</div>
<div class="line"><a name="l12500"></a><span class="lineno">12500</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(two_byte_string);</div>
<div class="line"><a name="l12501"></a><span class="lineno">12501</span>&#160;}</div>
<div class="line"><a name="l12502"></a><span class="lineno">12502</span>&#160;</div>
<div class="line"><a name="l12503"></a><span class="lineno">12503</span>&#160;</div>
<div class="line"><a name="l12504"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6d348a76707ff9e1eadbabe29d8afadc">12504</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CompileExternalTwoByteSource) {</div>
<div class="line"><a name="l12505"></a><span class="lineno">12505</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12506"></a><span class="lineno">12506</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l12507"></a><span class="lineno">12507</span>&#160;</div>
<div class="line"><a name="l12508"></a><span class="lineno">12508</span>&#160;  <span class="comment">// This is a very short list of sources, which currently is to check for a</span></div>
<div class="line"><a name="l12509"></a><span class="lineno">12509</span>&#160;  <span class="comment">// regression caused by r2703.</span></div>
<div class="line"><a name="l12510"></a><span class="lineno">12510</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* ascii_sources[] = {</div>
<div class="line"><a name="l12511"></a><span class="lineno">12511</span>&#160;    <span class="stringliteral">&quot;0.5&quot;</span>,</div>
<div class="line"><a name="l12512"></a><span class="lineno">12512</span>&#160;    <span class="stringliteral">&quot;-0.5&quot;</span>,   <span class="comment">// This mainly testes PushBack in the Scanner.</span></div>
<div class="line"><a name="l12513"></a><span class="lineno">12513</span>&#160;    <span class="stringliteral">&quot;--0.5&quot;</span>,  <span class="comment">// This mainly testes PushBack in the Scanner.</span></div>
<div class="line"><a name="l12514"></a><span class="lineno">12514</span>&#160;    <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a></div>
<div class="line"><a name="l12515"></a><span class="lineno">12515</span>&#160;  };</div>
<div class="line"><a name="l12516"></a><span class="lineno">12516</span>&#160;</div>
<div class="line"><a name="l12517"></a><span class="lineno">12517</span>&#160;  <span class="comment">// Compile the sources as external two byte strings.</span></div>
<div class="line"><a name="l12518"></a><span class="lineno">12518</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; ascii_sources[i] != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>; i++) {</div>
<div class="line"><a name="l12519"></a><span class="lineno">12519</span>&#160;    <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_string = AsciiToTwoByteString(ascii_sources[i]);</div>
<div class="line"><a name="l12520"></a><span class="lineno">12520</span>&#160;    <a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html">UC16VectorResource</a> uc16_resource(</div>
<div class="line"><a name="l12521"></a><span class="lineno">12521</span>&#160;        <a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const uint16_t&gt;</a>(two_byte_string,</div>
<div class="line"><a name="l12522"></a><span class="lineno">12522</span>&#160;                                  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">i::StrLength</a>(ascii_sources[i])));</div>
<div class="line"><a name="l12523"></a><span class="lineno">12523</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> source = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a973aec0759c01b6fb411d7fca8300e6a">v8::String::NewExternal</a>(&amp;uc16_resource);</div>
<div class="line"><a name="l12524"></a><span class="lineno">12524</span>&#160;    <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(source);</div>
<div class="line"><a name="l12525"></a><span class="lineno">12525</span>&#160;    <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">i::DeleteArray</a>(two_byte_string);</div>
<div class="line"><a name="l12526"></a><span class="lineno">12526</span>&#160;  }</div>
<div class="line"><a name="l12527"></a><span class="lineno">12527</span>&#160;}</div>
<div class="line"><a name="l12528"></a><span class="lineno">12528</span>&#160;</div>
<div class="line"><a name="l12529"></a><span class="lineno">12529</span>&#160;</div>
<div class="line"><a name="l12530"></a><span class="lineno"><a class="line" href="../../d4/d1b/class_reg_exp_string_modification_test.html">12530</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d4/d1b/class_reg_exp_string_modification_test.html">RegExpStringModificationTest</a> {</div>
<div class="line"><a name="l12531"></a><span class="lineno">12531</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l12532"></a><span class="lineno"><a class="line" href="../../d4/d1b/class_reg_exp_string_modification_test.html#ab7ad81664d7bb8b80e9249b482984c5c">12532</a></span>&#160;  <a class="code" href="../../d4/d1b/class_reg_exp_string_modification_test.html#ab7ad81664d7bb8b80e9249b482984c5c">RegExpStringModificationTest</a>()</div>
<div class="line"><a name="l12533"></a><span class="lineno">12533</span>&#160;      : block_(i::OS::CreateSemaphore(0)),</div>
<div class="line"><a name="l12534"></a><span class="lineno">12534</span>&#160;        morphs_(0),</div>
<div class="line"><a name="l12535"></a><span class="lineno">12535</span>&#160;        morphs_during_regexp_(0),</div>
<div class="line"><a name="l12536"></a><span class="lineno">12536</span>&#160;        ascii_resource_(i::Vector&lt;const char&gt;(<span class="stringliteral">&quot;aaaaaaaaaaaaaab&quot;</span>, 15)),</div>
<div class="line"><a name="l12537"></a><span class="lineno">12537</span>&#160;        uc16_resource_(i::Vector&lt;const <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&gt;(two_byte_content_, 15)) {}</div>
<div class="line"><a name="l12538"></a><span class="lineno"><a class="line" href="../../d4/d1b/class_reg_exp_string_modification_test.html#a0071cb23d701921dd5a0a118f71084b5">12538</a></span>&#160;  <a class="code" href="../../d4/d1b/class_reg_exp_string_modification_test.html#a0071cb23d701921dd5a0a118f71084b5">~RegExpStringModificationTest</a>() { <span class="keyword">delete</span> block_; }</div>
<div class="line"><a name="l12539"></a><span class="lineno"><a class="line" href="../../d4/d1b/class_reg_exp_string_modification_test.html#a4a2eff499a3c811ef4d814024ba98ef0">12539</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/d1b/class_reg_exp_string_modification_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RunTest</a>() {</div>
<div class="line"><a name="l12540"></a><span class="lineno">12540</span>&#160;    regexp_success_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12541"></a><span class="lineno">12541</span>&#160;    morph_success_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12542"></a><span class="lineno">12542</span>&#160;</div>
<div class="line"><a name="l12543"></a><span class="lineno">12543</span>&#160;    <span class="comment">// Initialize the contents of two_byte_content_ to be a uc16 representation</span></div>
<div class="line"><a name="l12544"></a><span class="lineno">12544</span>&#160;    <span class="comment">// of &quot;aaaaaaaaaaaaaab&quot;.</span></div>
<div class="line"><a name="l12545"></a><span class="lineno">12545</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 14; i++) {</div>
<div class="line"><a name="l12546"></a><span class="lineno">12546</span>&#160;      two_byte_content_[i] = <span class="charliteral">&#39;a&#39;</span>;</div>
<div class="line"><a name="l12547"></a><span class="lineno">12547</span>&#160;    }</div>
<div class="line"><a name="l12548"></a><span class="lineno">12548</span>&#160;    two_byte_content_[14] = <span class="charliteral">&#39;b&#39;</span>;</div>
<div class="line"><a name="l12549"></a><span class="lineno">12549</span>&#160;</div>
<div class="line"><a name="l12550"></a><span class="lineno">12550</span>&#160;    <span class="comment">// Create the input string for the regexp - the one we are going to change</span></div>
<div class="line"><a name="l12551"></a><span class="lineno">12551</span>&#160;    <span class="comment">// properties of.</span></div>
<div class="line"><a name="l12552"></a><span class="lineno">12552</span>&#160;    input_ = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;NewExternalStringFromAscii(&amp;ascii_resource_);</div>
<div class="line"><a name="l12553"></a><span class="lineno">12553</span>&#160;</div>
<div class="line"><a name="l12554"></a><span class="lineno">12554</span>&#160;    <span class="comment">// Inject the input as a global variable.</span></div>
<div class="line"><a name="l12555"></a><span class="lineno">12555</span>&#160;    <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> input_name =</div>
<div class="line"><a name="l12556"></a><span class="lineno">12556</span>&#160;        <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;NewStringFromAscii(<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;const char&gt;</a>(<span class="stringliteral">&quot;input&quot;</span>, 5));</div>
<div class="line"><a name="l12557"></a><span class="lineno">12557</span>&#160;    i::Isolate::Current()-&gt;native_context()-&gt;global_object()-&gt;SetProperty(</div>
<div class="line"><a name="l12558"></a><span class="lineno">12558</span>&#160;        *input_name,</div>
<div class="line"><a name="l12559"></a><span class="lineno">12559</span>&#160;        *input_,</div>
<div class="line"><a name="l12560"></a><span class="lineno">12560</span>&#160;        <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>,</div>
<div class="line"><a name="l12561"></a><span class="lineno">12561</span>&#160;        <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">i::kNonStrictMode</a>)-&gt;ToObjectChecked();</div>
<div class="line"><a name="l12562"></a><span class="lineno">12562</span>&#160;</div>
<div class="line"><a name="l12563"></a><span class="lineno">12563</span>&#160;    MorphThread morph_thread(<span class="keyword">this</span>);</div>
<div class="line"><a name="l12564"></a><span class="lineno">12564</span>&#160;    morph_thread.Start();</div>
<div class="line"><a name="l12565"></a><span class="lineno">12565</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html#ac74b881e53953264262b42ec4647bea9">v8::Locker::StartPreemption</a>(1);</div>
<div class="line"><a name="l12566"></a><span class="lineno">12566</span>&#160;    LongRunningRegExp();</div>
<div class="line"><a name="l12567"></a><span class="lineno">12567</span>&#160;    {</div>
<div class="line"><a name="l12568"></a><span class="lineno">12568</span>&#160;      <a class="code" href="../../d6/da8/classv8_1_1_unlocker.html">v8::Unlocker</a> unlock;</div>
<div class="line"><a name="l12569"></a><span class="lineno">12569</span>&#160;      morph_thread.Join();</div>
<div class="line"><a name="l12570"></a><span class="lineno">12570</span>&#160;    }</div>
<div class="line"><a name="l12571"></a><span class="lineno">12571</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html#a2fb959ab79a93eeb597d108d666340f9">v8::Locker::StopPreemption</a>();</div>
<div class="line"><a name="l12572"></a><span class="lineno">12572</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(regexp_success_);</div>
<div class="line"><a name="l12573"></a><span class="lineno">12573</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(morph_success_);</div>
<div class="line"><a name="l12574"></a><span class="lineno">12574</span>&#160;  }</div>
<div class="line"><a name="l12575"></a><span class="lineno">12575</span>&#160;</div>
<div class="line"><a name="l12576"></a><span class="lineno">12576</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l12577"></a><span class="lineno">12577</span>&#160;  <span class="comment">// Number of string modifications required.</span></div>
<div class="line"><a name="l12578"></a><span class="lineno">12578</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kRequiredModifications = 5;</div>
<div class="line"><a name="l12579"></a><span class="lineno">12579</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxModifications = 100;</div>
<div class="line"><a name="l12580"></a><span class="lineno">12580</span>&#160;</div>
<div class="line"><a name="l12581"></a><span class="lineno">12581</span>&#160;  <span class="keyword">class </span>MorphThread : <span class="keyword">public</span> <a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html">i::Thread</a> {</div>
<div class="line"><a name="l12582"></a><span class="lineno">12582</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l12583"></a><span class="lineno">12583</span>&#160;    <span class="keyword">explicit</span> MorphThread(<a class="code" href="../../d4/d1b/class_reg_exp_string_modification_test.html">RegExpStringModificationTest</a>* test)</div>
<div class="line"><a name="l12584"></a><span class="lineno">12584</span>&#160;        : Thread(<span class="stringliteral">&quot;MorphThread&quot;</span>), test_(test) {}</div>
<div class="line"><a name="l12585"></a><span class="lineno">12585</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Run() {</div>
<div class="line"><a name="l12586"></a><span class="lineno">12586</span>&#160;      test_-&gt;MorphString();</div>
<div class="line"><a name="l12587"></a><span class="lineno">12587</span>&#160;    }</div>
<div class="line"><a name="l12588"></a><span class="lineno">12588</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l12589"></a><span class="lineno">12589</span>&#160;     <a class="code" href="../../d4/d1b/class_reg_exp_string_modification_test.html">RegExpStringModificationTest</a>* test_;</div>
<div class="line"><a name="l12590"></a><span class="lineno">12590</span>&#160;  };</div>
<div class="line"><a name="l12591"></a><span class="lineno">12591</span>&#160;</div>
<div class="line"><a name="l12592"></a><span class="lineno">12592</span>&#160;  <span class="keywordtype">void</span> MorphString() {</div>
<div class="line"><a name="l12593"></a><span class="lineno">12593</span>&#160;    block_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a7a15988824b783d07f7f7b5a226118d3">Wait</a>();</div>
<div class="line"><a name="l12594"></a><span class="lineno">12594</span>&#160;    <span class="keywordflow">while</span> (morphs_during_regexp_ &lt; kRequiredModifications &amp;&amp;</div>
<div class="line"><a name="l12595"></a><span class="lineno">12595</span>&#160;           morphs_ &lt; kMaxModifications) {</div>
<div class="line"><a name="l12596"></a><span class="lineno">12596</span>&#160;      {</div>
<div class="line"><a name="l12597"></a><span class="lineno">12597</span>&#160;        <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> lock;</div>
<div class="line"><a name="l12598"></a><span class="lineno">12598</span>&#160;        <span class="comment">// Swap string between ascii and two-byte representation.</span></div>
<div class="line"><a name="l12599"></a><span class="lineno">12599</span>&#160;        <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html">i::String</a>* <span class="keywordtype">string</span> = *input_;</div>
<div class="line"><a name="l12600"></a><span class="lineno">12600</span>&#160;        MorphAString(<span class="keywordtype">string</span>, &amp;ascii_resource_, &amp;uc16_resource_);</div>
<div class="line"><a name="l12601"></a><span class="lineno">12601</span>&#160;        morphs_++;</div>
<div class="line"><a name="l12602"></a><span class="lineno">12602</span>&#160;      }</div>
<div class="line"><a name="l12603"></a><span class="lineno">12603</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a93167fd3ca0557191f8854f4236e29e4">i::OS::Sleep</a>(1);</div>
<div class="line"><a name="l12604"></a><span class="lineno">12604</span>&#160;    }</div>
<div class="line"><a name="l12605"></a><span class="lineno">12605</span>&#160;    morph_success_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12606"></a><span class="lineno">12606</span>&#160;  }</div>
<div class="line"><a name="l12607"></a><span class="lineno">12607</span>&#160;</div>
<div class="line"><a name="l12608"></a><span class="lineno">12608</span>&#160;  <span class="keywordtype">void</span> LongRunningRegExp() {</div>
<div class="line"><a name="l12609"></a><span class="lineno">12609</span>&#160;    block_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a089a008fd80ce776f6dc455104cbfb9d">Signal</a>();  <span class="comment">// Enable morphing thread on next preemption.</span></div>
<div class="line"><a name="l12610"></a><span class="lineno">12610</span>&#160;    <span class="keywordflow">while</span> (morphs_during_regexp_ &lt; kRequiredModifications &amp;&amp;</div>
<div class="line"><a name="l12611"></a><span class="lineno">12611</span>&#160;           morphs_ &lt; kMaxModifications) {</div>
<div class="line"><a name="l12612"></a><span class="lineno">12612</span>&#160;      <span class="keywordtype">int</span> morphs_before = morphs_;</div>
<div class="line"><a name="l12613"></a><span class="lineno">12613</span>&#160;      {</div>
<div class="line"><a name="l12614"></a><span class="lineno">12614</span>&#160;        <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12615"></a><span class="lineno">12615</span>&#160;        <span class="comment">// Match 15-30 &quot;a&quot;&#39;s against 14 and a &quot;b&quot;.</span></div>
<div class="line"><a name="l12616"></a><span class="lineno">12616</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* c_source =</div>
<div class="line"><a name="l12617"></a><span class="lineno">12617</span>&#160;            <span class="stringliteral">&quot;/a?a?a?a?a?a?a?a?a?a?a?a?a?a?aaaaaaaaaaaaaaaa/&quot;</span></div>
<div class="line"><a name="l12618"></a><span class="lineno">12618</span>&#160;            <span class="stringliteral">&quot;.exec(input) === null&quot;</span>;</div>
<div class="line"><a name="l12619"></a><span class="lineno">12619</span>&#160;        Local&lt;String&gt; source = String::New(c_source);</div>
<div class="line"><a name="l12620"></a><span class="lineno">12620</span>&#160;        Local&lt;Script&gt; script = Script::Compile(source);</div>
<div class="line"><a name="l12621"></a><span class="lineno">12621</span>&#160;        Local&lt;Value&gt; result = script-&gt;Run();</div>
<div class="line"><a name="l12622"></a><span class="lineno">12622</span>&#160;        <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsTrue());</div>
<div class="line"><a name="l12623"></a><span class="lineno">12623</span>&#160;      }</div>
<div class="line"><a name="l12624"></a><span class="lineno">12624</span>&#160;      <span class="keywordtype">int</span> morphs_after = morphs_;</div>
<div class="line"><a name="l12625"></a><span class="lineno">12625</span>&#160;      morphs_during_regexp_ += morphs_after - morphs_before;</div>
<div class="line"><a name="l12626"></a><span class="lineno">12626</span>&#160;    }</div>
<div class="line"><a name="l12627"></a><span class="lineno">12627</span>&#160;    regexp_success_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12628"></a><span class="lineno">12628</span>&#160;  }</div>
<div class="line"><a name="l12629"></a><span class="lineno">12629</span>&#160;</div>
<div class="line"><a name="l12630"></a><span class="lineno">12630</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">i::uc16</a> two_byte_content_[15];</div>
<div class="line"><a name="l12631"></a><span class="lineno">12631</span>&#160;  <a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html">i::Semaphore</a>* block_;</div>
<div class="line"><a name="l12632"></a><span class="lineno">12632</span>&#160;  <span class="keywordtype">int</span> morphs_;</div>
<div class="line"><a name="l12633"></a><span class="lineno">12633</span>&#160;  <span class="keywordtype">int</span> morphs_during_regexp_;</div>
<div class="line"><a name="l12634"></a><span class="lineno">12634</span>&#160;  <span class="keywordtype">bool</span> regexp_success_;</div>
<div class="line"><a name="l12635"></a><span class="lineno">12635</span>&#160;  <span class="keywordtype">bool</span> morph_success_;</div>
<div class="line"><a name="l12636"></a><span class="lineno">12636</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> input_;</div>
<div class="line"><a name="l12637"></a><span class="lineno">12637</span>&#160;  <a class="code" href="../../d3/db2/class_ascii_vector_resource.html">AsciiVectorResource</a> ascii_resource_;</div>
<div class="line"><a name="l12638"></a><span class="lineno">12638</span>&#160;  <a class="code" href="../../d4/d2b/class_u_c16_vector_resource.html">UC16VectorResource</a> uc16_resource_;</div>
<div class="line"><a name="l12639"></a><span class="lineno">12639</span>&#160;};</div>
<div class="line"><a name="l12640"></a><span class="lineno">12640</span>&#160;</div>
<div class="line"><a name="l12641"></a><span class="lineno">12641</span>&#160;</div>
<div class="line"><a name="l12642"></a><span class="lineno">12642</span>&#160;<span class="comment">// Test that a regular expression execution can be interrupted and</span></div>
<div class="line"><a name="l12643"></a><span class="lineno">12643</span>&#160;<span class="comment">// the string changed without failing.</span></div>
<div class="line"><a name="l12644"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9a047263a70092b955b8eb775489ca59">12644</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RegExpStringModification) {</div>
<div class="line"><a name="l12645"></a><span class="lineno">12645</span>&#160;  <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> lock;</div>
<div class="line"><a name="l12646"></a><span class="lineno">12646</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l12647"></a><span class="lineno">12647</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12648"></a><span class="lineno">12648</span>&#160;  Local&lt;Context&gt; local_env;</div>
<div class="line"><a name="l12649"></a><span class="lineno">12649</span>&#160;  {</div>
<div class="line"><a name="l12650"></a><span class="lineno">12650</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l12651"></a><span class="lineno">12651</span>&#160;    local_env = env.<a class="code" href="../../d7/d05/class_local_context.html#ab6e5e298162f2ddabba6d697ac27f6c2">local</a>();</div>
<div class="line"><a name="l12652"></a><span class="lineno">12652</span>&#160;  }</div>
<div class="line"><a name="l12653"></a><span class="lineno">12653</span>&#160;</div>
<div class="line"><a name="l12654"></a><span class="lineno">12654</span>&#160;  <span class="comment">// Local context should still be live.</span></div>
<div class="line"><a name="l12655"></a><span class="lineno">12655</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!local_env.IsEmpty());</div>
<div class="line"><a name="l12656"></a><span class="lineno">12656</span>&#160;  local_env-&gt;Enter();</div>
<div class="line"><a name="l12657"></a><span class="lineno">12657</span>&#160;</div>
<div class="line"><a name="l12658"></a><span class="lineno">12658</span>&#160;  <span class="comment">// Should complete without problems.</span></div>
<div class="line"><a name="l12659"></a><span class="lineno">12659</span>&#160;  <a class="code" href="../../d4/d1b/class_reg_exp_string_modification_test.html">RegExpStringModificationTest</a>().<a class="code" href="../../d4/d1b/class_reg_exp_string_modification_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RunTest</a>();</div>
<div class="line"><a name="l12660"></a><span class="lineno">12660</span>&#160;</div>
<div class="line"><a name="l12661"></a><span class="lineno">12661</span>&#160;  local_env-&gt;Exit();</div>
<div class="line"><a name="l12662"></a><span class="lineno">12662</span>&#160;}</div>
<div class="line"><a name="l12663"></a><span class="lineno">12663</span>&#160;</div>
<div class="line"><a name="l12664"></a><span class="lineno">12664</span>&#160;</div>
<div class="line"><a name="l12665"></a><span class="lineno">12665</span>&#160;<span class="comment">// Test that we cannot set a property on the global object if there</span></div>
<div class="line"><a name="l12666"></a><span class="lineno">12666</span>&#160;<span class="comment">// is a read-only property in the prototype chain.</span></div>
<div class="line"><a name="l12667"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab18d5ee16300b0f80d6737c013b8059f">12667</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ReadOnlyPropertyInGlobalProto) {</div>
<div class="line"><a name="l12668"></a><span class="lineno">12668</span>&#160;  i::FLAG_es5_readonly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12669"></a><span class="lineno">12669</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12670"></a><span class="lineno">12670</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l12671"></a><span class="lineno">12671</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l12672"></a><span class="lineno">12672</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l12673"></a><span class="lineno">12673</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global_proto =</div>
<div class="line"><a name="l12674"></a><span class="lineno">12674</span>&#160;      <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Object&gt;::Cast</a>(global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;__proto__&quot;</span>)));</div>
<div class="line"><a name="l12675"></a><span class="lineno">12675</span>&#160;  global_proto-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l12676"></a><span class="lineno">12676</span>&#160;  global_proto-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l12677"></a><span class="lineno">12677</span>&#160;  <span class="comment">// Check without &#39;eval&#39; or &#39;with&#39;.</span></div>
<div class="line"><a name="l12678"></a><span class="lineno">12678</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> res =</div>
<div class="line"><a name="l12679"></a><span class="lineno">12679</span>&#160;      CompileRun(<span class="stringliteral">&quot;function f() { x = 42; return x; }; f()&quot;</span>);</div>
<div class="line"><a name="l12680"></a><span class="lineno">12680</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0), res);</div>
<div class="line"><a name="l12681"></a><span class="lineno">12681</span>&#160;  <span class="comment">// Check with &#39;eval&#39;.</span></div>
<div class="line"><a name="l12682"></a><span class="lineno">12682</span>&#160;  res = CompileRun(<span class="stringliteral">&quot;function f() { eval(&#39;1&#39;); y = 43; return y; }; f()&quot;</span>);</div>
<div class="line"><a name="l12683"></a><span class="lineno">12683</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0), res);</div>
<div class="line"><a name="l12684"></a><span class="lineno">12684</span>&#160;  <span class="comment">// Check with &#39;with&#39;.</span></div>
<div class="line"><a name="l12685"></a><span class="lineno">12685</span>&#160;  res = CompileRun(<span class="stringliteral">&quot;function f() { with (this) { y = 44 }; return y; }; f()&quot;</span>);</div>
<div class="line"><a name="l12686"></a><span class="lineno">12686</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(0), res);</div>
<div class="line"><a name="l12687"></a><span class="lineno">12687</span>&#160;}</div>
<div class="line"><a name="l12688"></a><span class="lineno">12688</span>&#160;</div>
<div class="line"><a name="l12689"></a><span class="lineno">12689</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> force_set_set_count = 0;</div>
<div class="line"><a name="l12690"></a><span class="lineno">12690</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> force_set_get_count = 0;</div>
<div class="line"><a name="l12691"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aaadb2ee5c6928d254ef1f0d8b6abb4e6">12691</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3f/test-api_8cc.html#aaadb2ee5c6928d254ef1f0d8b6abb4e6">pass_on_get</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12692"></a><span class="lineno">12692</span>&#160;</div>
<div class="line"><a name="l12693"></a><span class="lineno">12693</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> ForceSetGetter(<a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> name,</div>
<div class="line"><a name="l12694"></a><span class="lineno">12694</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a>&amp; info) {</div>
<div class="line"><a name="l12695"></a><span class="lineno">12695</span>&#160;  force_set_get_count++;</div>
<div class="line"><a name="l12696"></a><span class="lineno">12696</span>&#160;  <span class="keywordflow">if</span> (pass_on_get) {</div>
<div class="line"><a name="l12697"></a><span class="lineno">12697</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a>();</div>
<div class="line"><a name="l12698"></a><span class="lineno">12698</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12699"></a><span class="lineno">12699</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(3);</div>
<div class="line"><a name="l12700"></a><span class="lineno">12700</span>&#160;  }</div>
<div class="line"><a name="l12701"></a><span class="lineno">12701</span>&#160;}</div>
<div class="line"><a name="l12702"></a><span class="lineno">12702</span>&#160;</div>
<div class="line"><a name="l12703"></a><span class="lineno">12703</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ForceSetSetter(<a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> name,</div>
<div class="line"><a name="l12704"></a><span class="lineno">12704</span>&#160;                           <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> value,</div>
<div class="line"><a name="l12705"></a><span class="lineno">12705</span>&#160;                           <span class="keyword">const</span> <a class="code" href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a>&amp; info) {</div>
<div class="line"><a name="l12706"></a><span class="lineno">12706</span>&#160;  force_set_set_count++;</div>
<div class="line"><a name="l12707"></a><span class="lineno">12707</span>&#160;}</div>
<div class="line"><a name="l12708"></a><span class="lineno">12708</span>&#160;</div>
<div class="line"><a name="l12709"></a><span class="lineno">12709</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> ForceSetInterceptSetter(</div>
<div class="line"><a name="l12710"></a><span class="lineno">12710</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> name,</div>
<div class="line"><a name="l12711"></a><span class="lineno">12711</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> value,</div>
<div class="line"><a name="l12712"></a><span class="lineno">12712</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a>&amp; info) {</div>
<div class="line"><a name="l12713"></a><span class="lineno">12713</span>&#160;  force_set_set_count++;</div>
<div class="line"><a name="l12714"></a><span class="lineno">12714</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l12715"></a><span class="lineno">12715</span>&#160;}</div>
<div class="line"><a name="l12716"></a><span class="lineno">12716</span>&#160;</div>
<div class="line"><a name="l12717"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2e277c44c8e97aef83700d5e4fcdfc7f">12717</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ForceSet) {</div>
<div class="line"><a name="l12718"></a><span class="lineno">12718</span>&#160;  force_set_get_count = 0;</div>
<div class="line"><a name="l12719"></a><span class="lineno">12719</span>&#160;  force_set_set_count = 0;</div>
<div class="line"><a name="l12720"></a><span class="lineno">12720</span>&#160;  pass_on_get = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12721"></a><span class="lineno">12721</span>&#160;</div>
<div class="line"><a name="l12722"></a><span class="lineno">12722</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12723"></a><span class="lineno">12723</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l12724"></a><span class="lineno">12724</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> access_property = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"><a name="l12725"></a><span class="lineno">12725</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">SetAccessor</a>(access_property, ForceSetGetter, ForceSetSetter);</div>
<div class="line"><a name="l12726"></a><span class="lineno">12726</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, templ);</div>
<div class="line"><a name="l12727"></a><span class="lineno">12727</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l12728"></a><span class="lineno">12728</span>&#160;</div>
<div class="line"><a name="l12729"></a><span class="lineno">12729</span>&#160;  <span class="comment">// Ordinary properties</span></div>
<div class="line"><a name="l12730"></a><span class="lineno">12730</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> simple_property = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;p&quot;</span>);</div>
<div class="line"><a name="l12731"></a><span class="lineno">12731</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(simple_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(4), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l12732"></a><span class="lineno">12732</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(simple_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12733"></a><span class="lineno">12733</span>&#160;  <span class="comment">// This should fail because the property is read-only</span></div>
<div class="line"><a name="l12734"></a><span class="lineno">12734</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(simple_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(5));</div>
<div class="line"><a name="l12735"></a><span class="lineno">12735</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(simple_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12736"></a><span class="lineno">12736</span>&#160;  <span class="comment">// This should succeed even though the property is read-only</span></div>
<div class="line"><a name="l12737"></a><span class="lineno">12737</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acfbdfd7427b516ebdb5c47c4df5ed96c">ForceSet</a>(simple_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(6));</div>
<div class="line"><a name="l12738"></a><span class="lineno">12738</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(simple_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12739"></a><span class="lineno">12739</span>&#160;</div>
<div class="line"><a name="l12740"></a><span class="lineno">12740</span>&#160;  <span class="comment">// Accessors</span></div>
<div class="line"><a name="l12741"></a><span class="lineno">12741</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, force_set_set_count);</div>
<div class="line"><a name="l12742"></a><span class="lineno">12742</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, force_set_get_count);</div>
<div class="line"><a name="l12743"></a><span class="lineno">12743</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(access_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12744"></a><span class="lineno">12744</span>&#160;  <span class="comment">// CHECK_EQ the property shouldn&#39;t override it, just call the setter</span></div>
<div class="line"><a name="l12745"></a><span class="lineno">12745</span>&#160;  <span class="comment">// which in this case does nothing.</span></div>
<div class="line"><a name="l12746"></a><span class="lineno">12746</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(access_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(7));</div>
<div class="line"><a name="l12747"></a><span class="lineno">12747</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(access_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12748"></a><span class="lineno">12748</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, force_set_set_count);</div>
<div class="line"><a name="l12749"></a><span class="lineno">12749</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, force_set_get_count);</div>
<div class="line"><a name="l12750"></a><span class="lineno">12750</span>&#160;  <span class="comment">// Forcing the property to be set should override the accessor without</span></div>
<div class="line"><a name="l12751"></a><span class="lineno">12751</span>&#160;  <span class="comment">// calling it</span></div>
<div class="line"><a name="l12752"></a><span class="lineno">12752</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acfbdfd7427b516ebdb5c47c4df5ed96c">ForceSet</a>(access_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(8));</div>
<div class="line"><a name="l12753"></a><span class="lineno">12753</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(access_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12754"></a><span class="lineno">12754</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, force_set_set_count);</div>
<div class="line"><a name="l12755"></a><span class="lineno">12755</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, force_set_get_count);</div>
<div class="line"><a name="l12756"></a><span class="lineno">12756</span>&#160;}</div>
<div class="line"><a name="l12757"></a><span class="lineno">12757</span>&#160;</div>
<div class="line"><a name="l12758"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a072ea799c7e2e414bc6ac730c4bd67f1">12758</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ForceSetWithInterceptor) {</div>
<div class="line"><a name="l12759"></a><span class="lineno">12759</span>&#160;  force_set_get_count = 0;</div>
<div class="line"><a name="l12760"></a><span class="lineno">12760</span>&#160;  force_set_set_count = 0;</div>
<div class="line"><a name="l12761"></a><span class="lineno">12761</span>&#160;  pass_on_get = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12762"></a><span class="lineno">12762</span>&#160;</div>
<div class="line"><a name="l12763"></a><span class="lineno">12763</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12764"></a><span class="lineno">12764</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l12765"></a><span class="lineno">12765</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(ForceSetGetter, ForceSetInterceptSetter);</div>
<div class="line"><a name="l12766"></a><span class="lineno">12766</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, templ);</div>
<div class="line"><a name="l12767"></a><span class="lineno">12767</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l12768"></a><span class="lineno">12768</span>&#160;</div>
<div class="line"><a name="l12769"></a><span class="lineno">12769</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> some_property = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"><a name="l12770"></a><span class="lineno">12770</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, force_set_set_count);</div>
<div class="line"><a name="l12771"></a><span class="lineno">12771</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, force_set_get_count);</div>
<div class="line"><a name="l12772"></a><span class="lineno">12772</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(some_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12773"></a><span class="lineno">12773</span>&#160;  <span class="comment">// Setting the property shouldn&#39;t override it, just call the setter</span></div>
<div class="line"><a name="l12774"></a><span class="lineno">12774</span>&#160;  <span class="comment">// which in this case does nothing.</span></div>
<div class="line"><a name="l12775"></a><span class="lineno">12775</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(some_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(7));</div>
<div class="line"><a name="l12776"></a><span class="lineno">12776</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(some_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12777"></a><span class="lineno">12777</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, force_set_set_count);</div>
<div class="line"><a name="l12778"></a><span class="lineno">12778</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, force_set_get_count);</div>
<div class="line"><a name="l12779"></a><span class="lineno">12779</span>&#160;  <span class="comment">// Getting the property when the interceptor returns an empty handle</span></div>
<div class="line"><a name="l12780"></a><span class="lineno">12780</span>&#160;  <span class="comment">// should yield undefined, since the property isn&#39;t present on the</span></div>
<div class="line"><a name="l12781"></a><span class="lineno">12781</span>&#160;  <span class="comment">// object itself yet.</span></div>
<div class="line"><a name="l12782"></a><span class="lineno">12782</span>&#160;  pass_on_get = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12783"></a><span class="lineno">12783</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(some_property)-&gt;IsUndefined());</div>
<div class="line"><a name="l12784"></a><span class="lineno">12784</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, force_set_set_count);</div>
<div class="line"><a name="l12785"></a><span class="lineno">12785</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, force_set_get_count);</div>
<div class="line"><a name="l12786"></a><span class="lineno">12786</span>&#160;  <span class="comment">// Forcing the property to be set should cause the value to be</span></div>
<div class="line"><a name="l12787"></a><span class="lineno">12787</span>&#160;  <span class="comment">// set locally without calling the interceptor.</span></div>
<div class="line"><a name="l12788"></a><span class="lineno">12788</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acfbdfd7427b516ebdb5c47c4df5ed96c">ForceSet</a>(some_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(8));</div>
<div class="line"><a name="l12789"></a><span class="lineno">12789</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(some_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12790"></a><span class="lineno">12790</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, force_set_set_count);</div>
<div class="line"><a name="l12791"></a><span class="lineno">12791</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, force_set_get_count);</div>
<div class="line"><a name="l12792"></a><span class="lineno">12792</span>&#160;  <span class="comment">// Reenabling the interceptor should cause it to take precedence over</span></div>
<div class="line"><a name="l12793"></a><span class="lineno">12793</span>&#160;  <span class="comment">// the property</span></div>
<div class="line"><a name="l12794"></a><span class="lineno">12794</span>&#160;  pass_on_get = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12795"></a><span class="lineno">12795</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(some_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12796"></a><span class="lineno">12796</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, force_set_set_count);</div>
<div class="line"><a name="l12797"></a><span class="lineno">12797</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, force_set_get_count);</div>
<div class="line"><a name="l12798"></a><span class="lineno">12798</span>&#160;  <span class="comment">// The interceptor should also work for other properties</span></div>
<div class="line"><a name="l12799"></a><span class="lineno">12799</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;b&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l12800"></a><span class="lineno">12800</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, force_set_set_count);</div>
<div class="line"><a name="l12801"></a><span class="lineno">12801</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, force_set_get_count);</div>
<div class="line"><a name="l12802"></a><span class="lineno">12802</span>&#160;}</div>
<div class="line"><a name="l12803"></a><span class="lineno">12803</span>&#160;</div>
<div class="line"><a name="l12804"></a><span class="lineno">12804</span>&#160;</div>
<div class="line"><a name="l12805"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#add80ab4deaba97055d54b058eec6f456">12805</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ForceDelete) {</div>
<div class="line"><a name="l12806"></a><span class="lineno">12806</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12807"></a><span class="lineno">12807</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l12808"></a><span class="lineno">12808</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, templ);</div>
<div class="line"><a name="l12809"></a><span class="lineno">12809</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l12810"></a><span class="lineno">12810</span>&#160;</div>
<div class="line"><a name="l12811"></a><span class="lineno">12811</span>&#160;  <span class="comment">// Ordinary properties</span></div>
<div class="line"><a name="l12812"></a><span class="lineno">12812</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> simple_property = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;p&quot;</span>);</div>
<div class="line"><a name="l12813"></a><span class="lineno">12813</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(simple_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(4), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58">v8::DontDelete</a>);</div>
<div class="line"><a name="l12814"></a><span class="lineno">12814</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(simple_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12815"></a><span class="lineno">12815</span>&#160;  <span class="comment">// This should fail because the property is dont-delete.</span></div>
<div class="line"><a name="l12816"></a><span class="lineno">12816</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acf87d33c0190e1344dd08155006719ba">Delete</a>(simple_property));</div>
<div class="line"><a name="l12817"></a><span class="lineno">12817</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(simple_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12818"></a><span class="lineno">12818</span>&#160;  <span class="comment">// This should succeed even though the property is dont-delete.</span></div>
<div class="line"><a name="l12819"></a><span class="lineno">12819</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a08252a8577899b6880d6c356de9bb980">ForceDelete</a>(simple_property));</div>
<div class="line"><a name="l12820"></a><span class="lineno">12820</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(simple_property)-&gt;IsUndefined());</div>
<div class="line"><a name="l12821"></a><span class="lineno">12821</span>&#160;}</div>
<div class="line"><a name="l12822"></a><span class="lineno">12822</span>&#160;</div>
<div class="line"><a name="l12823"></a><span class="lineno">12823</span>&#160;</div>
<div class="line"><a name="l12824"></a><span class="lineno">12824</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> force_delete_interceptor_count = 0;</div>
<div class="line"><a name="l12825"></a><span class="lineno">12825</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> pass_on_delete = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12826"></a><span class="lineno">12826</span>&#160;</div>
<div class="line"><a name="l12827"></a><span class="lineno">12827</span>&#160;</div>
<div class="line"><a name="l12828"></a><span class="lineno">12828</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a> ForceDeleteDeleter(</div>
<div class="line"><a name="l12829"></a><span class="lineno">12829</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> name,</div>
<div class="line"><a name="l12830"></a><span class="lineno">12830</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a>&amp; info) {</div>
<div class="line"><a name="l12831"></a><span class="lineno">12831</span>&#160;  force_delete_interceptor_count++;</div>
<div class="line"><a name="l12832"></a><span class="lineno">12832</span>&#160;  <span class="keywordflow">if</span> (pass_on_delete) {</div>
<div class="line"><a name="l12833"></a><span class="lineno">12833</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Boolean&gt;</a>();</div>
<div class="line"><a name="l12834"></a><span class="lineno">12834</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12835"></a><span class="lineno">12835</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>();</div>
<div class="line"><a name="l12836"></a><span class="lineno">12836</span>&#160;  }</div>
<div class="line"><a name="l12837"></a><span class="lineno">12837</span>&#160;}</div>
<div class="line"><a name="l12838"></a><span class="lineno">12838</span>&#160;</div>
<div class="line"><a name="l12839"></a><span class="lineno">12839</span>&#160;</div>
<div class="line"><a name="l12840"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0e8db16ea62498a3d908dbfb077fd0df">12840</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ForceDeleteWithInterceptor) {</div>
<div class="line"><a name="l12841"></a><span class="lineno">12841</span>&#160;  force_delete_interceptor_count = 0;</div>
<div class="line"><a name="l12842"></a><span class="lineno">12842</span>&#160;  pass_on_delete = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12843"></a><span class="lineno">12843</span>&#160;</div>
<div class="line"><a name="l12844"></a><span class="lineno">12844</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12845"></a><span class="lineno">12845</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l12846"></a><span class="lineno">12846</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">SetNamedPropertyHandler</a>(0, 0, 0, ForceDeleteDeleter);</div>
<div class="line"><a name="l12847"></a><span class="lineno">12847</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, templ);</div>
<div class="line"><a name="l12848"></a><span class="lineno">12848</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l12849"></a><span class="lineno">12849</span>&#160;</div>
<div class="line"><a name="l12850"></a><span class="lineno">12850</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> some_property = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"><a name="l12851"></a><span class="lineno">12851</span>&#160;  global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(some_property, <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58">v8::DontDelete</a>);</div>
<div class="line"><a name="l12852"></a><span class="lineno">12852</span>&#160;</div>
<div class="line"><a name="l12853"></a><span class="lineno">12853</span>&#160;  <span class="comment">// Deleting a property should get intercepted and nothing should</span></div>
<div class="line"><a name="l12854"></a><span class="lineno">12854</span>&#160;  <span class="comment">// happen.</span></div>
<div class="line"><a name="l12855"></a><span class="lineno">12855</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, force_delete_interceptor_count);</div>
<div class="line"><a name="l12856"></a><span class="lineno">12856</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acf87d33c0190e1344dd08155006719ba">Delete</a>(some_property));</div>
<div class="line"><a name="l12857"></a><span class="lineno">12857</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, force_delete_interceptor_count);</div>
<div class="line"><a name="l12858"></a><span class="lineno">12858</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(some_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12859"></a><span class="lineno">12859</span>&#160;  <span class="comment">// Deleting the property when the interceptor returns an empty</span></div>
<div class="line"><a name="l12860"></a><span class="lineno">12860</span>&#160;  <span class="comment">// handle should not delete the property since it is DontDelete.</span></div>
<div class="line"><a name="l12861"></a><span class="lineno">12861</span>&#160;  pass_on_delete = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12862"></a><span class="lineno">12862</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acf87d33c0190e1344dd08155006719ba">Delete</a>(some_property));</div>
<div class="line"><a name="l12863"></a><span class="lineno">12863</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, force_delete_interceptor_count);</div>
<div class="line"><a name="l12864"></a><span class="lineno">12864</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(some_property)-&gt;Int32Value());</div>
<div class="line"><a name="l12865"></a><span class="lineno">12865</span>&#160;  <span class="comment">// Forcing the property to be deleted should delete the value</span></div>
<div class="line"><a name="l12866"></a><span class="lineno">12866</span>&#160;  <span class="comment">// without calling the interceptor.</span></div>
<div class="line"><a name="l12867"></a><span class="lineno">12867</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a08252a8577899b6880d6c356de9bb980">ForceDelete</a>(some_property));</div>
<div class="line"><a name="l12868"></a><span class="lineno">12868</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(some_property)-&gt;IsUndefined());</div>
<div class="line"><a name="l12869"></a><span class="lineno">12869</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, force_delete_interceptor_count);</div>
<div class="line"><a name="l12870"></a><span class="lineno">12870</span>&#160;}</div>
<div class="line"><a name="l12871"></a><span class="lineno">12871</span>&#160;</div>
<div class="line"><a name="l12872"></a><span class="lineno">12872</span>&#160;</div>
<div class="line"><a name="l12873"></a><span class="lineno">12873</span>&#160;<span class="comment">// Make sure that forcing a delete invalidates any IC stubs, so we</span></div>
<div class="line"><a name="l12874"></a><span class="lineno">12874</span>&#160;<span class="comment">// don&#39;t read the hole value.</span></div>
<div class="line"><a name="l12875"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9ab033a7390a68a224c6c0e9fd4f97cc">12875</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ForceDeleteIC) {</div>
<div class="line"><a name="l12876"></a><span class="lineno">12876</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12877"></a><span class="lineno">12877</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l12878"></a><span class="lineno">12878</span>&#160;  <span class="comment">// Create a DontDelete variable on the global object.</span></div>
<div class="line"><a name="l12879"></a><span class="lineno">12879</span>&#160;  CompileRun(<span class="stringliteral">&quot;this.__proto__ = { foo: &#39;horse&#39; };&quot;</span></div>
<div class="line"><a name="l12880"></a><span class="lineno">12880</span>&#160;             <span class="stringliteral">&quot;var foo = &#39;fish&#39;;&quot;</span></div>
<div class="line"><a name="l12881"></a><span class="lineno">12881</span>&#160;             <span class="stringliteral">&quot;function f() { return foo.length; }&quot;</span>);</div>
<div class="line"><a name="l12882"></a><span class="lineno">12882</span>&#160;  <span class="comment">// Initialize the IC for foo in f.</span></div>
<div class="line"><a name="l12883"></a><span class="lineno">12883</span>&#160;  CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 4; i++) f();&quot;</span>);</div>
<div class="line"><a name="l12884"></a><span class="lineno">12884</span>&#160;  <span class="comment">// Make sure the value of foo is correct before the deletion.</span></div>
<div class="line"><a name="l12885"></a><span class="lineno">12885</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, CompileRun(<span class="stringliteral">&quot;f()&quot;</span>)-&gt;Int32Value());</div>
<div class="line"><a name="l12886"></a><span class="lineno">12886</span>&#160;  <span class="comment">// Force the deletion of foo.</span></div>
<div class="line"><a name="l12887"></a><span class="lineno">12887</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;ForceDelete(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l12888"></a><span class="lineno">12888</span>&#160;  <span class="comment">// Make sure the value for foo is read from the prototype, and that</span></div>
<div class="line"><a name="l12889"></a><span class="lineno">12889</span>&#160;  <span class="comment">// we don&#39;t get in trouble with reading the deleted cell value</span></div>
<div class="line"><a name="l12890"></a><span class="lineno">12890</span>&#160;  <span class="comment">// sentinel.</span></div>
<div class="line"><a name="l12891"></a><span class="lineno">12891</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, CompileRun(<span class="stringliteral">&quot;f()&quot;</span>)-&gt;Int32Value());</div>
<div class="line"><a name="l12892"></a><span class="lineno">12892</span>&#160;}</div>
<div class="line"><a name="l12893"></a><span class="lineno">12893</span>&#160;</div>
<div class="line"><a name="l12894"></a><span class="lineno">12894</span>&#160;</div>
<div class="line"><a name="l12895"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3c179b48bad5657a3e7a7515cbd20b01">12895</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(InlinedFunctionAcrossContexts) {</div>
<div class="line"><a name="l12896"></a><span class="lineno">12896</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12897"></a><span class="lineno">12897</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> outer_scope;</div>
<div class="line"><a name="l12898"></a><span class="lineno">12898</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Context&gt;</a> ctx1 = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l12899"></a><span class="lineno">12899</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Context&gt;</a> ctx2 = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l12900"></a><span class="lineno">12900</span>&#160;  ctx1-&gt;Enter();</div>
<div class="line"><a name="l12901"></a><span class="lineno">12901</span>&#160;</div>
<div class="line"><a name="l12902"></a><span class="lineno">12902</span>&#160;  {</div>
<div class="line"><a name="l12903"></a><span class="lineno">12903</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> inner_scope;</div>
<div class="line"><a name="l12904"></a><span class="lineno">12904</span>&#160;    CompileRun(<span class="stringliteral">&quot;var G = 42; function foo() { return G; }&quot;</span>);</div>
<div class="line"><a name="l12905"></a><span class="lineno">12905</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> foo = ctx1-&gt;Global()-&gt;Get(v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l12906"></a><span class="lineno">12906</span>&#160;    ctx2-&gt;Enter();</div>
<div class="line"><a name="l12907"></a><span class="lineno">12907</span>&#160;    ctx2-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), foo);</div>
<div class="line"><a name="l12908"></a><span class="lineno">12908</span>&#160;    <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Value&gt;</a> res = CompileRun(</div>
<div class="line"><a name="l12909"></a><span class="lineno">12909</span>&#160;        <span class="stringliteral">&quot;function f() { return o(); }&quot;</span></div>
<div class="line"><a name="l12910"></a><span class="lineno">12910</span>&#160;        <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) f();&quot;</span></div>
<div class="line"><a name="l12911"></a><span class="lineno">12911</span>&#160;        <span class="stringliteral">&quot;%OptimizeFunctionOnNextCall(f);&quot;</span></div>
<div class="line"><a name="l12912"></a><span class="lineno">12912</span>&#160;        <span class="stringliteral">&quot;f();&quot;</span>);</div>
<div class="line"><a name="l12913"></a><span class="lineno">12913</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, res-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l12914"></a><span class="lineno">12914</span>&#160;    ctx2-&gt;Exit();</div>
<div class="line"><a name="l12915"></a><span class="lineno">12915</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> G_property = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;G&quot;</span>);</div>
<div class="line"><a name="l12916"></a><span class="lineno">12916</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(ctx1-&gt;Global()-&gt;ForceDelete(G_property));</div>
<div class="line"><a name="l12917"></a><span class="lineno">12917</span>&#160;    ctx2-&gt;Enter();</div>
<div class="line"><a name="l12918"></a><span class="lineno">12918</span>&#160;    ExpectString(</div>
<div class="line"><a name="l12919"></a><span class="lineno">12919</span>&#160;        <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l12920"></a><span class="lineno">12920</span>&#160;        <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l12921"></a><span class="lineno">12921</span>&#160;        <span class="stringliteral">&quot;    return f();&quot;</span></div>
<div class="line"><a name="l12922"></a><span class="lineno">12922</span>&#160;        <span class="stringliteral">&quot;  } catch(e) {&quot;</span></div>
<div class="line"><a name="l12923"></a><span class="lineno">12923</span>&#160;        <span class="stringliteral">&quot;    return e.toString();&quot;</span></div>
<div class="line"><a name="l12924"></a><span class="lineno">12924</span>&#160;        <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l12925"></a><span class="lineno">12925</span>&#160;        <span class="stringliteral">&quot; })()&quot;</span>,</div>
<div class="line"><a name="l12926"></a><span class="lineno">12926</span>&#160;        <span class="stringliteral">&quot;ReferenceError: G is not defined&quot;</span>);</div>
<div class="line"><a name="l12927"></a><span class="lineno">12927</span>&#160;    ctx2-&gt;Exit();</div>
<div class="line"><a name="l12928"></a><span class="lineno">12928</span>&#160;    ctx1-&gt;Exit();</div>
<div class="line"><a name="l12929"></a><span class="lineno">12929</span>&#160;    ctx1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l12930"></a><span class="lineno">12930</span>&#160;  }</div>
<div class="line"><a name="l12931"></a><span class="lineno">12931</span>&#160;  ctx2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l12932"></a><span class="lineno">12932</span>&#160;}</div>
<div class="line"><a name="l12933"></a><span class="lineno">12933</span>&#160;</div>
<div class="line"><a name="l12934"></a><span class="lineno">12934</span>&#160;</div>
<div class="line"><a name="l12935"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad8bd9ba42c1053f18d6da1c42e41d6d9">12935</a></span>&#160;<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#ad8bd9ba42c1053f18d6da1c42e41d6d9">calling_context0</a>;</div>
<div class="line"><a name="l12936"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af90a8b30ea193850b6006272e2ce21be">12936</a></span>&#160;<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#af90a8b30ea193850b6006272e2ce21be">calling_context1</a>;</div>
<div class="line"><a name="l12937"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a44d15035536053db713a59d8b31c6506">12937</a></span>&#160;<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a44d15035536053db713a59d8b31c6506">calling_context2</a>;</div>
<div class="line"><a name="l12938"></a><span class="lineno">12938</span>&#160;</div>
<div class="line"><a name="l12939"></a><span class="lineno">12939</span>&#160;</div>
<div class="line"><a name="l12940"></a><span class="lineno">12940</span>&#160;<span class="comment">// Check that the call to the callback is initiated in</span></div>
<div class="line"><a name="l12941"></a><span class="lineno">12941</span>&#160;<span class="comment">// calling_context2, the directly calling context is calling_context1</span></div>
<div class="line"><a name="l12942"></a><span class="lineno">12942</span>&#160;<span class="comment">// and the callback itself is in calling_context0.</span></div>
<div class="line"><a name="l12943"></a><span class="lineno">12943</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> GetCallingContextCallback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l12944"></a><span class="lineno">12944</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l12945"></a><span class="lineno">12945</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(Context::GetCurrent() == calling_context0);</div>
<div class="line"><a name="l12946"></a><span class="lineno">12946</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(Context::GetCalling() == calling_context1);</div>
<div class="line"><a name="l12947"></a><span class="lineno">12947</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(Context::GetEntered() == calling_context2);</div>
<div class="line"><a name="l12948"></a><span class="lineno">12948</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(42);</div>
<div class="line"><a name="l12949"></a><span class="lineno">12949</span>&#160;}</div>
<div class="line"><a name="l12950"></a><span class="lineno">12950</span>&#160;</div>
<div class="line"><a name="l12951"></a><span class="lineno">12951</span>&#160;</div>
<div class="line"><a name="l12952"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aae956fcb9e1f5983118f9dce2a1b5aee">12952</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GetCallingContext) {</div>
<div class="line"><a name="l12953"></a><span class="lineno">12953</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l12954"></a><span class="lineno">12954</span>&#160;</div>
<div class="line"><a name="l12955"></a><span class="lineno">12955</span>&#160;  calling_context0 = Context::New();</div>
<div class="line"><a name="l12956"></a><span class="lineno">12956</span>&#160;  calling_context1 = Context::New();</div>
<div class="line"><a name="l12957"></a><span class="lineno">12957</span>&#160;  calling_context2 = Context::New();</div>
<div class="line"><a name="l12958"></a><span class="lineno">12958</span>&#160;</div>
<div class="line"><a name="l12959"></a><span class="lineno">12959</span>&#160;  <span class="comment">// Allow cross-domain access.</span></div>
<div class="line"><a name="l12960"></a><span class="lineno">12960</span>&#160;  Local&lt;String&gt; token = v8_str(<span class="stringliteral">&quot;&lt;security token&gt;&quot;</span>);</div>
<div class="line"><a name="l12961"></a><span class="lineno">12961</span>&#160;  calling_context0-&gt;SetSecurityToken(token);</div>
<div class="line"><a name="l12962"></a><span class="lineno">12962</span>&#160;  calling_context1-&gt;SetSecurityToken(token);</div>
<div class="line"><a name="l12963"></a><span class="lineno">12963</span>&#160;  calling_context2-&gt;SetSecurityToken(token);</div>
<div class="line"><a name="l12964"></a><span class="lineno">12964</span>&#160;</div>
<div class="line"><a name="l12965"></a><span class="lineno">12965</span>&#160;  <span class="comment">// Create an object with a C++ callback in context0.</span></div>
<div class="line"><a name="l12966"></a><span class="lineno">12966</span>&#160;  calling_context0-&gt;Enter();</div>
<div class="line"><a name="l12967"></a><span class="lineno">12967</span>&#160;  Local&lt;v8::FunctionTemplate&gt; callback_templ =</div>
<div class="line"><a name="l12968"></a><span class="lineno">12968</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(GetCallingContextCallback);</div>
<div class="line"><a name="l12969"></a><span class="lineno">12969</span>&#160;  calling_context0-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;callback&quot;</span>),</div>
<div class="line"><a name="l12970"></a><span class="lineno">12970</span>&#160;                                  callback_templ-&gt;GetFunction());</div>
<div class="line"><a name="l12971"></a><span class="lineno">12971</span>&#160;  calling_context0-&gt;Exit();</div>
<div class="line"><a name="l12972"></a><span class="lineno">12972</span>&#160;</div>
<div class="line"><a name="l12973"></a><span class="lineno">12973</span>&#160;  <span class="comment">// Expose context0 in context1 and set up a function that calls the</span></div>
<div class="line"><a name="l12974"></a><span class="lineno">12974</span>&#160;  <span class="comment">// callback function.</span></div>
<div class="line"><a name="l12975"></a><span class="lineno">12975</span>&#160;  calling_context1-&gt;Enter();</div>
<div class="line"><a name="l12976"></a><span class="lineno">12976</span>&#160;  calling_context1-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;context0&quot;</span>),</div>
<div class="line"><a name="l12977"></a><span class="lineno">12977</span>&#160;                                  calling_context0-&gt;Global());</div>
<div class="line"><a name="l12978"></a><span class="lineno">12978</span>&#160;  CompileRun(<span class="stringliteral">&quot;function f() { context0.callback() }&quot;</span>);</div>
<div class="line"><a name="l12979"></a><span class="lineno">12979</span>&#160;  calling_context1-&gt;Exit();</div>
<div class="line"><a name="l12980"></a><span class="lineno">12980</span>&#160;</div>
<div class="line"><a name="l12981"></a><span class="lineno">12981</span>&#160;  <span class="comment">// Expose context1 in context2 and call the callback function in</span></div>
<div class="line"><a name="l12982"></a><span class="lineno">12982</span>&#160;  <span class="comment">// context0 indirectly through f in context1.</span></div>
<div class="line"><a name="l12983"></a><span class="lineno">12983</span>&#160;  calling_context2-&gt;Enter();</div>
<div class="line"><a name="l12984"></a><span class="lineno">12984</span>&#160;  calling_context2-&gt;Global()-&gt;Set(v8_str(<span class="stringliteral">&quot;context1&quot;</span>),</div>
<div class="line"><a name="l12985"></a><span class="lineno">12985</span>&#160;                                  calling_context1-&gt;Global());</div>
<div class="line"><a name="l12986"></a><span class="lineno">12986</span>&#160;  CompileRun(<span class="stringliteral">&quot;context1.f()&quot;</span>);</div>
<div class="line"><a name="l12987"></a><span class="lineno">12987</span>&#160;  calling_context2-&gt;Exit();</div>
<div class="line"><a name="l12988"></a><span class="lineno">12988</span>&#160;</div>
<div class="line"><a name="l12989"></a><span class="lineno">12989</span>&#160;  <span class="comment">// Dispose the contexts to allow them to be garbage collected.</span></div>
<div class="line"><a name="l12990"></a><span class="lineno">12990</span>&#160;  calling_context0.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l12991"></a><span class="lineno">12991</span>&#160;  calling_context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l12992"></a><span class="lineno">12992</span>&#160;  calling_context2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l12993"></a><span class="lineno">12993</span>&#160;  calling_context0.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"><a name="l12994"></a><span class="lineno">12994</span>&#160;  calling_context1.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"><a name="l12995"></a><span class="lineno">12995</span>&#160;  calling_context2.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"><a name="l12996"></a><span class="lineno">12996</span>&#160;}</div>
<div class="line"><a name="l12997"></a><span class="lineno">12997</span>&#160;</div>
<div class="line"><a name="l12998"></a><span class="lineno">12998</span>&#160;</div>
<div class="line"><a name="l12999"></a><span class="lineno">12999</span>&#160;<span class="comment">// Check that a variable declaration with no explicit initialization</span></div>
<div class="line"><a name="l13000"></a><span class="lineno">13000</span>&#160;<span class="comment">// value does shadow an existing property in the prototype chain.</span></div>
<div class="line"><a name="l13001"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#adcf7c484a63dbbec69dc2756bf030d82">13001</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InitGlobalVarInProtoChain) {</div>
<div class="line"><a name="l13002"></a><span class="lineno">13002</span>&#160;  i::FLAG_es52_globals = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13003"></a><span class="lineno">13003</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l13004"></a><span class="lineno">13004</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l13005"></a><span class="lineno">13005</span>&#160;  <span class="comment">// Introduce a variable in the prototype chain.</span></div>
<div class="line"><a name="l13006"></a><span class="lineno">13006</span>&#160;  CompileRun(<span class="stringliteral">&quot;__proto__.x = 42&quot;</span>);</div>
<div class="line"><a name="l13007"></a><span class="lineno">13007</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> result = CompileRun(<span class="stringliteral">&quot;var x = 43; x&quot;</span>);</div>
<div class="line"><a name="l13008"></a><span class="lineno">13008</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a2858c3ff89ed8f4b756b94cbebcfe42f">IsUndefined</a>());</div>
<div class="line"><a name="l13009"></a><span class="lineno">13009</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(43, result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l13010"></a><span class="lineno">13010</span>&#160;}</div>
<div class="line"><a name="l13011"></a><span class="lineno">13011</span>&#160;</div>
<div class="line"><a name="l13012"></a><span class="lineno">13012</span>&#160;</div>
<div class="line"><a name="l13013"></a><span class="lineno">13013</span>&#160;<span class="comment">// Regression test for issue 398.</span></div>
<div class="line"><a name="l13014"></a><span class="lineno">13014</span>&#160;<span class="comment">// If a function is added to an object, creating a constant function</span></div>
<div class="line"><a name="l13015"></a><span class="lineno">13015</span>&#160;<span class="comment">// field, and the result is cloned, replacing the constant function on the</span></div>
<div class="line"><a name="l13016"></a><span class="lineno">13016</span>&#160;<span class="comment">// original should not affect the clone.</span></div>
<div class="line"><a name="l13017"></a><span class="lineno">13017</span>&#160;<span class="comment">// See http://code.google.com/p/v8/issues/detail?id=398</span></div>
<div class="line"><a name="l13018"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afa969425735e7388b7f3fac236dd5d49">13018</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ReplaceConstantFunction) {</div>
<div class="line"><a name="l13019"></a><span class="lineno">13019</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l13020"></a><span class="lineno">13020</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l13021"></a><span class="lineno">13021</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13022"></a><span class="lineno">13022</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> func_templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l13023"></a><span class="lineno">13023</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> foo_string = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"><a name="l13024"></a><span class="lineno">13024</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(foo_string, func_templ-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l13025"></a><span class="lineno">13025</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj_clone = obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a1f871b0ebe142f0a099ad8eacf920be2">Clone</a>();</div>
<div class="line"><a name="l13026"></a><span class="lineno">13026</span>&#160;  obj_clone-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(foo_string, <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;Hello&quot;</span>));</div>
<div class="line"><a name="l13027"></a><span class="lineno">13027</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(foo_string)-&gt;IsUndefined());</div>
<div class="line"><a name="l13028"></a><span class="lineno">13028</span>&#160;}</div>
<div class="line"><a name="l13029"></a><span class="lineno">13029</span>&#160;</div>
<div class="line"><a name="l13030"></a><span class="lineno">13030</span>&#160;</div>
<div class="line"><a name="l13031"></a><span class="lineno">13031</span>&#160;<span class="comment">// Regression test for http://crbug.com/16276.</span></div>
<div class="line"><a name="l13032"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a08298036295c768e015eb8003c60d998">13032</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress16276) {</div>
<div class="line"><a name="l13033"></a><span class="lineno">13033</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l13034"></a><span class="lineno">13034</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l13035"></a><span class="lineno">13035</span>&#160;  <span class="comment">// Force the IC in f to be a dictionary load IC.</span></div>
<div class="line"><a name="l13036"></a><span class="lineno">13036</span>&#160;  CompileRun(<span class="stringliteral">&quot;function f(obj) { return obj.x; }\n&quot;</span></div>
<div class="line"><a name="l13037"></a><span class="lineno">13037</span>&#160;             <span class="stringliteral">&quot;var obj = { x: { foo: 42 }, y: 87 };\n&quot;</span></div>
<div class="line"><a name="l13038"></a><span class="lineno">13038</span>&#160;             <span class="stringliteral">&quot;var x = obj.x;\n&quot;</span></div>
<div class="line"><a name="l13039"></a><span class="lineno">13039</span>&#160;             <span class="stringliteral">&quot;delete obj.y;\n&quot;</span></div>
<div class="line"><a name="l13040"></a><span class="lineno">13040</span>&#160;             <span class="stringliteral">&quot;for (var i = 0; i &lt; 5; i++) f(obj);&quot;</span>);</div>
<div class="line"><a name="l13041"></a><span class="lineno">13041</span>&#160;  <span class="comment">// Detach the global object to make &#39;this&#39; refer directly to the</span></div>
<div class="line"><a name="l13042"></a><span class="lineno">13042</span>&#160;  <span class="comment">// global object (not the proxy), and make sure that the dictionary</span></div>
<div class="line"><a name="l13043"></a><span class="lineno">13043</span>&#160;  <span class="comment">// load IC doesn&#39;t mess up loading directly from the global object.</span></div>
<div class="line"><a name="l13044"></a><span class="lineno">13044</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a93c950914cc263962f3163e877b95c0b">DetachGlobal</a>();</div>
<div class="line"><a name="l13045"></a><span class="lineno">13045</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, CompileRun(<span class="stringliteral">&quot;f(this).foo&quot;</span>)-&gt;Int32Value());</div>
<div class="line"><a name="l13046"></a><span class="lineno">13046</span>&#160;}</div>
<div class="line"><a name="l13047"></a><span class="lineno">13047</span>&#160;</div>
<div class="line"><a name="l13048"></a><span class="lineno">13048</span>&#160;</div>
<div class="line"><a name="l13049"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a868f9b5933f5ed05d8fe30eedfa7ed89">13049</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(PixelArray) {</div>
<div class="line"><a name="l13050"></a><span class="lineno">13050</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l13051"></a><span class="lineno">13051</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l13052"></a><span class="lineno">13052</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kElementCount = 260;</div>
<div class="line"><a name="l13053"></a><span class="lineno">13053</span>&#160;  uint8_t* pixel_data = <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(malloc(kElementCount));</div>
<div class="line"><a name="l13054"></a><span class="lineno">13054</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::ExternalPixelArray&gt;</a> pixels =</div>
<div class="line"><a name="l13055"></a><span class="lineno">13055</span>&#160;      <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">i::Handle&lt;i::ExternalPixelArray&gt;::cast</a>(</div>
<div class="line"><a name="l13056"></a><span class="lineno">13056</span>&#160;          <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;NewExternalArray(kElementCount,</div>
<div class="line"><a name="l13057"></a><span class="lineno">13057</span>&#160;                                    <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>,</div>
<div class="line"><a name="l13058"></a><span class="lineno">13058</span>&#160;                                    pixel_data));</div>
<div class="line"><a name="l13059"></a><span class="lineno">13059</span>&#160;  <span class="comment">// Force GC to trigger verification.</span></div>
<div class="line"><a name="l13060"></a><span class="lineno">13060</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l13061"></a><span class="lineno">13061</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kElementCount; i++) {</div>
<div class="line"><a name="l13062"></a><span class="lineno">13062</span>&#160;    pixels-&gt;set(i, i % 256);</div>
<div class="line"><a name="l13063"></a><span class="lineno">13063</span>&#160;  }</div>
<div class="line"><a name="l13064"></a><span class="lineno">13064</span>&#160;  <span class="comment">// Force GC to trigger verification.</span></div>
<div class="line"><a name="l13065"></a><span class="lineno">13065</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l13066"></a><span class="lineno">13066</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kElementCount; i++) {</div>
<div class="line"><a name="l13067"></a><span class="lineno">13067</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(i % 256, pixels-&gt;get_scalar(i));</div>
<div class="line"><a name="l13068"></a><span class="lineno">13068</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(i % 256, pixel_data[i]);</div>
<div class="line"><a name="l13069"></a><span class="lineno">13069</span>&#160;  }</div>
<div class="line"><a name="l13070"></a><span class="lineno">13070</span>&#160;</div>
<div class="line"><a name="l13071"></a><span class="lineno">13071</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13072"></a><span class="lineno">13072</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::JSObject&gt;</a> jsobj = v8::Utils::OpenHandle(*obj);</div>
<div class="line"><a name="l13073"></a><span class="lineno">13073</span>&#160;  <span class="comment">// Set the elements to be the pixels.</span></div>
<div class="line"><a name="l13074"></a><span class="lineno">13074</span>&#160;  <span class="comment">// jsobj-&gt;set_elements(*pixels);</span></div>
<div class="line"><a name="l13075"></a><span class="lineno">13075</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9478153d582c834065446a6f0ac86f32">SetIndexedPropertiesToPixelData</a>(pixel_data, kElementCount);</div>
<div class="line"><a name="l13076"></a><span class="lineno">13076</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(1)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13077"></a><span class="lineno">13077</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;field&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(1503));</div>
<div class="line"><a name="l13078"></a><span class="lineno">13078</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;pixels&quot;</span>), obj);</div>
<div class="line"><a name="l13079"></a><span class="lineno">13079</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> result = CompileRun(<span class="stringliteral">&quot;pixels.field&quot;</span>);</div>
<div class="line"><a name="l13080"></a><span class="lineno">13080</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1503, result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l13081"></a><span class="lineno">13081</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;pixels[1]&quot;</span>);</div>
<div class="line"><a name="l13082"></a><span class="lineno">13082</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, result-&gt;Int32Value());</div>
<div class="line"><a name="l13083"></a><span class="lineno">13083</span>&#160;</div>
<div class="line"><a name="l13084"></a><span class="lineno">13084</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13085"></a><span class="lineno">13085</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13086"></a><span class="lineno">13086</span>&#160;                      <span class="stringliteral">&quot;  sum += pixels[i] = pixels[i] = -i;&quot;</span></div>
<div class="line"><a name="l13087"></a><span class="lineno">13087</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13088"></a><span class="lineno">13088</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13089"></a><span class="lineno">13089</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13090"></a><span class="lineno">13090</span>&#160;</div>
<div class="line"><a name="l13091"></a><span class="lineno">13091</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13092"></a><span class="lineno">13092</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13093"></a><span class="lineno">13093</span>&#160;                      <span class="stringliteral">&quot;  sum += pixels[i] = pixels[i] = 0;&quot;</span></div>
<div class="line"><a name="l13094"></a><span class="lineno">13094</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13095"></a><span class="lineno">13095</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13096"></a><span class="lineno">13096</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13097"></a><span class="lineno">13097</span>&#160;</div>
<div class="line"><a name="l13098"></a><span class="lineno">13098</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13099"></a><span class="lineno">13099</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13100"></a><span class="lineno">13100</span>&#160;                      <span class="stringliteral">&quot;  sum += pixels[i] = pixels[i] = 255;&quot;</span></div>
<div class="line"><a name="l13101"></a><span class="lineno">13101</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13102"></a><span class="lineno">13102</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13103"></a><span class="lineno">13103</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8 * 255, result-&gt;Int32Value());</div>
<div class="line"><a name="l13104"></a><span class="lineno">13104</span>&#160;</div>
<div class="line"><a name="l13105"></a><span class="lineno">13105</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13106"></a><span class="lineno">13106</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13107"></a><span class="lineno">13107</span>&#160;                      <span class="stringliteral">&quot;  sum += pixels[i] = pixels[i] = 256 + i;&quot;</span></div>
<div class="line"><a name="l13108"></a><span class="lineno">13108</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13109"></a><span class="lineno">13109</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13110"></a><span class="lineno">13110</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2076, result-&gt;Int32Value());</div>
<div class="line"><a name="l13111"></a><span class="lineno">13111</span>&#160;</div>
<div class="line"><a name="l13112"></a><span class="lineno">13112</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13113"></a><span class="lineno">13113</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13114"></a><span class="lineno">13114</span>&#160;                      <span class="stringliteral">&quot;  sum += pixels[i] = pixels[i] = i;&quot;</span></div>
<div class="line"><a name="l13115"></a><span class="lineno">13115</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13116"></a><span class="lineno">13116</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13117"></a><span class="lineno">13117</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13118"></a><span class="lineno">13118</span>&#160;</div>
<div class="line"><a name="l13119"></a><span class="lineno">13119</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13120"></a><span class="lineno">13120</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13121"></a><span class="lineno">13121</span>&#160;                      <span class="stringliteral">&quot;  sum += pixels[i];&quot;</span></div>
<div class="line"><a name="l13122"></a><span class="lineno">13122</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13123"></a><span class="lineno">13123</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13124"></a><span class="lineno">13124</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13125"></a><span class="lineno">13125</span>&#160;</div>
<div class="line"><a name="l13126"></a><span class="lineno">13126</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::Smi&gt;</a> value(<a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">i::Smi::FromInt</a>(2));</div>
<div class="line"><a name="l13127"></a><span class="lineno">13127</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::Object&gt;</a> no_failure;</div>
<div class="line"><a name="l13128"></a><span class="lineno">13128</span>&#160;  no_failure =</div>
<div class="line"><a name="l13129"></a><span class="lineno">13129</span>&#160;      <a class="code" href="../../d7/da2/classv8_1_1internal_1_1_j_s_object.html#a17df22e6490f68a6ded73211f472e379">i::JSObject::SetElement</a>(jsobj, 1, value, <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">i::kNonStrictMode</a>);</div>
<div class="line"><a name="l13130"></a><span class="lineno">13130</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!no_failure.<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a3c45461717ff230edd665ce24da988c5">is_null</a>());</div>
<div class="line"><a name="l13131"></a><span class="lineno">13131</span>&#160;  i::USE(no_failure);</div>
<div class="line"><a name="l13132"></a><span class="lineno">13132</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(1)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13133"></a><span class="lineno">13133</span>&#160;  *value.location() = <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">i::Smi::FromInt</a>(256);</div>
<div class="line"><a name="l13134"></a><span class="lineno">13134</span>&#160;  no_failure =</div>
<div class="line"><a name="l13135"></a><span class="lineno">13135</span>&#160;      <a class="code" href="../../d7/da2/classv8_1_1internal_1_1_j_s_object.html#a17df22e6490f68a6ded73211f472e379">i::JSObject::SetElement</a>(jsobj, 1, value, <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">i::kNonStrictMode</a>);</div>
<div class="line"><a name="l13136"></a><span class="lineno">13136</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!no_failure.<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a3c45461717ff230edd665ce24da988c5">is_null</a>());</div>
<div class="line"><a name="l13137"></a><span class="lineno">13137</span>&#160;  i::USE(no_failure);</div>
<div class="line"><a name="l13138"></a><span class="lineno">13138</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(255,</div>
<div class="line"><a name="l13139"></a><span class="lineno">13139</span>&#160;           <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(1)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13140"></a><span class="lineno">13140</span>&#160;  *value.location() = <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">i::Smi::FromInt</a>(-1);</div>
<div class="line"><a name="l13141"></a><span class="lineno">13141</span>&#160;  no_failure =</div>
<div class="line"><a name="l13142"></a><span class="lineno">13142</span>&#160;      <a class="code" href="../../d7/da2/classv8_1_1internal_1_1_j_s_object.html#a17df22e6490f68a6ded73211f472e379">i::JSObject::SetElement</a>(jsobj, 1, value, <a class="code" href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a>, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">i::kNonStrictMode</a>);</div>
<div class="line"><a name="l13143"></a><span class="lineno">13143</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!no_failure.<a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a3c45461717ff230edd665ce24da988c5">is_null</a>());</div>
<div class="line"><a name="l13144"></a><span class="lineno">13144</span>&#160;  i::USE(no_failure);</div>
<div class="line"><a name="l13145"></a><span class="lineno">13145</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(1)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13146"></a><span class="lineno">13146</span>&#160;</div>
<div class="line"><a name="l13147"></a><span class="lineno">13147</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13148"></a><span class="lineno">13148</span>&#160;                      <span class="stringliteral">&quot;  pixels[i] = (i * 65) - 109;&quot;</span></div>
<div class="line"><a name="l13149"></a><span class="lineno">13149</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13150"></a><span class="lineno">13150</span>&#160;                      <span class="stringliteral">&quot;pixels[1] + pixels[6];&quot;</span>);</div>
<div class="line"><a name="l13151"></a><span class="lineno">13151</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(255, result-&gt;Int32Value());</div>
<div class="line"><a name="l13152"></a><span class="lineno">13152</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(0)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13153"></a><span class="lineno">13153</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(1)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13154"></a><span class="lineno">13154</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(21,</div>
<div class="line"><a name="l13155"></a><span class="lineno">13155</span>&#160;           <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(2)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13156"></a><span class="lineno">13156</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(86,</div>
<div class="line"><a name="l13157"></a><span class="lineno">13157</span>&#160;           <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(3)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13158"></a><span class="lineno">13158</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(151,</div>
<div class="line"><a name="l13159"></a><span class="lineno">13159</span>&#160;           <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(4)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13160"></a><span class="lineno">13160</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(216,</div>
<div class="line"><a name="l13161"></a><span class="lineno">13161</span>&#160;           <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(5)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13162"></a><span class="lineno">13162</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(255,</div>
<div class="line"><a name="l13163"></a><span class="lineno">13163</span>&#160;           <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(6)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13164"></a><span class="lineno">13164</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(255,</div>
<div class="line"><a name="l13165"></a><span class="lineno">13165</span>&#160;           <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(7)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13166"></a><span class="lineno">13166</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13167"></a><span class="lineno">13167</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13168"></a><span class="lineno">13168</span>&#160;                      <span class="stringliteral">&quot;  sum += pixels[i];&quot;</span></div>
<div class="line"><a name="l13169"></a><span class="lineno">13169</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13170"></a><span class="lineno">13170</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13171"></a><span class="lineno">13171</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(984, result-&gt;Int32Value());</div>
<div class="line"><a name="l13172"></a><span class="lineno">13172</span>&#160;</div>
<div class="line"><a name="l13173"></a><span class="lineno">13173</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13174"></a><span class="lineno">13174</span>&#160;                      <span class="stringliteral">&quot;  pixels[i] = (i * 1.1);&quot;</span></div>
<div class="line"><a name="l13175"></a><span class="lineno">13175</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13176"></a><span class="lineno">13176</span>&#160;                      <span class="stringliteral">&quot;pixels[1] + pixels[6];&quot;</span>);</div>
<div class="line"><a name="l13177"></a><span class="lineno">13177</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8, result-&gt;Int32Value());</div>
<div class="line"><a name="l13178"></a><span class="lineno">13178</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(0)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13179"></a><span class="lineno">13179</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(1)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13180"></a><span class="lineno">13180</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(2)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13181"></a><span class="lineno">13181</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(3)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13182"></a><span class="lineno">13182</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(4)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13183"></a><span class="lineno">13183</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(5)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13184"></a><span class="lineno">13184</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(6)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13185"></a><span class="lineno">13185</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(7)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13186"></a><span class="lineno">13186</span>&#160;</div>
<div class="line"><a name="l13187"></a><span class="lineno">13187</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13188"></a><span class="lineno">13188</span>&#160;                      <span class="stringliteral">&quot;  pixels[7] = undefined;&quot;</span></div>
<div class="line"><a name="l13189"></a><span class="lineno">13189</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13190"></a><span class="lineno">13190</span>&#160;                      <span class="stringliteral">&quot;pixels[7];&quot;</span>);</div>
<div class="line"><a name="l13191"></a><span class="lineno">13191</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13192"></a><span class="lineno">13192</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(7)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13193"></a><span class="lineno">13193</span>&#160;</div>
<div class="line"><a name="l13194"></a><span class="lineno">13194</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13195"></a><span class="lineno">13195</span>&#160;                      <span class="stringliteral">&quot;  pixels[6] = &#39;2.3&#39;;&quot;</span></div>
<div class="line"><a name="l13196"></a><span class="lineno">13196</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13197"></a><span class="lineno">13197</span>&#160;                      <span class="stringliteral">&quot;pixels[6];&quot;</span>);</div>
<div class="line"><a name="l13198"></a><span class="lineno">13198</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, result-&gt;Int32Value());</div>
<div class="line"><a name="l13199"></a><span class="lineno">13199</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(6)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13200"></a><span class="lineno">13200</span>&#160;</div>
<div class="line"><a name="l13201"></a><span class="lineno">13201</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13202"></a><span class="lineno">13202</span>&#160;                      <span class="stringliteral">&quot;  pixels[5] = NaN;&quot;</span></div>
<div class="line"><a name="l13203"></a><span class="lineno">13203</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13204"></a><span class="lineno">13204</span>&#160;                      <span class="stringliteral">&quot;pixels[5];&quot;</span>);</div>
<div class="line"><a name="l13205"></a><span class="lineno">13205</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13206"></a><span class="lineno">13206</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(5)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13207"></a><span class="lineno">13207</span>&#160;</div>
<div class="line"><a name="l13208"></a><span class="lineno">13208</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13209"></a><span class="lineno">13209</span>&#160;                      <span class="stringliteral">&quot;  pixels[8] = Infinity;&quot;</span></div>
<div class="line"><a name="l13210"></a><span class="lineno">13210</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13211"></a><span class="lineno">13211</span>&#160;                      <span class="stringliteral">&quot;pixels[8];&quot;</span>);</div>
<div class="line"><a name="l13212"></a><span class="lineno">13212</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(255, result-&gt;Int32Value());</div>
<div class="line"><a name="l13213"></a><span class="lineno">13213</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(255,</div>
<div class="line"><a name="l13214"></a><span class="lineno">13214</span>&#160;           <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(8)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13215"></a><span class="lineno">13215</span>&#160;</div>
<div class="line"><a name="l13216"></a><span class="lineno">13216</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13217"></a><span class="lineno">13217</span>&#160;                      <span class="stringliteral">&quot;  pixels[9] = -Infinity;&quot;</span></div>
<div class="line"><a name="l13218"></a><span class="lineno">13218</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13219"></a><span class="lineno">13219</span>&#160;                      <span class="stringliteral">&quot;pixels[9];&quot;</span>);</div>
<div class="line"><a name="l13220"></a><span class="lineno">13220</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13221"></a><span class="lineno">13221</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(9)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13222"></a><span class="lineno">13222</span>&#160;</div>
<div class="line"><a name="l13223"></a><span class="lineno">13223</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;pixels[3] = 33;&quot;</span></div>
<div class="line"><a name="l13224"></a><span class="lineno">13224</span>&#160;                      <span class="stringliteral">&quot;delete pixels[3];&quot;</span></div>
<div class="line"><a name="l13225"></a><span class="lineno">13225</span>&#160;                      <span class="stringliteral">&quot;pixels[3];&quot;</span>);</div>
<div class="line"><a name="l13226"></a><span class="lineno">13226</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(33, result-&gt;Int32Value());</div>
<div class="line"><a name="l13227"></a><span class="lineno">13227</span>&#160;</div>
<div class="line"><a name="l13228"></a><span class="lineno">13228</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;pixels[0] = 10; pixels[1] = 11;&quot;</span></div>
<div class="line"><a name="l13229"></a><span class="lineno">13229</span>&#160;                      <span class="stringliteral">&quot;pixels[2] = 12; pixels[3] = 13;&quot;</span></div>
<div class="line"><a name="l13230"></a><span class="lineno">13230</span>&#160;                      <span class="stringliteral">&quot;pixels.__defineGetter__(&#39;2&#39;,&quot;</span></div>
<div class="line"><a name="l13231"></a><span class="lineno">13231</span>&#160;                      <span class="stringliteral">&quot;function() { return 120; });&quot;</span></div>
<div class="line"><a name="l13232"></a><span class="lineno">13232</span>&#160;                      <span class="stringliteral">&quot;pixels[2];&quot;</span>);</div>
<div class="line"><a name="l13233"></a><span class="lineno">13233</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(12, result-&gt;Int32Value());</div>
<div class="line"><a name="l13234"></a><span class="lineno">13234</span>&#160;</div>
<div class="line"><a name="l13235"></a><span class="lineno">13235</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var js_array = new Array(40);&quot;</span></div>
<div class="line"><a name="l13236"></a><span class="lineno">13236</span>&#160;                      <span class="stringliteral">&quot;js_array[0] = 77;&quot;</span></div>
<div class="line"><a name="l13237"></a><span class="lineno">13237</span>&#160;                      <span class="stringliteral">&quot;js_array;&quot;</span>);</div>
<div class="line"><a name="l13238"></a><span class="lineno">13238</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(77, <a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a>(*result)-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l13239"></a><span class="lineno">13239</span>&#160;</div>
<div class="line"><a name="l13240"></a><span class="lineno">13240</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;pixels[1] = 23;&quot;</span></div>
<div class="line"><a name="l13241"></a><span class="lineno">13241</span>&#160;                      <span class="stringliteral">&quot;pixels.__proto__ = [];&quot;</span></div>
<div class="line"><a name="l13242"></a><span class="lineno">13242</span>&#160;                      <span class="stringliteral">&quot;js_array.__proto__ = pixels;&quot;</span></div>
<div class="line"><a name="l13243"></a><span class="lineno">13243</span>&#160;                      <span class="stringliteral">&quot;js_array.concat(pixels);&quot;</span>);</div>
<div class="line"><a name="l13244"></a><span class="lineno">13244</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(77, <a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a>(*result)-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l13245"></a><span class="lineno">13245</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, <a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a>(*result)-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;1&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l13246"></a><span class="lineno">13246</span>&#160;</div>
<div class="line"><a name="l13247"></a><span class="lineno">13247</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;pixels[1] = 23;&quot;</span>);</div>
<div class="line"><a name="l13248"></a><span class="lineno">13248</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, result-&gt;Int32Value());</div>
<div class="line"><a name="l13249"></a><span class="lineno">13249</span>&#160;</div>
<div class="line"><a name="l13250"></a><span class="lineno">13250</span>&#160;  <span class="comment">// Test for index greater than 255.  Regression test for:</span></div>
<div class="line"><a name="l13251"></a><span class="lineno">13251</span>&#160;  <span class="comment">// http://code.google.com/p/chromium/issues/detail?id=26337.</span></div>
<div class="line"><a name="l13252"></a><span class="lineno">13252</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;pixels[256] = 255;&quot;</span>);</div>
<div class="line"><a name="l13253"></a><span class="lineno">13253</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(255, result-&gt;Int32Value());</div>
<div class="line"><a name="l13254"></a><span class="lineno">13254</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var i = 0;&quot;</span></div>
<div class="line"><a name="l13255"></a><span class="lineno">13255</span>&#160;                      <span class="stringliteral">&quot;for (var j = 0; j &lt; 8; j++) { i = pixels[256]; }&quot;</span></div>
<div class="line"><a name="l13256"></a><span class="lineno">13256</span>&#160;                      <span class="stringliteral">&quot;i&quot;</span>);</div>
<div class="line"><a name="l13257"></a><span class="lineno">13257</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(255, result-&gt;Int32Value());</div>
<div class="line"><a name="l13258"></a><span class="lineno">13258</span>&#160;</div>
<div class="line"><a name="l13259"></a><span class="lineno">13259</span>&#160;  <span class="comment">// Make sure that pixel array ICs recognize when a non-pixel array</span></div>
<div class="line"><a name="l13260"></a><span class="lineno">13260</span>&#160;  <span class="comment">// is passed to it.</span></div>
<div class="line"><a name="l13261"></a><span class="lineno">13261</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_load(p) {&quot;</span></div>
<div class="line"><a name="l13262"></a><span class="lineno">13262</span>&#160;                      <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l13263"></a><span class="lineno">13263</span>&#160;                      <span class="stringliteral">&quot;  for (var j = 0; j &lt; 256; j++) { sum += p[j]; }&quot;</span></div>
<div class="line"><a name="l13264"></a><span class="lineno">13264</span>&#160;                      <span class="stringliteral">&quot;  return sum;&quot;</span></div>
<div class="line"><a name="l13265"></a><span class="lineno">13265</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13266"></a><span class="lineno">13266</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { pixels[i] = i; }&quot;</span></div>
<div class="line"><a name="l13267"></a><span class="lineno">13267</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) { pa_load(pixels); }&quot;</span></div>
<div class="line"><a name="l13268"></a><span class="lineno">13268</span>&#160;                      <span class="stringliteral">&quot;just_ints = new Object();&quot;</span></div>
<div class="line"><a name="l13269"></a><span class="lineno">13269</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { just_ints[i] = i; }&quot;</span></div>
<div class="line"><a name="l13270"></a><span class="lineno">13270</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) {&quot;</span></div>
<div class="line"><a name="l13271"></a><span class="lineno">13271</span>&#160;                      <span class="stringliteral">&quot;  result = pa_load(just_ints);&quot;</span></div>
<div class="line"><a name="l13272"></a><span class="lineno">13272</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13273"></a><span class="lineno">13273</span>&#160;                      <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l13274"></a><span class="lineno">13274</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32640, result-&gt;Int32Value());</div>
<div class="line"><a name="l13275"></a><span class="lineno">13275</span>&#160;</div>
<div class="line"><a name="l13276"></a><span class="lineno">13276</span>&#160;  <span class="comment">// Make sure that pixel array ICs recognize out-of-bound accesses.</span></div>
<div class="line"><a name="l13277"></a><span class="lineno">13277</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_load(p, start) {&quot;</span></div>
<div class="line"><a name="l13278"></a><span class="lineno">13278</span>&#160;                      <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l13279"></a><span class="lineno">13279</span>&#160;                      <span class="stringliteral">&quot;  for (var j = start; j &lt; 256; j++) { sum += p[j]; }&quot;</span></div>
<div class="line"><a name="l13280"></a><span class="lineno">13280</span>&#160;                      <span class="stringliteral">&quot;  return sum;&quot;</span></div>
<div class="line"><a name="l13281"></a><span class="lineno">13281</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13282"></a><span class="lineno">13282</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { pixels[i] = i; }&quot;</span></div>
<div class="line"><a name="l13283"></a><span class="lineno">13283</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) { pa_load(pixels,0); }&quot;</span></div>
<div class="line"><a name="l13284"></a><span class="lineno">13284</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) {&quot;</span></div>
<div class="line"><a name="l13285"></a><span class="lineno">13285</span>&#160;                      <span class="stringliteral">&quot;  result = pa_load(pixels,-10);&quot;</span></div>
<div class="line"><a name="l13286"></a><span class="lineno">13286</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13287"></a><span class="lineno">13287</span>&#160;                      <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l13288"></a><span class="lineno">13288</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13289"></a><span class="lineno">13289</span>&#160;</div>
<div class="line"><a name="l13290"></a><span class="lineno">13290</span>&#160;  <span class="comment">// Make sure that generic ICs properly handles a pixel array.</span></div>
<div class="line"><a name="l13291"></a><span class="lineno">13291</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_load(p) {&quot;</span></div>
<div class="line"><a name="l13292"></a><span class="lineno">13292</span>&#160;                      <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l13293"></a><span class="lineno">13293</span>&#160;                      <span class="stringliteral">&quot;  for (var j = 0; j &lt; 256; j++) { sum += p[j]; }&quot;</span></div>
<div class="line"><a name="l13294"></a><span class="lineno">13294</span>&#160;                      <span class="stringliteral">&quot;  return sum;&quot;</span></div>
<div class="line"><a name="l13295"></a><span class="lineno">13295</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13296"></a><span class="lineno">13296</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { pixels[i] = i; }&quot;</span></div>
<div class="line"><a name="l13297"></a><span class="lineno">13297</span>&#160;                      <span class="stringliteral">&quot;just_ints = new Object();&quot;</span></div>
<div class="line"><a name="l13298"></a><span class="lineno">13298</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { just_ints[i] = i; }&quot;</span></div>
<div class="line"><a name="l13299"></a><span class="lineno">13299</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) { pa_load(just_ints); }&quot;</span></div>
<div class="line"><a name="l13300"></a><span class="lineno">13300</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) {&quot;</span></div>
<div class="line"><a name="l13301"></a><span class="lineno">13301</span>&#160;                      <span class="stringliteral">&quot;  result = pa_load(pixels);&quot;</span></div>
<div class="line"><a name="l13302"></a><span class="lineno">13302</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13303"></a><span class="lineno">13303</span>&#160;                      <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l13304"></a><span class="lineno">13304</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32640, result-&gt;Int32Value());</div>
<div class="line"><a name="l13305"></a><span class="lineno">13305</span>&#160;</div>
<div class="line"><a name="l13306"></a><span class="lineno">13306</span>&#160;  <span class="comment">// Make sure that generic load ICs recognize out-of-bound accesses in</span></div>
<div class="line"><a name="l13307"></a><span class="lineno">13307</span>&#160;  <span class="comment">// pixel arrays.</span></div>
<div class="line"><a name="l13308"></a><span class="lineno">13308</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_load(p, start) {&quot;</span></div>
<div class="line"><a name="l13309"></a><span class="lineno">13309</span>&#160;                      <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l13310"></a><span class="lineno">13310</span>&#160;                      <span class="stringliteral">&quot;  for (var j = start; j &lt; 256; j++) { sum += p[j]; }&quot;</span></div>
<div class="line"><a name="l13311"></a><span class="lineno">13311</span>&#160;                      <span class="stringliteral">&quot;  return sum;&quot;</span></div>
<div class="line"><a name="l13312"></a><span class="lineno">13312</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13313"></a><span class="lineno">13313</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { pixels[i] = i; }&quot;</span></div>
<div class="line"><a name="l13314"></a><span class="lineno">13314</span>&#160;                      <span class="stringliteral">&quot;just_ints = new Object();&quot;</span></div>
<div class="line"><a name="l13315"></a><span class="lineno">13315</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { just_ints[i] = i; }&quot;</span></div>
<div class="line"><a name="l13316"></a><span class="lineno">13316</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) { pa_load(just_ints,0); }&quot;</span></div>
<div class="line"><a name="l13317"></a><span class="lineno">13317</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) { pa_load(pixels,0); }&quot;</span></div>
<div class="line"><a name="l13318"></a><span class="lineno">13318</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) {&quot;</span></div>
<div class="line"><a name="l13319"></a><span class="lineno">13319</span>&#160;                      <span class="stringliteral">&quot;  result = pa_load(pixels,-10);&quot;</span></div>
<div class="line"><a name="l13320"></a><span class="lineno">13320</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13321"></a><span class="lineno">13321</span>&#160;                      <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l13322"></a><span class="lineno">13322</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13323"></a><span class="lineno">13323</span>&#160;</div>
<div class="line"><a name="l13324"></a><span class="lineno">13324</span>&#160;  <span class="comment">// Make sure that generic ICs properly handles other types than pixel</span></div>
<div class="line"><a name="l13325"></a><span class="lineno">13325</span>&#160;  <span class="comment">// arrays (that the inlined fast pixel array test leaves the right information</span></div>
<div class="line"><a name="l13326"></a><span class="lineno">13326</span>&#160;  <span class="comment">// in the right registers).</span></div>
<div class="line"><a name="l13327"></a><span class="lineno">13327</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_load(p) {&quot;</span></div>
<div class="line"><a name="l13328"></a><span class="lineno">13328</span>&#160;                      <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l13329"></a><span class="lineno">13329</span>&#160;                      <span class="stringliteral">&quot;  for (var j = 0; j &lt; 256; j++) { sum += p[j]; }&quot;</span></div>
<div class="line"><a name="l13330"></a><span class="lineno">13330</span>&#160;                      <span class="stringliteral">&quot;  return sum;&quot;</span></div>
<div class="line"><a name="l13331"></a><span class="lineno">13331</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13332"></a><span class="lineno">13332</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { pixels[i] = i; }&quot;</span></div>
<div class="line"><a name="l13333"></a><span class="lineno">13333</span>&#160;                      <span class="stringliteral">&quot;just_ints = new Object();&quot;</span></div>
<div class="line"><a name="l13334"></a><span class="lineno">13334</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { just_ints[i] = i; }&quot;</span></div>
<div class="line"><a name="l13335"></a><span class="lineno">13335</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) { pa_load(just_ints); }&quot;</span></div>
<div class="line"><a name="l13336"></a><span class="lineno">13336</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) { pa_load(pixels); }&quot;</span></div>
<div class="line"><a name="l13337"></a><span class="lineno">13337</span>&#160;                      <span class="stringliteral">&quot;sparse_array = new Object();&quot;</span></div>
<div class="line"><a name="l13338"></a><span class="lineno">13338</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { sparse_array[i] = i; }&quot;</span></div>
<div class="line"><a name="l13339"></a><span class="lineno">13339</span>&#160;                      <span class="stringliteral">&quot;sparse_array[1000000] = 3;&quot;</span></div>
<div class="line"><a name="l13340"></a><span class="lineno">13340</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 10; ++i) {&quot;</span></div>
<div class="line"><a name="l13341"></a><span class="lineno">13341</span>&#160;                      <span class="stringliteral">&quot;  result = pa_load(sparse_array);&quot;</span></div>
<div class="line"><a name="l13342"></a><span class="lineno">13342</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13343"></a><span class="lineno">13343</span>&#160;                      <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l13344"></a><span class="lineno">13344</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32640, result-&gt;Int32Value());</div>
<div class="line"><a name="l13345"></a><span class="lineno">13345</span>&#160;</div>
<div class="line"><a name="l13346"></a><span class="lineno">13346</span>&#160;  <span class="comment">// Make sure that pixel array store ICs clamp values correctly.</span></div>
<div class="line"><a name="l13347"></a><span class="lineno">13347</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_store(p) {&quot;</span></div>
<div class="line"><a name="l13348"></a><span class="lineno">13348</span>&#160;                      <span class="stringliteral">&quot;  for (var j = 0; j &lt; 256; j++) { p[j] = j * 2; }&quot;</span></div>
<div class="line"><a name="l13349"></a><span class="lineno">13349</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13350"></a><span class="lineno">13350</span>&#160;                      <span class="stringliteral">&quot;pa_store(pixels);&quot;</span></div>
<div class="line"><a name="l13351"></a><span class="lineno">13351</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13352"></a><span class="lineno">13352</span>&#160;                      <span class="stringliteral">&quot;for (var j = 0; j &lt; 256; j++) { sum += pixels[j]; }&quot;</span></div>
<div class="line"><a name="l13353"></a><span class="lineno">13353</span>&#160;                      <span class="stringliteral">&quot;sum&quot;</span>);</div>
<div class="line"><a name="l13354"></a><span class="lineno">13354</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(48896, result-&gt;Int32Value());</div>
<div class="line"><a name="l13355"></a><span class="lineno">13355</span>&#160;</div>
<div class="line"><a name="l13356"></a><span class="lineno">13356</span>&#160;  <span class="comment">// Make sure that pixel array stores correctly handle accesses outside</span></div>
<div class="line"><a name="l13357"></a><span class="lineno">13357</span>&#160;  <span class="comment">// of the pixel array..</span></div>
<div class="line"><a name="l13358"></a><span class="lineno">13358</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_store(p,start) {&quot;</span></div>
<div class="line"><a name="l13359"></a><span class="lineno">13359</span>&#160;                      <span class="stringliteral">&quot;  for (var j = 0; j &lt; 256; j++) {&quot;</span></div>
<div class="line"><a name="l13360"></a><span class="lineno">13360</span>&#160;                      <span class="stringliteral">&quot;    p[j+start] = j * 2;&quot;</span></div>
<div class="line"><a name="l13361"></a><span class="lineno">13361</span>&#160;                      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13362"></a><span class="lineno">13362</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13363"></a><span class="lineno">13363</span>&#160;                      <span class="stringliteral">&quot;pa_store(pixels,0);&quot;</span></div>
<div class="line"><a name="l13364"></a><span class="lineno">13364</span>&#160;                      <span class="stringliteral">&quot;pa_store(pixels,-128);&quot;</span></div>
<div class="line"><a name="l13365"></a><span class="lineno">13365</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13366"></a><span class="lineno">13366</span>&#160;                      <span class="stringliteral">&quot;for (var j = 0; j &lt; 256; j++) { sum += pixels[j]; }&quot;</span></div>
<div class="line"><a name="l13367"></a><span class="lineno">13367</span>&#160;                      <span class="stringliteral">&quot;sum&quot;</span>);</div>
<div class="line"><a name="l13368"></a><span class="lineno">13368</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(65280, result-&gt;Int32Value());</div>
<div class="line"><a name="l13369"></a><span class="lineno">13369</span>&#160;</div>
<div class="line"><a name="l13370"></a><span class="lineno">13370</span>&#160;  <span class="comment">// Make sure that the generic store stub correctly handle accesses outside</span></div>
<div class="line"><a name="l13371"></a><span class="lineno">13371</span>&#160;  <span class="comment">// of the pixel array..</span></div>
<div class="line"><a name="l13372"></a><span class="lineno">13372</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_store(p,start) {&quot;</span></div>
<div class="line"><a name="l13373"></a><span class="lineno">13373</span>&#160;                      <span class="stringliteral">&quot;  for (var j = 0; j &lt; 256; j++) {&quot;</span></div>
<div class="line"><a name="l13374"></a><span class="lineno">13374</span>&#160;                      <span class="stringliteral">&quot;    p[j+start] = j * 2;&quot;</span></div>
<div class="line"><a name="l13375"></a><span class="lineno">13375</span>&#160;                      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13376"></a><span class="lineno">13376</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13377"></a><span class="lineno">13377</span>&#160;                      <span class="stringliteral">&quot;pa_store(pixels,0);&quot;</span></div>
<div class="line"><a name="l13378"></a><span class="lineno">13378</span>&#160;                      <span class="stringliteral">&quot;just_ints = new Object();&quot;</span></div>
<div class="line"><a name="l13379"></a><span class="lineno">13379</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { just_ints[i] = i; }&quot;</span></div>
<div class="line"><a name="l13380"></a><span class="lineno">13380</span>&#160;                      <span class="stringliteral">&quot;pa_store(just_ints, 0);&quot;</span></div>
<div class="line"><a name="l13381"></a><span class="lineno">13381</span>&#160;                      <span class="stringliteral">&quot;pa_store(pixels,-128);&quot;</span></div>
<div class="line"><a name="l13382"></a><span class="lineno">13382</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13383"></a><span class="lineno">13383</span>&#160;                      <span class="stringliteral">&quot;for (var j = 0; j &lt; 256; j++) { sum += pixels[j]; }&quot;</span></div>
<div class="line"><a name="l13384"></a><span class="lineno">13384</span>&#160;                      <span class="stringliteral">&quot;sum&quot;</span>);</div>
<div class="line"><a name="l13385"></a><span class="lineno">13385</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(65280, result-&gt;Int32Value());</div>
<div class="line"><a name="l13386"></a><span class="lineno">13386</span>&#160;</div>
<div class="line"><a name="l13387"></a><span class="lineno">13387</span>&#160;  <span class="comment">// Make sure that the generic keyed store stub clamps pixel array values</span></div>
<div class="line"><a name="l13388"></a><span class="lineno">13388</span>&#160;  <span class="comment">// correctly.</span></div>
<div class="line"><a name="l13389"></a><span class="lineno">13389</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_store(p) {&quot;</span></div>
<div class="line"><a name="l13390"></a><span class="lineno">13390</span>&#160;                      <span class="stringliteral">&quot;  for (var j = 0; j &lt; 256; j++) { p[j] = j * 2; }&quot;</span></div>
<div class="line"><a name="l13391"></a><span class="lineno">13391</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13392"></a><span class="lineno">13392</span>&#160;                      <span class="stringliteral">&quot;pa_store(pixels);&quot;</span></div>
<div class="line"><a name="l13393"></a><span class="lineno">13393</span>&#160;                      <span class="stringliteral">&quot;just_ints = new Object();&quot;</span></div>
<div class="line"><a name="l13394"></a><span class="lineno">13394</span>&#160;                      <span class="stringliteral">&quot;pa_store(just_ints);&quot;</span></div>
<div class="line"><a name="l13395"></a><span class="lineno">13395</span>&#160;                      <span class="stringliteral">&quot;pa_store(pixels);&quot;</span></div>
<div class="line"><a name="l13396"></a><span class="lineno">13396</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13397"></a><span class="lineno">13397</span>&#160;                      <span class="stringliteral">&quot;for (var j = 0; j &lt; 256; j++) { sum += pixels[j]; }&quot;</span></div>
<div class="line"><a name="l13398"></a><span class="lineno">13398</span>&#160;                      <span class="stringliteral">&quot;sum&quot;</span>);</div>
<div class="line"><a name="l13399"></a><span class="lineno">13399</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(48896, result-&gt;Int32Value());</div>
<div class="line"><a name="l13400"></a><span class="lineno">13400</span>&#160;</div>
<div class="line"><a name="l13401"></a><span class="lineno">13401</span>&#160;  <span class="comment">// Make sure that pixel array loads are optimized by crankshaft.</span></div>
<div class="line"><a name="l13402"></a><span class="lineno">13402</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_load(p) {&quot;</span></div>
<div class="line"><a name="l13403"></a><span class="lineno">13403</span>&#160;                      <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l13404"></a><span class="lineno">13404</span>&#160;                      <span class="stringliteral">&quot;  for (var i=0; i&lt;256; ++i) {&quot;</span></div>
<div class="line"><a name="l13405"></a><span class="lineno">13405</span>&#160;                      <span class="stringliteral">&quot;    sum += p[i];&quot;</span></div>
<div class="line"><a name="l13406"></a><span class="lineno">13406</span>&#160;                      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13407"></a><span class="lineno">13407</span>&#160;                      <span class="stringliteral">&quot;  return sum; &quot;</span></div>
<div class="line"><a name="l13408"></a><span class="lineno">13408</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13409"></a><span class="lineno">13409</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { pixels[i] = i; }&quot;</span></div>
<div class="line"><a name="l13410"></a><span class="lineno">13410</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 5000; ++i) {&quot;</span></div>
<div class="line"><a name="l13411"></a><span class="lineno">13411</span>&#160;                      <span class="stringliteral">&quot;  result = pa_load(pixels);&quot;</span></div>
<div class="line"><a name="l13412"></a><span class="lineno">13412</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13413"></a><span class="lineno">13413</span>&#160;                      <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l13414"></a><span class="lineno">13414</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32640, result-&gt;Int32Value());</div>
<div class="line"><a name="l13415"></a><span class="lineno">13415</span>&#160;</div>
<div class="line"><a name="l13416"></a><span class="lineno">13416</span>&#160;  <span class="comment">// Make sure that pixel array stores are optimized by crankshaft.</span></div>
<div class="line"><a name="l13417"></a><span class="lineno">13417</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function pa_init(p) {&quot;</span></div>
<div class="line"><a name="l13418"></a><span class="lineno">13418</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 256; ++i) { p[i] = i; }&quot;</span></div>
<div class="line"><a name="l13419"></a><span class="lineno">13419</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13420"></a><span class="lineno">13420</span>&#160;                      <span class="stringliteral">&quot;function pa_load(p) {&quot;</span></div>
<div class="line"><a name="l13421"></a><span class="lineno">13421</span>&#160;                      <span class="stringliteral">&quot;  var sum = 0;&quot;</span></div>
<div class="line"><a name="l13422"></a><span class="lineno">13422</span>&#160;                      <span class="stringliteral">&quot;  for (var i=0; i&lt;256; ++i) {&quot;</span></div>
<div class="line"><a name="l13423"></a><span class="lineno">13423</span>&#160;                      <span class="stringliteral">&quot;    sum += p[i];&quot;</span></div>
<div class="line"><a name="l13424"></a><span class="lineno">13424</span>&#160;                      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13425"></a><span class="lineno">13425</span>&#160;                      <span class="stringliteral">&quot;  return sum; &quot;</span></div>
<div class="line"><a name="l13426"></a><span class="lineno">13426</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13427"></a><span class="lineno">13427</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 5000; ++i) {&quot;</span></div>
<div class="line"><a name="l13428"></a><span class="lineno">13428</span>&#160;                      <span class="stringliteral">&quot;  pa_init(pixels);&quot;</span></div>
<div class="line"><a name="l13429"></a><span class="lineno">13429</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13430"></a><span class="lineno">13430</span>&#160;                      <span class="stringliteral">&quot;result = pa_load(pixels);&quot;</span></div>
<div class="line"><a name="l13431"></a><span class="lineno">13431</span>&#160;                      <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l13432"></a><span class="lineno">13432</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32640, result-&gt;Int32Value());</div>
<div class="line"><a name="l13433"></a><span class="lineno">13433</span>&#160;</div>
<div class="line"><a name="l13434"></a><span class="lineno">13434</span>&#160;  free(pixel_data);</div>
<div class="line"><a name="l13435"></a><span class="lineno">13435</span>&#160;}</div>
<div class="line"><a name="l13436"></a><span class="lineno">13436</span>&#160;</div>
<div class="line"><a name="l13437"></a><span class="lineno">13437</span>&#160;</div>
<div class="line"><a name="l13438"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7030fd633e20a2b3c85bb4c51de1c04c">13438</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(PixelArrayInfo) {</div>
<div class="line"><a name="l13439"></a><span class="lineno">13439</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l13440"></a><span class="lineno">13440</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l13441"></a><span class="lineno">13441</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> size = 0; size &lt; 100; size += 10) {</div>
<div class="line"><a name="l13442"></a><span class="lineno">13442</span>&#160;    uint8_t* pixel_data = <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(malloc(size));</div>
<div class="line"><a name="l13443"></a><span class="lineno">13443</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13444"></a><span class="lineno">13444</span>&#160;    obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9478153d582c834065446a6f0ac86f32">SetIndexedPropertiesToPixelData</a>(pixel_data, size);</div>
<div class="line"><a name="l13445"></a><span class="lineno">13445</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a45e93540d4bdca7c0071ef6467a7941c">HasIndexedPropertiesInPixelData</a>());</div>
<div class="line"><a name="l13446"></a><span class="lineno">13446</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(pixel_data, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a06849058029857834d4d07b57477f9a0">GetIndexedPropertiesPixelData</a>());</div>
<div class="line"><a name="l13447"></a><span class="lineno">13447</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(size, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa68436646284d47615c071a30a52ac76">GetIndexedPropertiesPixelDataLength</a>());</div>
<div class="line"><a name="l13448"></a><span class="lineno">13448</span>&#160;    free(pixel_data);</div>
<div class="line"><a name="l13449"></a><span class="lineno">13449</span>&#160;  }</div>
<div class="line"><a name="l13450"></a><span class="lineno">13450</span>&#160;}</div>
<div class="line"><a name="l13451"></a><span class="lineno">13451</span>&#160;</div>
<div class="line"><a name="l13452"></a><span class="lineno">13452</span>&#160;</div>
<div class="line"><a name="l13453"></a><span class="lineno">13453</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NotHandledIndexedPropertyGetter(</div>
<div class="line"><a name="l13454"></a><span class="lineno">13454</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l13455"></a><span class="lineno">13455</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l13456"></a><span class="lineno">13456</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l13457"></a><span class="lineno">13457</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l13458"></a><span class="lineno">13458</span>&#160;}</div>
<div class="line"><a name="l13459"></a><span class="lineno">13459</span>&#160;</div>
<div class="line"><a name="l13460"></a><span class="lineno">13460</span>&#160;</div>
<div class="line"><a name="l13461"></a><span class="lineno">13461</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NotHandledIndexedPropertySetter(</div>
<div class="line"><a name="l13462"></a><span class="lineno">13462</span>&#160;    uint32_t index,</div>
<div class="line"><a name="l13463"></a><span class="lineno">13463</span>&#160;    Local&lt;Value&gt; value,</div>
<div class="line"><a name="l13464"></a><span class="lineno">13464</span>&#160;    <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l13465"></a><span class="lineno">13465</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l13466"></a><span class="lineno">13466</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l13467"></a><span class="lineno">13467</span>&#160;}</div>
<div class="line"><a name="l13468"></a><span class="lineno">13468</span>&#160;</div>
<div class="line"><a name="l13469"></a><span class="lineno">13469</span>&#160;</div>
<div class="line"><a name="l13470"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af88251b64d9ea732d33ad620df90b283">13470</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(PixelArrayWithInterceptor) {</div>
<div class="line"><a name="l13471"></a><span class="lineno">13471</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l13472"></a><span class="lineno">13472</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l13473"></a><span class="lineno">13473</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kElementCount = 260;</div>
<div class="line"><a name="l13474"></a><span class="lineno">13474</span>&#160;  uint8_t* pixel_data = <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(malloc(kElementCount));</div>
<div class="line"><a name="l13475"></a><span class="lineno">13475</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::ExternalPixelArray&gt;</a> pixels =</div>
<div class="line"><a name="l13476"></a><span class="lineno">13476</span>&#160;      <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">i::Handle&lt;i::ExternalPixelArray&gt;::cast</a>(</div>
<div class="line"><a name="l13477"></a><span class="lineno">13477</span>&#160;          <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;NewExternalArray(kElementCount,</div>
<div class="line"><a name="l13478"></a><span class="lineno">13478</span>&#160;                                    <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>,</div>
<div class="line"><a name="l13479"></a><span class="lineno">13479</span>&#160;                                    pixel_data));</div>
<div class="line"><a name="l13480"></a><span class="lineno">13480</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kElementCount; i++) {</div>
<div class="line"><a name="l13481"></a><span class="lineno">13481</span>&#160;    pixels-&gt;set(i, i % 256);</div>
<div class="line"><a name="l13482"></a><span class="lineno">13482</span>&#160;  }</div>
<div class="line"><a name="l13483"></a><span class="lineno">13483</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> templ = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l13484"></a><span class="lineno">13484</span>&#160;  templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ad3baf9d0959cbc49663a33718d7dd8a3">SetIndexedPropertyHandler</a>(NotHandledIndexedPropertyGetter,</div>
<div class="line"><a name="l13485"></a><span class="lineno">13485</span>&#160;                                   NotHandledIndexedPropertySetter);</div>
<div class="line"><a name="l13486"></a><span class="lineno">13486</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = templ-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">NewInstance</a>();</div>
<div class="line"><a name="l13487"></a><span class="lineno">13487</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a9478153d582c834065446a6f0ac86f32">SetIndexedPropertiesToPixelData</a>(pixel_data, kElementCount);</div>
<div class="line"><a name="l13488"></a><span class="lineno">13488</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;pixels&quot;</span>), obj);</div>
<div class="line"><a name="l13489"></a><span class="lineno">13489</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> result = CompileRun(<span class="stringliteral">&quot;pixels[1]&quot;</span>);</div>
<div class="line"><a name="l13490"></a><span class="lineno">13490</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l13491"></a><span class="lineno">13491</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13492"></a><span class="lineno">13492</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13493"></a><span class="lineno">13493</span>&#160;                      <span class="stringliteral">&quot;  sum += pixels[i] = pixels[i] = -i;&quot;</span></div>
<div class="line"><a name="l13494"></a><span class="lineno">13494</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13495"></a><span class="lineno">13495</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13496"></a><span class="lineno">13496</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13497"></a><span class="lineno">13497</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;pixels.hasOwnProperty(&#39;1&#39;)&quot;</span>);</div>
<div class="line"><a name="l13498"></a><span class="lineno">13498</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;BooleanValue());</div>
<div class="line"><a name="l13499"></a><span class="lineno">13499</span>&#160;  free(pixel_data);</div>
<div class="line"><a name="l13500"></a><span class="lineno">13500</span>&#160;}</div>
<div class="line"><a name="l13501"></a><span class="lineno">13501</span>&#160;</div>
<div class="line"><a name="l13502"></a><span class="lineno">13502</span>&#160;</div>
<div class="line"><a name="l13503"></a><span class="lineno">13503</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> ExternalArrayElementSize(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ab">v8::ExternalArrayType</a> array_type) {</div>
<div class="line"><a name="l13504"></a><span class="lineno">13504</span>&#160;  <span class="keywordflow">switch</span> (array_type) {</div>
<div class="line"><a name="l13505"></a><span class="lineno">13505</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ababd033480d69e1512a6db34e87876b480">v8::kExternalByteArray</a>:</div>
<div class="line"><a name="l13506"></a><span class="lineno">13506</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaa5e2c0b6fc91ef63346d8868785a7380">v8::kExternalUnsignedByteArray</a>:</div>
<div class="line"><a name="l13507"></a><span class="lineno">13507</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>:</div>
<div class="line"><a name="l13508"></a><span class="lineno">13508</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l13509"></a><span class="lineno">13509</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13510"></a><span class="lineno">13510</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaacd0bd2f6b7d36994c497006da9bb9a1">v8::kExternalShortArray</a>:</div>
<div class="line"><a name="l13511"></a><span class="lineno">13511</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba886c1ba4452a68ef7bf383f0e4b94b6e">v8::kExternalUnsignedShortArray</a>:</div>
<div class="line"><a name="l13512"></a><span class="lineno">13512</span>&#160;      <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l13513"></a><span class="lineno">13513</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13514"></a><span class="lineno">13514</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba01beba98d449b55760d59b1aa8453218">v8::kExternalIntArray</a>:</div>
<div class="line"><a name="l13515"></a><span class="lineno">13515</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaab72dcb950cf25173070d51aded5e25a">v8::kExternalUnsignedIntArray</a>:</div>
<div class="line"><a name="l13516"></a><span class="lineno">13516</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189">v8::kExternalFloatArray</a>:</div>
<div class="line"><a name="l13517"></a><span class="lineno">13517</span>&#160;      <span class="keywordflow">return</span> 4;</div>
<div class="line"><a name="l13518"></a><span class="lineno">13518</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13519"></a><span class="lineno">13519</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247">v8::kExternalDoubleArray</a>:</div>
<div class="line"><a name="l13520"></a><span class="lineno">13520</span>&#160;      <span class="keywordflow">return</span> 8;</div>
<div class="line"><a name="l13521"></a><span class="lineno">13521</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13522"></a><span class="lineno">13522</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l13523"></a><span class="lineno">13523</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l13524"></a><span class="lineno">13524</span>&#160;      <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l13525"></a><span class="lineno">13525</span>&#160;  }</div>
<div class="line"><a name="l13526"></a><span class="lineno">13526</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l13527"></a><span class="lineno">13527</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l13528"></a><span class="lineno">13528</span>&#160;}</div>
<div class="line"><a name="l13529"></a><span class="lineno">13529</span>&#160;</div>
<div class="line"><a name="l13530"></a><span class="lineno">13530</span>&#160;</div>
<div class="line"><a name="l13531"></a><span class="lineno">13531</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> ExternalArrayClass, <span class="keyword">class</span> ElementType&gt;</div>
<div class="line"><a name="l13532"></a><span class="lineno">13532</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ExternalArrayTestHelper(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ab">v8::ExternalArrayType</a> array_type,</div>
<div class="line"><a name="l13533"></a><span class="lineno">13533</span>&#160;                                    int64_t low,</div>
<div class="line"><a name="l13534"></a><span class="lineno">13534</span>&#160;                                    int64_t high) {</div>
<div class="line"><a name="l13535"></a><span class="lineno">13535</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l13536"></a><span class="lineno">13536</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l13537"></a><span class="lineno">13537</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kElementCount = 40;</div>
<div class="line"><a name="l13538"></a><span class="lineno">13538</span>&#160;  <span class="keywordtype">int</span> element_size = ExternalArrayElementSize(array_type);</div>
<div class="line"><a name="l13539"></a><span class="lineno">13539</span>&#160;  ElementType* array_data =</div>
<div class="line"><a name="l13540"></a><span class="lineno">13540</span>&#160;      <span class="keyword">static_cast&lt;</span>ElementType*<span class="keyword">&gt;</span>(malloc(kElementCount * element_size));</div>
<div class="line"><a name="l13541"></a><span class="lineno">13541</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;ExternalArrayClass&gt;</a> array =</div>
<div class="line"><a name="l13542"></a><span class="lineno">13542</span>&#160;      <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">i::Handle&lt;ExternalArrayClass&gt;::cast</a>(</div>
<div class="line"><a name="l13543"></a><span class="lineno">13543</span>&#160;          <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;NewExternalArray(kElementCount, array_type, array_data));</div>
<div class="line"><a name="l13544"></a><span class="lineno">13544</span>&#160;  <span class="comment">// Force GC to trigger verification.</span></div>
<div class="line"><a name="l13545"></a><span class="lineno">13545</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l13546"></a><span class="lineno">13546</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kElementCount; i++) {</div>
<div class="line"><a name="l13547"></a><span class="lineno">13547</span>&#160;    array-&gt;set(i, static_cast&lt;ElementType&gt;(i));</div>
<div class="line"><a name="l13548"></a><span class="lineno">13548</span>&#160;  }</div>
<div class="line"><a name="l13549"></a><span class="lineno">13549</span>&#160;  <span class="comment">// Force GC to trigger verification.</span></div>
<div class="line"><a name="l13550"></a><span class="lineno">13550</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l13551"></a><span class="lineno">13551</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kElementCount; i++) {</div>
<div class="line"><a name="l13552"></a><span class="lineno">13552</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(i),</div>
<div class="line"><a name="l13553"></a><span class="lineno">13553</span>&#160;             static_cast&lt;int64_t&gt;(array-&gt;get_scalar(i)));</div>
<div class="line"><a name="l13554"></a><span class="lineno">13554</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int64_t&gt;(i), static_cast&lt;int64_t&gt;(array_data[i]));</div>
<div class="line"><a name="l13555"></a><span class="lineno">13555</span>&#160;  }</div>
<div class="line"><a name="l13556"></a><span class="lineno">13556</span>&#160;</div>
<div class="line"><a name="l13557"></a><span class="lineno">13557</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13558"></a><span class="lineno">13558</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::JSObject&gt;</a> jsobj = v8::Utils::OpenHandle(*obj);</div>
<div class="line"><a name="l13559"></a><span class="lineno">13559</span>&#160;  <span class="comment">// Set the elements to be the external array.</span></div>
<div class="line"><a name="l13560"></a><span class="lineno">13560</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(array_data,</div>
<div class="line"><a name="l13561"></a><span class="lineno">13561</span>&#160;                                               array_type,</div>
<div class="line"><a name="l13562"></a><span class="lineno">13562</span>&#160;                                               kElementCount);</div>
<div class="line"><a name="l13563"></a><span class="lineno">13563</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(</div>
<div class="line"><a name="l13564"></a><span class="lineno">13564</span>&#160;      1, static_cast&lt;int&gt;(jsobj-&gt;GetElement(1)-&gt;ToObjectChecked()-&gt;Number()));</div>
<div class="line"><a name="l13565"></a><span class="lineno">13565</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;field&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(1503));</div>
<div class="line"><a name="l13566"></a><span class="lineno">13566</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ext_array&quot;</span>), obj);</div>
<div class="line"><a name="l13567"></a><span class="lineno">13567</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> result = CompileRun(<span class="stringliteral">&quot;ext_array.field&quot;</span>);</div>
<div class="line"><a name="l13568"></a><span class="lineno">13568</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1503, result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l13569"></a><span class="lineno">13569</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;ext_array[1]&quot;</span>);</div>
<div class="line"><a name="l13570"></a><span class="lineno">13570</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, result-&gt;Int32Value());</div>
<div class="line"><a name="l13571"></a><span class="lineno">13571</span>&#160;</div>
<div class="line"><a name="l13572"></a><span class="lineno">13572</span>&#160;  <span class="comment">// Check pass through of assigned smis</span></div>
<div class="line"><a name="l13573"></a><span class="lineno">13573</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13574"></a><span class="lineno">13574</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13575"></a><span class="lineno">13575</span>&#160;                      <span class="stringliteral">&quot;  sum += ext_array[i] = ext_array[i] = -i;&quot;</span></div>
<div class="line"><a name="l13576"></a><span class="lineno">13576</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13577"></a><span class="lineno">13577</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13578"></a><span class="lineno">13578</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13579"></a><span class="lineno">13579</span>&#160;</div>
<div class="line"><a name="l13580"></a><span class="lineno">13580</span>&#160;  <span class="comment">// Check assigned smis</span></div>
<div class="line"><a name="l13581"></a><span class="lineno">13581</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13582"></a><span class="lineno">13582</span>&#160;                      <span class="stringliteral">&quot;  ext_array[i] = i;&quot;</span></div>
<div class="line"><a name="l13583"></a><span class="lineno">13583</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13584"></a><span class="lineno">13584</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13585"></a><span class="lineno">13585</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13586"></a><span class="lineno">13586</span>&#160;                      <span class="stringliteral">&quot;  sum += ext_array[i];&quot;</span></div>
<div class="line"><a name="l13587"></a><span class="lineno">13587</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13588"></a><span class="lineno">13588</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13589"></a><span class="lineno">13589</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13590"></a><span class="lineno">13590</span>&#160;</div>
<div class="line"><a name="l13591"></a><span class="lineno">13591</span>&#160;  <span class="comment">// Check assigned smis in reverse order</span></div>
<div class="line"><a name="l13592"></a><span class="lineno">13592</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 8; --i &gt;= 0; ) {&quot;</span></div>
<div class="line"><a name="l13593"></a><span class="lineno">13593</span>&#160;                      <span class="stringliteral">&quot;  ext_array[i] = i;&quot;</span></div>
<div class="line"><a name="l13594"></a><span class="lineno">13594</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13595"></a><span class="lineno">13595</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13596"></a><span class="lineno">13596</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13597"></a><span class="lineno">13597</span>&#160;                      <span class="stringliteral">&quot;  sum += ext_array[i];&quot;</span></div>
<div class="line"><a name="l13598"></a><span class="lineno">13598</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13599"></a><span class="lineno">13599</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13600"></a><span class="lineno">13600</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13601"></a><span class="lineno">13601</span>&#160;</div>
<div class="line"><a name="l13602"></a><span class="lineno">13602</span>&#160;  <span class="comment">// Check pass through of assigned HeapNumbers</span></div>
<div class="line"><a name="l13603"></a><span class="lineno">13603</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13604"></a><span class="lineno">13604</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 16; i+=2) {&quot;</span></div>
<div class="line"><a name="l13605"></a><span class="lineno">13605</span>&#160;                      <span class="stringliteral">&quot;  sum += ext_array[i] = ext_array[i] = (-i * 0.5);&quot;</span></div>
<div class="line"><a name="l13606"></a><span class="lineno">13606</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13607"></a><span class="lineno">13607</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13608"></a><span class="lineno">13608</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(-28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13609"></a><span class="lineno">13609</span>&#160;</div>
<div class="line"><a name="l13610"></a><span class="lineno">13610</span>&#160;  <span class="comment">// Check assigned HeapNumbers</span></div>
<div class="line"><a name="l13611"></a><span class="lineno">13611</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 16; i+=2) {&quot;</span></div>
<div class="line"><a name="l13612"></a><span class="lineno">13612</span>&#160;                      <span class="stringliteral">&quot;  ext_array[i] = (i * 0.5);&quot;</span></div>
<div class="line"><a name="l13613"></a><span class="lineno">13613</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13614"></a><span class="lineno">13614</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13615"></a><span class="lineno">13615</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 16; i+=2) {&quot;</span></div>
<div class="line"><a name="l13616"></a><span class="lineno">13616</span>&#160;                      <span class="stringliteral">&quot;  sum += ext_array[i];&quot;</span></div>
<div class="line"><a name="l13617"></a><span class="lineno">13617</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13618"></a><span class="lineno">13618</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13619"></a><span class="lineno">13619</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13620"></a><span class="lineno">13620</span>&#160;</div>
<div class="line"><a name="l13621"></a><span class="lineno">13621</span>&#160;  <span class="comment">// Check assigned HeapNumbers in reverse order</span></div>
<div class="line"><a name="l13622"></a><span class="lineno">13622</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 14; i &gt;= 0; i-=2) {&quot;</span></div>
<div class="line"><a name="l13623"></a><span class="lineno">13623</span>&#160;                      <span class="stringliteral">&quot;  ext_array[i] = (i * 0.5);&quot;</span></div>
<div class="line"><a name="l13624"></a><span class="lineno">13624</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13625"></a><span class="lineno">13625</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13626"></a><span class="lineno">13626</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 16; i+=2) {&quot;</span></div>
<div class="line"><a name="l13627"></a><span class="lineno">13627</span>&#160;                      <span class="stringliteral">&quot;  sum += ext_array[i];&quot;</span></div>
<div class="line"><a name="l13628"></a><span class="lineno">13628</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13629"></a><span class="lineno">13629</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13630"></a><span class="lineno">13630</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13631"></a><span class="lineno">13631</span>&#160;</div>
<div class="line"><a name="l13632"></a><span class="lineno">13632</span>&#160;  <a class="code" href="../../da/de2/classv8_1_1internal_1_1_scoped_vector.html">i::ScopedVector&lt;char&gt;</a> test_buf(1024);</div>
<div class="line"><a name="l13633"></a><span class="lineno">13633</span>&#160;</div>
<div class="line"><a name="l13634"></a><span class="lineno">13634</span>&#160;  <span class="comment">// Check legal boundary conditions.</span></div>
<div class="line"><a name="l13635"></a><span class="lineno">13635</span>&#160;  <span class="comment">// The repeated loads and stores ensure the ICs are exercised.</span></div>
<div class="line"><a name="l13636"></a><span class="lineno">13636</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* boundary_program =</div>
<div class="line"><a name="l13637"></a><span class="lineno">13637</span>&#160;      <span class="stringliteral">&quot;var res = 0;&quot;</span></div>
<div class="line"><a name="l13638"></a><span class="lineno">13638</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; 16; i++) {&quot;</span></div>
<div class="line"><a name="l13639"></a><span class="lineno">13639</span>&#160;      <span class="stringliteral">&quot;  ext_array[i] = %lld;&quot;</span></div>
<div class="line"><a name="l13640"></a><span class="lineno">13640</span>&#160;      <span class="stringliteral">&quot;  if (i &gt; 8) {&quot;</span></div>
<div class="line"><a name="l13641"></a><span class="lineno">13641</span>&#160;      <span class="stringliteral">&quot;    res = ext_array[i];&quot;</span></div>
<div class="line"><a name="l13642"></a><span class="lineno">13642</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13643"></a><span class="lineno">13643</span>&#160;      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13644"></a><span class="lineno">13644</span>&#160;      <span class="stringliteral">&quot;res;&quot;</span>;</div>
<div class="line"><a name="l13645"></a><span class="lineno">13645</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(test_buf,</div>
<div class="line"><a name="l13646"></a><span class="lineno">13646</span>&#160;                  boundary_program,</div>
<div class="line"><a name="l13647"></a><span class="lineno">13647</span>&#160;                  low);</div>
<div class="line"><a name="l13648"></a><span class="lineno">13648</span>&#160;  result = CompileRun(test_buf.start());</div>
<div class="line"><a name="l13649"></a><span class="lineno">13649</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(low, result-&gt;IntegerValue());</div>
<div class="line"><a name="l13650"></a><span class="lineno">13650</span>&#160;</div>
<div class="line"><a name="l13651"></a><span class="lineno">13651</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(test_buf,</div>
<div class="line"><a name="l13652"></a><span class="lineno">13652</span>&#160;                  boundary_program,</div>
<div class="line"><a name="l13653"></a><span class="lineno">13653</span>&#160;                  high);</div>
<div class="line"><a name="l13654"></a><span class="lineno">13654</span>&#160;  result = CompileRun(test_buf.start());</div>
<div class="line"><a name="l13655"></a><span class="lineno">13655</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(high, result-&gt;IntegerValue());</div>
<div class="line"><a name="l13656"></a><span class="lineno">13656</span>&#160;</div>
<div class="line"><a name="l13657"></a><span class="lineno">13657</span>&#160;  <span class="comment">// Check misprediction of type in IC.</span></div>
<div class="line"><a name="l13658"></a><span class="lineno">13658</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var tmp_array = ext_array;&quot;</span></div>
<div class="line"><a name="l13659"></a><span class="lineno">13659</span>&#160;                      <span class="stringliteral">&quot;var sum = 0;&quot;</span></div>
<div class="line"><a name="l13660"></a><span class="lineno">13660</span>&#160;                      <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13661"></a><span class="lineno">13661</span>&#160;                      <span class="stringliteral">&quot;  tmp_array[i] = i;&quot;</span></div>
<div class="line"><a name="l13662"></a><span class="lineno">13662</span>&#160;                      <span class="stringliteral">&quot;  sum += tmp_array[i];&quot;</span></div>
<div class="line"><a name="l13663"></a><span class="lineno">13663</span>&#160;                      <span class="stringliteral">&quot;  if (i == 4) {&quot;</span></div>
<div class="line"><a name="l13664"></a><span class="lineno">13664</span>&#160;                      <span class="stringliteral">&quot;    tmp_array = {};&quot;</span></div>
<div class="line"><a name="l13665"></a><span class="lineno">13665</span>&#160;                      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13666"></a><span class="lineno">13666</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13667"></a><span class="lineno">13667</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13668"></a><span class="lineno">13668</span>&#160;  <span class="comment">// Force GC to trigger verification.</span></div>
<div class="line"><a name="l13669"></a><span class="lineno">13669</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l13670"></a><span class="lineno">13670</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(28, result-&gt;Int32Value());</div>
<div class="line"><a name="l13671"></a><span class="lineno">13671</span>&#160;</div>
<div class="line"><a name="l13672"></a><span class="lineno">13672</span>&#160;  <span class="comment">// Make sure out-of-range loads do not throw.</span></div>
<div class="line"><a name="l13673"></a><span class="lineno">13673</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(test_buf,</div>
<div class="line"><a name="l13674"></a><span class="lineno">13674</span>&#160;                  <span class="stringliteral">&quot;var caught_exception = false;&quot;</span></div>
<div class="line"><a name="l13675"></a><span class="lineno">13675</span>&#160;                  <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l13676"></a><span class="lineno">13676</span>&#160;                  <span class="stringliteral">&quot;  ext_array[%d];&quot;</span></div>
<div class="line"><a name="l13677"></a><span class="lineno">13677</span>&#160;                  <span class="stringliteral">&quot;} catch (e) {&quot;</span></div>
<div class="line"><a name="l13678"></a><span class="lineno">13678</span>&#160;                  <span class="stringliteral">&quot;  caught_exception = true;&quot;</span></div>
<div class="line"><a name="l13679"></a><span class="lineno">13679</span>&#160;                  <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13680"></a><span class="lineno">13680</span>&#160;                  <span class="stringliteral">&quot;caught_exception;&quot;</span>,</div>
<div class="line"><a name="l13681"></a><span class="lineno">13681</span>&#160;                  kElementCount);</div>
<div class="line"><a name="l13682"></a><span class="lineno">13682</span>&#160;  result = CompileRun(test_buf.start());</div>
<div class="line"><a name="l13683"></a><span class="lineno">13683</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, result-&gt;BooleanValue());</div>
<div class="line"><a name="l13684"></a><span class="lineno">13684</span>&#160;</div>
<div class="line"><a name="l13685"></a><span class="lineno">13685</span>&#160;  <span class="comment">// Make sure out-of-range stores do not throw.</span></div>
<div class="line"><a name="l13686"></a><span class="lineno">13686</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(test_buf,</div>
<div class="line"><a name="l13687"></a><span class="lineno">13687</span>&#160;                  <span class="stringliteral">&quot;var caught_exception = false;&quot;</span></div>
<div class="line"><a name="l13688"></a><span class="lineno">13688</span>&#160;                  <span class="stringliteral">&quot;try {&quot;</span></div>
<div class="line"><a name="l13689"></a><span class="lineno">13689</span>&#160;                  <span class="stringliteral">&quot;  ext_array[%d] = 1;&quot;</span></div>
<div class="line"><a name="l13690"></a><span class="lineno">13690</span>&#160;                  <span class="stringliteral">&quot;} catch (e) {&quot;</span></div>
<div class="line"><a name="l13691"></a><span class="lineno">13691</span>&#160;                  <span class="stringliteral">&quot;  caught_exception = true;&quot;</span></div>
<div class="line"><a name="l13692"></a><span class="lineno">13692</span>&#160;                  <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13693"></a><span class="lineno">13693</span>&#160;                  <span class="stringliteral">&quot;caught_exception;&quot;</span>,</div>
<div class="line"><a name="l13694"></a><span class="lineno">13694</span>&#160;                  kElementCount);</div>
<div class="line"><a name="l13695"></a><span class="lineno">13695</span>&#160;  result = CompileRun(test_buf.start());</div>
<div class="line"><a name="l13696"></a><span class="lineno">13696</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, result-&gt;BooleanValue());</div>
<div class="line"><a name="l13697"></a><span class="lineno">13697</span>&#160;</div>
<div class="line"><a name="l13698"></a><span class="lineno">13698</span>&#160;  <span class="comment">// Check other boundary conditions, values and operations.</span></div>
<div class="line"><a name="l13699"></a><span class="lineno">13699</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13700"></a><span class="lineno">13700</span>&#160;                      <span class="stringliteral">&quot;  ext_array[7] = undefined;&quot;</span></div>
<div class="line"><a name="l13701"></a><span class="lineno">13701</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13702"></a><span class="lineno">13702</span>&#160;                      <span class="stringliteral">&quot;ext_array[7];&quot;</span>);</div>
<div class="line"><a name="l13703"></a><span class="lineno">13703</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13704"></a><span class="lineno">13704</span>&#160;  <span class="keywordflow">if</span> (array_type == <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247">v8::kExternalDoubleArray</a> ||</div>
<div class="line"><a name="l13705"></a><span class="lineno">13705</span>&#160;      array_type == <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189">v8::kExternalFloatArray</a>) {</div>
<div class="line"><a name="l13706"></a><span class="lineno">13706</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(</div>
<div class="line"><a name="l13707"></a><span class="lineno">13707</span>&#160;        static_cast&lt;int&gt;(<a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a2ad80cdfa895b81968050fa753ecda20">i::OS::nan_value</a>()),</div>
<div class="line"><a name="l13708"></a><span class="lineno">13708</span>&#160;        static_cast&lt;int&gt;(jsobj-&gt;GetElement(7)-&gt;ToObjectChecked()-&gt;Number()));</div>
<div class="line"><a name="l13709"></a><span class="lineno">13709</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13710"></a><span class="lineno">13710</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, static_cast&lt;int&gt;(</div>
<div class="line"><a name="l13711"></a><span class="lineno">13711</span>&#160;        jsobj-&gt;GetElement(7)-&gt;ToObjectChecked()-&gt;Number()));</div>
<div class="line"><a name="l13712"></a><span class="lineno">13712</span>&#160;  }</div>
<div class="line"><a name="l13713"></a><span class="lineno">13713</span>&#160;</div>
<div class="line"><a name="l13714"></a><span class="lineno">13714</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13715"></a><span class="lineno">13715</span>&#160;                      <span class="stringliteral">&quot;  ext_array[6] = &#39;2.3&#39;;&quot;</span></div>
<div class="line"><a name="l13716"></a><span class="lineno">13716</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13717"></a><span class="lineno">13717</span>&#160;                      <span class="stringliteral">&quot;ext_array[6];&quot;</span>);</div>
<div class="line"><a name="l13718"></a><span class="lineno">13718</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, result-&gt;Int32Value());</div>
<div class="line"><a name="l13719"></a><span class="lineno">13719</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(</div>
<div class="line"><a name="l13720"></a><span class="lineno">13720</span>&#160;      2, static_cast&lt;int&gt;(jsobj-&gt;GetElement(6)-&gt;ToObjectChecked()-&gt;Number()));</div>
<div class="line"><a name="l13721"></a><span class="lineno">13721</span>&#160;</div>
<div class="line"><a name="l13722"></a><span class="lineno">13722</span>&#160;  <span class="keywordflow">if</span> (array_type != <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189">v8::kExternalFloatArray</a> &amp;&amp;</div>
<div class="line"><a name="l13723"></a><span class="lineno">13723</span>&#160;      array_type != <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247">v8::kExternalDoubleArray</a>) {</div>
<div class="line"><a name="l13724"></a><span class="lineno">13724</span>&#160;    <span class="comment">// Though the specification doesn&#39;t state it, be explicit about</span></div>
<div class="line"><a name="l13725"></a><span class="lineno">13725</span>&#160;    <span class="comment">// converting NaNs and +/-Infinity to zero.</span></div>
<div class="line"><a name="l13726"></a><span class="lineno">13726</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13727"></a><span class="lineno">13727</span>&#160;                        <span class="stringliteral">&quot;  ext_array[i] = 5;&quot;</span></div>
<div class="line"><a name="l13728"></a><span class="lineno">13728</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13729"></a><span class="lineno">13729</span>&#160;                        <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13730"></a><span class="lineno">13730</span>&#160;                        <span class="stringliteral">&quot;  ext_array[i] = NaN;&quot;</span></div>
<div class="line"><a name="l13731"></a><span class="lineno">13731</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13732"></a><span class="lineno">13732</span>&#160;                        <span class="stringliteral">&quot;ext_array[5];&quot;</span>);</div>
<div class="line"><a name="l13733"></a><span class="lineno">13733</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13734"></a><span class="lineno">13734</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0,</div>
<div class="line"><a name="l13735"></a><span class="lineno">13735</span>&#160;             <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(5)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13736"></a><span class="lineno">13736</span>&#160;</div>
<div class="line"><a name="l13737"></a><span class="lineno">13737</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13738"></a><span class="lineno">13738</span>&#160;                        <span class="stringliteral">&quot;  ext_array[i] = 5;&quot;</span></div>
<div class="line"><a name="l13739"></a><span class="lineno">13739</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13740"></a><span class="lineno">13740</span>&#160;                        <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13741"></a><span class="lineno">13741</span>&#160;                        <span class="stringliteral">&quot;  ext_array[i] = Infinity;&quot;</span></div>
<div class="line"><a name="l13742"></a><span class="lineno">13742</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13743"></a><span class="lineno">13743</span>&#160;                        <span class="stringliteral">&quot;ext_array[5];&quot;</span>);</div>
<div class="line"><a name="l13744"></a><span class="lineno">13744</span>&#160;    <span class="keywordtype">int</span> expected_value =</div>
<div class="line"><a name="l13745"></a><span class="lineno">13745</span>&#160;        (array_type == <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>) ? 255 : 0;</div>
<div class="line"><a name="l13746"></a><span class="lineno">13746</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected_value, result-&gt;Int32Value());</div>
<div class="line"><a name="l13747"></a><span class="lineno">13747</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected_value,</div>
<div class="line"><a name="l13748"></a><span class="lineno">13748</span>&#160;             <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(5)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13749"></a><span class="lineno">13749</span>&#160;</div>
<div class="line"><a name="l13750"></a><span class="lineno">13750</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13751"></a><span class="lineno">13751</span>&#160;                        <span class="stringliteral">&quot;  ext_array[i] = 5;&quot;</span></div>
<div class="line"><a name="l13752"></a><span class="lineno">13752</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13753"></a><span class="lineno">13753</span>&#160;                        <span class="stringliteral">&quot;for (var i = 0; i &lt; 8; i++) {&quot;</span></div>
<div class="line"><a name="l13754"></a><span class="lineno">13754</span>&#160;                        <span class="stringliteral">&quot;  ext_array[i] = -Infinity;&quot;</span></div>
<div class="line"><a name="l13755"></a><span class="lineno">13755</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13756"></a><span class="lineno">13756</span>&#160;                        <span class="stringliteral">&quot;ext_array[5];&quot;</span>);</div>
<div class="line"><a name="l13757"></a><span class="lineno">13757</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, result-&gt;Int32Value());</div>
<div class="line"><a name="l13758"></a><span class="lineno">13758</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0,</div>
<div class="line"><a name="l13759"></a><span class="lineno">13759</span>&#160;             <a class="code" href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">i::Smi::cast</a>(jsobj-&gt;GetElement(5)-&gt;ToObjectChecked())-&gt;value());</div>
<div class="line"><a name="l13760"></a><span class="lineno">13760</span>&#160;</div>
<div class="line"><a name="l13761"></a><span class="lineno">13761</span>&#160;    <span class="comment">// Check truncation behavior of integral arrays.</span></div>
<div class="line"><a name="l13762"></a><span class="lineno">13762</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* unsigned_data =</div>
<div class="line"><a name="l13763"></a><span class="lineno">13763</span>&#160;        <span class="stringliteral">&quot;var source_data = [0.6, 10.6];&quot;</span></div>
<div class="line"><a name="l13764"></a><span class="lineno">13764</span>&#160;        <span class="stringliteral">&quot;var expected_results = [0, 10];&quot;</span>;</div>
<div class="line"><a name="l13765"></a><span class="lineno">13765</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* signed_data =</div>
<div class="line"><a name="l13766"></a><span class="lineno">13766</span>&#160;        <span class="stringliteral">&quot;var source_data = [0.6, 10.6, -0.6, -10.6];&quot;</span></div>
<div class="line"><a name="l13767"></a><span class="lineno">13767</span>&#160;        <span class="stringliteral">&quot;var expected_results = [0, 10, 0, -10];&quot;</span>;</div>
<div class="line"><a name="l13768"></a><span class="lineno">13768</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* pixel_data =</div>
<div class="line"><a name="l13769"></a><span class="lineno">13769</span>&#160;        <span class="stringliteral">&quot;var source_data = [0.6, 10.6];&quot;</span></div>
<div class="line"><a name="l13770"></a><span class="lineno">13770</span>&#160;        <span class="stringliteral">&quot;var expected_results = [1, 11];&quot;</span>;</div>
<div class="line"><a name="l13771"></a><span class="lineno">13771</span>&#160;    <span class="keywordtype">bool</span> is_unsigned =</div>
<div class="line"><a name="l13772"></a><span class="lineno">13772</span>&#160;        (array_type == <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaa5e2c0b6fc91ef63346d8868785a7380">v8::kExternalUnsignedByteArray</a> ||</div>
<div class="line"><a name="l13773"></a><span class="lineno">13773</span>&#160;         array_type == <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba886c1ba4452a68ef7bf383f0e4b94b6e">v8::kExternalUnsignedShortArray</a> ||</div>
<div class="line"><a name="l13774"></a><span class="lineno">13774</span>&#160;         array_type == <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaab72dcb950cf25173070d51aded5e25a">v8::kExternalUnsignedIntArray</a>);</div>
<div class="line"><a name="l13775"></a><span class="lineno">13775</span>&#160;    <span class="keywordtype">bool</span> is_pixel_data = array_type == <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>;</div>
<div class="line"><a name="l13776"></a><span class="lineno">13776</span>&#160;</div>
<div class="line"><a name="l13777"></a><span class="lineno">13777</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(test_buf,</div>
<div class="line"><a name="l13778"></a><span class="lineno">13778</span>&#160;                    <span class="stringliteral">&quot;%s&quot;</span></div>
<div class="line"><a name="l13779"></a><span class="lineno">13779</span>&#160;                    <span class="stringliteral">&quot;var all_passed = true;&quot;</span></div>
<div class="line"><a name="l13780"></a><span class="lineno">13780</span>&#160;                    <span class="stringliteral">&quot;for (var i = 0; i &lt; source_data.length; i++) {&quot;</span></div>
<div class="line"><a name="l13781"></a><span class="lineno">13781</span>&#160;                    <span class="stringliteral">&quot;  for (var j = 0; j &lt; 8; j++) {&quot;</span></div>
<div class="line"><a name="l13782"></a><span class="lineno">13782</span>&#160;                    <span class="stringliteral">&quot;    ext_array[j] = source_data[i];&quot;</span></div>
<div class="line"><a name="l13783"></a><span class="lineno">13783</span>&#160;                    <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13784"></a><span class="lineno">13784</span>&#160;                    <span class="stringliteral">&quot;  all_passed = all_passed &amp;&amp;&quot;</span></div>
<div class="line"><a name="l13785"></a><span class="lineno">13785</span>&#160;                    <span class="stringliteral">&quot;               (ext_array[5] == expected_results[i]);&quot;</span></div>
<div class="line"><a name="l13786"></a><span class="lineno">13786</span>&#160;                    <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13787"></a><span class="lineno">13787</span>&#160;                    <span class="stringliteral">&quot;all_passed;&quot;</span>,</div>
<div class="line"><a name="l13788"></a><span class="lineno">13788</span>&#160;                    (is_unsigned ?</div>
<div class="line"><a name="l13789"></a><span class="lineno">13789</span>&#160;                         unsigned_data :</div>
<div class="line"><a name="l13790"></a><span class="lineno">13790</span>&#160;                         (is_pixel_data ? pixel_data : signed_data)));</div>
<div class="line"><a name="l13791"></a><span class="lineno">13791</span>&#160;    result = CompileRun(test_buf.start());</div>
<div class="line"><a name="l13792"></a><span class="lineno">13792</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, result-&gt;BooleanValue());</div>
<div class="line"><a name="l13793"></a><span class="lineno">13793</span>&#160;  }</div>
<div class="line"><a name="l13794"></a><span class="lineno">13794</span>&#160;</div>
<div class="line"><a name="l13795"></a><span class="lineno">13795</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; kElementCount; i++) {</div>
<div class="line"><a name="l13796"></a><span class="lineno">13796</span>&#160;    array-&gt;set(i, static_cast&lt;ElementType&gt;(i));</div>
<div class="line"><a name="l13797"></a><span class="lineno">13797</span>&#160;  }</div>
<div class="line"><a name="l13798"></a><span class="lineno">13798</span>&#160;  <span class="comment">// Test complex assignments</span></div>
<div class="line"><a name="l13799"></a><span class="lineno">13799</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function ee_op_test_complex_func(sum) {&quot;</span></div>
<div class="line"><a name="l13800"></a><span class="lineno">13800</span>&#160;                      <span class="stringliteral">&quot; for (var i = 0; i &lt; 40; ++i) {&quot;</span></div>
<div class="line"><a name="l13801"></a><span class="lineno">13801</span>&#160;                      <span class="stringliteral">&quot;   sum += (ext_array[i] += 1);&quot;</span></div>
<div class="line"><a name="l13802"></a><span class="lineno">13802</span>&#160;                      <span class="stringliteral">&quot;   sum += (ext_array[i] -= 1);&quot;</span></div>
<div class="line"><a name="l13803"></a><span class="lineno">13803</span>&#160;                      <span class="stringliteral">&quot; } &quot;</span></div>
<div class="line"><a name="l13804"></a><span class="lineno">13804</span>&#160;                      <span class="stringliteral">&quot; return sum;&quot;</span></div>
<div class="line"><a name="l13805"></a><span class="lineno">13805</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13806"></a><span class="lineno">13806</span>&#160;                      <span class="stringliteral">&quot;sum=0;&quot;</span></div>
<div class="line"><a name="l13807"></a><span class="lineno">13807</span>&#160;                      <span class="stringliteral">&quot;for (var i=0;i&lt;10000;++i) {&quot;</span></div>
<div class="line"><a name="l13808"></a><span class="lineno">13808</span>&#160;                      <span class="stringliteral">&quot;  sum=ee_op_test_complex_func(sum);&quot;</span></div>
<div class="line"><a name="l13809"></a><span class="lineno">13809</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13810"></a><span class="lineno">13810</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13811"></a><span class="lineno">13811</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(16000000, result-&gt;Int32Value());</div>
<div class="line"><a name="l13812"></a><span class="lineno">13812</span>&#160;</div>
<div class="line"><a name="l13813"></a><span class="lineno">13813</span>&#160;  <span class="comment">// Test count operations</span></div>
<div class="line"><a name="l13814"></a><span class="lineno">13814</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;function ee_op_test_count_func(sum) {&quot;</span></div>
<div class="line"><a name="l13815"></a><span class="lineno">13815</span>&#160;                      <span class="stringliteral">&quot; for (var i = 0; i &lt; 40; ++i) {&quot;</span></div>
<div class="line"><a name="l13816"></a><span class="lineno">13816</span>&#160;                      <span class="stringliteral">&quot;   sum += (++ext_array[i]);&quot;</span></div>
<div class="line"><a name="l13817"></a><span class="lineno">13817</span>&#160;                      <span class="stringliteral">&quot;   sum += (--ext_array[i]);&quot;</span></div>
<div class="line"><a name="l13818"></a><span class="lineno">13818</span>&#160;                      <span class="stringliteral">&quot; } &quot;</span></div>
<div class="line"><a name="l13819"></a><span class="lineno">13819</span>&#160;                      <span class="stringliteral">&quot; return sum;&quot;</span></div>
<div class="line"><a name="l13820"></a><span class="lineno">13820</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13821"></a><span class="lineno">13821</span>&#160;                      <span class="stringliteral">&quot;sum=0;&quot;</span></div>
<div class="line"><a name="l13822"></a><span class="lineno">13822</span>&#160;                      <span class="stringliteral">&quot;for (var i=0;i&lt;10000;++i) {&quot;</span></div>
<div class="line"><a name="l13823"></a><span class="lineno">13823</span>&#160;                      <span class="stringliteral">&quot;  sum=ee_op_test_count_func(sum);&quot;</span></div>
<div class="line"><a name="l13824"></a><span class="lineno">13824</span>&#160;                      <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13825"></a><span class="lineno">13825</span>&#160;                      <span class="stringliteral">&quot;sum;&quot;</span>);</div>
<div class="line"><a name="l13826"></a><span class="lineno">13826</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(16000000, result-&gt;Int32Value());</div>
<div class="line"><a name="l13827"></a><span class="lineno">13827</span>&#160;</div>
<div class="line"><a name="l13828"></a><span class="lineno">13828</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;ext_array[3] = 33;&quot;</span></div>
<div class="line"><a name="l13829"></a><span class="lineno">13829</span>&#160;                      <span class="stringliteral">&quot;delete ext_array[3];&quot;</span></div>
<div class="line"><a name="l13830"></a><span class="lineno">13830</span>&#160;                      <span class="stringliteral">&quot;ext_array[3];&quot;</span>);</div>
<div class="line"><a name="l13831"></a><span class="lineno">13831</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(33, result-&gt;Int32Value());</div>
<div class="line"><a name="l13832"></a><span class="lineno">13832</span>&#160;</div>
<div class="line"><a name="l13833"></a><span class="lineno">13833</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;ext_array[0] = 10; ext_array[1] = 11;&quot;</span></div>
<div class="line"><a name="l13834"></a><span class="lineno">13834</span>&#160;                      <span class="stringliteral">&quot;ext_array[2] = 12; ext_array[3] = 13;&quot;</span></div>
<div class="line"><a name="l13835"></a><span class="lineno">13835</span>&#160;                      <span class="stringliteral">&quot;ext_array.__defineGetter__(&#39;2&#39;,&quot;</span></div>
<div class="line"><a name="l13836"></a><span class="lineno">13836</span>&#160;                      <span class="stringliteral">&quot;function() { return 120; });&quot;</span></div>
<div class="line"><a name="l13837"></a><span class="lineno">13837</span>&#160;                      <span class="stringliteral">&quot;ext_array[2];&quot;</span>);</div>
<div class="line"><a name="l13838"></a><span class="lineno">13838</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(12, result-&gt;Int32Value());</div>
<div class="line"><a name="l13839"></a><span class="lineno">13839</span>&#160;</div>
<div class="line"><a name="l13840"></a><span class="lineno">13840</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var js_array = new Array(40);&quot;</span></div>
<div class="line"><a name="l13841"></a><span class="lineno">13841</span>&#160;                      <span class="stringliteral">&quot;js_array[0] = 77;&quot;</span></div>
<div class="line"><a name="l13842"></a><span class="lineno">13842</span>&#160;                      <span class="stringliteral">&quot;js_array;&quot;</span>);</div>
<div class="line"><a name="l13843"></a><span class="lineno">13843</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(77, <a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a>(*result)-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l13844"></a><span class="lineno">13844</span>&#160;</div>
<div class="line"><a name="l13845"></a><span class="lineno">13845</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;ext_array[1] = 23;&quot;</span></div>
<div class="line"><a name="l13846"></a><span class="lineno">13846</span>&#160;                      <span class="stringliteral">&quot;ext_array.__proto__ = [];&quot;</span></div>
<div class="line"><a name="l13847"></a><span class="lineno">13847</span>&#160;                      <span class="stringliteral">&quot;js_array.__proto__ = ext_array;&quot;</span></div>
<div class="line"><a name="l13848"></a><span class="lineno">13848</span>&#160;                      <span class="stringliteral">&quot;js_array.concat(ext_array);&quot;</span>);</div>
<div class="line"><a name="l13849"></a><span class="lineno">13849</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(77, <a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a>(*result)-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;0&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l13850"></a><span class="lineno">13850</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, <a class="code" href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a>(*result)-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;1&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l13851"></a><span class="lineno">13851</span>&#160;</div>
<div class="line"><a name="l13852"></a><span class="lineno">13852</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;ext_array[1] = 23;&quot;</span>);</div>
<div class="line"><a name="l13853"></a><span class="lineno">13853</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, result-&gt;Int32Value());</div>
<div class="line"><a name="l13854"></a><span class="lineno">13854</span>&#160;</div>
<div class="line"><a name="l13855"></a><span class="lineno">13855</span>&#160;  <span class="comment">// Test more complex manipulations which cause eax to contain values</span></div>
<div class="line"><a name="l13856"></a><span class="lineno">13856</span>&#160;  <span class="comment">// that won&#39;t be completely overwritten by loads from the arrays.</span></div>
<div class="line"><a name="l13857"></a><span class="lineno">13857</span>&#160;  <span class="comment">// This catches bugs in the instructions used for the KeyedLoadIC</span></div>
<div class="line"><a name="l13858"></a><span class="lineno">13858</span>&#160;  <span class="comment">// for byte and word types.</span></div>
<div class="line"><a name="l13859"></a><span class="lineno">13859</span>&#160;  {</div>
<div class="line"><a name="l13860"></a><span class="lineno">13860</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> kXSize = 300;</div>
<div class="line"><a name="l13861"></a><span class="lineno">13861</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> kYSize = 300;</div>
<div class="line"><a name="l13862"></a><span class="lineno">13862</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> kLargeElementCount = kXSize * kYSize * 4;</div>
<div class="line"><a name="l13863"></a><span class="lineno">13863</span>&#160;    ElementType* large_array_data =</div>
<div class="line"><a name="l13864"></a><span class="lineno">13864</span>&#160;        <span class="keyword">static_cast&lt;</span>ElementType*<span class="keyword">&gt;</span>(malloc(kLargeElementCount * element_size));</div>
<div class="line"><a name="l13865"></a><span class="lineno">13865</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> large_obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13866"></a><span class="lineno">13866</span>&#160;    <span class="comment">// Set the elements to be the external array.</span></div>
<div class="line"><a name="l13867"></a><span class="lineno">13867</span>&#160;    large_obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(large_array_data,</div>
<div class="line"><a name="l13868"></a><span class="lineno">13868</span>&#160;                                                       array_type,</div>
<div class="line"><a name="l13869"></a><span class="lineno">13869</span>&#160;                                                       kLargeElementCount);</div>
<div class="line"><a name="l13870"></a><span class="lineno">13870</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;large_array&quot;</span>), large_obj);</div>
<div class="line"><a name="l13871"></a><span class="lineno">13871</span>&#160;    <span class="comment">// Initialize contents of a few rows.</span></div>
<div class="line"><a name="l13872"></a><span class="lineno">13872</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; 300; x++) {</div>
<div class="line"><a name="l13873"></a><span class="lineno">13873</span>&#160;      <span class="keywordtype">int</span> row = 0;</div>
<div class="line"><a name="l13874"></a><span class="lineno">13874</span>&#160;      <span class="keywordtype">int</span> offset = row * 300 * 4;</div>
<div class="line"><a name="l13875"></a><span class="lineno">13875</span>&#160;      large_array_data[offset + 4 * x + 0] = (ElementType) 127;</div>
<div class="line"><a name="l13876"></a><span class="lineno">13876</span>&#160;      large_array_data[offset + 4 * x + 1] = (ElementType) 0;</div>
<div class="line"><a name="l13877"></a><span class="lineno">13877</span>&#160;      large_array_data[offset + 4 * x + 2] = (ElementType) 0;</div>
<div class="line"><a name="l13878"></a><span class="lineno">13878</span>&#160;      large_array_data[offset + 4 * x + 3] = (ElementType) 127;</div>
<div class="line"><a name="l13879"></a><span class="lineno">13879</span>&#160;      row = 150;</div>
<div class="line"><a name="l13880"></a><span class="lineno">13880</span>&#160;      offset = row * 300 * 4;</div>
<div class="line"><a name="l13881"></a><span class="lineno">13881</span>&#160;      large_array_data[offset + 4 * x + 0] = (ElementType) 127;</div>
<div class="line"><a name="l13882"></a><span class="lineno">13882</span>&#160;      large_array_data[offset + 4 * x + 1] = (ElementType) 0;</div>
<div class="line"><a name="l13883"></a><span class="lineno">13883</span>&#160;      large_array_data[offset + 4 * x + 2] = (ElementType) 0;</div>
<div class="line"><a name="l13884"></a><span class="lineno">13884</span>&#160;      large_array_data[offset + 4 * x + 3] = (ElementType) 127;</div>
<div class="line"><a name="l13885"></a><span class="lineno">13885</span>&#160;      row = 298;</div>
<div class="line"><a name="l13886"></a><span class="lineno">13886</span>&#160;      offset = row * 300 * 4;</div>
<div class="line"><a name="l13887"></a><span class="lineno">13887</span>&#160;      large_array_data[offset + 4 * x + 0] = (ElementType) 127;</div>
<div class="line"><a name="l13888"></a><span class="lineno">13888</span>&#160;      large_array_data[offset + 4 * x + 1] = (ElementType) 0;</div>
<div class="line"><a name="l13889"></a><span class="lineno">13889</span>&#160;      large_array_data[offset + 4 * x + 2] = (ElementType) 0;</div>
<div class="line"><a name="l13890"></a><span class="lineno">13890</span>&#160;      large_array_data[offset + 4 * x + 3] = (ElementType) 127;</div>
<div class="line"><a name="l13891"></a><span class="lineno">13891</span>&#160;    }</div>
<div class="line"><a name="l13892"></a><span class="lineno">13892</span>&#160;    <span class="comment">// The goal of the code below is to make &quot;offset&quot; large enough</span></div>
<div class="line"><a name="l13893"></a><span class="lineno">13893</span>&#160;    <span class="comment">// that the computation of the index (which goes into eax) has</span></div>
<div class="line"><a name="l13894"></a><span class="lineno">13894</span>&#160;    <span class="comment">// high bits set which will not be overwritten by a byte or short</span></div>
<div class="line"><a name="l13895"></a><span class="lineno">13895</span>&#160;    <span class="comment">// load.</span></div>
<div class="line"><a name="l13896"></a><span class="lineno">13896</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;var failed = false;&quot;</span></div>
<div class="line"><a name="l13897"></a><span class="lineno">13897</span>&#160;                        <span class="stringliteral">&quot;var offset = 0;&quot;</span></div>
<div class="line"><a name="l13898"></a><span class="lineno">13898</span>&#160;                        <span class="stringliteral">&quot;for (var i = 0; i &lt; 300; i++) {&quot;</span></div>
<div class="line"><a name="l13899"></a><span class="lineno">13899</span>&#160;                        <span class="stringliteral">&quot;  if (large_array[4 * i] != 127 ||&quot;</span></div>
<div class="line"><a name="l13900"></a><span class="lineno">13900</span>&#160;                        <span class="stringliteral">&quot;      large_array[4 * i + 1] != 0 ||&quot;</span></div>
<div class="line"><a name="l13901"></a><span class="lineno">13901</span>&#160;                        <span class="stringliteral">&quot;      large_array[4 * i + 2] != 0 ||&quot;</span></div>
<div class="line"><a name="l13902"></a><span class="lineno">13902</span>&#160;                        <span class="stringliteral">&quot;      large_array[4 * i + 3] != 127) {&quot;</span></div>
<div class="line"><a name="l13903"></a><span class="lineno">13903</span>&#160;                        <span class="stringliteral">&quot;    failed = true;&quot;</span></div>
<div class="line"><a name="l13904"></a><span class="lineno">13904</span>&#160;                        <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13905"></a><span class="lineno">13905</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13906"></a><span class="lineno">13906</span>&#160;                        <span class="stringliteral">&quot;offset = 150 * 300 * 4;&quot;</span></div>
<div class="line"><a name="l13907"></a><span class="lineno">13907</span>&#160;                        <span class="stringliteral">&quot;for (var i = 0; i &lt; 300; i++) {&quot;</span></div>
<div class="line"><a name="l13908"></a><span class="lineno">13908</span>&#160;                        <span class="stringliteral">&quot;  if (large_array[offset + 4 * i] != 127 ||&quot;</span></div>
<div class="line"><a name="l13909"></a><span class="lineno">13909</span>&#160;                        <span class="stringliteral">&quot;      large_array[offset + 4 * i + 1] != 0 ||&quot;</span></div>
<div class="line"><a name="l13910"></a><span class="lineno">13910</span>&#160;                        <span class="stringliteral">&quot;      large_array[offset + 4 * i + 2] != 0 ||&quot;</span></div>
<div class="line"><a name="l13911"></a><span class="lineno">13911</span>&#160;                        <span class="stringliteral">&quot;      large_array[offset + 4 * i + 3] != 127) {&quot;</span></div>
<div class="line"><a name="l13912"></a><span class="lineno">13912</span>&#160;                        <span class="stringliteral">&quot;    failed = true;&quot;</span></div>
<div class="line"><a name="l13913"></a><span class="lineno">13913</span>&#160;                        <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13914"></a><span class="lineno">13914</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13915"></a><span class="lineno">13915</span>&#160;                        <span class="stringliteral">&quot;offset = 298 * 300 * 4;&quot;</span></div>
<div class="line"><a name="l13916"></a><span class="lineno">13916</span>&#160;                        <span class="stringliteral">&quot;for (var i = 0; i &lt; 300; i++) {&quot;</span></div>
<div class="line"><a name="l13917"></a><span class="lineno">13917</span>&#160;                        <span class="stringliteral">&quot;  if (large_array[offset + 4 * i] != 127 ||&quot;</span></div>
<div class="line"><a name="l13918"></a><span class="lineno">13918</span>&#160;                        <span class="stringliteral">&quot;      large_array[offset + 4 * i + 1] != 0 ||&quot;</span></div>
<div class="line"><a name="l13919"></a><span class="lineno">13919</span>&#160;                        <span class="stringliteral">&quot;      large_array[offset + 4 * i + 2] != 0 ||&quot;</span></div>
<div class="line"><a name="l13920"></a><span class="lineno">13920</span>&#160;                        <span class="stringliteral">&quot;      large_array[offset + 4 * i + 3] != 127) {&quot;</span></div>
<div class="line"><a name="l13921"></a><span class="lineno">13921</span>&#160;                        <span class="stringliteral">&quot;    failed = true;&quot;</span></div>
<div class="line"><a name="l13922"></a><span class="lineno">13922</span>&#160;                        <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l13923"></a><span class="lineno">13923</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l13924"></a><span class="lineno">13924</span>&#160;                        <span class="stringliteral">&quot;!failed;&quot;</span>);</div>
<div class="line"><a name="l13925"></a><span class="lineno">13925</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">true</span>, result-&gt;BooleanValue());</div>
<div class="line"><a name="l13926"></a><span class="lineno">13926</span>&#160;    free(large_array_data);</div>
<div class="line"><a name="l13927"></a><span class="lineno">13927</span>&#160;  }</div>
<div class="line"><a name="l13928"></a><span class="lineno">13928</span>&#160;</div>
<div class="line"><a name="l13929"></a><span class="lineno">13929</span>&#160;  <span class="comment">// The &quot;&quot; property descriptor is overloaded to store information about</span></div>
<div class="line"><a name="l13930"></a><span class="lineno">13930</span>&#160;  <span class="comment">// the external array. Ensure that setting and accessing the &quot;&quot; property</span></div>
<div class="line"><a name="l13931"></a><span class="lineno">13931</span>&#160;  <span class="comment">// works (it should overwrite the information cached about the external</span></div>
<div class="line"><a name="l13932"></a><span class="lineno">13932</span>&#160;  <span class="comment">// array in the DescriptorArray) in various situations.</span></div>
<div class="line"><a name="l13933"></a><span class="lineno">13933</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;ext_array[&#39;&#39;] = 23; ext_array[&#39;&#39;]&quot;</span>);</div>
<div class="line"><a name="l13934"></a><span class="lineno">13934</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, result-&gt;Int32Value());</div>
<div class="line"><a name="l13935"></a><span class="lineno">13935</span>&#160;</div>
<div class="line"><a name="l13936"></a><span class="lineno">13936</span>&#160;  <span class="comment">// Property &quot;&quot; set after the external array is associated with the object.</span></div>
<div class="line"><a name="l13937"></a><span class="lineno">13937</span>&#160;  {</div>
<div class="line"><a name="l13938"></a><span class="lineno">13938</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj2 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13939"></a><span class="lineno">13939</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;ee_test_field&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(256));</div>
<div class="line"><a name="l13940"></a><span class="lineno">13940</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(1503));</div>
<div class="line"><a name="l13941"></a><span class="lineno">13941</span>&#160;    <span class="comment">// Set the elements to be the external array.</span></div>
<div class="line"><a name="l13942"></a><span class="lineno">13942</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(array_data,</div>
<div class="line"><a name="l13943"></a><span class="lineno">13943</span>&#160;                                                  array_type,</div>
<div class="line"><a name="l13944"></a><span class="lineno">13944</span>&#160;                                                  kElementCount);</div>
<div class="line"><a name="l13945"></a><span class="lineno">13945</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ext_array&quot;</span>), obj2);</div>
<div class="line"><a name="l13946"></a><span class="lineno">13946</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;ext_array[&#39;&#39;]&quot;</span>);</div>
<div class="line"><a name="l13947"></a><span class="lineno">13947</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1503, result-&gt;Int32Value());</div>
<div class="line"><a name="l13948"></a><span class="lineno">13948</span>&#160;  }</div>
<div class="line"><a name="l13949"></a><span class="lineno">13949</span>&#160;</div>
<div class="line"><a name="l13950"></a><span class="lineno">13950</span>&#160;  <span class="comment">// Property &quot;&quot; set after the external array is associated with the object.</span></div>
<div class="line"><a name="l13951"></a><span class="lineno">13951</span>&#160;  {</div>
<div class="line"><a name="l13952"></a><span class="lineno">13952</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj2 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13953"></a><span class="lineno">13953</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;ee_test_field_2&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(256));</div>
<div class="line"><a name="l13954"></a><span class="lineno">13954</span>&#160;    <span class="comment">// Set the elements to be the external array.</span></div>
<div class="line"><a name="l13955"></a><span class="lineno">13955</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(array_data,</div>
<div class="line"><a name="l13956"></a><span class="lineno">13956</span>&#160;                                                  array_type,</div>
<div class="line"><a name="l13957"></a><span class="lineno">13957</span>&#160;                                                  kElementCount);</div>
<div class="line"><a name="l13958"></a><span class="lineno">13958</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(1503));</div>
<div class="line"><a name="l13959"></a><span class="lineno">13959</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ext_array&quot;</span>), obj2);</div>
<div class="line"><a name="l13960"></a><span class="lineno">13960</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;ext_array[&#39;&#39;]&quot;</span>);</div>
<div class="line"><a name="l13961"></a><span class="lineno">13961</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1503, result-&gt;Int32Value());</div>
<div class="line"><a name="l13962"></a><span class="lineno">13962</span>&#160;  }</div>
<div class="line"><a name="l13963"></a><span class="lineno">13963</span>&#160;</div>
<div class="line"><a name="l13964"></a><span class="lineno">13964</span>&#160;  <span class="comment">// Should reuse the map from previous test.</span></div>
<div class="line"><a name="l13965"></a><span class="lineno">13965</span>&#160;  {</div>
<div class="line"><a name="l13966"></a><span class="lineno">13966</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj2 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13967"></a><span class="lineno">13967</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;ee_test_field_2&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(256));</div>
<div class="line"><a name="l13968"></a><span class="lineno">13968</span>&#160;    <span class="comment">// Set the elements to be the external array. Should re-use the map</span></div>
<div class="line"><a name="l13969"></a><span class="lineno">13969</span>&#160;    <span class="comment">// from previous test.</span></div>
<div class="line"><a name="l13970"></a><span class="lineno">13970</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(array_data,</div>
<div class="line"><a name="l13971"></a><span class="lineno">13971</span>&#160;                                                  array_type,</div>
<div class="line"><a name="l13972"></a><span class="lineno">13972</span>&#160;                                                  kElementCount);</div>
<div class="line"><a name="l13973"></a><span class="lineno">13973</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ext_array&quot;</span>), obj2);</div>
<div class="line"><a name="l13974"></a><span class="lineno">13974</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;ext_array[&#39;&#39;]&quot;</span>);</div>
<div class="line"><a name="l13975"></a><span class="lineno">13975</span>&#160;  }</div>
<div class="line"><a name="l13976"></a><span class="lineno">13976</span>&#160;</div>
<div class="line"><a name="l13977"></a><span class="lineno">13977</span>&#160;  <span class="comment">// Property &quot;&quot; is a constant function that shouldn&#39;t not be interfered with</span></div>
<div class="line"><a name="l13978"></a><span class="lineno">13978</span>&#160;  <span class="comment">// when an external array is set.</span></div>
<div class="line"><a name="l13979"></a><span class="lineno">13979</span>&#160;  {</div>
<div class="line"><a name="l13980"></a><span class="lineno">13980</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj2 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13981"></a><span class="lineno">13981</span>&#160;    <span class="comment">// Start</span></div>
<div class="line"><a name="l13982"></a><span class="lineno">13982</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;ee_test_field3&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(256));</div>
<div class="line"><a name="l13983"></a><span class="lineno">13983</span>&#160;</div>
<div class="line"><a name="l13984"></a><span class="lineno">13984</span>&#160;    <span class="comment">// Add a constant function to an object.</span></div>
<div class="line"><a name="l13985"></a><span class="lineno">13985</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ext_array&quot;</span>), obj2);</div>
<div class="line"><a name="l13986"></a><span class="lineno">13986</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;ext_array[&#39;&#39;] = function() {return 1503;};&quot;</span></div>
<div class="line"><a name="l13987"></a><span class="lineno">13987</span>&#160;                        <span class="stringliteral">&quot;ext_array[&#39;&#39;]();&quot;</span>);</div>
<div class="line"><a name="l13988"></a><span class="lineno">13988</span>&#160;</div>
<div class="line"><a name="l13989"></a><span class="lineno">13989</span>&#160;    <span class="comment">// Add an external array transition to the same map that</span></div>
<div class="line"><a name="l13990"></a><span class="lineno">13990</span>&#160;    <span class="comment">// has the constant transition.</span></div>
<div class="line"><a name="l13991"></a><span class="lineno">13991</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj3 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l13992"></a><span class="lineno">13992</span>&#160;    obj3-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;ee_test_field3&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(256));</div>
<div class="line"><a name="l13993"></a><span class="lineno">13993</span>&#160;    obj3-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(array_data,</div>
<div class="line"><a name="l13994"></a><span class="lineno">13994</span>&#160;                                                  array_type,</div>
<div class="line"><a name="l13995"></a><span class="lineno">13995</span>&#160;                                                  kElementCount);</div>
<div class="line"><a name="l13996"></a><span class="lineno">13996</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ext_array&quot;</span>), obj3);</div>
<div class="line"><a name="l13997"></a><span class="lineno">13997</span>&#160;  }</div>
<div class="line"><a name="l13998"></a><span class="lineno">13998</span>&#160;</div>
<div class="line"><a name="l13999"></a><span class="lineno">13999</span>&#160;  <span class="comment">// If a external array transition is in the map, it should get clobbered</span></div>
<div class="line"><a name="l14000"></a><span class="lineno">14000</span>&#160;  <span class="comment">// by a constant function.</span></div>
<div class="line"><a name="l14001"></a><span class="lineno">14001</span>&#160;  {</div>
<div class="line"><a name="l14002"></a><span class="lineno">14002</span>&#160;    <span class="comment">// Add an external array transition.</span></div>
<div class="line"><a name="l14003"></a><span class="lineno">14003</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj3 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l14004"></a><span class="lineno">14004</span>&#160;    obj3-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;ee_test_field4&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(256));</div>
<div class="line"><a name="l14005"></a><span class="lineno">14005</span>&#160;    obj3-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(array_data,</div>
<div class="line"><a name="l14006"></a><span class="lineno">14006</span>&#160;                                                  array_type,</div>
<div class="line"><a name="l14007"></a><span class="lineno">14007</span>&#160;                                                  kElementCount);</div>
<div class="line"><a name="l14008"></a><span class="lineno">14008</span>&#160;</div>
<div class="line"><a name="l14009"></a><span class="lineno">14009</span>&#160;    <span class="comment">// Add a constant function to the same map that just got an external array</span></div>
<div class="line"><a name="l14010"></a><span class="lineno">14010</span>&#160;    <span class="comment">// transition.</span></div>
<div class="line"><a name="l14011"></a><span class="lineno">14011</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj2 = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l14012"></a><span class="lineno">14012</span>&#160;    obj2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;ee_test_field4&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Int32::New</a>(256));</div>
<div class="line"><a name="l14013"></a><span class="lineno">14013</span>&#160;    context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ext_array&quot;</span>), obj2);</div>
<div class="line"><a name="l14014"></a><span class="lineno">14014</span>&#160;    result = CompileRun(<span class="stringliteral">&quot;ext_array[&#39;&#39;] = function() {return 1503;};&quot;</span></div>
<div class="line"><a name="l14015"></a><span class="lineno">14015</span>&#160;                        <span class="stringliteral">&quot;ext_array[&#39;&#39;]();&quot;</span>);</div>
<div class="line"><a name="l14016"></a><span class="lineno">14016</span>&#160;  }</div>
<div class="line"><a name="l14017"></a><span class="lineno">14017</span>&#160;</div>
<div class="line"><a name="l14018"></a><span class="lineno">14018</span>&#160;  free(array_data);</div>
<div class="line"><a name="l14019"></a><span class="lineno">14019</span>&#160;}</div>
<div class="line"><a name="l14020"></a><span class="lineno">14020</span>&#160;</div>
<div class="line"><a name="l14021"></a><span class="lineno">14021</span>&#160;</div>
<div class="line"><a name="l14022"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad09fb5b3bc51755f28fbad7c2955de3e">14022</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalByteArray) {</div>
<div class="line"><a name="l14023"></a><span class="lineno">14023</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalByteArray, int8_t&gt;(</div>
<div class="line"><a name="l14024"></a><span class="lineno">14024</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ababd033480d69e1512a6db34e87876b480">v8::kExternalByteArray</a>,</div>
<div class="line"><a name="l14025"></a><span class="lineno">14025</span>&#160;      -128,</div>
<div class="line"><a name="l14026"></a><span class="lineno">14026</span>&#160;      127);</div>
<div class="line"><a name="l14027"></a><span class="lineno">14027</span>&#160;}</div>
<div class="line"><a name="l14028"></a><span class="lineno">14028</span>&#160;</div>
<div class="line"><a name="l14029"></a><span class="lineno">14029</span>&#160;</div>
<div class="line"><a name="l14030"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8bd76627cac2f22b51a6996eec367db7">14030</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalUnsignedByteArray) {</div>
<div class="line"><a name="l14031"></a><span class="lineno">14031</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalUnsignedByteArray, uint8_t&gt;(</div>
<div class="line"><a name="l14032"></a><span class="lineno">14032</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaa5e2c0b6fc91ef63346d8868785a7380">v8::kExternalUnsignedByteArray</a>,</div>
<div class="line"><a name="l14033"></a><span class="lineno">14033</span>&#160;      0,</div>
<div class="line"><a name="l14034"></a><span class="lineno">14034</span>&#160;      255);</div>
<div class="line"><a name="l14035"></a><span class="lineno">14035</span>&#160;}</div>
<div class="line"><a name="l14036"></a><span class="lineno">14036</span>&#160;</div>
<div class="line"><a name="l14037"></a><span class="lineno">14037</span>&#160;</div>
<div class="line"><a name="l14038"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae98c579b3d4f3730c8d387cf06eec663">14038</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalPixelArray) {</div>
<div class="line"><a name="l14039"></a><span class="lineno">14039</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalPixelArray, uint8_t&gt;(</div>
<div class="line"><a name="l14040"></a><span class="lineno">14040</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>,</div>
<div class="line"><a name="l14041"></a><span class="lineno">14041</span>&#160;      0,</div>
<div class="line"><a name="l14042"></a><span class="lineno">14042</span>&#160;      255);</div>
<div class="line"><a name="l14043"></a><span class="lineno">14043</span>&#160;}</div>
<div class="line"><a name="l14044"></a><span class="lineno">14044</span>&#160;</div>
<div class="line"><a name="l14045"></a><span class="lineno">14045</span>&#160;</div>
<div class="line"><a name="l14046"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a011dcfa5b9a75d051faf03aaf7f653f2">14046</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalShortArray) {</div>
<div class="line"><a name="l14047"></a><span class="lineno">14047</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalShortArray, int16_t&gt;(</div>
<div class="line"><a name="l14048"></a><span class="lineno">14048</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaacd0bd2f6b7d36994c497006da9bb9a1">v8::kExternalShortArray</a>,</div>
<div class="line"><a name="l14049"></a><span class="lineno">14049</span>&#160;      -32768,</div>
<div class="line"><a name="l14050"></a><span class="lineno">14050</span>&#160;      32767);</div>
<div class="line"><a name="l14051"></a><span class="lineno">14051</span>&#160;}</div>
<div class="line"><a name="l14052"></a><span class="lineno">14052</span>&#160;</div>
<div class="line"><a name="l14053"></a><span class="lineno">14053</span>&#160;</div>
<div class="line"><a name="l14054"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9a4308777b5c66f5c834b5fda417b212">14054</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalUnsignedShortArray) {</div>
<div class="line"><a name="l14055"></a><span class="lineno">14055</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalUnsignedShortArray, uint16_t&gt;(</div>
<div class="line"><a name="l14056"></a><span class="lineno">14056</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba886c1ba4452a68ef7bf383f0e4b94b6e">v8::kExternalUnsignedShortArray</a>,</div>
<div class="line"><a name="l14057"></a><span class="lineno">14057</span>&#160;      0,</div>
<div class="line"><a name="l14058"></a><span class="lineno">14058</span>&#160;      65535);</div>
<div class="line"><a name="l14059"></a><span class="lineno">14059</span>&#160;}</div>
<div class="line"><a name="l14060"></a><span class="lineno">14060</span>&#160;</div>
<div class="line"><a name="l14061"></a><span class="lineno">14061</span>&#160;</div>
<div class="line"><a name="l14062"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a790161f315255ecd624a4aa0a82b4252">14062</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalIntArray) {</div>
<div class="line"><a name="l14063"></a><span class="lineno">14063</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalIntArray, int32_t&gt;(</div>
<div class="line"><a name="l14064"></a><span class="lineno">14064</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba01beba98d449b55760d59b1aa8453218">v8::kExternalIntArray</a>,</div>
<div class="line"><a name="l14065"></a><span class="lineno">14065</span>&#160;      INT_MIN,   <span class="comment">// -2147483648</span></div>
<div class="line"><a name="l14066"></a><span class="lineno">14066</span>&#160;      INT_MAX);  <span class="comment">//  2147483647</span></div>
<div class="line"><a name="l14067"></a><span class="lineno">14067</span>&#160;}</div>
<div class="line"><a name="l14068"></a><span class="lineno">14068</span>&#160;</div>
<div class="line"><a name="l14069"></a><span class="lineno">14069</span>&#160;</div>
<div class="line"><a name="l14070"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac17d69751323c4ea1e539abcb4ff1387">14070</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalUnsignedIntArray) {</div>
<div class="line"><a name="l14071"></a><span class="lineno">14071</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalUnsignedIntArray, uint32_t&gt;(</div>
<div class="line"><a name="l14072"></a><span class="lineno">14072</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaab72dcb950cf25173070d51aded5e25a">v8::kExternalUnsignedIntArray</a>,</div>
<div class="line"><a name="l14073"></a><span class="lineno">14073</span>&#160;      0,</div>
<div class="line"><a name="l14074"></a><span class="lineno">14074</span>&#160;      UINT_MAX);  <span class="comment">// 4294967295</span></div>
<div class="line"><a name="l14075"></a><span class="lineno">14075</span>&#160;}</div>
<div class="line"><a name="l14076"></a><span class="lineno">14076</span>&#160;</div>
<div class="line"><a name="l14077"></a><span class="lineno">14077</span>&#160;</div>
<div class="line"><a name="l14078"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aac083de960f0caea4ddc9c464c4fb1e1">14078</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalFloatArray) {</div>
<div class="line"><a name="l14079"></a><span class="lineno">14079</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalFloatArray, float&gt;(</div>
<div class="line"><a name="l14080"></a><span class="lineno">14080</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189">v8::kExternalFloatArray</a>,</div>
<div class="line"><a name="l14081"></a><span class="lineno">14081</span>&#160;      -500,</div>
<div class="line"><a name="l14082"></a><span class="lineno">14082</span>&#160;      500);</div>
<div class="line"><a name="l14083"></a><span class="lineno">14083</span>&#160;}</div>
<div class="line"><a name="l14084"></a><span class="lineno">14084</span>&#160;</div>
<div class="line"><a name="l14085"></a><span class="lineno">14085</span>&#160;</div>
<div class="line"><a name="l14086"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab8bf7b43d2ce20f76016e6b5089568ef">14086</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalDoubleArray) {</div>
<div class="line"><a name="l14087"></a><span class="lineno">14087</span>&#160;  ExternalArrayTestHelper&lt;i::ExternalDoubleArray, double&gt;(</div>
<div class="line"><a name="l14088"></a><span class="lineno">14088</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247">v8::kExternalDoubleArray</a>,</div>
<div class="line"><a name="l14089"></a><span class="lineno">14089</span>&#160;      -500,</div>
<div class="line"><a name="l14090"></a><span class="lineno">14090</span>&#160;      500);</div>
<div class="line"><a name="l14091"></a><span class="lineno">14091</span>&#160;}</div>
<div class="line"><a name="l14092"></a><span class="lineno">14092</span>&#160;</div>
<div class="line"><a name="l14093"></a><span class="lineno">14093</span>&#160;</div>
<div class="line"><a name="l14094"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3411207d6225528b872764b712fceeac">14094</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalArrays) {</div>
<div class="line"><a name="l14095"></a><span class="lineno">14095</span>&#160;  TestExternalByteArray();</div>
<div class="line"><a name="l14096"></a><span class="lineno">14096</span>&#160;  TestExternalUnsignedByteArray();</div>
<div class="line"><a name="l14097"></a><span class="lineno">14097</span>&#160;  TestExternalShortArray();</div>
<div class="line"><a name="l14098"></a><span class="lineno">14098</span>&#160;  TestExternalUnsignedShortArray();</div>
<div class="line"><a name="l14099"></a><span class="lineno">14099</span>&#160;  TestExternalIntArray();</div>
<div class="line"><a name="l14100"></a><span class="lineno">14100</span>&#160;  TestExternalUnsignedIntArray();</div>
<div class="line"><a name="l14101"></a><span class="lineno">14101</span>&#160;  TestExternalFloatArray();</div>
<div class="line"><a name="l14102"></a><span class="lineno">14102</span>&#160;}</div>
<div class="line"><a name="l14103"></a><span class="lineno">14103</span>&#160;</div>
<div class="line"><a name="l14104"></a><span class="lineno">14104</span>&#160;</div>
<div class="line"><a name="l14105"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">14105</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ab">v8::ExternalArrayType</a> array_type) {</div>
<div class="line"><a name="l14106"></a><span class="lineno">14106</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14107"></a><span class="lineno">14107</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l14108"></a><span class="lineno">14108</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> size = 0; size &lt; 100; size += 10) {</div>
<div class="line"><a name="l14109"></a><span class="lineno">14109</span>&#160;    <span class="keywordtype">int</span> element_size = ExternalArrayElementSize(array_type);</div>
<div class="line"><a name="l14110"></a><span class="lineno">14110</span>&#160;    <span class="keywordtype">void</span>* external_data = malloc(size * element_size);</div>
<div class="line"><a name="l14111"></a><span class="lineno">14111</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l14112"></a><span class="lineno">14112</span>&#160;    obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(</div>
<div class="line"><a name="l14113"></a><span class="lineno">14113</span>&#160;        external_data, array_type, size);</div>
<div class="line"><a name="l14114"></a><span class="lineno">14114</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a0b3ba73653d32fe6ca8e2a321b476d4e">HasIndexedPropertiesInExternalArrayData</a>());</div>
<div class="line"><a name="l14115"></a><span class="lineno">14115</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(external_data, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a30331f5519297dbb4d00ca8301509b64">GetIndexedPropertiesExternalArrayData</a>());</div>
<div class="line"><a name="l14116"></a><span class="lineno">14116</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(array_type, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa24aa2b4fb6a2679defa63c70cf0ac02">GetIndexedPropertiesExternalArrayDataType</a>());</div>
<div class="line"><a name="l14117"></a><span class="lineno">14117</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(size, obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a43b4ee427727aa33cba0b551f7a043c6">GetIndexedPropertiesExternalArrayDataLength</a>());</div>
<div class="line"><a name="l14118"></a><span class="lineno">14118</span>&#160;    free(external_data);</div>
<div class="line"><a name="l14119"></a><span class="lineno">14119</span>&#160;  }</div>
<div class="line"><a name="l14120"></a><span class="lineno">14120</span>&#160;}</div>
<div class="line"><a name="l14121"></a><span class="lineno">14121</span>&#160;</div>
<div class="line"><a name="l14122"></a><span class="lineno">14122</span>&#160;</div>
<div class="line"><a name="l14123"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8f9bf68ed377a6e8851a98517bcf60b3">14123</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ExternalArrayInfo) {</div>
<div class="line"><a name="l14124"></a><span class="lineno">14124</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ababd033480d69e1512a6db34e87876b480">v8::kExternalByteArray</a>);</div>
<div class="line"><a name="l14125"></a><span class="lineno">14125</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaa5e2c0b6fc91ef63346d8868785a7380">v8::kExternalUnsignedByteArray</a>);</div>
<div class="line"><a name="l14126"></a><span class="lineno">14126</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaacd0bd2f6b7d36994c497006da9bb9a1">v8::kExternalShortArray</a>);</div>
<div class="line"><a name="l14127"></a><span class="lineno">14127</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba886c1ba4452a68ef7bf383f0e4b94b6e">v8::kExternalUnsignedShortArray</a>);</div>
<div class="line"><a name="l14128"></a><span class="lineno">14128</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba01beba98d449b55760d59b1aa8453218">v8::kExternalIntArray</a>);</div>
<div class="line"><a name="l14129"></a><span class="lineno">14129</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaab72dcb950cf25173070d51aded5e25a">v8::kExternalUnsignedIntArray</a>);</div>
<div class="line"><a name="l14130"></a><span class="lineno">14130</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189">v8::kExternalFloatArray</a>);</div>
<div class="line"><a name="l14131"></a><span class="lineno">14131</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247">v8::kExternalDoubleArray</a>);</div>
<div class="line"><a name="l14132"></a><span class="lineno">14132</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>);</div>
<div class="line"><a name="l14133"></a><span class="lineno">14133</span>&#160;}</div>
<div class="line"><a name="l14134"></a><span class="lineno">14134</span>&#160;</div>
<div class="line"><a name="l14135"></a><span class="lineno">14135</span>&#160;</div>
<div class="line"><a name="l14136"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">14136</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ab">v8::ExternalArrayType</a> array_type, <span class="keywordtype">int</span> size) {</div>
<div class="line"><a name="l14137"></a><span class="lineno">14137</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> obj = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l14138"></a><span class="lineno">14138</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a>);</div>
<div class="line"><a name="l14139"></a><span class="lineno">14139</span>&#160;  last_location = last_message = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l14140"></a><span class="lineno">14140</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">SetIndexedPropertiesToExternalArrayData</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, array_type, size);</div>
<div class="line"><a name="l14141"></a><span class="lineno">14141</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a0b3ba73653d32fe6ca8e2a321b476d4e">HasIndexedPropertiesInExternalArrayData</a>());</div>
<div class="line"><a name="l14142"></a><span class="lineno">14142</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, last_location);</div>
<div class="line"><a name="l14143"></a><span class="lineno">14143</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, last_message);</div>
<div class="line"><a name="l14144"></a><span class="lineno">14144</span>&#160;}</div>
<div class="line"><a name="l14145"></a><span class="lineno">14145</span>&#160;</div>
<div class="line"><a name="l14146"></a><span class="lineno">14146</span>&#160;</div>
<div class="line"><a name="l14147"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9a7e2a0c1b8bf58a9fdcab1789e8261d">14147</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(ExternalArrayLimits) {</div>
<div class="line"><a name="l14148"></a><span class="lineno">14148</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14149"></a><span class="lineno">14149</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l14150"></a><span class="lineno">14150</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ababd033480d69e1512a6db34e87876b480">v8::kExternalByteArray</a>, 0x40000000);</div>
<div class="line"><a name="l14151"></a><span class="lineno">14151</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ababd033480d69e1512a6db34e87876b480">v8::kExternalByteArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14152"></a><span class="lineno">14152</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaa5e2c0b6fc91ef63346d8868785a7380">v8::kExternalUnsignedByteArray</a>, 0x40000000);</div>
<div class="line"><a name="l14153"></a><span class="lineno">14153</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaa5e2c0b6fc91ef63346d8868785a7380">v8::kExternalUnsignedByteArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14154"></a><span class="lineno">14154</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaacd0bd2f6b7d36994c497006da9bb9a1">v8::kExternalShortArray</a>, 0x40000000);</div>
<div class="line"><a name="l14155"></a><span class="lineno">14155</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaacd0bd2f6b7d36994c497006da9bb9a1">v8::kExternalShortArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14156"></a><span class="lineno">14156</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba886c1ba4452a68ef7bf383f0e4b94b6e">v8::kExternalUnsignedShortArray</a>, 0x40000000);</div>
<div class="line"><a name="l14157"></a><span class="lineno">14157</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba886c1ba4452a68ef7bf383f0e4b94b6e">v8::kExternalUnsignedShortArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14158"></a><span class="lineno">14158</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba01beba98d449b55760d59b1aa8453218">v8::kExternalIntArray</a>, 0x40000000);</div>
<div class="line"><a name="l14159"></a><span class="lineno">14159</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba01beba98d449b55760d59b1aa8453218">v8::kExternalIntArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14160"></a><span class="lineno">14160</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaab72dcb950cf25173070d51aded5e25a">v8::kExternalUnsignedIntArray</a>, 0x40000000);</div>
<div class="line"><a name="l14161"></a><span class="lineno">14161</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaab72dcb950cf25173070d51aded5e25a">v8::kExternalUnsignedIntArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14162"></a><span class="lineno">14162</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189">v8::kExternalFloatArray</a>, 0x40000000);</div>
<div class="line"><a name="l14163"></a><span class="lineno">14163</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189">v8::kExternalFloatArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14164"></a><span class="lineno">14164</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247">v8::kExternalDoubleArray</a>, 0x40000000);</div>
<div class="line"><a name="l14165"></a><span class="lineno">14165</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247">v8::kExternalDoubleArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14166"></a><span class="lineno">14166</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>, 0x40000000);</div>
<div class="line"><a name="l14167"></a><span class="lineno">14167</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a>, 0xffffffff);</div>
<div class="line"><a name="l14168"></a><span class="lineno">14168</span>&#160;}</div>
<div class="line"><a name="l14169"></a><span class="lineno">14169</span>&#160;</div>
<div class="line"><a name="l14170"></a><span class="lineno">14170</span>&#160;</div>
<div class="line"><a name="l14171"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a479bf551bed7b867824e4ba8a11089ef">14171</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptContextDependence) {</div>
<div class="line"><a name="l14172"></a><span class="lineno">14172</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14173"></a><span class="lineno">14173</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> c1;</div>
<div class="line"><a name="l14174"></a><span class="lineno">14174</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *source = <span class="stringliteral">&quot;foo&quot;</span>;</div>
<div class="line"><a name="l14175"></a><span class="lineno">14175</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> dep = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(source));</div>
<div class="line"><a name="l14176"></a><span class="lineno">14176</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> indep = <a class="code" href="../../d0/d35/classv8_1_1_script.html#ac1223816dab9d0df897a09a5fb899466">v8::Script::New</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(source));</div>
<div class="line"><a name="l14177"></a><span class="lineno">14177</span>&#160;  c1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;foo&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(100));</div>
<div class="line"><a name="l14178"></a><span class="lineno">14178</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(dep-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>()-&gt;Int32Value(), 100);</div>
<div class="line"><a name="l14179"></a><span class="lineno">14179</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(indep-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>()-&gt;Int32Value(), 100);</div>
<div class="line"><a name="l14180"></a><span class="lineno">14180</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> c2;</div>
<div class="line"><a name="l14181"></a><span class="lineno">14181</span>&#160;  c2-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;foo&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(101));</div>
<div class="line"><a name="l14182"></a><span class="lineno">14182</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(dep-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>()-&gt;Int32Value(), 100);</div>
<div class="line"><a name="l14183"></a><span class="lineno">14183</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(indep-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>()-&gt;Int32Value(), 101);</div>
<div class="line"><a name="l14184"></a><span class="lineno">14184</span>&#160;}</div>
<div class="line"><a name="l14185"></a><span class="lineno">14185</span>&#160;</div>
<div class="line"><a name="l14186"></a><span class="lineno">14186</span>&#160;</div>
<div class="line"><a name="l14187"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6ef6339ada4f13263c7ebf48c0027a18">14187</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(StackTrace) {</div>
<div class="line"><a name="l14188"></a><span class="lineno">14188</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14189"></a><span class="lineno">14189</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l14190"></a><span class="lineno">14190</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l14191"></a><span class="lineno">14191</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *source = <span class="stringliteral">&quot;function foo() { FAIL.FAIL; }; foo();&quot;</span>;</div>
<div class="line"><a name="l14192"></a><span class="lineno">14192</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> src = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(source);</div>
<div class="line"><a name="l14193"></a><span class="lineno">14193</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> origin = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;stack-trace-test&quot;</span>);</div>
<div class="line"><a name="l14194"></a><span class="lineno">14194</span>&#160;  <a class="code" href="../../d0/d35/classv8_1_1_script.html#ac1223816dab9d0df897a09a5fb899466">v8::Script::New</a>(src, origin)-&gt;Run();</div>
<div class="line"><a name="l14195"></a><span class="lineno">14195</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l14196"></a><span class="lineno">14196</span>&#160;  <a class="code" href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a> stack(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a677de3eee9e9637a8fa7c07612546d02">StackTrace</a>());</div>
<div class="line"><a name="l14197"></a><span class="lineno">14197</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(strstr(*stack, <span class="stringliteral">&quot;at foo (stack-trace-test&quot;</span>) != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l14198"></a><span class="lineno">14198</span>&#160;}</div>
<div class="line"><a name="l14199"></a><span class="lineno">14199</span>&#160;</div>
<div class="line"><a name="l14200"></a><span class="lineno">14200</span>&#160;</div>
<div class="line"><a name="l14201"></a><span class="lineno">14201</span>&#160;<span class="comment">// Checks that a StackFrame has certain expected values.</span></div>
<div class="line"><a name="l14202"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">14202</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* expected_script_name,</div>
<div class="line"><a name="l14203"></a><span class="lineno">14203</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* expected_func_name, <span class="keywordtype">int</span> expected_line_number,</div>
<div class="line"><a name="l14204"></a><span class="lineno">14204</span>&#160;    <span class="keywordtype">int</span> expected_column, <span class="keywordtype">bool</span> is_eval, <span class="keywordtype">bool</span> is_constructor,</div>
<div class="line"><a name="l14205"></a><span class="lineno">14205</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackFrame&gt;</a> frame) {</div>
<div class="line"><a name="l14206"></a><span class="lineno">14206</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14207"></a><span class="lineno">14207</span>&#160;  <a class="code" href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a> func_name(frame-&gt;<a class="code" href="../../dd/d1e/classv8_1_1_stack_frame.html#aac264991a8c2480aaf5f429436fb69db">GetFunctionName</a>());</div>
<div class="line"><a name="l14208"></a><span class="lineno">14208</span>&#160;  <a class="code" href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a> script_name(frame-&gt;<a class="code" href="../../dd/d1e/classv8_1_1_stack_frame.html#aa961d7c5a127b3e77f233eded8c34ed9">GetScriptName</a>());</div>
<div class="line"><a name="l14209"></a><span class="lineno">14209</span>&#160;  <span class="keywordflow">if</span> (*script_name == <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>) {</div>
<div class="line"><a name="l14210"></a><span class="lineno">14210</span>&#160;    <span class="comment">// The situation where there is no associated script, like for evals.</span></div>
<div class="line"><a name="l14211"></a><span class="lineno">14211</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(expected_script_name == <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l14212"></a><span class="lineno">14212</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14213"></a><span class="lineno">14213</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(strstr(*script_name, expected_script_name) != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l14214"></a><span class="lineno">14214</span>&#160;  }</div>
<div class="line"><a name="l14215"></a><span class="lineno">14215</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(strstr(*func_name, expected_func_name) != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l14216"></a><span class="lineno">14216</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected_line_number, frame-&gt;<a class="code" href="../../dd/d1e/classv8_1_1_stack_frame.html#a66c1993510fe48d9661aadbbe820ae42">GetLineNumber</a>());</div>
<div class="line"><a name="l14217"></a><span class="lineno">14217</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected_column, frame-&gt;<a class="code" href="../../dd/d1e/classv8_1_1_stack_frame.html#a03ee7aeb6433022a6a1544e05594b30a">GetColumn</a>());</div>
<div class="line"><a name="l14218"></a><span class="lineno">14218</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(is_eval, frame-&gt;<a class="code" href="../../dd/d1e/classv8_1_1_stack_frame.html#a4ecb181a0cf276e6928278c4b1b97a5e">IsEval</a>());</div>
<div class="line"><a name="l14219"></a><span class="lineno">14219</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(is_constructor, frame-&gt;<a class="code" href="../../dd/d1e/classv8_1_1_stack_frame.html#adb29eb530bece22d0b4e250379efaa00">IsConstructor</a>());</div>
<div class="line"><a name="l14220"></a><span class="lineno">14220</span>&#160;}</div>
<div class="line"><a name="l14221"></a><span class="lineno">14221</span>&#160;</div>
<div class="line"><a name="l14222"></a><span class="lineno">14222</span>&#160;</div>
<div class="line"><a name="l14223"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a645c702b2c82d731a30a67d774f95c8d">14223</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a645c702b2c82d731a30a67d774f95c8d">AnalyzeStackInNativeCode</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l14224"></a><span class="lineno">14224</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14225"></a><span class="lineno">14225</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* origin = <span class="stringliteral">&quot;capture-stack-trace-test&quot;</span>;</div>
<div class="line"><a name="l14226"></a><span class="lineno">14226</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kOverviewTest = 1;</div>
<div class="line"><a name="l14227"></a><span class="lineno">14227</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kDetailedTest = 2;</div>
<div class="line"><a name="l14228"></a><span class="lineno">14228</span>&#160;</div>
<div class="line"><a name="l14229"></a><span class="lineno">14229</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(args.<a class="code" href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">Length</a>() == 1);</div>
<div class="line"><a name="l14230"></a><span class="lineno">14230</span>&#160;</div>
<div class="line"><a name="l14231"></a><span class="lineno">14231</span>&#160;  <span class="keywordtype">int</span> testGroup = args[0]-&gt;Int32Value();</div>
<div class="line"><a name="l14232"></a><span class="lineno">14232</span>&#160;  <span class="keywordflow">if</span> (testGroup == kOverviewTest) {</div>
<div class="line"><a name="l14233"></a><span class="lineno">14233</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stackTrace =</div>
<div class="line"><a name="l14234"></a><span class="lineno">14234</span>&#160;        <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#aa93d39d0ce6cbc3e71b2b94c0557bf6b">v8::StackTrace::CurrentStackTrace</a>(10, <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a39e2c28285628da5cf81818663e2ace0aa8600d6e3ac2f9c705493664c4f3681a">v8::StackTrace::kOverview</a>);</div>
<div class="line"><a name="l14235"></a><span class="lineno">14235</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>());</div>
<div class="line"><a name="l14236"></a><span class="lineno">14236</span>&#160;    <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(origin, <span class="stringliteral">&quot;bar&quot;</span>, 2, 10, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14237"></a><span class="lineno">14237</span>&#160;                    stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(0));</div>
<div class="line"><a name="l14238"></a><span class="lineno">14238</span>&#160;    <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(origin, <span class="stringliteral">&quot;foo&quot;</span>, 6, 3, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14239"></a><span class="lineno">14239</span>&#160;                    stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(1));</div>
<div class="line"><a name="l14240"></a><span class="lineno">14240</span>&#160;    <span class="comment">// This is the source string inside the eval which has the call to foo.</span></div>
<div class="line"><a name="l14241"></a><span class="lineno">14241</span>&#160;    <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <span class="stringliteral">&quot;&quot;</span>, 1, 5, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14242"></a><span class="lineno">14242</span>&#160;                    stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(2));</div>
<div class="line"><a name="l14243"></a><span class="lineno">14243</span>&#160;    <span class="comment">// The last frame is an anonymous function which has the initial eval call.</span></div>
<div class="line"><a name="l14244"></a><span class="lineno">14244</span>&#160;    <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(origin, <span class="stringliteral">&quot;&quot;</span>, 8, 7, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14245"></a><span class="lineno">14245</span>&#160;                    stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(3));</div>
<div class="line"><a name="l14246"></a><span class="lineno">14246</span>&#160;</div>
<div class="line"><a name="l14247"></a><span class="lineno">14247</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a89b65449dacd0657ba2879a82343c500">AsArray</a>()-&gt;IsArray());</div>
<div class="line"><a name="l14248"></a><span class="lineno">14248</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (testGroup == kDetailedTest) {</div>
<div class="line"><a name="l14249"></a><span class="lineno">14249</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stackTrace =</div>
<div class="line"><a name="l14250"></a><span class="lineno">14250</span>&#160;        <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#aa93d39d0ce6cbc3e71b2b94c0557bf6b">v8::StackTrace::CurrentStackTrace</a>(10, <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a39e2c28285628da5cf81818663e2ace0aa8d866ffc5cb1fdd2aec774a39165c59">v8::StackTrace::kDetailed</a>);</div>
<div class="line"><a name="l14251"></a><span class="lineno">14251</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>());</div>
<div class="line"><a name="l14252"></a><span class="lineno">14252</span>&#160;    <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(origin, <span class="stringliteral">&quot;bat&quot;</span>, 4, 22, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14253"></a><span class="lineno">14253</span>&#160;                    stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(0));</div>
<div class="line"><a name="l14254"></a><span class="lineno">14254</span>&#160;    <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(origin, <span class="stringliteral">&quot;baz&quot;</span>, 8, 3, <span class="keyword">false</span>, <span class="keyword">true</span>,</div>
<div class="line"><a name="l14255"></a><span class="lineno">14255</span>&#160;                    stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(1));</div>
<div class="line"><a name="l14256"></a><span class="lineno">14256</span>&#160;<span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span></div>
<div class="line"><a name="l14257"></a><span class="lineno">14257</span>&#160;    <span class="keywordtype">bool</span> is_eval = <span class="keyword">true</span>;</div>
<div class="line"><a name="l14258"></a><span class="lineno">14258</span>&#160;<span class="preprocessor">#else  // ENABLE_DEBUGGER_SUPPORT</span></div>
<div class="line"><a name="l14259"></a><span class="lineno">14259</span>&#160;    <span class="keywordtype">bool</span> is_eval = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14260"></a><span class="lineno">14260</span>&#160;<span class="preprocessor">#endif  // ENABLE_DEBUGGER_SUPPORT</span></div>
<div class="line"><a name="l14261"></a><span class="lineno">14261</span>&#160;</div>
<div class="line"><a name="l14262"></a><span class="lineno">14262</span>&#160;    <span class="comment">// This is the source string inside the eval which has the call to baz.</span></div>
<div class="line"><a name="l14263"></a><span class="lineno">14263</span>&#160;    <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <span class="stringliteral">&quot;&quot;</span>, 1, 5, is_eval, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14264"></a><span class="lineno">14264</span>&#160;                    stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(2));</div>
<div class="line"><a name="l14265"></a><span class="lineno">14265</span>&#160;    <span class="comment">// The last frame is an anonymous function which has the initial eval call.</span></div>
<div class="line"><a name="l14266"></a><span class="lineno">14266</span>&#160;    <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(origin, <span class="stringliteral">&quot;&quot;</span>, 10, 1, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14267"></a><span class="lineno">14267</span>&#160;                    stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(3));</div>
<div class="line"><a name="l14268"></a><span class="lineno">14268</span>&#160;</div>
<div class="line"><a name="l14269"></a><span class="lineno">14269</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a89b65449dacd0657ba2879a82343c500">AsArray</a>()-&gt;IsArray());</div>
<div class="line"><a name="l14270"></a><span class="lineno">14270</span>&#160;  }</div>
<div class="line"><a name="l14271"></a><span class="lineno">14271</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l14272"></a><span class="lineno">14272</span>&#160;}</div>
<div class="line"><a name="l14273"></a><span class="lineno">14273</span>&#160;</div>
<div class="line"><a name="l14274"></a><span class="lineno">14274</span>&#160;</div>
<div class="line"><a name="l14275"></a><span class="lineno">14275</span>&#160;<span class="comment">// Tests the C++ StackTrace API.</span></div>
<div class="line"><a name="l14276"></a><span class="lineno">14276</span>&#160;<span class="comment">// TODO(3074796): Reenable this as a THREADED_TEST once it passes.</span></div>
<div class="line"><a name="l14277"></a><span class="lineno">14277</span>&#160;<span class="comment">// THREADED_TEST(CaptureStackTrace) {</span></div>
<div class="line"><a name="l14278"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1a23321465a212161a530058684a66cd">14278</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CaptureStackTrace) {</div>
<div class="line"><a name="l14279"></a><span class="lineno">14279</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14280"></a><span class="lineno">14280</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> origin = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;capture-stack-trace-test&quot;</span>);</div>
<div class="line"><a name="l14281"></a><span class="lineno">14281</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l14282"></a><span class="lineno">14282</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;AnalyzeStackInNativeCode&quot;</span>),</div>
<div class="line"><a name="l14283"></a><span class="lineno">14283</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a645c702b2c82d731a30a67d774f95c8d">AnalyzeStackInNativeCode</a>));</div>
<div class="line"><a name="l14284"></a><span class="lineno">14284</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l14285"></a><span class="lineno">14285</span>&#160;</div>
<div class="line"><a name="l14286"></a><span class="lineno">14286</span>&#160;  <span class="comment">// Test getting OVERVIEW information. Should ignore information that is not</span></div>
<div class="line"><a name="l14287"></a><span class="lineno">14287</span>&#160;  <span class="comment">// script name, function name, line number, and column offset.</span></div>
<div class="line"><a name="l14288"></a><span class="lineno">14288</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *overview_source =</div>
<div class="line"><a name="l14289"></a><span class="lineno">14289</span>&#160;    <span class="stringliteral">&quot;function bar() {\n&quot;</span></div>
<div class="line"><a name="l14290"></a><span class="lineno">14290</span>&#160;    <span class="stringliteral">&quot;  var y; AnalyzeStackInNativeCode(1);\n&quot;</span></div>
<div class="line"><a name="l14291"></a><span class="lineno">14291</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14292"></a><span class="lineno">14292</span>&#160;    <span class="stringliteral">&quot;function foo() {\n&quot;</span></div>
<div class="line"><a name="l14293"></a><span class="lineno">14293</span>&#160;    <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l14294"></a><span class="lineno">14294</span>&#160;    <span class="stringliteral">&quot;  bar();\n&quot;</span></div>
<div class="line"><a name="l14295"></a><span class="lineno">14295</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14296"></a><span class="lineno">14296</span>&#160;    <span class="stringliteral">&quot;var x;eval(&#39;new foo();&#39;);&quot;</span>;</div>
<div class="line"><a name="l14297"></a><span class="lineno">14297</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> overview_src = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(overview_source);</div>
<div class="line"><a name="l14298"></a><span class="lineno">14298</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> overview_result(</div>
<div class="line"><a name="l14299"></a><span class="lineno">14299</span>&#160;      <a class="code" href="../../d0/d35/classv8_1_1_script.html#ac1223816dab9d0df897a09a5fb899466">v8::Script::New</a>(overview_src, origin)-&gt;Run());</div>
<div class="line"><a name="l14300"></a><span class="lineno">14300</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!overview_result.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l14301"></a><span class="lineno">14301</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(overview_result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a165136d736a2edcccac553aca4a5806e">IsObject</a>());</div>
<div class="line"><a name="l14302"></a><span class="lineno">14302</span>&#160;</div>
<div class="line"><a name="l14303"></a><span class="lineno">14303</span>&#160;  <span class="comment">// Test getting DETAILED information.</span></div>
<div class="line"><a name="l14304"></a><span class="lineno">14304</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *detailed_source =</div>
<div class="line"><a name="l14305"></a><span class="lineno">14305</span>&#160;    <span class="stringliteral">&quot;function bat() {AnalyzeStackInNativeCode(2);\n&quot;</span></div>
<div class="line"><a name="l14306"></a><span class="lineno">14306</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14307"></a><span class="lineno">14307</span>&#160;    <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l14308"></a><span class="lineno">14308</span>&#160;    <span class="stringliteral">&quot;function baz() {\n&quot;</span></div>
<div class="line"><a name="l14309"></a><span class="lineno">14309</span>&#160;    <span class="stringliteral">&quot;  bat();\n&quot;</span></div>
<div class="line"><a name="l14310"></a><span class="lineno">14310</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14311"></a><span class="lineno">14311</span>&#160;    <span class="stringliteral">&quot;eval(&#39;new baz();&#39;);&quot;</span>;</div>
<div class="line"><a name="l14312"></a><span class="lineno">14312</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> detailed_src = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(detailed_source);</div>
<div class="line"><a name="l14313"></a><span class="lineno">14313</span>&#160;  <span class="comment">// Make the script using a non-zero line and column offset.</span></div>
<div class="line"><a name="l14314"></a><span class="lineno">14314</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Integer&gt;</a> line_offset = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3);</div>
<div class="line"><a name="l14315"></a><span class="lineno">14315</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Integer&gt;</a> column_offset = <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(5);</div>
<div class="line"><a name="l14316"></a><span class="lineno">14316</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> detailed_origin(origin, line_offset, column_offset);</div>
<div class="line"><a name="l14317"></a><span class="lineno">14317</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Script&gt;</a> detailed_script(</div>
<div class="line"><a name="l14318"></a><span class="lineno">14318</span>&#160;      <a class="code" href="../../d0/d35/classv8_1_1_script.html#ac1223816dab9d0df897a09a5fb899466">v8::Script::New</a>(detailed_src, &amp;detailed_origin));</div>
<div class="line"><a name="l14319"></a><span class="lineno">14319</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> detailed_result(detailed_script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>());</div>
<div class="line"><a name="l14320"></a><span class="lineno">14320</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!detailed_result.IsEmpty());</div>
<div class="line"><a name="l14321"></a><span class="lineno">14321</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(detailed_result-&gt;IsObject());</div>
<div class="line"><a name="l14322"></a><span class="lineno">14322</span>&#160;}</div>
<div class="line"><a name="l14323"></a><span class="lineno">14323</span>&#160;</div>
<div class="line"><a name="l14324"></a><span class="lineno">14324</span>&#160;</div>
<div class="line"><a name="l14325"></a><span class="lineno">14325</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> StackTraceForUncaughtExceptionListener(</div>
<div class="line"><a name="l14326"></a><span class="lineno">14326</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l14327"></a><span class="lineno">14327</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>) {</div>
<div class="line"><a name="l14328"></a><span class="lineno">14328</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stack_trace = message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a0ea6b58852e1195e30e2497e56d0782f">GetStackTrace</a>();</div>
<div class="line"><a name="l14329"></a><span class="lineno">14329</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>());</div>
<div class="line"><a name="l14330"></a><span class="lineno">14330</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(<span class="stringliteral">&quot;origin&quot;</span>, <span class="stringliteral">&quot;foo&quot;</span>, 2, 3, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14331"></a><span class="lineno">14331</span>&#160;                  stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(0));</div>
<div class="line"><a name="l14332"></a><span class="lineno">14332</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a>(<span class="stringliteral">&quot;origin&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>, 5, 3, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l14333"></a><span class="lineno">14333</span>&#160;                  stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(1));</div>
<div class="line"><a name="l14334"></a><span class="lineno">14334</span>&#160;}</div>
<div class="line"><a name="l14335"></a><span class="lineno">14335</span>&#160;</div>
<div class="line"><a name="l14336"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae03c67ef3ec43b6d143231a3b16345e6">14336</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CaptureStackTraceForUncaughtException) {</div>
<div class="line"><a name="l14337"></a><span class="lineno">14337</span>&#160;  report_count = 0;</div>
<div class="line"><a name="l14338"></a><span class="lineno">14338</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14339"></a><span class="lineno">14339</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14340"></a><span class="lineno">14340</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(StackTraceForUncaughtExceptionListener);</div>
<div class="line"><a name="l14341"></a><span class="lineno">14341</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l14342"></a><span class="lineno">14342</span>&#160;</div>
<div class="line"><a name="l14343"></a><span class="lineno">14343</span>&#160;  Script::Compile(v8_str(<span class="stringliteral">&quot;function foo() {\n&quot;</span></div>
<div class="line"><a name="l14344"></a><span class="lineno">14344</span>&#160;                         <span class="stringliteral">&quot;  throw 1;\n&quot;</span></div>
<div class="line"><a name="l14345"></a><span class="lineno">14345</span>&#160;                         <span class="stringliteral">&quot;};\n&quot;</span></div>
<div class="line"><a name="l14346"></a><span class="lineno">14346</span>&#160;                         <span class="stringliteral">&quot;function bar() {\n&quot;</span></div>
<div class="line"><a name="l14347"></a><span class="lineno">14347</span>&#160;                         <span class="stringliteral">&quot;  foo();\n&quot;</span></div>
<div class="line"><a name="l14348"></a><span class="lineno">14348</span>&#160;                         <span class="stringliteral">&quot;};&quot;</span>),</div>
<div class="line"><a name="l14349"></a><span class="lineno">14349</span>&#160;                  v8_str(<span class="stringliteral">&quot;origin&quot;</span>))-&gt;Run();</div>
<div class="line"><a name="l14350"></a><span class="lineno">14350</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> global = env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l14351"></a><span class="lineno">14351</span>&#160;  Local&lt;Value&gt; trouble = global-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><a name="l14352"></a><span class="lineno">14352</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(trouble-&gt;IsFunction());</div>
<div class="line"><a name="l14353"></a><span class="lineno">14353</span>&#160;  Function::Cast(*trouble)-&gt;Call(global, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l14354"></a><span class="lineno">14354</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l14355"></a><span class="lineno">14355</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(StackTraceForUncaughtExceptionListener);</div>
<div class="line"><a name="l14356"></a><span class="lineno">14356</span>&#160;}</div>
<div class="line"><a name="l14357"></a><span class="lineno">14357</span>&#160;</div>
<div class="line"><a name="l14358"></a><span class="lineno">14358</span>&#160;</div>
<div class="line"><a name="l14359"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9c79d6c64fae33f36b4ec5dce97e5c63">14359</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CaptureStackTraceForUncaughtExceptionAndSetters) {</div>
<div class="line"><a name="l14360"></a><span class="lineno">14360</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14361"></a><span class="lineno">14361</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14362"></a><span class="lineno">14362</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">true</span>,</div>
<div class="line"><a name="l14363"></a><span class="lineno">14363</span>&#160;                                                    1024,</div>
<div class="line"><a name="l14364"></a><span class="lineno">14364</span>&#160;                                                    <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a39e2c28285628da5cf81818663e2ace0aa8d866ffc5cb1fdd2aec774a39165c59">v8::StackTrace::kDetailed</a>);</div>
<div class="line"><a name="l14365"></a><span class="lineno">14365</span>&#160;</div>
<div class="line"><a name="l14366"></a><span class="lineno">14366</span>&#160;  CompileRun(</div>
<div class="line"><a name="l14367"></a><span class="lineno">14367</span>&#160;      <span class="stringliteral">&quot;var setters = [&#39;column&#39;, &#39;lineNumber&#39;, &#39;scriptName&#39;,\n&quot;</span></div>
<div class="line"><a name="l14368"></a><span class="lineno">14368</span>&#160;      <span class="stringliteral">&quot;    &#39;scriptNameOrSourceURL&#39;, &#39;functionName&#39;, &#39;isEval&#39;,\n&quot;</span></div>
<div class="line"><a name="l14369"></a><span class="lineno">14369</span>&#160;      <span class="stringliteral">&quot;    &#39;isConstructor&#39;];\n&quot;</span></div>
<div class="line"><a name="l14370"></a><span class="lineno">14370</span>&#160;      <span class="stringliteral">&quot;for (var i = 0; i &lt; setters.length; i++) {\n&quot;</span></div>
<div class="line"><a name="l14371"></a><span class="lineno">14371</span>&#160;      <span class="stringliteral">&quot;  var prop = setters[i];\n&quot;</span></div>
<div class="line"><a name="l14372"></a><span class="lineno">14372</span>&#160;      <span class="stringliteral">&quot;  Object.prototype.__defineSetter__(prop, function() { throw prop; });\n&quot;</span></div>
<div class="line"><a name="l14373"></a><span class="lineno">14373</span>&#160;      <span class="stringliteral">&quot;}\n&quot;</span>);</div>
<div class="line"><a name="l14374"></a><span class="lineno">14374</span>&#160;  CompileRun(<span class="stringliteral">&quot;throw &#39;exception&#39;;&quot;</span>);</div>
<div class="line"><a name="l14375"></a><span class="lineno">14375</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l14376"></a><span class="lineno">14376</span>&#160;}</div>
<div class="line"><a name="l14377"></a><span class="lineno">14377</span>&#160;</div>
<div class="line"><a name="l14378"></a><span class="lineno">14378</span>&#160;</div>
<div class="line"><a name="l14379"></a><span class="lineno">14379</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RethrowStackTraceHandler(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l14380"></a><span class="lineno">14380</span>&#160;                                     <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> data) {</div>
<div class="line"><a name="l14381"></a><span class="lineno">14381</span>&#160;  <span class="comment">// Use the frame where JavaScript is called from.</span></div>
<div class="line"><a name="l14382"></a><span class="lineno">14382</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stack_trace = message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a0ea6b58852e1195e30e2497e56d0782f">GetStackTrace</a>();</div>
<div class="line"><a name="l14383"></a><span class="lineno">14383</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!stack_trace.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l14384"></a><span class="lineno">14384</span>&#160;  <span class="keywordtype">int</span> frame_count = stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>();</div>
<div class="line"><a name="l14385"></a><span class="lineno">14385</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, frame_count);</div>
<div class="line"><a name="l14386"></a><span class="lineno">14386</span>&#160;  <span class="keywordtype">int</span> line_number[] = {1, 2, 5};</div>
<div class="line"><a name="l14387"></a><span class="lineno">14387</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; frame_count; i++) {</div>
<div class="line"><a name="l14388"></a><span class="lineno">14388</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(line_number[i], stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(i)-&gt;GetLineNumber());</div>
<div class="line"><a name="l14389"></a><span class="lineno">14389</span>&#160;  }</div>
<div class="line"><a name="l14390"></a><span class="lineno">14390</span>&#160;}</div>
<div class="line"><a name="l14391"></a><span class="lineno">14391</span>&#160;</div>
<div class="line"><a name="l14392"></a><span class="lineno">14392</span>&#160;</div>
<div class="line"><a name="l14393"></a><span class="lineno">14393</span>&#160;<span class="comment">// Test that we only return the stack trace at the site where the exception</span></div>
<div class="line"><a name="l14394"></a><span class="lineno">14394</span>&#160;<span class="comment">// is first thrown (not where it is rethrown).</span></div>
<div class="line"><a name="l14395"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad47d38f85c5f6a9ee6d06bd331e90ade">14395</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RethrowStackTrace) {</div>
<div class="line"><a name="l14396"></a><span class="lineno">14396</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14397"></a><span class="lineno">14397</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14398"></a><span class="lineno">14398</span>&#160;  <span class="comment">// We make sure that</span></div>
<div class="line"><a name="l14399"></a><span class="lineno">14399</span>&#160;  <span class="comment">// - the stack trace of the ReferenceError in g() is reported.</span></div>
<div class="line"><a name="l14400"></a><span class="lineno">14400</span>&#160;  <span class="comment">// - the stack trace is not overwritten when e1 is rethrown by t().</span></div>
<div class="line"><a name="l14401"></a><span class="lineno">14401</span>&#160;  <span class="comment">// - the stack trace of e2 does not overwrite that of e1.</span></div>
<div class="line"><a name="l14402"></a><span class="lineno">14402</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* source =</div>
<div class="line"><a name="l14403"></a><span class="lineno">14403</span>&#160;      <span class="stringliteral">&quot;function g() { error; }          \n&quot;</span></div>
<div class="line"><a name="l14404"></a><span class="lineno">14404</span>&#160;      <span class="stringliteral">&quot;function f() { g(); }            \n&quot;</span></div>
<div class="line"><a name="l14405"></a><span class="lineno">14405</span>&#160;      <span class="stringliteral">&quot;function t(e) { throw e; }       \n&quot;</span></div>
<div class="line"><a name="l14406"></a><span class="lineno">14406</span>&#160;      <span class="stringliteral">&quot;try {                            \n&quot;</span></div>
<div class="line"><a name="l14407"></a><span class="lineno">14407</span>&#160;      <span class="stringliteral">&quot;  f();                           \n&quot;</span></div>
<div class="line"><a name="l14408"></a><span class="lineno">14408</span>&#160;      <span class="stringliteral">&quot;} catch (e1) {                   \n&quot;</span></div>
<div class="line"><a name="l14409"></a><span class="lineno">14409</span>&#160;      <span class="stringliteral">&quot;  try {                          \n&quot;</span></div>
<div class="line"><a name="l14410"></a><span class="lineno">14410</span>&#160;      <span class="stringliteral">&quot;    error;                       \n&quot;</span></div>
<div class="line"><a name="l14411"></a><span class="lineno">14411</span>&#160;      <span class="stringliteral">&quot;  } catch (e2) {                 \n&quot;</span></div>
<div class="line"><a name="l14412"></a><span class="lineno">14412</span>&#160;      <span class="stringliteral">&quot;    t(e1);                       \n&quot;</span></div>
<div class="line"><a name="l14413"></a><span class="lineno">14413</span>&#160;      <span class="stringliteral">&quot;  }                              \n&quot;</span></div>
<div class="line"><a name="l14414"></a><span class="lineno">14414</span>&#160;      <span class="stringliteral">&quot;}                                \n&quot;</span>;</div>
<div class="line"><a name="l14415"></a><span class="lineno">14415</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(RethrowStackTraceHandler);</div>
<div class="line"><a name="l14416"></a><span class="lineno">14416</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l14417"></a><span class="lineno">14417</span>&#160;  CompileRun(source);</div>
<div class="line"><a name="l14418"></a><span class="lineno">14418</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l14419"></a><span class="lineno">14419</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(RethrowStackTraceHandler);</div>
<div class="line"><a name="l14420"></a><span class="lineno">14420</span>&#160;}</div>
<div class="line"><a name="l14421"></a><span class="lineno">14421</span>&#160;</div>
<div class="line"><a name="l14422"></a><span class="lineno">14422</span>&#160;</div>
<div class="line"><a name="l14423"></a><span class="lineno">14423</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RethrowPrimitiveStackTraceHandler(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l14424"></a><span class="lineno">14424</span>&#160;                                              <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> data) {</div>
<div class="line"><a name="l14425"></a><span class="lineno">14425</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stack_trace = message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a0ea6b58852e1195e30e2497e56d0782f">GetStackTrace</a>();</div>
<div class="line"><a name="l14426"></a><span class="lineno">14426</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!stack_trace.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l14427"></a><span class="lineno">14427</span>&#160;  <span class="keywordtype">int</span> frame_count = stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>();</div>
<div class="line"><a name="l14428"></a><span class="lineno">14428</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, frame_count);</div>
<div class="line"><a name="l14429"></a><span class="lineno">14429</span>&#160;  <span class="keywordtype">int</span> line_number[] = {3, 7};</div>
<div class="line"><a name="l14430"></a><span class="lineno">14430</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; frame_count; i++) {</div>
<div class="line"><a name="l14431"></a><span class="lineno">14431</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(line_number[i], stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(i)-&gt;GetLineNumber());</div>
<div class="line"><a name="l14432"></a><span class="lineno">14432</span>&#160;  }</div>
<div class="line"><a name="l14433"></a><span class="lineno">14433</span>&#160;}</div>
<div class="line"><a name="l14434"></a><span class="lineno">14434</span>&#160;</div>
<div class="line"><a name="l14435"></a><span class="lineno">14435</span>&#160;</div>
<div class="line"><a name="l14436"></a><span class="lineno">14436</span>&#160;<span class="comment">// Test that we do not recognize identity for primitive exceptions.</span></div>
<div class="line"><a name="l14437"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a56ece402cdf02a9539abc4decc620fd8">14437</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RethrowPrimitiveStackTrace) {</div>
<div class="line"><a name="l14438"></a><span class="lineno">14438</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14439"></a><span class="lineno">14439</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14440"></a><span class="lineno">14440</span>&#160;  <span class="comment">// We do not capture stack trace for non Error objects on creation time.</span></div>
<div class="line"><a name="l14441"></a><span class="lineno">14441</span>&#160;  <span class="comment">// Instead, we capture the stack trace on last throw.</span></div>
<div class="line"><a name="l14442"></a><span class="lineno">14442</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* source =</div>
<div class="line"><a name="l14443"></a><span class="lineno">14443</span>&#160;      <span class="stringliteral">&quot;function g() { throw 404; }      \n&quot;</span></div>
<div class="line"><a name="l14444"></a><span class="lineno">14444</span>&#160;      <span class="stringliteral">&quot;function f() { g(); }            \n&quot;</span></div>
<div class="line"><a name="l14445"></a><span class="lineno">14445</span>&#160;      <span class="stringliteral">&quot;function t(e) { throw e; }       \n&quot;</span></div>
<div class="line"><a name="l14446"></a><span class="lineno">14446</span>&#160;      <span class="stringliteral">&quot;try {                            \n&quot;</span></div>
<div class="line"><a name="l14447"></a><span class="lineno">14447</span>&#160;      <span class="stringliteral">&quot;  f();                           \n&quot;</span></div>
<div class="line"><a name="l14448"></a><span class="lineno">14448</span>&#160;      <span class="stringliteral">&quot;} catch (e1) {                   \n&quot;</span></div>
<div class="line"><a name="l14449"></a><span class="lineno">14449</span>&#160;      <span class="stringliteral">&quot;  t(e1)                          \n&quot;</span></div>
<div class="line"><a name="l14450"></a><span class="lineno">14450</span>&#160;      <span class="stringliteral">&quot;}                                \n&quot;</span>;</div>
<div class="line"><a name="l14451"></a><span class="lineno">14451</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(RethrowPrimitiveStackTraceHandler);</div>
<div class="line"><a name="l14452"></a><span class="lineno">14452</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l14453"></a><span class="lineno">14453</span>&#160;  CompileRun(source);</div>
<div class="line"><a name="l14454"></a><span class="lineno">14454</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l14455"></a><span class="lineno">14455</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(RethrowPrimitiveStackTraceHandler);</div>
<div class="line"><a name="l14456"></a><span class="lineno">14456</span>&#160;}</div>
<div class="line"><a name="l14457"></a><span class="lineno">14457</span>&#160;</div>
<div class="line"><a name="l14458"></a><span class="lineno">14458</span>&#160;</div>
<div class="line"><a name="l14459"></a><span class="lineno">14459</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RethrowExistingStackTraceHandler(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l14460"></a><span class="lineno">14460</span>&#160;                                              <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> data) {</div>
<div class="line"><a name="l14461"></a><span class="lineno">14461</span>&#160;  <span class="comment">// Use the frame where JavaScript is called from.</span></div>
<div class="line"><a name="l14462"></a><span class="lineno">14462</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stack_trace = message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a0ea6b58852e1195e30e2497e56d0782f">GetStackTrace</a>();</div>
<div class="line"><a name="l14463"></a><span class="lineno">14463</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!stack_trace.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l14464"></a><span class="lineno">14464</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>());</div>
<div class="line"><a name="l14465"></a><span class="lineno">14465</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(0)-&gt;GetLineNumber());</div>
<div class="line"><a name="l14466"></a><span class="lineno">14466</span>&#160;}</div>
<div class="line"><a name="l14467"></a><span class="lineno">14467</span>&#160;</div>
<div class="line"><a name="l14468"></a><span class="lineno">14468</span>&#160;</div>
<div class="line"><a name="l14469"></a><span class="lineno">14469</span>&#160;<span class="comment">// Test that the stack trace is captured when the error object is created and</span></div>
<div class="line"><a name="l14470"></a><span class="lineno">14470</span>&#160;<span class="comment">// not where it is thrown.</span></div>
<div class="line"><a name="l14471"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a838e4aca86455c801e9ae6a57b15abf5">14471</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RethrowExistingStackTrace) {</div>
<div class="line"><a name="l14472"></a><span class="lineno">14472</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14473"></a><span class="lineno">14473</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14474"></a><span class="lineno">14474</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* source =</div>
<div class="line"><a name="l14475"></a><span class="lineno">14475</span>&#160;      <span class="stringliteral">&quot;var e = new Error();           \n&quot;</span></div>
<div class="line"><a name="l14476"></a><span class="lineno">14476</span>&#160;      <span class="stringliteral">&quot;throw e;                       \n&quot;</span>;</div>
<div class="line"><a name="l14477"></a><span class="lineno">14477</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(RethrowExistingStackTraceHandler);</div>
<div class="line"><a name="l14478"></a><span class="lineno">14478</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l14479"></a><span class="lineno">14479</span>&#160;  CompileRun(source);</div>
<div class="line"><a name="l14480"></a><span class="lineno">14480</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l14481"></a><span class="lineno">14481</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(RethrowExistingStackTraceHandler);</div>
<div class="line"><a name="l14482"></a><span class="lineno">14482</span>&#160;}</div>
<div class="line"><a name="l14483"></a><span class="lineno">14483</span>&#160;</div>
<div class="line"><a name="l14484"></a><span class="lineno">14484</span>&#160;</div>
<div class="line"><a name="l14485"></a><span class="lineno">14485</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> RethrowBogusErrorStackTraceHandler(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message,</div>
<div class="line"><a name="l14486"></a><span class="lineno">14486</span>&#160;                                               <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> data) {</div>
<div class="line"><a name="l14487"></a><span class="lineno">14487</span>&#160;  <span class="comment">// Use the frame where JavaScript is called from.</span></div>
<div class="line"><a name="l14488"></a><span class="lineno">14488</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stack_trace = message-&gt;<a class="code" href="../../d9/d28/classv8_1_1_message.html#a0ea6b58852e1195e30e2497e56d0782f">GetStackTrace</a>();</div>
<div class="line"><a name="l14489"></a><span class="lineno">14489</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!stack_trace.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l14490"></a><span class="lineno">14490</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>());</div>
<div class="line"><a name="l14491"></a><span class="lineno">14491</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, stack_trace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(0)-&gt;GetLineNumber());</div>
<div class="line"><a name="l14492"></a><span class="lineno">14492</span>&#160;}</div>
<div class="line"><a name="l14493"></a><span class="lineno">14493</span>&#160;</div>
<div class="line"><a name="l14494"></a><span class="lineno">14494</span>&#160;</div>
<div class="line"><a name="l14495"></a><span class="lineno">14495</span>&#160;<span class="comment">// Test that the stack trace is captured where the bogus Error object is thrown.</span></div>
<div class="line"><a name="l14496"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afce9b298544fbd0fb49daadf4e113435">14496</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RethrowBogusErrorStackTrace) {</div>
<div class="line"><a name="l14497"></a><span class="lineno">14497</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14498"></a><span class="lineno">14498</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14499"></a><span class="lineno">14499</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* source =</div>
<div class="line"><a name="l14500"></a><span class="lineno">14500</span>&#160;      <span class="stringliteral">&quot;var e = {__proto__: new Error()} \n&quot;</span></div>
<div class="line"><a name="l14501"></a><span class="lineno">14501</span>&#160;      <span class="stringliteral">&quot;throw e;                         \n&quot;</span>;</div>
<div class="line"><a name="l14502"></a><span class="lineno">14502</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a>(RethrowBogusErrorStackTraceHandler);</div>
<div class="line"><a name="l14503"></a><span class="lineno">14503</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l14504"></a><span class="lineno">14504</span>&#160;  CompileRun(source);</div>
<div class="line"><a name="l14505"></a><span class="lineno">14505</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l14506"></a><span class="lineno">14506</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a>(RethrowBogusErrorStackTraceHandler);</div>
<div class="line"><a name="l14507"></a><span class="lineno">14507</span>&#160;}</div>
<div class="line"><a name="l14508"></a><span class="lineno">14508</span>&#160;</div>
<div class="line"><a name="l14509"></a><span class="lineno">14509</span>&#160;</div>
<div class="line"><a name="l14510"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7854f298cf2216e5fdcdbad2ffdce3b0">14510</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#a7854f298cf2216e5fdcdbad2ffdce3b0">AnalyzeStackOfEvalWithSourceURL</a>(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l14511"></a><span class="lineno">14511</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14512"></a><span class="lineno">14512</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stackTrace =</div>
<div class="line"><a name="l14513"></a><span class="lineno">14513</span>&#160;      <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#aa93d39d0ce6cbc3e71b2b94c0557bf6b">v8::StackTrace::CurrentStackTrace</a>(10, <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a39e2c28285628da5cf81818663e2ace0aa8d866ffc5cb1fdd2aec774a39165c59">v8::StackTrace::kDetailed</a>);</div>
<div class="line"><a name="l14514"></a><span class="lineno">14514</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>());</div>
<div class="line"><a name="l14515"></a><span class="lineno">14515</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> url = v8_str(<span class="stringliteral">&quot;eval_url&quot;</span>);</div>
<div class="line"><a name="l14516"></a><span class="lineno">14516</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++) {</div>
<div class="line"><a name="l14517"></a><span class="lineno">14517</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> name =</div>
<div class="line"><a name="l14518"></a><span class="lineno">14518</span>&#160;        stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(i)-&gt;GetScriptNameOrSourceURL();</div>
<div class="line"><a name="l14519"></a><span class="lineno">14519</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!name.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l14520"></a><span class="lineno">14520</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(url, name);</div>
<div class="line"><a name="l14521"></a><span class="lineno">14521</span>&#160;  }</div>
<div class="line"><a name="l14522"></a><span class="lineno">14522</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l14523"></a><span class="lineno">14523</span>&#160;}</div>
<div class="line"><a name="l14524"></a><span class="lineno">14524</span>&#160;</div>
<div class="line"><a name="l14525"></a><span class="lineno">14525</span>&#160;</div>
<div class="line"><a name="l14526"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa3859c2ba6b51bbaaf706345ec662668">14526</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(SourceURLInStackTrace) {</div>
<div class="line"><a name="l14527"></a><span class="lineno">14527</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14528"></a><span class="lineno">14528</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l14529"></a><span class="lineno">14529</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;AnalyzeStackOfEvalWithSourceURL&quot;</span>),</div>
<div class="line"><a name="l14530"></a><span class="lineno">14530</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a7854f298cf2216e5fdcdbad2ffdce3b0">AnalyzeStackOfEvalWithSourceURL</a>));</div>
<div class="line"><a name="l14531"></a><span class="lineno">14531</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l14532"></a><span class="lineno">14532</span>&#160;</div>
<div class="line"><a name="l14533"></a><span class="lineno">14533</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *source =</div>
<div class="line"><a name="l14534"></a><span class="lineno">14534</span>&#160;    <span class="stringliteral">&quot;function outer() {\n&quot;</span></div>
<div class="line"><a name="l14535"></a><span class="lineno">14535</span>&#160;    <span class="stringliteral">&quot;function bar() {\n&quot;</span></div>
<div class="line"><a name="l14536"></a><span class="lineno">14536</span>&#160;    <span class="stringliteral">&quot;  AnalyzeStackOfEvalWithSourceURL();\n&quot;</span></div>
<div class="line"><a name="l14537"></a><span class="lineno">14537</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14538"></a><span class="lineno">14538</span>&#160;    <span class="stringliteral">&quot;function foo() {\n&quot;</span></div>
<div class="line"><a name="l14539"></a><span class="lineno">14539</span>&#160;    <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l14540"></a><span class="lineno">14540</span>&#160;    <span class="stringliteral">&quot;  bar();\n&quot;</span></div>
<div class="line"><a name="l14541"></a><span class="lineno">14541</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14542"></a><span class="lineno">14542</span>&#160;    <span class="stringliteral">&quot;foo();\n&quot;</span></div>
<div class="line"><a name="l14543"></a><span class="lineno">14543</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14544"></a><span class="lineno">14544</span>&#160;    <span class="stringliteral">&quot;eval(&#39;(&#39; + outer +&#39;)()//@ sourceURL=eval_url&#39;);&quot;</span>;</div>
<div class="line"><a name="l14545"></a><span class="lineno">14545</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRun(source)-&gt;IsUndefined());</div>
<div class="line"><a name="l14546"></a><span class="lineno">14546</span>&#160;}</div>
<div class="line"><a name="l14547"></a><span class="lineno">14547</span>&#160;</div>
<div class="line"><a name="l14548"></a><span class="lineno">14548</span>&#160;</div>
<div class="line"><a name="l14549"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#acf7fe3d9a31a795fde0a9eb765ce42fb">14549</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#acf7fe3d9a31a795fde0a9eb765ce42fb">AnalyzeStackOfInlineScriptWithSourceURL</a>(</div>
<div class="line"><a name="l14550"></a><span class="lineno">14550</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l14551"></a><span class="lineno">14551</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14552"></a><span class="lineno">14552</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stackTrace =</div>
<div class="line"><a name="l14553"></a><span class="lineno">14553</span>&#160;      <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#aa93d39d0ce6cbc3e71b2b94c0557bf6b">v8::StackTrace::CurrentStackTrace</a>(10, <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a39e2c28285628da5cf81818663e2ace0aa8d866ffc5cb1fdd2aec774a39165c59">v8::StackTrace::kDetailed</a>);</div>
<div class="line"><a name="l14554"></a><span class="lineno">14554</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>());</div>
<div class="line"><a name="l14555"></a><span class="lineno">14555</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> url = v8_str(<span class="stringliteral">&quot;url&quot;</span>);</div>
<div class="line"><a name="l14556"></a><span class="lineno">14556</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++) {</div>
<div class="line"><a name="l14557"></a><span class="lineno">14557</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> name =</div>
<div class="line"><a name="l14558"></a><span class="lineno">14558</span>&#160;        stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(i)-&gt;GetScriptNameOrSourceURL();</div>
<div class="line"><a name="l14559"></a><span class="lineno">14559</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!name.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l14560"></a><span class="lineno">14560</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(url, name);</div>
<div class="line"><a name="l14561"></a><span class="lineno">14561</span>&#160;  }</div>
<div class="line"><a name="l14562"></a><span class="lineno">14562</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l14563"></a><span class="lineno">14563</span>&#160;}</div>
<div class="line"><a name="l14564"></a><span class="lineno">14564</span>&#160;</div>
<div class="line"><a name="l14565"></a><span class="lineno">14565</span>&#160;</div>
<div class="line"><a name="l14566"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a66788efc47a40fd1cb3950262ceac28a">14566</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(InlineScriptWithSourceURLInStackTrace) {</div>
<div class="line"><a name="l14567"></a><span class="lineno">14567</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14568"></a><span class="lineno">14568</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l14569"></a><span class="lineno">14569</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;AnalyzeStackOfInlineScriptWithSourceURL&quot;</span>),</div>
<div class="line"><a name="l14570"></a><span class="lineno">14570</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(</div>
<div class="line"><a name="l14571"></a><span class="lineno">14571</span>&#160;                 <a class="code" href="../../de/d3f/test-api_8cc.html#acf7fe3d9a31a795fde0a9eb765ce42fb">AnalyzeStackOfInlineScriptWithSourceURL</a>));</div>
<div class="line"><a name="l14572"></a><span class="lineno">14572</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l14573"></a><span class="lineno">14573</span>&#160;</div>
<div class="line"><a name="l14574"></a><span class="lineno">14574</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *source =</div>
<div class="line"><a name="l14575"></a><span class="lineno">14575</span>&#160;    <span class="stringliteral">&quot;function outer() {\n&quot;</span></div>
<div class="line"><a name="l14576"></a><span class="lineno">14576</span>&#160;    <span class="stringliteral">&quot;function bar() {\n&quot;</span></div>
<div class="line"><a name="l14577"></a><span class="lineno">14577</span>&#160;    <span class="stringliteral">&quot;  AnalyzeStackOfInlineScriptWithSourceURL();\n&quot;</span></div>
<div class="line"><a name="l14578"></a><span class="lineno">14578</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14579"></a><span class="lineno">14579</span>&#160;    <span class="stringliteral">&quot;function foo() {\n&quot;</span></div>
<div class="line"><a name="l14580"></a><span class="lineno">14580</span>&#160;    <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l14581"></a><span class="lineno">14581</span>&#160;    <span class="stringliteral">&quot;  bar();\n&quot;</span></div>
<div class="line"><a name="l14582"></a><span class="lineno">14582</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14583"></a><span class="lineno">14583</span>&#160;    <span class="stringliteral">&quot;foo();\n&quot;</span></div>
<div class="line"><a name="l14584"></a><span class="lineno">14584</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14585"></a><span class="lineno">14585</span>&#160;    <span class="stringliteral">&quot;outer()\n&quot;</span></div>
<div class="line"><a name="l14586"></a><span class="lineno">14586</span>&#160;    <span class="stringliteral">&quot;//@ sourceURL=source_url&quot;</span>;</div>
<div class="line"><a name="l14587"></a><span class="lineno">14587</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRunWithOrigin(source, <span class="stringliteral">&quot;url&quot;</span>, 0, 1)-&gt;IsUndefined());</div>
<div class="line"><a name="l14588"></a><span class="lineno">14588</span>&#160;}</div>
<div class="line"><a name="l14589"></a><span class="lineno">14589</span>&#160;</div>
<div class="line"><a name="l14590"></a><span class="lineno">14590</span>&#160;</div>
<div class="line"><a name="l14591"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#adbf43fbdca32e41430ae60c912fc509c">14591</a></span>&#160;<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> <a class="code" href="../../de/d3f/test-api_8cc.html#adbf43fbdca32e41430ae60c912fc509c">AnalyzeStackOfDynamicScriptWithSourceURL</a>(</div>
<div class="line"><a name="l14592"></a><span class="lineno">14592</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l14593"></a><span class="lineno">14593</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14594"></a><span class="lineno">14594</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::StackTrace&gt;</a> stackTrace =</div>
<div class="line"><a name="l14595"></a><span class="lineno">14595</span>&#160;      <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#aa93d39d0ce6cbc3e71b2b94c0557bf6b">v8::StackTrace::CurrentStackTrace</a>(10, <a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a39e2c28285628da5cf81818663e2ace0aa8d866ffc5cb1fdd2aec774a39165c59">v8::StackTrace::kDetailed</a>);</div>
<div class="line"><a name="l14596"></a><span class="lineno">14596</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">GetFrameCount</a>());</div>
<div class="line"><a name="l14597"></a><span class="lineno">14597</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> url = v8_str(<span class="stringliteral">&quot;source_url&quot;</span>);</div>
<div class="line"><a name="l14598"></a><span class="lineno">14598</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++) {</div>
<div class="line"><a name="l14599"></a><span class="lineno">14599</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> name =</div>
<div class="line"><a name="l14600"></a><span class="lineno">14600</span>&#160;        stackTrace-&gt;<a class="code" href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">GetFrame</a>(i)-&gt;GetScriptNameOrSourceURL();</div>
<div class="line"><a name="l14601"></a><span class="lineno">14601</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!name.<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">IsEmpty</a>());</div>
<div class="line"><a name="l14602"></a><span class="lineno">14602</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(url, name);</div>
<div class="line"><a name="l14603"></a><span class="lineno">14603</span>&#160;  }</div>
<div class="line"><a name="l14604"></a><span class="lineno">14604</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l14605"></a><span class="lineno">14605</span>&#160;}</div>
<div class="line"><a name="l14606"></a><span class="lineno">14606</span>&#160;</div>
<div class="line"><a name="l14607"></a><span class="lineno">14607</span>&#160;</div>
<div class="line"><a name="l14608"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a13b98ae6a0b952919d0d0b2353f85c28">14608</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DynamicWithSourceURLInStackTrace) {</div>
<div class="line"><a name="l14609"></a><span class="lineno">14609</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14610"></a><span class="lineno">14610</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l14611"></a><span class="lineno">14611</span>&#160;  templ-&gt;Set(v8_str(<span class="stringliteral">&quot;AnalyzeStackOfDynamicScriptWithSourceURL&quot;</span>),</div>
<div class="line"><a name="l14612"></a><span class="lineno">14612</span>&#160;             <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(</div>
<div class="line"><a name="l14613"></a><span class="lineno">14613</span>&#160;                 <a class="code" href="../../de/d3f/test-api_8cc.html#adbf43fbdca32e41430ae60c912fc509c">AnalyzeStackOfDynamicScriptWithSourceURL</a>));</div>
<div class="line"><a name="l14614"></a><span class="lineno">14614</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context(0, templ);</div>
<div class="line"><a name="l14615"></a><span class="lineno">14615</span>&#160;</div>
<div class="line"><a name="l14616"></a><span class="lineno">14616</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *source =</div>
<div class="line"><a name="l14617"></a><span class="lineno">14617</span>&#160;    <span class="stringliteral">&quot;function outer() {\n&quot;</span></div>
<div class="line"><a name="l14618"></a><span class="lineno">14618</span>&#160;    <span class="stringliteral">&quot;function bar() {\n&quot;</span></div>
<div class="line"><a name="l14619"></a><span class="lineno">14619</span>&#160;    <span class="stringliteral">&quot;  AnalyzeStackOfDynamicScriptWithSourceURL();\n&quot;</span></div>
<div class="line"><a name="l14620"></a><span class="lineno">14620</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14621"></a><span class="lineno">14621</span>&#160;    <span class="stringliteral">&quot;function foo() {\n&quot;</span></div>
<div class="line"><a name="l14622"></a><span class="lineno">14622</span>&#160;    <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l14623"></a><span class="lineno">14623</span>&#160;    <span class="stringliteral">&quot;  bar();\n&quot;</span></div>
<div class="line"><a name="l14624"></a><span class="lineno">14624</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14625"></a><span class="lineno">14625</span>&#160;    <span class="stringliteral">&quot;foo();\n&quot;</span></div>
<div class="line"><a name="l14626"></a><span class="lineno">14626</span>&#160;    <span class="stringliteral">&quot;}\n&quot;</span></div>
<div class="line"><a name="l14627"></a><span class="lineno">14627</span>&#160;    <span class="stringliteral">&quot;outer()\n&quot;</span></div>
<div class="line"><a name="l14628"></a><span class="lineno">14628</span>&#160;    <span class="stringliteral">&quot;//@ sourceURL=source_url&quot;</span>;</div>
<div class="line"><a name="l14629"></a><span class="lineno">14629</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(CompileRunWithOrigin(source, <span class="stringliteral">&quot;url&quot;</span>, 0, 0)-&gt;IsUndefined());</div>
<div class="line"><a name="l14630"></a><span class="lineno">14630</span>&#160;}</div>
<div class="line"><a name="l14631"></a><span class="lineno">14631</span>&#160;</div>
<div class="line"><a name="l14632"></a><span class="lineno">14632</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CreateGarbageInOldSpace() {</div>
<div class="line"><a name="l14633"></a><span class="lineno">14633</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14634"></a><span class="lineno">14634</span>&#160;  <a class="code" href="../../d4/d81/classv8_1_1internal_1_1_always_allocate_scope.html">i::AlwaysAllocateScope</a> always_allocate;</div>
<div class="line"><a name="l14635"></a><span class="lineno">14635</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1000; i++) {</div>
<div class="line"><a name="l14636"></a><span class="lineno">14636</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;NewFixedArray(1000, <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0c32b379e3be65ce7c8fe0bfe51eb7eaaf3d0d752de4b5754a85fcdaaf0a2f26c">i::TENURED</a>);</div>
<div class="line"><a name="l14637"></a><span class="lineno">14637</span>&#160;  }</div>
<div class="line"><a name="l14638"></a><span class="lineno">14638</span>&#160;}</div>
<div class="line"><a name="l14639"></a><span class="lineno">14639</span>&#160;</div>
<div class="line"><a name="l14640"></a><span class="lineno">14640</span>&#160;<span class="comment">// Test that idle notification can be handled and eventually returns true.</span></div>
<div class="line"><a name="l14641"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a484ad0484cde187ff5f24e15091ac5d4">14641</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(IdleNotification) {</div>
<div class="line"><a name="l14642"></a><span class="lineno">14642</span>&#160;  <span class="keyword">const</span> intptr_t <a class="code" href="../../d2/dc3/namespacev8.html#a36c35e1f867914bd49c60b7ccd6c4c13">MB</a> = 1024 * 1024;</div>
<div class="line"><a name="l14643"></a><span class="lineno">14643</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14644"></a><span class="lineno">14644</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14645"></a><span class="lineno">14645</span>&#160;  intptr_t initial_size = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14646"></a><span class="lineno">14646</span>&#160;  CreateGarbageInOldSpace();</div>
<div class="line"><a name="l14647"></a><span class="lineno">14647</span>&#160;  intptr_t size_with_garbage = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14648"></a><span class="lineno">14648</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ad5a1a3bc35696ef5a1070bca3a419c99">CHECK_GT</a>(size_with_garbage, initial_size + MB);</div>
<div class="line"><a name="l14649"></a><span class="lineno">14649</span>&#160;  <span class="keywordtype">bool</span> finished = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14650"></a><span class="lineno">14650</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 200 &amp;&amp; !finished; i++) {</div>
<div class="line"><a name="l14651"></a><span class="lineno">14651</span>&#160;    finished = <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae87fe2db7025f0198db74e937f22a39d">v8::V8::IdleNotification</a>();</div>
<div class="line"><a name="l14652"></a><span class="lineno">14652</span>&#160;  }</div>
<div class="line"><a name="l14653"></a><span class="lineno">14653</span>&#160;  intptr_t final_size = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14654"></a><span class="lineno">14654</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(finished);</div>
<div class="line"><a name="l14655"></a><span class="lineno">14655</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a2929b40885e8516ac074f2b53e033402">CHECK_LT</a>(final_size, initial_size + 1);</div>
<div class="line"><a name="l14656"></a><span class="lineno">14656</span>&#160;}</div>
<div class="line"><a name="l14657"></a><span class="lineno">14657</span>&#160;</div>
<div class="line"><a name="l14658"></a><span class="lineno">14658</span>&#160;</div>
<div class="line"><a name="l14659"></a><span class="lineno">14659</span>&#160;<span class="comment">// Test that idle notification can be handled and eventually collects garbage.</span></div>
<div class="line"><a name="l14660"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a53929b1506725292332c37c734f57bba">14660</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(IdleNotificationWithSmallHint) {</div>
<div class="line"><a name="l14661"></a><span class="lineno">14661</span>&#160;  <span class="keyword">const</span> intptr_t <a class="code" href="../../d2/dc3/namespacev8.html#a36c35e1f867914bd49c60b7ccd6c4c13">MB</a> = 1024 * 1024;</div>
<div class="line"><a name="l14662"></a><span class="lineno">14662</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> IdlePauseInMs = 900;</div>
<div class="line"><a name="l14663"></a><span class="lineno">14663</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14664"></a><span class="lineno">14664</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14665"></a><span class="lineno">14665</span>&#160;  intptr_t initial_size = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14666"></a><span class="lineno">14666</span>&#160;  CreateGarbageInOldSpace();</div>
<div class="line"><a name="l14667"></a><span class="lineno">14667</span>&#160;  intptr_t size_with_garbage = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14668"></a><span class="lineno">14668</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ad5a1a3bc35696ef5a1070bca3a419c99">CHECK_GT</a>(size_with_garbage, initial_size + MB);</div>
<div class="line"><a name="l14669"></a><span class="lineno">14669</span>&#160;  <span class="keywordtype">bool</span> finished = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14670"></a><span class="lineno">14670</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 200 &amp;&amp; !finished; i++) {</div>
<div class="line"><a name="l14671"></a><span class="lineno">14671</span>&#160;    finished = <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae87fe2db7025f0198db74e937f22a39d">v8::V8::IdleNotification</a>(IdlePauseInMs);</div>
<div class="line"><a name="l14672"></a><span class="lineno">14672</span>&#160;  }</div>
<div class="line"><a name="l14673"></a><span class="lineno">14673</span>&#160;  intptr_t final_size = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14674"></a><span class="lineno">14674</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(finished);</div>
<div class="line"><a name="l14675"></a><span class="lineno">14675</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a2929b40885e8516ac074f2b53e033402">CHECK_LT</a>(final_size, initial_size + 1);</div>
<div class="line"><a name="l14676"></a><span class="lineno">14676</span>&#160;}</div>
<div class="line"><a name="l14677"></a><span class="lineno">14677</span>&#160;</div>
<div class="line"><a name="l14678"></a><span class="lineno">14678</span>&#160;</div>
<div class="line"><a name="l14679"></a><span class="lineno">14679</span>&#160;<span class="comment">// Test that idle notification can be handled and eventually collects garbage.</span></div>
<div class="line"><a name="l14680"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afbce9c6e204af88cc5a54bd6b5c701d0">14680</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(IdleNotificationWithLargeHint) {</div>
<div class="line"><a name="l14681"></a><span class="lineno">14681</span>&#160;  <span class="keyword">const</span> intptr_t <a class="code" href="../../d2/dc3/namespacev8.html#a36c35e1f867914bd49c60b7ccd6c4c13">MB</a> = 1024 * 1024;</div>
<div class="line"><a name="l14682"></a><span class="lineno">14682</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> IdlePauseInMs = 900;</div>
<div class="line"><a name="l14683"></a><span class="lineno">14683</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14684"></a><span class="lineno">14684</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14685"></a><span class="lineno">14685</span>&#160;  intptr_t initial_size = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14686"></a><span class="lineno">14686</span>&#160;  CreateGarbageInOldSpace();</div>
<div class="line"><a name="l14687"></a><span class="lineno">14687</span>&#160;  intptr_t size_with_garbage = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14688"></a><span class="lineno">14688</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ad5a1a3bc35696ef5a1070bca3a419c99">CHECK_GT</a>(size_with_garbage, initial_size + MB);</div>
<div class="line"><a name="l14689"></a><span class="lineno">14689</span>&#160;  <span class="keywordtype">bool</span> finished = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14690"></a><span class="lineno">14690</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 200 &amp;&amp; !finished; i++) {</div>
<div class="line"><a name="l14691"></a><span class="lineno">14691</span>&#160;    finished = <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae87fe2db7025f0198db74e937f22a39d">v8::V8::IdleNotification</a>(IdlePauseInMs);</div>
<div class="line"><a name="l14692"></a><span class="lineno">14692</span>&#160;  }</div>
<div class="line"><a name="l14693"></a><span class="lineno">14693</span>&#160;  intptr_t final_size = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14694"></a><span class="lineno">14694</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(finished);</div>
<div class="line"><a name="l14695"></a><span class="lineno">14695</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a2929b40885e8516ac074f2b53e033402">CHECK_LT</a>(final_size, initial_size + 1);</div>
<div class="line"><a name="l14696"></a><span class="lineno">14696</span>&#160;}</div>
<div class="line"><a name="l14697"></a><span class="lineno">14697</span>&#160;</div>
<div class="line"><a name="l14698"></a><span class="lineno">14698</span>&#160;</div>
<div class="line"><a name="l14699"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aab2fc17fba0762d61bc9f29b8c88556a">14699</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(Regress2107) {</div>
<div class="line"><a name="l14700"></a><span class="lineno">14700</span>&#160;  <span class="keyword">const</span> intptr_t <a class="code" href="../../d2/dc3/namespacev8.html#a36c35e1f867914bd49c60b7ccd6c4c13">MB</a> = 1024 * 1024;</div>
<div class="line"><a name="l14701"></a><span class="lineno">14701</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kShortIdlePauseInMs = 100;</div>
<div class="line"><a name="l14702"></a><span class="lineno">14702</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kLongIdlePauseInMs = 1000;</div>
<div class="line"><a name="l14703"></a><span class="lineno">14703</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14704"></a><span class="lineno">14704</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14705"></a><span class="lineno">14705</span>&#160;  intptr_t initial_size = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14706"></a><span class="lineno">14706</span>&#160;  <span class="comment">// Send idle notification to start a round of incremental GCs.</span></div>
<div class="line"><a name="l14707"></a><span class="lineno">14707</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae87fe2db7025f0198db74e937f22a39d">v8::V8::IdleNotification</a>(kShortIdlePauseInMs);</div>
<div class="line"><a name="l14708"></a><span class="lineno">14708</span>&#160;  <span class="comment">// Emulate 7 page reloads.</span></div>
<div class="line"><a name="l14709"></a><span class="lineno">14709</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 7; i++) {</div>
<div class="line"><a name="l14710"></a><span class="lineno">14710</span>&#160;    <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Context&gt;</a> ctx = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l14711"></a><span class="lineno">14711</span>&#160;    ctx-&gt;Enter();</div>
<div class="line"><a name="l14712"></a><span class="lineno">14712</span>&#160;    CreateGarbageInOldSpace();</div>
<div class="line"><a name="l14713"></a><span class="lineno">14713</span>&#160;    ctx-&gt;Exit();</div>
<div class="line"><a name="l14714"></a><span class="lineno">14714</span>&#160;    ctx.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l14715"></a><span class="lineno">14715</span>&#160;    <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l14716"></a><span class="lineno">14716</span>&#160;    <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae87fe2db7025f0198db74e937f22a39d">v8::V8::IdleNotification</a>(kLongIdlePauseInMs);</div>
<div class="line"><a name="l14717"></a><span class="lineno">14717</span>&#160;  }</div>
<div class="line"><a name="l14718"></a><span class="lineno">14718</span>&#160;  <span class="comment">// Create garbage and check that idle notification still collects it.</span></div>
<div class="line"><a name="l14719"></a><span class="lineno">14719</span>&#160;  CreateGarbageInOldSpace();</div>
<div class="line"><a name="l14720"></a><span class="lineno">14720</span>&#160;  intptr_t size_with_garbage = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14721"></a><span class="lineno">14721</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#ad5a1a3bc35696ef5a1070bca3a419c99">CHECK_GT</a>(size_with_garbage, initial_size + MB);</div>
<div class="line"><a name="l14722"></a><span class="lineno">14722</span>&#160;  <span class="keywordtype">bool</span> finished = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14723"></a><span class="lineno">14723</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 200 &amp;&amp; !finished; i++) {</div>
<div class="line"><a name="l14724"></a><span class="lineno">14724</span>&#160;    finished = <a class="code" href="../../df/d43/classv8_1_1_v8.html#ae87fe2db7025f0198db74e937f22a39d">v8::V8::IdleNotification</a>(kShortIdlePauseInMs);</div>
<div class="line"><a name="l14725"></a><span class="lineno">14725</span>&#160;  }</div>
<div class="line"><a name="l14726"></a><span class="lineno">14726</span>&#160;  intptr_t final_size = <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;SizeOfObjects();</div>
<div class="line"><a name="l14727"></a><span class="lineno">14727</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a2929b40885e8516ac074f2b53e033402">CHECK_LT</a>(final_size, initial_size + 1);</div>
<div class="line"><a name="l14728"></a><span class="lineno">14728</span>&#160;}</div>
<div class="line"><a name="l14729"></a><span class="lineno">14729</span>&#160;</div>
<div class="line"><a name="l14730"></a><span class="lineno">14730</span>&#160;<span class="keyword">static</span> uint32_t* stack_limit;</div>
<div class="line"><a name="l14731"></a><span class="lineno">14731</span>&#160;</div>
<div class="line"><a name="l14732"></a><span class="lineno">14732</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> GetStackLimitCallback(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l14733"></a><span class="lineno">14733</span>&#160;  stack_limit = <span class="keyword">reinterpret_cast&lt;</span>uint32_t*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l14734"></a><span class="lineno">14734</span>&#160;      i::Isolate::Current()-&gt;stack_guard()-&gt;real_climit());</div>
<div class="line"><a name="l14735"></a><span class="lineno">14735</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l14736"></a><span class="lineno">14736</span>&#160;}</div>
<div class="line"><a name="l14737"></a><span class="lineno">14737</span>&#160;</div>
<div class="line"><a name="l14738"></a><span class="lineno">14738</span>&#160;</div>
<div class="line"><a name="l14739"></a><span class="lineno">14739</span>&#160;<span class="comment">// Uses the address of a local variable to determine the stack top now.</span></div>
<div class="line"><a name="l14740"></a><span class="lineno">14740</span>&#160;<span class="comment">// Given a size, returns an address that is that far from the current</span></div>
<div class="line"><a name="l14741"></a><span class="lineno">14741</span>&#160;<span class="comment">// top of stack.</span></div>
<div class="line"><a name="l14742"></a><span class="lineno">14742</span>&#160;<span class="keyword">static</span> uint32_t* ComputeStackLimit(uint32_t size) {</div>
<div class="line"><a name="l14743"></a><span class="lineno">14743</span>&#160;  uint32_t* answer = &amp;size - (size / <span class="keyword">sizeof</span>(size));</div>
<div class="line"><a name="l14744"></a><span class="lineno">14744</span>&#160;  <span class="comment">// If the size is very large and the stack is very near the bottom of</span></div>
<div class="line"><a name="l14745"></a><span class="lineno">14745</span>&#160;  <span class="comment">// memory then the calculation above may wrap around and give an address</span></div>
<div class="line"><a name="l14746"></a><span class="lineno">14746</span>&#160;  <span class="comment">// that is above the (downwards-growing) stack.  In that case we return</span></div>
<div class="line"><a name="l14747"></a><span class="lineno">14747</span>&#160;  <span class="comment">// a very low address.</span></div>
<div class="line"><a name="l14748"></a><span class="lineno">14748</span>&#160;  <span class="keywordflow">if</span> (answer &gt; &amp;size) <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>uint32_t*<span class="keyword">&gt;</span>(<span class="keyword">sizeof</span>(size));</div>
<div class="line"><a name="l14749"></a><span class="lineno">14749</span>&#160;  <span class="keywordflow">return</span> answer;</div>
<div class="line"><a name="l14750"></a><span class="lineno">14750</span>&#160;}</div>
<div class="line"><a name="l14751"></a><span class="lineno">14751</span>&#160;</div>
<div class="line"><a name="l14752"></a><span class="lineno">14752</span>&#160;</div>
<div class="line"><a name="l14753"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad735902c0d6de080f80e7743ffb152e6">14753</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a591291cb35df7f2f371d01df15bfc2d8">SetResourceConstraints</a>) {</div>
<div class="line"><a name="l14754"></a><span class="lineno">14754</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> K = 1024;</div>
<div class="line"><a name="l14755"></a><span class="lineno">14755</span>&#160;  uint32_t* set_limit = ComputeStackLimit(128 * K);</div>
<div class="line"><a name="l14756"></a><span class="lineno">14756</span>&#160;</div>
<div class="line"><a name="l14757"></a><span class="lineno">14757</span>&#160;  <span class="comment">// Set stack limit.</span></div>
<div class="line"><a name="l14758"></a><span class="lineno">14758</span>&#160;  <a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a> constraints;</div>
<div class="line"><a name="l14759"></a><span class="lineno">14759</span>&#160;  constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#a163e8ed3c96bf6d01e07f07bcb03b147">set_stack_limit</a>(set_limit);</div>
<div class="line"><a name="l14760"></a><span class="lineno">14760</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a591291cb35df7f2f371d01df15bfc2d8">v8::SetResourceConstraints</a>(&amp;constraints));</div>
<div class="line"><a name="l14761"></a><span class="lineno">14761</span>&#160;</div>
<div class="line"><a name="l14762"></a><span class="lineno">14762</span>&#160;  <span class="comment">// Execute a script.</span></div>
<div class="line"><a name="l14763"></a><span class="lineno">14763</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14764"></a><span class="lineno">14764</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14765"></a><span class="lineno">14765</span>&#160;  Local&lt;v8::FunctionTemplate&gt; fun_templ =</div>
<div class="line"><a name="l14766"></a><span class="lineno">14766</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(GetStackLimitCallback);</div>
<div class="line"><a name="l14767"></a><span class="lineno">14767</span>&#160;  Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l14768"></a><span class="lineno">14768</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;get_stack_limit&quot;</span>), fun);</div>
<div class="line"><a name="l14769"></a><span class="lineno">14769</span>&#160;  CompileRun(<span class="stringliteral">&quot;get_stack_limit();&quot;</span>);</div>
<div class="line"><a name="l14770"></a><span class="lineno">14770</span>&#160;</div>
<div class="line"><a name="l14771"></a><span class="lineno">14771</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(stack_limit == set_limit);</div>
<div class="line"><a name="l14772"></a><span class="lineno">14772</span>&#160;}</div>
<div class="line"><a name="l14773"></a><span class="lineno">14773</span>&#160;</div>
<div class="line"><a name="l14774"></a><span class="lineno">14774</span>&#160;</div>
<div class="line"><a name="l14775"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a95319014f31f6cb5a603905afce4fda6">14775</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(SetResourceConstraintsInThread) {</div>
<div class="line"><a name="l14776"></a><span class="lineno">14776</span>&#160;  uint32_t* set_limit;</div>
<div class="line"><a name="l14777"></a><span class="lineno">14777</span>&#160;  {</div>
<div class="line"><a name="l14778"></a><span class="lineno">14778</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker;</div>
<div class="line"><a name="l14779"></a><span class="lineno">14779</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> K = 1024;</div>
<div class="line"><a name="l14780"></a><span class="lineno">14780</span>&#160;    set_limit = ComputeStackLimit(128 * K);</div>
<div class="line"><a name="l14781"></a><span class="lineno">14781</span>&#160;</div>
<div class="line"><a name="l14782"></a><span class="lineno">14782</span>&#160;    <span class="comment">// Set stack limit.</span></div>
<div class="line"><a name="l14783"></a><span class="lineno">14783</span>&#160;    <a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a> constraints;</div>
<div class="line"><a name="l14784"></a><span class="lineno">14784</span>&#160;    constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#a163e8ed3c96bf6d01e07f07bcb03b147">set_stack_limit</a>(set_limit);</div>
<div class="line"><a name="l14785"></a><span class="lineno">14785</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a591291cb35df7f2f371d01df15bfc2d8">v8::SetResourceConstraints</a>(&amp;constraints));</div>
<div class="line"><a name="l14786"></a><span class="lineno">14786</span>&#160;</div>
<div class="line"><a name="l14787"></a><span class="lineno">14787</span>&#160;    <span class="comment">// Execute a script.</span></div>
<div class="line"><a name="l14788"></a><span class="lineno">14788</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14789"></a><span class="lineno">14789</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14790"></a><span class="lineno">14790</span>&#160;    Local&lt;v8::FunctionTemplate&gt; fun_templ =</div>
<div class="line"><a name="l14791"></a><span class="lineno">14791</span>&#160;        <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(GetStackLimitCallback);</div>
<div class="line"><a name="l14792"></a><span class="lineno">14792</span>&#160;    Local&lt;Function&gt; fun = fun_templ-&gt;GetFunction();</div>
<div class="line"><a name="l14793"></a><span class="lineno">14793</span>&#160;    env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;get_stack_limit&quot;</span>), fun);</div>
<div class="line"><a name="l14794"></a><span class="lineno">14794</span>&#160;    CompileRun(<span class="stringliteral">&quot;get_stack_limit();&quot;</span>);</div>
<div class="line"><a name="l14795"></a><span class="lineno">14795</span>&#160;</div>
<div class="line"><a name="l14796"></a><span class="lineno">14796</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(stack_limit == set_limit);</div>
<div class="line"><a name="l14797"></a><span class="lineno">14797</span>&#160;  }</div>
<div class="line"><a name="l14798"></a><span class="lineno">14798</span>&#160;  {</div>
<div class="line"><a name="l14799"></a><span class="lineno">14799</span>&#160;    <a class="code" href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a> locker;</div>
<div class="line"><a name="l14800"></a><span class="lineno">14800</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(stack_limit == set_limit);</div>
<div class="line"><a name="l14801"></a><span class="lineno">14801</span>&#160;  }</div>
<div class="line"><a name="l14802"></a><span class="lineno">14802</span>&#160;}</div>
<div class="line"><a name="l14803"></a><span class="lineno">14803</span>&#160;</div>
<div class="line"><a name="l14804"></a><span class="lineno">14804</span>&#160;</div>
<div class="line"><a name="l14805"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8d2b4e336913e2d5d91f430c9f1848a7">14805</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(GetHeapStatistics) {</div>
<div class="line"><a name="l14806"></a><span class="lineno">14806</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14807"></a><span class="lineno">14807</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> c1;</div>
<div class="line"><a name="l14808"></a><span class="lineno">14808</span>&#160;  <a class="code" href="../../d0/d9e/classv8_1_1_heap_statistics.html">v8::HeapStatistics</a> heap_statistics;</div>
<div class="line"><a name="l14809"></a><span class="lineno">14809</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int&gt;(heap_statistics.<a class="code" href="../../d0/d9e/classv8_1_1_heap_statistics.html#a4e08264e69877f663afba15b69742d6e">total_heap_size</a>()), 0);</div>
<div class="line"><a name="l14810"></a><span class="lineno">14810</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int&gt;(heap_statistics.<a class="code" href="../../d0/d9e/classv8_1_1_heap_statistics.html#a723f8e2afa6e5852cf86046cb7e9220b">used_heap_size</a>()), 0);</div>
<div class="line"><a name="l14811"></a><span class="lineno">14811</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a5593ac74687b713095c38987e5950b34">v8::V8::GetHeapStatistics</a>(&amp;heap_statistics);</div>
<div class="line"><a name="l14812"></a><span class="lineno">14812</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(static_cast&lt;int&gt;(heap_statistics.<a class="code" href="../../d0/d9e/classv8_1_1_heap_statistics.html#a4e08264e69877f663afba15b69742d6e">total_heap_size</a>()), 0);</div>
<div class="line"><a name="l14813"></a><span class="lineno">14813</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(static_cast&lt;int&gt;(heap_statistics.<a class="code" href="../../d0/d9e/classv8_1_1_heap_statistics.html#a723f8e2afa6e5852cf86046cb7e9220b">used_heap_size</a>()), 0);</div>
<div class="line"><a name="l14814"></a><span class="lineno">14814</span>&#160;}</div>
<div class="line"><a name="l14815"></a><span class="lineno">14815</span>&#160;</div>
<div class="line"><a name="l14816"></a><span class="lineno">14816</span>&#160;</div>
<div class="line"><a name="l14817"></a><span class="lineno"><a class="line" href="../../d4/dff/class_visitor_impl.html">14817</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d4/dff/class_visitor_impl.html">VisitorImpl</a> : <span class="keyword">public</span> <a class="code" href="../../de/dde/classv8_1_1_external_resource_visitor.html">v8::ExternalResourceVisitor</a> {</div>
<div class="line"><a name="l14818"></a><span class="lineno">14818</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l14819"></a><span class="lineno"><a class="line" href="../../d4/dff/class_visitor_impl.html#aa4a2ec6c96f1f30e3f90059ec85d1698">14819</a></span>&#160;  <a class="code" href="../../d4/dff/class_visitor_impl.html#aa4a2ec6c96f1f30e3f90059ec85d1698">VisitorImpl</a>(<a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>* <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a5e325b47be17d36b12096ad1d73067b1">r1</a>, <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>* <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a6e83dd17c5de4dbc4a77cf6622fd385d">r2</a>)</div>
<div class="line"><a name="l14820"></a><span class="lineno">14820</span>&#160;      : resource1_(r1),</div>
<div class="line"><a name="l14821"></a><span class="lineno">14821</span>&#160;        resource2_(r2),</div>
<div class="line"><a name="l14822"></a><span class="lineno">14822</span>&#160;        found_resource1_(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a6f892599390671c9a72cccc59b240507">false</a>),</div>
<div class="line"><a name="l14823"></a><span class="lineno">14823</span>&#160;        found_resource2_(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a6f892599390671c9a72cccc59b240507">false</a>) {}</div>
<div class="line"><a name="l14824"></a><span class="lineno"><a class="line" href="../../d4/dff/class_visitor_impl.html#a731527c3f44aad863f2d91708d3b63ce">14824</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="../../d4/dff/class_visitor_impl.html#a731527c3f44aad863f2d91708d3b63ce">~VisitorImpl</a>() {}</div>
<div class="line"><a name="l14825"></a><span class="lineno"><a class="line" href="../../d4/dff/class_visitor_impl.html#aa151a5343398765ebfe61a9ac10c400a">14825</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/dff/class_visitor_impl.html#aa151a5343398765ebfe61a9ac10c400a">VisitExternalString</a>(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> <span class="keywordtype">string</span>) {</div>
<div class="line"><a name="l14826"></a><span class="lineno">14826</span>&#160;    <span class="keywordflow">if</span> (!string-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#a511519c317c7a8b3dd44fbc99768d3f9">IsExternal</a>()) {</div>
<div class="line"><a name="l14827"></a><span class="lineno">14827</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#aec56f97164cbf2d582da4d8b93c9d702">IsExternalAscii</a>());</div>
<div class="line"><a name="l14828"></a><span class="lineno">14828</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l14829"></a><span class="lineno">14829</span>&#160;    }</div>
<div class="line"><a name="l14830"></a><span class="lineno">14830</span>&#160;    <a class="code" href="../../d3/d29/classv8_1_1_string_1_1_external_string_resource.html">v8::String::ExternalStringResource</a>* resource =</div>
<div class="line"><a name="l14831"></a><span class="lineno">14831</span>&#160;        <span class="keywordtype">string</span>-&gt;GetExternalStringResource();</div>
<div class="line"><a name="l14832"></a><span class="lineno">14832</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(resource);</div>
<div class="line"><a name="l14833"></a><span class="lineno">14833</span>&#160;    <span class="keywordflow">if</span> (resource1_ == resource) {</div>
<div class="line"><a name="l14834"></a><span class="lineno">14834</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!found_resource1_);</div>
<div class="line"><a name="l14835"></a><span class="lineno">14835</span>&#160;      found_resource1_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l14836"></a><span class="lineno">14836</span>&#160;    }</div>
<div class="line"><a name="l14837"></a><span class="lineno">14837</span>&#160;    <span class="keywordflow">if</span> (resource2_ == resource) {</div>
<div class="line"><a name="l14838"></a><span class="lineno">14838</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!found_resource2_);</div>
<div class="line"><a name="l14839"></a><span class="lineno">14839</span>&#160;      found_resource2_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l14840"></a><span class="lineno">14840</span>&#160;    }</div>
<div class="line"><a name="l14841"></a><span class="lineno">14841</span>&#160;  }</div>
<div class="line"><a name="l14842"></a><span class="lineno"><a class="line" href="../../d4/dff/class_visitor_impl.html#a6334f27ca3b7bdfa0dd9e0f7f7bce5a5">14842</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d4/dff/class_visitor_impl.html#a6334f27ca3b7bdfa0dd9e0f7f7bce5a5">CheckVisitedResources</a>() {</div>
<div class="line"><a name="l14843"></a><span class="lineno">14843</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(found_resource1_);</div>
<div class="line"><a name="l14844"></a><span class="lineno">14844</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(found_resource2_);</div>
<div class="line"><a name="l14845"></a><span class="lineno">14845</span>&#160;  }</div>
<div class="line"><a name="l14846"></a><span class="lineno">14846</span>&#160;</div>
<div class="line"><a name="l14847"></a><span class="lineno">14847</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l14848"></a><span class="lineno">14848</span>&#160;  <a class="code" href="../../d3/d29/classv8_1_1_string_1_1_external_string_resource.html">v8::String::ExternalStringResource</a>* resource1_;</div>
<div class="line"><a name="l14849"></a><span class="lineno">14849</span>&#160;  <a class="code" href="../../d3/d29/classv8_1_1_string_1_1_external_string_resource.html">v8::String::ExternalStringResource</a>* resource2_;</div>
<div class="line"><a name="l14850"></a><span class="lineno">14850</span>&#160;  <span class="keywordtype">bool</span> found_resource1_;</div>
<div class="line"><a name="l14851"></a><span class="lineno">14851</span>&#160;  <span class="keywordtype">bool</span> found_resource2_;</div>
<div class="line"><a name="l14852"></a><span class="lineno">14852</span>&#160;};</div>
<div class="line"><a name="l14853"></a><span class="lineno">14853</span>&#160;</div>
<div class="line"><a name="l14854"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aed009e75b850b63a5313977bba5664b3">14854</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(VisitExternalStrings) {</div>
<div class="line"><a name="l14855"></a><span class="lineno">14855</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14856"></a><span class="lineno">14856</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l14857"></a><span class="lineno">14857</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">string</span> = <span class="stringliteral">&quot;Some string&quot;</span>;</div>
<div class="line"><a name="l14858"></a><span class="lineno">14858</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* two_byte_string = AsciiToTwoByteString(<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l14859"></a><span class="lineno">14859</span>&#160;  <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>* resource1 = <span class="keyword">new</span> <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>(two_byte_string);</div>
<div class="line"><a name="l14860"></a><span class="lineno">14860</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> string1 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a973aec0759c01b6fb411d7fca8300e6a">v8::String::NewExternal</a>(resource1);</div>
<div class="line"><a name="l14861"></a><span class="lineno">14861</span>&#160;  <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>* resource2 = <span class="keyword">new</span> <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a>(two_byte_string);</div>
<div class="line"><a name="l14862"></a><span class="lineno">14862</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> string2 = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a973aec0759c01b6fb411d7fca8300e6a">v8::String::NewExternal</a>(resource2);</div>
<div class="line"><a name="l14863"></a><span class="lineno">14863</span>&#160;</div>
<div class="line"><a name="l14864"></a><span class="lineno">14864</span>&#160;  <span class="comment">// We need to add usages for string1 and string2 to avoid warnings in GCC 4.7</span></div>
<div class="line"><a name="l14865"></a><span class="lineno">14865</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string1-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#a511519c317c7a8b3dd44fbc99768d3f9">IsExternal</a>());</div>
<div class="line"><a name="l14866"></a><span class="lineno">14866</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string2-&gt;<a class="code" href="../../d2/db3/classv8_1_1_string.html#a511519c317c7a8b3dd44fbc99768d3f9">IsExternal</a>());</div>
<div class="line"><a name="l14867"></a><span class="lineno">14867</span>&#160;</div>
<div class="line"><a name="l14868"></a><span class="lineno">14868</span>&#160;  <a class="code" href="../../d4/dff/class_visitor_impl.html">VisitorImpl</a> visitor(resource1, resource2);</div>
<div class="line"><a name="l14869"></a><span class="lineno">14869</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a770ea5c6fbd66319da5d47947ca7dd23">v8::V8::VisitExternalResources</a>(&amp;visitor);</div>
<div class="line"><a name="l14870"></a><span class="lineno">14870</span>&#160;  visitor.CheckVisitedResources();</div>
<div class="line"><a name="l14871"></a><span class="lineno">14871</span>&#160;}</div>
<div class="line"><a name="l14872"></a><span class="lineno">14872</span>&#160;</div>
<div class="line"><a name="l14873"></a><span class="lineno">14873</span>&#160;</div>
<div class="line"><a name="l14874"></a><span class="lineno">14874</span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> DoubleFromBits(uint64_t value) {</div>
<div class="line"><a name="l14875"></a><span class="lineno">14875</span>&#160;  <span class="keywordtype">double</span> target;</div>
<div class="line"><a name="l14876"></a><span class="lineno">14876</span>&#160;  memcpy(&amp;target, &amp;value, <span class="keyword">sizeof</span>(target));</div>
<div class="line"><a name="l14877"></a><span class="lineno">14877</span>&#160;  <span class="keywordflow">return</span> target;</div>
<div class="line"><a name="l14878"></a><span class="lineno">14878</span>&#160;}</div>
<div class="line"><a name="l14879"></a><span class="lineno">14879</span>&#160;</div>
<div class="line"><a name="l14880"></a><span class="lineno">14880</span>&#160;</div>
<div class="line"><a name="l14881"></a><span class="lineno">14881</span>&#160;<span class="keyword">static</span> uint64_t DoubleToBits(<span class="keywordtype">double</span> value) {</div>
<div class="line"><a name="l14882"></a><span class="lineno">14882</span>&#160;  uint64_t target;</div>
<div class="line"><a name="l14883"></a><span class="lineno">14883</span>&#160;  memcpy(&amp;target, &amp;value, <span class="keyword">sizeof</span>(target));</div>
<div class="line"><a name="l14884"></a><span class="lineno">14884</span>&#160;  <span class="keywordflow">return</span> target;</div>
<div class="line"><a name="l14885"></a><span class="lineno">14885</span>&#160;}</div>
<div class="line"><a name="l14886"></a><span class="lineno">14886</span>&#160;</div>
<div class="line"><a name="l14887"></a><span class="lineno">14887</span>&#160;</div>
<div class="line"><a name="l14888"></a><span class="lineno">14888</span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> DoubleToDateTime(<span class="keywordtype">double</span> input) {</div>
<div class="line"><a name="l14889"></a><span class="lineno">14889</span>&#160;  <span class="keywordtype">double</span> date_limit = 864e13;</div>
<div class="line"><a name="l14890"></a><span class="lineno">14890</span>&#160;  <span class="keywordflow">if</span> (IsNaN(input) || input &lt; -date_limit || input &gt; date_limit) {</div>
<div class="line"><a name="l14891"></a><span class="lineno">14891</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a2ad80cdfa895b81968050fa753ecda20">i::OS::nan_value</a>();</div>
<div class="line"><a name="l14892"></a><span class="lineno">14892</span>&#160;  }</div>
<div class="line"><a name="l14893"></a><span class="lineno">14893</span>&#160;  <span class="keywordflow">return</span> (input &lt; 0) ? -(floor(-input)) : floor(input);</div>
<div class="line"><a name="l14894"></a><span class="lineno">14894</span>&#160;}</div>
<div class="line"><a name="l14895"></a><span class="lineno">14895</span>&#160;</div>
<div class="line"><a name="l14896"></a><span class="lineno">14896</span>&#160;<span class="comment">// We don&#39;t have a consistent way to write 64-bit constants syntactically, so we</span></div>
<div class="line"><a name="l14897"></a><span class="lineno">14897</span>&#160;<span class="comment">// split them into two 32-bit constants and combine them programmatically.</span></div>
<div class="line"><a name="l14898"></a><span class="lineno">14898</span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> DoubleFromBits(uint32_t high_bits, uint32_t low_bits) {</div>
<div class="line"><a name="l14899"></a><span class="lineno">14899</span>&#160;  <span class="keywordflow">return</span> DoubleFromBits((static_cast&lt;uint64_t&gt;(high_bits) &lt;&lt; 32) | low_bits);</div>
<div class="line"><a name="l14900"></a><span class="lineno">14900</span>&#160;}</div>
<div class="line"><a name="l14901"></a><span class="lineno">14901</span>&#160;</div>
<div class="line"><a name="l14902"></a><span class="lineno">14902</span>&#160;</div>
<div class="line"><a name="l14903"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae65f8e5fd033e9088af78634cd040dc9">14903</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(QuietSignalingNaNs) {</div>
<div class="line"><a name="l14904"></a><span class="lineno">14904</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14905"></a><span class="lineno">14905</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l14906"></a><span class="lineno">14906</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l14907"></a><span class="lineno">14907</span>&#160;</div>
<div class="line"><a name="l14908"></a><span class="lineno">14908</span>&#160;  <span class="comment">// Special double values.</span></div>
<div class="line"><a name="l14909"></a><span class="lineno">14909</span>&#160;  <span class="keywordtype">double</span> snan = DoubleFromBits(0x7ff00000, 0x00000001);</div>
<div class="line"><a name="l14910"></a><span class="lineno">14910</span>&#160;  <span class="keywordtype">double</span> qnan = DoubleFromBits(0x7ff80000, 0x00000000);</div>
<div class="line"><a name="l14911"></a><span class="lineno">14911</span>&#160;  <span class="keywordtype">double</span> infinity = DoubleFromBits(0x7ff00000, 0x00000000);</div>
<div class="line"><a name="l14912"></a><span class="lineno">14912</span>&#160;  <span class="keywordtype">double</span> max_normal = DoubleFromBits(0x7fefffff, 0xffffffffu);</div>
<div class="line"><a name="l14913"></a><span class="lineno">14913</span>&#160;  <span class="keywordtype">double</span> min_normal = DoubleFromBits(0x00100000, 0x00000000);</div>
<div class="line"><a name="l14914"></a><span class="lineno">14914</span>&#160;  <span class="keywordtype">double</span> max_denormal = DoubleFromBits(0x000fffff, 0xffffffffu);</div>
<div class="line"><a name="l14915"></a><span class="lineno">14915</span>&#160;  <span class="keywordtype">double</span> min_denormal = DoubleFromBits(0x00000000, 0x00000001);</div>
<div class="line"><a name="l14916"></a><span class="lineno">14916</span>&#160;</div>
<div class="line"><a name="l14917"></a><span class="lineno">14917</span>&#160;  <span class="comment">// Date values are capped at +/-100000000 days (times 864e5 ms per day)</span></div>
<div class="line"><a name="l14918"></a><span class="lineno">14918</span>&#160;  <span class="comment">// on either side of the epoch.</span></div>
<div class="line"><a name="l14919"></a><span class="lineno">14919</span>&#160;  <span class="keywordtype">double</span> date_limit = 864e13;</div>
<div class="line"><a name="l14920"></a><span class="lineno">14920</span>&#160;</div>
<div class="line"><a name="l14921"></a><span class="lineno">14921</span>&#160;  <span class="keywordtype">double</span> test_values[] = {</div>
<div class="line"><a name="l14922"></a><span class="lineno">14922</span>&#160;      snan,</div>
<div class="line"><a name="l14923"></a><span class="lineno">14923</span>&#160;      qnan,</div>
<div class="line"><a name="l14924"></a><span class="lineno">14924</span>&#160;      infinity,</div>
<div class="line"><a name="l14925"></a><span class="lineno">14925</span>&#160;      max_normal,</div>
<div class="line"><a name="l14926"></a><span class="lineno">14926</span>&#160;      date_limit + 1,</div>
<div class="line"><a name="l14927"></a><span class="lineno">14927</span>&#160;      date_limit,</div>
<div class="line"><a name="l14928"></a><span class="lineno">14928</span>&#160;      min_normal,</div>
<div class="line"><a name="l14929"></a><span class="lineno">14929</span>&#160;      max_denormal,</div>
<div class="line"><a name="l14930"></a><span class="lineno">14930</span>&#160;      min_denormal,</div>
<div class="line"><a name="l14931"></a><span class="lineno">14931</span>&#160;      0,</div>
<div class="line"><a name="l14932"></a><span class="lineno">14932</span>&#160;      -0,</div>
<div class="line"><a name="l14933"></a><span class="lineno">14933</span>&#160;      -min_denormal,</div>
<div class="line"><a name="l14934"></a><span class="lineno">14934</span>&#160;      -max_denormal,</div>
<div class="line"><a name="l14935"></a><span class="lineno">14935</span>&#160;      -min_normal,</div>
<div class="line"><a name="l14936"></a><span class="lineno">14936</span>&#160;      -date_limit,</div>
<div class="line"><a name="l14937"></a><span class="lineno">14937</span>&#160;      -date_limit - 1,</div>
<div class="line"><a name="l14938"></a><span class="lineno">14938</span>&#160;      -max_normal,</div>
<div class="line"><a name="l14939"></a><span class="lineno">14939</span>&#160;      -infinity,</div>
<div class="line"><a name="l14940"></a><span class="lineno">14940</span>&#160;      -qnan,</div>
<div class="line"><a name="l14941"></a><span class="lineno">14941</span>&#160;      -snan</div>
<div class="line"><a name="l14942"></a><span class="lineno">14942</span>&#160;  };</div>
<div class="line"><a name="l14943"></a><span class="lineno">14943</span>&#160;  <span class="keywordtype">int</span> num_test_values = 20;</div>
<div class="line"><a name="l14944"></a><span class="lineno">14944</span>&#160;</div>
<div class="line"><a name="l14945"></a><span class="lineno">14945</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_test_values; i++) {</div>
<div class="line"><a name="l14946"></a><span class="lineno">14946</span>&#160;    <span class="keywordtype">double</span> test_value = test_values[i];</div>
<div class="line"><a name="l14947"></a><span class="lineno">14947</span>&#160;</div>
<div class="line"><a name="l14948"></a><span class="lineno">14948</span>&#160;    <span class="comment">// Check that Number::New preserves non-NaNs and quiets SNaNs.</span></div>
<div class="line"><a name="l14949"></a><span class="lineno">14949</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> number = <a class="code" href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a>(test_value);</div>
<div class="line"><a name="l14950"></a><span class="lineno">14950</span>&#160;    <span class="keywordtype">double</span> stored_number = number-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a21bbf71d057f8357a5345fa4ee8b1593">NumberValue</a>();</div>
<div class="line"><a name="l14951"></a><span class="lineno">14951</span>&#160;    <span class="keywordflow">if</span> (!IsNaN(test_value)) {</div>
<div class="line"><a name="l14952"></a><span class="lineno">14952</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(test_value, stored_number);</div>
<div class="line"><a name="l14953"></a><span class="lineno">14953</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14954"></a><span class="lineno">14954</span>&#160;      uint64_t stored_bits = DoubleToBits(stored_number);</div>
<div class="line"><a name="l14955"></a><span class="lineno">14955</span>&#160;      <span class="comment">// Check if quiet nan (bits 51..62 all set).</span></div>
<div class="line"><a name="l14956"></a><span class="lineno">14956</span>&#160;<span class="preprocessor">#if defined(V8_TARGET_ARCH_MIPS) &amp;&amp; !defined(USE_SIMULATOR)</span></div>
<div class="line"><a name="l14957"></a><span class="lineno">14957</span>&#160;      <span class="comment">// Most significant fraction bit for quiet nan is set to 0</span></div>
<div class="line"><a name="l14958"></a><span class="lineno">14958</span>&#160;      <span class="comment">// on MIPS architecture. Allowed by IEEE-754.</span></div>
<div class="line"><a name="l14959"></a><span class="lineno">14959</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xffe, static_cast&lt;int&gt;((stored_bits &gt;&gt; 51) &amp; 0xfff));</div>
<div class="line"><a name="l14960"></a><span class="lineno">14960</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l14961"></a><span class="lineno">14961</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xfff, static_cast&lt;int&gt;((stored_bits &gt;&gt; 51) &amp; 0xfff));</div>
<div class="line"><a name="l14962"></a><span class="lineno">14962</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l14963"></a><span class="lineno">14963</span>&#160;    }</div>
<div class="line"><a name="l14964"></a><span class="lineno">14964</span>&#160;</div>
<div class="line"><a name="l14965"></a><span class="lineno">14965</span>&#160;    <span class="comment">// Check that Date::New preserves non-NaNs in the date range and</span></div>
<div class="line"><a name="l14966"></a><span class="lineno">14966</span>&#160;    <span class="comment">// quiets SNaNs.</span></div>
<div class="line"><a name="l14967"></a><span class="lineno">14967</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> date = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Date::New</a>(test_value);</div>
<div class="line"><a name="l14968"></a><span class="lineno">14968</span>&#160;    <span class="keywordtype">double</span> expected_stored_date = DoubleToDateTime(test_value);</div>
<div class="line"><a name="l14969"></a><span class="lineno">14969</span>&#160;    <span class="keywordtype">double</span> stored_date = date-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a21bbf71d057f8357a5345fa4ee8b1593">NumberValue</a>();</div>
<div class="line"><a name="l14970"></a><span class="lineno">14970</span>&#160;    <span class="keywordflow">if</span> (!IsNaN(expected_stored_date)) {</div>
<div class="line"><a name="l14971"></a><span class="lineno">14971</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected_stored_date, stored_date);</div>
<div class="line"><a name="l14972"></a><span class="lineno">14972</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14973"></a><span class="lineno">14973</span>&#160;      uint64_t stored_bits = DoubleToBits(stored_date);</div>
<div class="line"><a name="l14974"></a><span class="lineno">14974</span>&#160;      <span class="comment">// Check if quiet nan (bits 51..62 all set).</span></div>
<div class="line"><a name="l14975"></a><span class="lineno">14975</span>&#160;<span class="preprocessor">#if defined(V8_TARGET_ARCH_MIPS) &amp;&amp; !defined(USE_SIMULATOR)</span></div>
<div class="line"><a name="l14976"></a><span class="lineno">14976</span>&#160;      <span class="comment">// Most significant fraction bit for quiet nan is set to 0</span></div>
<div class="line"><a name="l14977"></a><span class="lineno">14977</span>&#160;      <span class="comment">// on MIPS architecture. Allowed by IEEE-754.</span></div>
<div class="line"><a name="l14978"></a><span class="lineno">14978</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xffe, static_cast&lt;int&gt;((stored_bits &gt;&gt; 51) &amp; 0xfff));</div>
<div class="line"><a name="l14979"></a><span class="lineno">14979</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l14980"></a><span class="lineno">14980</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0xfff, static_cast&lt;int&gt;((stored_bits &gt;&gt; 51) &amp; 0xfff));</div>
<div class="line"><a name="l14981"></a><span class="lineno">14981</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l14982"></a><span class="lineno">14982</span>&#160;    }</div>
<div class="line"><a name="l14983"></a><span class="lineno">14983</span>&#160;  }</div>
<div class="line"><a name="l14984"></a><span class="lineno">14984</span>&#160;}</div>
<div class="line"><a name="l14985"></a><span class="lineno">14985</span>&#160;</div>
<div class="line"><a name="l14986"></a><span class="lineno">14986</span>&#160;</div>
<div class="line"><a name="l14987"></a><span class="lineno">14987</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> SpaghettiIncident(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l14988"></a><span class="lineno">14988</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l14989"></a><span class="lineno">14989</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> tc;</div>
<div class="line"><a name="l14990"></a><span class="lineno">14990</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> str(args[0]-&gt;ToString());</div>
<div class="line"><a name="l14991"></a><span class="lineno">14991</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46a6342f518ffe356dd4b116eabc1e0">USE</a>(str);</div>
<div class="line"><a name="l14992"></a><span class="lineno">14992</span>&#160;  <span class="keywordflow">if</span> (tc.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>())</div>
<div class="line"><a name="l14993"></a><span class="lineno">14993</span>&#160;    <span class="keywordflow">return</span> tc.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a901c19d920f54a68ca7022af30d6d795">ReThrow</a>();</div>
<div class="line"><a name="l14994"></a><span class="lineno">14994</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l14995"></a><span class="lineno">14995</span>&#160;}</div>
<div class="line"><a name="l14996"></a><span class="lineno">14996</span>&#160;</div>
<div class="line"><a name="l14997"></a><span class="lineno">14997</span>&#160;</div>
<div class="line"><a name="l14998"></a><span class="lineno">14998</span>&#160;<span class="comment">// Test that an exception can be propagated down through a spaghetti</span></div>
<div class="line"><a name="l14999"></a><span class="lineno">14999</span>&#160;<span class="comment">// stack using ReThrow.</span></div>
<div class="line"><a name="l15000"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6a5e702a8e0a487f4a540cca3560e224">15000</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SpaghettiStackReThrow) {</div>
<div class="line"><a name="l15001"></a><span class="lineno">15001</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15002"></a><span class="lineno">15002</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15003"></a><span class="lineno">15003</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(</div>
<div class="line"><a name="l15004"></a><span class="lineno">15004</span>&#160;      <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;s&quot;</span>),</div>
<div class="line"><a name="l15005"></a><span class="lineno">15005</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(SpaghettiIncident)-&gt;GetFunction());</div>
<div class="line"><a name="l15006"></a><span class="lineno">15006</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l15007"></a><span class="lineno">15007</span>&#160;  CompileRun(</div>
<div class="line"><a name="l15008"></a><span class="lineno">15008</span>&#160;      <span class="stringliteral">&quot;var i = 0;&quot;</span></div>
<div class="line"><a name="l15009"></a><span class="lineno">15009</span>&#160;      <span class="stringliteral">&quot;var o = {&quot;</span></div>
<div class="line"><a name="l15010"></a><span class="lineno">15010</span>&#160;      <span class="stringliteral">&quot;  toString: function () {&quot;</span></div>
<div class="line"><a name="l15011"></a><span class="lineno">15011</span>&#160;      <span class="stringliteral">&quot;    if (i == 10) {&quot;</span></div>
<div class="line"><a name="l15012"></a><span class="lineno">15012</span>&#160;      <span class="stringliteral">&quot;      throw &#39;Hey!&#39;;&quot;</span></div>
<div class="line"><a name="l15013"></a><span class="lineno">15013</span>&#160;      <span class="stringliteral">&quot;    } else {&quot;</span></div>
<div class="line"><a name="l15014"></a><span class="lineno">15014</span>&#160;      <span class="stringliteral">&quot;      i++;&quot;</span></div>
<div class="line"><a name="l15015"></a><span class="lineno">15015</span>&#160;      <span class="stringliteral">&quot;      return s(o);&quot;</span></div>
<div class="line"><a name="l15016"></a><span class="lineno">15016</span>&#160;      <span class="stringliteral">&quot;    }&quot;</span></div>
<div class="line"><a name="l15017"></a><span class="lineno">15017</span>&#160;      <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l15018"></a><span class="lineno">15018</span>&#160;      <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l15019"></a><span class="lineno">15019</span>&#160;      <span class="stringliteral">&quot;s(o);&quot;</span>);</div>
<div class="line"><a name="l15020"></a><span class="lineno">15020</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l15021"></a><span class="lineno">15021</span>&#160;  <a class="code" href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a> value(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">Exception</a>());</div>
<div class="line"><a name="l15022"></a><span class="lineno">15022</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, strcmp(*value, <span class="stringliteral">&quot;Hey!&quot;</span>));</div>
<div class="line"><a name="l15023"></a><span class="lineno">15023</span>&#160;}</div>
<div class="line"><a name="l15024"></a><span class="lineno">15024</span>&#160;</div>
<div class="line"><a name="l15025"></a><span class="lineno">15025</span>&#160;</div>
<div class="line"><a name="l15026"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abd84257a8dc8e2c37b68e4c79fbbe417">15026</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(Regress528) {</div>
<div class="line"><a name="l15027"></a><span class="lineno">15027</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l15028"></a><span class="lineno">15028</span>&#160;</div>
<div class="line"><a name="l15029"></a><span class="lineno">15029</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15030"></a><span class="lineno">15030</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> context;</div>
<div class="line"><a name="l15031"></a><span class="lineno">15031</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;Context&gt;</a> other_context;</div>
<div class="line"><a name="l15032"></a><span class="lineno">15032</span>&#160;  <span class="keywordtype">int</span> gc_count;</div>
<div class="line"><a name="l15033"></a><span class="lineno">15033</span>&#160;</div>
<div class="line"><a name="l15034"></a><span class="lineno">15034</span>&#160;  <span class="comment">// Create a context used to keep the code from aging in the compilation</span></div>
<div class="line"><a name="l15035"></a><span class="lineno">15035</span>&#160;  <span class="comment">// cache.</span></div>
<div class="line"><a name="l15036"></a><span class="lineno">15036</span>&#160;  other_context = Context::New();</div>
<div class="line"><a name="l15037"></a><span class="lineno">15037</span>&#160;</div>
<div class="line"><a name="l15038"></a><span class="lineno">15038</span>&#160;  <span class="comment">// Context-dependent context data creates reference from the compilation</span></div>
<div class="line"><a name="l15039"></a><span class="lineno">15039</span>&#160;  <span class="comment">// cache to the global object.</span></div>
<div class="line"><a name="l15040"></a><span class="lineno">15040</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* source_simple = <span class="stringliteral">&quot;1&quot;</span>;</div>
<div class="line"><a name="l15041"></a><span class="lineno">15041</span>&#160;  context = Context::New();</div>
<div class="line"><a name="l15042"></a><span class="lineno">15042</span>&#160;  {</div>
<div class="line"><a name="l15043"></a><span class="lineno">15043</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15044"></a><span class="lineno">15044</span>&#160;</div>
<div class="line"><a name="l15045"></a><span class="lineno">15045</span>&#160;    context-&gt;Enter();</div>
<div class="line"><a name="l15046"></a><span class="lineno">15046</span>&#160;    Local&lt;v8::String&gt; obj = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l15047"></a><span class="lineno">15047</span>&#160;    context-&gt;SetData(obj);</div>
<div class="line"><a name="l15048"></a><span class="lineno">15048</span>&#160;    CompileRun(source_simple);</div>
<div class="line"><a name="l15049"></a><span class="lineno">15049</span>&#160;    context-&gt;Exit();</div>
<div class="line"><a name="l15050"></a><span class="lineno">15050</span>&#160;  }</div>
<div class="line"><a name="l15051"></a><span class="lineno">15051</span>&#160;  context.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15052"></a><span class="lineno">15052</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l15053"></a><span class="lineno">15053</span>&#160;  <span class="keywordflow">for</span> (gc_count = 1; gc_count &lt; 10; gc_count++) {</div>
<div class="line"><a name="l15054"></a><span class="lineno">15054</span>&#160;    other_context-&gt;Enter();</div>
<div class="line"><a name="l15055"></a><span class="lineno">15055</span>&#160;    CompileRun(source_simple);</div>
<div class="line"><a name="l15056"></a><span class="lineno">15056</span>&#160;    other_context-&gt;Exit();</div>
<div class="line"><a name="l15057"></a><span class="lineno">15057</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l15058"></a><span class="lineno">15058</span>&#160;    <span class="keywordflow">if</span> (GetGlobalObjectsCount() == 1) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15059"></a><span class="lineno">15059</span>&#160;  }</div>
<div class="line"><a name="l15060"></a><span class="lineno">15060</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(2, gc_count);</div>
<div class="line"><a name="l15061"></a><span class="lineno">15061</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, GetGlobalObjectsCount());</div>
<div class="line"><a name="l15062"></a><span class="lineno">15062</span>&#160;</div>
<div class="line"><a name="l15063"></a><span class="lineno">15063</span>&#160;  <span class="comment">// Eval in a function creates reference from the compilation cache to the</span></div>
<div class="line"><a name="l15064"></a><span class="lineno">15064</span>&#160;  <span class="comment">// global object.</span></div>
<div class="line"><a name="l15065"></a><span class="lineno">15065</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* source_eval = <span class="stringliteral">&quot;function f(){eval(&#39;1&#39;)}; f()&quot;</span>;</div>
<div class="line"><a name="l15066"></a><span class="lineno">15066</span>&#160;  context = Context::New();</div>
<div class="line"><a name="l15067"></a><span class="lineno">15067</span>&#160;  {</div>
<div class="line"><a name="l15068"></a><span class="lineno">15068</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15069"></a><span class="lineno">15069</span>&#160;</div>
<div class="line"><a name="l15070"></a><span class="lineno">15070</span>&#160;    context-&gt;Enter();</div>
<div class="line"><a name="l15071"></a><span class="lineno">15071</span>&#160;    CompileRun(source_eval);</div>
<div class="line"><a name="l15072"></a><span class="lineno">15072</span>&#160;    context-&gt;Exit();</div>
<div class="line"><a name="l15073"></a><span class="lineno">15073</span>&#160;  }</div>
<div class="line"><a name="l15074"></a><span class="lineno">15074</span>&#160;  context.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15075"></a><span class="lineno">15075</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l15076"></a><span class="lineno">15076</span>&#160;  <span class="keywordflow">for</span> (gc_count = 1; gc_count &lt; 10; gc_count++) {</div>
<div class="line"><a name="l15077"></a><span class="lineno">15077</span>&#160;    other_context-&gt;Enter();</div>
<div class="line"><a name="l15078"></a><span class="lineno">15078</span>&#160;    CompileRun(source_eval);</div>
<div class="line"><a name="l15079"></a><span class="lineno">15079</span>&#160;    other_context-&gt;Exit();</div>
<div class="line"><a name="l15080"></a><span class="lineno">15080</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l15081"></a><span class="lineno">15081</span>&#160;    <span class="keywordflow">if</span> (GetGlobalObjectsCount() == 1) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15082"></a><span class="lineno">15082</span>&#160;  }</div>
<div class="line"><a name="l15083"></a><span class="lineno">15083</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(2, gc_count);</div>
<div class="line"><a name="l15084"></a><span class="lineno">15084</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, GetGlobalObjectsCount());</div>
<div class="line"><a name="l15085"></a><span class="lineno">15085</span>&#160;</div>
<div class="line"><a name="l15086"></a><span class="lineno">15086</span>&#160;  <span class="comment">// Looking up the line number for an exception creates reference from the</span></div>
<div class="line"><a name="l15087"></a><span class="lineno">15087</span>&#160;  <span class="comment">// compilation cache to the global object.</span></div>
<div class="line"><a name="l15088"></a><span class="lineno">15088</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* source_exception = <span class="stringliteral">&quot;function f(){throw 1;} f()&quot;</span>;</div>
<div class="line"><a name="l15089"></a><span class="lineno">15089</span>&#160;  context = Context::New();</div>
<div class="line"><a name="l15090"></a><span class="lineno">15090</span>&#160;  {</div>
<div class="line"><a name="l15091"></a><span class="lineno">15091</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15092"></a><span class="lineno">15092</span>&#160;</div>
<div class="line"><a name="l15093"></a><span class="lineno">15093</span>&#160;    context-&gt;Enter();</div>
<div class="line"><a name="l15094"></a><span class="lineno">15094</span>&#160;    <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l15095"></a><span class="lineno">15095</span>&#160;    CompileRun(source_exception);</div>
<div class="line"><a name="l15096"></a><span class="lineno">15096</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">HasCaught</a>());</div>
<div class="line"><a name="l15097"></a><span class="lineno">15097</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Message&gt;</a> message = try_catch.<a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html#a0e4e0c42f9819d78b73f6f72793b3caa">Message</a>();</div>
<div class="line"><a name="l15098"></a><span class="lineno">15098</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!message.IsEmpty());</div>
<div class="line"><a name="l15099"></a><span class="lineno">15099</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, message-&gt;GetLineNumber());</div>
<div class="line"><a name="l15100"></a><span class="lineno">15100</span>&#160;    context-&gt;Exit();</div>
<div class="line"><a name="l15101"></a><span class="lineno">15101</span>&#160;  }</div>
<div class="line"><a name="l15102"></a><span class="lineno">15102</span>&#160;  context.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15103"></a><span class="lineno">15103</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l15104"></a><span class="lineno">15104</span>&#160;  <span class="keywordflow">for</span> (gc_count = 1; gc_count &lt; 10; gc_count++) {</div>
<div class="line"><a name="l15105"></a><span class="lineno">15105</span>&#160;    other_context-&gt;Enter();</div>
<div class="line"><a name="l15106"></a><span class="lineno">15106</span>&#160;    CompileRun(source_exception);</div>
<div class="line"><a name="l15107"></a><span class="lineno">15107</span>&#160;    other_context-&gt;Exit();</div>
<div class="line"><a name="l15108"></a><span class="lineno">15108</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l15109"></a><span class="lineno">15109</span>&#160;    <span class="keywordflow">if</span> (GetGlobalObjectsCount() == 1) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15110"></a><span class="lineno">15110</span>&#160;  }</div>
<div class="line"><a name="l15111"></a><span class="lineno">15111</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(2, gc_count);</div>
<div class="line"><a name="l15112"></a><span class="lineno">15112</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, GetGlobalObjectsCount());</div>
<div class="line"><a name="l15113"></a><span class="lineno">15113</span>&#160;</div>
<div class="line"><a name="l15114"></a><span class="lineno">15114</span>&#160;  other_context.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15115"></a><span class="lineno">15115</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a>();</div>
<div class="line"><a name="l15116"></a><span class="lineno">15116</span>&#160;}</div>
<div class="line"><a name="l15117"></a><span class="lineno">15117</span>&#160;</div>
<div class="line"><a name="l15118"></a><span class="lineno">15118</span>&#160;</div>
<div class="line"><a name="l15119"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a66e1d06f3e991efcf9dd18060594de88">15119</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptOrigin) {</div>
<div class="line"><a name="l15120"></a><span class="lineno">15120</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15121"></a><span class="lineno">15121</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l15122"></a><span class="lineno">15122</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> origin = <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;test&quot;</span>));</div>
<div class="line"><a name="l15123"></a><span class="lineno">15123</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> script = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l15124"></a><span class="lineno">15124</span>&#160;      <span class="stringliteral">&quot;function f() {}\n\nfunction g() {}&quot;</span>);</div>
<div class="line"><a name="l15125"></a><span class="lineno">15125</span>&#160;  <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(script, &amp;origin)-&gt;Run();</div>
<div class="line"><a name="l15126"></a><span class="lineno">15126</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> f = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15127"></a><span class="lineno">15127</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;f&quot;</span>)));</div>
<div class="line"><a name="l15128"></a><span class="lineno">15128</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> g = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15129"></a><span class="lineno">15129</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;g&quot;</span>)));</div>
<div class="line"><a name="l15130"></a><span class="lineno">15130</span>&#160;</div>
<div class="line"><a name="l15131"></a><span class="lineno">15131</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> script_origin_f = f-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#a3efaa4de69c09f2ed12ae1165c6d218d">GetScriptOrigin</a>();</div>
<div class="line"><a name="l15132"></a><span class="lineno">15132</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;test&quot;</span>, *<a class="code" href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a>(script_origin_f.ResourceName()));</div>
<div class="line"><a name="l15133"></a><span class="lineno">15133</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, script_origin_f.ResourceLineOffset()-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l15134"></a><span class="lineno">15134</span>&#160;</div>
<div class="line"><a name="l15135"></a><span class="lineno">15135</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> script_origin_g = g-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#a3efaa4de69c09f2ed12ae1165c6d218d">GetScriptOrigin</a>();</div>
<div class="line"><a name="l15136"></a><span class="lineno">15136</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;test&quot;</span>, *<a class="code" href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a>(script_origin_g.ResourceName()));</div>
<div class="line"><a name="l15137"></a><span class="lineno">15137</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, script_origin_g.ResourceLineOffset()-&gt;Int32Value());</div>
<div class="line"><a name="l15138"></a><span class="lineno">15138</span>&#160;}</div>
<div class="line"><a name="l15139"></a><span class="lineno">15139</span>&#160;</div>
<div class="line"><a name="l15140"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af67f0535da5e0f92607630bf3ad05da2">15140</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionGetInferredName) {</div>
<div class="line"><a name="l15141"></a><span class="lineno">15141</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15142"></a><span class="lineno">15142</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l15143"></a><span class="lineno">15143</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> origin = <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;test&quot;</span>));</div>
<div class="line"><a name="l15144"></a><span class="lineno">15144</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> script = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l15145"></a><span class="lineno">15145</span>&#160;      <span class="stringliteral">&quot;var foo = { bar : { baz : function() {}}}; var f = foo.bar.baz;&quot;</span>);</div>
<div class="line"><a name="l15146"></a><span class="lineno">15146</span>&#160;  <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(script, &amp;origin)-&gt;Run();</div>
<div class="line"><a name="l15147"></a><span class="lineno">15147</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> f = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15148"></a><span class="lineno">15148</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;f&quot;</span>)));</div>
<div class="line"><a name="l15149"></a><span class="lineno">15149</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="stringliteral">&quot;foo.bar.baz&quot;</span>, *<a class="code" href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a>(f-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#a4ef8124e23c64a2459ea242b7e726fa2">GetInferredName</a>()));</div>
<div class="line"><a name="l15150"></a><span class="lineno">15150</span>&#160;}</div>
<div class="line"><a name="l15151"></a><span class="lineno">15151</span>&#160;</div>
<div class="line"><a name="l15152"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a799a140746af833154b681767031b685">15152</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptLineNumber) {</div>
<div class="line"><a name="l15153"></a><span class="lineno">15153</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15154"></a><span class="lineno">15154</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l15155"></a><span class="lineno">15155</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> origin = <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;test&quot;</span>));</div>
<div class="line"><a name="l15156"></a><span class="lineno">15156</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> script = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l15157"></a><span class="lineno">15157</span>&#160;      <span class="stringliteral">&quot;function f() {}\n\nfunction g() {}&quot;</span>);</div>
<div class="line"><a name="l15158"></a><span class="lineno">15158</span>&#160;  <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(script, &amp;origin)-&gt;Run();</div>
<div class="line"><a name="l15159"></a><span class="lineno">15159</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> f = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15160"></a><span class="lineno">15160</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;f&quot;</span>)));</div>
<div class="line"><a name="l15161"></a><span class="lineno">15161</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> g = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15162"></a><span class="lineno">15162</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;g&quot;</span>)));</div>
<div class="line"><a name="l15163"></a><span class="lineno">15163</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, f-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#a2343e38e7e51e1a0aab1bff1ca582143">GetScriptLineNumber</a>());</div>
<div class="line"><a name="l15164"></a><span class="lineno">15164</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, g-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#a2343e38e7e51e1a0aab1bff1ca582143">GetScriptLineNumber</a>());</div>
<div class="line"><a name="l15165"></a><span class="lineno">15165</span>&#160;}</div>
<div class="line"><a name="l15166"></a><span class="lineno">15166</span>&#160;</div>
<div class="line"><a name="l15167"></a><span class="lineno">15167</span>&#160;</div>
<div class="line"><a name="l15168"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae4de8c4a20c13509804b65223045365a">15168</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ScriptColumnNumber) {</div>
<div class="line"><a name="l15169"></a><span class="lineno">15169</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15170"></a><span class="lineno">15170</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l15171"></a><span class="lineno">15171</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> origin = <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;test&quot;</span>),</div>
<div class="line"><a name="l15172"></a><span class="lineno">15172</span>&#160;      <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2));</div>
<div class="line"><a name="l15173"></a><span class="lineno">15173</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> script = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l15174"></a><span class="lineno">15174</span>&#160;      <span class="stringliteral">&quot;function foo() {}\n\n     function bar() {}&quot;</span>);</div>
<div class="line"><a name="l15175"></a><span class="lineno">15175</span>&#160;  <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(script, &amp;origin)-&gt;Run();</div>
<div class="line"><a name="l15176"></a><span class="lineno">15176</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> foo = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15177"></a><span class="lineno">15177</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l15178"></a><span class="lineno">15178</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> bar = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15179"></a><span class="lineno">15179</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;bar&quot;</span>)));</div>
<div class="line"><a name="l15180"></a><span class="lineno">15180</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(14, foo-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#a2d81c8ab10c61a2c6c2fc861256f3045">GetScriptColumnNumber</a>());</div>
<div class="line"><a name="l15181"></a><span class="lineno">15181</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(17, bar-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#a2d81c8ab10c61a2c6c2fc861256f3045">GetScriptColumnNumber</a>());</div>
<div class="line"><a name="l15182"></a><span class="lineno">15182</span>&#160;}</div>
<div class="line"><a name="l15183"></a><span class="lineno">15183</span>&#160;</div>
<div class="line"><a name="l15184"></a><span class="lineno">15184</span>&#160;</div>
<div class="line"><a name="l15185"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5ee9d6405c0cbe3ea6c77b77146e671c">15185</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FunctionGetScriptId) {</div>
<div class="line"><a name="l15186"></a><span class="lineno">15186</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15187"></a><span class="lineno">15187</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l15188"></a><span class="lineno">15188</span>&#160;  <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a> origin = <a class="code" href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;test&quot;</span>),</div>
<div class="line"><a name="l15189"></a><span class="lineno">15189</span>&#160;      <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(3), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(2));</div>
<div class="line"><a name="l15190"></a><span class="lineno">15190</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::String&gt;</a> scriptSource = <a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(</div>
<div class="line"><a name="l15191"></a><span class="lineno">15191</span>&#160;      <span class="stringliteral">&quot;function foo() {}\n\n     function bar() {}&quot;</span>);</div>
<div class="line"><a name="l15192"></a><span class="lineno">15192</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Script&gt;</a> script(<a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(scriptSource, &amp;origin));</div>
<div class="line"><a name="l15193"></a><span class="lineno">15193</span>&#160;  script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>();</div>
<div class="line"><a name="l15194"></a><span class="lineno">15194</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> foo = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15195"></a><span class="lineno">15195</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l15196"></a><span class="lineno">15196</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Function&gt;</a> bar = <a class="code" href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt;v8::Function&gt;::Cast</a>(</div>
<div class="line"><a name="l15197"></a><span class="lineno">15197</span>&#160;      env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;bar&quot;</span>)));</div>
<div class="line"><a name="l15198"></a><span class="lineno">15198</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ac863f6ddf042f479912dd207d3fd17e0">Id</a>(), foo-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#aa8b63338765aa6e0a576267554a1f447">GetScriptId</a>());</div>
<div class="line"><a name="l15199"></a><span class="lineno">15199</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ac863f6ddf042f479912dd207d3fd17e0">Id</a>(), bar-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#aa8b63338765aa6e0a576267554a1f447">GetScriptId</a>());</div>
<div class="line"><a name="l15200"></a><span class="lineno">15200</span>&#160;}</div>
<div class="line"><a name="l15201"></a><span class="lineno">15201</span>&#160;</div>
<div class="line"><a name="l15202"></a><span class="lineno">15202</span>&#160;</div>
<div class="line"><a name="l15203"></a><span class="lineno">15203</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> GetterWhichReturns42(Local&lt;String&gt; name,</div>
<div class="line"><a name="l15204"></a><span class="lineno">15204</span>&#160;                                              <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l15205"></a><span class="lineno">15205</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8::Utils::OpenHandle(*info.This())-&gt;IsJSObject());</div>
<div class="line"><a name="l15206"></a><span class="lineno">15206</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8::Utils::OpenHandle(*info.Holder())-&gt;IsJSObject());</div>
<div class="line"><a name="l15207"></a><span class="lineno">15207</span>&#160;  <span class="keywordflow">return</span> v8_num(42);</div>
<div class="line"><a name="l15208"></a><span class="lineno">15208</span>&#160;}</div>
<div class="line"><a name="l15209"></a><span class="lineno">15209</span>&#160;</div>
<div class="line"><a name="l15210"></a><span class="lineno">15210</span>&#160;</div>
<div class="line"><a name="l15211"></a><span class="lineno">15211</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SetterWhichSetsYOnThisTo23(Local&lt;String&gt; name,</div>
<div class="line"><a name="l15212"></a><span class="lineno">15212</span>&#160;                                       Local&lt;Value&gt; value,</div>
<div class="line"><a name="l15213"></a><span class="lineno">15213</span>&#160;                                       <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l15214"></a><span class="lineno">15214</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8::Utils::OpenHandle(*info.This())-&gt;IsJSObject());</div>
<div class="line"><a name="l15215"></a><span class="lineno">15215</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8::Utils::OpenHandle(*info.Holder())-&gt;IsJSObject());</div>
<div class="line"><a name="l15216"></a><span class="lineno">15216</span>&#160;  info.This()-&gt;Set(v8_str(<span class="stringliteral">&quot;y&quot;</span>), v8_num(23));</div>
<div class="line"><a name="l15217"></a><span class="lineno">15217</span>&#160;}</div>
<div class="line"><a name="l15218"></a><span class="lineno">15218</span>&#160;</div>
<div class="line"><a name="l15219"></a><span class="lineno">15219</span>&#160;</div>
<div class="line"><a name="l15220"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5f9cc2080f13f303680c87b63c4e97b3">15220</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a5f9cc2080f13f303680c87b63c4e97b3">FooGetInterceptor</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l15221"></a><span class="lineno">15221</span>&#160;                                <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l15222"></a><span class="lineno">15222</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8::Utils::OpenHandle(*info.This())-&gt;IsJSObject());</div>
<div class="line"><a name="l15223"></a><span class="lineno">15223</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8::Utils::OpenHandle(*info.Holder())-&gt;IsJSObject());</div>
<div class="line"><a name="l15224"></a><span class="lineno">15224</span>&#160;  <span class="keywordflow">if</span> (!name-&gt;Equals(v8_str(<span class="stringliteral">&quot;foo&quot;</span>))) <span class="keywordflow">return</span> Handle&lt;Value&gt;();</div>
<div class="line"><a name="l15225"></a><span class="lineno">15225</span>&#160;  <span class="keywordflow">return</span> v8_num(42);</div>
<div class="line"><a name="l15226"></a><span class="lineno">15226</span>&#160;}</div>
<div class="line"><a name="l15227"></a><span class="lineno">15227</span>&#160;</div>
<div class="line"><a name="l15228"></a><span class="lineno">15228</span>&#160;</div>
<div class="line"><a name="l15229"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0ae29b3484cf60b0a039bbc152105275">15229</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a0ae29b3484cf60b0a039bbc152105275">FooSetInterceptor</a>(Local&lt;String&gt; name,</div>
<div class="line"><a name="l15230"></a><span class="lineno">15230</span>&#160;                                Local&lt;Value&gt; value,</div>
<div class="line"><a name="l15231"></a><span class="lineno">15231</span>&#160;                                <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l15232"></a><span class="lineno">15232</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8::Utils::OpenHandle(*info.This())-&gt;IsJSObject());</div>
<div class="line"><a name="l15233"></a><span class="lineno">15233</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v8::Utils::OpenHandle(*info.Holder())-&gt;IsJSObject());</div>
<div class="line"><a name="l15234"></a><span class="lineno">15234</span>&#160;  <span class="keywordflow">if</span> (!name-&gt;Equals(v8_str(<span class="stringliteral">&quot;foo&quot;</span>))) <span class="keywordflow">return</span> Handle&lt;Value&gt;();</div>
<div class="line"><a name="l15235"></a><span class="lineno">15235</span>&#160;  info.This()-&gt;Set(v8_str(<span class="stringliteral">&quot;y&quot;</span>), v8_num(23));</div>
<div class="line"><a name="l15236"></a><span class="lineno">15236</span>&#160;  <span class="keywordflow">return</span> v8_num(23);</div>
<div class="line"><a name="l15237"></a><span class="lineno">15237</span>&#160;}</div>
<div class="line"><a name="l15238"></a><span class="lineno">15238</span>&#160;</div>
<div class="line"><a name="l15239"></a><span class="lineno">15239</span>&#160;</div>
<div class="line"><a name="l15240"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa2ed722329900ac4596cd40fa4b95ff0">15240</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(SetterOnConstructorPrototype) {</div>
<div class="line"><a name="l15241"></a><span class="lineno">15241</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15242"></a><span class="lineno">15242</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l15243"></a><span class="lineno">15243</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;x&quot;</span>),</div>
<div class="line"><a name="l15244"></a><span class="lineno">15244</span>&#160;                     GetterWhichReturns42,</div>
<div class="line"><a name="l15245"></a><span class="lineno">15245</span>&#160;                     SetterWhichSetsYOnThisTo23);</div>
<div class="line"><a name="l15246"></a><span class="lineno">15246</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15247"></a><span class="lineno">15247</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;P&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l15248"></a><span class="lineno">15248</span>&#160;  CompileRun(<span class="stringliteral">&quot;function C1() {&quot;</span></div>
<div class="line"><a name="l15249"></a><span class="lineno">15249</span>&#160;             <span class="stringliteral">&quot;  this.x = 23;&quot;</span></div>
<div class="line"><a name="l15250"></a><span class="lineno">15250</span>&#160;             <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l15251"></a><span class="lineno">15251</span>&#160;             <span class="stringliteral">&quot;C1.prototype = P;&quot;</span></div>
<div class="line"><a name="l15252"></a><span class="lineno">15252</span>&#160;             <span class="stringliteral">&quot;function C2() {&quot;</span></div>
<div class="line"><a name="l15253"></a><span class="lineno">15253</span>&#160;             <span class="stringliteral">&quot;  this.x = 23&quot;</span></div>
<div class="line"><a name="l15254"></a><span class="lineno">15254</span>&#160;             <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l15255"></a><span class="lineno">15255</span>&#160;             <span class="stringliteral">&quot;C2.prototype = { };&quot;</span></div>
<div class="line"><a name="l15256"></a><span class="lineno">15256</span>&#160;             <span class="stringliteral">&quot;C2.prototype.__proto__ = P;&quot;</span>);</div>
<div class="line"><a name="l15257"></a><span class="lineno">15257</span>&#160;</div>
<div class="line"><a name="l15258"></a><span class="lineno">15258</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Script&gt;</a> script;</div>
<div class="line"><a name="l15259"></a><span class="lineno">15259</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(v8_str(<span class="stringliteral">&quot;new C1();&quot;</span>));</div>
<div class="line"><a name="l15260"></a><span class="lineno">15260</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l15261"></a><span class="lineno">15261</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> c1 = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Object&gt;::Cast</a>(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>());</div>
<div class="line"><a name="l15262"></a><span class="lineno">15262</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, c1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15263"></a><span class="lineno">15263</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, c1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15264"></a><span class="lineno">15264</span>&#160;  }</div>
<div class="line"><a name="l15265"></a><span class="lineno">15265</span>&#160;</div>
<div class="line"><a name="l15266"></a><span class="lineno">15266</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(v8_str(<span class="stringliteral">&quot;new C2();&quot;</span>));</div>
<div class="line"><a name="l15267"></a><span class="lineno">15267</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l15268"></a><span class="lineno">15268</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> c2 = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Object&gt;::Cast</a>(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>());</div>
<div class="line"><a name="l15269"></a><span class="lineno">15269</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, c2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15270"></a><span class="lineno">15270</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, c2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15271"></a><span class="lineno">15271</span>&#160;  }</div>
<div class="line"><a name="l15272"></a><span class="lineno">15272</span>&#160;}</div>
<div class="line"><a name="l15273"></a><span class="lineno">15273</span>&#160;</div>
<div class="line"><a name="l15274"></a><span class="lineno">15274</span>&#160;</div>
<div class="line"><a name="l15275"></a><span class="lineno">15275</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NamedPropertyGetterWhichReturns42(</div>
<div class="line"><a name="l15276"></a><span class="lineno">15276</span>&#160;    Local&lt;String&gt; name, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l15277"></a><span class="lineno">15277</span>&#160;  <span class="keywordflow">return</span> v8_num(42);</div>
<div class="line"><a name="l15278"></a><span class="lineno">15278</span>&#160;}</div>
<div class="line"><a name="l15279"></a><span class="lineno">15279</span>&#160;</div>
<div class="line"><a name="l15280"></a><span class="lineno">15280</span>&#160;</div>
<div class="line"><a name="l15281"></a><span class="lineno">15281</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NamedPropertySetterWhichSetsYOnThisTo23(</div>
<div class="line"><a name="l15282"></a><span class="lineno">15282</span>&#160;    Local&lt;String&gt; name, Local&lt;Value&gt; value, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l15283"></a><span class="lineno">15283</span>&#160;  <span class="keywordflow">if</span> (name-&gt;Equals(v8_str(<span class="stringliteral">&quot;x&quot;</span>))) {</div>
<div class="line"><a name="l15284"></a><span class="lineno">15284</span>&#160;    info.This()-&gt;Set(v8_str(<span class="stringliteral">&quot;y&quot;</span>), v8_num(23));</div>
<div class="line"><a name="l15285"></a><span class="lineno">15285</span>&#160;  }</div>
<div class="line"><a name="l15286"></a><span class="lineno">15286</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a>();</div>
<div class="line"><a name="l15287"></a><span class="lineno">15287</span>&#160;}</div>
<div class="line"><a name="l15288"></a><span class="lineno">15288</span>&#160;</div>
<div class="line"><a name="l15289"></a><span class="lineno">15289</span>&#160;</div>
<div class="line"><a name="l15290"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#add761d55a59bc3108818c4e14a71d98c">15290</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InterceptorOnConstructorPrototype) {</div>
<div class="line"><a name="l15291"></a><span class="lineno">15291</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15292"></a><span class="lineno">15292</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l15293"></a><span class="lineno">15293</span>&#160;  templ-&gt;SetNamedPropertyHandler(NamedPropertyGetterWhichReturns42,</div>
<div class="line"><a name="l15294"></a><span class="lineno">15294</span>&#160;                                 NamedPropertySetterWhichSetsYOnThisTo23);</div>
<div class="line"><a name="l15295"></a><span class="lineno">15295</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15296"></a><span class="lineno">15296</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;P&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l15297"></a><span class="lineno">15297</span>&#160;  CompileRun(<span class="stringliteral">&quot;function C1() {&quot;</span></div>
<div class="line"><a name="l15298"></a><span class="lineno">15298</span>&#160;             <span class="stringliteral">&quot;  this.x = 23;&quot;</span></div>
<div class="line"><a name="l15299"></a><span class="lineno">15299</span>&#160;             <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l15300"></a><span class="lineno">15300</span>&#160;             <span class="stringliteral">&quot;C1.prototype = P;&quot;</span></div>
<div class="line"><a name="l15301"></a><span class="lineno">15301</span>&#160;             <span class="stringliteral">&quot;function C2() {&quot;</span></div>
<div class="line"><a name="l15302"></a><span class="lineno">15302</span>&#160;             <span class="stringliteral">&quot;  this.x = 23&quot;</span></div>
<div class="line"><a name="l15303"></a><span class="lineno">15303</span>&#160;             <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l15304"></a><span class="lineno">15304</span>&#160;             <span class="stringliteral">&quot;C2.prototype = { };&quot;</span></div>
<div class="line"><a name="l15305"></a><span class="lineno">15305</span>&#160;             <span class="stringliteral">&quot;C2.prototype.__proto__ = P;&quot;</span>);</div>
<div class="line"><a name="l15306"></a><span class="lineno">15306</span>&#160;</div>
<div class="line"><a name="l15307"></a><span class="lineno">15307</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Script&gt;</a> script;</div>
<div class="line"><a name="l15308"></a><span class="lineno">15308</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(v8_str(<span class="stringliteral">&quot;new C1();&quot;</span>));</div>
<div class="line"><a name="l15309"></a><span class="lineno">15309</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l15310"></a><span class="lineno">15310</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> c1 = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Object&gt;::Cast</a>(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>());</div>
<div class="line"><a name="l15311"></a><span class="lineno">15311</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, c1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15312"></a><span class="lineno">15312</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, c1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15313"></a><span class="lineno">15313</span>&#160;  }</div>
<div class="line"><a name="l15314"></a><span class="lineno">15314</span>&#160;</div>
<div class="line"><a name="l15315"></a><span class="lineno">15315</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(v8_str(<span class="stringliteral">&quot;new C2();&quot;</span>));</div>
<div class="line"><a name="l15316"></a><span class="lineno">15316</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l15317"></a><span class="lineno">15317</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> c2 = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Object&gt;::Cast</a>(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>());</div>
<div class="line"><a name="l15318"></a><span class="lineno">15318</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, c2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15319"></a><span class="lineno">15319</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, c2-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15320"></a><span class="lineno">15320</span>&#160;  }</div>
<div class="line"><a name="l15321"></a><span class="lineno">15321</span>&#160;}</div>
<div class="line"><a name="l15322"></a><span class="lineno">15322</span>&#160;</div>
<div class="line"><a name="l15323"></a><span class="lineno">15323</span>&#160;</div>
<div class="line"><a name="l15324"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a2f61a55d7eed69666806bd34b97c553d">15324</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(Bug618) {</div>
<div class="line"><a name="l15325"></a><span class="lineno">15325</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* source = <span class="stringliteral">&quot;function C1() {&quot;</span></div>
<div class="line"><a name="l15326"></a><span class="lineno">15326</span>&#160;                       <span class="stringliteral">&quot;  this.x = 23;&quot;</span></div>
<div class="line"><a name="l15327"></a><span class="lineno">15327</span>&#160;                       <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l15328"></a><span class="lineno">15328</span>&#160;                       <span class="stringliteral">&quot;C1.prototype = P;&quot;</span>;</div>
<div class="line"><a name="l15329"></a><span class="lineno">15329</span>&#160;</div>
<div class="line"><a name="l15330"></a><span class="lineno">15330</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15331"></a><span class="lineno">15331</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15332"></a><span class="lineno">15332</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Script&gt;</a> script;</div>
<div class="line"><a name="l15333"></a><span class="lineno">15333</span>&#160;</div>
<div class="line"><a name="l15334"></a><span class="lineno">15334</span>&#160;  <span class="comment">// Use a simple object as prototype.</span></div>
<div class="line"><a name="l15335"></a><span class="lineno">15335</span>&#160;  <a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::Object&gt;</a> prototype = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>();</div>
<div class="line"><a name="l15336"></a><span class="lineno">15336</span>&#160;  prototype-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>), v8_num(42));</div>
<div class="line"><a name="l15337"></a><span class="lineno">15337</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;P&quot;</span>), prototype);</div>
<div class="line"><a name="l15338"></a><span class="lineno">15338</span>&#160;</div>
<div class="line"><a name="l15339"></a><span class="lineno">15339</span>&#160;  <span class="comment">// This compile will add the code to the compilation cache.</span></div>
<div class="line"><a name="l15340"></a><span class="lineno">15340</span>&#160;  CompileRun(source);</div>
<div class="line"><a name="l15341"></a><span class="lineno">15341</span>&#160;</div>
<div class="line"><a name="l15342"></a><span class="lineno">15342</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(v8_str(<span class="stringliteral">&quot;new C1();&quot;</span>));</div>
<div class="line"><a name="l15343"></a><span class="lineno">15343</span>&#160;  <span class="comment">// Allow enough iterations for the inobject slack tracking logic</span></div>
<div class="line"><a name="l15344"></a><span class="lineno">15344</span>&#160;  <span class="comment">// to finalize instance size and install the fast construct stub.</span></div>
<div class="line"><a name="l15345"></a><span class="lineno">15345</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 256; i++) {</div>
<div class="line"><a name="l15346"></a><span class="lineno">15346</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> c1 = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Object&gt;::Cast</a>(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>());</div>
<div class="line"><a name="l15347"></a><span class="lineno">15347</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, c1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15348"></a><span class="lineno">15348</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, c1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15349"></a><span class="lineno">15349</span>&#160;  }</div>
<div class="line"><a name="l15350"></a><span class="lineno">15350</span>&#160;</div>
<div class="line"><a name="l15351"></a><span class="lineno">15351</span>&#160;  <span class="comment">// Use an API object with accessors as prototype.</span></div>
<div class="line"><a name="l15352"></a><span class="lineno">15352</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l15353"></a><span class="lineno">15353</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;x&quot;</span>),</div>
<div class="line"><a name="l15354"></a><span class="lineno">15354</span>&#160;                     GetterWhichReturns42,</div>
<div class="line"><a name="l15355"></a><span class="lineno">15355</span>&#160;                     SetterWhichSetsYOnThisTo23);</div>
<div class="line"><a name="l15356"></a><span class="lineno">15356</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;P&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l15357"></a><span class="lineno">15357</span>&#160;</div>
<div class="line"><a name="l15358"></a><span class="lineno">15358</span>&#160;  <span class="comment">// This compile will get the code from the compilation cache.</span></div>
<div class="line"><a name="l15359"></a><span class="lineno">15359</span>&#160;  CompileRun(source);</div>
<div class="line"><a name="l15360"></a><span class="lineno">15360</span>&#160;</div>
<div class="line"><a name="l15361"></a><span class="lineno">15361</span>&#160;  script = <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(v8_str(<span class="stringliteral">&quot;new C1();&quot;</span>));</div>
<div class="line"><a name="l15362"></a><span class="lineno">15362</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><a name="l15363"></a><span class="lineno">15363</span>&#160;    <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> c1 = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Object&gt;::Cast</a>(script-&gt;<a class="code" href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">Run</a>());</div>
<div class="line"><a name="l15364"></a><span class="lineno">15364</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, c1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15365"></a><span class="lineno">15365</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(23, c1-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(v8_str(<span class="stringliteral">&quot;y&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l15366"></a><span class="lineno">15366</span>&#160;  }</div>
<div class="line"><a name="l15367"></a><span class="lineno">15367</span>&#160;}</div>
<div class="line"><a name="l15368"></a><span class="lineno">15368</span>&#160;</div>
<div class="line"><a name="l15369"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9f5dbe6085d0f3cef568278cde47d63b">15369</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a9f5dbe6085d0f3cef568278cde47d63b">prologue_call_count</a> = 0;</div>
<div class="line"><a name="l15370"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae450e102a29ba2c99b73e153f9f4a485">15370</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ae450e102a29ba2c99b73e153f9f4a485">epilogue_call_count</a> = 0;</div>
<div class="line"><a name="l15371"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aba74bcf4d40861da61ae4964e303a547">15371</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#aba74bcf4d40861da61ae4964e303a547">prologue_call_count_second</a> = 0;</div>
<div class="line"><a name="l15372"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aba7a898eed1b3fb0c15cdd162843d1c4">15372</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3f/test-api_8cc.html#aba7a898eed1b3fb0c15cdd162843d1c4">epilogue_call_count_second</a> = 0;</div>
<div class="line"><a name="l15373"></a><span class="lineno">15373</span>&#160;</div>
<div class="line"><a name="l15374"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9703311748e8706c3e1e0de1408f93a9">15374</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a9703311748e8706c3e1e0de1408f93a9">PrologueCallback</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a83be2143eef5fa2b17127fd69686496b">v8::GCType</a>, <a class="code" href="../../d2/dc3/namespacev8.html#a6748429f1ad36cb4d955e79e4e042229">v8::GCCallbackFlags</a>) {</div>
<div class="line"><a name="l15375"></a><span class="lineno">15375</span>&#160;  ++<a class="code" href="../../de/d3f/test-api_8cc.html#a9f5dbe6085d0f3cef568278cde47d63b">prologue_call_count</a>;</div>
<div class="line"><a name="l15376"></a><span class="lineno">15376</span>&#160;}</div>
<div class="line"><a name="l15377"></a><span class="lineno">15377</span>&#160;</div>
<div class="line"><a name="l15378"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af7ec1f04cbc1275cab5a8bb1249489e9">15378</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#af7ec1f04cbc1275cab5a8bb1249489e9">EpilogueCallback</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a83be2143eef5fa2b17127fd69686496b">v8::GCType</a>, <a class="code" href="../../d2/dc3/namespacev8.html#a6748429f1ad36cb4d955e79e4e042229">v8::GCCallbackFlags</a>) {</div>
<div class="line"><a name="l15379"></a><span class="lineno">15379</span>&#160;  ++<a class="code" href="../../de/d3f/test-api_8cc.html#ae450e102a29ba2c99b73e153f9f4a485">epilogue_call_count</a>;</div>
<div class="line"><a name="l15380"></a><span class="lineno">15380</span>&#160;}</div>
<div class="line"><a name="l15381"></a><span class="lineno">15381</span>&#160;</div>
<div class="line"><a name="l15382"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3d6119d42d7d65d3a79e45af48b3ca9e">15382</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a3d6119d42d7d65d3a79e45af48b3ca9e">PrologueCallbackSecond</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a83be2143eef5fa2b17127fd69686496b">v8::GCType</a>, <a class="code" href="../../d2/dc3/namespacev8.html#a6748429f1ad36cb4d955e79e4e042229">v8::GCCallbackFlags</a>) {</div>
<div class="line"><a name="l15383"></a><span class="lineno">15383</span>&#160;  ++<a class="code" href="../../de/d3f/test-api_8cc.html#aba74bcf4d40861da61ae4964e303a547">prologue_call_count_second</a>;</div>
<div class="line"><a name="l15384"></a><span class="lineno">15384</span>&#160;}</div>
<div class="line"><a name="l15385"></a><span class="lineno">15385</span>&#160;</div>
<div class="line"><a name="l15386"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a12b9cd17f03f054b946e82a34f9dec3a">15386</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a12b9cd17f03f054b946e82a34f9dec3a">EpilogueCallbackSecond</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a83be2143eef5fa2b17127fd69686496b">v8::GCType</a>, <a class="code" href="../../d2/dc3/namespacev8.html#a6748429f1ad36cb4d955e79e4e042229">v8::GCCallbackFlags</a>) {</div>
<div class="line"><a name="l15387"></a><span class="lineno">15387</span>&#160;  ++<a class="code" href="../../de/d3f/test-api_8cc.html#aba7a898eed1b3fb0c15cdd162843d1c4">epilogue_call_count_second</a>;</div>
<div class="line"><a name="l15388"></a><span class="lineno">15388</span>&#160;}</div>
<div class="line"><a name="l15389"></a><span class="lineno">15389</span>&#160;</div>
<div class="line"><a name="l15390"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a20a0d09add40e07ad5e5bd40d5ec10d7">15390</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(GCCallbacks) {</div>
<div class="line"><a name="l15391"></a><span class="lineno">15391</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15392"></a><span class="lineno">15392</span>&#160;</div>
<div class="line"><a name="l15393"></a><span class="lineno">15393</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ab4b87b8f9f8e5bf95eba4009357e001f">v8::V8::AddGCPrologueCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a9703311748e8706c3e1e0de1408f93a9">PrologueCallback</a>);</div>
<div class="line"><a name="l15394"></a><span class="lineno">15394</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a90d1860babc76059c62514b422f56960">v8::V8::AddGCEpilogueCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#af7ec1f04cbc1275cab5a8bb1249489e9">EpilogueCallback</a>);</div>
<div class="line"><a name="l15395"></a><span class="lineno">15395</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, prologue_call_count);</div>
<div class="line"><a name="l15396"></a><span class="lineno">15396</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, epilogue_call_count);</div>
<div class="line"><a name="l15397"></a><span class="lineno">15397</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l15398"></a><span class="lineno">15398</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, prologue_call_count);</div>
<div class="line"><a name="l15399"></a><span class="lineno">15399</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, epilogue_call_count);</div>
<div class="line"><a name="l15400"></a><span class="lineno">15400</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#ab4b87b8f9f8e5bf95eba4009357e001f">v8::V8::AddGCPrologueCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a3d6119d42d7d65d3a79e45af48b3ca9e">PrologueCallbackSecond</a>);</div>
<div class="line"><a name="l15401"></a><span class="lineno">15401</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a90d1860babc76059c62514b422f56960">v8::V8::AddGCEpilogueCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a12b9cd17f03f054b946e82a34f9dec3a">EpilogueCallbackSecond</a>);</div>
<div class="line"><a name="l15402"></a><span class="lineno">15402</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l15403"></a><span class="lineno">15403</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, prologue_call_count);</div>
<div class="line"><a name="l15404"></a><span class="lineno">15404</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, epilogue_call_count);</div>
<div class="line"><a name="l15405"></a><span class="lineno">15405</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, prologue_call_count_second);</div>
<div class="line"><a name="l15406"></a><span class="lineno">15406</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, epilogue_call_count_second);</div>
<div class="line"><a name="l15407"></a><span class="lineno">15407</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a9f6c51932811593f81ff30b949124186">v8::V8::RemoveGCPrologueCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a9703311748e8706c3e1e0de1408f93a9">PrologueCallback</a>);</div>
<div class="line"><a name="l15408"></a><span class="lineno">15408</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a05c60859fd4b8e96bfcd451281ed6c7c">v8::V8::RemoveGCEpilogueCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#af7ec1f04cbc1275cab5a8bb1249489e9">EpilogueCallback</a>);</div>
<div class="line"><a name="l15409"></a><span class="lineno">15409</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l15410"></a><span class="lineno">15410</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, prologue_call_count);</div>
<div class="line"><a name="l15411"></a><span class="lineno">15411</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, epilogue_call_count);</div>
<div class="line"><a name="l15412"></a><span class="lineno">15412</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, prologue_call_count_second);</div>
<div class="line"><a name="l15413"></a><span class="lineno">15413</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, epilogue_call_count_second);</div>
<div class="line"><a name="l15414"></a><span class="lineno">15414</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a9f6c51932811593f81ff30b949124186">v8::V8::RemoveGCPrologueCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a3d6119d42d7d65d3a79e45af48b3ca9e">PrologueCallbackSecond</a>);</div>
<div class="line"><a name="l15415"></a><span class="lineno">15415</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a05c60859fd4b8e96bfcd451281ed6c7c">v8::V8::RemoveGCEpilogueCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a12b9cd17f03f054b946e82a34f9dec3a">EpilogueCallbackSecond</a>);</div>
<div class="line"><a name="l15416"></a><span class="lineno">15416</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l15417"></a><span class="lineno">15417</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, prologue_call_count);</div>
<div class="line"><a name="l15418"></a><span class="lineno">15418</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, epilogue_call_count);</div>
<div class="line"><a name="l15419"></a><span class="lineno">15419</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, prologue_call_count_second);</div>
<div class="line"><a name="l15420"></a><span class="lineno">15420</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, epilogue_call_count_second);</div>
<div class="line"><a name="l15421"></a><span class="lineno">15421</span>&#160;}</div>
<div class="line"><a name="l15422"></a><span class="lineno">15422</span>&#160;</div>
<div class="line"><a name="l15423"></a><span class="lineno">15423</span>&#160;</div>
<div class="line"><a name="l15424"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7442f7c76054f38aa2d91c6bcad3cdbc">15424</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AddToJSFunctionResultCache) {</div>
<div class="line"><a name="l15425"></a><span class="lineno">15425</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l15426"></a><span class="lineno">15426</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15427"></a><span class="lineno">15427</span>&#160;</div>
<div class="line"><a name="l15428"></a><span class="lineno">15428</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15429"></a><span class="lineno">15429</span>&#160;</div>
<div class="line"><a name="l15430"></a><span class="lineno">15430</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l15431"></a><span class="lineno">15431</span>&#160;      <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l15432"></a><span class="lineno">15432</span>&#160;      <span class="stringliteral">&quot;  var key0 = &#39;a&#39;;&quot;</span></div>
<div class="line"><a name="l15433"></a><span class="lineno">15433</span>&#160;      <span class="stringliteral">&quot;  var key1 = &#39;b&#39;;&quot;</span></div>
<div class="line"><a name="l15434"></a><span class="lineno">15434</span>&#160;      <span class="stringliteral">&quot;  var r0 = %_GetFromCache(0, key0);&quot;</span></div>
<div class="line"><a name="l15435"></a><span class="lineno">15435</span>&#160;      <span class="stringliteral">&quot;  var r1 = %_GetFromCache(0, key1);&quot;</span></div>
<div class="line"><a name="l15436"></a><span class="lineno">15436</span>&#160;      <span class="stringliteral">&quot;  var r0_ = %_GetFromCache(0, key0);&quot;</span></div>
<div class="line"><a name="l15437"></a><span class="lineno">15437</span>&#160;      <span class="stringliteral">&quot;  if (r0 !== r0_)&quot;</span></div>
<div class="line"><a name="l15438"></a><span class="lineno">15438</span>&#160;      <span class="stringliteral">&quot;    return &#39;Different results for &#39; + key0 + &#39;: &#39; + r0 + &#39; vs. &#39; + r0_;&quot;</span></div>
<div class="line"><a name="l15439"></a><span class="lineno">15439</span>&#160;      <span class="stringliteral">&quot;  var r1_ = %_GetFromCache(0, key1);&quot;</span></div>
<div class="line"><a name="l15440"></a><span class="lineno">15440</span>&#160;      <span class="stringliteral">&quot;  if (r1 !== r1_)&quot;</span></div>
<div class="line"><a name="l15441"></a><span class="lineno">15441</span>&#160;      <span class="stringliteral">&quot;    return &#39;Different results for &#39; + key1 + &#39;: &#39; + r1 + &#39; vs. &#39; + r1_;&quot;</span></div>
<div class="line"><a name="l15442"></a><span class="lineno">15442</span>&#160;      <span class="stringliteral">&quot;  return &#39;PASSED&#39;;&quot;</span></div>
<div class="line"><a name="l15443"></a><span class="lineno">15443</span>&#160;      <span class="stringliteral">&quot;})()&quot;</span>;</div>
<div class="line"><a name="l15444"></a><span class="lineno">15444</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;ClearJSFunctionResultCaches();</div>
<div class="line"><a name="l15445"></a><span class="lineno">15445</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l15446"></a><span class="lineno">15446</span>&#160;}</div>
<div class="line"><a name="l15447"></a><span class="lineno">15447</span>&#160;</div>
<div class="line"><a name="l15448"></a><span class="lineno">15448</span>&#160;</div>
<div class="line"><a name="l15449"></a><span class="lineno">15449</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> k0CacheSize = 16;</div>
<div class="line"><a name="l15450"></a><span class="lineno">15450</span>&#160;</div>
<div class="line"><a name="l15451"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abcbad4d9a135df975112780e95e42c40">15451</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(FillJSFunctionResultCache) {</div>
<div class="line"><a name="l15452"></a><span class="lineno">15452</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l15453"></a><span class="lineno">15453</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15454"></a><span class="lineno">15454</span>&#160;</div>
<div class="line"><a name="l15455"></a><span class="lineno">15455</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15456"></a><span class="lineno">15456</span>&#160;</div>
<div class="line"><a name="l15457"></a><span class="lineno">15457</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l15458"></a><span class="lineno">15458</span>&#160;      <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l15459"></a><span class="lineno">15459</span>&#160;      <span class="stringliteral">&quot;  var k = &#39;a&#39;;&quot;</span></div>
<div class="line"><a name="l15460"></a><span class="lineno">15460</span>&#160;      <span class="stringliteral">&quot;  var r = %_GetFromCache(0, k);&quot;</span></div>
<div class="line"><a name="l15461"></a><span class="lineno">15461</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 16; i++) {&quot;</span></div>
<div class="line"><a name="l15462"></a><span class="lineno">15462</span>&#160;      <span class="stringliteral">&quot;    %_GetFromCache(0, &#39;a&#39; + i);&quot;</span></div>
<div class="line"><a name="l15463"></a><span class="lineno">15463</span>&#160;      <span class="stringliteral">&quot;  };&quot;</span></div>
<div class="line"><a name="l15464"></a><span class="lineno">15464</span>&#160;      <span class="stringliteral">&quot;  if (r === %_GetFromCache(0, k))&quot;</span></div>
<div class="line"><a name="l15465"></a><span class="lineno">15465</span>&#160;      <span class="stringliteral">&quot;    return &#39;FAILED: k0CacheSize is too small&#39;;&quot;</span></div>
<div class="line"><a name="l15466"></a><span class="lineno">15466</span>&#160;      <span class="stringliteral">&quot;  return &#39;PASSED&#39;;&quot;</span></div>
<div class="line"><a name="l15467"></a><span class="lineno">15467</span>&#160;      <span class="stringliteral">&quot;})()&quot;</span>;</div>
<div class="line"><a name="l15468"></a><span class="lineno">15468</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;ClearJSFunctionResultCaches();</div>
<div class="line"><a name="l15469"></a><span class="lineno">15469</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l15470"></a><span class="lineno">15470</span>&#160;}</div>
<div class="line"><a name="l15471"></a><span class="lineno">15471</span>&#160;</div>
<div class="line"><a name="l15472"></a><span class="lineno">15472</span>&#160;</div>
<div class="line"><a name="l15473"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a476423f397034d2d54b7ae316ce69052">15473</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(RoundRobinGetFromCache) {</div>
<div class="line"><a name="l15474"></a><span class="lineno">15474</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l15475"></a><span class="lineno">15475</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15476"></a><span class="lineno">15476</span>&#160;</div>
<div class="line"><a name="l15477"></a><span class="lineno">15477</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15478"></a><span class="lineno">15478</span>&#160;</div>
<div class="line"><a name="l15479"></a><span class="lineno">15479</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l15480"></a><span class="lineno">15480</span>&#160;      <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l15481"></a><span class="lineno">15481</span>&#160;      <span class="stringliteral">&quot;  var keys = [];&quot;</span></div>
<div class="line"><a name="l15482"></a><span class="lineno">15482</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 16; i++) keys.push(i);&quot;</span></div>
<div class="line"><a name="l15483"></a><span class="lineno">15483</span>&#160;      <span class="stringliteral">&quot;  var values = [];&quot;</span></div>
<div class="line"><a name="l15484"></a><span class="lineno">15484</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 16; i++) values[i] = %_GetFromCache(0, keys[i]);&quot;</span></div>
<div class="line"><a name="l15485"></a><span class="lineno">15485</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 16; i++) {&quot;</span></div>
<div class="line"><a name="l15486"></a><span class="lineno">15486</span>&#160;      <span class="stringliteral">&quot;    var v = %_GetFromCache(0, keys[i]);&quot;</span></div>
<div class="line"><a name="l15487"></a><span class="lineno">15487</span>&#160;      <span class="stringliteral">&quot;    if (v.toString() !== values[i].toString())&quot;</span></div>
<div class="line"><a name="l15488"></a><span class="lineno">15488</span>&#160;      <span class="stringliteral">&quot;      return &#39;Wrong value for &#39; + &quot;</span></div>
<div class="line"><a name="l15489"></a><span class="lineno">15489</span>&#160;      <span class="stringliteral">&quot;          keys[i] + &#39;: &#39; + v + &#39; vs. &#39; + values[i];&quot;</span></div>
<div class="line"><a name="l15490"></a><span class="lineno">15490</span>&#160;      <span class="stringliteral">&quot;  };&quot;</span></div>
<div class="line"><a name="l15491"></a><span class="lineno">15491</span>&#160;      <span class="stringliteral">&quot;  return &#39;PASSED&#39;;&quot;</span></div>
<div class="line"><a name="l15492"></a><span class="lineno">15492</span>&#160;      <span class="stringliteral">&quot;})()&quot;</span>;</div>
<div class="line"><a name="l15493"></a><span class="lineno">15493</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;ClearJSFunctionResultCaches();</div>
<div class="line"><a name="l15494"></a><span class="lineno">15494</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l15495"></a><span class="lineno">15495</span>&#160;}</div>
<div class="line"><a name="l15496"></a><span class="lineno">15496</span>&#160;</div>
<div class="line"><a name="l15497"></a><span class="lineno">15497</span>&#160;</div>
<div class="line"><a name="l15498"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aaa41ab01031538f6971d05394e62cb0b">15498</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ReverseGetFromCache) {</div>
<div class="line"><a name="l15499"></a><span class="lineno">15499</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l15500"></a><span class="lineno">15500</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15501"></a><span class="lineno">15501</span>&#160;</div>
<div class="line"><a name="l15502"></a><span class="lineno">15502</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15503"></a><span class="lineno">15503</span>&#160;</div>
<div class="line"><a name="l15504"></a><span class="lineno">15504</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l15505"></a><span class="lineno">15505</span>&#160;      <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l15506"></a><span class="lineno">15506</span>&#160;      <span class="stringliteral">&quot;  var keys = [];&quot;</span></div>
<div class="line"><a name="l15507"></a><span class="lineno">15507</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 16; i++) keys.push(i);&quot;</span></div>
<div class="line"><a name="l15508"></a><span class="lineno">15508</span>&#160;      <span class="stringliteral">&quot;  var values = [];&quot;</span></div>
<div class="line"><a name="l15509"></a><span class="lineno">15509</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 16; i++) values[i] = %_GetFromCache(0, keys[i]);&quot;</span></div>
<div class="line"><a name="l15510"></a><span class="lineno">15510</span>&#160;      <span class="stringliteral">&quot;  for (var i = 15; i &gt;= 16; i--) {&quot;</span></div>
<div class="line"><a name="l15511"></a><span class="lineno">15511</span>&#160;      <span class="stringliteral">&quot;    var v = %_GetFromCache(0, keys[i]);&quot;</span></div>
<div class="line"><a name="l15512"></a><span class="lineno">15512</span>&#160;      <span class="stringliteral">&quot;    if (v !== values[i])&quot;</span></div>
<div class="line"><a name="l15513"></a><span class="lineno">15513</span>&#160;      <span class="stringliteral">&quot;      return &#39;Wrong value for &#39; + &quot;</span></div>
<div class="line"><a name="l15514"></a><span class="lineno">15514</span>&#160;      <span class="stringliteral">&quot;          keys[i] + &#39;: &#39; + v + &#39; vs. &#39; + values[i];&quot;</span></div>
<div class="line"><a name="l15515"></a><span class="lineno">15515</span>&#160;      <span class="stringliteral">&quot;  };&quot;</span></div>
<div class="line"><a name="l15516"></a><span class="lineno">15516</span>&#160;      <span class="stringliteral">&quot;  return &#39;PASSED&#39;;&quot;</span></div>
<div class="line"><a name="l15517"></a><span class="lineno">15517</span>&#160;      <span class="stringliteral">&quot;})()&quot;</span>;</div>
<div class="line"><a name="l15518"></a><span class="lineno">15518</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;ClearJSFunctionResultCaches();</div>
<div class="line"><a name="l15519"></a><span class="lineno">15519</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l15520"></a><span class="lineno">15520</span>&#160;}</div>
<div class="line"><a name="l15521"></a><span class="lineno">15521</span>&#160;</div>
<div class="line"><a name="l15522"></a><span class="lineno">15522</span>&#160;</div>
<div class="line"><a name="l15523"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a670f0680f907034d760bb3839d2eaea2">15523</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TestEviction) {</div>
<div class="line"><a name="l15524"></a><span class="lineno">15524</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l15525"></a><span class="lineno">15525</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15526"></a><span class="lineno">15526</span>&#160;</div>
<div class="line"><a name="l15527"></a><span class="lineno">15527</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15528"></a><span class="lineno">15528</span>&#160;</div>
<div class="line"><a name="l15529"></a><span class="lineno">15529</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l15530"></a><span class="lineno">15530</span>&#160;      <span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l15531"></a><span class="lineno">15531</span>&#160;      <span class="stringliteral">&quot;  for (var i = 0; i &lt; 2*16; i++) {&quot;</span></div>
<div class="line"><a name="l15532"></a><span class="lineno">15532</span>&#160;      <span class="stringliteral">&quot;    %_GetFromCache(0, &#39;a&#39; + i);&quot;</span></div>
<div class="line"><a name="l15533"></a><span class="lineno">15533</span>&#160;      <span class="stringliteral">&quot;  };&quot;</span></div>
<div class="line"><a name="l15534"></a><span class="lineno">15534</span>&#160;      <span class="stringliteral">&quot;  return &#39;PASSED&#39;;&quot;</span></div>
<div class="line"><a name="l15535"></a><span class="lineno">15535</span>&#160;      <span class="stringliteral">&quot;})()&quot;</span>;</div>
<div class="line"><a name="l15536"></a><span class="lineno">15536</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;ClearJSFunctionResultCaches();</div>
<div class="line"><a name="l15537"></a><span class="lineno">15537</span>&#160;  ExpectString(code, <span class="stringliteral">&quot;PASSED&quot;</span>);</div>
<div class="line"><a name="l15538"></a><span class="lineno">15538</span>&#160;}</div>
<div class="line"><a name="l15539"></a><span class="lineno">15539</span>&#160;</div>
<div class="line"><a name="l15540"></a><span class="lineno">15540</span>&#160;</div>
<div class="line"><a name="l15541"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a17a9cc55f487394e6c3c1dfb01b5b6b7">15541</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(TwoByteStringInAsciiCons) {</div>
<div class="line"><a name="l15542"></a><span class="lineno">15542</span>&#160;  <span class="comment">// See Chromium issue 47824.</span></div>
<div class="line"><a name="l15543"></a><span class="lineno">15543</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15544"></a><span class="lineno">15544</span>&#160;</div>
<div class="line"><a name="l15545"></a><span class="lineno">15545</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15546"></a><span class="lineno">15546</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* init_code =</div>
<div class="line"><a name="l15547"></a><span class="lineno">15547</span>&#160;      <span class="stringliteral">&quot;var str1 = &#39;abelspendabel&#39;;&quot;</span></div>
<div class="line"><a name="l15548"></a><span class="lineno">15548</span>&#160;      <span class="stringliteral">&quot;var str2 = str1 + str1 + str1;&quot;</span></div>
<div class="line"><a name="l15549"></a><span class="lineno">15549</span>&#160;      <span class="stringliteral">&quot;str2;&quot;</span>;</div>
<div class="line"><a name="l15550"></a><span class="lineno">15550</span>&#160;  Local&lt;Value&gt; result = CompileRun(init_code);</div>
<div class="line"><a name="l15551"></a><span class="lineno">15551</span>&#160;</div>
<div class="line"><a name="l15552"></a><span class="lineno">15552</span>&#160;  Local&lt;Value&gt; indexof = CompileRun(<span class="stringliteral">&quot;str2.indexOf(&#39;els&#39;)&quot;</span>);</div>
<div class="line"><a name="l15553"></a><span class="lineno">15553</span>&#160;  Local&lt;Value&gt; lastindexof = CompileRun(<span class="stringliteral">&quot;str2.lastIndexOf(&#39;dab&#39;)&quot;</span>);</div>
<div class="line"><a name="l15554"></a><span class="lineno">15554</span>&#160;</div>
<div class="line"><a name="l15555"></a><span class="lineno">15555</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsString());</div>
<div class="line"><a name="l15556"></a><span class="lineno">15556</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> <span class="keywordtype">string</span> = v8::Utils::OpenHandle(String::Cast(*result));</div>
<div class="line"><a name="l15557"></a><span class="lineno">15557</span>&#160;  <span class="keywordtype">int</span> length = <span class="keywordtype">string</span>-&gt;length();</div>
<div class="line"><a name="l15558"></a><span class="lineno">15558</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsAsciiRepresentation());</div>
<div class="line"><a name="l15559"></a><span class="lineno">15559</span>&#160;</div>
<div class="line"><a name="l15560"></a><span class="lineno">15560</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">FlattenString</a>(<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l15561"></a><span class="lineno">15561</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::String&gt;</a> flat_string = <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ada76c4fe81db9c32168c8ca541dedd91">FlattenGetString</a>(<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l15562"></a><span class="lineno">15562</span>&#160;</div>
<div class="line"><a name="l15563"></a><span class="lineno">15563</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsAsciiRepresentation());</div>
<div class="line"><a name="l15564"></a><span class="lineno">15564</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(flat_string-&gt;IsAsciiRepresentation());</div>
<div class="line"><a name="l15565"></a><span class="lineno">15565</span>&#160;</div>
<div class="line"><a name="l15566"></a><span class="lineno">15566</span>&#160;  <span class="comment">// Create external resource.</span></div>
<div class="line"><a name="l15567"></a><span class="lineno">15567</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* uc16_buffer = <span class="keyword">new</span> <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>[length + 1];</div>
<div class="line"><a name="l15568"></a><span class="lineno">15568</span>&#160;</div>
<div class="line"><a name="l15569"></a><span class="lineno">15569</span>&#160;  <a class="code" href="../../db/db6/classv8_1_1internal_1_1_string.html#a0a08c3be5d13ce1af2b496e392171b99">i::String::WriteToFlat</a>(*flat_string, uc16_buffer, 0, length);</div>
<div class="line"><a name="l15570"></a><span class="lineno">15570</span>&#160;  uc16_buffer[length] = 0;</div>
<div class="line"><a name="l15571"></a><span class="lineno">15571</span>&#160;</div>
<div class="line"><a name="l15572"></a><span class="lineno">15572</span>&#160;  <a class="code" href="../../d6/d3d/class_test_resource.html">TestResource</a> resource(uc16_buffer);</div>
<div class="line"><a name="l15573"></a><span class="lineno">15573</span>&#160;</div>
<div class="line"><a name="l15574"></a><span class="lineno">15574</span>&#160;  flat_string-&gt;MakeExternal(&amp;resource);</div>
<div class="line"><a name="l15575"></a><span class="lineno">15575</span>&#160;</div>
<div class="line"><a name="l15576"></a><span class="lineno">15576</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(flat_string-&gt;IsTwoByteRepresentation());</div>
<div class="line"><a name="l15577"></a><span class="lineno">15577</span>&#160;</div>
<div class="line"><a name="l15578"></a><span class="lineno">15578</span>&#160;  <span class="comment">// At this point, we should have a Cons string which is flat and ASCII,</span></div>
<div class="line"><a name="l15579"></a><span class="lineno">15579</span>&#160;  <span class="comment">// with a first half that is a two-byte string (although it only contains</span></div>
<div class="line"><a name="l15580"></a><span class="lineno">15580</span>&#160;  <span class="comment">// ASCII characters). This is a valid sequence of steps, and it can happen</span></div>
<div class="line"><a name="l15581"></a><span class="lineno">15581</span>&#160;  <span class="comment">// in real pages.</span></div>
<div class="line"><a name="l15582"></a><span class="lineno">15582</span>&#160;</div>
<div class="line"><a name="l15583"></a><span class="lineno">15583</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(string-&gt;IsAsciiRepresentation());</div>
<div class="line"><a name="l15584"></a><span class="lineno">15584</span>&#160;  <a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html">i::ConsString</a>* cons = <a class="code" href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">i::ConsString::cast</a>(*<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l15585"></a><span class="lineno">15585</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, cons-&gt;second()-&gt;length());</div>
<div class="line"><a name="l15586"></a><span class="lineno">15586</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(cons-&gt;first()-&gt;IsTwoByteRepresentation());</div>
<div class="line"><a name="l15587"></a><span class="lineno">15587</span>&#160;</div>
<div class="line"><a name="l15588"></a><span class="lineno">15588</span>&#160;  <span class="comment">// Check that some string operations work.</span></div>
<div class="line"><a name="l15589"></a><span class="lineno">15589</span>&#160;</div>
<div class="line"><a name="l15590"></a><span class="lineno">15590</span>&#160;  <span class="comment">// Atom RegExp.</span></div>
<div class="line"><a name="l15591"></a><span class="lineno">15591</span>&#160;  Local&lt;Value&gt; reresult = CompileRun(<span class="stringliteral">&quot;str2.match(/abel/g).length;&quot;</span>);</div>
<div class="line"><a name="l15592"></a><span class="lineno">15592</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, reresult-&gt;Int32Value());</div>
<div class="line"><a name="l15593"></a><span class="lineno">15593</span>&#160;</div>
<div class="line"><a name="l15594"></a><span class="lineno">15594</span>&#160;  <span class="comment">// Nonatom RegExp.</span></div>
<div class="line"><a name="l15595"></a><span class="lineno">15595</span>&#160;  reresult = CompileRun(<span class="stringliteral">&quot;str2.match(/abe./g).length;&quot;</span>);</div>
<div class="line"><a name="l15596"></a><span class="lineno">15596</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, reresult-&gt;Int32Value());</div>
<div class="line"><a name="l15597"></a><span class="lineno">15597</span>&#160;</div>
<div class="line"><a name="l15598"></a><span class="lineno">15598</span>&#160;  reresult = CompileRun(<span class="stringliteral">&quot;str2.search(/bel/g);&quot;</span>);</div>
<div class="line"><a name="l15599"></a><span class="lineno">15599</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, reresult-&gt;Int32Value());</div>
<div class="line"><a name="l15600"></a><span class="lineno">15600</span>&#160;</div>
<div class="line"><a name="l15601"></a><span class="lineno">15601</span>&#160;  reresult = CompileRun(<span class="stringliteral">&quot;str2.search(/be./g);&quot;</span>);</div>
<div class="line"><a name="l15602"></a><span class="lineno">15602</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, reresult-&gt;Int32Value());</div>
<div class="line"><a name="l15603"></a><span class="lineno">15603</span>&#160;</div>
<div class="line"><a name="l15604"></a><span class="lineno">15604</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;/bel/g.test(str2);&quot;</span>);</div>
<div class="line"><a name="l15605"></a><span class="lineno">15605</span>&#160;</div>
<div class="line"><a name="l15606"></a><span class="lineno">15606</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;/be./g.test(str2);&quot;</span>);</div>
<div class="line"><a name="l15607"></a><span class="lineno">15607</span>&#160;</div>
<div class="line"><a name="l15608"></a><span class="lineno">15608</span>&#160;  reresult = CompileRun(<span class="stringliteral">&quot;/bel/g.exec(str2);&quot;</span>);</div>
<div class="line"><a name="l15609"></a><span class="lineno">15609</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!reresult-&gt;IsNull());</div>
<div class="line"><a name="l15610"></a><span class="lineno">15610</span>&#160;</div>
<div class="line"><a name="l15611"></a><span class="lineno">15611</span>&#160;  reresult = CompileRun(<span class="stringliteral">&quot;/be./g.exec(str2);&quot;</span>);</div>
<div class="line"><a name="l15612"></a><span class="lineno">15612</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!reresult-&gt;IsNull());</div>
<div class="line"><a name="l15613"></a><span class="lineno">15613</span>&#160;</div>
<div class="line"><a name="l15614"></a><span class="lineno">15614</span>&#160;  ExpectString(<span class="stringliteral">&quot;str2.substring(2, 10);&quot;</span>, <span class="stringliteral">&quot;elspenda&quot;</span>);</div>
<div class="line"><a name="l15615"></a><span class="lineno">15615</span>&#160;</div>
<div class="line"><a name="l15616"></a><span class="lineno">15616</span>&#160;  ExpectString(<span class="stringliteral">&quot;str2.substring(2, 20);&quot;</span>, <span class="stringliteral">&quot;elspendabelabelspe&quot;</span>);</div>
<div class="line"><a name="l15617"></a><span class="lineno">15617</span>&#160;</div>
<div class="line"><a name="l15618"></a><span class="lineno">15618</span>&#160;  ExpectString(<span class="stringliteral">&quot;str2.charAt(2);&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>);</div>
<div class="line"><a name="l15619"></a><span class="lineno">15619</span>&#160;</div>
<div class="line"><a name="l15620"></a><span class="lineno">15620</span>&#160;  ExpectObject(<span class="stringliteral">&quot;str2.indexOf(&#39;els&#39;);&quot;</span>, indexof);</div>
<div class="line"><a name="l15621"></a><span class="lineno">15621</span>&#160;</div>
<div class="line"><a name="l15622"></a><span class="lineno">15622</span>&#160;  ExpectObject(<span class="stringliteral">&quot;str2.lastIndexOf(&#39;dab&#39;);&quot;</span>, lastindexof);</div>
<div class="line"><a name="l15623"></a><span class="lineno">15623</span>&#160;</div>
<div class="line"><a name="l15624"></a><span class="lineno">15624</span>&#160;  reresult = CompileRun(<span class="stringliteral">&quot;str2.charCodeAt(2);&quot;</span>);</div>
<div class="line"><a name="l15625"></a><span class="lineno">15625</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(static_cast&lt;int32_t&gt;(<span class="charliteral">&#39;e&#39;</span>), reresult-&gt;Int32Value());</div>
<div class="line"><a name="l15626"></a><span class="lineno">15626</span>&#160;}</div>
<div class="line"><a name="l15627"></a><span class="lineno">15627</span>&#160;</div>
<div class="line"><a name="l15628"></a><span class="lineno">15628</span>&#160;</div>
<div class="line"><a name="l15629"></a><span class="lineno">15629</span>&#160;<span class="comment">// Failed access check callback that performs a GC on each invocation.</span></div>
<div class="line"><a name="l15630"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a86ff70a54b56aec25a079444d7a4614f">15630</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a86ff70a54b56aec25a079444d7a4614f">FailedAccessCheckCallbackGC</a>(Local&lt;v8::Object&gt; target,</div>
<div class="line"><a name="l15631"></a><span class="lineno">15631</span>&#160;                                 <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l15632"></a><span class="lineno">15632</span>&#160;                                 Local&lt;v8::Value&gt; data) {</div>
<div class="line"><a name="l15633"></a><span class="lineno">15633</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l15634"></a><span class="lineno">15634</span>&#160;}</div>
<div class="line"><a name="l15635"></a><span class="lineno">15635</span>&#160;</div>
<div class="line"><a name="l15636"></a><span class="lineno">15636</span>&#160;</div>
<div class="line"><a name="l15637"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abdc08243d618d9dff54696d195af2483">15637</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(GCInFailedAccessCheckCallback) {</div>
<div class="line"><a name="l15638"></a><span class="lineno">15638</span>&#160;  <span class="comment">// Install a failed access check callback that performs a GC on each</span></div>
<div class="line"><a name="l15639"></a><span class="lineno">15639</span>&#160;  <span class="comment">// invocation. Then force the callback to be called from va</span></div>
<div class="line"><a name="l15640"></a><span class="lineno">15640</span>&#160;</div>
<div class="line"><a name="l15641"></a><span class="lineno">15641</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a>();</div>
<div class="line"><a name="l15642"></a><span class="lineno">15642</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a9a94d752742c360db6a592b406729e22">v8::V8::SetFailedAccessCheckCallbackFunction</a>(&amp;<a class="code" href="../../de/d3f/test-api_8cc.html#a86ff70a54b56aec25a079444d7a4614f">FailedAccessCheckCallbackGC</a>);</div>
<div class="line"><a name="l15643"></a><span class="lineno">15643</span>&#160;</div>
<div class="line"><a name="l15644"></a><span class="lineno">15644</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15645"></a><span class="lineno">15645</span>&#160;</div>
<div class="line"><a name="l15646"></a><span class="lineno">15646</span>&#160;  <span class="comment">// Create an ObjectTemplate for global objects and install access</span></div>
<div class="line"><a name="l15647"></a><span class="lineno">15647</span>&#160;  <span class="comment">// check callbacks that will block access.</span></div>
<div class="line"><a name="l15648"></a><span class="lineno">15648</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> global_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l15649"></a><span class="lineno">15649</span>&#160;  global_template-&gt;<a class="code" href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">SetAccessCheckCallbacks</a>(NamedGetAccessBlocker,</div>
<div class="line"><a name="l15650"></a><span class="lineno">15650</span>&#160;                                           IndexedGetAccessBlocker,</div>
<div class="line"><a name="l15651"></a><span class="lineno">15651</span>&#160;                                           <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a>(),</div>
<div class="line"><a name="l15652"></a><span class="lineno">15652</span>&#160;                                           <span class="keyword">false</span>);</div>
<div class="line"><a name="l15653"></a><span class="lineno">15653</span>&#160;</div>
<div class="line"><a name="l15654"></a><span class="lineno">15654</span>&#160;  <span class="comment">// Create a context and set an x property on it&#39;s global object.</span></div>
<div class="line"><a name="l15655"></a><span class="lineno">15655</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context0(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l15656"></a><span class="lineno">15656</span>&#160;  context0-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;x&quot;</span>), v8_num(42));</div>
<div class="line"><a name="l15657"></a><span class="lineno">15657</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> global0 = context0-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l15658"></a><span class="lineno">15658</span>&#160;</div>
<div class="line"><a name="l15659"></a><span class="lineno">15659</span>&#160;  <span class="comment">// Create a context with a different security token so that the</span></div>
<div class="line"><a name="l15660"></a><span class="lineno">15660</span>&#160;  <span class="comment">// failed access check callback will be called on each access.</span></div>
<div class="line"><a name="l15661"></a><span class="lineno">15661</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context1(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l15662"></a><span class="lineno">15662</span>&#160;  context1-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;other&quot;</span>), global0);</div>
<div class="line"><a name="l15663"></a><span class="lineno">15663</span>&#160;</div>
<div class="line"><a name="l15664"></a><span class="lineno">15664</span>&#160;  <span class="comment">// Get property with failed access check.</span></div>
<div class="line"><a name="l15665"></a><span class="lineno">15665</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other.x&quot;</span>);</div>
<div class="line"><a name="l15666"></a><span class="lineno">15666</span>&#160;</div>
<div class="line"><a name="l15667"></a><span class="lineno">15667</span>&#160;  <span class="comment">// Get element with failed access check.</span></div>
<div class="line"><a name="l15668"></a><span class="lineno">15668</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;other[0]&quot;</span>);</div>
<div class="line"><a name="l15669"></a><span class="lineno">15669</span>&#160;</div>
<div class="line"><a name="l15670"></a><span class="lineno">15670</span>&#160;  <span class="comment">// Set property with failed access check.</span></div>
<div class="line"><a name="l15671"></a><span class="lineno">15671</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> result = CompileRun(<span class="stringliteral">&quot;other.x = new Object()&quot;</span>);</div>
<div class="line"><a name="l15672"></a><span class="lineno">15672</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a165136d736a2edcccac553aca4a5806e">IsObject</a>());</div>
<div class="line"><a name="l15673"></a><span class="lineno">15673</span>&#160;</div>
<div class="line"><a name="l15674"></a><span class="lineno">15674</span>&#160;  <span class="comment">// Set element with failed access check.</span></div>
<div class="line"><a name="l15675"></a><span class="lineno">15675</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;other[0] = new Object()&quot;</span>);</div>
<div class="line"><a name="l15676"></a><span class="lineno">15676</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsObject());</div>
<div class="line"><a name="l15677"></a><span class="lineno">15677</span>&#160;</div>
<div class="line"><a name="l15678"></a><span class="lineno">15678</span>&#160;  <span class="comment">// Get property attribute with failed access check.</span></div>
<div class="line"><a name="l15679"></a><span class="lineno">15679</span>&#160;  ExpectFalse(<span class="stringliteral">&quot;\&#39;x\&#39; in other&quot;</span>);</div>
<div class="line"><a name="l15680"></a><span class="lineno">15680</span>&#160;</div>
<div class="line"><a name="l15681"></a><span class="lineno">15681</span>&#160;  <span class="comment">// Get property attribute for element with failed access check.</span></div>
<div class="line"><a name="l15682"></a><span class="lineno">15682</span>&#160;  ExpectFalse(<span class="stringliteral">&quot;0 in other&quot;</span>);</div>
<div class="line"><a name="l15683"></a><span class="lineno">15683</span>&#160;</div>
<div class="line"><a name="l15684"></a><span class="lineno">15684</span>&#160;  <span class="comment">// Delete property.</span></div>
<div class="line"><a name="l15685"></a><span class="lineno">15685</span>&#160;  ExpectFalse(<span class="stringliteral">&quot;delete other.x&quot;</span>);</div>
<div class="line"><a name="l15686"></a><span class="lineno">15686</span>&#160;</div>
<div class="line"><a name="l15687"></a><span class="lineno">15687</span>&#160;  <span class="comment">// Delete element.</span></div>
<div class="line"><a name="l15688"></a><span class="lineno">15688</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#acf87d33c0190e1344dd08155006719ba">Delete</a>(0));</div>
<div class="line"><a name="l15689"></a><span class="lineno">15689</span>&#160;</div>
<div class="line"><a name="l15690"></a><span class="lineno">15690</span>&#160;  <span class="comment">// DefineAccessor.</span></div>
<div class="line"><a name="l15691"></a><span class="lineno">15691</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>,</div>
<div class="line"><a name="l15692"></a><span class="lineno">15692</span>&#160;           global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a26e9cc3bfe325f0cbf2f572a216667d7">SetAccessor</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>), GetXValue, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, v8_str(<span class="stringliteral">&quot;x&quot;</span>)));</div>
<div class="line"><a name="l15693"></a><span class="lineno">15693</span>&#160;</div>
<div class="line"><a name="l15694"></a><span class="lineno">15694</span>&#160;  <span class="comment">// Define JavaScript accessor.</span></div>
<div class="line"><a name="l15695"></a><span class="lineno">15695</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.prototype.__defineGetter__.call(&quot;</span></div>
<div class="line"><a name="l15696"></a><span class="lineno">15696</span>&#160;                  <span class="stringliteral">&quot;    other, \&#39;x\&#39;, function() { return 42; })&quot;</span>);</div>
<div class="line"><a name="l15697"></a><span class="lineno">15697</span>&#160;</div>
<div class="line"><a name="l15698"></a><span class="lineno">15698</span>&#160;  <span class="comment">// LookupAccessor.</span></div>
<div class="line"><a name="l15699"></a><span class="lineno">15699</span>&#160;  ExpectUndefined(<span class="stringliteral">&quot;Object.prototype.__lookupGetter__.call(&quot;</span></div>
<div class="line"><a name="l15700"></a><span class="lineno">15700</span>&#160;                  <span class="stringliteral">&quot;    other, \&#39;x\&#39;)&quot;</span>);</div>
<div class="line"><a name="l15701"></a><span class="lineno">15701</span>&#160;</div>
<div class="line"><a name="l15702"></a><span class="lineno">15702</span>&#160;  <span class="comment">// HasLocalElement.</span></div>
<div class="line"><a name="l15703"></a><span class="lineno">15703</span>&#160;  ExpectFalse(<span class="stringliteral">&quot;Object.prototype.hasOwnProperty.call(other, \&#39;0\&#39;)&quot;</span>);</div>
<div class="line"><a name="l15704"></a><span class="lineno">15704</span>&#160;</div>
<div class="line"><a name="l15705"></a><span class="lineno">15705</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a31f16ef6450aa6baf436312775c7ba1f">HasRealIndexedProperty</a>(0));</div>
<div class="line"><a name="l15706"></a><span class="lineno">15706</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a885e2053f0d6d002d3f67c4faf4f4086">HasRealNamedProperty</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>)));</div>
<div class="line"><a name="l15707"></a><span class="lineno">15707</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<span class="keyword">false</span>, global0-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a3db046bd24439f8607466712a507a741">HasRealNamedCallbackProperty</a>(v8_str(<span class="stringliteral">&quot;x&quot;</span>)));</div>
<div class="line"><a name="l15708"></a><span class="lineno">15708</span>&#160;</div>
<div class="line"><a name="l15709"></a><span class="lineno">15709</span>&#160;  <span class="comment">// Reset the failed access check callback so it does not influence</span></div>
<div class="line"><a name="l15710"></a><span class="lineno">15710</span>&#160;  <span class="comment">// the other tests.</span></div>
<div class="line"><a name="l15711"></a><span class="lineno">15711</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a9a94d752742c360db6a592b406729e22">v8::V8::SetFailedAccessCheckCallbackFunction</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15712"></a><span class="lineno">15712</span>&#160;}</div>
<div class="line"><a name="l15713"></a><span class="lineno">15713</span>&#160;</div>
<div class="line"><a name="l15714"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5c7bd8b2d5fb8bc9e07ebbb0ff7681b4">15714</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DefaultIsolateGetCurrent) {</div>
<div class="line"><a name="l15715"></a><span class="lineno">15715</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>() != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15716"></a><span class="lineno">15716</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l15717"></a><span class="lineno">15717</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(reinterpret_cast&lt;i::Isolate*&gt;(isolate)-&gt;IsDefaultIsolate());</div>
<div class="line"><a name="l15718"></a><span class="lineno">15718</span>&#160;  printf(<span class="stringliteral">&quot;*** %s\n&quot;</span>, <span class="stringliteral">&quot;DefaultIsolateGetCurrent success&quot;</span>);</div>
<div class="line"><a name="l15719"></a><span class="lineno">15719</span>&#160;}</div>
<div class="line"><a name="l15720"></a><span class="lineno">15720</span>&#160;</div>
<div class="line"><a name="l15721"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a48047f52d3efda5d18ed8db6534cfc11">15721</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(IsolateNewDispose) {</div>
<div class="line"><a name="l15722"></a><span class="lineno">15722</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* current_isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l15723"></a><span class="lineno">15723</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l15724"></a><span class="lineno">15724</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isolate != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15725"></a><span class="lineno">15725</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!reinterpret_cast&lt;i::Isolate*&gt;(isolate)-&gt;IsDefaultIsolate());</div>
<div class="line"><a name="l15726"></a><span class="lineno">15726</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(current_isolate != isolate);</div>
<div class="line"><a name="l15727"></a><span class="lineno">15727</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(current_isolate == <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>());</div>
<div class="line"><a name="l15728"></a><span class="lineno">15728</span>&#160;</div>
<div class="line"><a name="l15729"></a><span class="lineno">15729</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a>);</div>
<div class="line"><a name="l15730"></a><span class="lineno">15730</span>&#160;  last_location = last_message = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l15731"></a><span class="lineno">15731</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15732"></a><span class="lineno">15732</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(last_location, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15733"></a><span class="lineno">15733</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(last_message, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15734"></a><span class="lineno">15734</span>&#160;}</div>
<div class="line"><a name="l15735"></a><span class="lineno">15735</span>&#160;</div>
<div class="line"><a name="l15736"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5c88f0cc3d682d5744a0186138f2647c">15736</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(IsolateEnterExitDefault) {</div>
<div class="line"><a name="l15737"></a><span class="lineno">15737</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15738"></a><span class="lineno">15738</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15739"></a><span class="lineno">15739</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* current_isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l15740"></a><span class="lineno">15740</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(current_isolate != <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);  <span class="comment">// Default isolate.</span></div>
<div class="line"><a name="l15741"></a><span class="lineno">15741</span>&#160;  ExpectString(<span class="stringliteral">&quot;&#39;hello&#39;&quot;</span>, <span class="stringliteral">&quot;hello&quot;</span>);</div>
<div class="line"><a name="l15742"></a><span class="lineno">15742</span>&#160;  current_isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a94107f5c39b9788624af5ff1b6cf6a88">Enter</a>();</div>
<div class="line"><a name="l15743"></a><span class="lineno">15743</span>&#160;  ExpectString(<span class="stringliteral">&quot;&#39;still working&#39;&quot;</span>, <span class="stringliteral">&quot;still working&quot;</span>);</div>
<div class="line"><a name="l15744"></a><span class="lineno">15744</span>&#160;  current_isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a1a6a7739e9cc01ba888b57d1f9457f4c">Exit</a>();</div>
<div class="line"><a name="l15745"></a><span class="lineno">15745</span>&#160;  ExpectString(<span class="stringliteral">&quot;&#39;still working 2&#39;&quot;</span>, <span class="stringliteral">&quot;still working 2&quot;</span>);</div>
<div class="line"><a name="l15746"></a><span class="lineno">15746</span>&#160;  current_isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a1a6a7739e9cc01ba888b57d1f9457f4c">Exit</a>();</div>
<div class="line"><a name="l15747"></a><span class="lineno">15747</span>&#160;  <span class="comment">// Default isolate is always, well, &#39;default current&#39;.</span></div>
<div class="line"><a name="l15748"></a><span class="lineno">15748</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>(), current_isolate);</div>
<div class="line"><a name="l15749"></a><span class="lineno">15749</span>&#160;  <span class="comment">// Still working since default isolate is auto-entering any thread</span></div>
<div class="line"><a name="l15750"></a><span class="lineno">15750</span>&#160;  <span class="comment">// that has no isolate and attempts to execute V8 APIs.</span></div>
<div class="line"><a name="l15751"></a><span class="lineno">15751</span>&#160;  ExpectString(<span class="stringliteral">&quot;&#39;still working 3&#39;&quot;</span>, <span class="stringliteral">&quot;still working 3&quot;</span>);</div>
<div class="line"><a name="l15752"></a><span class="lineno">15752</span>&#160;}</div>
<div class="line"><a name="l15753"></a><span class="lineno">15753</span>&#160;</div>
<div class="line"><a name="l15754"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8735bdb9f49e4129340f57702053d9de">15754</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DisposeDefaultIsolate) {</div>
<div class="line"><a name="l15755"></a><span class="lineno">15755</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a>);</div>
<div class="line"><a name="l15756"></a><span class="lineno">15756</span>&#160;</div>
<div class="line"><a name="l15757"></a><span class="lineno">15757</span>&#160;  <span class="comment">// Run some V8 code to trigger default isolate to become &#39;current&#39;.</span></div>
<div class="line"><a name="l15758"></a><span class="lineno">15758</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15759"></a><span class="lineno">15759</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15760"></a><span class="lineno">15760</span>&#160;  ExpectString(<span class="stringliteral">&quot;&#39;run some V8&#39;&quot;</span>, <span class="stringliteral">&quot;run some V8&quot;</span>);</div>
<div class="line"><a name="l15761"></a><span class="lineno">15761</span>&#160;</div>
<div class="line"><a name="l15762"></a><span class="lineno">15762</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l15763"></a><span class="lineno">15763</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(reinterpret_cast&lt;i::Isolate*&gt;(isolate)-&gt;IsDefaultIsolate());</div>
<div class="line"><a name="l15764"></a><span class="lineno">15764</span>&#160;  last_location = last_message = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l15765"></a><span class="lineno">15765</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15766"></a><span class="lineno">15766</span>&#160;  <span class="comment">// It is not possible to dispose default isolate via Isolate API.</span></div>
<div class="line"><a name="l15767"></a><span class="lineno">15767</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(last_location, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15768"></a><span class="lineno">15768</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(last_message, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15769"></a><span class="lineno">15769</span>&#160;}</div>
<div class="line"><a name="l15770"></a><span class="lineno">15770</span>&#160;</div>
<div class="line"><a name="l15771"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa5c304c12d142b0e488c1d4b25245661">15771</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RunDefaultAndAnotherIsolate) {</div>
<div class="line"><a name="l15772"></a><span class="lineno">15772</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15773"></a><span class="lineno">15773</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15774"></a><span class="lineno">15774</span>&#160;</div>
<div class="line"><a name="l15775"></a><span class="lineno">15775</span>&#160;  <span class="comment">// Enter new isolate.</span></div>
<div class="line"><a name="l15776"></a><span class="lineno">15776</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l15777"></a><span class="lineno">15777</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isolate);</div>
<div class="line"><a name="l15778"></a><span class="lineno">15778</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a94107f5c39b9788624af5ff1b6cf6a88">Enter</a>();</div>
<div class="line"><a name="l15779"></a><span class="lineno">15779</span>&#160;  { <span class="comment">// Need this block because subsequent Exit() will deallocate Heap,</span></div>
<div class="line"><a name="l15780"></a><span class="lineno">15780</span>&#160;    <span class="comment">// so we need all scope objects to be deconstructed when it happens.</span></div>
<div class="line"><a name="l15781"></a><span class="lineno">15781</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope_new;</div>
<div class="line"><a name="l15782"></a><span class="lineno">15782</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context_new;</div>
<div class="line"><a name="l15783"></a><span class="lineno">15783</span>&#160;</div>
<div class="line"><a name="l15784"></a><span class="lineno">15784</span>&#160;    <span class="comment">// Run something in new isolate.</span></div>
<div class="line"><a name="l15785"></a><span class="lineno">15785</span>&#160;    CompileRun(<span class="stringliteral">&quot;var foo = 153;&quot;</span>);</div>
<div class="line"><a name="l15786"></a><span class="lineno">15786</span>&#160;    ExpectTrue(<span class="stringliteral">&quot;function f() { return foo == 153; }; f()&quot;</span>);</div>
<div class="line"><a name="l15787"></a><span class="lineno">15787</span>&#160;  }</div>
<div class="line"><a name="l15788"></a><span class="lineno">15788</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a1a6a7739e9cc01ba888b57d1f9457f4c">Exit</a>();</div>
<div class="line"><a name="l15789"></a><span class="lineno">15789</span>&#160;</div>
<div class="line"><a name="l15790"></a><span class="lineno">15790</span>&#160;  <span class="comment">// This runs automatically in default isolate.</span></div>
<div class="line"><a name="l15791"></a><span class="lineno">15791</span>&#160;  <span class="comment">// Variables in another isolate should be not available.</span></div>
<div class="line"><a name="l15792"></a><span class="lineno">15792</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l15793"></a><span class="lineno">15793</span>&#160;             <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l15794"></a><span class="lineno">15794</span>&#160;             <span class="stringliteral">&quot;    foo;&quot;</span></div>
<div class="line"><a name="l15795"></a><span class="lineno">15795</span>&#160;             <span class="stringliteral">&quot;    return false;&quot;</span></div>
<div class="line"><a name="l15796"></a><span class="lineno">15796</span>&#160;             <span class="stringliteral">&quot;  } catch(e) {&quot;</span></div>
<div class="line"><a name="l15797"></a><span class="lineno">15797</span>&#160;             <span class="stringliteral">&quot;    return true;&quot;</span></div>
<div class="line"><a name="l15798"></a><span class="lineno">15798</span>&#160;             <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l15799"></a><span class="lineno">15799</span>&#160;             <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l15800"></a><span class="lineno">15800</span>&#160;             <span class="stringliteral">&quot;var bar = 371;&quot;</span></div>
<div class="line"><a name="l15801"></a><span class="lineno">15801</span>&#160;             <span class="stringliteral">&quot;f()&quot;</span>);</div>
<div class="line"><a name="l15802"></a><span class="lineno">15802</span>&#160;</div>
<div class="line"><a name="l15803"></a><span class="lineno">15803</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a>);</div>
<div class="line"><a name="l15804"></a><span class="lineno">15804</span>&#160;  last_location = last_message = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l15805"></a><span class="lineno">15805</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15806"></a><span class="lineno">15806</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(last_location, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15807"></a><span class="lineno">15807</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(last_message, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15808"></a><span class="lineno">15808</span>&#160;</div>
<div class="line"><a name="l15809"></a><span class="lineno">15809</span>&#160;  <span class="comment">// Check that default isolate still runs.</span></div>
<div class="line"><a name="l15810"></a><span class="lineno">15810</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;function f() { return bar == 371; }; f()&quot;</span>);</div>
<div class="line"><a name="l15811"></a><span class="lineno">15811</span>&#160;}</div>
<div class="line"><a name="l15812"></a><span class="lineno">15812</span>&#160;</div>
<div class="line"><a name="l15813"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9b35df2a34a86025fd9a164a5d254ed8">15813</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DisposeIsolateWhenInUse) {</div>
<div class="line"><a name="l15814"></a><span class="lineno">15814</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l15815"></a><span class="lineno">15815</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(isolate);</div>
<div class="line"><a name="l15816"></a><span class="lineno">15816</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a94107f5c39b9788624af5ff1b6cf6a88">Enter</a>();</div>
<div class="line"><a name="l15817"></a><span class="lineno">15817</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15818"></a><span class="lineno">15818</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15819"></a><span class="lineno">15819</span>&#160;  <span class="comment">// Run something in this isolate.</span></div>
<div class="line"><a name="l15820"></a><span class="lineno">15820</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l15821"></a><span class="lineno">15821</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a>);</div>
<div class="line"><a name="l15822"></a><span class="lineno">15822</span>&#160;  last_location = last_message = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l15823"></a><span class="lineno">15823</span>&#160;  <span class="comment">// Still entered, should fail.</span></div>
<div class="line"><a name="l15824"></a><span class="lineno">15824</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15825"></a><span class="lineno">15825</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(last_location, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15826"></a><span class="lineno">15826</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a>(last_message, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15827"></a><span class="lineno">15827</span>&#160;}</div>
<div class="line"><a name="l15828"></a><span class="lineno">15828</span>&#160;</div>
<div class="line"><a name="l15829"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af5dd775794d362f106a5e33fd0c6fceb">15829</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RunTwoIsolatesOnSingleThread) {</div>
<div class="line"><a name="l15830"></a><span class="lineno">15830</span>&#160;  <span class="comment">// Run isolate 1.</span></div>
<div class="line"><a name="l15831"></a><span class="lineno">15831</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate1 = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l15832"></a><span class="lineno">15832</span>&#160;  isolate1-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a94107f5c39b9788624af5ff1b6cf6a88">Enter</a>();</div>
<div class="line"><a name="l15833"></a><span class="lineno">15833</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Context&gt;</a> context1 = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l15834"></a><span class="lineno">15834</span>&#160;</div>
<div class="line"><a name="l15835"></a><span class="lineno">15835</span>&#160;  {</div>
<div class="line"><a name="l15836"></a><span class="lineno">15836</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> cscope(context1);</div>
<div class="line"><a name="l15837"></a><span class="lineno">15837</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15838"></a><span class="lineno">15838</span>&#160;    <span class="comment">// Run something in new isolate.</span></div>
<div class="line"><a name="l15839"></a><span class="lineno">15839</span>&#160;    CompileRun(<span class="stringliteral">&quot;var foo = &#39;isolate 1&#39;;&quot;</span>);</div>
<div class="line"><a name="l15840"></a><span class="lineno">15840</span>&#160;    ExpectString(<span class="stringliteral">&quot;function f() { return foo; }; f()&quot;</span>, <span class="stringliteral">&quot;isolate 1&quot;</span>);</div>
<div class="line"><a name="l15841"></a><span class="lineno">15841</span>&#160;  }</div>
<div class="line"><a name="l15842"></a><span class="lineno">15842</span>&#160;</div>
<div class="line"><a name="l15843"></a><span class="lineno">15843</span>&#160;  <span class="comment">// Run isolate 2.</span></div>
<div class="line"><a name="l15844"></a><span class="lineno">15844</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate2 = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l15845"></a><span class="lineno">15845</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Context&gt;</a> context2;</div>
<div class="line"><a name="l15846"></a><span class="lineno">15846</span>&#160;</div>
<div class="line"><a name="l15847"></a><span class="lineno">15847</span>&#160;  {</div>
<div class="line"><a name="l15848"></a><span class="lineno">15848</span>&#160;    <a class="code" href="../../de/ded/classv8_1_1_isolate_1_1_scope.html">v8::Isolate::Scope</a> iscope(isolate2);</div>
<div class="line"><a name="l15849"></a><span class="lineno">15849</span>&#160;    context2 = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l15850"></a><span class="lineno">15850</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> cscope(context2);</div>
<div class="line"><a name="l15851"></a><span class="lineno">15851</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15852"></a><span class="lineno">15852</span>&#160;</div>
<div class="line"><a name="l15853"></a><span class="lineno">15853</span>&#160;    <span class="comment">// Run something in new isolate.</span></div>
<div class="line"><a name="l15854"></a><span class="lineno">15854</span>&#160;    CompileRun(<span class="stringliteral">&quot;var foo = &#39;isolate 2&#39;;&quot;</span>);</div>
<div class="line"><a name="l15855"></a><span class="lineno">15855</span>&#160;    ExpectString(<span class="stringliteral">&quot;function f() { return foo; }; f()&quot;</span>, <span class="stringliteral">&quot;isolate 2&quot;</span>);</div>
<div class="line"><a name="l15856"></a><span class="lineno">15856</span>&#160;  }</div>
<div class="line"><a name="l15857"></a><span class="lineno">15857</span>&#160;</div>
<div class="line"><a name="l15858"></a><span class="lineno">15858</span>&#160;  {</div>
<div class="line"><a name="l15859"></a><span class="lineno">15859</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> cscope(context1);</div>
<div class="line"><a name="l15860"></a><span class="lineno">15860</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15861"></a><span class="lineno">15861</span>&#160;    <span class="comment">// Now again in isolate 1</span></div>
<div class="line"><a name="l15862"></a><span class="lineno">15862</span>&#160;    ExpectString(<span class="stringliteral">&quot;function f() { return foo; }; f()&quot;</span>, <span class="stringliteral">&quot;isolate 1&quot;</span>);</div>
<div class="line"><a name="l15863"></a><span class="lineno">15863</span>&#160;  }</div>
<div class="line"><a name="l15864"></a><span class="lineno">15864</span>&#160;</div>
<div class="line"><a name="l15865"></a><span class="lineno">15865</span>&#160;  isolate1-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a1a6a7739e9cc01ba888b57d1f9457f4c">Exit</a>();</div>
<div class="line"><a name="l15866"></a><span class="lineno">15866</span>&#160;</div>
<div class="line"><a name="l15867"></a><span class="lineno">15867</span>&#160;  <span class="comment">// Run some stuff in default isolate.</span></div>
<div class="line"><a name="l15868"></a><span class="lineno">15868</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Context&gt;</a> context_default = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l15869"></a><span class="lineno">15869</span>&#160;</div>
<div class="line"><a name="l15870"></a><span class="lineno">15870</span>&#160;  {</div>
<div class="line"><a name="l15871"></a><span class="lineno">15871</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> cscope(context_default);</div>
<div class="line"><a name="l15872"></a><span class="lineno">15872</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15873"></a><span class="lineno">15873</span>&#160;    <span class="comment">// Variables in other isolates should be not available, verify there</span></div>
<div class="line"><a name="l15874"></a><span class="lineno">15874</span>&#160;    <span class="comment">// is an exception.</span></div>
<div class="line"><a name="l15875"></a><span class="lineno">15875</span>&#160;    ExpectTrue(<span class="stringliteral">&quot;function f() {&quot;</span></div>
<div class="line"><a name="l15876"></a><span class="lineno">15876</span>&#160;               <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l15877"></a><span class="lineno">15877</span>&#160;               <span class="stringliteral">&quot;    foo;&quot;</span></div>
<div class="line"><a name="l15878"></a><span class="lineno">15878</span>&#160;               <span class="stringliteral">&quot;    return false;&quot;</span></div>
<div class="line"><a name="l15879"></a><span class="lineno">15879</span>&#160;               <span class="stringliteral">&quot;  } catch(e) {&quot;</span></div>
<div class="line"><a name="l15880"></a><span class="lineno">15880</span>&#160;               <span class="stringliteral">&quot;    return true;&quot;</span></div>
<div class="line"><a name="l15881"></a><span class="lineno">15881</span>&#160;               <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l15882"></a><span class="lineno">15882</span>&#160;               <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l15883"></a><span class="lineno">15883</span>&#160;               <span class="stringliteral">&quot;var isDefaultIsolate = true;&quot;</span></div>
<div class="line"><a name="l15884"></a><span class="lineno">15884</span>&#160;               <span class="stringliteral">&quot;f()&quot;</span>);</div>
<div class="line"><a name="l15885"></a><span class="lineno">15885</span>&#160;  }</div>
<div class="line"><a name="l15886"></a><span class="lineno">15886</span>&#160;</div>
<div class="line"><a name="l15887"></a><span class="lineno">15887</span>&#160;  isolate1-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a94107f5c39b9788624af5ff1b6cf6a88">Enter</a>();</div>
<div class="line"><a name="l15888"></a><span class="lineno">15888</span>&#160;</div>
<div class="line"><a name="l15889"></a><span class="lineno">15889</span>&#160;  {</div>
<div class="line"><a name="l15890"></a><span class="lineno">15890</span>&#160;    <a class="code" href="../../de/ded/classv8_1_1_isolate_1_1_scope.html">v8::Isolate::Scope</a> iscope(isolate2);</div>
<div class="line"><a name="l15891"></a><span class="lineno">15891</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> cscope(context2);</div>
<div class="line"><a name="l15892"></a><span class="lineno">15892</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15893"></a><span class="lineno">15893</span>&#160;    ExpectString(<span class="stringliteral">&quot;function f() { return foo; }; f()&quot;</span>, <span class="stringliteral">&quot;isolate 2&quot;</span>);</div>
<div class="line"><a name="l15894"></a><span class="lineno">15894</span>&#160;  }</div>
<div class="line"><a name="l15895"></a><span class="lineno">15895</span>&#160;</div>
<div class="line"><a name="l15896"></a><span class="lineno">15896</span>&#160;  {</div>
<div class="line"><a name="l15897"></a><span class="lineno">15897</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> cscope(context1);</div>
<div class="line"><a name="l15898"></a><span class="lineno">15898</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15899"></a><span class="lineno">15899</span>&#160;    ExpectString(<span class="stringliteral">&quot;function f() { return foo; }; f()&quot;</span>, <span class="stringliteral">&quot;isolate 1&quot;</span>);</div>
<div class="line"><a name="l15900"></a><span class="lineno">15900</span>&#160;  }</div>
<div class="line"><a name="l15901"></a><span class="lineno">15901</span>&#160;</div>
<div class="line"><a name="l15902"></a><span class="lineno">15902</span>&#160;  {</div>
<div class="line"><a name="l15903"></a><span class="lineno">15903</span>&#160;    <a class="code" href="../../de/ded/classv8_1_1_isolate_1_1_scope.html">v8::Isolate::Scope</a> iscope(isolate2);</div>
<div class="line"><a name="l15904"></a><span class="lineno">15904</span>&#160;    context2.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15905"></a><span class="lineno">15905</span>&#160;  }</div>
<div class="line"><a name="l15906"></a><span class="lineno">15906</span>&#160;</div>
<div class="line"><a name="l15907"></a><span class="lineno">15907</span>&#160;  context1.<a class="code" href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15908"></a><span class="lineno">15908</span>&#160;  isolate1-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a1a6a7739e9cc01ba888b57d1f9457f4c">Exit</a>();</div>
<div class="line"><a name="l15909"></a><span class="lineno">15909</span>&#160;</div>
<div class="line"><a name="l15910"></a><span class="lineno">15910</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a>);</div>
<div class="line"><a name="l15911"></a><span class="lineno">15911</span>&#160;  last_location = last_message = <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l15912"></a><span class="lineno">15912</span>&#160;</div>
<div class="line"><a name="l15913"></a><span class="lineno">15913</span>&#160;  isolate1-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15914"></a><span class="lineno">15914</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(last_location, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15915"></a><span class="lineno">15915</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(last_message, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15916"></a><span class="lineno">15916</span>&#160;</div>
<div class="line"><a name="l15917"></a><span class="lineno">15917</span>&#160;  isolate2-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15918"></a><span class="lineno">15918</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(last_location, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15919"></a><span class="lineno">15919</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(last_message, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l15920"></a><span class="lineno">15920</span>&#160;</div>
<div class="line"><a name="l15921"></a><span class="lineno">15921</span>&#160;  <span class="comment">// Check that default isolate still runs.</span></div>
<div class="line"><a name="l15922"></a><span class="lineno">15922</span>&#160;  {</div>
<div class="line"><a name="l15923"></a><span class="lineno">15923</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> cscope(context_default);</div>
<div class="line"><a name="l15924"></a><span class="lineno">15924</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15925"></a><span class="lineno">15925</span>&#160;    ExpectTrue(<span class="stringliteral">&quot;function f() { return isDefaultIsolate; }; f()&quot;</span>);</div>
<div class="line"><a name="l15926"></a><span class="lineno">15926</span>&#160;  }</div>
<div class="line"><a name="l15927"></a><span class="lineno">15927</span>&#160;}</div>
<div class="line"><a name="l15928"></a><span class="lineno">15928</span>&#160;</div>
<div class="line"><a name="l15929"></a><span class="lineno">15929</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> CalcFibonacci(<a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate, <span class="keywordtype">int</span> limit) {</div>
<div class="line"><a name="l15930"></a><span class="lineno">15930</span>&#160;  <a class="code" href="../../de/ded/classv8_1_1_isolate_1_1_scope.html">v8::Isolate::Scope</a> isolate_scope(isolate);</div>
<div class="line"><a name="l15931"></a><span class="lineno">15931</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l15932"></a><span class="lineno">15932</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l15933"></a><span class="lineno">15933</span>&#160;  <a class="code" href="../../da/de2/classv8_1_1internal_1_1_scoped_vector.html">i::ScopedVector&lt;char&gt;</a> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a965cf977d6cc4ab38c7b55d51e38652a">code</a>(1024);</div>
<div class="line"><a name="l15934"></a><span class="lineno">15934</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(code, <span class="stringliteral">&quot;function fib(n) {&quot;</span></div>
<div class="line"><a name="l15935"></a><span class="lineno">15935</span>&#160;                        <span class="stringliteral">&quot;  if (n &lt;= 2) return 1;&quot;</span></div>
<div class="line"><a name="l15936"></a><span class="lineno">15936</span>&#160;                        <span class="stringliteral">&quot;  return fib(n-1) + fib(n-2);&quot;</span></div>
<div class="line"><a name="l15937"></a><span class="lineno">15937</span>&#160;                        <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l15938"></a><span class="lineno">15938</span>&#160;                        <span class="stringliteral">&quot;fib(%d)&quot;</span>, limit);</div>
<div class="line"><a name="l15939"></a><span class="lineno">15939</span>&#160;  Local&lt;Value&gt; value = CompileRun(code.start());</div>
<div class="line"><a name="l15940"></a><span class="lineno">15940</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsNumber());</div>
<div class="line"><a name="l15941"></a><span class="lineno">15941</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(value-&gt;NumberValue());</div>
<div class="line"><a name="l15942"></a><span class="lineno">15942</span>&#160;}</div>
<div class="line"><a name="l15943"></a><span class="lineno">15943</span>&#160;</div>
<div class="line"><a name="l15944"></a><span class="lineno"><a class="line" href="../../d5/d7c/class_isolate_thread.html">15944</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d5/d7c/class_isolate_thread.html">IsolateThread</a> : <span class="keyword">public</span> <a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html">v8::internal::Thread</a> {</div>
<div class="line"><a name="l15945"></a><span class="lineno">15945</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l15946"></a><span class="lineno"><a class="line" href="../../d5/d7c/class_isolate_thread.html#aed899b844f68f22d033f6b4df6f54cc2">15946</a></span>&#160;  <a class="code" href="../../d5/d7c/class_isolate_thread.html#aed899b844f68f22d033f6b4df6f54cc2">IsolateThread</a>(<a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate, <span class="keywordtype">int</span> fib_limit)</div>
<div class="line"><a name="l15947"></a><span class="lineno">15947</span>&#160;      : <a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#a3606d28cd3d14f56295c9ebcc6deff6e">Thread</a>(<span class="stringliteral">&quot;IsolateThread&quot;</span>),</div>
<div class="line"><a name="l15948"></a><span class="lineno">15948</span>&#160;        isolate_(isolate),</div>
<div class="line"><a name="l15949"></a><span class="lineno">15949</span>&#160;        fib_limit_(fib_limit),</div>
<div class="line"><a name="l15950"></a><span class="lineno">15950</span>&#160;        result_(0) { }</div>
<div class="line"><a name="l15951"></a><span class="lineno">15951</span>&#160;</div>
<div class="line"><a name="l15952"></a><span class="lineno"><a class="line" href="../../d5/d7c/class_isolate_thread.html#aa3eca255b6be227d7d901cc2a72017a5">15952</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d5/d7c/class_isolate_thread.html#aa3eca255b6be227d7d901cc2a72017a5">Run</a>() {</div>
<div class="line"><a name="l15953"></a><span class="lineno">15953</span>&#160;    result_ = CalcFibonacci(isolate_, fib_limit_);</div>
<div class="line"><a name="l15954"></a><span class="lineno">15954</span>&#160;  }</div>
<div class="line"><a name="l15955"></a><span class="lineno">15955</span>&#160;</div>
<div class="line"><a name="l15956"></a><span class="lineno"><a class="line" href="../../d5/d7c/class_isolate_thread.html#acf7e1663f7727ed6394ea7140a1cb204">15956</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d5/d7c/class_isolate_thread.html#acf7e1663f7727ed6394ea7140a1cb204">result</a>() { <span class="keywordflow">return</span> result_; }</div>
<div class="line"><a name="l15957"></a><span class="lineno">15957</span>&#160;</div>
<div class="line"><a name="l15958"></a><span class="lineno">15958</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l15959"></a><span class="lineno">15959</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate_;</div>
<div class="line"><a name="l15960"></a><span class="lineno">15960</span>&#160;  <span class="keywordtype">int</span> fib_limit_;</div>
<div class="line"><a name="l15961"></a><span class="lineno">15961</span>&#160;  <span class="keywordtype">int</span> result_;</div>
<div class="line"><a name="l15962"></a><span class="lineno">15962</span>&#160;};</div>
<div class="line"><a name="l15963"></a><span class="lineno">15963</span>&#160;</div>
<div class="line"><a name="l15964"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a6ea391c90038c0c74747a1731e5e8e9c">15964</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(MultipleIsolatesOnIndividualThreads) {</div>
<div class="line"><a name="l15965"></a><span class="lineno">15965</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate1 = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l15966"></a><span class="lineno">15966</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate2 = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l15967"></a><span class="lineno">15967</span>&#160;</div>
<div class="line"><a name="l15968"></a><span class="lineno">15968</span>&#160;  <a class="code" href="../../d5/d7c/class_isolate_thread.html">IsolateThread</a> thread1(isolate1, 21);</div>
<div class="line"><a name="l15969"></a><span class="lineno">15969</span>&#160;  <a class="code" href="../../d5/d7c/class_isolate_thread.html">IsolateThread</a> thread2(isolate2, 12);</div>
<div class="line"><a name="l15970"></a><span class="lineno">15970</span>&#160;</div>
<div class="line"><a name="l15971"></a><span class="lineno">15971</span>&#160;  <span class="comment">// Compute some fibonacci numbers on 3 threads in 3 isolates.</span></div>
<div class="line"><a name="l15972"></a><span class="lineno">15972</span>&#160;  thread1.<a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a>();</div>
<div class="line"><a name="l15973"></a><span class="lineno">15973</span>&#160;  thread2.<a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a>();</div>
<div class="line"><a name="l15974"></a><span class="lineno">15974</span>&#160;</div>
<div class="line"><a name="l15975"></a><span class="lineno">15975</span>&#160;  <span class="keywordtype">int</span> result1 = CalcFibonacci(<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>(), 21);</div>
<div class="line"><a name="l15976"></a><span class="lineno">15976</span>&#160;  <span class="keywordtype">int</span> result2 = CalcFibonacci(<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>(), 12);</div>
<div class="line"><a name="l15977"></a><span class="lineno">15977</span>&#160;</div>
<div class="line"><a name="l15978"></a><span class="lineno">15978</span>&#160;  thread1.<a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#ac24a06ec0749cb482b60f621833bddd7">Join</a>();</div>
<div class="line"><a name="l15979"></a><span class="lineno">15979</span>&#160;  thread2.<a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#ac24a06ec0749cb482b60f621833bddd7">Join</a>();</div>
<div class="line"><a name="l15980"></a><span class="lineno">15980</span>&#160;</div>
<div class="line"><a name="l15981"></a><span class="lineno">15981</span>&#160;  <span class="comment">// Compare results. The actual fibonacci numbers for 12 and 21 are taken</span></div>
<div class="line"><a name="l15982"></a><span class="lineno">15982</span>&#160;  <span class="comment">// (I&#39;m lazy!) from http://en.wikipedia.org/wiki/Fibonacci_number</span></div>
<div class="line"><a name="l15983"></a><span class="lineno">15983</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result1, 10946);</div>
<div class="line"><a name="l15984"></a><span class="lineno">15984</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result2, 144);</div>
<div class="line"><a name="l15985"></a><span class="lineno">15985</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result1, thread1.<a class="code" href="../../d5/d7c/class_isolate_thread.html#acf7e1663f7727ed6394ea7140a1cb204">result</a>());</div>
<div class="line"><a name="l15986"></a><span class="lineno">15986</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(result2, thread2.<a class="code" href="../../d5/d7c/class_isolate_thread.html#acf7e1663f7727ed6394ea7140a1cb204">result</a>());</div>
<div class="line"><a name="l15987"></a><span class="lineno">15987</span>&#160;</div>
<div class="line"><a name="l15988"></a><span class="lineno">15988</span>&#160;  isolate1-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15989"></a><span class="lineno">15989</span>&#160;  isolate2-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">Dispose</a>();</div>
<div class="line"><a name="l15990"></a><span class="lineno">15990</span>&#160;}</div>
<div class="line"><a name="l15991"></a><span class="lineno">15991</span>&#160;</div>
<div class="line"><a name="l15992"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a0785ac047a56a4733584bbb8413b5ce9">15992</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(IsolateDifferentContexts) {</div>
<div class="line"><a name="l15993"></a><span class="lineno">15993</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a>();</div>
<div class="line"><a name="l15994"></a><span class="lineno">15994</span>&#160;  Persistent&lt;v8::Context&gt; context;</div>
<div class="line"><a name="l15995"></a><span class="lineno">15995</span>&#160;  {</div>
<div class="line"><a name="l15996"></a><span class="lineno">15996</span>&#160;    <a class="code" href="../../de/ded/classv8_1_1_isolate_1_1_scope.html">v8::Isolate::Scope</a> isolate_scope(isolate);</div>
<div class="line"><a name="l15997"></a><span class="lineno">15997</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l15998"></a><span class="lineno">15998</span>&#160;    context = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l15999"></a><span class="lineno">15999</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> context_scope(context);</div>
<div class="line"><a name="l16000"></a><span class="lineno">16000</span>&#160;    Local&lt;Value&gt; v = CompileRun(<span class="stringliteral">&quot;2&quot;</span>);</div>
<div class="line"><a name="l16001"></a><span class="lineno">16001</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v-&gt;IsNumber());</div>
<div class="line"><a name="l16002"></a><span class="lineno">16002</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, static_cast&lt;int&gt;(v-&gt;NumberValue()));</div>
<div class="line"><a name="l16003"></a><span class="lineno">16003</span>&#160;  }</div>
<div class="line"><a name="l16004"></a><span class="lineno">16004</span>&#160;  {</div>
<div class="line"><a name="l16005"></a><span class="lineno">16005</span>&#160;    <a class="code" href="../../de/ded/classv8_1_1_isolate_1_1_scope.html">v8::Isolate::Scope</a> isolate_scope(isolate);</div>
<div class="line"><a name="l16006"></a><span class="lineno">16006</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l16007"></a><span class="lineno">16007</span>&#160;    context = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l16008"></a><span class="lineno">16008</span>&#160;    <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> context_scope(context);</div>
<div class="line"><a name="l16009"></a><span class="lineno">16009</span>&#160;    Local&lt;Value&gt; v = CompileRun(<span class="stringliteral">&quot;22&quot;</span>);</div>
<div class="line"><a name="l16010"></a><span class="lineno">16010</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(v-&gt;IsNumber());</div>
<div class="line"><a name="l16011"></a><span class="lineno">16011</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(22, static_cast&lt;int&gt;(v-&gt;NumberValue()));</div>
<div class="line"><a name="l16012"></a><span class="lineno">16012</span>&#160;  }</div>
<div class="line"><a name="l16013"></a><span class="lineno">16013</span>&#160;}</div>
<div class="line"><a name="l16014"></a><span class="lineno">16014</span>&#160;</div>
<div class="line"><a name="l16015"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html">16015</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html">InitDefaultIsolateThread</a> : <span class="keyword">public</span> <a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html">v8::internal::Thread</a> {</div>
<div class="line"><a name="l16016"></a><span class="lineno">16016</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l16017"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9">16017</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9">TestCase</a> {</div>
<div class="line"><a name="l16018"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a3b4b1aa023d66447f1d05b2d79021b10">16018</a></span>&#160;    <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a3b4b1aa023d66447f1d05b2d79021b10">IgnoreOOM</a>,</div>
<div class="line"><a name="l16019"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a69c2fe9a787ee95ee315198e9a7e9d24">16019</a></span>&#160;    <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a69c2fe9a787ee95ee315198e9a7e9d24">SetResourceConstraints</a>,</div>
<div class="line"><a name="l16020"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ab0fde864055dfa96caf80b6d8f86164c">16020</a></span>&#160;    <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ab0fde864055dfa96caf80b6d8f86164c">SetFatalHandler</a>,</div>
<div class="line"><a name="l16021"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a608346dc94d469928b2c26d97e714b5e">16021</a></span>&#160;    <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a608346dc94d469928b2c26d97e714b5e">SetCounterFunction</a>,</div>
<div class="line"><a name="l16022"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ad50a20511938e2c9133354e009589786">16022</a></span>&#160;    <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ad50a20511938e2c9133354e009589786">SetCreateHistogramFunction</a>,</div>
<div class="line"><a name="l16023"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ac2b9f41c48b84e723b6cb0cf0b4fed98">16023</a></span>&#160;    <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ac2b9f41c48b84e723b6cb0cf0b4fed98">SetAddHistogramSampleFunction</a></div>
<div class="line"><a name="l16024"></a><span class="lineno">16024</span>&#160;  };</div>
<div class="line"><a name="l16025"></a><span class="lineno">16025</span>&#160;</div>
<div class="line"><a name="l16026"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#ab579b36b53c66f28142b3259c80b95f2">16026</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#ab579b36b53c66f28142b3259c80b95f2">InitDefaultIsolateThread</a>(<a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9">TestCase</a> testCase)</div>
<div class="line"><a name="l16027"></a><span class="lineno">16027</span>&#160;      : <a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html#a3606d28cd3d14f56295c9ebcc6deff6e">Thread</a>(<span class="stringliteral">&quot;InitDefaultIsolateThread&quot;</span>),</div>
<div class="line"><a name="l16028"></a><span class="lineno">16028</span>&#160;        testCase_(testCase),</div>
<div class="line"><a name="l16029"></a><span class="lineno">16029</span>&#160;        result_(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a6f892599390671c9a72cccc59b240507">false</a>) { }</div>
<div class="line"><a name="l16030"></a><span class="lineno">16030</span>&#160;</div>
<div class="line"><a name="l16031"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#aa3eca255b6be227d7d901cc2a72017a5">16031</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#aa3eca255b6be227d7d901cc2a72017a5">Run</a>() {</div>
<div class="line"><a name="l16032"></a><span class="lineno">16032</span>&#160;    <span class="keywordflow">switch</span> (testCase_) {</div>
<div class="line"><a name="l16033"></a><span class="lineno">16033</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a3b4b1aa023d66447f1d05b2d79021b10">IgnoreOOM</a>:</div>
<div class="line"><a name="l16034"></a><span class="lineno">16034</span>&#160;      <a class="code" href="../../df/d43/classv8_1_1_v8.html#aa5be4ced50fa5552e562823f71eb880f">v8::V8::IgnoreOutOfMemoryException</a>();</div>
<div class="line"><a name="l16035"></a><span class="lineno">16035</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l16036"></a><span class="lineno">16036</span>&#160;</div>
<div class="line"><a name="l16037"></a><span class="lineno">16037</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a69c2fe9a787ee95ee315198e9a7e9d24">SetResourceConstraints</a>: {</div>
<div class="line"><a name="l16038"></a><span class="lineno">16038</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> K = 1024;</div>
<div class="line"><a name="l16039"></a><span class="lineno">16039</span>&#160;      <a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a> constraints;</div>
<div class="line"><a name="l16040"></a><span class="lineno">16040</span>&#160;      constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#acbc7f014a83bddf32a5a29f5c9d6e6b0">set_max_young_space_size</a>(256 * K);</div>
<div class="line"><a name="l16041"></a><span class="lineno">16041</span>&#160;      constraints.<a class="code" href="../../d8/dcd/classv8_1_1_resource_constraints.html#af87a04cf17d764721ff8220ce1b23de4">set_max_old_space_size</a>(4 * K * K);</div>
<div class="line"><a name="l16042"></a><span class="lineno">16042</span>&#160;      <a class="code" href="../../d2/dc3/namespacev8.html#a591291cb35df7f2f371d01df15bfc2d8">v8::SetResourceConstraints</a>(&amp;constraints);</div>
<div class="line"><a name="l16043"></a><span class="lineno">16043</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l16044"></a><span class="lineno">16044</span>&#160;    }</div>
<div class="line"><a name="l16045"></a><span class="lineno">16045</span>&#160;</div>
<div class="line"><a name="l16046"></a><span class="lineno">16046</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ab0fde864055dfa96caf80b6d8f86164c">SetFatalHandler</a>:</div>
<div class="line"><a name="l16047"></a><span class="lineno">16047</span>&#160;      <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l16048"></a><span class="lineno">16048</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l16049"></a><span class="lineno">16049</span>&#160;</div>
<div class="line"><a name="l16050"></a><span class="lineno">16050</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a608346dc94d469928b2c26d97e714b5e">SetCounterFunction</a>:</div>
<div class="line"><a name="l16051"></a><span class="lineno">16051</span>&#160;      <a class="code" href="../../df/d43/classv8_1_1_v8.html#a045d7754e62fa0ec72ae6c259b29af94">v8::V8::SetCounterFunction</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l16052"></a><span class="lineno">16052</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l16053"></a><span class="lineno">16053</span>&#160;</div>
<div class="line"><a name="l16054"></a><span class="lineno">16054</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ad50a20511938e2c9133354e009589786">SetCreateHistogramFunction</a>:</div>
<div class="line"><a name="l16055"></a><span class="lineno">16055</span>&#160;      <a class="code" href="../../df/d43/classv8_1_1_v8.html#a542d67e85089cb3f92aadf032f99e732">v8::V8::SetCreateHistogramFunction</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l16056"></a><span class="lineno">16056</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l16057"></a><span class="lineno">16057</span>&#160;</div>
<div class="line"><a name="l16058"></a><span class="lineno">16058</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ac2b9f41c48b84e723b6cb0cf0b4fed98">SetAddHistogramSampleFunction</a>:</div>
<div class="line"><a name="l16059"></a><span class="lineno">16059</span>&#160;      <a class="code" href="../../df/d43/classv8_1_1_v8.html#aeb420b690bc2c216882d6fdd00ddd3ea">v8::V8::SetAddHistogramSampleFunction</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l16060"></a><span class="lineno">16060</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l16061"></a><span class="lineno">16061</span>&#160;    }</div>
<div class="line"><a name="l16062"></a><span class="lineno">16062</span>&#160;    result_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l16063"></a><span class="lineno">16063</span>&#160;  }</div>
<div class="line"><a name="l16064"></a><span class="lineno">16064</span>&#160;</div>
<div class="line"><a name="l16065"></a><span class="lineno"><a class="line" href="../../d9/dfe/class_init_default_isolate_thread.html#a4ba8d70f98ffa80ff0c5726138d449f5">16065</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a4ba8d70f98ffa80ff0c5726138d449f5">result</a>() { <span class="keywordflow">return</span> result_; }</div>
<div class="line"><a name="l16066"></a><span class="lineno">16066</span>&#160;</div>
<div class="line"><a name="l16067"></a><span class="lineno">16067</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l16068"></a><span class="lineno">16068</span>&#160;  <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9">TestCase</a> testCase_;</div>
<div class="line"><a name="l16069"></a><span class="lineno">16069</span>&#160;  <span class="keywordtype">bool</span> result_;</div>
<div class="line"><a name="l16070"></a><span class="lineno">16070</span>&#160;};</div>
<div class="line"><a name="l16071"></a><span class="lineno">16071</span>&#160;</div>
<div class="line"><a name="l16072"></a><span class="lineno">16072</span>&#160;</div>
<div class="line"><a name="l16073"></a><span class="lineno">16073</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InitializeTestHelper(<a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9">InitDefaultIsolateThread::TestCase</a> testCase) {</div>
<div class="line"><a name="l16074"></a><span class="lineno">16074</span>&#160;  <a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html">InitDefaultIsolateThread</a> thread(testCase);</div>
<div class="line"><a name="l16075"></a><span class="lineno">16075</span>&#160;  thread.Start();</div>
<div class="line"><a name="l16076"></a><span class="lineno">16076</span>&#160;  thread.Join();</div>
<div class="line"><a name="l16077"></a><span class="lineno">16077</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(thread.result(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l16078"></a><span class="lineno">16078</span>&#160;}</div>
<div class="line"><a name="l16079"></a><span class="lineno">16079</span>&#160;</div>
<div class="line"><a name="l16080"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a867846becc2d9ac2c7a08b810f7341be">16080</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(InitializeDefaultIsolateOnSecondaryThread1) {</div>
<div class="line"><a name="l16081"></a><span class="lineno">16081</span>&#160;  InitializeTestHelper(<a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a3b4b1aa023d66447f1d05b2d79021b10">InitDefaultIsolateThread::IgnoreOOM</a>);</div>
<div class="line"><a name="l16082"></a><span class="lineno">16082</span>&#160;}</div>
<div class="line"><a name="l16083"></a><span class="lineno">16083</span>&#160;</div>
<div class="line"><a name="l16084"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae3b60659056b8a79354ac69f327bb811">16084</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(InitializeDefaultIsolateOnSecondaryThread2) {</div>
<div class="line"><a name="l16085"></a><span class="lineno">16085</span>&#160;  InitializeTestHelper(<a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a69c2fe9a787ee95ee315198e9a7e9d24">InitDefaultIsolateThread::SetResourceConstraints</a>);</div>
<div class="line"><a name="l16086"></a><span class="lineno">16086</span>&#160;}</div>
<div class="line"><a name="l16087"></a><span class="lineno">16087</span>&#160;</div>
<div class="line"><a name="l16088"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1507e62c92098ff8ff55aebd3538e1fc">16088</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(InitializeDefaultIsolateOnSecondaryThread3) {</div>
<div class="line"><a name="l16089"></a><span class="lineno">16089</span>&#160;  InitializeTestHelper(<a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ab0fde864055dfa96caf80b6d8f86164c">InitDefaultIsolateThread::SetFatalHandler</a>);</div>
<div class="line"><a name="l16090"></a><span class="lineno">16090</span>&#160;}</div>
<div class="line"><a name="l16091"></a><span class="lineno">16091</span>&#160;</div>
<div class="line"><a name="l16092"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad8e41643f256453e6ecb273514f2985a">16092</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(InitializeDefaultIsolateOnSecondaryThread4) {</div>
<div class="line"><a name="l16093"></a><span class="lineno">16093</span>&#160;  InitializeTestHelper(<a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a608346dc94d469928b2c26d97e714b5e">InitDefaultIsolateThread::SetCounterFunction</a>);</div>
<div class="line"><a name="l16094"></a><span class="lineno">16094</span>&#160;}</div>
<div class="line"><a name="l16095"></a><span class="lineno">16095</span>&#160;</div>
<div class="line"><a name="l16096"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af6d85a22369fde2438561ce7b999f1be">16096</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(InitializeDefaultIsolateOnSecondaryThread5) {</div>
<div class="line"><a name="l16097"></a><span class="lineno">16097</span>&#160;  InitializeTestHelper(<a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ad50a20511938e2c9133354e009589786">InitDefaultIsolateThread::SetCreateHistogramFunction</a>);</div>
<div class="line"><a name="l16098"></a><span class="lineno">16098</span>&#160;}</div>
<div class="line"><a name="l16099"></a><span class="lineno">16099</span>&#160;</div>
<div class="line"><a name="l16100"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae44a28e3b43ff03f7f9fcad144f338ad">16100</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(InitializeDefaultIsolateOnSecondaryThread6) {</div>
<div class="line"><a name="l16101"></a><span class="lineno">16101</span>&#160;  InitializeTestHelper(<a class="code" href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ac2b9f41c48b84e723b6cb0cf0b4fed98">InitDefaultIsolateThread::SetAddHistogramSampleFunction</a>);</div>
<div class="line"><a name="l16102"></a><span class="lineno">16102</span>&#160;}</div>
<div class="line"><a name="l16103"></a><span class="lineno">16103</span>&#160;</div>
<div class="line"><a name="l16104"></a><span class="lineno">16104</span>&#160;</div>
<div class="line"><a name="l16105"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ab7e4c7e20b32b3a9d77c6a38335e32e9">16105</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(StringCheckMultipleContexts) {</div>
<div class="line"><a name="l16106"></a><span class="lineno">16106</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l16107"></a><span class="lineno">16107</span>&#160;      <span class="stringliteral">&quot;(function() { return \&quot;a\&quot;.charAt(0); })()&quot;</span>;</div>
<div class="line"><a name="l16108"></a><span class="lineno">16108</span>&#160;</div>
<div class="line"><a name="l16109"></a><span class="lineno">16109</span>&#160;  {</div>
<div class="line"><a name="l16110"></a><span class="lineno">16110</span>&#160;    <span class="comment">// Run the code twice in the first context to initialize the call IC.</span></div>
<div class="line"><a name="l16111"></a><span class="lineno">16111</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16112"></a><span class="lineno">16112</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context1;</div>
<div class="line"><a name="l16113"></a><span class="lineno">16113</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"><a name="l16114"></a><span class="lineno">16114</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"><a name="l16115"></a><span class="lineno">16115</span>&#160;  }</div>
<div class="line"><a name="l16116"></a><span class="lineno">16116</span>&#160;</div>
<div class="line"><a name="l16117"></a><span class="lineno">16117</span>&#160;  {</div>
<div class="line"><a name="l16118"></a><span class="lineno">16118</span>&#160;    <span class="comment">// Change the String.prototype in the second context and check</span></div>
<div class="line"><a name="l16119"></a><span class="lineno">16119</span>&#160;    <span class="comment">// that the right function gets called.</span></div>
<div class="line"><a name="l16120"></a><span class="lineno">16120</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16121"></a><span class="lineno">16121</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context2;</div>
<div class="line"><a name="l16122"></a><span class="lineno">16122</span>&#160;    CompileRun(<span class="stringliteral">&quot;String.prototype.charAt = function() { return \&quot;not a\&quot;; }&quot;</span>);</div>
<div class="line"><a name="l16123"></a><span class="lineno">16123</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;not a&quot;</span>);</div>
<div class="line"><a name="l16124"></a><span class="lineno">16124</span>&#160;  }</div>
<div class="line"><a name="l16125"></a><span class="lineno">16125</span>&#160;}</div>
<div class="line"><a name="l16126"></a><span class="lineno">16126</span>&#160;</div>
<div class="line"><a name="l16127"></a><span class="lineno">16127</span>&#160;</div>
<div class="line"><a name="l16128"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa1a38504bb10979dd4d475d0d2fc026e">16128</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(NumberCheckMultipleContexts) {</div>
<div class="line"><a name="l16129"></a><span class="lineno">16129</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l16130"></a><span class="lineno">16130</span>&#160;      <span class="stringliteral">&quot;(function() { return (42).toString(); })()&quot;</span>;</div>
<div class="line"><a name="l16131"></a><span class="lineno">16131</span>&#160;</div>
<div class="line"><a name="l16132"></a><span class="lineno">16132</span>&#160;  {</div>
<div class="line"><a name="l16133"></a><span class="lineno">16133</span>&#160;    <span class="comment">// Run the code twice in the first context to initialize the call IC.</span></div>
<div class="line"><a name="l16134"></a><span class="lineno">16134</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16135"></a><span class="lineno">16135</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context1;</div>
<div class="line"><a name="l16136"></a><span class="lineno">16136</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;42&quot;</span>);</div>
<div class="line"><a name="l16137"></a><span class="lineno">16137</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;42&quot;</span>);</div>
<div class="line"><a name="l16138"></a><span class="lineno">16138</span>&#160;  }</div>
<div class="line"><a name="l16139"></a><span class="lineno">16139</span>&#160;</div>
<div class="line"><a name="l16140"></a><span class="lineno">16140</span>&#160;  {</div>
<div class="line"><a name="l16141"></a><span class="lineno">16141</span>&#160;    <span class="comment">// Change the Number.prototype in the second context and check</span></div>
<div class="line"><a name="l16142"></a><span class="lineno">16142</span>&#160;    <span class="comment">// that the right function gets called.</span></div>
<div class="line"><a name="l16143"></a><span class="lineno">16143</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16144"></a><span class="lineno">16144</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context2;</div>
<div class="line"><a name="l16145"></a><span class="lineno">16145</span>&#160;    CompileRun(<span class="stringliteral">&quot;Number.prototype.toString = function() { return \&quot;not 42\&quot;; }&quot;</span>);</div>
<div class="line"><a name="l16146"></a><span class="lineno">16146</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;not 42&quot;</span>);</div>
<div class="line"><a name="l16147"></a><span class="lineno">16147</span>&#160;  }</div>
<div class="line"><a name="l16148"></a><span class="lineno">16148</span>&#160;}</div>
<div class="line"><a name="l16149"></a><span class="lineno">16149</span>&#160;</div>
<div class="line"><a name="l16150"></a><span class="lineno">16150</span>&#160;</div>
<div class="line"><a name="l16151"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af701cab236c40b2ac1d8738d9f0589cc">16151</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(BooleanCheckMultipleContexts) {</div>
<div class="line"><a name="l16152"></a><span class="lineno">16152</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* code =</div>
<div class="line"><a name="l16153"></a><span class="lineno">16153</span>&#160;      <span class="stringliteral">&quot;(function() { return true.toString(); })()&quot;</span>;</div>
<div class="line"><a name="l16154"></a><span class="lineno">16154</span>&#160;</div>
<div class="line"><a name="l16155"></a><span class="lineno">16155</span>&#160;  {</div>
<div class="line"><a name="l16156"></a><span class="lineno">16156</span>&#160;    <span class="comment">// Run the code twice in the first context to initialize the call IC.</span></div>
<div class="line"><a name="l16157"></a><span class="lineno">16157</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16158"></a><span class="lineno">16158</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context1;</div>
<div class="line"><a name="l16159"></a><span class="lineno">16159</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l16160"></a><span class="lineno">16160</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l16161"></a><span class="lineno">16161</span>&#160;  }</div>
<div class="line"><a name="l16162"></a><span class="lineno">16162</span>&#160;</div>
<div class="line"><a name="l16163"></a><span class="lineno">16163</span>&#160;  {</div>
<div class="line"><a name="l16164"></a><span class="lineno">16164</span>&#160;    <span class="comment">// Change the Boolean.prototype in the second context and check</span></div>
<div class="line"><a name="l16165"></a><span class="lineno">16165</span>&#160;    <span class="comment">// that the right function gets called.</span></div>
<div class="line"><a name="l16166"></a><span class="lineno">16166</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16167"></a><span class="lineno">16167</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context2;</div>
<div class="line"><a name="l16168"></a><span class="lineno">16168</span>&#160;    CompileRun(<span class="stringliteral">&quot;Boolean.prototype.toString = function() { return \&quot;\&quot;; }&quot;</span>);</div>
<div class="line"><a name="l16169"></a><span class="lineno">16169</span>&#160;    ExpectString(code, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l16170"></a><span class="lineno">16170</span>&#160;  }</div>
<div class="line"><a name="l16171"></a><span class="lineno">16171</span>&#160;}</div>
<div class="line"><a name="l16172"></a><span class="lineno">16172</span>&#160;</div>
<div class="line"><a name="l16173"></a><span class="lineno">16173</span>&#160;</div>
<div class="line"><a name="l16174"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a40c87c87a79004d4ce4c9259f7057166">16174</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DontDeleteCellLoadIC) {</div>
<div class="line"><a name="l16175"></a><span class="lineno">16175</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* function_code =</div>
<div class="line"><a name="l16176"></a><span class="lineno">16176</span>&#160;      <span class="stringliteral">&quot;function readCell() { while (true) { return cell; } }&quot;</span>;</div>
<div class="line"><a name="l16177"></a><span class="lineno">16177</span>&#160;</div>
<div class="line"><a name="l16178"></a><span class="lineno">16178</span>&#160;  {</div>
<div class="line"><a name="l16179"></a><span class="lineno">16179</span>&#160;    <span class="comment">// Run the code twice in the first context to initialize the load</span></div>
<div class="line"><a name="l16180"></a><span class="lineno">16180</span>&#160;    <span class="comment">// IC for a don&#39;t delete cell.</span></div>
<div class="line"><a name="l16181"></a><span class="lineno">16181</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16182"></a><span class="lineno">16182</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context1;</div>
<div class="line"><a name="l16183"></a><span class="lineno">16183</span>&#160;    CompileRun(<span class="stringliteral">&quot;var cell = \&quot;first\&quot;;&quot;</span>);</div>
<div class="line"><a name="l16184"></a><span class="lineno">16184</span>&#160;    ExpectBoolean(<span class="stringliteral">&quot;delete cell&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l16185"></a><span class="lineno">16185</span>&#160;    CompileRun(function_code);</div>
<div class="line"><a name="l16186"></a><span class="lineno">16186</span>&#160;    ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;first&quot;</span>);</div>
<div class="line"><a name="l16187"></a><span class="lineno">16187</span>&#160;    ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;first&quot;</span>);</div>
<div class="line"><a name="l16188"></a><span class="lineno">16188</span>&#160;  }</div>
<div class="line"><a name="l16189"></a><span class="lineno">16189</span>&#160;</div>
<div class="line"><a name="l16190"></a><span class="lineno">16190</span>&#160;  {</div>
<div class="line"><a name="l16191"></a><span class="lineno">16191</span>&#160;    <span class="comment">// Use a deletable cell in the second context.</span></div>
<div class="line"><a name="l16192"></a><span class="lineno">16192</span>&#160;    <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16193"></a><span class="lineno">16193</span>&#160;    <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context2;</div>
<div class="line"><a name="l16194"></a><span class="lineno">16194</span>&#160;    CompileRun(<span class="stringliteral">&quot;cell = \&quot;second\&quot;;&quot;</span>);</div>
<div class="line"><a name="l16195"></a><span class="lineno">16195</span>&#160;    CompileRun(function_code);</div>
<div class="line"><a name="l16196"></a><span class="lineno">16196</span>&#160;    ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;second&quot;</span>);</div>
<div class="line"><a name="l16197"></a><span class="lineno">16197</span>&#160;    ExpectBoolean(<span class="stringliteral">&quot;delete cell&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l16198"></a><span class="lineno">16198</span>&#160;    ExpectString(<span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l16199"></a><span class="lineno">16199</span>&#160;                 <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l16200"></a><span class="lineno">16200</span>&#160;                 <span class="stringliteral">&quot;    return readCell();&quot;</span></div>
<div class="line"><a name="l16201"></a><span class="lineno">16201</span>&#160;                 <span class="stringliteral">&quot;  } catch(e) {&quot;</span></div>
<div class="line"><a name="l16202"></a><span class="lineno">16202</span>&#160;                 <span class="stringliteral">&quot;    return e.toString();&quot;</span></div>
<div class="line"><a name="l16203"></a><span class="lineno">16203</span>&#160;                 <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l16204"></a><span class="lineno">16204</span>&#160;                 <span class="stringliteral">&quot;})()&quot;</span>,</div>
<div class="line"><a name="l16205"></a><span class="lineno">16205</span>&#160;                 <span class="stringliteral">&quot;ReferenceError: cell is not defined&quot;</span>);</div>
<div class="line"><a name="l16206"></a><span class="lineno">16206</span>&#160;    CompileRun(<span class="stringliteral">&quot;cell = \&quot;new_second\&quot;;&quot;</span>);</div>
<div class="line"><a name="l16207"></a><span class="lineno">16207</span>&#160;    <a class="code" href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a>-&gt;CollectAllGarbage(<a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">i::Heap::kNoGCFlags</a>);</div>
<div class="line"><a name="l16208"></a><span class="lineno">16208</span>&#160;    ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;new_second&quot;</span>);</div>
<div class="line"><a name="l16209"></a><span class="lineno">16209</span>&#160;    ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;new_second&quot;</span>);</div>
<div class="line"><a name="l16210"></a><span class="lineno">16210</span>&#160;  }</div>
<div class="line"><a name="l16211"></a><span class="lineno">16211</span>&#160;}</div>
<div class="line"><a name="l16212"></a><span class="lineno">16212</span>&#160;</div>
<div class="line"><a name="l16213"></a><span class="lineno">16213</span>&#160;</div>
<div class="line"><a name="l16214"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae733fb9cd23c5a27dcfd40fc7df16072">16214</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DontDeleteCellLoadICForceDelete) {</div>
<div class="line"><a name="l16215"></a><span class="lineno">16215</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* function_code =</div>
<div class="line"><a name="l16216"></a><span class="lineno">16216</span>&#160;      <span class="stringliteral">&quot;function readCell() { while (true) { return cell; } }&quot;</span>;</div>
<div class="line"><a name="l16217"></a><span class="lineno">16217</span>&#160;</div>
<div class="line"><a name="l16218"></a><span class="lineno">16218</span>&#160;  <span class="comment">// Run the code twice to initialize the load IC for a don&#39;t delete</span></div>
<div class="line"><a name="l16219"></a><span class="lineno">16219</span>&#160;  <span class="comment">// cell.</span></div>
<div class="line"><a name="l16220"></a><span class="lineno">16220</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16221"></a><span class="lineno">16221</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16222"></a><span class="lineno">16222</span>&#160;  CompileRun(<span class="stringliteral">&quot;var cell = \&quot;value\&quot;;&quot;</span>);</div>
<div class="line"><a name="l16223"></a><span class="lineno">16223</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;delete cell&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l16224"></a><span class="lineno">16224</span>&#160;  CompileRun(function_code);</div>
<div class="line"><a name="l16225"></a><span class="lineno">16225</span>&#160;  ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div>
<div class="line"><a name="l16226"></a><span class="lineno">16226</span>&#160;  ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div>
<div class="line"><a name="l16227"></a><span class="lineno">16227</span>&#160;</div>
<div class="line"><a name="l16228"></a><span class="lineno">16228</span>&#160;  <span class="comment">// Delete the cell using the API and check the inlined code works</span></div>
<div class="line"><a name="l16229"></a><span class="lineno">16229</span>&#160;  <span class="comment">// correctly.</span></div>
<div class="line"><a name="l16230"></a><span class="lineno">16230</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;ForceDelete(v8_str(<span class="stringliteral">&quot;cell&quot;</span>)));</div>
<div class="line"><a name="l16231"></a><span class="lineno">16231</span>&#160;  ExpectString(<span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l16232"></a><span class="lineno">16232</span>&#160;               <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l16233"></a><span class="lineno">16233</span>&#160;               <span class="stringliteral">&quot;    return readCell();&quot;</span></div>
<div class="line"><a name="l16234"></a><span class="lineno">16234</span>&#160;               <span class="stringliteral">&quot;  } catch(e) {&quot;</span></div>
<div class="line"><a name="l16235"></a><span class="lineno">16235</span>&#160;               <span class="stringliteral">&quot;    return e.toString();&quot;</span></div>
<div class="line"><a name="l16236"></a><span class="lineno">16236</span>&#160;               <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l16237"></a><span class="lineno">16237</span>&#160;               <span class="stringliteral">&quot;})()&quot;</span>,</div>
<div class="line"><a name="l16238"></a><span class="lineno">16238</span>&#160;               <span class="stringliteral">&quot;ReferenceError: cell is not defined&quot;</span>);</div>
<div class="line"><a name="l16239"></a><span class="lineno">16239</span>&#160;}</div>
<div class="line"><a name="l16240"></a><span class="lineno">16240</span>&#160;</div>
<div class="line"><a name="l16241"></a><span class="lineno">16241</span>&#160;</div>
<div class="line"><a name="l16242"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aae49fb5db5c3d75b111db9fa90ff9e5c">16242</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DontDeleteCellLoadICAPI) {</div>
<div class="line"><a name="l16243"></a><span class="lineno">16243</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* function_code =</div>
<div class="line"><a name="l16244"></a><span class="lineno">16244</span>&#160;      <span class="stringliteral">&quot;function readCell() { while (true) { return cell; } }&quot;</span>;</div>
<div class="line"><a name="l16245"></a><span class="lineno">16245</span>&#160;</div>
<div class="line"><a name="l16246"></a><span class="lineno">16246</span>&#160;  <span class="comment">// Run the code twice to initialize the load IC for a don&#39;t delete</span></div>
<div class="line"><a name="l16247"></a><span class="lineno">16247</span>&#160;  <span class="comment">// cell created using the API.</span></div>
<div class="line"><a name="l16248"></a><span class="lineno">16248</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16249"></a><span class="lineno">16249</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16250"></a><span class="lineno">16250</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;cell&quot;</span>), v8_str(<span class="stringliteral">&quot;value&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58">v8::DontDelete</a>);</div>
<div class="line"><a name="l16251"></a><span class="lineno">16251</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;delete cell&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l16252"></a><span class="lineno">16252</span>&#160;  CompileRun(function_code);</div>
<div class="line"><a name="l16253"></a><span class="lineno">16253</span>&#160;  ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div>
<div class="line"><a name="l16254"></a><span class="lineno">16254</span>&#160;  ExpectString(<span class="stringliteral">&quot;readCell()&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div>
<div class="line"><a name="l16255"></a><span class="lineno">16255</span>&#160;</div>
<div class="line"><a name="l16256"></a><span class="lineno">16256</span>&#160;  <span class="comment">// Delete the cell using the API and check the inlined code works</span></div>
<div class="line"><a name="l16257"></a><span class="lineno">16257</span>&#160;  <span class="comment">// correctly.</span></div>
<div class="line"><a name="l16258"></a><span class="lineno">16258</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;ForceDelete(v8_str(<span class="stringliteral">&quot;cell&quot;</span>)));</div>
<div class="line"><a name="l16259"></a><span class="lineno">16259</span>&#160;  ExpectString(<span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l16260"></a><span class="lineno">16260</span>&#160;               <span class="stringliteral">&quot;  try {&quot;</span></div>
<div class="line"><a name="l16261"></a><span class="lineno">16261</span>&#160;               <span class="stringliteral">&quot;    return readCell();&quot;</span></div>
<div class="line"><a name="l16262"></a><span class="lineno">16262</span>&#160;               <span class="stringliteral">&quot;  } catch(e) {&quot;</span></div>
<div class="line"><a name="l16263"></a><span class="lineno">16263</span>&#160;               <span class="stringliteral">&quot;    return e.toString();&quot;</span></div>
<div class="line"><a name="l16264"></a><span class="lineno">16264</span>&#160;               <span class="stringliteral">&quot;  }&quot;</span></div>
<div class="line"><a name="l16265"></a><span class="lineno">16265</span>&#160;               <span class="stringliteral">&quot;})()&quot;</span>,</div>
<div class="line"><a name="l16266"></a><span class="lineno">16266</span>&#160;               <span class="stringliteral">&quot;ReferenceError: cell is not defined&quot;</span>);</div>
<div class="line"><a name="l16267"></a><span class="lineno">16267</span>&#160;}</div>
<div class="line"><a name="l16268"></a><span class="lineno">16268</span>&#160;</div>
<div class="line"><a name="l16269"></a><span class="lineno">16269</span>&#160;</div>
<div class="line"><a name="l16270"></a><span class="lineno"><a class="line" href="../../d0/dbf/class_visitor42.html">16270</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d0/dbf/class_visitor42.html">Visitor42</a> : <span class="keyword">public</span> <a class="code" href="../../dd/d8f/classv8_1_1_persistent_handle_visitor.html">v8::PersistentHandleVisitor</a> {</div>
<div class="line"><a name="l16271"></a><span class="lineno">16271</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l16272"></a><span class="lineno"><a class="line" href="../../d0/dbf/class_visitor42.html#a26a9b4d1dc0f612e45f17c680ca948c5">16272</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="../../d0/dbf/class_visitor42.html#a26a9b4d1dc0f612e45f17c680ca948c5">Visitor42</a>(<a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> <span class="keywordtype">object</span>)</div>
<div class="line"><a name="l16273"></a><span class="lineno">16273</span>&#160;      : <a class="code" href="../../d0/dbf/class_visitor42.html#a3dd655f1f7e3481778d86bd515be83b3">counter_</a>(0), <a class="code" href="../../d0/dbf/class_visitor42.html#a2d42f8bdf1b4dbd97566d0766b109697">object_</a>(object) { }</div>
<div class="line"><a name="l16274"></a><span class="lineno">16274</span>&#160;</div>
<div class="line"><a name="l16275"></a><span class="lineno"><a class="line" href="../../d0/dbf/class_visitor42.html#a17ced6edbc998fb3bc23125b1ccae8bf">16275</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dbf/class_visitor42.html#a17ced6edbc998fb3bc23125b1ccae8bf">VisitPersistentHandle</a>(Persistent&lt;Value&gt; value,</div>
<div class="line"><a name="l16276"></a><span class="lineno">16276</span>&#160;                                     <a class="code" href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> class_id) {</div>
<div class="line"><a name="l16277"></a><span class="lineno">16277</span>&#160;    <span class="keywordflow">if</span> (class_id == 42) {</div>
<div class="line"><a name="l16278"></a><span class="lineno">16278</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsObject());</div>
<div class="line"><a name="l16279"></a><span class="lineno">16279</span>&#160;      <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> visited =</div>
<div class="line"><a name="l16280"></a><span class="lineno">16280</span>&#160;          <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#aebb8f4921c13f93e3bdfae111dc45d29">v8::Persistent&lt;v8::Object&gt;::Cast</a>(value);</div>
<div class="line"><a name="l16281"></a><span class="lineno">16281</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, visited.WrapperClassId());</div>
<div class="line"><a name="l16282"></a><span class="lineno">16282</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d0/dbf/class_visitor42.html#a2d42f8bdf1b4dbd97566d0766b109697">object_</a>, visited);</div>
<div class="line"><a name="l16283"></a><span class="lineno">16283</span>&#160;      ++<a class="code" href="../../d0/dbf/class_visitor42.html#a3dd655f1f7e3481778d86bd515be83b3">counter_</a>;</div>
<div class="line"><a name="l16284"></a><span class="lineno">16284</span>&#160;    }</div>
<div class="line"><a name="l16285"></a><span class="lineno">16285</span>&#160;  }</div>
<div class="line"><a name="l16286"></a><span class="lineno">16286</span>&#160;</div>
<div class="line"><a name="l16287"></a><span class="lineno"><a class="line" href="../../d0/dbf/class_visitor42.html#a3dd655f1f7e3481778d86bd515be83b3">16287</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d0/dbf/class_visitor42.html#a3dd655f1f7e3481778d86bd515be83b3">counter_</a>;</div>
<div class="line"><a name="l16288"></a><span class="lineno"><a class="line" href="../../d0/dbf/class_visitor42.html#a2d42f8bdf1b4dbd97566d0766b109697">16288</a></span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> <a class="code" href="../../d0/dbf/class_visitor42.html#a2d42f8bdf1b4dbd97566d0766b109697">object_</a>;</div>
<div class="line"><a name="l16289"></a><span class="lineno">16289</span>&#160;};</div>
<div class="line"><a name="l16290"></a><span class="lineno">16290</span>&#160;</div>
<div class="line"><a name="l16291"></a><span class="lineno">16291</span>&#160;</div>
<div class="line"><a name="l16292"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ae59dcbbda45a6a2cd20ce0d03c40a90b">16292</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(PersistentHandleVisitor) {</div>
<div class="line"><a name="l16293"></a><span class="lineno">16293</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16294"></a><span class="lineno">16294</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16295"></a><span class="lineno">16295</span>&#160;  <a class="code" href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent&lt;v8::Object&gt;</a> <span class="keywordtype">object</span> =</div>
<div class="line"><a name="l16296"></a><span class="lineno">16296</span>&#160;      <a class="code" href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent&lt;v8::Object&gt;::New</a>(<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a>());</div>
<div class="line"><a name="l16297"></a><span class="lineno">16297</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, <span class="keywordtype">object</span>.WrapperClassId());</div>
<div class="line"><a name="l16298"></a><span class="lineno">16298</span>&#160;  <span class="keywordtype">object</span>.SetWrapperClassId(42);</div>
<div class="line"><a name="l16299"></a><span class="lineno">16299</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, <span class="keywordtype">object</span>.WrapperClassId());</div>
<div class="line"><a name="l16300"></a><span class="lineno">16300</span>&#160;</div>
<div class="line"><a name="l16301"></a><span class="lineno">16301</span>&#160;  <a class="code" href="../../d0/dbf/class_visitor42.html">Visitor42</a> visitor(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l16302"></a><span class="lineno">16302</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a498900a0c8f4055173168e9bf11c3d48">v8::V8::VisitHandlesWithClassIds</a>(&amp;visitor);</div>
<div class="line"><a name="l16303"></a><span class="lineno">16303</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, visitor.<a class="code" href="../../d0/dbf/class_visitor42.html#a3dd655f1f7e3481778d86bd515be83b3">counter_</a>);</div>
<div class="line"><a name="l16304"></a><span class="lineno">16304</span>&#160;</div>
<div class="line"><a name="l16305"></a><span class="lineno">16305</span>&#160;  <span class="keywordtype">object</span>.Dispose();</div>
<div class="line"><a name="l16306"></a><span class="lineno">16306</span>&#160;}</div>
<div class="line"><a name="l16307"></a><span class="lineno">16307</span>&#160;</div>
<div class="line"><a name="l16308"></a><span class="lineno">16308</span>&#160;</div>
<div class="line"><a name="l16309"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3536f8df14ce90601cf92679f50af6e7">16309</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(RegExp) {</div>
<div class="line"><a name="l16310"></a><span class="lineno">16310</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16311"></a><span class="lineno">16311</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16312"></a><span class="lineno">16312</span>&#160;</div>
<div class="line"><a name="l16313"></a><span class="lineno">16313</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::RegExp&gt;</a> re = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::RegExp::New</a>(v8_str(<span class="stringliteral">&quot;foo&quot;</span>), <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa634ee767a8e90ff4d56e140459cca31f">v8::RegExp::kNone</a>);</div>
<div class="line"><a name="l16314"></a><span class="lineno">16314</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#af2fba9108a440a65d6918672ef0d7081">IsRegExp</a>());</div>
<div class="line"><a name="l16315"></a><span class="lineno">16315</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#a97f3bf95cbc8b98f6757e01543b6231c">GetSource</a>()-&gt;Equals(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l16316"></a><span class="lineno">16316</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa634ee767a8e90ff4d56e140459cca31f">v8::RegExp::kNone</a>, re-&gt;<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#a9a31181800fe90af0bc689840f41d8c3">GetFlags</a>());</div>
<div class="line"><a name="l16317"></a><span class="lineno">16317</span>&#160;</div>
<div class="line"><a name="l16318"></a><span class="lineno">16318</span>&#160;  re = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::RegExp::New</a>(v8_str(<span class="stringliteral">&quot;bar&quot;</span>),</div>
<div class="line"><a name="l16319"></a><span class="lineno">16319</span>&#160;                       static_cast&lt;v8::RegExp::Flags&gt;(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4946463638b68bfca14da6424b0920b2">v8::RegExp::kIgnoreCase</a> |</div>
<div class="line"><a name="l16320"></a><span class="lineno">16320</span>&#160;                                                      <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4643cde23bd2cb0810f5957592414441">v8::RegExp::kGlobal</a>));</div>
<div class="line"><a name="l16321"></a><span class="lineno">16321</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;IsRegExp());</div>
<div class="line"><a name="l16322"></a><span class="lineno">16322</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;GetSource()-&gt;Equals(v8_str(<span class="stringliteral">&quot;bar&quot;</span>)));</div>
<div class="line"><a name="l16323"></a><span class="lineno">16323</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4946463638b68bfca14da6424b0920b2">v8::RegExp::kIgnoreCase</a> | <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4643cde23bd2cb0810f5957592414441">v8::RegExp::kGlobal</a>,</div>
<div class="line"><a name="l16324"></a><span class="lineno">16324</span>&#160;           static_cast&lt;int&gt;(re-&gt;GetFlags()));</div>
<div class="line"><a name="l16325"></a><span class="lineno">16325</span>&#160;</div>
<div class="line"><a name="l16326"></a><span class="lineno">16326</span>&#160;  re = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::RegExp::New</a>(v8_str(<span class="stringliteral">&quot;baz&quot;</span>),</div>
<div class="line"><a name="l16327"></a><span class="lineno">16327</span>&#160;                       static_cast&lt;v8::RegExp::Flags&gt;(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4946463638b68bfca14da6424b0920b2">v8::RegExp::kIgnoreCase</a> |</div>
<div class="line"><a name="l16328"></a><span class="lineno">16328</span>&#160;                                                      <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa067ca80aa5a1f99a18b4eee8d0325f99">v8::RegExp::kMultiline</a>));</div>
<div class="line"><a name="l16329"></a><span class="lineno">16329</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;IsRegExp());</div>
<div class="line"><a name="l16330"></a><span class="lineno">16330</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;GetSource()-&gt;Equals(v8_str(<span class="stringliteral">&quot;baz&quot;</span>)));</div>
<div class="line"><a name="l16331"></a><span class="lineno">16331</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4946463638b68bfca14da6424b0920b2">v8::RegExp::kIgnoreCase</a> | <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa067ca80aa5a1f99a18b4eee8d0325f99">v8::RegExp::kMultiline</a>,</div>
<div class="line"><a name="l16332"></a><span class="lineno">16332</span>&#160;           static_cast&lt;int&gt;(re-&gt;GetFlags()));</div>
<div class="line"><a name="l16333"></a><span class="lineno">16333</span>&#160;</div>
<div class="line"><a name="l16334"></a><span class="lineno">16334</span>&#160;  re = CompileRun(<span class="stringliteral">&quot;/quux/&quot;</span>).As&lt;<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html">v8::RegExp</a>&gt;();</div>
<div class="line"><a name="l16335"></a><span class="lineno">16335</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;IsRegExp());</div>
<div class="line"><a name="l16336"></a><span class="lineno">16336</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;GetSource()-&gt;Equals(v8_str(<span class="stringliteral">&quot;quux&quot;</span>)));</div>
<div class="line"><a name="l16337"></a><span class="lineno">16337</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa634ee767a8e90ff4d56e140459cca31f">v8::RegExp::kNone</a>, re-&gt;GetFlags());</div>
<div class="line"><a name="l16338"></a><span class="lineno">16338</span>&#160;</div>
<div class="line"><a name="l16339"></a><span class="lineno">16339</span>&#160;  re = CompileRun(<span class="stringliteral">&quot;/quux/gm&quot;</span>).As&lt;<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html">v8::RegExp</a>&gt;();</div>
<div class="line"><a name="l16340"></a><span class="lineno">16340</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;IsRegExp());</div>
<div class="line"><a name="l16341"></a><span class="lineno">16341</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;GetSource()-&gt;Equals(v8_str(<span class="stringliteral">&quot;quux&quot;</span>)));</div>
<div class="line"><a name="l16342"></a><span class="lineno">16342</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4643cde23bd2cb0810f5957592414441">v8::RegExp::kGlobal</a> | <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa067ca80aa5a1f99a18b4eee8d0325f99">v8::RegExp::kMultiline</a>,</div>
<div class="line"><a name="l16343"></a><span class="lineno">16343</span>&#160;           static_cast&lt;int&gt;(re-&gt;GetFlags()));</div>
<div class="line"><a name="l16344"></a><span class="lineno">16344</span>&#160;</div>
<div class="line"><a name="l16345"></a><span class="lineno">16345</span>&#160;  <span class="comment">// Override the RegExp constructor and check the API constructor</span></div>
<div class="line"><a name="l16346"></a><span class="lineno">16346</span>&#160;  <span class="comment">// still works.</span></div>
<div class="line"><a name="l16347"></a><span class="lineno">16347</span>&#160;  CompileRun(<span class="stringliteral">&quot;RegExp = function() {}&quot;</span>);</div>
<div class="line"><a name="l16348"></a><span class="lineno">16348</span>&#160;</div>
<div class="line"><a name="l16349"></a><span class="lineno">16349</span>&#160;  re = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::RegExp::New</a>(v8_str(<span class="stringliteral">&quot;foobar&quot;</span>), <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa634ee767a8e90ff4d56e140459cca31f">v8::RegExp::kNone</a>);</div>
<div class="line"><a name="l16350"></a><span class="lineno">16350</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;IsRegExp());</div>
<div class="line"><a name="l16351"></a><span class="lineno">16351</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;GetSource()-&gt;Equals(v8_str(<span class="stringliteral">&quot;foobar&quot;</span>)));</div>
<div class="line"><a name="l16352"></a><span class="lineno">16352</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa634ee767a8e90ff4d56e140459cca31f">v8::RegExp::kNone</a>, re-&gt;GetFlags());</div>
<div class="line"><a name="l16353"></a><span class="lineno">16353</span>&#160;</div>
<div class="line"><a name="l16354"></a><span class="lineno">16354</span>&#160;  re = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::RegExp::New</a>(v8_str(<span class="stringliteral">&quot;foobarbaz&quot;</span>),</div>
<div class="line"><a name="l16355"></a><span class="lineno">16355</span>&#160;                       static_cast&lt;v8::RegExp::Flags&gt;(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4946463638b68bfca14da6424b0920b2">v8::RegExp::kIgnoreCase</a> |</div>
<div class="line"><a name="l16356"></a><span class="lineno">16356</span>&#160;                                                      <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa067ca80aa5a1f99a18b4eee8d0325f99">v8::RegExp::kMultiline</a>));</div>
<div class="line"><a name="l16357"></a><span class="lineno">16357</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;IsRegExp());</div>
<div class="line"><a name="l16358"></a><span class="lineno">16358</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re-&gt;GetSource()-&gt;Equals(v8_str(<span class="stringliteral">&quot;foobarbaz&quot;</span>)));</div>
<div class="line"><a name="l16359"></a><span class="lineno">16359</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4946463638b68bfca14da6424b0920b2">v8::RegExp::kIgnoreCase</a> | <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa067ca80aa5a1f99a18b4eee8d0325f99">v8::RegExp::kMultiline</a>,</div>
<div class="line"><a name="l16360"></a><span class="lineno">16360</span>&#160;           static_cast&lt;int&gt;(re-&gt;GetFlags()));</div>
<div class="line"><a name="l16361"></a><span class="lineno">16361</span>&#160;</div>
<div class="line"><a name="l16362"></a><span class="lineno">16362</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;re&quot;</span>), re);</div>
<div class="line"><a name="l16363"></a><span class="lineno">16363</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;re.test(&#39;FoobarbaZ&#39;)&quot;</span>);</div>
<div class="line"><a name="l16364"></a><span class="lineno">16364</span>&#160;</div>
<div class="line"><a name="l16365"></a><span class="lineno">16365</span>&#160;  <span class="comment">// RegExps are objects on which you can set properties.</span></div>
<div class="line"><a name="l16366"></a><span class="lineno">16366</span>&#160;  re-&gt;Set(v8_str(<span class="stringliteral">&quot;property&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(32));</div>
<div class="line"><a name="l16367"></a><span class="lineno">16367</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> value(CompileRun(<span class="stringliteral">&quot;re.property&quot;</span>));</div>
<div class="line"><a name="l16368"></a><span class="lineno">16368</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(32, value-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">Int32Value</a>());</div>
<div class="line"><a name="l16369"></a><span class="lineno">16369</span>&#160;</div>
<div class="line"><a name="l16370"></a><span class="lineno">16370</span>&#160;  <a class="code" href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a> try_catch;</div>
<div class="line"><a name="l16371"></a><span class="lineno">16371</span>&#160;  re = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::RegExp::New</a>(v8_str(<span class="stringliteral">&quot;foo[&quot;</span>), <a class="code" href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa634ee767a8e90ff4d56e140459cca31f">v8::RegExp::kNone</a>);</div>
<div class="line"><a name="l16372"></a><span class="lineno">16372</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(re.IsEmpty());</div>
<div class="line"><a name="l16373"></a><span class="lineno">16373</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l16374"></a><span class="lineno">16374</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;ex&quot;</span>), try_catch.Exception());</div>
<div class="line"><a name="l16375"></a><span class="lineno">16375</span>&#160;  ExpectTrue(<span class="stringliteral">&quot;ex instanceof SyntaxError&quot;</span>);</div>
<div class="line"><a name="l16376"></a><span class="lineno">16376</span>&#160;}</div>
<div class="line"><a name="l16377"></a><span class="lineno">16377</span>&#160;</div>
<div class="line"><a name="l16378"></a><span class="lineno">16378</span>&#160;</div>
<div class="line"><a name="l16379"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af73a09ad4128804f95bf5a2db1c02252">16379</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Equals) {</div>
<div class="line"><a name="l16380"></a><span class="lineno">16380</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handleScope;</div>
<div class="line"><a name="l16381"></a><span class="lineno">16381</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> localContext;</div>
<div class="line"><a name="l16382"></a><span class="lineno">16382</span>&#160;</div>
<div class="line"><a name="l16383"></a><span class="lineno">16383</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> globalProxy = localContext-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l16384"></a><span class="lineno">16384</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> global = globalProxy-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aafa7e778e56fbbc49b1c0170c832f093">GetPrototype</a>();</div>
<div class="line"><a name="l16385"></a><span class="lineno">16385</span>&#160;</div>
<div class="line"><a name="l16386"></a><span class="lineno">16386</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#af0cd01c3c7904eb9537f2b15d09e8b76">StrictEquals</a>(global));</div>
<div class="line"><a name="l16387"></a><span class="lineno">16387</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!global-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#af0cd01c3c7904eb9537f2b15d09e8b76">StrictEquals</a>(globalProxy));</div>
<div class="line"><a name="l16388"></a><span class="lineno">16388</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!globalProxy-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#af0cd01c3c7904eb9537f2b15d09e8b76">StrictEquals</a>(global));</div>
<div class="line"><a name="l16389"></a><span class="lineno">16389</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(globalProxy-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#af0cd01c3c7904eb9537f2b15d09e8b76">StrictEquals</a>(globalProxy));</div>
<div class="line"><a name="l16390"></a><span class="lineno">16390</span>&#160;</div>
<div class="line"><a name="l16391"></a><span class="lineno">16391</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(global-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a0204658c4cdd2c008f8a8ab73d854412">Equals</a>(global));</div>
<div class="line"><a name="l16392"></a><span class="lineno">16392</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!global-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a0204658c4cdd2c008f8a8ab73d854412">Equals</a>(globalProxy));</div>
<div class="line"><a name="l16393"></a><span class="lineno">16393</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!globalProxy-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a0204658c4cdd2c008f8a8ab73d854412">Equals</a>(global));</div>
<div class="line"><a name="l16394"></a><span class="lineno">16394</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(globalProxy-&gt;<a class="code" href="../../dc/d0a/classv8_1_1_value.html#a0204658c4cdd2c008f8a8ab73d854412">Equals</a>(globalProxy));</div>
<div class="line"><a name="l16395"></a><span class="lineno">16395</span>&#160;}</div>
<div class="line"><a name="l16396"></a><span class="lineno">16396</span>&#160;</div>
<div class="line"><a name="l16397"></a><span class="lineno">16397</span>&#160;</div>
<div class="line"><a name="l16398"></a><span class="lineno">16398</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Value&gt;</a> Getter(<a class="code" href="../../de/deb/classv8_1_1_local.html">v8::Local&lt;v8::String&gt;</a> property,</div>
<div class="line"><a name="l16399"></a><span class="lineno">16399</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a>&amp; info ) {</div>
<div class="line"><a name="l16400"></a><span class="lineno">16400</span>&#160;  <span class="keywordflow">return</span> v8_str(<span class="stringliteral">&quot;42!&quot;</span>);</div>
<div class="line"><a name="l16401"></a><span class="lineno">16401</span>&#160;}</div>
<div class="line"><a name="l16402"></a><span class="lineno">16402</span>&#160;</div>
<div class="line"><a name="l16403"></a><span class="lineno">16403</span>&#160;</div>
<div class="line"><a name="l16404"></a><span class="lineno">16404</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> Enumerator(<span class="keyword">const</span> <a class="code" href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a>&amp; info) {</div>
<div class="line"><a name="l16405"></a><span class="lineno">16405</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Array::New</a>();</div>
<div class="line"><a name="l16406"></a><span class="lineno">16406</span>&#160;  result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">Set</a>(0, v8_str(<span class="stringliteral">&quot;universalAnswer&quot;</span>));</div>
<div class="line"><a name="l16407"></a><span class="lineno">16407</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l16408"></a><span class="lineno">16408</span>&#160;}</div>
<div class="line"><a name="l16409"></a><span class="lineno">16409</span>&#160;</div>
<div class="line"><a name="l16410"></a><span class="lineno">16410</span>&#160;</div>
<div class="line"><a name="l16411"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a12099d7c146735dfeab4a7184e30cd17">16411</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(NamedEnumeratorAndForIn) {</div>
<div class="line"><a name="l16412"></a><span class="lineno">16412</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> handle_scope;</div>
<div class="line"><a name="l16413"></a><span class="lineno">16413</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16414"></a><span class="lineno">16414</span>&#160;  <a class="code" href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a> context_scope(context.<a class="code" href="../../d7/d05/class_local_context.html#ab6e5e298162f2ddabba6d697ac27f6c2">local</a>());</div>
<div class="line"><a name="l16415"></a><span class="lineno">16415</span>&#160;</div>
<div class="line"><a name="l16416"></a><span class="lineno">16416</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::ObjectTemplate&gt;</a> tmpl = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l16417"></a><span class="lineno">16417</span>&#160;  tmpl-&gt;SetNamedPropertyHandler(Getter, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, Enumerator);</div>
<div class="line"><a name="l16418"></a><span class="lineno">16418</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;o&quot;</span>), tmpl-&gt;NewInstance());</div>
<div class="line"><a name="l16419"></a><span class="lineno">16419</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Array&gt;</a> result = <a class="code" href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle&lt;v8::Array&gt;::Cast</a>(CompileRun(</div>
<div class="line"><a name="l16420"></a><span class="lineno">16420</span>&#160;        <span class="stringliteral">&quot;var result = []; for (var k in o) result.push(k); result&quot;</span>));</div>
<div class="line"><a name="l16421"></a><span class="lineno">16421</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, result-&gt;<a class="code" href="../../d3/d32/classv8_1_1_array.html#a9d79066f5b28c73a0f6f248bbf846fe1">Length</a>());</div>
<div class="line"><a name="l16422"></a><span class="lineno">16422</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;universalAnswer&quot;</span>), result-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">Get</a>(0));</div>
<div class="line"><a name="l16423"></a><span class="lineno">16423</span>&#160;}</div>
<div class="line"><a name="l16424"></a><span class="lineno">16424</span>&#160;</div>
<div class="line"><a name="l16425"></a><span class="lineno">16425</span>&#160;</div>
<div class="line"><a name="l16426"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac3ea6c5de28c2e50bc81d17f2998c027">16426</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(DefinePropertyPostDetach) {</div>
<div class="line"><a name="l16427"></a><span class="lineno">16427</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16428"></a><span class="lineno">16428</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16429"></a><span class="lineno">16429</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Object&gt;</a> proxy = context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>();</div>
<div class="line"><a name="l16430"></a><span class="lineno">16430</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::Function&gt;</a> define_property =</div>
<div class="line"><a name="l16431"></a><span class="lineno">16431</span>&#160;      CompileRun(<span class="stringliteral">&quot;(function() {&quot;</span></div>
<div class="line"><a name="l16432"></a><span class="lineno">16432</span>&#160;                 <span class="stringliteral">&quot;  Object.defineProperty(&quot;</span></div>
<div class="line"><a name="l16433"></a><span class="lineno">16433</span>&#160;                 <span class="stringliteral">&quot;    this,&quot;</span></div>
<div class="line"><a name="l16434"></a><span class="lineno">16434</span>&#160;                 <span class="stringliteral">&quot;    1,&quot;</span></div>
<div class="line"><a name="l16435"></a><span class="lineno">16435</span>&#160;                 <span class="stringliteral">&quot;    { configurable: true, enumerable: true, value: 3 });&quot;</span></div>
<div class="line"><a name="l16436"></a><span class="lineno">16436</span>&#160;                 <span class="stringliteral">&quot;})&quot;</span>).<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;Function&gt;();</div>
<div class="line"><a name="l16437"></a><span class="lineno">16437</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a93c950914cc263962f3163e877b95c0b">DetachGlobal</a>();</div>
<div class="line"><a name="l16438"></a><span class="lineno">16438</span>&#160;  define_property-&gt;<a class="code" href="../../d5/d54/classv8_1_1_function.html#a0857617e4f2a360ecc9a558a66cdbff4">Call</a>(proxy, 0, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l16439"></a><span class="lineno">16439</span>&#160;}</div>
<div class="line"><a name="l16440"></a><span class="lineno">16440</span>&#160;</div>
<div class="line"><a name="l16441"></a><span class="lineno">16441</span>&#160;</div>
<div class="line"><a name="l16442"></a><span class="lineno">16442</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InstallContextId(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Context&gt;</a> context, <span class="keywordtype">int</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l16443"></a><span class="lineno">16443</span>&#160;  Context::Scope scope(context);</div>
<div class="line"><a name="l16444"></a><span class="lineno">16444</span>&#160;  CompileRun(<span class="stringliteral">&quot;Object.prototype&quot;</span>).As&lt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>&gt;()-&gt;</div>
<div class="line"><a name="l16445"></a><span class="lineno">16445</span>&#160;      Set(v8_str(<span class="stringliteral">&quot;context_id&quot;</span>), <a class="code" href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><a name="l16446"></a><span class="lineno">16446</span>&#160;}</div>
<div class="line"><a name="l16447"></a><span class="lineno">16447</span>&#160;</div>
<div class="line"><a name="l16448"></a><span class="lineno">16448</span>&#160;</div>
<div class="line"><a name="l16449"></a><span class="lineno">16449</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckContextId(<a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Object&gt;</a> <span class="keywordtype">object</span>, <span class="keywordtype">int</span> expected) {</div>
<div class="line"><a name="l16450"></a><span class="lineno">16450</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(expected, object-&gt;Get(v8_str(<span class="stringliteral">&quot;context_id&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l16451"></a><span class="lineno">16451</span>&#160;}</div>
<div class="line"><a name="l16452"></a><span class="lineno">16452</span>&#160;</div>
<div class="line"><a name="l16453"></a><span class="lineno">16453</span>&#160;</div>
<div class="line"><a name="l16454"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a90eff75c1d4703f18333a71def7638b7">16454</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CreationContext) {</div>
<div class="line"><a name="l16455"></a><span class="lineno">16455</span>&#160;  HandleScope handle_scope;</div>
<div class="line"><a name="l16456"></a><span class="lineno">16456</span>&#160;  Persistent&lt;Context&gt; context1 = Context::New();</div>
<div class="line"><a name="l16457"></a><span class="lineno">16457</span>&#160;  InstallContextId(context1, 1);</div>
<div class="line"><a name="l16458"></a><span class="lineno">16458</span>&#160;  Persistent&lt;Context&gt; context2 = Context::New();</div>
<div class="line"><a name="l16459"></a><span class="lineno">16459</span>&#160;  InstallContextId(context2, 2);</div>
<div class="line"><a name="l16460"></a><span class="lineno">16460</span>&#160;  Persistent&lt;Context&gt; context3 = Context::New();</div>
<div class="line"><a name="l16461"></a><span class="lineno">16461</span>&#160;  InstallContextId(context3, 3);</div>
<div class="line"><a name="l16462"></a><span class="lineno">16462</span>&#160;</div>
<div class="line"><a name="l16463"></a><span class="lineno">16463</span>&#160;  Local&lt;v8::FunctionTemplate&gt; tmpl = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l16464"></a><span class="lineno">16464</span>&#160;</div>
<div class="line"><a name="l16465"></a><span class="lineno">16465</span>&#160;  Local&lt;Object&gt; object1;</div>
<div class="line"><a name="l16466"></a><span class="lineno">16466</span>&#160;  Local&lt;Function&gt; func1;</div>
<div class="line"><a name="l16467"></a><span class="lineno">16467</span>&#160;  {</div>
<div class="line"><a name="l16468"></a><span class="lineno">16468</span>&#160;    Context::Scope scope(context1);</div>
<div class="line"><a name="l16469"></a><span class="lineno">16469</span>&#160;    object1 = Object::New();</div>
<div class="line"><a name="l16470"></a><span class="lineno">16470</span>&#160;    func1 = tmpl-&gt;GetFunction();</div>
<div class="line"><a name="l16471"></a><span class="lineno">16471</span>&#160;  }</div>
<div class="line"><a name="l16472"></a><span class="lineno">16472</span>&#160;</div>
<div class="line"><a name="l16473"></a><span class="lineno">16473</span>&#160;  Local&lt;Object&gt; object2;</div>
<div class="line"><a name="l16474"></a><span class="lineno">16474</span>&#160;  Local&lt;Function&gt; func2;</div>
<div class="line"><a name="l16475"></a><span class="lineno">16475</span>&#160;  {</div>
<div class="line"><a name="l16476"></a><span class="lineno">16476</span>&#160;    Context::Scope scope(context2);</div>
<div class="line"><a name="l16477"></a><span class="lineno">16477</span>&#160;    object2 = Object::New();</div>
<div class="line"><a name="l16478"></a><span class="lineno">16478</span>&#160;    func2 = tmpl-&gt;GetFunction();</div>
<div class="line"><a name="l16479"></a><span class="lineno">16479</span>&#160;  }</div>
<div class="line"><a name="l16480"></a><span class="lineno">16480</span>&#160;</div>
<div class="line"><a name="l16481"></a><span class="lineno">16481</span>&#160;  Local&lt;Object&gt; instance1;</div>
<div class="line"><a name="l16482"></a><span class="lineno">16482</span>&#160;  Local&lt;Object&gt; instance2;</div>
<div class="line"><a name="l16483"></a><span class="lineno">16483</span>&#160;</div>
<div class="line"><a name="l16484"></a><span class="lineno">16484</span>&#160;  {</div>
<div class="line"><a name="l16485"></a><span class="lineno">16485</span>&#160;    Context::Scope scope(context3);</div>
<div class="line"><a name="l16486"></a><span class="lineno">16486</span>&#160;    instance1 = func1-&gt;NewInstance();</div>
<div class="line"><a name="l16487"></a><span class="lineno">16487</span>&#160;    instance2 = func2-&gt;NewInstance();</div>
<div class="line"><a name="l16488"></a><span class="lineno">16488</span>&#160;  }</div>
<div class="line"><a name="l16489"></a><span class="lineno">16489</span>&#160;</div>
<div class="line"><a name="l16490"></a><span class="lineno">16490</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16491"></a><span class="lineno">16491</span>&#160;  CheckContextId(object1, 1);</div>
<div class="line"><a name="l16492"></a><span class="lineno">16492</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(func1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16493"></a><span class="lineno">16493</span>&#160;  CheckContextId(func1, 1);</div>
<div class="line"><a name="l16494"></a><span class="lineno">16494</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16495"></a><span class="lineno">16495</span>&#160;  CheckContextId(instance1, 1);</div>
<div class="line"><a name="l16496"></a><span class="lineno">16496</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16497"></a><span class="lineno">16497</span>&#160;  CheckContextId(object2, 2);</div>
<div class="line"><a name="l16498"></a><span class="lineno">16498</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(func2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16499"></a><span class="lineno">16499</span>&#160;  CheckContextId(func2, 2);</div>
<div class="line"><a name="l16500"></a><span class="lineno">16500</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16501"></a><span class="lineno">16501</span>&#160;  CheckContextId(instance2, 2);</div>
<div class="line"><a name="l16502"></a><span class="lineno">16502</span>&#160;</div>
<div class="line"><a name="l16503"></a><span class="lineno">16503</span>&#160;  {</div>
<div class="line"><a name="l16504"></a><span class="lineno">16504</span>&#160;    Context::Scope scope(context1);</div>
<div class="line"><a name="l16505"></a><span class="lineno">16505</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16506"></a><span class="lineno">16506</span>&#160;    CheckContextId(object1, 1);</div>
<div class="line"><a name="l16507"></a><span class="lineno">16507</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(func1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16508"></a><span class="lineno">16508</span>&#160;    CheckContextId(func1, 1);</div>
<div class="line"><a name="l16509"></a><span class="lineno">16509</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16510"></a><span class="lineno">16510</span>&#160;    CheckContextId(instance1, 1);</div>
<div class="line"><a name="l16511"></a><span class="lineno">16511</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16512"></a><span class="lineno">16512</span>&#160;    CheckContextId(object2, 2);</div>
<div class="line"><a name="l16513"></a><span class="lineno">16513</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(func2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16514"></a><span class="lineno">16514</span>&#160;    CheckContextId(func2, 2);</div>
<div class="line"><a name="l16515"></a><span class="lineno">16515</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16516"></a><span class="lineno">16516</span>&#160;    CheckContextId(instance2, 2);</div>
<div class="line"><a name="l16517"></a><span class="lineno">16517</span>&#160;  }</div>
<div class="line"><a name="l16518"></a><span class="lineno">16518</span>&#160;</div>
<div class="line"><a name="l16519"></a><span class="lineno">16519</span>&#160;  {</div>
<div class="line"><a name="l16520"></a><span class="lineno">16520</span>&#160;    Context::Scope scope(context2);</div>
<div class="line"><a name="l16521"></a><span class="lineno">16521</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16522"></a><span class="lineno">16522</span>&#160;    CheckContextId(object1, 1);</div>
<div class="line"><a name="l16523"></a><span class="lineno">16523</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(func1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16524"></a><span class="lineno">16524</span>&#160;    CheckContextId(func1, 1);</div>
<div class="line"><a name="l16525"></a><span class="lineno">16525</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance1-&gt;CreationContext() == context1);</div>
<div class="line"><a name="l16526"></a><span class="lineno">16526</span>&#160;    CheckContextId(instance1, 1);</div>
<div class="line"><a name="l16527"></a><span class="lineno">16527</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16528"></a><span class="lineno">16528</span>&#160;    CheckContextId(object2, 2);</div>
<div class="line"><a name="l16529"></a><span class="lineno">16529</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(func2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16530"></a><span class="lineno">16530</span>&#160;    CheckContextId(func2, 2);</div>
<div class="line"><a name="l16531"></a><span class="lineno">16531</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance2-&gt;CreationContext() == context2);</div>
<div class="line"><a name="l16532"></a><span class="lineno">16532</span>&#160;    CheckContextId(instance2, 2);</div>
<div class="line"><a name="l16533"></a><span class="lineno">16533</span>&#160;  }</div>
<div class="line"><a name="l16534"></a><span class="lineno">16534</span>&#160;</div>
<div class="line"><a name="l16535"></a><span class="lineno">16535</span>&#160;  context1.Dispose();</div>
<div class="line"><a name="l16536"></a><span class="lineno">16536</span>&#160;  context2.Dispose();</div>
<div class="line"><a name="l16537"></a><span class="lineno">16537</span>&#160;  context3.Dispose();</div>
<div class="line"><a name="l16538"></a><span class="lineno">16538</span>&#160;}</div>
<div class="line"><a name="l16539"></a><span class="lineno">16539</span>&#160;</div>
<div class="line"><a name="l16540"></a><span class="lineno">16540</span>&#160;</div>
<div class="line"><a name="l16541"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac617217aec165007ce1e118b8649b940">16541</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CreationContextOfJsFunction) {</div>
<div class="line"><a name="l16542"></a><span class="lineno">16542</span>&#160;  HandleScope handle_scope;</div>
<div class="line"><a name="l16543"></a><span class="lineno">16543</span>&#160;  Persistent&lt;Context&gt; context = Context::New();</div>
<div class="line"><a name="l16544"></a><span class="lineno">16544</span>&#160;  InstallContextId(context, 1);</div>
<div class="line"><a name="l16545"></a><span class="lineno">16545</span>&#160;</div>
<div class="line"><a name="l16546"></a><span class="lineno">16546</span>&#160;  Local&lt;Object&gt; <span class="keyword">function</span>;</div>
<div class="line"><a name="l16547"></a><span class="lineno">16547</span>&#160;  {</div>
<div class="line"><a name="l16548"></a><span class="lineno">16548</span>&#160;    Context::Scope scope(context);</div>
<div class="line"><a name="l16549"></a><span class="lineno">16549</span>&#160;    <span class="keyword">function</span> = CompileRun(<span class="stringliteral">&quot;function foo() {}; foo&quot;</span>).As&lt;<a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">Object</a>&gt;();</div>
<div class="line"><a name="l16550"></a><span class="lineno">16550</span>&#160;  }</div>
<div class="line"><a name="l16551"></a><span class="lineno">16551</span>&#160;</div>
<div class="line"><a name="l16552"></a><span class="lineno">16552</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(function-&gt;CreationContext() == context);</div>
<div class="line"><a name="l16553"></a><span class="lineno">16553</span>&#160;  CheckContextId(<span class="keyword">function</span>, 1);</div>
<div class="line"><a name="l16554"></a><span class="lineno">16554</span>&#160;</div>
<div class="line"><a name="l16555"></a><span class="lineno">16555</span>&#160;  context.Dispose();</div>
<div class="line"><a name="l16556"></a><span class="lineno">16556</span>&#160;}</div>
<div class="line"><a name="l16557"></a><span class="lineno">16557</span>&#160;</div>
<div class="line"><a name="l16558"></a><span class="lineno">16558</span>&#160;</div>
<div class="line"><a name="l16559"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a900444ba359f8c57eed32dbd0a0a19a5">16559</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a900444ba359f8c57eed32dbd0a0a19a5">HasOwnPropertyIndexedPropertyGetter</a>(uint32_t index,</div>
<div class="line"><a name="l16560"></a><span class="lineno">16560</span>&#160;                                                  <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l16561"></a><span class="lineno">16561</span>&#160;  <span class="keywordflow">if</span> (index == 42) <span class="keywordflow">return</span> v8_str(<span class="stringliteral">&quot;yes&quot;</span>);</div>
<div class="line"><a name="l16562"></a><span class="lineno">16562</span>&#160;  <span class="keywordflow">return</span> Handle&lt;v8::Integer&gt;();</div>
<div class="line"><a name="l16563"></a><span class="lineno">16563</span>&#160;}</div>
<div class="line"><a name="l16564"></a><span class="lineno">16564</span>&#160;</div>
<div class="line"><a name="l16565"></a><span class="lineno">16565</span>&#160;</div>
<div class="line"><a name="l16566"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a21a0e66c0ef234da74f268a258ebf8d2">16566</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a21a0e66c0ef234da74f268a258ebf8d2">HasOwnPropertyNamedPropertyGetter</a>(Local&lt;String&gt; property,</div>
<div class="line"><a name="l16567"></a><span class="lineno">16567</span>&#160;                                                <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l16568"></a><span class="lineno">16568</span>&#160;  <span class="keywordflow">if</span> (property-&gt;Equals(v8_str(<span class="stringliteral">&quot;foo&quot;</span>))) <span class="keywordflow">return</span> v8_str(<span class="stringliteral">&quot;yes&quot;</span>);</div>
<div class="line"><a name="l16569"></a><span class="lineno">16569</span>&#160;  <span class="keywordflow">return</span> Handle&lt;Value&gt;();</div>
<div class="line"><a name="l16570"></a><span class="lineno">16570</span>&#160;}</div>
<div class="line"><a name="l16571"></a><span class="lineno">16571</span>&#160;</div>
<div class="line"><a name="l16572"></a><span class="lineno">16572</span>&#160;</div>
<div class="line"><a name="l16573"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a04e428788209177a2df97577cfb25634">16573</a></span>&#160;Handle&lt;v8::Integer&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a04e428788209177a2df97577cfb25634">HasOwnPropertyIndexedPropertyQuery</a>(</div>
<div class="line"><a name="l16574"></a><span class="lineno">16574</span>&#160;    uint32_t index, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l16575"></a><span class="lineno">16575</span>&#160;  <span class="keywordflow">if</span> (index == 42) <span class="keywordflow">return</span> v8_num(1).<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../df/d84/classv8_1_1_integer.html">v8::Integer</a>&gt;();</div>
<div class="line"><a name="l16576"></a><span class="lineno">16576</span>&#160;  <span class="keywordflow">return</span> Handle&lt;v8::Integer&gt;();</div>
<div class="line"><a name="l16577"></a><span class="lineno">16577</span>&#160;}</div>
<div class="line"><a name="l16578"></a><span class="lineno">16578</span>&#160;</div>
<div class="line"><a name="l16579"></a><span class="lineno">16579</span>&#160;</div>
<div class="line"><a name="l16580"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aff81a840c1a4167f5cf353f93657a5c0">16580</a></span>&#160;Handle&lt;v8::Integer&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#aff81a840c1a4167f5cf353f93657a5c0">HasOwnPropertyNamedPropertyQuery</a>(</div>
<div class="line"><a name="l16581"></a><span class="lineno">16581</span>&#160;    Local&lt;String&gt; property, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l16582"></a><span class="lineno">16582</span>&#160;  <span class="keywordflow">if</span> (property-&gt;Equals(v8_str(<span class="stringliteral">&quot;foo&quot;</span>))) <span class="keywordflow">return</span> v8_num(1).<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../df/d84/classv8_1_1_integer.html">v8::Integer</a>&gt;();</div>
<div class="line"><a name="l16583"></a><span class="lineno">16583</span>&#160;  <span class="keywordflow">return</span> Handle&lt;v8::Integer&gt;();</div>
<div class="line"><a name="l16584"></a><span class="lineno">16584</span>&#160;}</div>
<div class="line"><a name="l16585"></a><span class="lineno">16585</span>&#160;</div>
<div class="line"><a name="l16586"></a><span class="lineno">16586</span>&#160;</div>
<div class="line"><a name="l16587"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a467d76fc1d18a9a68d2dd6882afe2fd2">16587</a></span>&#160;Handle&lt;v8::Integer&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a467d76fc1d18a9a68d2dd6882afe2fd2">HasOwnPropertyNamedPropertyQuery2</a>(</div>
<div class="line"><a name="l16588"></a><span class="lineno">16588</span>&#160;    Local&lt;String&gt; property, <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l16589"></a><span class="lineno">16589</span>&#160;  <span class="keywordflow">if</span> (property-&gt;Equals(v8_str(<span class="stringliteral">&quot;bar&quot;</span>))) <span class="keywordflow">return</span> v8_num(1).<a class="code" href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">As</a>&lt;<a class="code" href="../../df/d84/classv8_1_1_integer.html">v8::Integer</a>&gt;();</div>
<div class="line"><a name="l16590"></a><span class="lineno">16590</span>&#160;  <span class="keywordflow">return</span> Handle&lt;v8::Integer&gt;();</div>
<div class="line"><a name="l16591"></a><span class="lineno">16591</span>&#160;}</div>
<div class="line"><a name="l16592"></a><span class="lineno">16592</span>&#160;</div>
<div class="line"><a name="l16593"></a><span class="lineno">16593</span>&#160;</div>
<div class="line"><a name="l16594"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a7a4d78675ec5fd928bc5b45c59b7cc95">16594</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#a7a4d78675ec5fd928bc5b45c59b7cc95">HasOwnPropertyAccessorGetter</a>(Local&lt;String&gt; property,</div>
<div class="line"><a name="l16595"></a><span class="lineno">16595</span>&#160;                                           <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l16596"></a><span class="lineno">16596</span>&#160;  <span class="keywordflow">return</span> v8_str(<span class="stringliteral">&quot;yes&quot;</span>);</div>
<div class="line"><a name="l16597"></a><span class="lineno">16597</span>&#160;}</div>
<div class="line"><a name="l16598"></a><span class="lineno">16598</span>&#160;</div>
<div class="line"><a name="l16599"></a><span class="lineno">16599</span>&#160;</div>
<div class="line"><a name="l16600"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9c998c9a3d128cf7f76902ecc72b331e">16600</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(HasOwnProperty) {</div>
<div class="line"><a name="l16601"></a><span class="lineno">16601</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16602"></a><span class="lineno">16602</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l16603"></a><span class="lineno">16603</span>&#160;  { <span class="comment">// Check normal properties and defined getters.</span></div>
<div class="line"><a name="l16604"></a><span class="lineno">16604</span>&#160;    Handle&lt;Value&gt; value = CompileRun(</div>
<div class="line"><a name="l16605"></a><span class="lineno">16605</span>&#160;        <span class="stringliteral">&quot;function Foo() {&quot;</span></div>
<div class="line"><a name="l16606"></a><span class="lineno">16606</span>&#160;        <span class="stringliteral">&quot;    this.foo = 11;&quot;</span></div>
<div class="line"><a name="l16607"></a><span class="lineno">16607</span>&#160;        <span class="stringliteral">&quot;    this.__defineGetter__(&#39;baz&#39;, function() { return 1; });&quot;</span></div>
<div class="line"><a name="l16608"></a><span class="lineno">16608</span>&#160;        <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l16609"></a><span class="lineno">16609</span>&#160;        <span class="stringliteral">&quot;function Bar() { &quot;</span></div>
<div class="line"><a name="l16610"></a><span class="lineno">16610</span>&#160;        <span class="stringliteral">&quot;    this.bar = 13;&quot;</span></div>
<div class="line"><a name="l16611"></a><span class="lineno">16611</span>&#160;        <span class="stringliteral">&quot;    this.__defineGetter__(&#39;bla&#39;, function() { return 2; });&quot;</span></div>
<div class="line"><a name="l16612"></a><span class="lineno">16612</span>&#160;        <span class="stringliteral">&quot;};&quot;</span></div>
<div class="line"><a name="l16613"></a><span class="lineno">16613</span>&#160;        <span class="stringliteral">&quot;Bar.prototype = new Foo();&quot;</span></div>
<div class="line"><a name="l16614"></a><span class="lineno">16614</span>&#160;        <span class="stringliteral">&quot;new Bar();&quot;</span>);</div>
<div class="line"><a name="l16615"></a><span class="lineno">16615</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(value-&gt;IsObject());</div>
<div class="line"><a name="l16616"></a><span class="lineno">16616</span>&#160;    Handle&lt;Object&gt; <span class="keywordtype">object</span> = value-&gt;ToObject();</div>
<div class="line"><a name="l16617"></a><span class="lineno">16617</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object-&gt;Has(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l16618"></a><span class="lineno">16618</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!object-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l16619"></a><span class="lineno">16619</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;bar&quot;</span>)));</div>
<div class="line"><a name="l16620"></a><span class="lineno">16620</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object-&gt;Has(v8_str(<span class="stringliteral">&quot;baz&quot;</span>)));</div>
<div class="line"><a name="l16621"></a><span class="lineno">16621</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!object-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;baz&quot;</span>)));</div>
<div class="line"><a name="l16622"></a><span class="lineno">16622</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(object-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;bla&quot;</span>)));</div>
<div class="line"><a name="l16623"></a><span class="lineno">16623</span>&#160;  }</div>
<div class="line"><a name="l16624"></a><span class="lineno">16624</span>&#160;  { <span class="comment">// Check named getter interceptors.</span></div>
<div class="line"><a name="l16625"></a><span class="lineno">16625</span>&#160;    Handle&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l16626"></a><span class="lineno">16626</span>&#160;    templ-&gt;SetNamedPropertyHandler(<a class="code" href="../../de/d3f/test-api_8cc.html#a21a0e66c0ef234da74f268a258ebf8d2">HasOwnPropertyNamedPropertyGetter</a>);</div>
<div class="line"><a name="l16627"></a><span class="lineno">16627</span>&#160;    Handle&lt;Object&gt; instance = templ-&gt;NewInstance();</div>
<div class="line"><a name="l16628"></a><span class="lineno">16628</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;42&quot;</span>)));</div>
<div class="line"><a name="l16629"></a><span class="lineno">16629</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l16630"></a><span class="lineno">16630</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;bar&quot;</span>)));</div>
<div class="line"><a name="l16631"></a><span class="lineno">16631</span>&#160;  }</div>
<div class="line"><a name="l16632"></a><span class="lineno">16632</span>&#160;  { <span class="comment">// Check indexed getter interceptors.</span></div>
<div class="line"><a name="l16633"></a><span class="lineno">16633</span>&#160;    Handle&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l16634"></a><span class="lineno">16634</span>&#160;    templ-&gt;SetIndexedPropertyHandler(<a class="code" href="../../de/d3f/test-api_8cc.html#a900444ba359f8c57eed32dbd0a0a19a5">HasOwnPropertyIndexedPropertyGetter</a>);</div>
<div class="line"><a name="l16635"></a><span class="lineno">16635</span>&#160;    Handle&lt;Object&gt; instance = templ-&gt;NewInstance();</div>
<div class="line"><a name="l16636"></a><span class="lineno">16636</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;42&quot;</span>)));</div>
<div class="line"><a name="l16637"></a><span class="lineno">16637</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;43&quot;</span>)));</div>
<div class="line"><a name="l16638"></a><span class="lineno">16638</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l16639"></a><span class="lineno">16639</span>&#160;  }</div>
<div class="line"><a name="l16640"></a><span class="lineno">16640</span>&#160;  { <span class="comment">// Check named query interceptors.</span></div>
<div class="line"><a name="l16641"></a><span class="lineno">16641</span>&#160;    Handle&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l16642"></a><span class="lineno">16642</span>&#160;    templ-&gt;SetNamedPropertyHandler(0, 0, <a class="code" href="../../de/d3f/test-api_8cc.html#aff81a840c1a4167f5cf353f93657a5c0">HasOwnPropertyNamedPropertyQuery</a>);</div>
<div class="line"><a name="l16643"></a><span class="lineno">16643</span>&#160;    Handle&lt;Object&gt; instance = templ-&gt;NewInstance();</div>
<div class="line"><a name="l16644"></a><span class="lineno">16644</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l16645"></a><span class="lineno">16645</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;bar&quot;</span>)));</div>
<div class="line"><a name="l16646"></a><span class="lineno">16646</span>&#160;  }</div>
<div class="line"><a name="l16647"></a><span class="lineno">16647</span>&#160;  { <span class="comment">// Check indexed query interceptors.</span></div>
<div class="line"><a name="l16648"></a><span class="lineno">16648</span>&#160;    Handle&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l16649"></a><span class="lineno">16649</span>&#160;    templ-&gt;SetIndexedPropertyHandler(0, 0, <a class="code" href="../../de/d3f/test-api_8cc.html#a04e428788209177a2df97577cfb25634">HasOwnPropertyIndexedPropertyQuery</a>);</div>
<div class="line"><a name="l16650"></a><span class="lineno">16650</span>&#160;    Handle&lt;Object&gt; instance = templ-&gt;NewInstance();</div>
<div class="line"><a name="l16651"></a><span class="lineno">16651</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;42&quot;</span>)));</div>
<div class="line"><a name="l16652"></a><span class="lineno">16652</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;41&quot;</span>)));</div>
<div class="line"><a name="l16653"></a><span class="lineno">16653</span>&#160;  }</div>
<div class="line"><a name="l16654"></a><span class="lineno">16654</span>&#160;  { <span class="comment">// Check callbacks.</span></div>
<div class="line"><a name="l16655"></a><span class="lineno">16655</span>&#160;    Handle&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l16656"></a><span class="lineno">16656</span>&#160;    templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;foo&quot;</span>), <a class="code" href="../../de/d3f/test-api_8cc.html#a7a4d78675ec5fd928bc5b45c59b7cc95">HasOwnPropertyAccessorGetter</a>);</div>
<div class="line"><a name="l16657"></a><span class="lineno">16657</span>&#160;    Handle&lt;Object&gt; instance = templ-&gt;NewInstance();</div>
<div class="line"><a name="l16658"></a><span class="lineno">16658</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l16659"></a><span class="lineno">16659</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;bar&quot;</span>)));</div>
<div class="line"><a name="l16660"></a><span class="lineno">16660</span>&#160;  }</div>
<div class="line"><a name="l16661"></a><span class="lineno">16661</span>&#160;  { <span class="comment">// Check that query wins on disagreement.</span></div>
<div class="line"><a name="l16662"></a><span class="lineno">16662</span>&#160;    Handle&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l16663"></a><span class="lineno">16663</span>&#160;    templ-&gt;SetNamedPropertyHandler(<a class="code" href="../../de/d3f/test-api_8cc.html#a21a0e66c0ef234da74f268a258ebf8d2">HasOwnPropertyNamedPropertyGetter</a>,</div>
<div class="line"><a name="l16664"></a><span class="lineno">16664</span>&#160;                                   0,</div>
<div class="line"><a name="l16665"></a><span class="lineno">16665</span>&#160;                                   <a class="code" href="../../de/d3f/test-api_8cc.html#a467d76fc1d18a9a68d2dd6882afe2fd2">HasOwnPropertyNamedPropertyQuery2</a>);</div>
<div class="line"><a name="l16666"></a><span class="lineno">16666</span>&#160;    Handle&lt;Object&gt; instance = templ-&gt;NewInstance();</div>
<div class="line"><a name="l16667"></a><span class="lineno">16667</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;foo&quot;</span>)));</div>
<div class="line"><a name="l16668"></a><span class="lineno">16668</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(instance-&gt;HasOwnProperty(v8_str(<span class="stringliteral">&quot;bar&quot;</span>)));</div>
<div class="line"><a name="l16669"></a><span class="lineno">16669</span>&#160;  }</div>
<div class="line"><a name="l16670"></a><span class="lineno">16670</span>&#160;}</div>
<div class="line"><a name="l16671"></a><span class="lineno">16671</span>&#160;</div>
<div class="line"><a name="l16672"></a><span class="lineno">16672</span>&#160;</div>
<div class="line"><a name="l16673"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a843a714409489fd5ffe09872d5ebfa1e">16673</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a843a714409489fd5ffe09872d5ebfa1e">CheckCodeGenerationAllowed</a>() {</div>
<div class="line"><a name="l16674"></a><span class="lineno">16674</span>&#160;  Handle&lt;Value&gt; result = CompileRun(<span class="stringliteral">&quot;eval(&#39;42&#39;)&quot;</span>);</div>
<div class="line"><a name="l16675"></a><span class="lineno">16675</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, result-&gt;Int32Value());</div>
<div class="line"><a name="l16676"></a><span class="lineno">16676</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;(function(e) { return e(&#39;42&#39;); })(eval)&quot;</span>);</div>
<div class="line"><a name="l16677"></a><span class="lineno">16677</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, result-&gt;Int32Value());</div>
<div class="line"><a name="l16678"></a><span class="lineno">16678</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var f = new Function(&#39;return 42&#39;); f()&quot;</span>);</div>
<div class="line"><a name="l16679"></a><span class="lineno">16679</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(42, result-&gt;Int32Value());</div>
<div class="line"><a name="l16680"></a><span class="lineno">16680</span>&#160;}</div>
<div class="line"><a name="l16681"></a><span class="lineno">16681</span>&#160;</div>
<div class="line"><a name="l16682"></a><span class="lineno">16682</span>&#160;</div>
<div class="line"><a name="l16683"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a251b1156c3ed03514b4c37dc7561dfd1">16683</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a251b1156c3ed03514b4c37dc7561dfd1">CheckCodeGenerationDisallowed</a>() {</div>
<div class="line"><a name="l16684"></a><span class="lineno">16684</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l16685"></a><span class="lineno">16685</span>&#160;</div>
<div class="line"><a name="l16686"></a><span class="lineno">16686</span>&#160;  Handle&lt;Value&gt; result = CompileRun(<span class="stringliteral">&quot;eval(&#39;42&#39;)&quot;</span>);</div>
<div class="line"><a name="l16687"></a><span class="lineno">16687</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l16688"></a><span class="lineno">16688</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l16689"></a><span class="lineno">16689</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l16690"></a><span class="lineno">16690</span>&#160;</div>
<div class="line"><a name="l16691"></a><span class="lineno">16691</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;(function(e) { return e(&#39;42&#39;); })(eval)&quot;</span>);</div>
<div class="line"><a name="l16692"></a><span class="lineno">16692</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l16693"></a><span class="lineno">16693</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l16694"></a><span class="lineno">16694</span>&#160;  try_catch.Reset();</div>
<div class="line"><a name="l16695"></a><span class="lineno">16695</span>&#160;</div>
<div class="line"><a name="l16696"></a><span class="lineno">16696</span>&#160;  result = CompileRun(<span class="stringliteral">&quot;var f = new Function(&#39;return 42&#39;); f()&quot;</span>);</div>
<div class="line"><a name="l16697"></a><span class="lineno">16697</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l16698"></a><span class="lineno">16698</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l16699"></a><span class="lineno">16699</span>&#160;}</div>
<div class="line"><a name="l16700"></a><span class="lineno">16700</span>&#160;</div>
<div class="line"><a name="l16701"></a><span class="lineno">16701</span>&#160;</div>
<div class="line"><a name="l16702"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa1e310a465c6bd7606ba13ea1ab2288c">16702</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3f/test-api_8cc.html#aa1e310a465c6bd7606ba13ea1ab2288c">CodeGenerationAllowed</a>(Local&lt;Context&gt; context) {</div>
<div class="line"><a name="l16703"></a><span class="lineno">16703</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l16704"></a><span class="lineno">16704</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l16705"></a><span class="lineno">16705</span>&#160;}</div>
<div class="line"><a name="l16706"></a><span class="lineno">16706</span>&#160;</div>
<div class="line"><a name="l16707"></a><span class="lineno">16707</span>&#160;</div>
<div class="line"><a name="l16708"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1d4bfdc412a78cde700cc9d618baa139">16708</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a1d4bfdc412a78cde700cc9d618baa139">CodeGenerationDisallowed</a>(Local&lt;Context&gt; context) {</div>
<div class="line"><a name="l16709"></a><span class="lineno">16709</span>&#160;  <a class="code" href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a>();</div>
<div class="line"><a name="l16710"></a><span class="lineno">16710</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l16711"></a><span class="lineno">16711</span>&#160;}</div>
<div class="line"><a name="l16712"></a><span class="lineno">16712</span>&#160;</div>
<div class="line"><a name="l16713"></a><span class="lineno">16713</span>&#160;</div>
<div class="line"><a name="l16714"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ada7f25ed77048404408030fb4d288daf">16714</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(AllowCodeGenFromStrings) {</div>
<div class="line"><a name="l16715"></a><span class="lineno">16715</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16716"></a><span class="lineno">16716</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16717"></a><span class="lineno">16717</span>&#160;</div>
<div class="line"><a name="l16718"></a><span class="lineno">16718</span>&#160;  <span class="comment">// eval and the Function constructor allowed by default.</span></div>
<div class="line"><a name="l16719"></a><span class="lineno">16719</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a2ffa51c49f7820186966d6d3402b6d58">IsCodeGenerationFromStringsAllowed</a>());</div>
<div class="line"><a name="l16720"></a><span class="lineno">16720</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a843a714409489fd5ffe09872d5ebfa1e">CheckCodeGenerationAllowed</a>();</div>
<div class="line"><a name="l16721"></a><span class="lineno">16721</span>&#160;</div>
<div class="line"><a name="l16722"></a><span class="lineno">16722</span>&#160;  <span class="comment">// Disallow eval and the Function constructor.</span></div>
<div class="line"><a name="l16723"></a><span class="lineno">16723</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#ab67376a3a3c63a23aaa6fba85d120526">AllowCodeGenerationFromStrings</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l16724"></a><span class="lineno">16724</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a2ffa51c49f7820186966d6d3402b6d58">IsCodeGenerationFromStringsAllowed</a>());</div>
<div class="line"><a name="l16725"></a><span class="lineno">16725</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a251b1156c3ed03514b4c37dc7561dfd1">CheckCodeGenerationDisallowed</a>();</div>
<div class="line"><a name="l16726"></a><span class="lineno">16726</span>&#160;</div>
<div class="line"><a name="l16727"></a><span class="lineno">16727</span>&#160;  <span class="comment">// Allow again.</span></div>
<div class="line"><a name="l16728"></a><span class="lineno">16728</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#ab67376a3a3c63a23aaa6fba85d120526">AllowCodeGenerationFromStrings</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l16729"></a><span class="lineno">16729</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a843a714409489fd5ffe09872d5ebfa1e">CheckCodeGenerationAllowed</a>();</div>
<div class="line"><a name="l16730"></a><span class="lineno">16730</span>&#160;</div>
<div class="line"><a name="l16731"></a><span class="lineno">16731</span>&#160;  <span class="comment">// Disallow but setting a global callback that will allow the calls.</span></div>
<div class="line"><a name="l16732"></a><span class="lineno">16732</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#ab67376a3a3c63a23aaa6fba85d120526">AllowCodeGenerationFromStrings</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l16733"></a><span class="lineno">16733</span>&#160;  V8::SetAllowCodeGenerationFromStringsCallback(&amp;<a class="code" href="../../de/d3f/test-api_8cc.html#aa1e310a465c6bd7606ba13ea1ab2288c">CodeGenerationAllowed</a>);</div>
<div class="line"><a name="l16734"></a><span class="lineno">16734</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a2ffa51c49f7820186966d6d3402b6d58">IsCodeGenerationFromStringsAllowed</a>());</div>
<div class="line"><a name="l16735"></a><span class="lineno">16735</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a843a714409489fd5ffe09872d5ebfa1e">CheckCodeGenerationAllowed</a>();</div>
<div class="line"><a name="l16736"></a><span class="lineno">16736</span>&#160;</div>
<div class="line"><a name="l16737"></a><span class="lineno">16737</span>&#160;  <span class="comment">// Set a callback that disallows the code generation.</span></div>
<div class="line"><a name="l16738"></a><span class="lineno">16738</span>&#160;  V8::SetAllowCodeGenerationFromStringsCallback(&amp;<a class="code" href="../../de/d3f/test-api_8cc.html#a1d4bfdc412a78cde700cc9d618baa139">CodeGenerationDisallowed</a>);</div>
<div class="line"><a name="l16739"></a><span class="lineno">16739</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a2ffa51c49f7820186966d6d3402b6d58">IsCodeGenerationFromStringsAllowed</a>());</div>
<div class="line"><a name="l16740"></a><span class="lineno">16740</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#a251b1156c3ed03514b4c37dc7561dfd1">CheckCodeGenerationDisallowed</a>();</div>
<div class="line"><a name="l16741"></a><span class="lineno">16741</span>&#160;}</div>
<div class="line"><a name="l16742"></a><span class="lineno">16742</span>&#160;</div>
<div class="line"><a name="l16743"></a><span class="lineno">16743</span>&#160;</div>
<div class="line"><a name="l16744"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a8bfa366e5b3684e2d4235b67462e5d84">16744</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(SetErrorMessageForCodeGenFromStrings) {</div>
<div class="line"><a name="l16745"></a><span class="lineno">16745</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16746"></a><span class="lineno">16746</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16747"></a><span class="lineno">16747</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l16748"></a><span class="lineno">16748</span>&#160;</div>
<div class="line"><a name="l16749"></a><span class="lineno">16749</span>&#160;  Handle&lt;String&gt; message = v8_str(<span class="stringliteral">&quot;Message&quot;</span>) ;</div>
<div class="line"><a name="l16750"></a><span class="lineno">16750</span>&#160;  Handle&lt;String&gt; expected_message = v8_str(<span class="stringliteral">&quot;Uncaught EvalError: Message&quot;</span>);</div>
<div class="line"><a name="l16751"></a><span class="lineno">16751</span>&#160;  V8::SetAllowCodeGenerationFromStringsCallback(&amp;<a class="code" href="../../de/d3f/test-api_8cc.html#a1d4bfdc412a78cde700cc9d618baa139">CodeGenerationDisallowed</a>);</div>
<div class="line"><a name="l16752"></a><span class="lineno">16752</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#ab67376a3a3c63a23aaa6fba85d120526">AllowCodeGenerationFromStrings</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l16753"></a><span class="lineno">16753</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a030cfe00df6406e6a4a9140e1e3b2bb0">SetErrorMessageForCodeGenerationFromStrings</a>(message);</div>
<div class="line"><a name="l16754"></a><span class="lineno">16754</span>&#160;  Handle&lt;Value&gt; result = CompileRun(<span class="stringliteral">&quot;eval(&#39;42&#39;)&quot;</span>);</div>
<div class="line"><a name="l16755"></a><span class="lineno">16755</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result.IsEmpty());</div>
<div class="line"><a name="l16756"></a><span class="lineno">16756</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l16757"></a><span class="lineno">16757</span>&#160;  Handle&lt;String&gt; actual_message = try_catch.Message()-&gt;Get();</div>
<div class="line"><a name="l16758"></a><span class="lineno">16758</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(expected_message-&gt;Equals(actual_message));</div>
<div class="line"><a name="l16759"></a><span class="lineno">16759</span>&#160;}</div>
<div class="line"><a name="l16760"></a><span class="lineno">16760</span>&#160;</div>
<div class="line"><a name="l16761"></a><span class="lineno">16761</span>&#160;</div>
<div class="line"><a name="l16762"></a><span class="lineno">16762</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> NonObjectThis(<span class="keyword">const</span> <a class="code" href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a>&amp; args) {</div>
<div class="line"><a name="l16763"></a><span class="lineno">16763</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>();</div>
<div class="line"><a name="l16764"></a><span class="lineno">16764</span>&#160;}</div>
<div class="line"><a name="l16765"></a><span class="lineno">16765</span>&#160;</div>
<div class="line"><a name="l16766"></a><span class="lineno">16766</span>&#160;</div>
<div class="line"><a name="l16767"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa4685d14788eabb759cfd3375fe554a4">16767</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(CallAPIFunctionOnNonObject) {</div>
<div class="line"><a name="l16768"></a><span class="lineno">16768</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16769"></a><span class="lineno">16769</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16770"></a><span class="lineno">16770</span>&#160;  Handle&lt;FunctionTemplate&gt; templ = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(NonObjectThis);</div>
<div class="line"><a name="l16771"></a><span class="lineno">16771</span>&#160;  Handle&lt;Function&gt; <span class="keyword">function</span> = templ-&gt;GetFunction();</div>
<div class="line"><a name="l16772"></a><span class="lineno">16772</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>), <span class="keyword">function</span>);</div>
<div class="line"><a name="l16773"></a><span class="lineno">16773</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l16774"></a><span class="lineno">16774</span>&#160;  CompileRun(<span class="stringliteral">&quot;f.call(2)&quot;</span>);</div>
<div class="line"><a name="l16775"></a><span class="lineno">16775</span>&#160;}</div>
<div class="line"><a name="l16776"></a><span class="lineno">16776</span>&#160;</div>
<div class="line"><a name="l16777"></a><span class="lineno">16777</span>&#160;</div>
<div class="line"><a name="l16778"></a><span class="lineno">16778</span>&#160;<span class="comment">// Regression test for issue 1470.</span></div>
<div class="line"><a name="l16779"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aef3dfffe46740e6099b0608d29111c17">16779</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ReadOnlyIndexedProperties) {</div>
<div class="line"><a name="l16780"></a><span class="lineno">16780</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16781"></a><span class="lineno">16781</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l16782"></a><span class="lineno">16782</span>&#160;</div>
<div class="line"><a name="l16783"></a><span class="lineno">16783</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16784"></a><span class="lineno">16784</span>&#160;  Local&lt;v8::Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l16785"></a><span class="lineno">16785</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), obj);</div>
<div class="line"><a name="l16786"></a><span class="lineno">16786</span>&#160;  obj-&gt;Set(v8_str(<span class="stringliteral">&quot;1&quot;</span>), v8_str(<span class="stringliteral">&quot;DONT_CHANGE&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l16787"></a><span class="lineno">16787</span>&#160;  obj-&gt;Set(v8_str(<span class="stringliteral">&quot;1&quot;</span>), v8_str(<span class="stringliteral">&quot;foobar&quot;</span>));</div>
<div class="line"><a name="l16788"></a><span class="lineno">16788</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;DONT_CHANGE&quot;</span>), obj-&gt;Get(v8_str(<span class="stringliteral">&quot;1&quot;</span>)));</div>
<div class="line"><a name="l16789"></a><span class="lineno">16789</span>&#160;  obj-&gt;Set(v8_num(2), v8_str(<span class="stringliteral">&quot;DONT_CHANGE&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l16790"></a><span class="lineno">16790</span>&#160;  obj-&gt;Set(v8_num(2), v8_str(<span class="stringliteral">&quot;foobar&quot;</span>));</div>
<div class="line"><a name="l16791"></a><span class="lineno">16791</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;DONT_CHANGE&quot;</span>), obj-&gt;Get(v8_num(2)));</div>
<div class="line"><a name="l16792"></a><span class="lineno">16792</span>&#160;</div>
<div class="line"><a name="l16793"></a><span class="lineno">16793</span>&#160;  <span class="comment">// Test non-smi case.</span></div>
<div class="line"><a name="l16794"></a><span class="lineno">16794</span>&#160;  obj-&gt;Set(v8_str(<span class="stringliteral">&quot;2000000000&quot;</span>), v8_str(<span class="stringliteral">&quot;DONT_CHANGE&quot;</span>), <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a>);</div>
<div class="line"><a name="l16795"></a><span class="lineno">16795</span>&#160;  obj-&gt;Set(v8_str(<span class="stringliteral">&quot;2000000000&quot;</span>), v8_str(<span class="stringliteral">&quot;foobar&quot;</span>));</div>
<div class="line"><a name="l16796"></a><span class="lineno">16796</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(v8_str(<span class="stringliteral">&quot;DONT_CHANGE&quot;</span>), obj-&gt;Get(v8_str(<span class="stringliteral">&quot;2000000000&quot;</span>)));</div>
<div class="line"><a name="l16797"></a><span class="lineno">16797</span>&#160;}</div>
<div class="line"><a name="l16798"></a><span class="lineno">16798</span>&#160;</div>
<div class="line"><a name="l16799"></a><span class="lineno">16799</span>&#160;</div>
<div class="line"><a name="l16800"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a250409c95f76a72cb82335d36fded2ce">16800</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress1516) {</div>
<div class="line"><a name="l16801"></a><span class="lineno">16801</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16802"></a><span class="lineno">16802</span>&#160;</div>
<div class="line"><a name="l16803"></a><span class="lineno">16803</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16804"></a><span class="lineno">16804</span>&#160;  { <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> temp_scope;</div>
<div class="line"><a name="l16805"></a><span class="lineno">16805</span>&#160;    CompileRun(<span class="stringliteral">&quot;({&#39;a&#39;: 0})&quot;</span>);</div>
<div class="line"><a name="l16806"></a><span class="lineno">16806</span>&#160;  }</div>
<div class="line"><a name="l16807"></a><span class="lineno">16807</span>&#160;</div>
<div class="line"><a name="l16808"></a><span class="lineno">16808</span>&#160;  <span class="keywordtype">int</span> elements;</div>
<div class="line"><a name="l16809"></a><span class="lineno">16809</span>&#160;  { <a class="code" href="../../de/d42/classv8_1_1internal_1_1_map_cache.html">i::MapCache</a>* map_cache =</div>
<div class="line"><a name="l16810"></a><span class="lineno">16810</span>&#160;        <a class="code" href="../../de/d42/classv8_1_1internal_1_1_map_cache.html#ac480767f3d6cb0b39867907faf8c632d">i::MapCache::cast</a>(i::Isolate::Current()-&gt;context()-&gt;map_cache());</div>
<div class="line"><a name="l16811"></a><span class="lineno">16811</span>&#160;    elements = map_cache-&gt;<a class="code" href="../../d2/d7f/classv8_1_1internal_1_1_hash_table.html#a00adcfc64fff038263c5fdb49b72ada7">NumberOfElements</a>();</div>
<div class="line"><a name="l16812"></a><span class="lineno">16812</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a90b329b303c3a01760b7ad27fe92733f">CHECK_LE</a>(1, elements);</div>
<div class="line"><a name="l16813"></a><span class="lineno">16813</span>&#160;  }</div>
<div class="line"><a name="l16814"></a><span class="lineno">16814</span>&#160;</div>
<div class="line"><a name="l16815"></a><span class="lineno">16815</span>&#160;  i::Isolate::Current()-&gt;heap()-&gt;CollectAllGarbage(</div>
<div class="line"><a name="l16816"></a><span class="lineno">16816</span>&#160;      <a class="code" href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">i::Heap::kAbortIncrementalMarkingMask</a>);</div>
<div class="line"><a name="l16817"></a><span class="lineno">16817</span>&#160;  { <a class="code" href="../../d8/df0/classv8_1_1internal_1_1_object.html">i::Object</a>* raw_map_cache = i::Isolate::Current()-&gt;context()-&gt;map_cache();</div>
<div class="line"><a name="l16818"></a><span class="lineno">16818</span>&#160;    <span class="keywordflow">if</span> (raw_map_cache != i::Isolate::Current()-&gt;heap()-&gt;undefined_value()) {</div>
<div class="line"><a name="l16819"></a><span class="lineno">16819</span>&#160;      <a class="code" href="../../de/d42/classv8_1_1internal_1_1_map_cache.html">i::MapCache</a>* map_cache = <a class="code" href="../../de/d42/classv8_1_1internal_1_1_map_cache.html#ac480767f3d6cb0b39867907faf8c632d">i::MapCache::cast</a>(raw_map_cache);</div>
<div class="line"><a name="l16820"></a><span class="lineno">16820</span>&#160;      <a class="code" href="../../d5/d16/checks_8h.html#ad5a1a3bc35696ef5a1070bca3a419c99">CHECK_GT</a>(elements, map_cache-&gt;<a class="code" href="../../d2/d7f/classv8_1_1internal_1_1_hash_table.html#a00adcfc64fff038263c5fdb49b72ada7">NumberOfElements</a>());</div>
<div class="line"><a name="l16821"></a><span class="lineno">16821</span>&#160;    }</div>
<div class="line"><a name="l16822"></a><span class="lineno">16822</span>&#160;  }</div>
<div class="line"><a name="l16823"></a><span class="lineno">16823</span>&#160;}</div>
<div class="line"><a name="l16824"></a><span class="lineno">16824</span>&#160;</div>
<div class="line"><a name="l16825"></a><span class="lineno">16825</span>&#160;</div>
<div class="line"><a name="l16826"></a><span class="lineno">16826</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> BlockProtoNamedSecurityTestCallback(Local&lt;v8::Object&gt; global,</div>
<div class="line"><a name="l16827"></a><span class="lineno">16827</span>&#160;                                                Local&lt;Value&gt; name,</div>
<div class="line"><a name="l16828"></a><span class="lineno">16828</span>&#160;                                                <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a> type,</div>
<div class="line"><a name="l16829"></a><span class="lineno">16829</span>&#160;                                                Local&lt;Value&gt; data) {</div>
<div class="line"><a name="l16830"></a><span class="lineno">16830</span>&#160;  <span class="comment">// Only block read access to __proto__.</span></div>
<div class="line"><a name="l16831"></a><span class="lineno">16831</span>&#160;  <span class="keywordflow">if</span> (type == <a class="code" href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a> &amp;&amp;</div>
<div class="line"><a name="l16832"></a><span class="lineno">16832</span>&#160;      name-&gt;IsString() &amp;&amp;</div>
<div class="line"><a name="l16833"></a><span class="lineno">16833</span>&#160;      name-&gt;ToString()-&gt;Length() == 9 &amp;&amp;</div>
<div class="line"><a name="l16834"></a><span class="lineno">16834</span>&#160;      name-&gt;ToString()-&gt;Utf8Length() == 9) {</div>
<div class="line"><a name="l16835"></a><span class="lineno">16835</span>&#160;    <span class="keywordtype">char</span> buffer[10];</div>
<div class="line"><a name="l16836"></a><span class="lineno">16836</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(10, name-&gt;ToString()-&gt;WriteUtf8(buffer));</div>
<div class="line"><a name="l16837"></a><span class="lineno">16837</span>&#160;    <span class="keywordflow">return</span> strncmp(buffer, <span class="stringliteral">&quot;__proto__&quot;</span>, 9) != 0;</div>
<div class="line"><a name="l16838"></a><span class="lineno">16838</span>&#160;  }</div>
<div class="line"><a name="l16839"></a><span class="lineno">16839</span>&#160;</div>
<div class="line"><a name="l16840"></a><span class="lineno">16840</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l16841"></a><span class="lineno">16841</span>&#160;}</div>
<div class="line"><a name="l16842"></a><span class="lineno">16842</span>&#160;</div>
<div class="line"><a name="l16843"></a><span class="lineno">16843</span>&#160;</div>
<div class="line"><a name="l16844"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac9c7c486c2e0af4c3fb05de9f3bd8e6a">16844</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress93759) {</div>
<div class="line"><a name="l16845"></a><span class="lineno">16845</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l16846"></a><span class="lineno">16846</span>&#160;</div>
<div class="line"><a name="l16847"></a><span class="lineno">16847</span>&#160;  <span class="comment">// Template for object with security check.</span></div>
<div class="line"><a name="l16848"></a><span class="lineno">16848</span>&#160;  Local&lt;ObjectTemplate&gt; no_proto_template = <a class="code" href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a>();</div>
<div class="line"><a name="l16849"></a><span class="lineno">16849</span>&#160;  <span class="comment">// We don&#39;t do indexing, so any callback can be used for that.</span></div>
<div class="line"><a name="l16850"></a><span class="lineno">16850</span>&#160;  no_proto_template-&gt;SetAccessCheckCallbacks(</div>
<div class="line"><a name="l16851"></a><span class="lineno">16851</span>&#160;      BlockProtoNamedSecurityTestCallback,</div>
<div class="line"><a name="l16852"></a><span class="lineno">16852</span>&#160;      IndexedSecurityTestCallback);</div>
<div class="line"><a name="l16853"></a><span class="lineno">16853</span>&#160;</div>
<div class="line"><a name="l16854"></a><span class="lineno">16854</span>&#160;  <span class="comment">// Templates for objects with hidden prototypes and possibly security check.</span></div>
<div class="line"><a name="l16855"></a><span class="lineno">16855</span>&#160;  Local&lt;FunctionTemplate&gt; hidden_proto_template = <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l16856"></a><span class="lineno">16856</span>&#160;  hidden_proto_template-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l16857"></a><span class="lineno">16857</span>&#160;</div>
<div class="line"><a name="l16858"></a><span class="lineno">16858</span>&#160;  Local&lt;FunctionTemplate&gt; protected_hidden_proto_template =</div>
<div class="line"><a name="l16859"></a><span class="lineno">16859</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>();</div>
<div class="line"><a name="l16860"></a><span class="lineno">16860</span>&#160;  protected_hidden_proto_template-&gt;InstanceTemplate()-&gt;SetAccessCheckCallbacks(</div>
<div class="line"><a name="l16861"></a><span class="lineno">16861</span>&#160;      BlockProtoNamedSecurityTestCallback,</div>
<div class="line"><a name="l16862"></a><span class="lineno">16862</span>&#160;      IndexedSecurityTestCallback);</div>
<div class="line"><a name="l16863"></a><span class="lineno">16863</span>&#160;  protected_hidden_proto_template-&gt;SetHiddenPrototype(<span class="keyword">true</span>);</div>
<div class="line"><a name="l16864"></a><span class="lineno">16864</span>&#160;</div>
<div class="line"><a name="l16865"></a><span class="lineno">16865</span>&#160;  <span class="comment">// Context for &quot;foreign&quot; objects used in test.</span></div>
<div class="line"><a name="l16866"></a><span class="lineno">16866</span>&#160;  Persistent&lt;Context&gt; context = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l16867"></a><span class="lineno">16867</span>&#160;  context-&gt;Enter();</div>
<div class="line"><a name="l16868"></a><span class="lineno">16868</span>&#160;</div>
<div class="line"><a name="l16869"></a><span class="lineno">16869</span>&#160;  <span class="comment">// Plain object, no security check.</span></div>
<div class="line"><a name="l16870"></a><span class="lineno">16870</span>&#160;  Local&lt;Object&gt; simple_object = Object::New();</div>
<div class="line"><a name="l16871"></a><span class="lineno">16871</span>&#160;</div>
<div class="line"><a name="l16872"></a><span class="lineno">16872</span>&#160;  <span class="comment">// Object with explicit security check.</span></div>
<div class="line"><a name="l16873"></a><span class="lineno">16873</span>&#160;  Local&lt;Object&gt; protected_object =</div>
<div class="line"><a name="l16874"></a><span class="lineno">16874</span>&#160;      no_proto_template-&gt;NewInstance();</div>
<div class="line"><a name="l16875"></a><span class="lineno">16875</span>&#160;</div>
<div class="line"><a name="l16876"></a><span class="lineno">16876</span>&#160;  <span class="comment">// JSGlobalProxy object, always have security check.</span></div>
<div class="line"><a name="l16877"></a><span class="lineno">16877</span>&#160;  Local&lt;Object&gt; proxy_object =</div>
<div class="line"><a name="l16878"></a><span class="lineno">16878</span>&#160;      context-&gt;Global();</div>
<div class="line"><a name="l16879"></a><span class="lineno">16879</span>&#160;</div>
<div class="line"><a name="l16880"></a><span class="lineno">16880</span>&#160;  <span class="comment">// Global object, the  prototype of proxy_object. No security checks.</span></div>
<div class="line"><a name="l16881"></a><span class="lineno">16881</span>&#160;  Local&lt;Object&gt; global_object =</div>
<div class="line"><a name="l16882"></a><span class="lineno">16882</span>&#160;      proxy_object-&gt;GetPrototype()-&gt;ToObject();</div>
<div class="line"><a name="l16883"></a><span class="lineno">16883</span>&#160;</div>
<div class="line"><a name="l16884"></a><span class="lineno">16884</span>&#160;  <span class="comment">// Hidden prototype without security check.</span></div>
<div class="line"><a name="l16885"></a><span class="lineno">16885</span>&#160;  Local&lt;Object&gt; <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#a3de4b929d8b0f9504e0452c9ccacc78c">hidden_prototype</a> =</div>
<div class="line"><a name="l16886"></a><span class="lineno">16886</span>&#160;      hidden_proto_template-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l16887"></a><span class="lineno">16887</span>&#160;  Local&lt;Object&gt; object_with_hidden =</div>
<div class="line"><a name="l16888"></a><span class="lineno">16888</span>&#160;    Object::New();</div>
<div class="line"><a name="l16889"></a><span class="lineno">16889</span>&#160;  object_with_hidden-&gt;SetPrototype(hidden_prototype);</div>
<div class="line"><a name="l16890"></a><span class="lineno">16890</span>&#160;</div>
<div class="line"><a name="l16891"></a><span class="lineno">16891</span>&#160;  <span class="comment">// Hidden prototype with security check on the hidden prototype.</span></div>
<div class="line"><a name="l16892"></a><span class="lineno">16892</span>&#160;  Local&lt;Object&gt; protected_hidden_prototype =</div>
<div class="line"><a name="l16893"></a><span class="lineno">16893</span>&#160;      protected_hidden_proto_template-&gt;GetFunction()-&gt;NewInstance();</div>
<div class="line"><a name="l16894"></a><span class="lineno">16894</span>&#160;  Local&lt;Object&gt; object_with_protected_hidden =</div>
<div class="line"><a name="l16895"></a><span class="lineno">16895</span>&#160;    Object::New();</div>
<div class="line"><a name="l16896"></a><span class="lineno">16896</span>&#160;  object_with_protected_hidden-&gt;SetPrototype(protected_hidden_prototype);</div>
<div class="line"><a name="l16897"></a><span class="lineno">16897</span>&#160;</div>
<div class="line"><a name="l16898"></a><span class="lineno">16898</span>&#160;  context-&gt;Exit();</div>
<div class="line"><a name="l16899"></a><span class="lineno">16899</span>&#160;</div>
<div class="line"><a name="l16900"></a><span class="lineno">16900</span>&#160;  <span class="comment">// Template for object for second context. Values to test are put on it as</span></div>
<div class="line"><a name="l16901"></a><span class="lineno">16901</span>&#160;  <span class="comment">// properties.</span></div>
<div class="line"><a name="l16902"></a><span class="lineno">16902</span>&#160;  Local&lt;ObjectTemplate&gt; global_template = ObjectTemplate::New();</div>
<div class="line"><a name="l16903"></a><span class="lineno">16903</span>&#160;  global_template-&gt;Set(v8_str(<span class="stringliteral">&quot;simple&quot;</span>), simple_object);</div>
<div class="line"><a name="l16904"></a><span class="lineno">16904</span>&#160;  global_template-&gt;Set(v8_str(<span class="stringliteral">&quot;protected&quot;</span>), protected_object);</div>
<div class="line"><a name="l16905"></a><span class="lineno">16905</span>&#160;  global_template-&gt;Set(v8_str(<span class="stringliteral">&quot;global&quot;</span>), global_object);</div>
<div class="line"><a name="l16906"></a><span class="lineno">16906</span>&#160;  global_template-&gt;Set(v8_str(<span class="stringliteral">&quot;proxy&quot;</span>), proxy_object);</div>
<div class="line"><a name="l16907"></a><span class="lineno">16907</span>&#160;  global_template-&gt;Set(v8_str(<span class="stringliteral">&quot;hidden&quot;</span>), object_with_hidden);</div>
<div class="line"><a name="l16908"></a><span class="lineno">16908</span>&#160;  global_template-&gt;Set(v8_str(<span class="stringliteral">&quot;phidden&quot;</span>), object_with_protected_hidden);</div>
<div class="line"><a name="l16909"></a><span class="lineno">16909</span>&#160;</div>
<div class="line"><a name="l16910"></a><span class="lineno">16910</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context2(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, global_template);</div>
<div class="line"><a name="l16911"></a><span class="lineno">16911</span>&#160;</div>
<div class="line"><a name="l16912"></a><span class="lineno">16912</span>&#160;  Local&lt;Value&gt; result1 = CompileRun(<span class="stringliteral">&quot;Object.getPrototypeOf(simple)&quot;</span>);</div>
<div class="line"><a name="l16913"></a><span class="lineno">16913</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result1-&gt;Equals(simple_object-&gt;GetPrototype()));</div>
<div class="line"><a name="l16914"></a><span class="lineno">16914</span>&#160;</div>
<div class="line"><a name="l16915"></a><span class="lineno">16915</span>&#160;  Local&lt;Value&gt; result2 = CompileRun(<span class="stringliteral">&quot;Object.getPrototypeOf(protected)&quot;</span>);</div>
<div class="line"><a name="l16916"></a><span class="lineno">16916</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result2-&gt;Equals(<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">Undefined</a>()));</div>
<div class="line"><a name="l16917"></a><span class="lineno">16917</span>&#160;</div>
<div class="line"><a name="l16918"></a><span class="lineno">16918</span>&#160;  Local&lt;Value&gt; result3 = CompileRun(<span class="stringliteral">&quot;Object.getPrototypeOf(global)&quot;</span>);</div>
<div class="line"><a name="l16919"></a><span class="lineno">16919</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result3-&gt;Equals(global_object-&gt;GetPrototype()));</div>
<div class="line"><a name="l16920"></a><span class="lineno">16920</span>&#160;</div>
<div class="line"><a name="l16921"></a><span class="lineno">16921</span>&#160;  Local&lt;Value&gt; result4 = CompileRun(<span class="stringliteral">&quot;Object.getPrototypeOf(proxy)&quot;</span>);</div>
<div class="line"><a name="l16922"></a><span class="lineno">16922</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result4-&gt;Equals(<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">Undefined</a>()));</div>
<div class="line"><a name="l16923"></a><span class="lineno">16923</span>&#160;</div>
<div class="line"><a name="l16924"></a><span class="lineno">16924</span>&#160;  Local&lt;Value&gt; result5 = CompileRun(<span class="stringliteral">&quot;Object.getPrototypeOf(hidden)&quot;</span>);</div>
<div class="line"><a name="l16925"></a><span class="lineno">16925</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result5-&gt;Equals(</div>
<div class="line"><a name="l16926"></a><span class="lineno">16926</span>&#160;      object_with_hidden-&gt;GetPrototype()-&gt;ToObject()-&gt;GetPrototype()));</div>
<div class="line"><a name="l16927"></a><span class="lineno">16927</span>&#160;</div>
<div class="line"><a name="l16928"></a><span class="lineno">16928</span>&#160;  Local&lt;Value&gt; result6 = CompileRun(<span class="stringliteral">&quot;Object.getPrototypeOf(phidden)&quot;</span>);</div>
<div class="line"><a name="l16929"></a><span class="lineno">16929</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result6-&gt;Equals(<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">Undefined</a>()));</div>
<div class="line"><a name="l16930"></a><span class="lineno">16930</span>&#160;</div>
<div class="line"><a name="l16931"></a><span class="lineno">16931</span>&#160;  context.Dispose();</div>
<div class="line"><a name="l16932"></a><span class="lineno">16932</span>&#160;}</div>
<div class="line"><a name="l16933"></a><span class="lineno">16933</span>&#160;</div>
<div class="line"><a name="l16934"></a><span class="lineno">16934</span>&#160;</div>
<div class="line"><a name="l16935"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a11db46522a62887e90367879c5775719">16935</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress125988) {</div>
<div class="line"><a name="l16936"></a><span class="lineno">16936</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l16937"></a><span class="lineno">16937</span>&#160;  Handle&lt;FunctionTemplate&gt; intercept = FunctionTemplate::New();</div>
<div class="line"><a name="l16938"></a><span class="lineno">16938</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(intercept, <a class="code" href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0">EmptyInterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd">EmptyInterceptorSetter</a>);</div>
<div class="line"><a name="l16939"></a><span class="lineno">16939</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l16940"></a><span class="lineno">16940</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Intercept&quot;</span>), intercept-&gt;GetFunction());</div>
<div class="line"><a name="l16941"></a><span class="lineno">16941</span>&#160;  CompileRun(<span class="stringliteral">&quot;var a = new Object();&quot;</span></div>
<div class="line"><a name="l16942"></a><span class="lineno">16942</span>&#160;             <span class="stringliteral">&quot;var b = new Intercept();&quot;</span></div>
<div class="line"><a name="l16943"></a><span class="lineno">16943</span>&#160;             <span class="stringliteral">&quot;var c = new Object();&quot;</span></div>
<div class="line"><a name="l16944"></a><span class="lineno">16944</span>&#160;             <span class="stringliteral">&quot;c.__proto__ = b;&quot;</span></div>
<div class="line"><a name="l16945"></a><span class="lineno">16945</span>&#160;             <span class="stringliteral">&quot;b.__proto__ = a;&quot;</span></div>
<div class="line"><a name="l16946"></a><span class="lineno">16946</span>&#160;             <span class="stringliteral">&quot;a.x = 23;&quot;</span></div>
<div class="line"><a name="l16947"></a><span class="lineno">16947</span>&#160;             <span class="stringliteral">&quot;for (var i = 0; i &lt; 3; i++) c.x;&quot;</span>);</div>
<div class="line"><a name="l16948"></a><span class="lineno">16948</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;c.hasOwnProperty(&#39;x&#39;)&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l16949"></a><span class="lineno">16949</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;c.x&quot;</span>, 23);</div>
<div class="line"><a name="l16950"></a><span class="lineno">16950</span>&#160;  CompileRun(<span class="stringliteral">&quot;a.y = 42;&quot;</span></div>
<div class="line"><a name="l16951"></a><span class="lineno">16951</span>&#160;             <span class="stringliteral">&quot;for (var i = 0; i &lt; 3; i++) c.x;&quot;</span>);</div>
<div class="line"><a name="l16952"></a><span class="lineno">16952</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;c.hasOwnProperty(&#39;x&#39;)&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l16953"></a><span class="lineno">16953</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;c.x&quot;</span>, 23);</div>
<div class="line"><a name="l16954"></a><span class="lineno">16954</span>&#160;  ExpectBoolean(<span class="stringliteral">&quot;c.hasOwnProperty(&#39;y&#39;)&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l16955"></a><span class="lineno">16955</span>&#160;  ExpectInt32(<span class="stringliteral">&quot;c.y&quot;</span>, 42);</div>
<div class="line"><a name="l16956"></a><span class="lineno">16956</span>&#160;}</div>
<div class="line"><a name="l16957"></a><span class="lineno">16957</span>&#160;</div>
<div class="line"><a name="l16958"></a><span class="lineno">16958</span>&#160;</div>
<div class="line"><a name="l16959"></a><span class="lineno">16959</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> TestReceiver(Local&lt;Value&gt; expected_result,</div>
<div class="line"><a name="l16960"></a><span class="lineno">16960</span>&#160;                         Local&lt;Value&gt; expected_receiver,</div>
<div class="line"><a name="l16961"></a><span class="lineno">16961</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span>* code) {</div>
<div class="line"><a name="l16962"></a><span class="lineno">16962</span>&#160;  Local&lt;Value&gt; result = CompileRun(code);</div>
<div class="line"><a name="l16963"></a><span class="lineno">16963</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(result-&gt;IsObject());</div>
<div class="line"><a name="l16964"></a><span class="lineno">16964</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(expected_receiver-&gt;Equals(result-&gt;ToObject()-&gt;Get(1)));</div>
<div class="line"><a name="l16965"></a><span class="lineno">16965</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(expected_result-&gt;Equals(result-&gt;ToObject()-&gt;Get(0)));</div>
<div class="line"><a name="l16966"></a><span class="lineno">16966</span>&#160;}</div>
<div class="line"><a name="l16967"></a><span class="lineno">16967</span>&#160;</div>
<div class="line"><a name="l16968"></a><span class="lineno">16968</span>&#160;</div>
<div class="line"><a name="l16969"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a779f80689b4dd1d2ffb799dd6b1c680a">16969</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(ForeignFunctionReceiver) {</div>
<div class="line"><a name="l16970"></a><span class="lineno">16970</span>&#160;  HandleScope scope;</div>
<div class="line"><a name="l16971"></a><span class="lineno">16971</span>&#160;</div>
<div class="line"><a name="l16972"></a><span class="lineno">16972</span>&#160;  <span class="comment">// Create two contexts with different &quot;id&quot; properties (&#39;i&#39; and &#39;o&#39;).</span></div>
<div class="line"><a name="l16973"></a><span class="lineno">16973</span>&#160;  <span class="comment">// Call a function both from its own context and from a the foreign</span></div>
<div class="line"><a name="l16974"></a><span class="lineno">16974</span>&#160;  <span class="comment">// context, and see what &quot;this&quot; is bound to (returning both &quot;this&quot;</span></div>
<div class="line"><a name="l16975"></a><span class="lineno">16975</span>&#160;  <span class="comment">// and &quot;this.id&quot; for comparison).</span></div>
<div class="line"><a name="l16976"></a><span class="lineno">16976</span>&#160;</div>
<div class="line"><a name="l16977"></a><span class="lineno">16977</span>&#160;  Persistent&lt;Context&gt; foreign_context = <a class="code" href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a>();</div>
<div class="line"><a name="l16978"></a><span class="lineno">16978</span>&#160;  foreign_context-&gt;Enter();</div>
<div class="line"><a name="l16979"></a><span class="lineno">16979</span>&#160;  Local&lt;Value&gt; foreign_function =</div>
<div class="line"><a name="l16980"></a><span class="lineno">16980</span>&#160;    CompileRun(<span class="stringliteral">&quot;function func() { return { 0: this.id, &quot;</span></div>
<div class="line"><a name="l16981"></a><span class="lineno">16981</span>&#160;               <span class="stringliteral">&quot;                           1: this, &quot;</span></div>
<div class="line"><a name="l16982"></a><span class="lineno">16982</span>&#160;               <span class="stringliteral">&quot;                           toString: function() { &quot;</span></div>
<div class="line"><a name="l16983"></a><span class="lineno">16983</span>&#160;               <span class="stringliteral">&quot;                               return this[0];&quot;</span></div>
<div class="line"><a name="l16984"></a><span class="lineno">16984</span>&#160;               <span class="stringliteral">&quot;                           }&quot;</span></div>
<div class="line"><a name="l16985"></a><span class="lineno">16985</span>&#160;               <span class="stringliteral">&quot;                         };&quot;</span></div>
<div class="line"><a name="l16986"></a><span class="lineno">16986</span>&#160;               <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l16987"></a><span class="lineno">16987</span>&#160;               <span class="stringliteral">&quot;var id = &#39;i&#39;;&quot;</span></div>
<div class="line"><a name="l16988"></a><span class="lineno">16988</span>&#160;               <span class="stringliteral">&quot;func;&quot;</span>);</div>
<div class="line"><a name="l16989"></a><span class="lineno">16989</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(foreign_function-&gt;IsFunction());</div>
<div class="line"><a name="l16990"></a><span class="lineno">16990</span>&#160;  foreign_context-&gt;Exit();</div>
<div class="line"><a name="l16991"></a><span class="lineno">16991</span>&#160;</div>
<div class="line"><a name="l16992"></a><span class="lineno">16992</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l16993"></a><span class="lineno">16993</span>&#160;</div>
<div class="line"><a name="l16994"></a><span class="lineno">16994</span>&#160;  Local&lt;String&gt; password = v8_str(<span class="stringliteral">&quot;Password&quot;</span>);</div>
<div class="line"><a name="l16995"></a><span class="lineno">16995</span>&#160;  <span class="comment">// Don&#39;t get hit by security checks when accessing foreign_context&#39;s</span></div>
<div class="line"><a name="l16996"></a><span class="lineno">16996</span>&#160;  <span class="comment">// global receiver (aka. global proxy).</span></div>
<div class="line"><a name="l16997"></a><span class="lineno">16997</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">SetSecurityToken</a>(password);</div>
<div class="line"><a name="l16998"></a><span class="lineno">16998</span>&#160;  foreign_context-&gt;SetSecurityToken(password);</div>
<div class="line"><a name="l16999"></a><span class="lineno">16999</span>&#160;</div>
<div class="line"><a name="l17000"></a><span class="lineno">17000</span>&#160;  Local&lt;String&gt; i = v8_str(<span class="stringliteral">&quot;i&quot;</span>);</div>
<div class="line"><a name="l17001"></a><span class="lineno">17001</span>&#160;  Local&lt;String&gt; o = v8_str(<span class="stringliteral">&quot;o&quot;</span>);</div>
<div class="line"><a name="l17002"></a><span class="lineno">17002</span>&#160;  Local&lt;String&gt; <span class="keywordtype">id</span> = v8_str(<span class="stringliteral">&quot;id&quot;</span>);</div>
<div class="line"><a name="l17003"></a><span class="lineno">17003</span>&#160;</div>
<div class="line"><a name="l17004"></a><span class="lineno">17004</span>&#160;  CompileRun(<span class="stringliteral">&quot;function ownfunc() { return { 0: this.id, &quot;</span></div>
<div class="line"><a name="l17005"></a><span class="lineno">17005</span>&#160;             <span class="stringliteral">&quot;                              1: this, &quot;</span></div>
<div class="line"><a name="l17006"></a><span class="lineno">17006</span>&#160;             <span class="stringliteral">&quot;                              toString: function() { &quot;</span></div>
<div class="line"><a name="l17007"></a><span class="lineno">17007</span>&#160;             <span class="stringliteral">&quot;                                  return this[0];&quot;</span></div>
<div class="line"><a name="l17008"></a><span class="lineno">17008</span>&#160;             <span class="stringliteral">&quot;                              }&quot;</span></div>
<div class="line"><a name="l17009"></a><span class="lineno">17009</span>&#160;             <span class="stringliteral">&quot;                             };&quot;</span></div>
<div class="line"><a name="l17010"></a><span class="lineno">17010</span>&#160;             <span class="stringliteral">&quot;}&quot;</span></div>
<div class="line"><a name="l17011"></a><span class="lineno">17011</span>&#160;             <span class="stringliteral">&quot;var id = &#39;o&#39;;&quot;</span></div>
<div class="line"><a name="l17012"></a><span class="lineno">17012</span>&#160;             <span class="stringliteral">&quot;ownfunc&quot;</span>);</div>
<div class="line"><a name="l17013"></a><span class="lineno">17013</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;func&quot;</span>), foreign_function);</div>
<div class="line"><a name="l17014"></a><span class="lineno">17014</span>&#160;</div>
<div class="line"><a name="l17015"></a><span class="lineno">17015</span>&#160;  <span class="comment">// Sanity check the contexts.</span></div>
<div class="line"><a name="l17016"></a><span class="lineno">17016</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(i-&gt;Equals(foreign_context-&gt;Global()-&gt;Get(<span class="keywordtype">id</span>)));</div>
<div class="line"><a name="l17017"></a><span class="lineno">17017</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o-&gt;Equals(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(<span class="keywordtype">id</span>)));</div>
<div class="line"><a name="l17018"></a><span class="lineno">17018</span>&#160;</div>
<div class="line"><a name="l17019"></a><span class="lineno">17019</span>&#160;  <span class="comment">// Checking local function&#39;s receiver.</span></div>
<div class="line"><a name="l17020"></a><span class="lineno">17020</span>&#160;  <span class="comment">// Calling function using its call/apply methods.</span></div>
<div class="line"><a name="l17021"></a><span class="lineno">17021</span>&#160;  TestReceiver(o, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>(), <span class="stringliteral">&quot;ownfunc.call()&quot;</span>);</div>
<div class="line"><a name="l17022"></a><span class="lineno">17022</span>&#160;  TestReceiver(o, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>(), <span class="stringliteral">&quot;ownfunc.apply()&quot;</span>);</div>
<div class="line"><a name="l17023"></a><span class="lineno">17023</span>&#160;  <span class="comment">// Making calls through built-in functions.</span></div>
<div class="line"><a name="l17024"></a><span class="lineno">17024</span>&#160;  TestReceiver(o, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>(), <span class="stringliteral">&quot;[1].map(ownfunc)[0]&quot;</span>);</div>
<div class="line"><a name="l17025"></a><span class="lineno">17025</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o-&gt;Equals(CompileRun(<span class="stringliteral">&quot;&#39;abcbd&#39;.replace(/b/,ownfunc)[1]&quot;</span>)));</div>
<div class="line"><a name="l17026"></a><span class="lineno">17026</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o-&gt;Equals(CompileRun(<span class="stringliteral">&quot;&#39;abcbd&#39;.replace(/b/g,ownfunc)[1]&quot;</span>)));</div>
<div class="line"><a name="l17027"></a><span class="lineno">17027</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(o-&gt;Equals(CompileRun(<span class="stringliteral">&quot;&#39;abcbd&#39;.replace(/b/g,ownfunc)[3]&quot;</span>)));</div>
<div class="line"><a name="l17028"></a><span class="lineno">17028</span>&#160;  <span class="comment">// Calling with environment record as base.</span></div>
<div class="line"><a name="l17029"></a><span class="lineno">17029</span>&#160;  TestReceiver(o, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>(), <span class="stringliteral">&quot;ownfunc()&quot;</span>);</div>
<div class="line"><a name="l17030"></a><span class="lineno">17030</span>&#160;  <span class="comment">// Calling with no base.</span></div>
<div class="line"><a name="l17031"></a><span class="lineno">17031</span>&#160;  TestReceiver(o, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>(), <span class="stringliteral">&quot;(1,ownfunc)()&quot;</span>);</div>
<div class="line"><a name="l17032"></a><span class="lineno">17032</span>&#160;</div>
<div class="line"><a name="l17033"></a><span class="lineno">17033</span>&#160;  <span class="comment">// Checking foreign function return value.</span></div>
<div class="line"><a name="l17034"></a><span class="lineno">17034</span>&#160;  <span class="comment">// Calling function using its call/apply methods.</span></div>
<div class="line"><a name="l17035"></a><span class="lineno">17035</span>&#160;  TestReceiver(i, foreign_context-&gt;Global(), <span class="stringliteral">&quot;func.call()&quot;</span>);</div>
<div class="line"><a name="l17036"></a><span class="lineno">17036</span>&#160;  TestReceiver(i, foreign_context-&gt;Global(), <span class="stringliteral">&quot;func.apply()&quot;</span>);</div>
<div class="line"><a name="l17037"></a><span class="lineno">17037</span>&#160;  <span class="comment">// Calling function using another context&#39;s call/apply methods.</span></div>
<div class="line"><a name="l17038"></a><span class="lineno">17038</span>&#160;  TestReceiver(i, foreign_context-&gt;Global(),</div>
<div class="line"><a name="l17039"></a><span class="lineno">17039</span>&#160;               <span class="stringliteral">&quot;Function.prototype.call.call(func)&quot;</span>);</div>
<div class="line"><a name="l17040"></a><span class="lineno">17040</span>&#160;  TestReceiver(i, foreign_context-&gt;Global(),</div>
<div class="line"><a name="l17041"></a><span class="lineno">17041</span>&#160;               <span class="stringliteral">&quot;Function.prototype.call.apply(func)&quot;</span>);</div>
<div class="line"><a name="l17042"></a><span class="lineno">17042</span>&#160;  TestReceiver(i, foreign_context-&gt;Global(),</div>
<div class="line"><a name="l17043"></a><span class="lineno">17043</span>&#160;               <span class="stringliteral">&quot;Function.prototype.apply.call(func)&quot;</span>);</div>
<div class="line"><a name="l17044"></a><span class="lineno">17044</span>&#160;  TestReceiver(i, foreign_context-&gt;Global(),</div>
<div class="line"><a name="l17045"></a><span class="lineno">17045</span>&#160;               <span class="stringliteral">&quot;Function.prototype.apply.apply(func)&quot;</span>);</div>
<div class="line"><a name="l17046"></a><span class="lineno">17046</span>&#160;  <span class="comment">// Making calls through built-in functions.</span></div>
<div class="line"><a name="l17047"></a><span class="lineno">17047</span>&#160;  TestReceiver(i, foreign_context-&gt;Global(), <span class="stringliteral">&quot;[1].map(func)[0]&quot;</span>);</div>
<div class="line"><a name="l17048"></a><span class="lineno">17048</span>&#160;  <span class="comment">// ToString(func()) is func()[0], i.e., the returned this.id.</span></div>
<div class="line"><a name="l17049"></a><span class="lineno">17049</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(i-&gt;Equals(CompileRun(<span class="stringliteral">&quot;&#39;abcbd&#39;.replace(/b/,func)[1]&quot;</span>)));</div>
<div class="line"><a name="l17050"></a><span class="lineno">17050</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(i-&gt;Equals(CompileRun(<span class="stringliteral">&quot;&#39;abcbd&#39;.replace(/b/g,func)[1]&quot;</span>)));</div>
<div class="line"><a name="l17051"></a><span class="lineno">17051</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(i-&gt;Equals(CompileRun(<span class="stringliteral">&quot;&#39;abcbd&#39;.replace(/b/g,func)[3]&quot;</span>)));</div>
<div class="line"><a name="l17052"></a><span class="lineno">17052</span>&#160;</div>
<div class="line"><a name="l17053"></a><span class="lineno">17053</span>&#160;  <span class="comment">// TODO(1547): Make the following also return &quot;i&quot;.</span></div>
<div class="line"><a name="l17054"></a><span class="lineno">17054</span>&#160;  <span class="comment">// Calling with environment record as base.</span></div>
<div class="line"><a name="l17055"></a><span class="lineno">17055</span>&#160;  TestReceiver(o, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>(), <span class="stringliteral">&quot;func()&quot;</span>);</div>
<div class="line"><a name="l17056"></a><span class="lineno">17056</span>&#160;  <span class="comment">// Calling with no base.</span></div>
<div class="line"><a name="l17057"></a><span class="lineno">17057</span>&#160;  TestReceiver(o, context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>(), <span class="stringliteral">&quot;(1,func)()&quot;</span>);</div>
<div class="line"><a name="l17058"></a><span class="lineno">17058</span>&#160;</div>
<div class="line"><a name="l17059"></a><span class="lineno">17059</span>&#160;  foreign_context.Dispose();</div>
<div class="line"><a name="l17060"></a><span class="lineno">17060</span>&#160;}</div>
<div class="line"><a name="l17061"></a><span class="lineno">17061</span>&#160;</div>
<div class="line"><a name="l17062"></a><span class="lineno">17062</span>&#160;</div>
<div class="line"><a name="l17063"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a83454004278270eb398ff2a9c6132e48">17063</a></span>&#160;uint8_t <a class="code" href="../../de/d3f/test-api_8cc.html#a83454004278270eb398ff2a9c6132e48">callback_fired</a> = 0;</div>
<div class="line"><a name="l17064"></a><span class="lineno">17064</span>&#160;</div>
<div class="line"><a name="l17065"></a><span class="lineno">17065</span>&#160;</div>
<div class="line"><a name="l17066"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ac581b83e2b960ec6c3a42496fe3b8679">17066</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#ac581b83e2b960ec6c3a42496fe3b8679">CallCompletedCallback1</a>() {</div>
<div class="line"><a name="l17067"></a><span class="lineno">17067</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">i::OS::Print</a>(<span class="stringliteral">&quot;Firing callback 1.\n&quot;</span>);</div>
<div class="line"><a name="l17068"></a><span class="lineno">17068</span>&#160;  callback_fired ^= 1;  <span class="comment">// Toggle first bit.</span></div>
<div class="line"><a name="l17069"></a><span class="lineno">17069</span>&#160;}</div>
<div class="line"><a name="l17070"></a><span class="lineno">17070</span>&#160;</div>
<div class="line"><a name="l17071"></a><span class="lineno">17071</span>&#160;</div>
<div class="line"><a name="l17072"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a80b0dc1c8ed1d0ea47d5e2fd1e6733bd">17072</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a80b0dc1c8ed1d0ea47d5e2fd1e6733bd">CallCompletedCallback2</a>() {</div>
<div class="line"><a name="l17073"></a><span class="lineno">17073</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">i::OS::Print</a>(<span class="stringliteral">&quot;Firing callback 2.\n&quot;</span>);</div>
<div class="line"><a name="l17074"></a><span class="lineno">17074</span>&#160;  callback_fired ^= 2;  <span class="comment">// Toggle second bit.</span></div>
<div class="line"><a name="l17075"></a><span class="lineno">17075</span>&#160;}</div>
<div class="line"><a name="l17076"></a><span class="lineno">17076</span>&#160;</div>
<div class="line"><a name="l17077"></a><span class="lineno">17077</span>&#160;</div>
<div class="line"><a name="l17078"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aac3bfaf60bdf22c7109b705060ccd528">17078</a></span>&#160;Handle&lt;Value&gt; <a class="code" href="../../de/d3f/test-api_8cc.html#aac3bfaf60bdf22c7109b705060ccd528">RecursiveCall</a>(<span class="keyword">const</span> Arguments&amp; args) {</div>
<div class="line"><a name="l17079"></a><span class="lineno">17079</span>&#160;  <a class="code" href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> level = args[0]-&gt;Int32Value();</div>
<div class="line"><a name="l17080"></a><span class="lineno">17080</span>&#160;  <span class="keywordflow">if</span> (level &lt; 3) {</div>
<div class="line"><a name="l17081"></a><span class="lineno">17081</span>&#160;    level++;</div>
<div class="line"><a name="l17082"></a><span class="lineno">17082</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">i::OS::Print</a>(<span class="stringliteral">&quot;Entering recursion level %d.\n&quot;</span>, level);</div>
<div class="line"><a name="l17083"></a><span class="lineno">17083</span>&#160;    <span class="keywordtype">char</span> script[64];</div>
<div class="line"><a name="l17084"></a><span class="lineno">17084</span>&#160;    <a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">i::Vector&lt;char&gt;</a> script_vector(script, <span class="keyword">sizeof</span>(script));</div>
<div class="line"><a name="l17085"></a><span class="lineno">17085</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">i::OS::SNPrintF</a>(script_vector, <span class="stringliteral">&quot;recursion(%d)&quot;</span>, level);</div>
<div class="line"><a name="l17086"></a><span class="lineno">17086</span>&#160;    CompileRun(script_vector.<a class="code" href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#affb06cbe9d08291ab0fc1a467edec469">start</a>());</div>
<div class="line"><a name="l17087"></a><span class="lineno">17087</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">i::OS::Print</a>(<span class="stringliteral">&quot;Leaving recursion level %d.\n&quot;</span>, level);</div>
<div class="line"><a name="l17088"></a><span class="lineno">17088</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, callback_fired);</div>
<div class="line"><a name="l17089"></a><span class="lineno">17089</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l17090"></a><span class="lineno">17090</span>&#160;    <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">i::OS::Print</a>(<span class="stringliteral">&quot;Recursion ends.\n&quot;</span>);</div>
<div class="line"><a name="l17091"></a><span class="lineno">17091</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, callback_fired);</div>
<div class="line"><a name="l17092"></a><span class="lineno">17092</span>&#160;  }</div>
<div class="line"><a name="l17093"></a><span class="lineno">17093</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">Undefined</a>();</div>
<div class="line"><a name="l17094"></a><span class="lineno">17094</span>&#160;}</div>
<div class="line"><a name="l17095"></a><span class="lineno">17095</span>&#160;</div>
<div class="line"><a name="l17096"></a><span class="lineno">17096</span>&#160;</div>
<div class="line"><a name="l17097"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afc3441bf15ff8dacdd4af3fab08cdc33">17097</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(<a class="code" href="../../d2/dc3/namespacev8.html#ab44395db331fcf83b5c90b611c2ae234">CallCompletedCallback</a>) {</div>
<div class="line"><a name="l17098"></a><span class="lineno">17098</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17099"></a><span class="lineno">17099</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l17100"></a><span class="lineno">17100</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;v8::FunctionTemplate&gt;</a> recursive_runtime =</div>
<div class="line"><a name="l17101"></a><span class="lineno">17101</span>&#160;      <a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#aac3bfaf60bdf22c7109b705060ccd528">RecursiveCall</a>);</div>
<div class="line"><a name="l17102"></a><span class="lineno">17102</span>&#160;  env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;recursion&quot;</span>),</div>
<div class="line"><a name="l17103"></a><span class="lineno">17103</span>&#160;                     recursive_runtime-&gt;<a class="code" href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">GetFunction</a>());</div>
<div class="line"><a name="l17104"></a><span class="lineno">17104</span>&#160;  <span class="comment">// Adding the same callback a second time has no effect.</span></div>
<div class="line"><a name="l17105"></a><span class="lineno">17105</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a47723cce36b1ac2dc3169833caf6324f">v8::V8::AddCallCompletedCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#ac581b83e2b960ec6c3a42496fe3b8679">CallCompletedCallback1</a>);</div>
<div class="line"><a name="l17106"></a><span class="lineno">17106</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a47723cce36b1ac2dc3169833caf6324f">v8::V8::AddCallCompletedCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#ac581b83e2b960ec6c3a42496fe3b8679">CallCompletedCallback1</a>);</div>
<div class="line"><a name="l17107"></a><span class="lineno">17107</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a47723cce36b1ac2dc3169833caf6324f">v8::V8::AddCallCompletedCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a80b0dc1c8ed1d0ea47d5e2fd1e6733bd">CallCompletedCallback2</a>);</div>
<div class="line"><a name="l17108"></a><span class="lineno">17108</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">i::OS::Print</a>(<span class="stringliteral">&quot;--- Script (1) ---\n&quot;</span>);</div>
<div class="line"><a name="l17109"></a><span class="lineno">17109</span>&#160;  Local&lt;Script&gt; script =</div>
<div class="line"><a name="l17110"></a><span class="lineno">17110</span>&#160;      <a class="code" href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a>(<span class="stringliteral">&quot;recursion(0)&quot;</span>));</div>
<div class="line"><a name="l17111"></a><span class="lineno">17111</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l17112"></a><span class="lineno">17112</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, callback_fired);</div>
<div class="line"><a name="l17113"></a><span class="lineno">17113</span>&#160;</div>
<div class="line"><a name="l17114"></a><span class="lineno">17114</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">i::OS::Print</a>(<span class="stringliteral">&quot;\n--- Script (2) ---\n&quot;</span>);</div>
<div class="line"><a name="l17115"></a><span class="lineno">17115</span>&#160;  callback_fired = 0;</div>
<div class="line"><a name="l17116"></a><span class="lineno">17116</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a9314d398466b8d2e5d512f8e653b04e2">v8::V8::RemoveCallCompletedCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#ac581b83e2b960ec6c3a42496fe3b8679">CallCompletedCallback1</a>);</div>
<div class="line"><a name="l17117"></a><span class="lineno">17117</span>&#160;  script-&gt;Run();</div>
<div class="line"><a name="l17118"></a><span class="lineno">17118</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, callback_fired);</div>
<div class="line"><a name="l17119"></a><span class="lineno">17119</span>&#160;</div>
<div class="line"><a name="l17120"></a><span class="lineno">17120</span>&#160;  <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">i::OS::Print</a>(<span class="stringliteral">&quot;\n--- Function ---\n&quot;</span>);</div>
<div class="line"><a name="l17121"></a><span class="lineno">17121</span>&#160;  callback_fired = 0;</div>
<div class="line"><a name="l17122"></a><span class="lineno">17122</span>&#160;  Local&lt;Function&gt; recursive_function =</div>
<div class="line"><a name="l17123"></a><span class="lineno">17123</span>&#160;      Local&lt;Function&gt;::Cast(env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;recursion&quot;</span>)));</div>
<div class="line"><a name="l17124"></a><span class="lineno">17124</span>&#160;  <a class="code" href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt;Value&gt;</a> args[] = { v8_num(0) };</div>
<div class="line"><a name="l17125"></a><span class="lineno">17125</span>&#160;  recursive_function-&gt;Call(env-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>(), 1, args);</div>
<div class="line"><a name="l17126"></a><span class="lineno">17126</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, callback_fired);</div>
<div class="line"><a name="l17127"></a><span class="lineno">17127</span>&#160;}</div>
<div class="line"><a name="l17128"></a><span class="lineno">17128</span>&#160;</div>
<div class="line"><a name="l17129"></a><span class="lineno">17129</span>&#160;</div>
<div class="line"><a name="l17130"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9926945cf5cbfcc21be4782697c783f8">17130</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a9926945cf5cbfcc21be4782697c783f8">CallCompletedCallbackNoException</a>() {</div>
<div class="line"><a name="l17131"></a><span class="lineno">17131</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17132"></a><span class="lineno">17132</span>&#160;  CompileRun(<span class="stringliteral">&quot;1+1;&quot;</span>);</div>
<div class="line"><a name="l17133"></a><span class="lineno">17133</span>&#160;}</div>
<div class="line"><a name="l17134"></a><span class="lineno">17134</span>&#160;</div>
<div class="line"><a name="l17135"></a><span class="lineno">17135</span>&#160;</div>
<div class="line"><a name="l17136"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a9a24856ee1da626972ed5467428ed981">17136</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3f/test-api_8cc.html#a9a24856ee1da626972ed5467428ed981">CallCompletedCallbackException</a>() {</div>
<div class="line"><a name="l17137"></a><span class="lineno">17137</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17138"></a><span class="lineno">17138</span>&#160;  CompileRun(<span class="stringliteral">&quot;throw &#39;second exception&#39;;&quot;</span>);</div>
<div class="line"><a name="l17139"></a><span class="lineno">17139</span>&#160;}</div>
<div class="line"><a name="l17140"></a><span class="lineno">17140</span>&#160;</div>
<div class="line"><a name="l17141"></a><span class="lineno">17141</span>&#160;</div>
<div class="line"><a name="l17142"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a084c99e33add71073c59a923ed48f571">17142</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CallCompletedCallbackOneException) {</div>
<div class="line"><a name="l17143"></a><span class="lineno">17143</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17144"></a><span class="lineno">17144</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l17145"></a><span class="lineno">17145</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a47723cce36b1ac2dc3169833caf6324f">v8::V8::AddCallCompletedCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a9926945cf5cbfcc21be4782697c783f8">CallCompletedCallbackNoException</a>);</div>
<div class="line"><a name="l17146"></a><span class="lineno">17146</span>&#160;  CompileRun(<span class="stringliteral">&quot;throw &#39;exception&#39;;&quot;</span>);</div>
<div class="line"><a name="l17147"></a><span class="lineno">17147</span>&#160;}</div>
<div class="line"><a name="l17148"></a><span class="lineno">17148</span>&#160;</div>
<div class="line"><a name="l17149"></a><span class="lineno">17149</span>&#160;</div>
<div class="line"><a name="l17150"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a3771fb6fad8d67f6e4a33d776186d327">17150</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(CallCompletedCallbackTwoExceptions) {</div>
<div class="line"><a name="l17151"></a><span class="lineno">17151</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17152"></a><span class="lineno">17152</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l17153"></a><span class="lineno">17153</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#a47723cce36b1ac2dc3169833caf6324f">v8::V8::AddCallCompletedCallback</a>(<a class="code" href="../../de/d3f/test-api_8cc.html#a9a24856ee1da626972ed5467428ed981">CallCompletedCallbackException</a>);</div>
<div class="line"><a name="l17154"></a><span class="lineno">17154</span>&#160;  CompileRun(<span class="stringliteral">&quot;throw &#39;first exception&#39;;&quot;</span>);</div>
<div class="line"><a name="l17155"></a><span class="lineno">17155</span>&#160;}</div>
<div class="line"><a name="l17156"></a><span class="lineno">17156</span>&#160;</div>
<div class="line"><a name="l17157"></a><span class="lineno">17157</span>&#160;</div>
<div class="line"><a name="l17158"></a><span class="lineno">17158</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> probes_counter = 0;</div>
<div class="line"><a name="l17159"></a><span class="lineno">17159</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> misses_counter = 0;</div>
<div class="line"><a name="l17160"></a><span class="lineno">17160</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> updates_counter = 0;</div>
<div class="line"><a name="l17161"></a><span class="lineno">17161</span>&#160;</div>
<div class="line"><a name="l17162"></a><span class="lineno">17162</span>&#160;</div>
<div class="line"><a name="l17163"></a><span class="lineno">17163</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>* LookupCounter(<span class="keyword">const</span> <span class="keywordtype">char</span>* name) {</div>
<div class="line"><a name="l17164"></a><span class="lineno">17164</span>&#160;  <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;c:V8.MegamorphicStubCacheProbes&quot;</span>) == 0) {</div>
<div class="line"><a name="l17165"></a><span class="lineno">17165</span>&#160;    <span class="keywordflow">return</span> &amp;probes_counter;</div>
<div class="line"><a name="l17166"></a><span class="lineno">17166</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;c:V8.MegamorphicStubCacheMisses&quot;</span>) == 0) {</div>
<div class="line"><a name="l17167"></a><span class="lineno">17167</span>&#160;    <span class="keywordflow">return</span> &amp;misses_counter;</div>
<div class="line"><a name="l17168"></a><span class="lineno">17168</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;c:V8.MegamorphicStubCacheUpdates&quot;</span>) == 0) {</div>
<div class="line"><a name="l17169"></a><span class="lineno">17169</span>&#160;    <span class="keywordflow">return</span> &amp;updates_counter;</div>
<div class="line"><a name="l17170"></a><span class="lineno">17170</span>&#160;  }</div>
<div class="line"><a name="l17171"></a><span class="lineno">17171</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>;</div>
<div class="line"><a name="l17172"></a><span class="lineno">17172</span>&#160;}</div>
<div class="line"><a name="l17173"></a><span class="lineno">17173</span>&#160;</div>
<div class="line"><a name="l17174"></a><span class="lineno">17174</span>&#160;</div>
<div class="line"><a name="l17175"></a><span class="lineno">17175</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kMegamorphicTestProgram =</div>
<div class="line"><a name="l17176"></a><span class="lineno">17176</span>&#160;    <span class="stringliteral">&quot;function ClassA() { };&quot;</span></div>
<div class="line"><a name="l17177"></a><span class="lineno">17177</span>&#160;    <span class="stringliteral">&quot;function ClassB() { };&quot;</span></div>
<div class="line"><a name="l17178"></a><span class="lineno">17178</span>&#160;    <span class="stringliteral">&quot;ClassA.prototype.foo = function() { };&quot;</span></div>
<div class="line"><a name="l17179"></a><span class="lineno">17179</span>&#160;    <span class="stringliteral">&quot;ClassB.prototype.foo = function() { };&quot;</span></div>
<div class="line"><a name="l17180"></a><span class="lineno">17180</span>&#160;    <span class="stringliteral">&quot;function fooify(obj) { obj.foo(); };&quot;</span></div>
<div class="line"><a name="l17181"></a><span class="lineno">17181</span>&#160;    <span class="stringliteral">&quot;var a = new ClassA();&quot;</span></div>
<div class="line"><a name="l17182"></a><span class="lineno">17182</span>&#160;    <span class="stringliteral">&quot;var b = new ClassB();&quot;</span></div>
<div class="line"><a name="l17183"></a><span class="lineno">17183</span>&#160;    <span class="stringliteral">&quot;for (var i = 0; i &lt; 10000; i++) {&quot;</span></div>
<div class="line"><a name="l17184"></a><span class="lineno">17184</span>&#160;    <span class="stringliteral">&quot;  fooify(a);&quot;</span></div>
<div class="line"><a name="l17185"></a><span class="lineno">17185</span>&#160;    <span class="stringliteral">&quot;  fooify(b);&quot;</span></div>
<div class="line"><a name="l17186"></a><span class="lineno">17186</span>&#160;    <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l17187"></a><span class="lineno">17187</span>&#160;</div>
<div class="line"><a name="l17188"></a><span class="lineno">17188</span>&#160;</div>
<div class="line"><a name="l17189"></a><span class="lineno">17189</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> StubCacheHelper(<span class="keywordtype">bool</span> primary) {</div>
<div class="line"><a name="l17190"></a><span class="lineno">17190</span>&#160;  V8::SetCounterFunction(LookupCounter);</div>
<div class="line"><a name="l17191"></a><span class="lineno">17191</span>&#160;  <a class="code" href="../../d4/d32/namespacev8_1_1internal.html#ab46a6342f518ffe356dd4b116eabc1e0">USE</a>(kMegamorphicTestProgram);</div>
<div class="line"><a name="l17192"></a><span class="lineno">17192</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l17193"></a><span class="lineno">17193</span>&#160;  i::FLAG_native_code_counters = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17194"></a><span class="lineno">17194</span>&#160;  <span class="keywordflow">if</span> (primary) {</div>
<div class="line"><a name="l17195"></a><span class="lineno">17195</span>&#160;    i::FLAG_test_primary_stub_cache = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17196"></a><span class="lineno">17196</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l17197"></a><span class="lineno">17197</span>&#160;    i::FLAG_test_secondary_stub_cache = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17198"></a><span class="lineno">17198</span>&#160;  }</div>
<div class="line"><a name="l17199"></a><span class="lineno">17199</span>&#160;  i::FLAG_crankshaft = <span class="keyword">false</span>;</div>
<div class="line"><a name="l17200"></a><span class="lineno">17200</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17201"></a><span class="lineno">17201</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> env;</div>
<div class="line"><a name="l17202"></a><span class="lineno">17202</span>&#160;  <span class="keywordtype">int</span> initial_probes = probes_counter;</div>
<div class="line"><a name="l17203"></a><span class="lineno">17203</span>&#160;  <span class="keywordtype">int</span> initial_misses = misses_counter;</div>
<div class="line"><a name="l17204"></a><span class="lineno">17204</span>&#160;  <span class="keywordtype">int</span> initial_updates = updates_counter;</div>
<div class="line"><a name="l17205"></a><span class="lineno">17205</span>&#160;  CompileRun(kMegamorphicTestProgram);</div>
<div class="line"><a name="l17206"></a><span class="lineno">17206</span>&#160;  <span class="keywordtype">int</span> probes = probes_counter - initial_probes;</div>
<div class="line"><a name="l17207"></a><span class="lineno">17207</span>&#160;  <span class="keywordtype">int</span> misses = misses_counter - initial_misses;</div>
<div class="line"><a name="l17208"></a><span class="lineno">17208</span>&#160;  <span class="keywordtype">int</span> updates = updates_counter - initial_updates;</div>
<div class="line"><a name="l17209"></a><span class="lineno">17209</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a2929b40885e8516ac074f2b53e033402">CHECK_LT</a>(updates, 10);</div>
<div class="line"><a name="l17210"></a><span class="lineno">17210</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a2929b40885e8516ac074f2b53e033402">CHECK_LT</a>(misses, 10);</div>
<div class="line"><a name="l17211"></a><span class="lineno">17211</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a>(probes, 10000);</div>
<div class="line"><a name="l17212"></a><span class="lineno">17212</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l17213"></a><span class="lineno">17213</span>&#160;}</div>
<div class="line"><a name="l17214"></a><span class="lineno">17214</span>&#160;</div>
<div class="line"><a name="l17215"></a><span class="lineno">17215</span>&#160;</div>
<div class="line"><a name="l17216"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aa93b09e481a196d23690834f1b3a97f2">17216</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(SecondaryStubCache) {</div>
<div class="line"><a name="l17217"></a><span class="lineno">17217</span>&#160;  StubCacheHelper(<span class="keyword">true</span>);</div>
<div class="line"><a name="l17218"></a><span class="lineno">17218</span>&#160;}</div>
<div class="line"><a name="l17219"></a><span class="lineno">17219</span>&#160;</div>
<div class="line"><a name="l17220"></a><span class="lineno">17220</span>&#160;</div>
<div class="line"><a name="l17221"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#ad983696a84684e4b9df81fb611a64c7d">17221</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(PrimaryStubCache) {</div>
<div class="line"><a name="l17222"></a><span class="lineno">17222</span>&#160;  StubCacheHelper(<span class="keyword">false</span>);</div>
<div class="line"><a name="l17223"></a><span class="lineno">17223</span>&#160;}</div>
<div class="line"><a name="l17224"></a><span class="lineno">17224</span>&#160;</div>
<div class="line"><a name="l17225"></a><span class="lineno">17225</span>&#160;</div>
<div class="line"><a name="l17226"></a><span class="lineno">17226</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> fatal_error_callback_counter = 0;</div>
<div class="line"><a name="l17227"></a><span class="lineno">17227</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CountingErrorCallback(<span class="keyword">const</span> <span class="keywordtype">char</span>* location, <span class="keyword">const</span> <span class="keywordtype">char</span>* message) {</div>
<div class="line"><a name="l17228"></a><span class="lineno">17228</span>&#160;  printf(<span class="stringliteral">&quot;CountingErrorCallback(\&quot;%s\&quot;, \&quot;%s\&quot;)\n&quot;</span>, location, message);</div>
<div class="line"><a name="l17229"></a><span class="lineno">17229</span>&#160;  fatal_error_callback_counter++;</div>
<div class="line"><a name="l17230"></a><span class="lineno">17230</span>&#160;}</div>
<div class="line"><a name="l17231"></a><span class="lineno">17231</span>&#160;</div>
<div class="line"><a name="l17232"></a><span class="lineno">17232</span>&#160;</div>
<div class="line"><a name="l17233"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1785ff7675634df4622fba1d985a1140">17233</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(StaticGetters) {</div>
<div class="line"><a name="l17234"></a><span class="lineno">17234</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17235"></a><span class="lineno">17235</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17236"></a><span class="lineno">17236</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l17237"></a><span class="lineno">17237</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::Object&gt;</a> undefined_value = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;undefined_value();</div>
<div class="line"><a name="l17238"></a><span class="lineno">17238</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>()) == *undefined_value);</div>
<div class="line"><a name="l17239"></a><span class="lineno">17239</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>(isolate)) == *undefined_value);</div>
<div class="line"><a name="l17240"></a><span class="lineno">17240</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::Object&gt;</a> null_value = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;null_value();</div>
<div class="line"><a name="l17241"></a><span class="lineno">17241</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/dc3/namespacev8.html#a2b822c3fdce0fedc6860872e5ebe48ae">v8::Null</a>()) == *null_value);</div>
<div class="line"><a name="l17242"></a><span class="lineno">17242</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/dc3/namespacev8.html#a2b822c3fdce0fedc6860872e5ebe48ae">v8::Null</a>(isolate)) == *null_value);</div>
<div class="line"><a name="l17243"></a><span class="lineno">17243</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::Object&gt;</a> true_value = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;true_value();</div>
<div class="line"><a name="l17244"></a><span class="lineno">17244</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>()) == *true_value);</div>
<div class="line"><a name="l17245"></a><span class="lineno">17245</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>(isolate)) == *true_value);</div>
<div class="line"><a name="l17246"></a><span class="lineno">17246</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::Object&gt;</a> false_value = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;false_value();</div>
<div class="line"><a name="l17247"></a><span class="lineno">17247</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>()) == *false_value);</div>
<div class="line"><a name="l17248"></a><span class="lineno">17248</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>(isolate)) == *false_value);</div>
<div class="line"><a name="l17249"></a><span class="lineno">17249</span>&#160;</div>
<div class="line"><a name="l17250"></a><span class="lineno">17250</span>&#160;  <span class="comment">// Test after-death behavior.</span></div>
<div class="line"><a name="l17251"></a><span class="lineno">17251</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d3/d01/classv8_1_1internal_1_1_internals.html#a73369102de320e8f97d4469e72127c27">i::Internals::IsInitialized</a>(isolate));</div>
<div class="line"><a name="l17252"></a><span class="lineno">17252</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, fatal_error_callback_counter);</div>
<div class="line"><a name="l17253"></a><span class="lineno">17253</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(CountingErrorCallback);</div>
<div class="line"><a name="l17254"></a><span class="lineno">17254</span>&#160;  <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#ad223d68072f448d7e7207fe9fad552cb">v8::Utils::ReportApiFailure</a>(<span class="stringliteral">&quot;StaticGetters()&quot;</span>, <span class="stringliteral">&quot;Kill V8&quot;</span>);</div>
<div class="line"><a name="l17255"></a><span class="lineno">17255</span>&#160;  i::Isolate::Current()-&gt;TearDown();</div>
<div class="line"><a name="l17256"></a><span class="lineno">17256</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="../../d3/d01/classv8_1_1internal_1_1_internals.html#a73369102de320e8f97d4469e72127c27">i::Internals::IsInitialized</a>(isolate));</div>
<div class="line"><a name="l17257"></a><span class="lineno">17257</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, fatal_error_callback_counter);</div>
<div class="line"><a name="l17258"></a><span class="lineno">17258</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>().IsEmpty());</div>
<div class="line"><a name="l17259"></a><span class="lineno">17259</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, fatal_error_callback_counter);</div>
<div class="line"><a name="l17260"></a><span class="lineno">17260</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a>(isolate).IsEmpty());</div>
<div class="line"><a name="l17261"></a><span class="lineno">17261</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, fatal_error_callback_counter);</div>
<div class="line"><a name="l17262"></a><span class="lineno">17262</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a2b822c3fdce0fedc6860872e5ebe48ae">v8::Null</a>().IsEmpty());</div>
<div class="line"><a name="l17263"></a><span class="lineno">17263</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(4, fatal_error_callback_counter);</div>
<div class="line"><a name="l17264"></a><span class="lineno">17264</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a2b822c3fdce0fedc6860872e5ebe48ae">v8::Null</a>(isolate).IsEmpty());</div>
<div class="line"><a name="l17265"></a><span class="lineno">17265</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(5, fatal_error_callback_counter);</div>
<div class="line"><a name="l17266"></a><span class="lineno">17266</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>().IsEmpty());</div>
<div class="line"><a name="l17267"></a><span class="lineno">17267</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, fatal_error_callback_counter);</div>
<div class="line"><a name="l17268"></a><span class="lineno">17268</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a>(isolate).IsEmpty());</div>
<div class="line"><a name="l17269"></a><span class="lineno">17269</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(7, fatal_error_callback_counter);</div>
<div class="line"><a name="l17270"></a><span class="lineno">17270</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>().IsEmpty());</div>
<div class="line"><a name="l17271"></a><span class="lineno">17271</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(8, fatal_error_callback_counter);</div>
<div class="line"><a name="l17272"></a><span class="lineno">17272</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a>(isolate).IsEmpty());</div>
<div class="line"><a name="l17273"></a><span class="lineno">17273</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(9, fatal_error_callback_counter);</div>
<div class="line"><a name="l17274"></a><span class="lineno">17274</span>&#160;}</div>
<div class="line"><a name="l17275"></a><span class="lineno">17275</span>&#160;</div>
<div class="line"><a name="l17276"></a><span class="lineno">17276</span>&#160;</div>
<div class="line"><a name="l17277"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a1d32b9c194735dbaa3ec65ab6f819518">17277</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(IsolateEmbedderData) {</div>
<div class="line"><a name="l17278"></a><span class="lineno">17278</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l17279"></a><span class="lineno">17279</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a16c743224521a93df2bdb054a7573919">GetData</a>());</div>
<div class="line"><a name="l17280"></a><span class="lineno">17280</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>, <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;GetData());</div>
<div class="line"><a name="l17281"></a><span class="lineno">17281</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span>* data1 = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(0xacce55ed);</div>
<div class="line"><a name="l17282"></a><span class="lineno">17282</span>&#160;  isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a3e50acb774ada0fcdeac09c23779236b">SetData</a>(data1);</div>
<div class="line"><a name="l17283"></a><span class="lineno">17283</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(data1, isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a16c743224521a93df2bdb054a7573919">GetData</a>());</div>
<div class="line"><a name="l17284"></a><span class="lineno">17284</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(data1, <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;GetData());</div>
<div class="line"><a name="l17285"></a><span class="lineno">17285</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span>* data2 = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(0xdecea5ed);</div>
<div class="line"><a name="l17286"></a><span class="lineno">17286</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;SetData(data2);</div>
<div class="line"><a name="l17287"></a><span class="lineno">17287</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(data2, isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a16c743224521a93df2bdb054a7573919">GetData</a>());</div>
<div class="line"><a name="l17288"></a><span class="lineno">17288</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(data2, <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;GetData());</div>
<div class="line"><a name="l17289"></a><span class="lineno">17289</span>&#160;  <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;TearDown();</div>
<div class="line"><a name="l17290"></a><span class="lineno">17290</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(data2, isolate-&gt;<a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a16c743224521a93df2bdb054a7573919">GetData</a>());</div>
<div class="line"><a name="l17291"></a><span class="lineno">17291</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(data2, <a class="code" href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a>-&gt;GetData());</div>
<div class="line"><a name="l17292"></a><span class="lineno">17292</span>&#160;}</div>
<div class="line"><a name="l17293"></a><span class="lineno">17293</span>&#160;</div>
<div class="line"><a name="l17294"></a><span class="lineno">17294</span>&#160;</div>
<div class="line"><a name="l17295"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#af7c737eb734e6fb00b8c44548d26fd30">17295</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(StringEmpty) {</div>
<div class="line"><a name="l17296"></a><span class="lineno">17296</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17297"></a><span class="lineno">17297</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17298"></a><span class="lineno">17298</span>&#160;  <a class="code" href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a>* isolate = <a class="code" href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a>();</div>
<div class="line"><a name="l17299"></a><span class="lineno">17299</span>&#160;  <a class="code" href="../../da/dde/classv8_1_1internal_1_1_handle.html">i::Handle&lt;i::Object&gt;</a> empty_string = <a class="code" href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a>-&gt;empty_symbol();</div>
<div class="line"><a name="l17300"></a><span class="lineno">17300</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/db3/classv8_1_1_string.html#a12b9f28e660cd82558c23dd598654247">v8::String::Empty</a>()) == *empty_string);</div>
<div class="line"><a name="l17301"></a><span class="lineno">17301</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(*v8::Utils::OpenHandle(*<a class="code" href="../../d2/db3/classv8_1_1_string.html#a12b9f28e660cd82558c23dd598654247">v8::String::Empty</a>(isolate)) == *empty_string);</div>
<div class="line"><a name="l17302"></a><span class="lineno">17302</span>&#160;</div>
<div class="line"><a name="l17303"></a><span class="lineno">17303</span>&#160;  <span class="comment">// Test after-death behavior.</span></div>
<div class="line"><a name="l17304"></a><span class="lineno">17304</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d3/d01/classv8_1_1internal_1_1_internals.html#a73369102de320e8f97d4469e72127c27">i::Internals::IsInitialized</a>(isolate));</div>
<div class="line"><a name="l17305"></a><span class="lineno">17305</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, fatal_error_callback_counter);</div>
<div class="line"><a name="l17306"></a><span class="lineno">17306</span>&#160;  <a class="code" href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a>(CountingErrorCallback);</div>
<div class="line"><a name="l17307"></a><span class="lineno">17307</span>&#160;  <a class="code" href="../../d4/d4b/classv8_1_1_utils.html#ad223d68072f448d7e7207fe9fad552cb">v8::Utils::ReportApiFailure</a>(<span class="stringliteral">&quot;StringEmpty()&quot;</span>, <span class="stringliteral">&quot;Kill V8&quot;</span>);</div>
<div class="line"><a name="l17308"></a><span class="lineno">17308</span>&#160;  i::Isolate::Current()-&gt;TearDown();</div>
<div class="line"><a name="l17309"></a><span class="lineno">17309</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="../../d3/d01/classv8_1_1internal_1_1_internals.html#a73369102de320e8f97d4469e72127c27">i::Internals::IsInitialized</a>(isolate));</div>
<div class="line"><a name="l17310"></a><span class="lineno">17310</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(1, fatal_error_callback_counter);</div>
<div class="line"><a name="l17311"></a><span class="lineno">17311</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a12b9f28e660cd82558c23dd598654247">v8::String::Empty</a>().IsEmpty());</div>
<div class="line"><a name="l17312"></a><span class="lineno">17312</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, fatal_error_callback_counter);</div>
<div class="line"><a name="l17313"></a><span class="lineno">17313</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="../../d2/db3/classv8_1_1_string.html#a12b9f28e660cd82558c23dd598654247">v8::String::Empty</a>(isolate).IsEmpty());</div>
<div class="line"><a name="l17314"></a><span class="lineno">17314</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(3, fatal_error_callback_counter);</div>
<div class="line"><a name="l17315"></a><span class="lineno">17315</span>&#160;}</div>
<div class="line"><a name="l17316"></a><span class="lineno">17316</span>&#160;</div>
<div class="line"><a name="l17317"></a><span class="lineno">17317</span>&#160;</div>
<div class="line"><a name="l17318"></a><span class="lineno">17318</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> instance_checked_getter_count = 0;</div>
<div class="line"><a name="l17319"></a><span class="lineno">17319</span>&#160;<span class="keyword">static</span> Handle&lt;Value&gt; InstanceCheckedGetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l17320"></a><span class="lineno">17320</span>&#160;                                           <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l17321"></a><span class="lineno">17321</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(name, v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l17322"></a><span class="lineno">17322</span>&#160;  instance_checked_getter_count++;</div>
<div class="line"><a name="l17323"></a><span class="lineno">17323</span>&#160;  <span class="keywordflow">return</span> v8_num(11);</div>
<div class="line"><a name="l17324"></a><span class="lineno">17324</span>&#160;}</div>
<div class="line"><a name="l17325"></a><span class="lineno">17325</span>&#160;</div>
<div class="line"><a name="l17326"></a><span class="lineno">17326</span>&#160;</div>
<div class="line"><a name="l17327"></a><span class="lineno">17327</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> instance_checked_setter_count = 0;</div>
<div class="line"><a name="l17328"></a><span class="lineno">17328</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> InstanceCheckedSetter(Local&lt;String&gt; name,</div>
<div class="line"><a name="l17329"></a><span class="lineno">17329</span>&#160;                      Local&lt;Value&gt; value,</div>
<div class="line"><a name="l17330"></a><span class="lineno">17330</span>&#160;                      <span class="keyword">const</span> AccessorInfo&amp; info) {</div>
<div class="line"><a name="l17331"></a><span class="lineno">17331</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(name, v8_str(<span class="stringliteral">&quot;foo&quot;</span>));</div>
<div class="line"><a name="l17332"></a><span class="lineno">17332</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(value, v8_num(23));</div>
<div class="line"><a name="l17333"></a><span class="lineno">17333</span>&#160;  instance_checked_setter_count++;</div>
<div class="line"><a name="l17334"></a><span class="lineno">17334</span>&#160;}</div>
<div class="line"><a name="l17335"></a><span class="lineno">17335</span>&#160;</div>
<div class="line"><a name="l17336"></a><span class="lineno">17336</span>&#160;</div>
<div class="line"><a name="l17337"></a><span class="lineno">17337</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckInstanceCheckedResult(<span class="keywordtype">int</span> getters,</div>
<div class="line"><a name="l17338"></a><span class="lineno">17338</span>&#160;                                       <span class="keywordtype">int</span> setters,</div>
<div class="line"><a name="l17339"></a><span class="lineno">17339</span>&#160;                                       <span class="keywordtype">bool</span> expects_callbacks,</div>
<div class="line"><a name="l17340"></a><span class="lineno">17340</span>&#160;                                       TryCatch* try_catch) {</div>
<div class="line"><a name="l17341"></a><span class="lineno">17341</span>&#160;  <span class="keywordflow">if</span> (expects_callbacks) {</div>
<div class="line"><a name="l17342"></a><span class="lineno">17342</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!try_catch-&gt;HasCaught());</div>
<div class="line"><a name="l17343"></a><span class="lineno">17343</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(getters, instance_checked_getter_count);</div>
<div class="line"><a name="l17344"></a><span class="lineno">17344</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(setters, instance_checked_setter_count);</div>
<div class="line"><a name="l17345"></a><span class="lineno">17345</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l17346"></a><span class="lineno">17346</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch-&gt;HasCaught());</div>
<div class="line"><a name="l17347"></a><span class="lineno">17347</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, instance_checked_getter_count);</div>
<div class="line"><a name="l17348"></a><span class="lineno">17348</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(0, instance_checked_setter_count);</div>
<div class="line"><a name="l17349"></a><span class="lineno">17349</span>&#160;  }</div>
<div class="line"><a name="l17350"></a><span class="lineno">17350</span>&#160;  try_catch-&gt;Reset();</div>
<div class="line"><a name="l17351"></a><span class="lineno">17351</span>&#160;}</div>
<div class="line"><a name="l17352"></a><span class="lineno">17352</span>&#160;</div>
<div class="line"><a name="l17353"></a><span class="lineno">17353</span>&#160;</div>
<div class="line"><a name="l17354"></a><span class="lineno">17354</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> CheckInstanceCheckedAccessors(<span class="keywordtype">bool</span> expects_callbacks) {</div>
<div class="line"><a name="l17355"></a><span class="lineno">17355</span>&#160;  instance_checked_getter_count = 0;</div>
<div class="line"><a name="l17356"></a><span class="lineno">17356</span>&#160;  instance_checked_setter_count = 0;</div>
<div class="line"><a name="l17357"></a><span class="lineno">17357</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l17358"></a><span class="lineno">17358</span>&#160;</div>
<div class="line"><a name="l17359"></a><span class="lineno">17359</span>&#160;  <span class="comment">// Test path through generic runtime code.</span></div>
<div class="line"><a name="l17360"></a><span class="lineno">17360</span>&#160;  CompileRun(<span class="stringliteral">&quot;obj.foo&quot;</span>);</div>
<div class="line"><a name="l17361"></a><span class="lineno">17361</span>&#160;  CheckInstanceCheckedResult(1, 0, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17362"></a><span class="lineno">17362</span>&#160;  CompileRun(<span class="stringliteral">&quot;obj.foo = 23&quot;</span>);</div>
<div class="line"><a name="l17363"></a><span class="lineno">17363</span>&#160;  CheckInstanceCheckedResult(1, 1, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17364"></a><span class="lineno">17364</span>&#160;</div>
<div class="line"><a name="l17365"></a><span class="lineno">17365</span>&#160;  <span class="comment">// Test path through generated LoadIC and StoredIC.</span></div>
<div class="line"><a name="l17366"></a><span class="lineno">17366</span>&#160;  CompileRun(<span class="stringliteral">&quot;function test_get(o) { o.foo; }&quot;</span></div>
<div class="line"><a name="l17367"></a><span class="lineno">17367</span>&#160;             <span class="stringliteral">&quot;test_get(obj);&quot;</span>);</div>
<div class="line"><a name="l17368"></a><span class="lineno">17368</span>&#160;  CheckInstanceCheckedResult(2, 1, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17369"></a><span class="lineno">17369</span>&#160;  CompileRun(<span class="stringliteral">&quot;test_get(obj);&quot;</span>);</div>
<div class="line"><a name="l17370"></a><span class="lineno">17370</span>&#160;  CheckInstanceCheckedResult(3, 1, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17371"></a><span class="lineno">17371</span>&#160;  CompileRun(<span class="stringliteral">&quot;test_get(obj);&quot;</span>);</div>
<div class="line"><a name="l17372"></a><span class="lineno">17372</span>&#160;  CheckInstanceCheckedResult(4, 1, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17373"></a><span class="lineno">17373</span>&#160;  CompileRun(<span class="stringliteral">&quot;function test_set(o) { o.foo = 23; }&quot;</span></div>
<div class="line"><a name="l17374"></a><span class="lineno">17374</span>&#160;             <span class="stringliteral">&quot;test_set(obj);&quot;</span>);</div>
<div class="line"><a name="l17375"></a><span class="lineno">17375</span>&#160;  CheckInstanceCheckedResult(4, 2, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17376"></a><span class="lineno">17376</span>&#160;  CompileRun(<span class="stringliteral">&quot;test_set(obj);&quot;</span>);</div>
<div class="line"><a name="l17377"></a><span class="lineno">17377</span>&#160;  CheckInstanceCheckedResult(4, 3, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17378"></a><span class="lineno">17378</span>&#160;  CompileRun(<span class="stringliteral">&quot;test_set(obj);&quot;</span>);</div>
<div class="line"><a name="l17379"></a><span class="lineno">17379</span>&#160;  CheckInstanceCheckedResult(4, 4, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17380"></a><span class="lineno">17380</span>&#160;</div>
<div class="line"><a name="l17381"></a><span class="lineno">17381</span>&#160;  <span class="comment">// Test path through optimized code.</span></div>
<div class="line"><a name="l17382"></a><span class="lineno">17382</span>&#160;  CompileRun(<span class="stringliteral">&quot;%OptimizeFunctionOnNextCall(test_get);&quot;</span></div>
<div class="line"><a name="l17383"></a><span class="lineno">17383</span>&#160;             <span class="stringliteral">&quot;test_get(obj);&quot;</span>);</div>
<div class="line"><a name="l17384"></a><span class="lineno">17384</span>&#160;  CheckInstanceCheckedResult(5, 4, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17385"></a><span class="lineno">17385</span>&#160;  CompileRun(<span class="stringliteral">&quot;%OptimizeFunctionOnNextCall(test_set);&quot;</span></div>
<div class="line"><a name="l17386"></a><span class="lineno">17386</span>&#160;             <span class="stringliteral">&quot;test_set(obj);&quot;</span>);</div>
<div class="line"><a name="l17387"></a><span class="lineno">17387</span>&#160;  CheckInstanceCheckedResult(5, 5, expects_callbacks, &amp;try_catch);</div>
<div class="line"><a name="l17388"></a><span class="lineno">17388</span>&#160;</div>
<div class="line"><a name="l17389"></a><span class="lineno">17389</span>&#160;  <span class="comment">// Cleanup so that closures start out fresh in next check.</span></div>
<div class="line"><a name="l17390"></a><span class="lineno">17390</span>&#160;  CompileRun(<span class="stringliteral">&quot;%DeoptimizeFunction(test_get);&quot;</span></div>
<div class="line"><a name="l17391"></a><span class="lineno">17391</span>&#160;             <span class="stringliteral">&quot;%ClearFunctionTypeFeedback(test_get);&quot;</span></div>
<div class="line"><a name="l17392"></a><span class="lineno">17392</span>&#160;             <span class="stringliteral">&quot;%DeoptimizeFunction(test_set);&quot;</span></div>
<div class="line"><a name="l17393"></a><span class="lineno">17393</span>&#160;             <span class="stringliteral">&quot;%ClearFunctionTypeFeedback(test_set);&quot;</span>);</div>
<div class="line"><a name="l17394"></a><span class="lineno">17394</span>&#160;}</div>
<div class="line"><a name="l17395"></a><span class="lineno">17395</span>&#160;</div>
<div class="line"><a name="l17396"></a><span class="lineno">17396</span>&#160;</div>
<div class="line"><a name="l17397"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abe893c814e0efc4fed3632dea7444fcb">17397</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InstanceCheckOnInstanceAccessor) {</div>
<div class="line"><a name="l17398"></a><span class="lineno">17398</span>&#160;  v8::internal::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17399"></a><span class="lineno">17399</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17400"></a><span class="lineno">17400</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17401"></a><span class="lineno">17401</span>&#160;</div>
<div class="line"><a name="l17402"></a><span class="lineno">17402</span>&#160;  Local&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l17403"></a><span class="lineno">17403</span>&#160;  Local&lt;ObjectTemplate&gt; inst = templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l17404"></a><span class="lineno">17404</span>&#160;  inst-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;foo&quot;</span>),</div>
<div class="line"><a name="l17405"></a><span class="lineno">17405</span>&#160;                    InstanceCheckedGetter, InstanceCheckedSetter,</div>
<div class="line"><a name="l17406"></a><span class="lineno">17406</span>&#160;                    Handle&lt;Value&gt;(),</div>
<div class="line"><a name="l17407"></a><span class="lineno">17407</span>&#160;                    <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>,</div>
<div class="line"><a name="l17408"></a><span class="lineno">17408</span>&#160;                    <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a>,</div>
<div class="line"><a name="l17409"></a><span class="lineno">17409</span>&#160;                    <a class="code" href="../../d4/da9/classv8_1_1_accessor_signature.html#a193a5057e3fa67cced2a13de9a8934ea">v8::AccessorSignature::New</a>(templ));</div>
<div class="line"><a name="l17410"></a><span class="lineno">17410</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l17411"></a><span class="lineno">17411</span>&#160;</div>
<div class="line"><a name="l17412"></a><span class="lineno">17412</span>&#160;  printf(<span class="stringliteral">&quot;Testing positive ...\n&quot;</span>);</div>
<div class="line"><a name="l17413"></a><span class="lineno">17413</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = new f();&quot;</span>);</div>
<div class="line"><a name="l17414"></a><span class="lineno">17414</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(templ-&gt;HasInstance(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>))));</div>
<div class="line"><a name="l17415"></a><span class="lineno">17415</span>&#160;  CheckInstanceCheckedAccessors(<span class="keyword">true</span>);</div>
<div class="line"><a name="l17416"></a><span class="lineno">17416</span>&#160;</div>
<div class="line"><a name="l17417"></a><span class="lineno">17417</span>&#160;  printf(<span class="stringliteral">&quot;Testing negative ...\n&quot;</span>);</div>
<div class="line"><a name="l17418"></a><span class="lineno">17418</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = {};&quot;</span></div>
<div class="line"><a name="l17419"></a><span class="lineno">17419</span>&#160;             <span class="stringliteral">&quot;obj.__proto__ = new f();&quot;</span>);</div>
<div class="line"><a name="l17420"></a><span class="lineno">17420</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!templ-&gt;HasInstance(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>))));</div>
<div class="line"><a name="l17421"></a><span class="lineno">17421</span>&#160;  CheckInstanceCheckedAccessors(<span class="keyword">false</span>);</div>
<div class="line"><a name="l17422"></a><span class="lineno">17422</span>&#160;}</div>
<div class="line"><a name="l17423"></a><span class="lineno">17423</span>&#160;</div>
<div class="line"><a name="l17424"></a><span class="lineno">17424</span>&#160;</div>
<div class="line"><a name="l17425"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a60d55d70f0d2e7a92626ca0b70b53ea1">17425</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InstanceCheckOnInstanceAccessorWithInterceptor) {</div>
<div class="line"><a name="l17426"></a><span class="lineno">17426</span>&#160;  v8::internal::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17427"></a><span class="lineno">17427</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17428"></a><span class="lineno">17428</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17429"></a><span class="lineno">17429</span>&#160;</div>
<div class="line"><a name="l17430"></a><span class="lineno">17430</span>&#160;  Local&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l17431"></a><span class="lineno">17431</span>&#160;  Local&lt;ObjectTemplate&gt; inst = templ-&gt;InstanceTemplate();</div>
<div class="line"><a name="l17432"></a><span class="lineno">17432</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(templ, <a class="code" href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0">EmptyInterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd">EmptyInterceptorSetter</a>);</div>
<div class="line"><a name="l17433"></a><span class="lineno">17433</span>&#160;  inst-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;foo&quot;</span>),</div>
<div class="line"><a name="l17434"></a><span class="lineno">17434</span>&#160;                    InstanceCheckedGetter, InstanceCheckedSetter,</div>
<div class="line"><a name="l17435"></a><span class="lineno">17435</span>&#160;                    Handle&lt;Value&gt;(),</div>
<div class="line"><a name="l17436"></a><span class="lineno">17436</span>&#160;                    <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>,</div>
<div class="line"><a name="l17437"></a><span class="lineno">17437</span>&#160;                    <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a>,</div>
<div class="line"><a name="l17438"></a><span class="lineno">17438</span>&#160;                    <a class="code" href="../../d4/da9/classv8_1_1_accessor_signature.html#a193a5057e3fa67cced2a13de9a8934ea">v8::AccessorSignature::New</a>(templ));</div>
<div class="line"><a name="l17439"></a><span class="lineno">17439</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l17440"></a><span class="lineno">17440</span>&#160;</div>
<div class="line"><a name="l17441"></a><span class="lineno">17441</span>&#160;  printf(<span class="stringliteral">&quot;Testing positive ...\n&quot;</span>);</div>
<div class="line"><a name="l17442"></a><span class="lineno">17442</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = new f();&quot;</span>);</div>
<div class="line"><a name="l17443"></a><span class="lineno">17443</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(templ-&gt;HasInstance(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>))));</div>
<div class="line"><a name="l17444"></a><span class="lineno">17444</span>&#160;  CheckInstanceCheckedAccessors(<span class="keyword">true</span>);</div>
<div class="line"><a name="l17445"></a><span class="lineno">17445</span>&#160;</div>
<div class="line"><a name="l17446"></a><span class="lineno">17446</span>&#160;  printf(<span class="stringliteral">&quot;Testing negative ...\n&quot;</span>);</div>
<div class="line"><a name="l17447"></a><span class="lineno">17447</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = {};&quot;</span></div>
<div class="line"><a name="l17448"></a><span class="lineno">17448</span>&#160;             <span class="stringliteral">&quot;obj.__proto__ = new f();&quot;</span>);</div>
<div class="line"><a name="l17449"></a><span class="lineno">17449</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!templ-&gt;HasInstance(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>))));</div>
<div class="line"><a name="l17450"></a><span class="lineno">17450</span>&#160;  CheckInstanceCheckedAccessors(<span class="keyword">false</span>);</div>
<div class="line"><a name="l17451"></a><span class="lineno">17451</span>&#160;}</div>
<div class="line"><a name="l17452"></a><span class="lineno">17452</span>&#160;</div>
<div class="line"><a name="l17453"></a><span class="lineno">17453</span>&#160;</div>
<div class="line"><a name="l17454"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#afeaced573fb0144c4d761216f089a0c1">17454</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(InstanceCheckOnPrototypeAccessor) {</div>
<div class="line"><a name="l17455"></a><span class="lineno">17455</span>&#160;  v8::internal::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17456"></a><span class="lineno">17456</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17457"></a><span class="lineno">17457</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17458"></a><span class="lineno">17458</span>&#160;</div>
<div class="line"><a name="l17459"></a><span class="lineno">17459</span>&#160;  Local&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l17460"></a><span class="lineno">17460</span>&#160;  Local&lt;ObjectTemplate&gt; proto = templ-&gt;PrototypeTemplate();</div>
<div class="line"><a name="l17461"></a><span class="lineno">17461</span>&#160;  proto-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;foo&quot;</span>),</div>
<div class="line"><a name="l17462"></a><span class="lineno">17462</span>&#160;                     InstanceCheckedGetter, InstanceCheckedSetter,</div>
<div class="line"><a name="l17463"></a><span class="lineno">17463</span>&#160;                     Handle&lt;Value&gt;(),</div>
<div class="line"><a name="l17464"></a><span class="lineno">17464</span>&#160;                     <a class="code" href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a>,</div>
<div class="line"><a name="l17465"></a><span class="lineno">17465</span>&#160;                     <a class="code" href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a>,</div>
<div class="line"><a name="l17466"></a><span class="lineno">17466</span>&#160;                     <a class="code" href="../../d4/da9/classv8_1_1_accessor_signature.html#a193a5057e3fa67cced2a13de9a8934ea">v8::AccessorSignature::New</a>(templ));</div>
<div class="line"><a name="l17467"></a><span class="lineno">17467</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;f&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l17468"></a><span class="lineno">17468</span>&#160;</div>
<div class="line"><a name="l17469"></a><span class="lineno">17469</span>&#160;  printf(<span class="stringliteral">&quot;Testing positive ...\n&quot;</span>);</div>
<div class="line"><a name="l17470"></a><span class="lineno">17470</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = new f();&quot;</span>);</div>
<div class="line"><a name="l17471"></a><span class="lineno">17471</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(templ-&gt;HasInstance(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>))));</div>
<div class="line"><a name="l17472"></a><span class="lineno">17472</span>&#160;  CheckInstanceCheckedAccessors(<span class="keyword">true</span>);</div>
<div class="line"><a name="l17473"></a><span class="lineno">17473</span>&#160;</div>
<div class="line"><a name="l17474"></a><span class="lineno">17474</span>&#160;  printf(<span class="stringliteral">&quot;Testing negative ...\n&quot;</span>);</div>
<div class="line"><a name="l17475"></a><span class="lineno">17475</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = {};&quot;</span></div>
<div class="line"><a name="l17476"></a><span class="lineno">17476</span>&#160;             <span class="stringliteral">&quot;obj.__proto__ = new f();&quot;</span>);</div>
<div class="line"><a name="l17477"></a><span class="lineno">17477</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!templ-&gt;HasInstance(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>))));</div>
<div class="line"><a name="l17478"></a><span class="lineno">17478</span>&#160;  CheckInstanceCheckedAccessors(<span class="keyword">false</span>);</div>
<div class="line"><a name="l17479"></a><span class="lineno">17479</span>&#160;</div>
<div class="line"><a name="l17480"></a><span class="lineno">17480</span>&#160;  printf(<span class="stringliteral">&quot;Testing positive with modified prototype chain ...\n&quot;</span>);</div>
<div class="line"><a name="l17481"></a><span class="lineno">17481</span>&#160;  CompileRun(<span class="stringliteral">&quot;var obj = new f();&quot;</span></div>
<div class="line"><a name="l17482"></a><span class="lineno">17482</span>&#160;             <span class="stringliteral">&quot;var pro = {};&quot;</span></div>
<div class="line"><a name="l17483"></a><span class="lineno">17483</span>&#160;             <span class="stringliteral">&quot;pro.__proto__ = obj.__proto__;&quot;</span></div>
<div class="line"><a name="l17484"></a><span class="lineno">17484</span>&#160;             <span class="stringliteral">&quot;obj.__proto__ = pro;&quot;</span>);</div>
<div class="line"><a name="l17485"></a><span class="lineno">17485</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(templ-&gt;HasInstance(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;obj&quot;</span>))));</div>
<div class="line"><a name="l17486"></a><span class="lineno">17486</span>&#160;  CheckInstanceCheckedAccessors(<span class="keyword">true</span>);</div>
<div class="line"><a name="l17487"></a><span class="lineno">17487</span>&#160;}</div>
<div class="line"><a name="l17488"></a><span class="lineno">17488</span>&#160;</div>
<div class="line"><a name="l17489"></a><span class="lineno">17489</span>&#160;</div>
<div class="line"><a name="l17490"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a954eddbf7145662011c9e8aee34be59a">17490</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a>(TryFinallyMessage) {</div>
<div class="line"><a name="l17491"></a><span class="lineno">17491</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17492"></a><span class="lineno">17492</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17493"></a><span class="lineno">17493</span>&#160;  {</div>
<div class="line"><a name="l17494"></a><span class="lineno">17494</span>&#160;    <span class="comment">// Test that the original error message is not lost if there is a</span></div>
<div class="line"><a name="l17495"></a><span class="lineno">17495</span>&#160;    <span class="comment">// recursive call into Javascript is done in the finally block, e.g. to</span></div>
<div class="line"><a name="l17496"></a><span class="lineno">17496</span>&#160;    <span class="comment">// initialize an IC. (crbug.com/129171)</span></div>
<div class="line"><a name="l17497"></a><span class="lineno">17497</span>&#160;    TryCatch try_catch;</div>
<div class="line"><a name="l17498"></a><span class="lineno">17498</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* trigger_ic =</div>
<div class="line"><a name="l17499"></a><span class="lineno">17499</span>&#160;        <span class="stringliteral">&quot;try {                      \n&quot;</span></div>
<div class="line"><a name="l17500"></a><span class="lineno">17500</span>&#160;        <span class="stringliteral">&quot;  throw new Error(&#39;test&#39;); \n&quot;</span></div>
<div class="line"><a name="l17501"></a><span class="lineno">17501</span>&#160;        <span class="stringliteral">&quot;} finally {                \n&quot;</span></div>
<div class="line"><a name="l17502"></a><span class="lineno">17502</span>&#160;        <span class="stringliteral">&quot;  var x = 0;               \n&quot;</span></div>
<div class="line"><a name="l17503"></a><span class="lineno">17503</span>&#160;        <span class="stringliteral">&quot;  x++;                     \n&quot;</span>  <span class="comment">// Trigger an IC initialization here.</span></div>
<div class="line"><a name="l17504"></a><span class="lineno">17504</span>&#160;        <span class="stringliteral">&quot;}                          \n&quot;</span>;</div>
<div class="line"><a name="l17505"></a><span class="lineno">17505</span>&#160;    CompileRun(trigger_ic);</div>
<div class="line"><a name="l17506"></a><span class="lineno">17506</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l17507"></a><span class="lineno">17507</span>&#160;    Local&lt;Message&gt; message = try_catch.Message();</div>
<div class="line"><a name="l17508"></a><span class="lineno">17508</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!message.IsEmpty());</div>
<div class="line"><a name="l17509"></a><span class="lineno">17509</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(2, message-&gt;GetLineNumber());</div>
<div class="line"><a name="l17510"></a><span class="lineno">17510</span>&#160;  }</div>
<div class="line"><a name="l17511"></a><span class="lineno">17511</span>&#160;</div>
<div class="line"><a name="l17512"></a><span class="lineno">17512</span>&#160;  {</div>
<div class="line"><a name="l17513"></a><span class="lineno">17513</span>&#160;    <span class="comment">// Test that the original exception message is indeed overwritten if</span></div>
<div class="line"><a name="l17514"></a><span class="lineno">17514</span>&#160;    <span class="comment">// a new error is thrown in the finally block.</span></div>
<div class="line"><a name="l17515"></a><span class="lineno">17515</span>&#160;    TryCatch try_catch;</div>
<div class="line"><a name="l17516"></a><span class="lineno">17516</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* throw_again =</div>
<div class="line"><a name="l17517"></a><span class="lineno">17517</span>&#160;        <span class="stringliteral">&quot;try {                       \n&quot;</span></div>
<div class="line"><a name="l17518"></a><span class="lineno">17518</span>&#160;        <span class="stringliteral">&quot;  throw new Error(&#39;test&#39;);  \n&quot;</span></div>
<div class="line"><a name="l17519"></a><span class="lineno">17519</span>&#160;        <span class="stringliteral">&quot;} finally {                 \n&quot;</span></div>
<div class="line"><a name="l17520"></a><span class="lineno">17520</span>&#160;        <span class="stringliteral">&quot;  var x = 0;                \n&quot;</span></div>
<div class="line"><a name="l17521"></a><span class="lineno">17521</span>&#160;        <span class="stringliteral">&quot;  x++;                      \n&quot;</span></div>
<div class="line"><a name="l17522"></a><span class="lineno">17522</span>&#160;        <span class="stringliteral">&quot;  throw new Error(&#39;again&#39;); \n&quot;</span>  <span class="comment">// This is the new uncaught error.</span></div>
<div class="line"><a name="l17523"></a><span class="lineno">17523</span>&#160;        <span class="stringliteral">&quot;}                           \n&quot;</span>;</div>
<div class="line"><a name="l17524"></a><span class="lineno">17524</span>&#160;    CompileRun(throw_again);</div>
<div class="line"><a name="l17525"></a><span class="lineno">17525</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l17526"></a><span class="lineno">17526</span>&#160;    Local&lt;Message&gt; message = try_catch.Message();</div>
<div class="line"><a name="l17527"></a><span class="lineno">17527</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!message.IsEmpty());</div>
<div class="line"><a name="l17528"></a><span class="lineno">17528</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(6, message-&gt;GetLineNumber());</div>
<div class="line"><a name="l17529"></a><span class="lineno">17529</span>&#160;  }</div>
<div class="line"><a name="l17530"></a><span class="lineno">17530</span>&#160;}</div>
<div class="line"><a name="l17531"></a><span class="lineno">17531</span>&#160;</div>
<div class="line"><a name="l17532"></a><span class="lineno">17532</span>&#160;</div>
<div class="line"><a name="l17533"></a><span class="lineno">17533</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> Helper137002(<span class="keywordtype">bool</span> do_store,</div>
<div class="line"><a name="l17534"></a><span class="lineno">17534</span>&#160;                         <span class="keywordtype">bool</span> polymorphic,</div>
<div class="line"><a name="l17535"></a><span class="lineno">17535</span>&#160;                         <span class="keywordtype">bool</span> remove_accessor,</div>
<div class="line"><a name="l17536"></a><span class="lineno">17536</span>&#160;                         <span class="keywordtype">bool</span> interceptor) {</div>
<div class="line"><a name="l17537"></a><span class="lineno">17537</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17538"></a><span class="lineno">17538</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l17539"></a><span class="lineno">17539</span>&#160;  <span class="keywordflow">if</span> (interceptor) {</div>
<div class="line"><a name="l17540"></a><span class="lineno">17540</span>&#160;    templ-&gt;SetNamedPropertyHandler(<a class="code" href="../../de/d3f/test-api_8cc.html#a5f9cc2080f13f303680c87b63c4e97b3">FooGetInterceptor</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a0ae29b3484cf60b0a039bbc152105275">FooSetInterceptor</a>);</div>
<div class="line"><a name="l17541"></a><span class="lineno">17541</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l17542"></a><span class="lineno">17542</span>&#160;    templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;foo&quot;</span>),</div>
<div class="line"><a name="l17543"></a><span class="lineno">17543</span>&#160;                       GetterWhichReturns42,</div>
<div class="line"><a name="l17544"></a><span class="lineno">17544</span>&#160;                       SetterWhichSetsYOnThisTo23);</div>
<div class="line"><a name="l17545"></a><span class="lineno">17545</span>&#160;  }</div>
<div class="line"><a name="l17546"></a><span class="lineno">17546</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l17547"></a><span class="lineno">17547</span>&#160;</div>
<div class="line"><a name="l17548"></a><span class="lineno">17548</span>&#160;  <span class="comment">// Turn monomorphic on slow object with native accessor, then turn</span></div>
<div class="line"><a name="l17549"></a><span class="lineno">17549</span>&#160;  <span class="comment">// polymorphic, finally optimize to create negative lookup and fail.</span></div>
<div class="line"><a name="l17550"></a><span class="lineno">17550</span>&#160;  CompileRun(do_store ?</div>
<div class="line"><a name="l17551"></a><span class="lineno">17551</span>&#160;             <span class="stringliteral">&quot;function f(x) { x.foo = void 0; }&quot;</span> :</div>
<div class="line"><a name="l17552"></a><span class="lineno">17552</span>&#160;             <span class="stringliteral">&quot;function f(x) { return x.foo; }&quot;</span>);</div>
<div class="line"><a name="l17553"></a><span class="lineno">17553</span>&#160;  CompileRun(<span class="stringliteral">&quot;obj.y = void 0;&quot;</span>);</div>
<div class="line"><a name="l17554"></a><span class="lineno">17554</span>&#160;  <span class="keywordflow">if</span> (!interceptor) {</div>
<div class="line"><a name="l17555"></a><span class="lineno">17555</span>&#160;    CompileRun(<span class="stringliteral">&quot;%OptimizeObjectForAddingMultipleProperties(obj, 1);&quot;</span>);</div>
<div class="line"><a name="l17556"></a><span class="lineno">17556</span>&#160;  }</div>
<div class="line"><a name="l17557"></a><span class="lineno">17557</span>&#160;  CompileRun(<span class="stringliteral">&quot;obj.__proto__ = null;&quot;</span></div>
<div class="line"><a name="l17558"></a><span class="lineno">17558</span>&#160;             <span class="stringliteral">&quot;f(obj); f(obj); f(obj);&quot;</span>);</div>
<div class="line"><a name="l17559"></a><span class="lineno">17559</span>&#160;  <span class="keywordflow">if</span> (polymorphic) {</div>
<div class="line"><a name="l17560"></a><span class="lineno">17560</span>&#160;    CompileRun(<span class="stringliteral">&quot;f({});&quot;</span>);</div>
<div class="line"><a name="l17561"></a><span class="lineno">17561</span>&#160;  }</div>
<div class="line"><a name="l17562"></a><span class="lineno">17562</span>&#160;  CompileRun(<span class="stringliteral">&quot;obj.y = void 0;&quot;</span></div>
<div class="line"><a name="l17563"></a><span class="lineno">17563</span>&#160;             <span class="stringliteral">&quot;%OptimizeFunctionOnNextCall(f);&quot;</span>);</div>
<div class="line"><a name="l17564"></a><span class="lineno">17564</span>&#160;  <span class="keywordflow">if</span> (remove_accessor) {</div>
<div class="line"><a name="l17565"></a><span class="lineno">17565</span>&#160;    CompileRun(<span class="stringliteral">&quot;delete obj.foo;&quot;</span>);</div>
<div class="line"><a name="l17566"></a><span class="lineno">17566</span>&#160;  }</div>
<div class="line"><a name="l17567"></a><span class="lineno">17567</span>&#160;  CompileRun(<span class="stringliteral">&quot;var result = f(obj);&quot;</span>);</div>
<div class="line"><a name="l17568"></a><span class="lineno">17568</span>&#160;  <span class="keywordflow">if</span> (do_store) {</div>
<div class="line"><a name="l17569"></a><span class="lineno">17569</span>&#160;    CompileRun(<span class="stringliteral">&quot;result = obj.y;&quot;</span>);</div>
<div class="line"><a name="l17570"></a><span class="lineno">17570</span>&#160;  }</div>
<div class="line"><a name="l17571"></a><span class="lineno">17571</span>&#160;  <span class="keywordflow">if</span> (remove_accessor &amp;&amp; !interceptor) {</div>
<div class="line"><a name="l17572"></a><span class="lineno">17572</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l17573"></a><span class="lineno">17573</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l17574"></a><span class="lineno">17574</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(do_store ? 23 : 42,</div>
<div class="line"><a name="l17575"></a><span class="lineno">17575</span>&#160;             context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;result&quot;</span>))-&gt;Int32Value());</div>
<div class="line"><a name="l17576"></a><span class="lineno">17576</span>&#160;  }</div>
<div class="line"><a name="l17577"></a><span class="lineno">17577</span>&#160;}</div>
<div class="line"><a name="l17578"></a><span class="lineno">17578</span>&#160;</div>
<div class="line"><a name="l17579"></a><span class="lineno">17579</span>&#160;</div>
<div class="line"><a name="l17580"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#add67af687918956459ba3c9a1af89d79">17580</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress137002a) {</div>
<div class="line"><a name="l17581"></a><span class="lineno">17581</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17582"></a><span class="lineno">17582</span>&#160;  i::FLAG_compilation_cache = <span class="keyword">false</span>;</div>
<div class="line"><a name="l17583"></a><span class="lineno">17583</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17584"></a><span class="lineno">17584</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; i++) {</div>
<div class="line"><a name="l17585"></a><span class="lineno">17585</span>&#160;    Helper137002(i &amp; 8, i &amp; 4, i &amp; 2, i &amp; 1);</div>
<div class="line"><a name="l17586"></a><span class="lineno">17586</span>&#160;  }</div>
<div class="line"><a name="l17587"></a><span class="lineno">17587</span>&#160;}</div>
<div class="line"><a name="l17588"></a><span class="lineno">17588</span>&#160;</div>
<div class="line"><a name="l17589"></a><span class="lineno">17589</span>&#160;</div>
<div class="line"><a name="l17590"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5215cfddff27063a47047e0c062a1b27">17590</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress137002b) {</div>
<div class="line"><a name="l17591"></a><span class="lineno">17591</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17592"></a><span class="lineno">17592</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17593"></a><span class="lineno">17593</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17594"></a><span class="lineno">17594</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l17595"></a><span class="lineno">17595</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;foo&quot;</span>),</div>
<div class="line"><a name="l17596"></a><span class="lineno">17596</span>&#160;                     GetterWhichReturns42,</div>
<div class="line"><a name="l17597"></a><span class="lineno">17597</span>&#160;                     SetterWhichSetsYOnThisTo23);</div>
<div class="line"><a name="l17598"></a><span class="lineno">17598</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l17599"></a><span class="lineno">17599</span>&#160;</div>
<div class="line"><a name="l17600"></a><span class="lineno">17600</span>&#160;  <span class="comment">// Turn monomorphic on slow object with native accessor, then just</span></div>
<div class="line"><a name="l17601"></a><span class="lineno">17601</span>&#160;  <span class="comment">// delete the property and fail.</span></div>
<div class="line"><a name="l17602"></a><span class="lineno">17602</span>&#160;  CompileRun(<span class="stringliteral">&quot;function load(x) { return x.foo; }&quot;</span></div>
<div class="line"><a name="l17603"></a><span class="lineno">17603</span>&#160;             <span class="stringliteral">&quot;function store(x) { x.foo = void 0; }&quot;</span></div>
<div class="line"><a name="l17604"></a><span class="lineno">17604</span>&#160;             <span class="stringliteral">&quot;function keyed_load(x, key) { return x[key]; }&quot;</span></div>
<div class="line"><a name="l17605"></a><span class="lineno">17605</span>&#160;             <span class="comment">// Second version of function has a different source (add void 0)</span></div>
<div class="line"><a name="l17606"></a><span class="lineno">17606</span>&#160;             <span class="comment">// so that it does not share code with the first version.  This</span></div>
<div class="line"><a name="l17607"></a><span class="lineno">17607</span>&#160;             <span class="comment">// ensures that the ICs are monomorphic.</span></div>
<div class="line"><a name="l17608"></a><span class="lineno">17608</span>&#160;             <span class="stringliteral">&quot;function load2(x) { void 0; return x.foo; }&quot;</span></div>
<div class="line"><a name="l17609"></a><span class="lineno">17609</span>&#160;             <span class="stringliteral">&quot;function store2(x) { void 0; x.foo = void 0; }&quot;</span></div>
<div class="line"><a name="l17610"></a><span class="lineno">17610</span>&#160;             <span class="stringliteral">&quot;function keyed_load2(x, key) { void 0; return x[key]; }&quot;</span></div>
<div class="line"><a name="l17611"></a><span class="lineno">17611</span>&#160;</div>
<div class="line"><a name="l17612"></a><span class="lineno">17612</span>&#160;             <span class="stringliteral">&quot;obj.y = void 0;&quot;</span></div>
<div class="line"><a name="l17613"></a><span class="lineno">17613</span>&#160;             <span class="stringliteral">&quot;obj.__proto__ = null;&quot;</span></div>
<div class="line"><a name="l17614"></a><span class="lineno">17614</span>&#160;             <span class="stringliteral">&quot;var subobj = {};&quot;</span></div>
<div class="line"><a name="l17615"></a><span class="lineno">17615</span>&#160;             <span class="stringliteral">&quot;subobj.y = void 0;&quot;</span></div>
<div class="line"><a name="l17616"></a><span class="lineno">17616</span>&#160;             <span class="stringliteral">&quot;subobj.__proto__ = obj;&quot;</span></div>
<div class="line"><a name="l17617"></a><span class="lineno">17617</span>&#160;             <span class="stringliteral">&quot;%OptimizeObjectForAddingMultipleProperties(obj, 1);&quot;</span></div>
<div class="line"><a name="l17618"></a><span class="lineno">17618</span>&#160;</div>
<div class="line"><a name="l17619"></a><span class="lineno">17619</span>&#160;             <span class="comment">// Make the ICs monomorphic.</span></div>
<div class="line"><a name="l17620"></a><span class="lineno">17620</span>&#160;             <span class="stringliteral">&quot;load(obj); load(obj);&quot;</span></div>
<div class="line"><a name="l17621"></a><span class="lineno">17621</span>&#160;             <span class="stringliteral">&quot;load2(subobj); load2(subobj);&quot;</span></div>
<div class="line"><a name="l17622"></a><span class="lineno">17622</span>&#160;             <span class="stringliteral">&quot;store(obj); store(obj);&quot;</span></div>
<div class="line"><a name="l17623"></a><span class="lineno">17623</span>&#160;             <span class="stringliteral">&quot;store2(subobj); store2(subobj);&quot;</span></div>
<div class="line"><a name="l17624"></a><span class="lineno">17624</span>&#160;             <span class="stringliteral">&quot;keyed_load(obj, &#39;foo&#39;); keyed_load(obj, &#39;foo&#39;);&quot;</span></div>
<div class="line"><a name="l17625"></a><span class="lineno">17625</span>&#160;             <span class="stringliteral">&quot;keyed_load2(subobj, &#39;foo&#39;); keyed_load2(subobj, &#39;foo&#39;);&quot;</span></div>
<div class="line"><a name="l17626"></a><span class="lineno">17626</span>&#160;</div>
<div class="line"><a name="l17627"></a><span class="lineno">17627</span>&#160;             <span class="comment">// Actually test the shiny new ICs and better not crash. This</span></div>
<div class="line"><a name="l17628"></a><span class="lineno">17628</span>&#160;             <span class="comment">// serves as a regression test for issue 142088 as well.</span></div>
<div class="line"><a name="l17629"></a><span class="lineno">17629</span>&#160;             <span class="stringliteral">&quot;load(obj);&quot;</span></div>
<div class="line"><a name="l17630"></a><span class="lineno">17630</span>&#160;             <span class="stringliteral">&quot;load2(subobj);&quot;</span></div>
<div class="line"><a name="l17631"></a><span class="lineno">17631</span>&#160;             <span class="stringliteral">&quot;store(obj);&quot;</span></div>
<div class="line"><a name="l17632"></a><span class="lineno">17632</span>&#160;             <span class="stringliteral">&quot;store2(subobj);&quot;</span></div>
<div class="line"><a name="l17633"></a><span class="lineno">17633</span>&#160;             <span class="stringliteral">&quot;keyed_load(obj, &#39;foo&#39;);&quot;</span></div>
<div class="line"><a name="l17634"></a><span class="lineno">17634</span>&#160;             <span class="stringliteral">&quot;keyed_load2(subobj, &#39;foo&#39;);&quot;</span></div>
<div class="line"><a name="l17635"></a><span class="lineno">17635</span>&#160;</div>
<div class="line"><a name="l17636"></a><span class="lineno">17636</span>&#160;             <span class="comment">// Delete the accessor.  It better not be called any more now.</span></div>
<div class="line"><a name="l17637"></a><span class="lineno">17637</span>&#160;             <span class="stringliteral">&quot;delete obj.foo;&quot;</span></div>
<div class="line"><a name="l17638"></a><span class="lineno">17638</span>&#160;             <span class="stringliteral">&quot;obj.y = void 0;&quot;</span></div>
<div class="line"><a name="l17639"></a><span class="lineno">17639</span>&#160;             <span class="stringliteral">&quot;subobj.y = void 0;&quot;</span></div>
<div class="line"><a name="l17640"></a><span class="lineno">17640</span>&#160;</div>
<div class="line"><a name="l17641"></a><span class="lineno">17641</span>&#160;             <span class="stringliteral">&quot;var load_result = load(obj);&quot;</span></div>
<div class="line"><a name="l17642"></a><span class="lineno">17642</span>&#160;             <span class="stringliteral">&quot;var load_result2 = load2(subobj);&quot;</span></div>
<div class="line"><a name="l17643"></a><span class="lineno">17643</span>&#160;             <span class="stringliteral">&quot;var keyed_load_result = keyed_load(obj, &#39;foo&#39;);&quot;</span></div>
<div class="line"><a name="l17644"></a><span class="lineno">17644</span>&#160;             <span class="stringliteral">&quot;var keyed_load_result2 = keyed_load2(subobj, &#39;foo&#39;);&quot;</span></div>
<div class="line"><a name="l17645"></a><span class="lineno">17645</span>&#160;             <span class="stringliteral">&quot;store(obj);&quot;</span></div>
<div class="line"><a name="l17646"></a><span class="lineno">17646</span>&#160;             <span class="stringliteral">&quot;store2(subobj);&quot;</span></div>
<div class="line"><a name="l17647"></a><span class="lineno">17647</span>&#160;             <span class="stringliteral">&quot;var y_from_obj = obj.y;&quot;</span></div>
<div class="line"><a name="l17648"></a><span class="lineno">17648</span>&#160;             <span class="stringliteral">&quot;var y_from_subobj = subobj.y;&quot;</span>);</div>
<div class="line"><a name="l17649"></a><span class="lineno">17649</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;load_result&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l17650"></a><span class="lineno">17650</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;load_result2&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l17651"></a><span class="lineno">17651</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;keyed_load_result&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l17652"></a><span class="lineno">17652</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;keyed_load_result2&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l17653"></a><span class="lineno">17653</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;y_from_obj&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l17654"></a><span class="lineno">17654</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Get(v8_str(<span class="stringliteral">&quot;y_from_subobj&quot;</span>))-&gt;IsUndefined());</div>
<div class="line"><a name="l17655"></a><span class="lineno">17655</span>&#160;}</div>
<div class="line"><a name="l17656"></a><span class="lineno">17656</span>&#160;</div>
<div class="line"><a name="l17657"></a><span class="lineno">17657</span>&#160;</div>
<div class="line"><a name="l17658"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#abf455ac23d137a3f157c31beec7f275a">17658</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress142088) {</div>
<div class="line"><a name="l17659"></a><span class="lineno">17659</span>&#160;  i::FLAG_allow_natives_syntax = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17660"></a><span class="lineno">17660</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17661"></a><span class="lineno">17661</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17662"></a><span class="lineno">17662</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l17663"></a><span class="lineno">17663</span>&#160;  templ-&gt;SetAccessor(v8_str(<span class="stringliteral">&quot;foo&quot;</span>),</div>
<div class="line"><a name="l17664"></a><span class="lineno">17664</span>&#160;                     GetterWhichReturns42,</div>
<div class="line"><a name="l17665"></a><span class="lineno">17665</span>&#160;                     SetterWhichSetsYOnThisTo23);</div>
<div class="line"><a name="l17666"></a><span class="lineno">17666</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;obj&quot;</span>), templ-&gt;NewInstance());</div>
<div class="line"><a name="l17667"></a><span class="lineno">17667</span>&#160;</div>
<div class="line"><a name="l17668"></a><span class="lineno">17668</span>&#160;  CompileRun(<span class="stringliteral">&quot;function load(x) { return x.foo; }&quot;</span></div>
<div class="line"><a name="l17669"></a><span class="lineno">17669</span>&#160;             <span class="stringliteral">&quot;var o = Object.create(obj);&quot;</span></div>
<div class="line"><a name="l17670"></a><span class="lineno">17670</span>&#160;             <span class="stringliteral">&quot;%OptimizeObjectForAddingMultipleProperties(obj, 1);&quot;</span></div>
<div class="line"><a name="l17671"></a><span class="lineno">17671</span>&#160;             <span class="stringliteral">&quot;load(o); load(o); load(o); load(o);&quot;</span>);</div>
<div class="line"><a name="l17672"></a><span class="lineno">17672</span>&#160;}</div>
<div class="line"><a name="l17673"></a><span class="lineno">17673</span>&#160;</div>
<div class="line"><a name="l17674"></a><span class="lineno">17674</span>&#160;</div>
<div class="line"><a name="l17675"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a5c0a8b81fc623096bf408178adeb73c1">17675</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress137496) {</div>
<div class="line"><a name="l17676"></a><span class="lineno">17676</span>&#160;  i::FLAG_expose_gc = <span class="keyword">true</span>;</div>
<div class="line"><a name="l17677"></a><span class="lineno">17677</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17678"></a><span class="lineno">17678</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17679"></a><span class="lineno">17679</span>&#160;</div>
<div class="line"><a name="l17680"></a><span class="lineno">17680</span>&#160;  <span class="comment">// Compile a try-finally clause where the finally block causes a GC</span></div>
<div class="line"><a name="l17681"></a><span class="lineno">17681</span>&#160;  <span class="comment">// while there still is a message pending for external reporting.</span></div>
<div class="line"><a name="l17682"></a><span class="lineno">17682</span>&#160;  TryCatch try_catch;</div>
<div class="line"><a name="l17683"></a><span class="lineno">17683</span>&#160;  try_catch.SetVerbose(<span class="keyword">true</span>);</div>
<div class="line"><a name="l17684"></a><span class="lineno">17684</span>&#160;  CompileRun(<span class="stringliteral">&quot;try { throw new Error(); } finally { gc(); }&quot;</span>);</div>
<div class="line"><a name="l17685"></a><span class="lineno">17685</span>&#160;  <a class="code" href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(try_catch.HasCaught());</div>
<div class="line"><a name="l17686"></a><span class="lineno">17686</span>&#160;}</div>
<div class="line"><a name="l17687"></a><span class="lineno">17687</span>&#160;</div>
<div class="line"><a name="l17688"></a><span class="lineno">17688</span>&#160;</div>
<div class="line"><a name="l17689"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a16dddd46264d845bbe0edc81d5a5ed81">17689</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress149912) {</div>
<div class="line"><a name="l17690"></a><span class="lineno">17690</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17691"></a><span class="lineno">17691</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17692"></a><span class="lineno">17692</span>&#160;  Handle&lt;FunctionTemplate&gt; templ = FunctionTemplate::New();</div>
<div class="line"><a name="l17693"></a><span class="lineno">17693</span>&#160;  <a class="code" href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a>(templ, <a class="code" href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0">EmptyInterceptorGetter</a>, <a class="code" href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd">EmptyInterceptorSetter</a>);</div>
<div class="line"><a name="l17694"></a><span class="lineno">17694</span>&#160;  context-&gt;<a class="code" href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">Global</a>()-&gt;Set(v8_str(<span class="stringliteral">&quot;Bug&quot;</span>), templ-&gt;GetFunction());</div>
<div class="line"><a name="l17695"></a><span class="lineno">17695</span>&#160;  CompileRun(<span class="stringliteral">&quot;Number.prototype.__proto__ = new Bug; var x = 0; x.foo();&quot;</span>);</div>
<div class="line"><a name="l17696"></a><span class="lineno">17696</span>&#160;}</div>
<div class="line"><a name="l17697"></a><span class="lineno">17697</span>&#160;</div>
<div class="line"><a name="l17698"></a><span class="lineno">17698</span>&#160;</div>
<div class="line"><a name="l17699"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#a08e2000c93e0ef18e557b5d0a05051b7">17699</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(Regress157124) {</div>
<div class="line"><a name="l17700"></a><span class="lineno">17700</span>&#160;  <a class="code" href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a> scope;</div>
<div class="line"><a name="l17701"></a><span class="lineno">17701</span>&#160;  <a class="code" href="../../d7/d05/class_local_context.html">LocalContext</a> context;</div>
<div class="line"><a name="l17702"></a><span class="lineno">17702</span>&#160;  Local&lt;ObjectTemplate&gt; templ = ObjectTemplate::New();</div>
<div class="line"><a name="l17703"></a><span class="lineno">17703</span>&#160;  Local&lt;Object&gt; obj = templ-&gt;NewInstance();</div>
<div class="line"><a name="l17704"></a><span class="lineno">17704</span>&#160;  obj-&gt;<a class="code" href="../../db/d85/classv8_1_1_object.html#a37e34871ca81f914b1a44645b55eee56">GetIdentityHash</a>();</div>
<div class="line"><a name="l17705"></a><span class="lineno">17705</span>&#160;  obj-&gt;DeleteHiddenValue(v8_str(<span class="stringliteral">&quot;Bug&quot;</span>));</div>
<div class="line"><a name="l17706"></a><span class="lineno">17706</span>&#160;}</div>
<div class="line"><a name="l17707"></a><span class="lineno">17707</span>&#160;</div>
<div class="line"><a name="l17708"></a><span class="lineno">17708</span>&#160;</div>
<div class="line"><a name="l17709"></a><span class="lineno">17709</span>&#160;<span class="preprocessor">#ifndef WIN32</span></div>
<div class="line"><a name="l17710"></a><span class="lineno"><a class="line" href="../../d5/dce/class_thread_interrupt_test.html">17710</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d5/dce/class_thread_interrupt_test.html">ThreadInterruptTest</a> {</div>
<div class="line"><a name="l17711"></a><span class="lineno">17711</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l17712"></a><span class="lineno"><a class="line" href="../../d5/dce/class_thread_interrupt_test.html#a31f59789b8164da1f1c89800834aa2ec">17712</a></span>&#160;  <a class="code" href="../../d5/dce/class_thread_interrupt_test.html#a31f59789b8164da1f1c89800834aa2ec">ThreadInterruptTest</a>() : sem_(<a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>), sem_value_(0) { }</div>
<div class="line"><a name="l17713"></a><span class="lineno"><a class="line" href="../../d5/dce/class_thread_interrupt_test.html#a7bcf17c6622af1cb0dd95180fe207d81">17713</a></span>&#160;  <a class="code" href="../../d5/dce/class_thread_interrupt_test.html#a7bcf17c6622af1cb0dd95180fe207d81">~ThreadInterruptTest</a>() { <span class="keyword">delete</span> sem_; }</div>
<div class="line"><a name="l17714"></a><span class="lineno">17714</span>&#160;</div>
<div class="line"><a name="l17715"></a><span class="lineno"><a class="line" href="../../d5/dce/class_thread_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">17715</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d5/dce/class_thread_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RunTest</a>() {</div>
<div class="line"><a name="l17716"></a><span class="lineno">17716</span>&#160;    sem_ = <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#afa44df2a14037562568d7f965d50833c">i::OS::CreateSemaphore</a>(0);</div>
<div class="line"><a name="l17717"></a><span class="lineno">17717</span>&#160;</div>
<div class="line"><a name="l17718"></a><span class="lineno">17718</span>&#160;    InterruptThread i_thread(<span class="keyword">this</span>);</div>
<div class="line"><a name="l17719"></a><span class="lineno">17719</span>&#160;    i_thread.Start();</div>
<div class="line"><a name="l17720"></a><span class="lineno">17720</span>&#160;</div>
<div class="line"><a name="l17721"></a><span class="lineno">17721</span>&#160;    sem_-&gt;<a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a7a15988824b783d07f7f7b5a226118d3">Wait</a>();</div>
<div class="line"><a name="l17722"></a><span class="lineno">17722</span>&#160;    <a class="code" href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a>(kExpectedValue, sem_value_);</div>
<div class="line"><a name="l17723"></a><span class="lineno">17723</span>&#160;  }</div>
<div class="line"><a name="l17724"></a><span class="lineno">17724</span>&#160;</div>
<div class="line"><a name="l17725"></a><span class="lineno">17725</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l17726"></a><span class="lineno">17726</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kExpectedValue = 1;</div>
<div class="line"><a name="l17727"></a><span class="lineno">17727</span>&#160;</div>
<div class="line"><a name="l17728"></a><span class="lineno">17728</span>&#160;  <span class="keyword">class </span>InterruptThread : <span class="keyword">public</span> <a class="code" href="../../db/d61/classv8_1_1internal_1_1_thread.html">i::Thread</a> {</div>
<div class="line"><a name="l17729"></a><span class="lineno">17729</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l17730"></a><span class="lineno">17730</span>&#160;    <span class="keyword">explicit</span> InterruptThread(<a class="code" href="../../d5/dce/class_thread_interrupt_test.html">ThreadInterruptTest</a>* test)</div>
<div class="line"><a name="l17731"></a><span class="lineno">17731</span>&#160;        : Thread(<span class="stringliteral">&quot;InterruptThread&quot;</span>), test_(test) {}</div>
<div class="line"><a name="l17732"></a><span class="lineno">17732</span>&#160;</div>
<div class="line"><a name="l17733"></a><span class="lineno">17733</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Run() {</div>
<div class="line"><a name="l17734"></a><span class="lineno">17734</span>&#160;      <span class="keyword">struct </span>sigaction action;</div>
<div class="line"><a name="l17735"></a><span class="lineno">17735</span>&#160;</div>
<div class="line"><a name="l17736"></a><span class="lineno">17736</span>&#160;      <span class="comment">// Ensure that we&#39;ll enter waiting condition</span></div>
<div class="line"><a name="l17737"></a><span class="lineno">17737</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a93167fd3ca0557191f8854f4236e29e4">i::OS::Sleep</a>(100);</div>
<div class="line"><a name="l17738"></a><span class="lineno">17738</span>&#160;</div>
<div class="line"><a name="l17739"></a><span class="lineno">17739</span>&#160;      <span class="comment">// Setup signal handler</span></div>
<div class="line"><a name="l17740"></a><span class="lineno">17740</span>&#160;      memset(&amp;action, 0, <span class="keyword">sizeof</span>(action));</div>
<div class="line"><a name="l17741"></a><span class="lineno">17741</span>&#160;      action.sa_handler = SignalHandler;</div>
<div class="line"><a name="l17742"></a><span class="lineno">17742</span>&#160;      sigaction(SIGCHLD, &amp;action, <a class="code" href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a>);</div>
<div class="line"><a name="l17743"></a><span class="lineno">17743</span>&#160;</div>
<div class="line"><a name="l17744"></a><span class="lineno">17744</span>&#160;      <span class="comment">// Send signal</span></div>
<div class="line"><a name="l17745"></a><span class="lineno">17745</span>&#160;      kill(getpid(), SIGCHLD);</div>
<div class="line"><a name="l17746"></a><span class="lineno">17746</span>&#160;</div>
<div class="line"><a name="l17747"></a><span class="lineno">17747</span>&#160;      <span class="comment">// Ensure that if wait has returned because of error</span></div>
<div class="line"><a name="l17748"></a><span class="lineno">17748</span>&#160;      <a class="code" href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a93167fd3ca0557191f8854f4236e29e4">i::OS::Sleep</a>(100);</div>
<div class="line"><a name="l17749"></a><span class="lineno">17749</span>&#160;</div>
<div class="line"><a name="l17750"></a><span class="lineno">17750</span>&#160;      <span class="comment">// Set value and signal semaphore</span></div>
<div class="line"><a name="l17751"></a><span class="lineno">17751</span>&#160;      test_-&gt;sem_value_ = 1;</div>
<div class="line"><a name="l17752"></a><span class="lineno">17752</span>&#160;      test_-&gt;sem_-&gt;Signal();</div>
<div class="line"><a name="l17753"></a><span class="lineno">17753</span>&#160;    }</div>
<div class="line"><a name="l17754"></a><span class="lineno">17754</span>&#160;</div>
<div class="line"><a name="l17755"></a><span class="lineno">17755</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> SignalHandler(<span class="keywordtype">int</span> signal) {</div>
<div class="line"><a name="l17756"></a><span class="lineno">17756</span>&#160;    }</div>
<div class="line"><a name="l17757"></a><span class="lineno">17757</span>&#160;</div>
<div class="line"><a name="l17758"></a><span class="lineno">17758</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l17759"></a><span class="lineno">17759</span>&#160;     <a class="code" href="../../d5/dce/class_thread_interrupt_test.html">ThreadInterruptTest</a>* test_;</div>
<div class="line"><a name="l17760"></a><span class="lineno">17760</span>&#160;     <span class="keyword">struct </span>sigaction sa_;</div>
<div class="line"><a name="l17761"></a><span class="lineno">17761</span>&#160;  };</div>
<div class="line"><a name="l17762"></a><span class="lineno">17762</span>&#160;</div>
<div class="line"><a name="l17763"></a><span class="lineno">17763</span>&#160;  <a class="code" href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html">i::Semaphore</a>* sem_;</div>
<div class="line"><a name="l17764"></a><span class="lineno">17764</span>&#160;  <span class="keyword">volatile</span> <span class="keywordtype">int</span> sem_value_;</div>
<div class="line"><a name="l17765"></a><span class="lineno">17765</span>&#160;};</div>
<div class="line"><a name="l17766"></a><span class="lineno">17766</span>&#160;</div>
<div class="line"><a name="l17767"></a><span class="lineno">17767</span>&#160;</div>
<div class="line"><a name="l17768"></a><span class="lineno"><a class="line" href="../../de/d3f/test-api_8cc.html#aeba5d833da2d31fce5f2b315b522dd6c">17768</a></span>&#160;<a class="code" href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a>(SemaphoreInterruption) {</div>
<div class="line"><a name="l17769"></a><span class="lineno">17769</span>&#160;  <a class="code" href="../../d5/dce/class_thread_interrupt_test.html">ThreadInterruptTest</a>().<a class="code" href="../../d5/dce/class_thread_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RunTest</a>();</div>
<div class="line"><a name="l17770"></a><span class="lineno">17770</span>&#160;}</div>
<div class="line"><a name="l17771"></a><span class="lineno">17771</span>&#160;<span class="preprocessor">#endif  // WIN32</span></div>
<div class="ttc" id="class_api_test_fuzzer_html_a681847cb468289c483c1f110b251f91c"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a681847cb468289c483c1f110b251f91c">ApiTestFuzzer::RunAllTests</a></div><div class="ttdeci">static void RunAllTests()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10693">test-api.cc:10693</a></div></div>
<div class="ttc" id="class_test_ascii_resource_with_dispose_control_html"><div class="ttname"><a href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html">TestAsciiResourceWithDisposeControl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00664">test-api.cc:664</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html_a2628ea8d12e8b2563c32f05dc7fff6faab78fc0987507f8c657dd2944d2a48190"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html#a2628ea8d12e8b2563c32f05dc7fff6faab78fc0987507f8c657dd2944d2a48190">v8::JitCodeEvent::CODE_MOVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02977">v8.h:2977</a></div></div>
<div class="ttc" id="classv8_1_1_handle_html_afbb012bc8bb3acd6ab0392351d250fd6"><div class="ttname"><a href="../../d3/dd5/classv8_1_1_handle.html#afbb012bc8bb3acd6ab0392351d250fd6">v8::Handle::As</a></div><div class="ttdeci">Handle&lt; S &gt; As()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00253">v8.h:253</a></div></div>
<div class="ttc" id="test-api_8cc_html_a50ecadf05fb5b2f3a3f479367dfa3ed1"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a50ecadf05fb5b2f3a3f479367dfa3ed1">NonStrictArgsIndexedPropertyEnumerator</a></div><div class="ttdeci">Handle&lt; v8::Array &gt; NonStrictArgsIndexedPropertyEnumerator(const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l04119">test-api.cc:4119</a></div></div>
<div class="ttc" id="test-api_8cc_html_ab74796fdba209fc526f9359ec28cbe4e"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ab74796fdba209fc526f9359ec28cbe4e">keyed_call_ic_function</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; keyed_call_ic_function</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10007">test-api.cc:10007</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html_a07ed7ff5822c6ee836fdf94010f76f67"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html#a07ed7ff5822c6ee836fdf94010f76f67">v8::Isolate::GetCurrent</a></div><div class="ttdeci">static Isolate * GetCurrent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05520">api.cc:5520</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_a61fe0349d692eb6d4f5b94e35049b2e9ab0fde864055dfa96caf80b6d8f86164c"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ab0fde864055dfa96caf80b6d8f86164c">InitDefaultIsolateThread::SetFatalHandler</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16020">test-api.cc:16020</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_html_a5610d667bc793ba0af838bb134941bec"><div class="ttname"><a href="../../d2/d78/classv8_1_1_persistent.html#a5610d667bc793ba0af838bb134941bec">v8::Persistent::MakeWeak</a></div><div class="ttdeci">void MakeWeak(void *parameters, WeakReferenceCallback callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04245">v8.h:4245</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092abaa5e2c0b6fc91ef63346d8868785a7380"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaa5e2c0b6fc91ef63346d8868785a7380">v8::kExternalUnsignedByteArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01433">v8.h:1433</a></div></div>
<div class="ttc" id="test-api_8cc_html_a31809c337ea681c13197f38ca38a116e"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a31809c337ea681c13197f38ca38a116e">OOMCallback</a></div><div class="ttdeci">void OOMCallback(const char *location, const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05179">test-api.cc:5179</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a1eb1a8d3d782d6567661dc32158c735c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a1eb1a8d3d782d6567661dc32158c735c">v8::internal::s2</a></div><div class="ttdeci">const SwVfpRegister s2</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00277">assembler-arm.h:277</a></div></div>
<div class="ttc" id="classv8_1_1_local_html_a626f0925cb54d03f780b48ec9538618c"><div class="ttname"><a href="../../de/deb/classv8_1_1_local.html#a626f0925cb54d03f780b48ec9538618c">v8::Local::As</a></div><div class="ttdeci">Local&lt; S &gt; As()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00291">v8.h:291</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092abaacd0bd2f6b7d36994c497006da9bb9a1"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaacd0bd2f6b7d36994c497006da9bb9a1">v8::kExternalShortArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01434">v8.h:1434</a></div></div>
<div class="ttc" id="namespacev8_html_a7a892b6d7692bbde54cbce6345010016"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a7a892b6d7692bbde54cbce6345010016">v8::NamedPropertyEnumerator</a></div><div class="ttdeci">Handle&lt; Array &gt;(* NamedPropertyEnumerator)(const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02086">v8.h:2086</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba969d0001baf19ba54a2ac8d6b3017247">v8::kExternalDoubleArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01439">v8.h:1439</a></div></div>
<div class="ttc" id="classv8_1_1_message_html_a899f334df613533a45ce9bf7ee23e1d3"><div class="ttname"><a href="../../d9/d28/classv8_1_1_message.html#a899f334df613533a45ce9bf7ee23e1d3">v8::Message::GetScriptData</a></div><div class="ttdeci">Handle&lt; Value &gt; GetScriptData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01810">api.cc:1810</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba83de6d43b24922bfe3778e8ff6b63eaa">v8::kExternalPixelArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01440">v8.h:1440</a></div></div>
<div class="ttc" id="classv8_1_1_unlocker_html"><div class="ttname"><a href="../../d6/da8/classv8_1_1_unlocker.html">v8::Unlocker</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03881">v8.h:3881</a></div></div>
<div class="ttc" id="class_whammy_html_a0f00375b491ca77495883a3a39d6215f"><div class="ttname"><a href="../../d8/dc7/class_whammy.html#a0f00375b491ca77495883a3a39d6215f">Whammy::script_</a></div><div class="ttdeci">v8::Persistent&lt; Script &gt; script_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05242">test-api.cc:5242</a></div></div>
<div class="ttc" id="test-api_8cc_html_a5ec71a180fc7b6e909170dbd40572ec2"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a5ec71a180fc7b6e909170dbd40572ec2">some_object</a></div><div class="ttdeci">v8::Persistent&lt; v8::Object &gt; some_object</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10962">test-api.cc:10962</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a21bbf71d057f8357a5345fa4ee8b1593"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a21bbf71d057f8357a5345fa4ee8b1593">v8::Value::NumberValue</a></div><div class="ttdeci">V8EXPORT double NumberValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02555">api.cc:2555</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_paged_space_html"><div class="ttname"><a href="../../d4/dbe/classv8_1_1internal_1_1_paged_space.html">v8::internal::PagedSpace</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d0e/spaces_8h_source.html#l01445">spaces.h:1445</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_aae0c133e20dffd0173c04284eaaece96"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#aae0c133e20dffd0173c04284eaaece96">v8::Object::Cast</a></div><div class="ttdeci">static Object * Cast(Value *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04581">v8.h:4581</a></div></div>
<div class="ttc" id="classv8_1_1_script_html_aa7b74acaf5ab0ca34e877897315f45be"><div class="ttname"><a href="../../d0/d35/classv8_1_1_script.html#aa7b74acaf5ab0ca34e877897315f45be">v8::Script::Compile</a></div><div class="ttdeci">static Local&lt; Script &gt; Compile(Handle&lt; String &gt; source, ScriptOrigin *origin=NULL, ScriptData *pre_data=NULL, Handle&lt; String &gt; script_data=Handle&lt; String &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01568">api.cc:1568</a></div></div>
<div class="ttc" id="classv8_1_1_stack_frame_html_a66c1993510fe48d9661aadbbe820ae42"><div class="ttname"><a href="../../dd/d1e/classv8_1_1_stack_frame.html#a66c1993510fe48d9661aadbbe820ae42">v8::StackFrame::GetLineNumber</a></div><div class="ttdeci">int GetLineNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02021">api.cc:2021</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ae585d6bcec7e52a46e0e4447bfb2f7f3"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ae585d6bcec7e52a46e0e4447bfb2f7f3">v8::internal::FlattenString</a></div><div class="ttdeci">void FlattenString(Handle&lt; String &gt; string)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d59/handles_8cc_source.html#l00211">handles.cc:211</a></div></div>
<div class="ttc" id="classv8_1_1_stack_frame_html_a4ecb181a0cf276e6928278c4b1b97a5e"><div class="ttname"><a href="../../dd/d1e/classv8_1_1_stack_frame.html#a4ecb181a0cf276e6928278c4b1b97a5e">v8::StackFrame::IsEval</a></div><div class="ttdeci">bool IsEval() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02101">api.cc:2101</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a90d1860babc76059c62514b422f56960"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a90d1860babc76059c62514b422f56960">v8::V8::AddGCEpilogueCallback</a></div><div class="ttdeci">static void AddGCEpilogueCallback(GCEpilogueCallback callback, GCType gc_type_filter=kGCTypeAll)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05413">api.cc:5413</a></div></div>
<div class="ttc" id="test-api_8cc_html_a44d15035536053db713a59d8b31c6506"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a44d15035536053db713a59d8b31c6506">calling_context2</a></div><div class="ttdeci">v8::Persistent&lt; Context &gt; calling_context2</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12937">test-api.cc:12937</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a31f16ef6450aa6baf436312775c7ba1f"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a31f16ef6450aa6baf436312775c7ba1f">v8::Object::HasRealIndexedProperty</a></div><div class="ttdeci">V8EXPORT bool HasRealIndexedProperty(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03144">api.cc:3144</a></div></div>
<div class="ttc" id="class_apply_interrupt_test_html_af0016d843fa7eaa248fa6e0bbfc22a3e"><div class="ttname"><a href="../../d3/de5/class_apply_interrupt_test.html#af0016d843fa7eaa248fa6e0bbfc22a3e">ApplyInterruptTest::ApplyInterruptTest</a></div><div class="ttdeci">ApplyInterruptTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12245">test-api.cc:12245</a></div></div>
<div class="ttc" id="class_test_ascii_resource_with_dispose_control_html_aea89afb6498296ae8bd87a32ff2b1a41"><div class="ttname"><a href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#aea89afb6498296ae8bd87a32ff2b1a41">TestAsciiResourceWithDisposeControl::TestAsciiResourceWithDisposeControl</a></div><div class="ttdeci">TestAsciiResourceWithDisposeControl(const char *data, bool dispose)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00670">test-api.cc:670</a></div></div>
<div class="ttc" id="classv8_1_1_resource_constraints_html_acbc7f014a83bddf32a5a29f5c9d6e6b0"><div class="ttname"><a href="../../d8/dcd/classv8_1_1_resource_constraints.html#acbc7f014a83bddf32a5a29f5c9d6e6b0">v8::ResourceConstraints::set_max_young_space_size</a></div><div class="ttdeci">void set_max_young_space_size(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02638">v8.h:2638</a></div></div>
<div class="ttc" id="class_visitor_impl_html_a731527c3f44aad863f2d91708d3b63ce"><div class="ttname"><a href="../../d4/dff/class_visitor_impl.html#a731527c3f44aad863f2d91708d3b63ce">VisitorImpl::~VisitorImpl</a></div><div class="ttdeci">virtual ~VisitorImpl()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14824">test-api.cc:14824</a></div></div>
<div class="ttc" id="test-api_8cc_html_a3204a6aaeafab10dfcb5d27ff555bca5"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a3204a6aaeafab10dfcb5d27ff555bca5">CheckThisIndexedPropertyEnumerator</a></div><div class="ttdeci">v8::Handle&lt; v8::Array &gt; CheckThisIndexedPropertyEnumerator(const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01759">test-api.cc:1759</a></div></div>
<div class="ttc" id="checks_8h_html_a0ea8f66bf4733597f9a514fda2151ff9"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a0ea8f66bf4733597f9a514fda2151ff9">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(expected, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00219">checks.h:219</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a3d46ba6a258e0029819606fe47d50c24"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a3d46ba6a258e0029819606fe47d50c24">v8::Value::IsTrue</a></div><div class="ttdeci">V8EXPORT bool IsTrue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02143">api.cc:2143</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a9e59bbcddcbc63c44571384a4a0bbd4ea229260f339f7a6497d50fa56da453d6f"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ea229260f339f7a6497d50fa56da453d6f">ApiTestFuzzer::THIRD_PART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00103">cctest.h:103</a></div></div>
<div class="ttc" id="class_apply_interrupt_test_html_a1256c7ec975dc043b1ffcddc1770c242"><div class="ttname"><a href="../../d3/de5/class_apply_interrupt_test.html#a1256c7ec975dc043b1ffcddc1770c242">ApplyInterruptTest::~ApplyInterruptTest</a></div><div class="ttdeci">~ApplyInterruptTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12246">test-api.cc:12246</a></div></div>
<div class="ttc" id="classv8_1_1_stack_trace_html_a89b65449dacd0657ba2879a82343c500"><div class="ttname"><a href="../../d4/d7e/classv8_1_1_stack_trace.html#a89b65449dacd0657ba2879a82343c500">v8::StackTrace::AsArray</a></div><div class="ttdeci">Local&lt; Array &gt; AsArray()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01998">api.cc:1998</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a06849058029857834d4d07b57477f9a0"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a06849058029857834d4d07b57477f9a0">v8::Object::GetIndexedPropertiesPixelData</a></div><div class="ttdeci">V8EXPORT uint8_t * GetIndexedPropertiesPixelData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03435">api.cc:3435</a></div></div>
<div class="ttc" id="test-api_8cc_html_ac556072dce9a92c1f996885a0f0195f6"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ac556072dce9a92c1f996885a0f0195f6">call_ic_function</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; call_ic_function</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l09247">test-api.cc:9247</a></div></div>
<div class="ttc" id="test-api_8cc_html_a0ceb407a44c9b5feb35f48d97b1fad6d"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a0ceb407a44c9b5feb35f48d97b1fad6d">StoringErrorCallback</a></div><div class="ttdeci">void StoringErrorCallback(const char *location, const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05146">test-api.cc:5146</a></div></div>
<div class="ttc" id="class_reg_exp_string_modification_test_html_ab7ad81664d7bb8b80e9249b482984c5c"><div class="ttname"><a href="../../d4/d1b/class_reg_exp_string_modification_test.html#ab7ad81664d7bb8b80e9249b482984c5c">RegExpStringModificationTest::RegExpStringModificationTest</a></div><div class="ttdeci">RegExpStringModificationTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12532">test-api.cc:12532</a></div></div>
<div class="ttc" id="test-thread-termination_8cc_html_a6b2ceb968be9cf25c70635f8862d8187"><div class="ttname"><a href="../../d1/deb/test-thread-termination_8cc.html#a6b2ceb968be9cf25c70635f8862d8187">Fail</a></div><div class="ttdeci">v8::Handle&lt; v8::Value &gt; Fail(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/deb/test-thread-termination_8cc_source.html#l00049">test-thread-termination.cc:49</a></div></div>
<div class="ttc" id="class_thread_interrupt_test_html"><div class="ttname"><a href="../../d5/dce/class_thread_interrupt_test.html">ThreadInterruptTest</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17710">test-api.cc:17710</a></div></div>
<div class="ttc" id="classv8_1_1_function_template_html_a3b5a2868860b0414c3607f6cf1567b78"><div class="ttname"><a href="../../d8/d83/classv8_1_1_function_template.html#a3b5a2868860b0414c3607f6cf1567b78">v8::FunctionTemplate::New</a></div><div class="ttdeci">static Local&lt; FunctionTemplate &gt; New(InvocationCallback callback=0, Handle&lt; Value &gt; data=Handle&lt; Value &gt;(), Handle&lt; Signature &gt; signature=Handle&lt; Signature &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00951">api.cc:951</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_external_ascii_string_html"><div class="ttname"><a href="../../d2/da1/classv8_1_1internal_1_1_external_ascii_string.html">v8::internal::ExternalAsciiString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l07762">objects.h:7762</a></div></div>
<div class="ttc" id="api_8h_html"><div class="ttname"><a href="../../dc/d65/api_8h.html">api.h</a></div></div>
<div class="ttc" id="test-api_8cc_html_a7854f298cf2216e5fdcdbad2ffdce3b0"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a7854f298cf2216e5fdcdbad2ffdce3b0">AnalyzeStackOfEvalWithSourceURL</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; AnalyzeStackOfEvalWithSourceURL(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14510">test-api.cc:14510</a></div></div>
<div class="ttc" id="class_snorkel_html"><div class="ttname"><a href="../../dc/d63/class_snorkel.html">Snorkel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05218">test-api.cc:5218</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a06fa9cce622455b667e417e7ca367b7d"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a06fa9cce622455b667e417e7ca367b7d">v8::Object::DeleteHiddenValue</a></div><div class="ttdeci">V8EXPORT bool DeleteHiddenValue(Handle&lt; String &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03336">api.cc:3336</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html_a6e2d745cdb7a7b983f861ed6a9a541a7"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html#a6e2d745cdb7a7b983f861ed6a9a541a7">v8::Isolate::Dispose</a></div><div class="ttdeci">void Dispose()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05532">api.cc:5532</a></div></div>
<div class="ttc" id="namespacev8_html_a50252b3ef3537127f61f73c2d3888092"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a50252b3ef3537127f61f73c2d3888092">v8::True</a></div><div class="ttdeci">Handle&lt; Boolean &gt; V8EXPORT True()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00569">api.cc:569</a></div></div>
<div class="ttc" id="classv8_1_1_reg_exp_html_a97f3bf95cbc8b98f6757e01543b6231c"><div class="ttname"><a href="../../d8/da7/classv8_1_1_reg_exp.html#a97f3bf95cbc8b98f6757e01543b6231c">v8::RegExp::GetSource</a></div><div class="ttdeci">V8EXPORT Local&lt; String &gt; GetSource() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05125">api.cc:5125</a></div></div>
<div class="ttc" id="namespacev8_html_ab44395db331fcf83b5c90b611c2ae234"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ab44395db331fcf83b5c90b611c2ae234">v8::CallCompletedCallback</a></div><div class="ttdeci">void(* CallCompletedCallback)()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02724">v8.h:2724</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_object_html_a25498e38628343f204c8dc99c642860d"><div class="ttname"><a href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html#a25498e38628343f204c8dc99c642860d">v8::internal::HeapObject::map</a></div><div class="ttdeci">Map * map()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01138">objects-inl.h:1138</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092aba01beba98d449b55760d59b1aa8453218"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba01beba98d449b55760d59b1aa8453218">v8::kExternalIntArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01436">v8.h:1436</a></div></div>
<div class="ttc" id="namespacev8_html_aeec8c2ccbd1b0395e45bf657b0a3a469"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#aeec8c2ccbd1b0395e45bf657b0a3a469">v8::NamedPropertySetter</a></div><div class="ttdeci">Handle&lt; Value &gt;(* NamedPropertySetter)(Local&lt; String &gt; property, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02061">v8.h:2061</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a931587596081ef8178c2b128facb0411"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a931587596081ef8178c2b128facb0411">ApiTestFuzzer::TearDown</a></div><div class="ttdeci">static void TearDown()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10725">test-api.cc:10725</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_html_a6e2d745cdb7a7b983f861ed6a9a541a7"><div class="ttname"><a href="../../d2/d78/classv8_1_1_persistent.html#a6e2d745cdb7a7b983f861ed6a9a541a7">v8::Persistent::Dispose</a></div><div class="ttdeci">void Dispose()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04235">v8.h:4235</a></div></div>
<div class="ttc" id="test-api_8cc_html_a7a4d78675ec5fd928bc5b45c59b7cc95"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a7a4d78675ec5fd928bc5b45c59b7cc95">HasOwnPropertyAccessorGetter</a></div><div class="ttdeci">Handle&lt; Value &gt; HasOwnPropertyAccessorGetter(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16594">test-api.cc:16594</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html_a1a6a7739e9cc01ba888b57d1f9457f4c"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html#a1a6a7739e9cc01ba888b57d1f9457f4c">v8::Isolate::Exit</a></div><div class="ttdeci">void Exit()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05549">api.cc:5549</a></div></div>
<div class="ttc" id="classv8_1_1_external_resource_visitor_html"><div class="ttname"><a href="../../de/dde/classv8_1_1_external_resource_visitor.html">v8::ExternalResourceVisitor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03023">v8.h:3023</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_thread_html_a3606d28cd3d14f56295c9ebcc6deff6e"><div class="ttname"><a href="../../db/d61/classv8_1_1internal_1_1_thread.html#a3606d28cd3d14f56295c9ebcc6deff6e">v8::internal::Thread::Thread</a></div><div class="ttdeci">Thread(const Options &amp;options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dd7/platform-cygwin_8cc_source.html#l00371">platform-cygwin.cc:371</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_vector_html"><div class="ttname"><a href="../../d5/d7d/classv8_1_1internal_1_1_vector.html">v8::internal::Vector&lt; const char &gt;</a></div></div>
<div class="ttc" id="classv8_1_1_handle_scope_html"><div class="ttname"><a href="../../d3/d95/classv8_1_1_handle_scope.html">v8::HandleScope</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00446">v8.h:446</a></div></div>
<div class="ttc" id="test-api_8cc_html_acfe62fd67d857025ff23d03385661686"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#acfe62fd67d857025ff23d03385661686">ThrowFromC</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; ThrowFromC(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l03048">test-api.cc:3048</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_a88645a52ecdc721d37a2ab824fa1c291"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#a88645a52ecdc721d37a2ab824fa1c291">v8::Context::SetSecurityToken</a></div><div class="ttdeci">void SetSecurityToken(Handle&lt; Value &gt; token)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04485">api.cc:4485</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a65b4d97cc9755f7f99556dbe87d829ee"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a65b4d97cc9755f7f99556dbe87d829ee">v8::TryCatch::Exception</a></div><div class="ttdeci">Local&lt; Value &gt; Exception() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01720">api.cc:1720</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_html"><div class="ttname"><a href="../../da/dde/classv8_1_1internal_1_1_handle.html">v8::internal::Handle&lt; i::String &gt;</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_map_cache_html_ac480767f3d6cb0b39867907faf8c632d"><div class="ttname"><a href="../../de/d42/classv8_1_1internal_1_1_map_cache.html#ac480767f3d6cb0b39867907faf8c632d">v8::internal::MapCache::cast</a></div><div class="ttdeci">static MapCache * cast(Object *obj)</div></div>
<div class="ttc" id="class_whammy_html"><div class="ttname"><a href="../../d8/dc7/class_whammy.html">Whammy</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05224">test-api.cc:5224</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html_a16c743224521a93df2bdb054a7573919"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html#a16c743224521a93df2bdb054a7573919">v8::Isolate::GetData</a></div><div class="ttdeci">void * GetData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04675">v8.h:4675</a></div></div>
<div class="ttc" id="classv8_1_1_string_1_1_external_ascii_string_resource_html"><div class="ttname"><a href="../../de/dea/classv8_1_1_string_1_1_external_ascii_string_resource.html">v8::String::ExternalAsciiStringResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01177">v8.h:1177</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_internals_html_a73369102de320e8f97d4469e72127c27"><div class="ttname"><a href="../../d3/d01/classv8_1_1internal_1_1_internals.html#a73369102de320e8f97d4469e72127c27">v8::internal::Internals::IsInitialized</a></div><div class="ttdeci">static bool IsInitialized(v8::Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04148">v8.h:4148</a></div></div>
<div class="ttc" id="test-api_8cc_html_a9926945cf5cbfcc21be4782697c783f8"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a9926945cf5cbfcc21be4782697c783f8">CallCompletedCallbackNoException</a></div><div class="ttdeci">void CallCompletedCallbackNoException()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17130">test-api.cc:17130</a></div></div>
<div class="ttc" id="test-api_8cc_html_a4975dd062d6f5f17a8ee20177807fe22"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a4975dd062d6f5f17a8ee20177807fe22">HandleCreatingCallback</a></div><div class="ttdeci">void HandleCreatingCallback(v8::Persistent&lt; v8::Value &gt; handle, void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l11019">test-api.cc:11019</a></div></div>
<div class="ttc" id="test-api_8cc_html_af90a8b30ea193850b6006272e2ce21be"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#af90a8b30ea193850b6006272e2ce21be">calling_context1</a></div><div class="ttdeci">v8::Persistent&lt; Context &gt; calling_context1</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12936">test-api.cc:12936</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_af0cd01c3c7904eb9537f2b15d09e8b76"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#af0cd01c3c7904eb9537f2b15d09e8b76">v8::Value::StrictEquals</a></div><div class="ttdeci">V8EXPORT bool StrictEquals(Handle&lt; Value &gt; that) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02711">api.cc:2711</a></div></div>
<div class="ttc" id="test-api_8cc_html_a60e148f86c89a0ff9b49db29fa614948"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a60e148f86c89a0ff9b49db29fa614948">InterceptorSetter</a></div><div class="ttdeci">Handle&lt; Value &gt; InterceptorSetter(Local&lt; String &gt; name, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01403">test-api.cc:1403</a></div></div>
<div class="ttc" id="classv8_1_1_arguments_html_a2a24da997322cb518c30467a10a54582"><div class="ttname"><a href="../../df/d31/classv8_1_1_arguments.html#a2a24da997322cb518c30467a10a54582">v8::Arguments::Holder</a></div><div class="ttdeci">Local&lt; Object &gt; Holder() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04297">v8.h:4297</a></div></div>
<div class="ttc" id="class_reg_exp_interrupt_test_html_a0b6a206fe3e5c8926eaceb5eb50fa102"><div class="ttname"><a href="../../dc/d6f/class_reg_exp_interrupt_test.html#a0b6a206fe3e5c8926eaceb5eb50fa102">RegExpInterruptTest::~RegExpInterruptTest</a></div><div class="ttdeci">~RegExpInterruptTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12123">test-api.cc:12123</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_html_ab7f36531c05fb591f26fb461d0ce560e"><div class="ttname"><a href="../../d2/d78/classv8_1_1_persistent.html#ab7f36531c05fb591f26fb461d0ce560e">v8::Persistent::IsIndependent</a></div><div class="ttdeci">bool IsIndependent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04214">v8.h:4214</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_aeb420b690bc2c216882d6fdd00ddd3ea"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#aeb420b690bc2c216882d6fdd00ddd3ea">v8::V8::SetAddHistogramSampleFunction</a></div><div class="ttdeci">static void SetAddHistogramSampleFunction(AddHistogramSampleCallback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05328">api.cc:5328</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_ae7de191a8ae03d9dbdc72c1c2c433cda"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#ae7de191a8ae03d9dbdc72c1c2c433cda">v8::Context::HasOutOfMemoryException</a></div><div class="ttdeci">bool HasOutOfMemoryException()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04521">api.cc:4521</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a15d9f2b57d7fc06e12259c976c7d66fc"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a15d9f2b57d7fc06e12259c976c7d66fc">v8::Object::Get</a></div><div class="ttdeci">V8EXPORT Local&lt; Value &gt; Get(Handle&lt; Value &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02853">api.cc:2853</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_a53259c85a9a7f54c354c7871cb340073"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a53259c85a9a7f54c354c7871cb340073">v8::internal::Smi::FromInt</a></div><div class="ttdeci">static Smi * FromInt(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l00981">objects-inl.h:981</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_acb34d79df34b47ae4c19a4458e381760"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#acb34d79df34b47ae4c19a4458e381760">v8::Value::IsNativeError</a></div><div class="ttdeci">V8EXPORT bool IsNativeError() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02279">api.cc:2279</a></div></div>
<div class="ttc" id="namespacev8_html_a28fb95f8f3ce5a9f3ff7fc78bd2fd812"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a28fb95f8f3ce5a9f3ff7fc78bd2fd812">v8::RegisterExtension</a></div><div class="ttdeci">void V8EXPORT RegisterExtension(Extension *extension)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00526">api.cc:526</a></div></div>
<div class="ttc" id="classv8_1_1_object_template_html_afcc882983702100ce4f5550102b04ef4"><div class="ttname"><a href="../../db/d5f/classv8_1_1_object_template.html#afcc882983702100ce4f5550102b04ef4">v8::ObjectTemplate::NewInstance</a></div><div class="ttdeci">Local&lt; Object &gt; NewInstance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04660">api.cc:4660</a></div></div>
<div class="ttc" id="test-api_8cc_html_a9703311748e8706c3e1e0de1408f93a9"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a9703311748e8706c3e1e0de1408f93a9">PrologueCallback</a></div><div class="ttdeci">void PrologueCallback(v8::GCType, v8::GCCallbackFlags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15374">test-api.cc:15374</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_thread_html_ac24a06ec0749cb482b60f621833bddd7"><div class="ttname"><a href="../../db/d61/classv8_1_1internal_1_1_thread.html#ac24a06ec0749cb482b60f621833bddd7">v8::internal::Thread::Join</a></div><div class="ttdeci">void Join()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dd7/platform-cygwin_8cc_source.html#l00414">platform-cygwin.cc:414</a></div></div>
<div class="ttc" id="checks_8h_html_ad5a1a3bc35696ef5a1070bca3a419c99"><div class="ttname"><a href="../../d5/d16/checks_8h.html#ad5a1a3bc35696ef5a1070bca3a419c99">CHECK_GT</a></div><div class="ttdeci">#define CHECK_GT(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00227">checks.h:227</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a68f455077e74f15d67c6cc1664dbc266"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a68f455077e74f15d67c6cc1664dbc266">v8::TryCatch::HasCaught</a></div><div class="ttdeci">bool HasCaught() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01703">api.cc:1703</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a93e45647c7bcfa01615f28ff07d3cea6"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a93e45647c7bcfa01615f28ff07d3cea6">v8::Object::GetOwnPropertyNames</a></div><div class="ttdeci">V8EXPORT Local&lt; Array &gt; GetOwnPropertyNames()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02967">api.cc:2967</a></div></div>
<div class="ttc" id="test-api_8cc_html_aaa262b83e38c857579e8aa51aa8286ed"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aaa262b83e38c857579e8aa51aa8286ed">to_be_disposed</a></div><div class="ttdeci">v8::Persistent&lt; v8::Object &gt; to_be_disposed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10992">test-api.cc:10992</a></div></div>
<div class="ttc" id="test-api_8cc_html_ae25f8fd0c4557f1cefea87301ba89fe8"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ae25f8fd0c4557f1cefea87301ba89fe8">echo_named_call_count</a></div><div class="ttdeci">int echo_named_call_count</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01353">test-api.cc:1353</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_a61fe0349d692eb6d4f5b94e35049b2e9ad50a20511938e2c9133354e009589786"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ad50a20511938e2c9133354e009589786">InitDefaultIsolateThread::SetCreateHistogramFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16022">test-api.cc:16022</a></div></div>
<div class="ttc" id="test-api_8cc_html_afc18414e00f3bbca3cb7d808d413f763"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#afc18414e00f3bbca3cb7d808d413f763">SimpleAccessorSetter</a></div><div class="ttdeci">void SimpleAccessorSetter(Local&lt; String &gt; name, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01372">test-api.cc:1372</a></div></div>
<div class="ttc" id="classv8_1_1_reg_exp_html_aa705cf7e79a21c2352b00ffe20cd295fa634ee767a8e90ff4d56e140459cca31f"><div class="ttname"><a href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa634ee767a8e90ff4d56e140459cca31f">v8::RegExp::kNone</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01910">v8.h:1910</a></div></div>
<div class="ttc" id="test-api_8cc_html_a533d8ca37e03a21e017446e5c58fe18a"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a533d8ca37e03a21e017446e5c58fe18a">CheckThisIndexedPropertyQuery</a></div><div class="ttdeci">v8::Handle&lt; v8::Integer &gt; CheckThisIndexedPropertyQuery(uint32_t index, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01724">test-api.cc:1724</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_acdcf5d4989c90704a02ad57b74c8c787"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#acdcf5d4989c90704a02ad57b74c8c787">v8::Value::IsBooleanObject</a></div><div class="ttdeci">V8EXPORT bool IsBooleanObject() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02298">api.cc:2298</a></div></div>
<div class="ttc" id="class_whammy_html_a7a4cc3395fe3742d1e50e6fd87bc3d7e"><div class="ttname"><a href="../../d8/dc7/class_whammy.html#a7a4cc3395fe3742d1e50e6fd87bc3d7e">Whammy::~Whammy</a></div><div class="ttdeci">~Whammy()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05229">test-api.cc:5229</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_html_a306bd25814bd1c8e9a575e1edb78a46c"><div class="ttname"><a href="../../da/dde/classv8_1_1internal_1_1_handle.html#a306bd25814bd1c8e9a575e1edb78a46c">v8::internal::Handle::cast</a></div><div class="ttdeci">static Handle&lt; T &gt; cast(Handle&lt; S &gt; that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d23/handles_8h_source.html#l00081">handles.h:81</a></div></div>
<div class="ttc" id="classv8_1_1_message_html_a723798740011db75f68bed2d5ccb4cd4"><div class="ttname"><a href="../../d9/d28/classv8_1_1_message.html#a723798740011db75f68bed2d5ccb4cd4">v8::Message::Get</a></div><div class="ttdeci">Local&lt; String &gt; Get() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01781">api.cc:1781</a></div></div>
<div class="ttc" id="classv8_1_1_script_origin_html"><div class="ttname"><a href="../../db/d84/classv8_1_1_script_origin.html">v8::ScriptOrigin</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00576">v8.h:576</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092ababd033480d69e1512a6db34e87876b480"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ababd033480d69e1512a6db34e87876b480">v8::kExternalByteArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01432">v8.h:1432</a></div></div>
<div class="ttc" id="test-api_8cc_html_aaadb2ee5c6928d254ef1f0d8b6abb4e6"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aaadb2ee5c6928d254ef1f0d8b6abb4e6">pass_on_get</a></div><div class="ttdeci">bool pass_on_get</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12691">test-api.cc:12691</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_aa852ccbfa09e21c28c91e3441ae60689"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#aa852ccbfa09e21c28c91e3441ae60689">v8::V8::SetCaptureStackTraceForUncaughtExceptions</a></div><div class="ttdeci">static void SetCaptureStackTraceForUncaughtExceptions(bool capture, int frame_limit=10, StackTrace::StackTraceOptions options=StackTrace::kOverview)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05303">api.cc:5303</a></div></div>
<div class="ttc" id="classv8_1_1_array_html_a95e772350f060d14d943dbf383548d14"><div class="ttname"><a href="../../d3/d32/classv8_1_1_array.html#a95e772350f060d14d943dbf383548d14">v8::Array::Cast</a></div><div class="ttdeci">static Array * Cast(Value *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04589">v8.h:4589</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_ab67376a3a3c63a23aaa6fba85d120526"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#ab67376a3a3c63a23aaa6fba85d120526">v8::Context::AllowCodeGenerationFromStrings</a></div><div class="ttdeci">void AllowCodeGenerationFromStrings(bool allow)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04606">api.cc:4606</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a4e0912d12d080f5b9772b2f13b4ef994"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a4e0912d12d080f5b9772b2f13b4ef994">v8::String::New</a></div><div class="ttdeci">static V8EXPORT Local&lt; String &gt; New(const char *data, int length=-1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04779">api.cc:4779</a></div></div>
<div class="ttc" id="classv8_1_1_arguments_html_a0310a886b8284573e22313dcb3b113cc"><div class="ttname"><a href="../../df/d31/classv8_1_1_arguments.html#a0310a886b8284573e22313dcb3b113cc">v8::Arguments::Callee</a></div><div class="ttdeci">Local&lt; Function &gt; Callee() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04286">v8.h:4286</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a60a11034b4c054d30552619e26db9937"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a60a11034b4c054d30552619e26db9937">v8::internal::kSmiValueSize</a></div><div class="ttdeci">const int kSmiValueSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04061">v8.h:4061</a></div></div>
<div class="ttc" id="test-api_8cc_html_ae450e102a29ba2c99b73e153f9f4a485"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ae450e102a29ba2c99b73e153f9f4a485">epilogue_call_count</a></div><div class="ttdeci">int epilogue_call_count</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15370">test-api.cc:15370</a></div></div>
<div class="ttc" id="classv8_1_1_script_html_a404713fb4376624c69f531ee50b9db90"><div class="ttname"><a href="../../d0/d35/classv8_1_1_script.html#a404713fb4376624c69f531ee50b9db90">v8::Script::SetData</a></div><div class="ttdeci">void SetData(Handle&lt; String &gt; data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01660">api.cc:1660</a></div></div>
<div class="ttc" id="test-api_8cc_html_a645c702b2c82d731a30a67d774f95c8d"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a645c702b2c82d731a30a67d774f95c8d">AnalyzeStackInNativeCode</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; AnalyzeStackInNativeCode(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14223">test-api.cc:14223</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html_a8b4e89ec6d0d6198cff345e5162c1ce9"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html#a8b4e89ec6d0d6198cff345e5162c1ce9">v8::internal::String::IsAsciiRepresentation</a></div><div class="ttdeci">bool IsAsciiRepresentation()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l00290">objects-inl.h:290</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html_a86e5125350ff81eea971701cf8ad5fa5"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html#a86e5125350ff81eea971701cf8ad5fa5">v8::JitCodeEvent::new_code_start</a></div><div class="ttdeci">void * new_code_start</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02998">v8.h:2998</a></div></div>
<div class="ttc" id="class_u_c16_vector_resource_html_a55f81a5d35a7271bff4b4b3c50778e0d"><div class="ttname"><a href="../../d4/d2b/class_u_c16_vector_resource.html#a55f81a5d35a7271bff4b4b3c50778e0d">UC16VectorResource::UC16VectorResource</a></div><div class="ttdeci">UC16VectorResource(i::Vector&lt; const i::uc16 &gt; vector)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12400">test-api.cc:12400</a></div></div>
<div class="ttc" id="classv8_1_1_context_1_1_scope_html"><div class="ttname"><a href="../../de/d41/classv8_1_1_context_1_1_scope.html">v8::Context::Scope</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03781">v8.h:3781</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_external_two_byte_string_html_af3ce25de865a8cce7740f323036f3894"><div class="ttname"><a href="../../d2/d61/classv8_1_1internal_1_1_external_two_byte_string.html#af3ce25de865a8cce7740f323036f3894">v8::internal::ExternalTwoByteString::cast</a></div><div class="ttdeci">static ExternalTwoByteString * cast(Object *obj)</div></div>
<div class="ttc" id="test-api_8cc_html_ab7767fcf1fc0e3b9bb802ee127ba9bcb"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ab7767fcf1fc0e3b9bb802ee127ba9bcb">checkStackFrame</a></div><div class="ttdeci">void checkStackFrame(const char *expected_script_name, const char *expected_func_name, int expected_line_number, int expected_column, bool is_eval, bool is_constructor, v8::Handle&lt; v8::StackFrame &gt; frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14202">test-api.cc:14202</a></div></div>
<div class="ttc" id="test-api_8cc_html_a414d7d6e89a88152d43f0b1ff473b80e"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a414d7d6e89a88152d43f0b1ff473b80e">ProvokeOutOfMemory</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; ProvokeOutOfMemory(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l02762">test-api.cc:2762</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_addcda0c4dcf08343f940bd923ff08f6e"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#addcda0c4dcf08343f940bd923ff08f6e">v8::String::NewSymbol</a></div><div class="ttdeci">static V8EXPORT Local&lt; String &gt; NewSymbol(const char *data, int length=-1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05203">api.cc:5203</a></div></div>
<div class="ttc" id="class_thread_interrupt_test_html_a4a2eff499a3c811ef4d814024ba98ef0"><div class="ttname"><a href="../../d5/dce/class_thread_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">ThreadInterruptTest::RunTest</a></div><div class="ttdeci">void RunTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17715">test-api.cc:17715</a></div></div>
<div class="ttc" id="classv8_1_1_function_template_html_a7f38518da88507c8f2580b7ecb35317c"><div class="ttname"><a href="../../d8/d83/classv8_1_1_function_template.html#a7f38518da88507c8f2580b7ecb35317c">v8::FunctionTemplate::InstanceTemplate</a></div><div class="ttdeci">Local&lt; ObjectTemplate &gt; InstanceTemplate()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01122">api.cc:1122</a></div></div>
<div class="ttc" id="test-api_8cc_html_a0ae29b3484cf60b0a039bbc152105275"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a0ae29b3484cf60b0a039bbc152105275">FooSetInterceptor</a></div><div class="ttdeci">Handle&lt; Value &gt; FooSetInterceptor(Local&lt; String &gt; name, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15229">test-api.cc:15229</a></div></div>
<div class="ttc" id="namespacev8_html_ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ac0b65a8f15b3622b2dd2e5d6427b82a7">v8::ACCESS_HAS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02134">v8.h:2134</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a9e59bbcddcbc63c44571384a4a0bbd4eada621347bd95e2408d21301c0ef090c5"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4eada621347bd95e2408d21301c0ef090c5">ApiTestFuzzer::FOURTH_PART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00104">cctest.h:104</a></div></div>
<div class="ttc" id="classv8_1_1_heap_statistics_html_a723f8e2afa6e5852cf86046cb7e9220b"><div class="ttname"><a href="../../d0/d9e/classv8_1_1_heap_statistics.html#a723f8e2afa6e5852cf86046cb7e9220b">v8::HeapStatistics::used_heap_size</a></div><div class="ttdeci">size_t used_heap_size()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02776">v8.h:2776</a></div></div>
<div class="ttc" id="namespacev8_html_a2b822c3fdce0fedc6860872e5ebe48ae"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a2b822c3fdce0fedc6860872e5ebe48ae">v8::Null</a></div><div class="ttdeci">Handle&lt; Primitive &gt; V8EXPORT Null()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00559">api.cc:559</a></div></div>
<div class="ttc" id="classv8_1_1_integer_html"><div class="ttname"><a href="../../df/d84/classv8_1_1_integer.html">v8::Integer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01388">v8.h:1388</a></div></div>
<div class="ttc" id="classv8_1_1_object_html"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html">v8::Object</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01481">v8.h:1481</a></div></div>
<div class="ttc" id="class_whammy_html_aa32d37db82770d682b4f065e066031a8"><div class="ttname"><a href="../../d8/dc7/class_whammy.html#aa32d37db82770d682b4f065e066031a8">Whammy::getScript</a></div><div class="ttdeci">v8::Handle&lt; Script &gt; getScript()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05232">test-api.cc:5232</a></div></div>
<div class="ttc" id="test-api_8cc_html_ad8bd9ba42c1053f18d6da1c42e41d6d9"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ad8bd9ba42c1053f18d6da1c42e41d6d9">calling_context0</a></div><div class="ttdeci">v8::Persistent&lt; Context &gt; calling_context0</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12935">test-api.cc:12935</a></div></div>
<div class="ttc" id="class_reg_exp_string_modification_test_html_a0071cb23d701921dd5a0a118f71084b5"><div class="ttname"><a href="../../d4/d1b/class_reg_exp_string_modification_test.html#a0071cb23d701921dd5a0a118f71084b5">RegExpStringModificationTest::~RegExpStringModificationTest</a></div><div class="ttdeci">~RegExpStringModificationTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12538">test-api.cc:12538</a></div></div>
<div class="ttc" id="namespaceunibrow_html_a32f2e37ee053cf2ce8ca28d1f74630e5"><div class="ttname"><a href="../../d7/df6/namespaceunibrow.html#a32f2e37ee053cf2ce8ca28d1f74630e5">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/unicode_8cc_source.html#l00047">unicode.cc:47</a></div></div>
<div class="ttc" id="namespacev8_html_a93b6eadc434acc3fd8c23b3bfdffce04"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a93b6eadc434acc3fd8c23b3bfdffce04">v8::MessageCallback</a></div><div class="ttdeci">void(* MessageCallback)(Handle&lt; Message &gt; message, Handle&lt; Value &gt; error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02663">v8.h:2663</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a3db046bd24439f8607466712a507a741"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a3db046bd24439f8607466712a507a741">v8::Object::HasRealNamedCallbackProperty</a></div><div class="ttdeci">V8EXPORT bool HasRealNamedCallbackProperty(Handle&lt; String &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03152">api.cc:3152</a></div></div>
<div class="ttc" id="classv8_1_1_boolean_object_html"><div class="ttname"><a href="../../d9/d73/classv8_1_1_boolean_object.html">v8::BooleanObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01865">v8.h:1865</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a9ecfd465b398ba83e69a2c2c8855e29b"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a9ecfd465b398ba83e69a2c2c8855e29b">v8::Object::GetHiddenValue</a></div><div class="ttdeci">V8EXPORT Local&lt; Value &gt; GetHiddenValue(Handle&lt; String &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03322">api.cc:3322</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#afe0c8382c7538527acc84c987be6c595a301d3e92bcf2f8986b1eb28c9afeb54e">v8::internal::kNonStrictMode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00398">globals.h:398</a></div></div>
<div class="ttc" id="classv8_1_1_handle_html_aa096c30831ccfdc10b35ef64698b5af2"><div class="ttname"><a href="../../d3/dd5/classv8_1_1_handle.html#aa096c30831ccfdc10b35ef64698b5af2">v8::Handle::Cast</a></div><div class="ttdeci">static Handle&lt; T &gt; Cast(Handle&lt; S &gt; that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00244">v8.h:244</a></div></div>
<div class="ttc" id="classv8_1_1_heap_statistics_html"><div class="ttname"><a href="../../d0/d9e/classv8_1_1_heap_statistics.html">v8::HeapStatistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02771">v8.h:2771</a></div></div>
<div class="ttc" id="classv8_1_1_exception_html_a44f54ef2da1a05eae6014be7874d1104"><div class="ttname"><a href="../../da/d6a/classv8_1_1_exception.html#a44f54ef2da1a05eae6014be7874d1104">v8::Exception::Error</a></div><div class="ttdeci">static Local&lt; Value &gt; Error(Handle&lt; String &gt; message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05683">api.cc:5683</a></div></div>
<div class="ttc" id="test-log-stack-tracer_8cc_html_a39f7231eef589ea82f0b77319ef65e81"><div class="ttname"><a href="../../d6/d1b/test-log-stack-tracer_8cc.html#a39f7231eef589ea82f0b77319ef65e81">sample</a></div><div class="ttdeci">TickSample * sample</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1b/test-log-stack-tracer_8cc_source.html#l00062">test-log-stack-tracer.cc:62</a></div></div>
<div class="ttc" id="classv8_1_1_object_template_html_ad3baf9d0959cbc49663a33718d7dd8a3"><div class="ttname"><a href="../../db/d5f/classv8_1_1_object_template.html#ad3baf9d0959cbc49663a33718d7dd8a3">v8::ObjectTemplate::SetIndexedPropertyHandler</a></div><div class="ttdeci">void SetIndexedPropertyHandler(IndexedPropertyGetter getter, IndexedPropertySetter setter=0, IndexedPropertyQuery query=0, IndexedPropertyDeleter deleter=0, IndexedPropertyEnumerator enumerator=0, Handle&lt; Value &gt; data=Handle&lt; Value &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01386">api.cc:1386</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a4c61b6c0198474fdbac883678c8fbe26"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a4c61b6c0198474fdbac883678c8fbe26">v8::internal::SetAccessor</a></div><div class="ttdeci">Handle&lt; Object &gt; SetAccessor(Handle&lt; JSObject &gt; obj, Handle&lt; AccessorInfo &gt; info)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d59/handles_8cc_source.html#l00342">handles.cc:342</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a3c379929a1274f8a2ba585a5eef66338"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a3c379929a1274f8a2ba585a5eef66338">v8::Object::GetPropertyNames</a></div><div class="ttdeci">V8EXPORT Local&lt; Array &gt; GetPropertyNames()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02946">api.cc:2946</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_aa24aa2b4fb6a2679defa63c70cf0ac02"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#aa24aa2b4fb6a2679defa63c70cf0ac02">v8::Object::GetIndexedPropertiesExternalArrayDataType</a></div><div class="ttdeci">V8EXPORT ExternalArrayType GetIndexedPropertiesExternalArrayDataType()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03505">api.cc:3505</a></div></div>
<div class="ttc" id="checks_8h_html_a2929b40885e8516ac074f2b53e033402"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a2929b40885e8516ac074f2b53e033402">CHECK_LT</a></div><div class="ttdeci">#define CHECK_LT(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00229">checks.h:229</a></div></div>
<div class="ttc" id="classv8_1_1_function_html_a0857617e4f2a360ecc9a558a66cdbff4"><div class="ttname"><a href="../../d5/d54/classv8_1_1_function.html#a0857617e4f2a360ecc9a558a66cdbff4">v8::Function::Call</a></div><div class="ttdeci">V8EXPORT Local&lt; Value &gt; Call(Handle&lt; Object &gt; recv, int argc, Handle&lt; Value &gt; argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03652">api.cc:3652</a></div></div>
<div class="ttc" id="test-api_8cc_html_a31cbde74293feb6ee3f9c85c52973936"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a31cbde74293feb6ee3f9c85c52973936">THREADED_TEST</a></div><div class="ttdeci">THREADED_TEST(Handles)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00146">test-api.cc:146</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092aba886c1ba4452a68ef7bf383f0e4b94b6e"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba886c1ba4452a68ef7bf383f0e4b94b6e">v8::kExternalUnsignedShortArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01435">v8.h:1435</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_af2fba9108a440a65d6918672ef0d7081"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#af2fba9108a440a65d6918672ef0d7081">v8::Value::IsRegExp</a></div><div class="ttdeci">V8EXPORT bool IsRegExp() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02306">api.cc:2306</a></div></div>
<div class="ttc" id="compilation-cache_8h_html"><div class="ttname"><a href="../../de/dea/compilation-cache_8h.html">compilation-cache.h</a></div></div>
<div class="ttc" id="class_visitor_impl_html_aa151a5343398765ebfe61a9ac10c400a"><div class="ttname"><a href="../../d4/dff/class_visitor_impl.html#aa151a5343398765ebfe61a9ac10c400a">VisitorImpl::VisitExternalString</a></div><div class="ttdeci">virtual void VisitExternalString(v8::Handle&lt; v8::String &gt; string)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14825">test-api.cc:14825</a></div></div>
<div class="ttc" id="namespacev8_html_ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478ae85016f5beef662f5c834470bd0062b1">v8::ACCESS_GET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02132">v8.h:2132</a></div></div>
<div class="ttc" id="checks_8h_html_ac22830a985e1daed0c9eadba8c6f606e"><div class="ttname"><a href="../../d5/d16/checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a></div><div class="ttdeci">#define ASSERT(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00270">checks.h:270</a></div></div>
<div class="ttc" id="classv8_1_1_handle_html_aa71d36872f416feaa853788a7a7a7ef8"><div class="ttname"><a href="../../d3/dd5/classv8_1_1_handle.html#aa71d36872f416feaa853788a7a7a7ef8">v8::Handle::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00214">v8.h:214</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a07aa85791067a2785e0ba6c0f31c67c6"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a07aa85791067a2785e0ba6c0f31c67c6">v8::V8::AddMessageListener</a></div><div class="ttdeci">static bool AddMessageListener(MessageCallback that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05273">api.cc:5273</a></div></div>
<div class="ttc" id="namespacev8_html_a8490f8c3ad68a8c8b419500f6ab95be0adbef2a13294bb25b573c0b8848cbb03c"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a8490f8c3ad68a8c8b419500f6ab95be0adbef2a13294bb25b573c0b8848cbb03c">v8::kJitCodeEventDefault</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03006">v8.h:3006</a></div></div>
<div class="ttc" id="class_isolate_thread_html_aa3eca255b6be227d7d901cc2a72017a5"><div class="ttname"><a href="../../d5/d7c/class_isolate_thread.html#aa3eca255b6be227d7d901cc2a72017a5">IsolateThread::Run</a></div><div class="ttdeci">void Run()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15952">test-api.cc:15952</a></div></div>
<div class="ttc" id="test-api_8cc_html_a3c31857e5f7402225b227674222a5028"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a3c31857e5f7402225b227674222a5028">WhammyPropertyGetter</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; WhammyPropertyGetter(Local&lt; String &gt; name, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05251">test-api.cc:5251</a></div></div>
<div class="ttc" id="class_register_threaded_test_html_a19c8896164e1d6e87aa70fee2621a726"><div class="ttname"><a href="../../dd/d72/class_register_threaded_test.html#a19c8896164e1d6e87aa70fee2621a726">RegisterThreadedTest::fuzzer_</a></div><div class="ttdeci">ApiTestFuzzer * fuzzer_</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00155">cctest.h:155</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092ab"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092ab">v8::ExternalArrayType</a></div><div class="ttdeci">ExternalArrayType</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01431">v8.h:1431</a></div></div>
<div class="ttc" id="test-api_8cc_html_aa29c07229bf364873702f5f1ccde11f0"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aa29c07229bf364873702f5f1ccde11f0">CheckProperties</a></div><div class="ttdeci">void CheckProperties(v8::Handle&lt; v8::Value &gt; val, int elmc, const char *elmv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l11553">test-api.cc:11553</a></div></div>
<div class="ttc" id="namespaceunibrow_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="../../d7/df6/namespaceunibrow.html#a273cf69d639a59973b6019625df33e30">unibrow::uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/unicode_8cc_source.html#l00046">unicode.cc:46</a></div></div>
<div class="ttc" id="test-api_8cc_html_aff4453b613830466f1275e222d0e54d1"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aff4453b613830466f1275e222d0e54d1">DisposingCallback</a></div><div class="ttdeci">void DisposingCallback(v8::Persistent&lt; v8::Value &gt; handle, void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l11015">test-api.cc:11015</a></div></div>
<div class="ttc" id="test-api_8cc_html_a21ff6163c1eebe32997f52d4b23b56ed"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a21ff6163c1eebe32997f52d4b23b56ed">DirectGetterCallback</a></div><div class="ttdeci">v8::Handle&lt; v8::Value &gt; DirectGetterCallback(Local&lt; String &gt; name, const v8::AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l09633">test-api.cc:9633</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a30331f5519297dbb4d00ca8301509b64"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a30331f5519297dbb4d00ca8301509b64">v8::Object::GetIndexedPropertiesExternalArrayData</a></div><div class="ttdeci">V8EXPORT void * GetIndexedPropertiesExternalArrayData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03492">api.cc:3492</a></div></div>
<div class="ttc" id="test-api_8cc_html_ac1cd5d2ce060c79e6b90430f2ab29fa5"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ac1cd5d2ce060c79e6b90430f2ab29fa5">call_recursively_script</a></div><div class="ttdeci">v8::Handle&lt; Script &gt; call_recursively_script</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01871">test-api.cc:1871</a></div></div>
<div class="ttc" id="classv8_1_1_arguments_html_a1ce111e30d6e5e8be601b45725d9142d"><div class="ttname"><a href="../../df/d31/classv8_1_1_arguments.html#a1ce111e30d6e5e8be601b45725d9142d">v8::Arguments::Data</a></div><div class="ttdeci">Local&lt; Value &gt; Data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04303">v8.h:4303</a></div></div>
<div class="ttc" id="classv8_1_1_external_html_a9afc917ecc5fdc54838866190aeddb2f"><div class="ttname"><a href="../../d8/d0f/classv8_1_1_external.html#a9afc917ecc5fdc54838866190aeddb2f">v8::External::Wrap</a></div><div class="ttdeci">static V8EXPORT Local&lt; Value &gt; Wrap(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04707">api.cc:4707</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0c32b379e3be65ce7c8fe0bfe51eb7eaaf3d0d752de4b5754a85fcdaaf0a2f26c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0c32b379e3be65ce7c8fe0bfe51eb7eaaf3d0d752de4b5754a85fcdaaf0a2f26c">v8::internal::TENURED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00196">v8globals.h:196</a></div></div>
<div class="ttc" id="class_whammy_html_a3f4e7f7c94fca48e9390185dc334533d"><div class="ttname"><a href="../../d8/dc7/class_whammy.html#a3f4e7f7c94fca48e9390185dc334533d">Whammy::Whammy</a></div><div class="ttdeci">Whammy()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05226">test-api.cc:5226</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a005f4159ea3c831f5e3e696b7680bf4a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a005f4159ea3c831f5e3e696b7680bf4a">v8::internal::instance_template</a></div><div class="ttdeci">kPropertyAccessorsOffset kNamedPropertyHandlerOffset instance_template</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03860">objects-inl.h:3860</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_afc0676f870438bb47ac16969295d56a4"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#afc0676f870438bb47ac16969295d56a4">v8::Object::GetInternalField</a></div><div class="ttdeci">Local&lt; Value &gt; GetInternalField(int index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04355">v8.h:4355</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_snapshot_html_a8a49d253d7a89ed87906e2ac33c48eaa"><div class="ttname"><a href="../../dc/d52/classv8_1_1internal_1_1_snapshot.html#a8a49d253d7a89ed87906e2ac33c48eaa">v8::internal::Snapshot::IsEnabled</a></div><div class="ttdeci">static bool IsEnabled()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/snapshot_8h_source.html#l00049">snapshot.h:49</a></div></div>
<div class="ttc" id="classv8_1_1_script_data_html"><div class="ttname"><a href="../../dc/dad/classv8_1_1_script_data.html">v8::ScriptData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00524">v8.h:524</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a91b68fb0b5558f1c9539015c1bbf7af2"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a91b68fb0b5558f1c9539015c1bbf7af2">v8::Value::ToString</a></div><div class="ttdeci">V8EXPORT Local&lt; String &gt; ToString() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02313">api.cc:2313</a></div></div>
<div class="ttc" id="platform_8h_html"><div class="ttname"><a href="../../de/d03/platform_8h.html">platform.h</a></div></div>
<div class="ttc" id="test-api_8cc_html_a99f79a043be8e4de7f839d0fb024a93a"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a99f79a043be8e4de7f839d0fb024a93a">JSCheck</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; JSCheck(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l03306">test-api.cc:3306</a></div></div>
<div class="ttc" id="class_function_extension_html"><div class="ttname"><a href="../../dc/d4c/class_function_extension.html">FunctionExtension</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05088">test-api.cc:5088</a></div></div>
<div class="ttc" id="checks_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00056">checks.h:56</a></div></div>
<div class="ttc" id="namespacev8_html_aca9e3d6c74a00ec39599be55fda66820"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#aca9e3d6c74a00ec39599be55fda66820">v8::IndexedPropertySetter</a></div><div class="ttdeci">Handle&lt; Value &gt;(* IndexedPropertySetter)(uint32_t index, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02101">v8.h:2101</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6e83dd17c5de4dbc4a77cf6622fd385d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6e83dd17c5de4dbc4a77cf6622fd385d">v8::internal::r2</a></div><div class="ttdeci">const Register r2</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00150">assembler-arm.h:150</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a9e59bbcddcbc63c44571384a4a0bbd4ea114d34b421021eb2ac7e5f44da41db78"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ea114d34b421021eb2ac7e5f44da41db78">ApiTestFuzzer::FIRST_PART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00101">cctest.h:101</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_adf5e8aa5ee30c45cf47b05b9f1f2bbc6"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#adf5e8aa5ee30c45cf47b05b9f1f2bbc6">v8::V8::AdjustAmountOfExternalAllocatedMemory</a></div><div class="ttdeci">static intptr_t AdjustAmountOfExternalAllocatedMemory(intptr_t change_in_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05374">api.cc:5374</a></div></div>
<div class="ttc" id="classv8_1_1_stack_trace_html_a39e2c28285628da5cf81818663e2ace0aa8600d6e3ac2f9c705493664c4f3681a"><div class="ttname"><a href="../../d4/d7e/classv8_1_1_stack_trace.html#a39e2c28285628da5cf81818663e2ace0aa8600d6e3ac2f9c705493664c4f3681a">v8::StackTrace::kOverview</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00777">v8.h:777</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_aefc75ae033e36266e6d4c16028e43577"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#aefc75ae033e36266e6d4c16028e43577">v8::TryCatch::SetVerbose</a></div><div class="ttdeci">void SetVerbose(bool value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01768">api.cc:1768</a></div></div>
<div class="ttc" id="win32-math_8h_html_afdf433fdb158cbe82ce818a3a2de736b"><div class="ttname"><a href="../../d7/d6a/win32-math_8h.html#afdf433fdb158cbe82ce818a3a2de736b">isnan</a></div><div class="ttdeci">int isnan(double x)</div></div>
<div class="ttc" id="class_u_c16_vector_resource_html_ac8566c86772bfd359a614909dab1ad1d"><div class="ttname"><a href="../../d4/d2b/class_u_c16_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d">UC16VectorResource::length</a></div><div class="ttdeci">virtual size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12403">test-api.cc:12403</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html_abd6f7c88eb5faccbf64e6606bee7e6f3"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html#abd6f7c88eb5faccbf64e6606bee7e6f3">AsciiVectorResource::data</a></div><div class="ttdeci">virtual const char * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12392">test-api.cc:12392</a></div></div>
<div class="ttc" id="classv8_1_1_template_html_ae26f56c0bce13aa1815c5c50617fc791"><div class="ttname"><a href="../../db/df7/classv8_1_1_template.html#ae26f56c0bce13aa1815c5c50617fc791">v8::Template::Set</a></div><div class="ttdeci">void Set(Handle&lt; String &gt; name, Handle&lt; Data &gt; value, PropertyAttribute attributes=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00902">api.cc:902</a></div></div>
<div class="ttc" id="class_reg_exp_interrupt_test_html"><div class="ttname"><a href="../../dc/d6f/class_reg_exp_interrupt_test.html">RegExpInterruptTest</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12120">test-api.cc:12120</a></div></div>
<div class="ttc" id="test-api_8cc_html_a4faa2ae1537a98246fdece5a27bfe315"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a4faa2ae1537a98246fdece5a27bfe315">CThrowCountDown</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; CThrowCountDown(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l03273">test-api.cc:3273</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_external_ascii_string_html_a9987d1cd368b10a2bc5dee20a1726be5"><div class="ttname"><a href="../../d2/da1/classv8_1_1internal_1_1_external_ascii_string.html#a9987d1cd368b10a2bc5dee20a1726be5">v8::internal::ExternalAsciiString::cast</a></div><div class="ttdeci">static ExternalAsciiString * cast(Object *obj)</div></div>
<div class="ttc" id="test-api_8cc_html_a9f5dbe6085d0f3cef568278cde47d63b"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a9f5dbe6085d0f3cef568278cde47d63b">prologue_call_count</a></div><div class="ttdeci">int prologue_call_count</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15369">test-api.cc:15369</a></div></div>
<div class="ttc" id="checks_8h_html_a54b4a23953fc7a4f455e4fc47e05c215"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a54b4a23953fc7a4f455e4fc47e05c215">CHECK_GE</a></div><div class="ttdeci">#define CHECK_GE(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00228">checks.h:228</a></div></div>
<div class="ttc" id="property-details_8h_html_ad8c75160526c9af7c8fa09418542c4e3"><div class="ttname"><a href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3">PropertyAttributes</a></div><div class="ttdeci">PropertyAttributes</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00036">property-details.h:36</a></div></div>
<div class="ttc" id="test-api_8cc_html_a1d9b6a814f5cf4498c92c9e9d0a1d5d3"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a1d9b6a814f5cf4498c92c9e9d0a1d5d3">NewPersistentHandleCallback</a></div><div class="ttdeci">void NewPersistentHandleCallback(v8::Persistent&lt; v8::Value &gt; handle, void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10965">test-api.cc:10965</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a9a94d752742c360db6a592b406729e22"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a9a94d752742c360db6a592b406729e22">v8::V8::SetFailedAccessCheckCallbackFunction</a></div><div class="ttdeci">static void SetFailedAccessCheckCallbackFunction(FailedAccessCheckCallback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05342">api.cc:5342</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a9e59bbcddcbc63c44571384a4a0bbd4e"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4e">ApiTestFuzzer::PartOfTest</a></div><div class="ttdeci">PartOfTest</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00101">cctest.h:101</a></div></div>
<div class="ttc" id="classv8_1_1_external_html_a0a4ed162f300d1cbaa87e2b367c63b77"><div class="ttname"><a href="../../d8/d0f/classv8_1_1_external.html#a0a4ed162f300d1cbaa87e2b367c63b77">v8::External::Unwrap</a></div><div class="ttdeci">static void * Unwrap(Handle&lt; Value &gt; obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04382">v8.h:4382</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a2f470537baefd4b54d8fd4d572baea32"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a2f470537baefd4b54d8fd4d572baea32">v8::Object::SetIndexedPropertiesToExternalArrayData</a></div><div class="ttdeci">V8EXPORT void SetIndexedPropertiesToExternalArrayData(void *data, ExternalArrayType array_type, int number_of_elements)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03460">api.cc:3460</a></div></div>
<div class="ttc" id="test-api_8cc_html_a06246e2bb17d736253ce79d3064d41dd"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a06246e2bb17d736253ce79d3064d41dd">EmptyInterceptorSetter</a></div><div class="ttdeci">Handle&lt; Value &gt; EmptyInterceptorSetter(Local&lt; String &gt; name, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01383">test-api.cc:1383</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a0204658c4cdd2c008f8a8ab73d854412"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a0204658c4cdd2c008f8a8ab73d854412">v8::Value::Equals</a></div><div class="ttdeci">V8EXPORT bool Equals(Handle&lt; Value &gt; that) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02684">api.cc:2684</a></div></div>
<div class="ttc" id="classv8_1_1_function_html_aa8b63338765aa6e0a576267554a1f447"><div class="ttname"><a href="../../d5/d54/classv8_1_1_function.html#aa8b63338765aa6e0a576267554a1f447">v8::Function::GetScriptId</a></div><div class="ttdeci">V8EXPORT Handle&lt; Value &gt; GetScriptId() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03733">api.cc:3733</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_object_html"><div class="ttname"><a href="../../d8/df0/classv8_1_1internal_1_1_object.html">v8::internal::Object</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l00879">objects.h:879</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a770ea5c6fbd66319da5d47947ca7dd23"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a770ea5c6fbd66319da5d47947ca7dd23">v8::V8::VisitExternalResources</a></div><div class="ttdeci">static void VisitExternalResources(ExternalResourceVisitor *visitor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04340">api.cc:4340</a></div></div>
<div class="ttc" id="classv8_1_1_number_html_aff893f5c7d1b6a11523b930684649c0a"><div class="ttname"><a href="../../d9/d29/classv8_1_1_number.html#aff893f5c7d1b6a11523b930684649c0a">v8::Number::Cast</a></div><div class="ttdeci">static Number * Cast(v8::Value *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04525">v8.h:4525</a></div></div>
<div class="ttc" id="classv8_1_1_string_1_1_ascii_value_html"><div class="ttname"><a href="../../d8/dcb/classv8_1_1_string_1_1_ascii_value.html">v8::String::AsciiValue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01325">v8.h:1325</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_a61fe0349d692eb6d4f5b94e35049b2e9"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9">InitDefaultIsolateThread::TestCase</a></div><div class="ttdeci">TestCase</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16017">test-api.cc:16017</a></div></div>
<div class="ttc" id="test-api_8cc_html_a605b65d61829aa91bf519237260b0af0"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a605b65d61829aa91bf519237260b0af0">call_ic_function3</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; call_ic_function3</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l09249">test-api.cc:9249</a></div></div>
<div class="ttc" id="test-api_8cc_html_acf7fe3d9a31a795fde0a9eb765ce42fb"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#acf7fe3d9a31a795fde0a9eb765ce42fb">AnalyzeStackOfInlineScriptWithSourceURL</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; AnalyzeStackOfInlineScriptWithSourceURL(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14549">test-api.cc:14549</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html">v8::internal::String</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l07121">objects.h:7121</a></div></div>
<div class="ttc" id="test-api_8cc_html_a9a24856ee1da626972ed5467428ed981"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a9a24856ee1da626972ed5467428ed981">CallCompletedCallbackException</a></div><div class="ttdeci">void CallCompletedCallbackException()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17136">test-api.cc:17136</a></div></div>
<div class="ttc" id="test-api_8cc_html_a66c71d8ec3005642d437b2ecd548f3bc"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a66c71d8ec3005642d437b2ecd548f3bc">ExternalArrayLimitTestHelper</a></div><div class="ttdeci">void ExternalArrayLimitTestHelper(v8::ExternalArrayType array_type, int size)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14136">test-api.cc:14136</a></div></div>
<div class="ttc" id="test-api_8cc_html_af87c7d3bb5fd473c2de44fa64d58a4a2"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#af87c7d3bb5fd473c2de44fa64d58a4a2">ThrowingDirectApiCallback</a></div><div class="ttdeci">v8::Handle&lt; v8::Value &gt; ThrowingDirectApiCallback(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l09607">test-api.cc:9607</a></div></div>
<div class="ttc" id="classv8_1_1_message_html_a882197bfb98ad033a941d40e5445fe61"><div class="ttname"><a href="../../d9/d28/classv8_1_1_message.html#a882197bfb98ad033a941d40e5445fe61">v8::Message::GetScriptResourceName</a></div><div class="ttdeci">Handle&lt; Value &gt; GetScriptResourceName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01793">api.cc:1793</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_ab4b87b8f9f8e5bf95eba4009357e001f"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#ab4b87b8f9f8e5bf95eba4009357e001f">v8::V8::AddGCPrologueCallback</a></div><div class="ttdeci">static void AddGCPrologueCallback(GCPrologueCallback callback, GCType gc_type_filter=kGCTypeAll)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05399">api.cc:5399</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_abd7228db8201e7f65153a896fe8de9bd"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#abd7228db8201e7f65153a896fe8de9bd">v8::internal::Smi::cast</a></div><div class="ttdeci">static Smi * cast(Object *object)</div></div>
<div class="ttc" id="cctest_8h_html"><div class="ttname"><a href="../../df/d84/cctest_8h.html">cctest.h</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ada76c4fe81db9c32168c8ca541dedd91"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ada76c4fe81db9c32168c8ca541dedd91">v8::internal::FlattenGetString</a></div><div class="ttdeci">Handle&lt; String &gt; FlattenGetString(Handle&lt; String &gt; string)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d59/handles_8cc_source.html#l00216">handles.cc:216</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092abaab72dcb950cf25173070d51aded5e25a"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092abaab72dcb950cf25173070d51aded5e25a">v8::kExternalUnsignedIntArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01437">v8.h:1437</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a511519c317c7a8b3dd44fbc99768d3f9"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a511519c317c7a8b3dd44fbc99768d3f9">v8::String::IsExternal</a></div><div class="ttdeci">V8EXPORT bool IsExternal() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04064">api.cc:4064</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a0b3ba73653d32fe6ca8e2a321b476d4e"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a0b3ba73653d32fe6ca8e2a321b476d4e">v8::Object::HasIndexedPropertiesInExternalArrayData</a></div><div class="ttdeci">V8EXPORT bool HasIndexedPropertiesInExternalArrayData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03483">api.cc:3483</a></div></div>
<div class="ttc" id="parser_8h_html"><div class="ttname"><a href="../../d5/d36/parser_8h.html">parser.h</a></div></div>
<div class="ttc" id="unicode-inl_8h_html"><div class="ttname"><a href="../../d3/d37/unicode-inl_8h.html">unicode-inl.h</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html_a2793bb2279e2d391d1b2295110d36efe"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html#a2793bb2279e2d391d1b2295110d36efe">v8::internal::String::Equals</a></div><div class="ttdeci">bool Equals(String *other)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l02419">objects-inl.h:2419</a></div></div>
<div class="ttc" id="test-api_8cc_html_aa1dfa0d9a37fc7c3a4ec9d2a6867b489"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aa1dfa0d9a37fc7c3a4ec9d2a6867b489">xValue</a></div><div class="ttdeci">v8::Persistent&lt; Value &gt; xValue</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l03823">test-api.cc:3823</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a9f5bc470012336ebd1646d7890f5a12c"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a9f5bc470012336ebd1646d7890f5a12c">v8::Object::SetInternalField</a></div><div class="ttdeci">V8EXPORT void SetInternalField(int index, Handle&lt; Value &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04214">api.cc:4214</a></div></div>
<div class="ttc" id="test-api_8cc_html_a8204dacac9678828a960f2ba937611da"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a8204dacac9678828a960f2ba937611da">CheckThisNamedPropertySetter</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; CheckThisNamedPropertySetter(Local&lt; String &gt; property, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01716">test-api.cc:1716</a></div></div>
<div class="ttc" id="classv8_1_1_function_template_html_a717f7933a379f1bf025af39545aef68e"><div class="ttname"><a href="../../d8/d83/classv8_1_1_function_template.html#a717f7933a379f1bf025af39545aef68e">v8::FunctionTemplate::SetClassName</a></div><div class="ttdeci">void SetClassName(Handle&lt; String &gt; name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01139">api.cc:1139</a></div></div>
<div class="ttc" id="utils_8h_html"><div class="ttname"><a href="../../d5/d60/utils_8h.html">utils.h</a></div></div>
<div class="ttc" id="classv8_1_1_integer_html_ad44f706549cc36835af5cad909009d4a"><div class="ttname"><a href="../../df/d84/classv8_1_1_integer.html#ad44f706549cc36835af5cad909009d4a">v8::Integer::NewFromUnsigned</a></div><div class="ttdeci">static V8EXPORT Local&lt; Integer &gt; NewFromUnsigned(uint32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05235">api.cc:5235</a></div></div>
<div class="ttc" id="class_apply_interrupt_test_html_a4a2eff499a3c811ef4d814024ba98ef0"><div class="ttname"><a href="../../d3/de5/class_apply_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">ApplyInterruptTest::RunTest</a></div><div class="ttdeci">void RunTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12247">test-api.cc:12247</a></div></div>
<div class="ttc" id="test-accessors_8cc_html_a819b717d29c6c488a332fefeeb3815ba"><div class="ttname"><a href="../../d6/df1/test-accessors_8cc.html#a819b717d29c6c488a332fefeeb3815ba">foo</a></div><div class="ttdeci">int foo</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df1/test-accessors_8cc_source.html#l00085">test-accessors.cc:85</a></div></div>
<div class="ttc" id="classv8_1_1_string_1_1_utf8_value_html"><div class="ttname"><a href="../../d4/d1b/classv8_1_1_string_1_1_utf8_value.html">v8::String::Utf8Value</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01302">v8.h:1302</a></div></div>
<div class="ttc" id="class_isolate_thread_html"><div class="ttname"><a href="../../d5/d7c/class_isolate_thread.html">IsolateThread</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15944">test-api.cc:15944</a></div></div>
<div class="ttc" id="namespacev8_html_a9009408600ffd120107fd6c5a0d07f9d"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a9009408600ffd120107fd6c5a0d07f9d">v8::IndexedPropertyGetter</a></div><div class="ttdeci">Handle&lt; Value &gt;(* IndexedPropertyGetter)(uint32_t index, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02093">v8.h:2093</a></div></div>
<div class="ttc" id="test-api_8cc_html_a843a714409489fd5ffe09872d5ebfa1e"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a843a714409489fd5ffe09872d5ebfa1e">CheckCodeGenerationAllowed</a></div><div class="ttdeci">void CheckCodeGenerationAllowed()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16673">test-api.cc:16673</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a9e59bbcddcbc63c44571384a4a0bbd4ead08c767f90a211701b3b88143f427916"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ead08c767f90a211701b3b88143f427916">ApiTestFuzzer::LAST_PART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00105">cctest.h:105</a></div></div>
<div class="ttc" id="class_native_function_extension_html_a99df01432f19ffde9d39aca1f76ba11f"><div class="ttname"><a href="../../d9/d14/class_native_function_extension.html#a99df01432f19ffde9d39aca1f76ba11f">NativeFunctionExtension::Echo</a></div><div class="ttdeci">static v8::Handle&lt; v8::Value &gt; Echo(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l04979">test-api.cc:4979</a></div></div>
<div class="ttc" id="classv8_1_1_stack_trace_html_ac4bbd4f3dca756c199e83d2079f7a70a"><div class="ttname"><a href="../../d4/d7e/classv8_1_1_stack_trace.html#ac4bbd4f3dca756c199e83d2079f7a70a">v8::StackTrace::GetFrame</a></div><div class="ttdeci">Local&lt; StackFrame &gt; GetFrame(uint32_t index) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01976">api.cc:1976</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a5cfcef5d0edc9785a78629ce9212930f"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a5cfcef5d0edc9785a78629ce9212930f">v8::V8::GetVersion</a></div><div class="ttdeci">static const char * GetVersion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04394">api.cc:4394</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a6b0fdb76d5ff7b46f48f6b725be93ad8"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a6b0fdb76d5ff7b46f48f6b725be93ad8">v8::Object::GetRealNamedProperty</a></div><div class="ttdeci">V8EXPORT Local&lt; Value &gt; GetRealNamedProperty(Handle&lt; String &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03217">api.cc:3217</a></div></div>
<div class="ttc" id="classv8_1_1_script_html_ac863f6ddf042f479912dd207d3fd17e0"><div class="ttname"><a href="../../d0/d35/classv8_1_1_script.html#ac863f6ddf042f479912dd207d3fd17e0">v8::Script::Id</a></div><div class="ttdeci">Local&lt; Value &gt; Id()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01643">api.cc:1643</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_aec56f97164cbf2d582da4d8b93c9d702"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#aec56f97164cbf2d582da4d8b93c9d702">v8::String::IsExternalAscii</a></div><div class="ttdeci">V8EXPORT bool IsExternalAscii() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04074">api.cc:4074</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_af25e7d62a095414a542b6379dae2459d"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#af25e7d62a095414a542b6379dae2459d">v8::Value::IsStringObject</a></div><div class="ttdeci">V8EXPORT bool IsStringObject() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02247">api.cc:2247</a></div></div>
<div class="ttc" id="class_test_ascii_resource_with_dispose_control_html_a6e2d745cdb7a7b983f861ed6a9a541a7"><div class="ttname"><a href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a6e2d745cdb7a7b983f861ed6a9a541a7">TestAsciiResourceWithDisposeControl::Dispose</a></div><div class="ttdeci">void Dispose()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00674">test-api.cc:674</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a6fae7d3a2b2ccdbe699526f1fb5bcd93"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a6fae7d3a2b2ccdbe699526f1fb5bcd93">v8::internal::ComputePointerHash</a></div><div class="ttdeci">uint32_t ComputePointerHash(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00311">utils.h:311</a></div></div>
<div class="ttc" id="classv8_1_1_function_html_a3efaa4de69c09f2ed12ae1165c6d218d"><div class="ttname"><a href="../../d5/d54/classv8_1_1_function.html#a3efaa4de69c09f2ed12ae1165c6d218d">v8::Function::GetScriptOrigin</a></div><div class="ttdeci">V8EXPORT ScriptOrigin GetScriptOrigin() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03697">api.cc:3697</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a9e59bbcddcbc63c44571384a4a0bbd4ea835d902e5aba1c0bf956cfd43ad64987"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a9e59bbcddcbc63c44571384a4a0bbd4ea835d902e5aba1c0bf956cfd43ad64987">ApiTestFuzzer::SECOND_PART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00102">cctest.h:102</a></div></div>
<div class="ttc" id="classv8_1_1_script_html_ac1223816dab9d0df897a09a5fb899466"><div class="ttname"><a href="../../d0/d35/classv8_1_1_script.html#ac1223816dab9d0df897a09a5fb899466">v8::Script::New</a></div><div class="ttdeci">static Local&lt; Script &gt; New(Handle&lt; String &gt; source, ScriptOrigin *origin=NULL, ScriptData *pre_data=NULL, Handle&lt; String &gt; script_data=Handle&lt; String &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01506">api.cc:1506</a></div></div>
<div class="ttc" id="class_test_resource_html_a9b0e5954743e3e11eacf0b9a27fda1d1"><div class="ttname"><a href="../../d6/d3d/class_test_resource.html#a9b0e5954743e3e11eacf0b9a27fda1d1">TestResource::TestResource</a></div><div class="ttdeci">TestResource(uint16_t *data, int *counter=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00343">test-api.cc:343</a></div></div>
<div class="ttc" id="test-api_8cc_html_ab71e8a1a9e7fa14d0b7cfa28980e1dc7"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ab71e8a1a9e7fa14d0b7cfa28980e1dc7">CCatcher</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; CCatcher(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l03054">test-api.cc:3054</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a06bfec7de016bb7b546e0f2bc7db042d"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a06bfec7de016bb7b546e0f2bc7db042d">v8::internal::s3</a></div><div class="ttdeci">const SwVfpRegister s3</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00278">assembler-arm.h:278</a></div></div>
<div class="ttc" id="classv8_1_1_reg_exp_html"><div class="ttname"><a href="../../d8/da7/classv8_1_1_reg_exp.html">v8::RegExp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01903">v8.h:1903</a></div></div>
<div class="ttc" id="classv8_1_1_reg_exp_html_aa705cf7e79a21c2352b00ffe20cd295fa4643cde23bd2cb0810f5957592414441"><div class="ttname"><a href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4643cde23bd2cb0810f5957592414441">v8::RegExp::kGlobal</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01911">v8.h:1911</a></div></div>
<div class="ttc" id="class_test_resource_html_a2edf269e5cd490f7863c9150bb910c85"><div class="ttname"><a href="../../d6/d3d/class_test_resource.html#a2edf269e5cd490f7863c9150bb910c85">TestResource::length</a></div><div class="ttdeci">size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00357">test-api.cc:357</a></div></div>
<div class="ttc" id="namespacev8_html_a36c35e1f867914bd49c60b7ccd6c4c13"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a36c35e1f867914bd49c60b7ccd6c4c13">v8::MB</a></div><div class="ttdeci">const int MB</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d07/d8_8cc_source.html#l00124">d8.cc:124</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_aa33d06f1b6ca8e114ca8e1e557ce40a9"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#aa33d06f1b6ca8e114ca8e1e557ce40a9">v8::Object::InternalFieldCount</a></div><div class="ttdeci">V8EXPORT int InternalFieldCount()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04185">api.cc:4185</a></div></div>
<div class="ttc" id="checks_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00050">checks.h:50</a></div></div>
<div class="ttc" id="namespacev8_html_aee6870581e54ab6b4318dfb434219459"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#aee6870581e54ab6b4318dfb434219459">v8::InvocationCallback</a></div><div class="ttdeci">Handle&lt; Value &gt;(* InvocationCallback)(const Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02047">v8.h:2047</a></div></div>
<div class="ttc" id="classv8_1_1_script_data_html_a7fb1ac27f91f649838cb9e5135f2a086"><div class="ttname"><a href="../../dc/dad/classv8_1_1_script_data.html#a7fb1ac27f91f649838cb9e5135f2a086">v8::ScriptData::PreCompile</a></div><div class="ttdeci">static ScriptData * PreCompile(const char *input, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01462">api.cc:1462</a></div></div>
<div class="ttc" id="namespacev8_html_a0c3457f16b868f1aa66aefacbe990b54"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a0c3457f16b868f1aa66aefacbe990b54">v8::NamedPropertyGetter</a></div><div class="ttdeci">Handle&lt; Value &gt;(* NamedPropertyGetter)(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02053">v8.h:2053</a></div></div>
<div class="ttc" id="class_register_threaded_test_html_a16e46e7c65078b1877d239968152a04e"><div class="ttname"><a href="../../dd/d72/class_register_threaded_test.html#a16e46e7c65078b1877d239968152a04e">RegisterThreadedTest::name</a></div><div class="ttdeci">const char * name()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00156">cctest.h:156</a></div></div>
<div class="ttc" id="test-thread-termination_8cc_html_a5e0f60888f1d0bb3daf99036125b899a"><div class="ttname"><a href="../../d1/deb/test-thread-termination_8cc.html#a5e0f60888f1d0bb3daf99036125b899a">call_count</a></div><div class="ttdeci">int call_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/deb/test-thread-termination_8cc_source.html#l00268">test-thread-termination.cc:268</a></div></div>
<div class="ttc" id="classv8_1_1_script_data_html_a6fb45774688c7e60c37056af95e9fcaf"><div class="ttname"><a href="../../dc/dad/classv8_1_1_script_data.html#a6fb45774688c7e60c37056af95e9fcaf">v8::ScriptData::Data</a></div><div class="ttdeci">virtual const char * Data()=0</div></div>
<div class="ttc" id="classv8_1_1_external_html_a9994952e45f65562f020e2ea6b4f0b7b"><div class="ttname"><a href="../../d8/d0f/classv8_1_1_external.html#a9994952e45f65562f020e2ea6b4f0b7b">v8::External::Value</a></div><div class="ttdeci">V8EXPORT void * Value() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04762">api.cc:4762</a></div></div>
<div class="ttc" id="test-api_8cc_html_a251b1156c3ed03514b4c37dc7561dfd1"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a251b1156c3ed03514b4c37dc7561dfd1">CheckCodeGenerationDisallowed</a></div><div class="ttdeci">void CheckCodeGenerationDisallowed()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16683">test-api.cc:16683</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_vector_html_affb06cbe9d08291ab0fc1a467edec469"><div class="ttname"><a href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#affb06cbe9d08291ab0fc1a467edec469">v8::internal::Vector::start</a></div><div class="ttdeci">T * start() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00390">utils.h:390</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a9314d398466b8d2e5d512f8e653b04e2"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a9314d398466b8d2e5d512f8e653b04e2">v8::V8::RemoveCallCompletedCallback</a></div><div class="ttdeci">static void RemoveCallCompletedCallback(CallCompletedCallback callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05454">api.cc:5454</a></div></div>
<div class="ttc" id="test-api_8cc_html_a0361f1f0085677210b1512b79ce277d6"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a0361f1f0085677210b1512b79ce277d6">CheckThisIndexedPropertySetter</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; CheckThisIndexedPropertySetter(uint32_t index, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01707">test-api.cc:1707</a></div></div>
<div class="ttc" id="classv8_1_1_resource_constraints_html_af87a04cf17d764721ff8220ce1b23de4"><div class="ttname"><a href="../../d8/dcd/classv8_1_1_resource_constraints.html#af87a04cf17d764721ff8220ce1b23de4">v8::ResourceConstraints::set_max_old_space_size</a></div><div class="ttdeci">void set_max_old_space_size(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02640">v8.h:2640</a></div></div>
<div class="ttc" id="namespacev8_html_aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660af1a03d8a79e3c6ef4a82a0ba3fec6e7a">v8::ReadOnly</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01426">v8.h:1426</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_thread_html"><div class="ttname"><a href="../../db/d61/classv8_1_1internal_1_1_thread.html">v8::internal::Thread</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00449">platform.h:449</a></div></div>
<div class="ttc" id="test-api_8cc_html_aac3bfaf60bdf22c7109b705060ccd528"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aac3bfaf60bdf22c7109b705060ccd528">RecursiveCall</a></div><div class="ttdeci">Handle&lt; Value &gt; RecursiveCall(const Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17078">test-api.cc:17078</a></div></div>
<div class="ttc" id="classv8_1_1_object_template_html_ada5e0fda7225c6a63c54f1d07bdc718c"><div class="ttname"><a href="../../db/d5f/classv8_1_1_object_template.html#ada5e0fda7225c6a63c54f1d07bdc718c">v8::ObjectTemplate::New</a></div><div class="ttdeci">static Local&lt; ObjectTemplate &gt; New()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01253">api.cc:1253</a></div></div>
<div class="ttc" id="class_test_resource_html_a1415d0c54e6b0b70f31880b81117f1ba"><div class="ttname"><a href="../../d6/d3d/class_test_resource.html#a1415d0c54e6b0b70f31880b81117f1ba">TestResource::~TestResource</a></div><div class="ttdeci">~TestResource()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00348">test-api.cc:348</a></div></div>
<div class="ttc" id="classv8_1_1_script_data_html_af9e55cb0256f103ca177a4a4be1c561c"><div class="ttname"><a href="../../dc/dad/classv8_1_1_script_data.html#af9e55cb0256f103ca177a4a4be1c561c">v8::ScriptData::HasError</a></div><div class="ttdeci">virtual bool HasError()=0</div></div>
<div class="ttc" id="classv8_1_1_object_html_a45e93540d4bdca7c0071ef6467a7941c"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a45e93540d4bdca7c0071ef6467a7941c">v8::Object::HasIndexedPropertiesInPixelData</a></div><div class="ttdeci">V8EXPORT bool HasIndexedPropertiesInPixelData()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03427">api.cc:3427</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_a93c950914cc263962f3163e877b95c0b"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#a93c950914cc263962f3163e877b95c0b">v8::Context::DetachGlobal</a></div><div class="ttdeci">void DetachGlobal()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04582">api.cc:4582</a></div></div>
<div class="ttc" id="test-api_8cc_html_a900444ba359f8c57eed32dbd0a0a19a5"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a900444ba359f8c57eed32dbd0a0a19a5">HasOwnPropertyIndexedPropertyGetter</a></div><div class="ttdeci">Handle&lt; Value &gt; HasOwnPropertyIndexedPropertyGetter(uint32_t index, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16559">test-api.cc:16559</a></div></div>
<div class="ttc" id="test-api_8cc_html_a3d6119d42d7d65d3a79e45af48b3ca9e"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a3d6119d42d7d65d3a79e45af48b3ca9e">PrologueCallbackSecond</a></div><div class="ttdeci">void PrologueCallbackSecond(v8::GCType, v8::GCCallbackFlags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15382">test-api.cc:15382</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html">AsciiVectorResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12386">test-api.cc:12386</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a901c19d920f54a68ca7022af30d6d795"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a901c19d920f54a68ca7022af30d6d795">v8::TryCatch::ReThrow</a></div><div class="ttdeci">Handle&lt; Value &gt; ReThrow()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01713">api.cc:1713</a></div></div>
<div class="ttc" id="class_native_function_extension_html"><div class="ttname"><a href="../../d9/d14/class_native_function_extension.html">NativeFunctionExtension</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l04966">test-api.cc:4966</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_ac1a2f687dc6129f82f3f9c1a0b2d46fa"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#ac1a2f687dc6129f82f3f9c1a0b2d46fa">ApiTestFuzzer::Fuzz</a></div><div class="ttdeci">static void Fuzz()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10620">test-api.cc:10620</a></div></div>
<div class="ttc" id="namespacev8_html_a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a5f53a3d1798730e03d542018271092aba46b781a3755440784911f50b6a9a2189">v8::kExternalFloatArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01438">v8.h:1438</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_aafa7e778e56fbbc49b1c0170c832f093"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#aafa7e778e56fbbc49b1c0170c832f093">v8::Object::GetPrototype</a></div><div class="ttdeci">V8EXPORT Local&lt; Value &gt; GetPrototype()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02900">api.cc:2900</a></div></div>
<div class="ttc" id="namespacev8_html_aa944500afca8000fffef41951b9f2660a40b102bae12f7c44dea7ada8b13aa680"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a40b102bae12f7c44dea7ada8b13aa680">v8::DontEnum</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01427">v8.h:1427</a></div></div>
<div class="ttc" id="property-details_8h_html_ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2"><div class="ttname"><a href="../../d5/d43/property-details_8h.html#ad8c75160526c9af7c8fa09418542c4e3ac157bdf0b85a40d2619cbc8bc1ae5fe2">NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d43/property-details_8h_source.html#l00037">property-details.h:37</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a5593ac74687b713095c38987e5950b34"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a5593ac74687b713095c38987e5950b34">v8::V8::GetHeapStatistics</a></div><div class="ttdeci">static void GetHeapStatistics(HeapStatistics *heap_statistics)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04321">api.cc:4321</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_a0e7b84e859a843a61642145d21d8665b"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0e7b84e859a843a61642145d21d8665b">v8::internal::Smi::IsValid</a></div><div class="ttdeci">static bool IsValid(intptr_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01059">objects-inl.h:1059</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_external_ascii_string_html_a4c77a9be9ee15c63ec924deced362488"><div class="ttname"><a href="../../d2/da1/classv8_1_1internal_1_1_external_ascii_string.html#a4c77a9be9ee15c63ec924deced362488">v8::internal::ExternalAsciiString::set_resource</a></div><div class="ttdeci">void set_resource(const Resource *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l02618">objects-inl.h:2618</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html_a2f18e60350b641236ab0e724d0622d1d"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html#a2f18e60350b641236ab0e724d0622d1d">v8::JitCodeEvent::type</a></div><div class="ttdeci">EventType type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02982">v8.h:2982</a></div></div>
<div class="ttc" id="snapshot_8h_html"><div class="ttname"><a href="../../d4/dc8/snapshot_8h.html">snapshot.h</a></div></div>
<div class="ttc" id="test-api_8cc_html_aad064381d078627b238516dd7ba42323"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aad064381d078627b238516dd7ba42323">TEST</a></div><div class="ttdeci">TEST(MakingExternalStringConditions)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00506">test-api.cc:506</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_html"><div class="ttname"><a href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html">v8::internal::ConsString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l07628">objects.h:7628</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a08252a8577899b6880d6c356de9bb980"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a08252a8577899b6880d6c356de9bb980">v8::Object::ForceDelete</a></div><div class="ttdeci">V8EXPORT bool ForceDelete(Handle&lt; Value &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02829">api.cc:2829</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_object_html_af6ef63d83b1a20df1158803c7a3b7c4c"><div class="ttname"><a href="../../d8/df0/classv8_1_1internal_1_1_object.html#af6ef63d83b1a20df1158803c7a3b7c4c">v8::internal::Object::ToArrayIndex</a></div><div class="ttdeci">bool ToArrayIndex(uint32_t *index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l01682">objects-inl.h:1682</a></div></div>
<div class="ttc" id="test-api_8cc_html_a867eb44ca3ea387269b34da7a51e5c6a"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a867eb44ca3ea387269b34da7a51e5c6a">bottom</a></div><div class="ttdeci">v8::Handle&lt; v8::Object &gt; bottom</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01688">test-api.cc:1688</a></div></div>
<div class="ttc" id="test-api_8cc_html_ac581b83e2b960ec6c3a42496fe3b8679"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ac581b83e2b960ec6c3a42496fe3b8679">CallCompletedCallback1</a></div><div class="ttdeci">void CallCompletedCallback1()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17066">test-api.cc:17066</a></div></div>
<div class="ttc" id="class_test_ascii_resource_html_ad30e49052203dc0c5afce35f274f6b18"><div class="ttname"><a href="../../d3/d8e/class_test_ascii_resource.html#ad30e49052203dc0c5afce35f274f6b18">TestAsciiResource::TestAsciiResource</a></div><div class="ttdeci">TestAsciiResource(const char *data, int *counter=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00369">test-api.cc:369</a></div></div>
<div class="ttc" id="class_thread_interrupt_test_html_a7bcf17c6622af1cb0dd95180fe207d81"><div class="ttname"><a href="../../d5/dce/class_thread_interrupt_test.html#a7bcf17c6622af1cb0dd95180fe207d81">ThreadInterruptTest::~ThreadInterruptTest</a></div><div class="ttdeci">~ThreadInterruptTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17713">test-api.cc:17713</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_html_a2aed3c801bc981533015db78190333fa"><div class="ttname"><a href="../../dd/d58/classv8_1_1internal_1_1_heap.html#a2aed3c801bc981533015db78190333fa">v8::internal::Heap::kNoGCFlags</a></div><div class="ttdeci">static const int kNoGCFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l01081">heap.h:1081</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0ff83451bc94a1105976297cc6b68676"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0ff83451bc94a1105976297cc6b68676">v8::internal::Object</a></div><div class="ttdeci">Object</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03851">objects-inl.h:3851</a></div></div>
<div class="ttc" id="namespacev8_html_a2e9a0288e6c2df2ecebc50944c3ff9faa51a8c9fb5d86daa1e245d087c2331037"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa51a8c9fb5d86daa1e245d087c2331037">v8::ALL_CAN_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01472">v8.h:1472</a></div></div>
<div class="ttc" id="test-api_8cc_html_a1c7a1580fb42beaa6b34f633c2abe974"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a1c7a1580fb42beaa6b34f633c2abe974">p_getter_count</a></div><div class="ttdeci">int p_getter_count</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05593">test-api.cc:5593</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html_ac127add068c00f6e9196071753bb6fb3"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html#ac127add068c00f6e9196071753bb6fb3">AsciiVectorResource::~AsciiVectorResource</a></div><div class="ttdeci">virtual ~AsciiVectorResource()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12390">test-api.cc:12390</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_handle_visitor_html"><div class="ttname"><a href="../../dd/d8f/classv8_1_1_persistent_handle_visitor.html">v8::PersistentHandleVisitor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03033">v8.h:3033</a></div></div>
<div class="ttc" id="classv8_1_1_object_template_html_a15549aa25e1ad60c23f086170841c482"><div class="ttname"><a href="../../db/d5f/classv8_1_1_object_template.html#a15549aa25e1ad60c23f086170841c482">v8::ObjectTemplate::SetAccessor</a></div><div class="ttdeci">void SetAccessor(Handle&lt; String &gt; name, AccessorGetter getter, AccessorSetter setter=0, Handle&lt; Value &gt; data=Handle&lt; Value &gt;(), AccessControl settings=DEFAULT, PropertyAttribute attribute=None, Handle&lt; AccessorSignature &gt; signature=Handle&lt; AccessorSignature &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01291">api.cc:1291</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_template_hash_map_impl_html_a99e21bdad83d2838aae0ef33bd1dfdc8"><div class="ttname"><a href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#a99e21bdad83d2838aae0ef33bd1dfdc8">v8::internal::TemplateHashMapImpl::occupancy</a></div><div class="ttdeci">uint32_t occupancy() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df3/hashmap_8h_source.html#l00083">hashmap.h:83</a></div></div>
<div class="ttc" id="test-api_8cc_html_ad73855e701ea4502ecb164456481fe73"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ad73855e701ea4502ecb164456481fe73">DirectApiCallback</a></div><div class="ttdeci">v8::Handle&lt; v8::Value &gt; DirectApiCallback(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l09577">test-api.cc:9577</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_map_cache_html"><div class="ttname"><a href="../../de/d42/classv8_1_1internal_1_1_map_cache.html">v8::internal::MapCache</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l03047">objects.h:3047</a></div></div>
<div class="ttc" id="classv8_1_1_object_template_html_a0f3ad8f58cd74a05d35eb3292fe9bd7f"><div class="ttname"><a href="../../db/d5f/classv8_1_1_object_template.html#a0f3ad8f58cd74a05d35eb3292fe9bd7f">v8::ObjectTemplate::SetInternalFieldCount</a></div><div class="ttdeci">void SetInternalFieldCount(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01438">api.cc:1438</a></div></div>
<div class="ttc" id="class_weak_call_counter_html_a037090a2fa13d046656f0065ba0c2075"><div class="ttname"><a href="../../d4/d74/class_weak_call_counter.html#a037090a2fa13d046656f0065ba0c2075">WeakCallCounter::NumberOfWeakCalls</a></div><div class="ttdeci">int NumberOfWeakCalls()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l02260">test-api.cc:2260</a></div></div>
<div class="ttc" id="test-api_8cc_html_aff81a840c1a4167f5cf353f93657a5c0"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aff81a840c1a4167f5cf353f93657a5c0">HasOwnPropertyNamedPropertyQuery</a></div><div class="ttdeci">Handle&lt; v8::Integer &gt; HasOwnPropertyNamedPropertyQuery(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16580">test-api.cc:16580</a></div></div>
<div class="ttc" id="classv8_1_1_stack_frame_html_a03ee7aeb6433022a6a1544e05594b30a"><div class="ttname"><a href="../../dd/d1e/classv8_1_1_stack_frame.html#a03ee7aeb6433022a6a1544e05594b30a">v8::StackFrame::GetColumn</a></div><div class="ttdeci">int GetColumn() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02037">api.cc:2037</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html_a2628ea8d12e8b2563c32f05dc7fff6faa133b73408fb1c1b4ffd1fca7f3f15ed6"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html#a2628ea8d12e8b2563c32f05dc7fff6faa133b73408fb1c1b4ffd1fca7f3f15ed6">v8::JitCodeEvent::CODE_REMOVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02978">v8.h:2978</a></div></div>
<div class="ttc" id="class_snorkel_html_aaaf1ac02dfa554a3cdffc647d512a77b"><div class="ttname"><a href="../../dc/d63/class_snorkel.html#aaaf1ac02dfa554a3cdffc647d512a77b">Snorkel::index_</a></div><div class="ttdeci">int index_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05221">test-api.cc:5221</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html_ac5407c11c5b4849259b94c62ac162f21"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html#ac5407c11c5b4849259b94c62ac162f21">v8::Isolate::New</a></div><div class="ttdeci">static Isolate * New()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05526">api.cc:5526</a></div></div>
<div class="ttc" id="test-api_8cc_html_a82aebd4de23b4d1cacffbf3bb74b0c05"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a82aebd4de23b4d1cacffbf3bb74b0c05">SimulateFullSpace</a></div><div class="ttdeci">void SimulateFullSpace(i::PagedSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db3/test-alloc_8cc_source.html#l00038">test-alloc.cc:38</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_af8b475bb23fabe5b7708bbc7c572276f"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#af8b475bb23fabe5b7708bbc7c572276f">v8::V8::SetFatalErrorHandler</a></div><div class="ttdeci">static void SetFatalErrorHandler(FatalErrorCallback that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00455">api.cc:455</a></div></div>
<div class="ttc" id="classv8_1_1_accessor_info_html"><div class="ttname"><a href="../../da/d41/classv8_1_1_accessor_info.html">v8::AccessorInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02033">v8.h:2033</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_a52143ab7f8a8ac8ea0cdbe70d282c73a"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#a52143ab7f8a8ac8ea0cdbe70d282c73a">message</a></div><div class="ttdeci">activate correct semantics for inheriting readonliness enable harmony semantics for typeof enable harmony enable harmony proxies enable all harmony harmony_scoping harmony_proxies harmony_scoping tracks arrays with only smi values automatically unbox arrays of doubles use crankshaft use hydrogen range analysis use hydrogen global value numbering use function inlining maximum number of AST nodes considered for a single inlining loop invariant code motion print statistics for hydrogen trace generated IR for specified phases trace register allocator trace range analysis trace representation types environment for every instruction put a break point before deoptimizing polymorphic inlining perform array bounds checks elimination use dead code elimination trace on stack replacement optimize closures cache optimized code for closures functions with arguments object loop weight for representation inference allow uint32 values on optimize frames if they are used only in safe operations track parallel recompilation enable all profiler experiments number of stack frames inspected by the profiler call recompile stub directly when self optimizing trigger profiler ticks based on counting instead of timing weight back edges by jump distance for interrupt triggering percentage of ICs that must have type info to allow optimization watch_ic_patching retry_self_opt interrupt_at_exit extra verbose compilation tracing generate extra emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of SAHF instruction if enable use of VFP3 instructions if available this implies enabling ARMv7 and VFP2 enable use of VFP2 instructions if available enable use of SDIV and UDIV instructions if enable loading bit constant by means of movw movt instruction enable unaligned accesses for enable use of MIPS FPU instructions if expose natives in global object expose gc extension number of stack frames to capture disable builtin natives files print a stack trace if an assertion failure occurs use random jit cookie to mask large constants trace lazy optimization use adaptive optimizations prepare for turning on always opt minimum length for automatic enable preparsing maximum number of optimization attempts before giving up cache prototype transitions automatically set the debug break flag when debugger commands are in the queue always cause a debug break before aborting maximum length of function source code printed in a stack trace max size of the new max size of the old max size of executable always perform global GCs print one trace line following each garbage collection do not print trace line after scavenger collection print more details following each garbage collection print amount of external allocated memory after each time it is adjusted flush code that we expect not to use again before full gc do incremental marking steps track object counts and memory usage use caching Perform compaction on every full GC Never perform compaction on full GC testing only Compact code space on full incremental collections Default seed for initializing random allows verbose printing trace parsing and preparsing Check icache flushes in ARM and MIPS simulator Stack alingment in bytes in print stack trace when throwing exceptions randomize hashes to avoid predictable hash Fixed seed to use to hash property activate a timer that switches between V8 threads testing_bool_flag float flag Seed used for threading test randomness A filename with extra code to be included in the Print usage message</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00494">flag-definitions.h:494</a></div></div>
<div class="ttc" id="class_thread_interrupt_test_html_a31f59789b8164da1f1c89800834aa2ec"><div class="ttname"><a href="../../d5/dce/class_thread_interrupt_test.html#a31f59789b8164da1f1c89800834aa2ec">ThreadInterruptTest::ThreadInterruptTest</a></div><div class="ttdeci">ThreadInterruptTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17712">test-api.cc:17712</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a0f1272ceaa016e3e166723ea8abb68aa"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a0f1272ceaa016e3e166723ea8abb68aa">v8::V8::ContextDisposedNotification</a></div><div class="ttdeci">static int ContextDisposedNotification()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04387">api.cc:4387</a></div></div>
<div class="ttc" id="test-api_8cc_html_a1d4bfdc412a78cde700cc9d618baa139"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a1d4bfdc412a78cde700cc9d618baa139">CodeGenerationDisallowed</a></div><div class="ttdeci">bool CodeGenerationDisallowed(Local&lt; Context &gt; context)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16708">test-api.cc:16708</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_af663335b4f25f060fff98530ed9ae2c7"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#af663335b4f25f060fff98530ed9ae2c7">v8::V8::SetFunctionEntryHook</a></div><div class="ttdeci">static bool SetFunctionEntryHook(FunctionEntryHook entry_hook)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04289">api.cc:4289</a></div></div>
<div class="ttc" id="classv8_1_1_arguments_html_a6e891964a37680c01e21dedac6ffe670"><div class="ttname"><a href="../../df/d31/classv8_1_1_arguments.html#a6e891964a37680c01e21dedac6ffe670">v8::Arguments::Length</a></div><div class="ttdeci">int Length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04318">v8.h:4318</a></div></div>
<div class="ttc" id="class_apply_interrupt_test_html"><div class="ttname"><a href="../../d3/de5/class_apply_interrupt_test.html">ApplyInterruptTest</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12243">test-api.cc:12243</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a3837d763158f1718969858a513670c62"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a3837d763158f1718969858a513670c62">v8::Value::Int32Value</a></div><div class="ttdeci">V8EXPORT int32_t Int32Value() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02662">api.cc:2662</a></div></div>
<div class="ttc" id="test-api_8cc_html_aec84a86b4ffa5df2aa90fd3d785528b7"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aec84a86b4ffa5df2aa90fd3d785528b7">NamedPropertyGetter</a></div><div class="ttdeci">v8::Handle&lt; Value &gt;(* NamedPropertyGetter)(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l08798">test-api.cc:8798</a></div></div>
<div class="ttc" id="namespacev8_html_a7c752895ddfeebfdae44facb3ec74828"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a7c752895ddfeebfdae44facb3ec74828">v8::AccessorSetter</a></div><div class="ttdeci">void(* AccessorSetter)(Local&lt; String &gt; property, Local&lt; Value &gt; value, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01452">v8.h:1452</a></div></div>
<div class="ttc" id="classv8_1_1_function_html_abf59839b7a9fbaaa3baaac35d7de4ef8"><div class="ttname"><a href="../../d5/d54/classv8_1_1_function.html#abf59839b7a9fbaaa3baaac35d7de4ef8">v8::Function::NewInstance</a></div><div class="ttdeci">V8EXPORT Local&lt; Object &gt; NewInstance() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03628">api.cc:3628</a></div></div>
<div class="ttc" id="class_isolate_thread_html_aed899b844f68f22d033f6b4df6f54cc2"><div class="ttname"><a href="../../d5/d7c/class_isolate_thread.html#aed899b844f68f22d033f6b4df6f54cc2">IsolateThread::IsolateThread</a></div><div class="ttdeci">IsolateThread(v8::Isolate *isolate, int fib_limit)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15946">test-api.cc:15946</a></div></div>
<div class="ttc" id="class_weak_call_counter_html_a4a716406d3d9d4fdbbe46f100e648f3b"><div class="ttname"><a href="../../d4/d74/class_weak_call_counter.html#a4a716406d3d9d4fdbbe46f100e648f3b">WeakCallCounter::id</a></div><div class="ttdeci">int id()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l02258">test-api.cc:2258</a></div></div>
<div class="ttc" id="classv8_1_1_stack_frame_html_adb29eb530bece22d0b4e250379efaa00"><div class="ttname"><a href="../../dd/d1e/classv8_1_1_stack_frame.html#adb29eb530bece22d0b4e250379efaa00">v8::StackFrame::IsConstructor</a></div><div class="ttdeci">bool IsConstructor() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02112">api.cc:2112</a></div></div>
<div class="ttc" id="class_visitor42_html"><div class="ttname"><a href="../../d0/dbf/class_visitor42.html">Visitor42</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16270">test-api.cc:16270</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_template_hash_map_impl_html_a5172f06f3e2ee3d3e1f4ac8f1246662e"><div class="ttname"><a href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#a5172f06f3e2ee3d3e1f4ac8f1246662e">v8::internal::TemplateHashMapImpl::Lookup</a></div><div class="ttdeci">Entry * Lookup(void *key, uint32_t hash, bool insert, AllocationPolicy allocator=AllocationPolicy())</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df3/hashmap_8h_source.html#l00131">hashmap.h:131</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_a8fc7f005c25f7ac02e35c8ebf51183b3"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#a8fc7f005c25f7ac02e35c8ebf51183b3">v8::Context::Global</a></div><div class="ttdeci">Local&lt; Object &gt; Global()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04570">api.cc:4570</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_object_html"><div class="ttname"><a href="../../d7/da3/classv8_1_1internal_1_1_heap_object.html">v8::internal::HeapObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l01177">objects.h:1177</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_function_template_info_html_ab160857983866e9ed90e3cc5b615ccf9"><div class="ttname"><a href="../../da/dc6/classv8_1_1internal_1_1_function_template_info.html#ab160857983866e9ed90e3cc5b615ccf9">v8::internal::FunctionTemplateInfo::cast</a></div><div class="ttdeci">static FunctionTemplateInfo * cast(Object *obj)</div></div>
<div class="ttc" id="classv8_1_1_object_html_a9478153d582c834065446a6f0ac86f32"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a9478153d582c834065446a6f0ac86f32">v8::Object::SetIndexedPropertiesToPixelData</a></div><div class="ttdeci">V8EXPORT void SetIndexedPropertiesToPixelData(uint8_t *data, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03407">api.cc:3407</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_acda8fc1a7add6f3e4c8250c63d37b75f"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#acda8fc1a7add6f3e4c8250c63d37b75f">v8::Object::TurnOnAccessCheck</a></div><div class="ttdeci">V8EXPORT void TurnOnAccessCheck()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03233">api.cc:3233</a></div></div>
<div class="ttc" id="test-api_8cc_html_aba74bcf4d40861da61ae4964e303a547"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aba74bcf4d40861da61ae4964e303a547">prologue_call_count_second</a></div><div class="ttdeci">int prologue_call_count_second</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15371">test-api.cc:15371</a></div></div>
<div class="ttc" id="class_snorkel_html_a7db17df339628dddde3bc39a1aa65af2"><div class="ttname"><a href="../../dc/d63/class_snorkel.html#a7db17df339628dddde3bc39a1aa65af2">Snorkel::Snorkel</a></div><div class="ttdeci">Snorkel()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05220">test-api.cc:5220</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_vector_html_a57b988236ee6a3a5e572d126d3fbccc1"><div class="ttname"><a href="../../d5/d7d/classv8_1_1internal_1_1_vector.html#a57b988236ee6a3a5e572d126d3fbccc1">v8::internal::Vector::length</a></div><div class="ttdeci">int length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00384">utils.h:384</a></div></div>
<div class="ttc" id="class_visitor42_html_a2d42f8bdf1b4dbd97566d0766b109697"><div class="ttname"><a href="../../d0/dbf/class_visitor42.html#a2d42f8bdf1b4dbd97566d0766b109697">Visitor42::object_</a></div><div class="ttdeci">v8::Persistent&lt; v8::Object &gt; object_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16288">test-api.cc:16288</a></div></div>
<div class="ttc" id="class_visitor_impl_html"><div class="ttname"><a href="../../d4/dff/class_visitor_impl.html">VisitorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14817">test-api.cc:14817</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html">v8::JitCodeEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02974">v8.h:2974</a></div></div>
<div class="ttc" id="classv8_1_1_function_html_a2d81c8ab10c61a2c6c2fc861256f3045"><div class="ttname"><a href="../../d5/d54/classv8_1_1_function.html#a2d81c8ab10c61a2c6c2fc861256f3045">v8::Function::GetScriptColumnNumber</a></div><div class="ttdeci">V8EXPORT int GetScriptColumnNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03724">api.cc:3724</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html_a94107f5c39b9788624af5ff1b6cf6a88"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html#a94107f5c39b9788624af5ff1b6cf6a88">v8::Isolate::Enter</a></div><div class="ttdeci">void Enter()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05543">api.cc:5543</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_ae61ffdc4886d3057e578e4e39420deb6"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#ae61ffdc4886d3057e578e4e39420deb6">v8::V8::RemoveMessageListeners</a></div><div class="ttdeci">static void RemoveMessageListeners(MessageCallback that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05285">api.cc:5285</a></div></div>
<div class="ttc" id="namespacev8_html_a83be2143eef5fa2b17127fd69686496b"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a83be2143eef5fa2b17127fd69686496b">v8::GCType</a></div><div class="ttdeci">GCType</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02748">v8.h:2748</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_j_s_object_html_a17df22e6490f68a6ded73211f472e379"><div class="ttname"><a href="../../d7/da2/classv8_1_1internal_1_1_j_s_object.html#a17df22e6490f68a6ded73211f472e379">v8::internal::JSObject::SetElement</a></div><div class="ttdeci">static MUST_USE_RESULT Handle&lt; Object &gt; SetElement(Handle&lt; JSObject &gt; object, uint32_t index, Handle&lt; Object &gt; value, PropertyAttributes attr, StrictModeFlag strict_mode, SetPropertyMode set_mode=SET_PROPERTY)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d7c/objects_8cc_source.html#l09886">objects.cc:9886</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html_a2628ea8d12e8b2563c32f05dc7fff6faa878e45290410d9203c9e8ce4f58c456a"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html#a2628ea8d12e8b2563c32f05dc7fff6faa878e45290410d9203c9e8ce4f58c456a">v8::JitCodeEvent::CODE_ADDED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02976">v8.h:2976</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a8aab0b4567cf4b5b01db94fe3765a278"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a8aab0b4567cf4b5b01db94fe3765a278">v8::Object::Has</a></div><div class="ttdeci">V8EXPORT bool Has(Handle&lt; String &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03075">api.cc:3075</a></div></div>
<div class="ttc" id="class_test_resource_html_ae66483e9c17fc53f1c24f5491b41a43b"><div class="ttname"><a href="../../d6/d3d/class_test_resource.html#ae66483e9c17fc53f1c24f5491b41a43b">TestResource::data</a></div><div class="ttdeci">const uint16_t * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00353">test-api.cc:353</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_code_html_a83a03866ef93e7c036640b5917a4f192"><div class="ttname"><a href="../../d3/d0e/classv8_1_1internal_1_1_code.html#a83a03866ef93e7c036640b5917a4f192">v8::internal::Code::GetCodeFromTargetAddress</a></div><div class="ttdeci">static Code * GetCodeFromTargetAddress(Address address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03559">objects-inl.h:3559</a></div></div>
<div class="ttc" id="class_weak_call_counter_html_aeb2624c7a86b765725fd80cd426e147d"><div class="ttname"><a href="../../d4/d74/class_weak_call_counter.html#aeb2624c7a86b765725fd80cd426e147d">WeakCallCounter::increment</a></div><div class="ttdeci">void increment()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l02259">test-api.cc:2259</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a98ad2e2a82b457a733bee13e4c2ba876"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a98ad2e2a82b457a733bee13e4c2ba876">v8::Object::SetHiddenValue</a></div><div class="ttdeci">V8EXPORT bool SetHiddenValue(Handle&lt; String &gt; key, Handle&lt; Value &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03305">api.cc:3305</a></div></div>
<div class="ttc" id="classv8_1_1_resource_constraints_html_a163e8ed3c96bf6d01e07f07bcb03b147"><div class="ttname"><a href="../../d8/dcd/classv8_1_1_resource_constraints.html#a163e8ed3c96bf6d01e07f07bcb03b147">v8::ResourceConstraints::set_stack_limit</a></div><div class="ttdeci">void set_stack_limit(uint32_t *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02645">v8.h:2645</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_html_ad5117e81e6281d6880f6e4591c045464"><div class="ttname"><a href="../../d2/d78/classv8_1_1_persistent.html#ad5117e81e6281d6880f6e4591c045464">v8::Persistent::New</a></div><div class="ttdeci">static Persistent&lt; T &gt; New(Handle&lt; T &gt; that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04206">v8.h:4206</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_abb28d8fe89a3e73aad95fafcf37f8e04"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#abb28d8fe89a3e73aad95fafcf37f8e04">v8::internal::s0</a></div><div class="ttdeci">const SwVfpRegister s0</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00275">assembler-arm.h:275</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_html_afbaa9137eb86d66f958fcc41a77c2fea"><div class="ttname"><a href="../../dd/d58/classv8_1_1internal_1_1_heap.html#afbaa9137eb86d66f958fcc41a77c2fea">v8::internal::Heap::kMakeHeapIterableMask</a></div><div class="ttdeci">static const int kMakeHeapIterableMask</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l01088">heap.h:1088</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_a61fe0349d692eb6d4f5b94e35049b2e9a3b4b1aa023d66447f1d05b2d79021b10"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a3b4b1aa023d66447f1d05b2d79021b10">InitDefaultIsolateThread::IgnoreOOM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16018">test-api.cc:16018</a></div></div>
<div class="ttc" id="test-api_8cc_html_a83454004278270eb398ff2a9c6132e48"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a83454004278270eb398ff2a9c6132e48">callback_fired</a></div><div class="ttdeci">uint8_t callback_fired</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17063">test-api.cc:17063</a></div></div>
<div class="ttc" id="execution_8h_html"><div class="ttname"><a href="../../dd/d01/execution_8h.html">execution.h</a></div></div>
<div class="ttc" id="namespacev8_html_ad8aff9e545a5f496a179a16667431478"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478">v8::AccessType</a></div><div class="ttdeci">AccessType</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02131">v8.h:2131</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_aa3eca255b6be227d7d901cc2a72017a5"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#aa3eca255b6be227d7d901cc2a72017a5">ApiTestFuzzer::Run</a></div><div class="ttdeci">virtual void Run()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10648">test-api.cc:10648</a></div></div>
<div class="ttc" id="test-api_8cc_html_a86ff70a54b56aec25a079444d7a4614f"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a86ff70a54b56aec25a079444d7a4614f">FailedAccessCheckCallbackGC</a></div><div class="ttdeci">void FailedAccessCheckCallbackGC(Local&lt; v8::Object &gt; target, v8::AccessType type, Local&lt; v8::Value &gt; data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15630">test-api.cc:15630</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_a6f892599390671c9a72cccc59b240507"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#a6f892599390671c9a72cccc59b240507">false</a></div><div class="ttdeci">activate correct semantics for inheriting readonliness false</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00140">flag-definitions.h:140</a></div></div>
<div class="ttc" id="classv8_1_1_handle_html"><div class="ttname"><a href="../../d3/dd5/classv8_1_1_handle.html">v8::Handle&lt; Value &gt;</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_a965cf977d6cc4ab38c7b55d51e38652a"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#a965cf977d6cc4ab38c7b55d51e38652a">code</a></div><div class="ttdeci">activate correct semantics for inheriting readonliness enable harmony semantics for typeof enable harmony enable harmony proxies enable all harmony harmony_scoping harmony_proxies harmony_scoping tracks arrays with only smi values automatically unbox arrays of doubles use crankshaft use hydrogen range analysis use hydrogen global value numbering use function inlining maximum number of AST nodes considered for a single inlining loop invariant code motion print statistics for hydrogen trace generated IR for specified phases trace register allocator trace range analysis trace representation types environment for every instruction put a break point before deoptimizing polymorphic inlining perform array bounds checks elimination use dead code elimination trace on stack replacement optimize closures cache optimized code for closures functions with arguments object loop weight for representation inference allow uint32 values on optimize frames if they are used only in safe operations track parallel recompilation enable all profiler experiments number of stack frames inspected by the profiler call recompile stub directly when self optimizing trigger profiler ticks based on counting instead of timing weight back edges by jump distance for interrupt triggering percentage of ICs that must have type info to allow optimization watch_ic_patching retry_self_opt interrupt_at_exit extra verbose compilation tracing generate extra code(assertions) for debugging&quot;) DEFINE_bool(code_comments</div></div>
<div class="ttc" id="class_reg_exp_string_modification_test_html"><div class="ttname"><a href="../../d4/d1b/class_reg_exp_string_modification_test.html">RegExpStringModificationTest</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12530">test-api.cc:12530</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a8a23f3d45600a9f5e9da3a36f6dd4538"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a8a23f3d45600a9f5e9da3a36f6dd4538">v8::Value::BooleanValue</a></div><div class="ttdeci">V8EXPORT bool BooleanValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02540">api.cc:2540</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_external_two_byte_string_html_a4c77a9be9ee15c63ec924deced362488"><div class="ttname"><a href="../../d2/d61/classv8_1_1internal_1_1_external_two_byte_string.html#a4c77a9be9ee15c63ec924deced362488">v8::internal::ExternalTwoByteString::set_resource</a></div><div class="ttdeci">void set_resource(const Resource *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l02650">objects-inl.h:2650</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a61f71fa44dbac342ed3919921c4fc95b"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a61f71fa44dbac342ed3919921c4fc95b">v8::internal::f2</a></div><div class="ttdeci">const FPURegister f2</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d46/assembler-mips_8h_source.html#l00288">assembler-mips.h:288</a></div></div>
<div class="ttc" id="class_test_ascii_resource_html_a2edf269e5cd490f7863c9150bb910c85"><div class="ttname"><a href="../../d3/d8e/class_test_ascii_resource.html#a2edf269e5cd490f7863c9150bb910c85">TestAsciiResource::length</a></div><div class="ttdeci">size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00381">test-api.cc:381</a></div></div>
<div class="ttc" id="test-api_8cc_html_a44857431848a186a61b1a14aa562278b"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a44857431848a186a61b1a14aa562278b">CheckThisNamedPropertyEnumerator</a></div><div class="ttdeci">v8::Handle&lt; v8::Array &gt; CheckThisNamedPropertyEnumerator(const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01767">test-api.cc:1767</a></div></div>
<div class="ttc" id="test-api_8cc_html_a5f9cc2080f13f303680c87b63c4e97b3"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a5f9cc2080f13f303680c87b63c4e97b3">FooGetInterceptor</a></div><div class="ttdeci">Handle&lt; Value &gt; FooGetInterceptor(Local&lt; String &gt; name, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15220">test-api.cc:15220</a></div></div>
<div class="ttc" id="test-api_8cc_html_a21a0e66c0ef234da74f268a258ebf8d2"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a21a0e66c0ef234da74f268a258ebf8d2">HasOwnPropertyNamedPropertyGetter</a></div><div class="ttdeci">Handle&lt; Value &gt; HasOwnPropertyNamedPropertyGetter(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16566">test-api.cc:16566</a></div></div>
<div class="ttc" id="class_visitor42_html_a17ced6edbc998fb3bc23125b1ccae8bf"><div class="ttname"><a href="../../d0/dbf/class_visitor42.html#a17ced6edbc998fb3bc23125b1ccae8bf">Visitor42::VisitPersistentHandle</a></div><div class="ttdeci">virtual void VisitPersistentHandle(Persistent&lt; Value &gt; value, uint16_t class_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16275">test-api.cc:16275</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a2858c3ff89ed8f4b756b94cbebcfe42f"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a2858c3ff89ed8f4b756b94cbebcfe42f">v8::Value::IsUndefined</a></div><div class="ttdeci">bool IsUndefined() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04472">v8.h:4472</a></div></div>
<div class="ttc" id="namespacev8_html_a8e04bec100ff9e4d91edc074d3efba57"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a8e04bec100ff9e4d91edc074d3efba57">v8::WeakReferenceCallback</a></div><div class="ttdeci">void(* WeakReferenceCallback)(Persistent&lt; Value &gt; object, void *parameter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00138">v8.h:138</a></div></div>
<div class="ttc" id="classv8_1_1_message_html_a66c1993510fe48d9661aadbbe820ae42"><div class="ttname"><a href="../../d9/d28/classv8_1_1_message.html#a66c1993510fe48d9661aadbbe820ae42">v8::Message::GetLineNumber</a></div><div class="ttdeci">int GetLineNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01873">api.cc:1873</a></div></div>
<div class="ttc" id="test-api_8cc_html_a04e428788209177a2df97577cfb25634"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a04e428788209177a2df97577cfb25634">HasOwnPropertyIndexedPropertyQuery</a></div><div class="ttdeci">Handle&lt; v8::Integer &gt; HasOwnPropertyIndexedPropertyQuery(uint32_t index, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16573">test-api.cc:16573</a></div></div>
<div class="ttc" id="classv8_1_1_exception_html_ab69d3dd2c7b10df614866c1dbfdd82ae"><div class="ttname"><a href="../../da/d6a/classv8_1_1_exception.html#ab69d3dd2c7b10df614866c1dbfdd82ae">v8::Exception::RangeError</a></div><div class="ttdeci">static Local&lt; Value &gt; RangeError(Handle&lt; String &gt; message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05618">api.cc:5618</a></div></div>
<div class="ttc" id="classv8_1_1_resource_constraints_html"><div class="ttname"><a href="../../d8/dcd/classv8_1_1_resource_constraints.html">v8::ResourceConstraints</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02634">v8.h:2634</a></div></div>
<div class="ttc" id="checks_8h_html_a403854a78bdaff5e42e57b4126bd12f4"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a403854a78bdaff5e42e57b4126bd12f4">CHECK_NE</a></div><div class="ttdeci">#define CHECK_NE(unexpected, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00223">checks.h:223</a></div></div>
<div class="ttc" id="classv8_1_1_number_object_html"><div class="ttname"><a href="../../da/d56/classv8_1_1_number_object.html">v8::NumberObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01846">v8.h:1846</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_thread_html_a07aaf1227e4d645f15e0a964f54ef291"><div class="ttname"><a href="../../db/d61/classv8_1_1internal_1_1_thread.html#a07aaf1227e4d645f15e0a964f54ef291">v8::internal::Thread::Start</a></div><div class="ttdeci">void Start()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dd7/platform-cygwin_8cc_source.html#l00401">platform-cygwin.cc:401</a></div></div>
<div class="ttc" id="namespacev8_html_a6d946d0599c405a057cb4a1b446c3662"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a6d946d0599c405a057cb4a1b446c3662">v8::False</a></div><div class="ttdeci">Handle&lt; Boolean &gt; V8EXPORT False()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00579">api.cc:579</a></div></div>
<div class="ttc" id="class_reg_exp_interrupt_test_html_a4a2eff499a3c811ef4d814024ba98ef0"><div class="ttname"><a href="../../dc/d6f/class_reg_exp_interrupt_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RegExpInterruptTest::RunTest</a></div><div class="ttdeci">void RunTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12124">test-api.cc:12124</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_a93167fd3ca0557191f8854f4236e29e4"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a93167fd3ca0557191f8854f4236e29e4">v8::internal::OS::Sleep</a></div><div class="ttdeci">static void Sleep(const int milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dd7/platform-cygwin_8cc_source.html#l00174">platform-cygwin.cc:174</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_heap_html_adc9d15974e5ed64783d5f9919b0bebaa"><div class="ttname"><a href="../../dd/d58/classv8_1_1internal_1_1_heap.html#adc9d15974e5ed64783d5f9919b0bebaa">v8::internal::Heap::kAbortIncrementalMarkingMask</a></div><div class="ttdeci">static const int kAbortIncrementalMarkingMask</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l01084">heap.h:1084</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a00e8464566c15cbc97c5c8c850309df7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a00e8464566c15cbc97c5c8c850309df7">v8::internal::CStrVector</a></div><div class="ttdeci">Vector&lt; const char &gt; CStrVector(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00526">utils.h:526</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ade544f21fa0bf00a352dfd991253bc03"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ade544f21fa0bf00a352dfd991253bc03">v8::internal::StrLength</a></div><div class="ttdeci">int StrLength(const char *string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00234">utils.h:234</a></div></div>
<div class="ttc" id="classv8_1_1_utils_html_a91962d30779259da776009f0cfb58291"><div class="ttname"><a href="../../d4/d4b/classv8_1_1_utils.html#a91962d30779259da776009f0cfb58291">v8::Utils::ToLocal</a></div><div class="ttdeci">static Local&lt; Context &gt; ToLocal(v8::internal::Handle&lt; v8::internal::Context &gt; obj)</div></div>
<div class="ttc" id="checks_8h_html_a90b329b303c3a01760b7ad27fe92733f"><div class="ttname"><a href="../../d5/d16/checks_8h.html#a90b329b303c3a01760b7ad27fe92733f">CHECK_LE</a></div><div class="ttdeci">#define CHECK_LE(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/checks_8h_source.html#l00230">checks.h:230</a></div></div>
<div class="ttc" id="classv8_1_1_object_template_html_a21edabb159db29683a37ea2eef37f20c"><div class="ttname"><a href="../../db/d5f/classv8_1_1_object_template.html#a21edabb159db29683a37ea2eef37f20c">v8::ObjectTemplate::SetNamedPropertyHandler</a></div><div class="ttdeci">void SetNamedPropertyHandler(NamedPropertyGetter getter, NamedPropertySetter setter=0, NamedPropertyQuery query=0, NamedPropertyDeleter deleter=0, NamedPropertyEnumerator enumerator=0, Handle&lt; Value &gt; data=Handle&lt; Value &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01316">api.cc:1316</a></div></div>
<div class="ttc" id="test-api_8cc_html_abe20430b300c607cdb042dd911ad7ddf"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#abe20430b300c607cdb042dd911ad7ddf">HandleF</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; HandleF(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l02632">test-api.cc:2632</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_a9032cdcad230f3cde4b521a6750884ff"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a9032cdcad230f3cde4b521a6750884ff">v8::internal::OS::Print</a></div><div class="ttdeci">static void Print(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d19/platform-nullos_8cc_source.html#l00153">platform-nullos.cc:153</a></div></div>
<div class="ttc" id="classv8_1_1_arguments_html_a99baaf487ad1245c1a01d90a1c70a90f"><div class="ttname"><a href="../../df/d31/classv8_1_1_arguments.html#a99baaf487ad1245c1a01d90a1c70a90f">v8::Arguments::This</a></div><div class="ttdeci">Local&lt; Object &gt; This() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04292">v8.h:4292</a></div></div>
<div class="ttc" id="token_8cc_html_aeb3b320679bdd784c8fc3b5f2aa813a9"><div class="ttname"><a href="../../d4/d55/token_8cc.html#aeb3b320679bdd784c8fc3b5f2aa813a9">T</a></div><div class="ttdeci">#define T(name, string, precedence)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d55/token_8cc_source.html#l00048">token.cc:48</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a47723cce36b1ac2dc3169833caf6324f"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a47723cce36b1ac2dc3169833caf6324f">v8::V8::AddCallCompletedCallback</a></div><div class="ttdeci">static void AddCallCompletedCallback(CallCompletedCallback callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05445">api.cc:5445</a></div></div>
<div class="ttc" id="class_reg_exp_interrupt_test_html_aa1ae9c0370244b9b54ce2333b002af7a"><div class="ttname"><a href="../../dc/d6f/class_reg_exp_interrupt_test.html#aa1ae9c0370244b9b54ce2333b002af7a">RegExpInterruptTest::RegExpInterruptTest</a></div><div class="ttdeci">RegExpInterruptTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12122">test-api.cc:12122</a></div></div>
<div class="ttc" id="class_test_ascii_resource_with_dispose_control_html_a98ad23e8d7bd019e92ad5f18240c3168"><div class="ttname"><a href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a98ad23e8d7bd019e92ad5f18240c3168">TestAsciiResourceWithDisposeControl::dispose_count</a></div><div class="ttdeci">static int dispose_count</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00668">test-api.cc:668</a></div></div>
<div class="ttc" id="classv8_1_1_array_html"><div class="ttname"><a href="../../d3/d32/classv8_1_1_array.html">v8::Array</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01744">v8.h:1744</a></div></div>
<div class="ttc" id="classv8_1_1_stack_frame_html_aa961d7c5a127b3e77f233eded8c34ed9"><div class="ttname"><a href="../../dd/d1e/classv8_1_1_stack_frame.html#aa961d7c5a127b3e77f233eded8c34ed9">v8::StackFrame::GetScriptName</a></div><div class="ttdeci">Local&lt; String &gt; GetScriptName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02053">api.cc:2053</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_semaphore_html"><div class="ttname"><a href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html">v8::internal::Semaphore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00617">platform.h:617</a></div></div>
<div class="ttc" id="classv8_1_1_string_1_1_external_string_resource_html"><div class="ttname"><a href="../../d3/d29/classv8_1_1_string_1_1_external_string_resource.html">v8::String::ExternalStringResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01143">v8.h:1143</a></div></div>
<div class="ttc" id="test-api_8cc_html_a574474c90f1bb935aec8b86ca3f820ab"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a574474c90f1bb935aec8b86ca3f820ab">ThrowingDirectGetterCallback</a></div><div class="ttdeci">v8::Handle&lt; v8::Value &gt; ThrowingDirectGetterCallback(Local&lt; String &gt; name, const v8::AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l09659">test-api.cc:9659</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_abfee0d12e50e0499ce0e3eac2612b3a2"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#abfee0d12e50e0499ce0e3eac2612b3a2">v8::Value::IsString</a></div><div class="ttdeci">bool IsString() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04508">v8.h:4508</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a00b253ab5971676c7634e1eba361c47a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a00b253ab5971676c7634e1eba361c47a">v8::internal::s1</a></div><div class="ttdeci">const SwVfpRegister s1</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00276">assembler-arm.h:276</a></div></div>
<div class="ttc" id="classv8_1_1_local_html_af8ad97e74b3e02fafdb20fd8f42efba5"><div class="ttname"><a href="../../de/deb/classv8_1_1_local.html#af8ad97e74b3e02fafdb20fd8f42efba5">v8::Local&lt; Object &gt;::Cast</a></div><div class="ttdeci">static Local&lt; Object &gt; Cast(Local&lt; S &gt; that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00282">v8.h:282</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a165136d736a2edcccac553aca4a5806e"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a165136d736a2edcccac553aca4a5806e">v8::Value::IsObject</a></div><div class="ttdeci">V8EXPORT bool IsObject() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02177">api.cc:2177</a></div></div>
<div class="ttc" id="test-api_8cc_html_a767d385c512db157607ffeb68aa9034c"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a767d385c512db157607ffeb68aa9034c">CheckThisIndexedPropertyDeleter</a></div><div class="ttdeci">v8::Handle&lt; v8::Boolean &gt; CheckThisIndexedPropertyDeleter(uint32_t index, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01741">test-api.cc:1741</a></div></div>
<div class="ttc" id="namespacev8_html_aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660ac9d3e887722f2bc482bcca9d41c512af">v8::None</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01425">v8.h:1425</a></div></div>
<div class="ttc" id="classv8_1_1_number_html_a968d42d5659e1ae200e249f0a9b52f57"><div class="ttname"><a href="../../d9/d29/classv8_1_1_number.html#a968d42d5659e1ae200e249f0a9b52f57">v8::Number::Value</a></div><div class="ttdeci">V8EXPORT double Value() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04138">api.cc:4138</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_a2ffa51c49f7820186966d6d3402b6d58"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#a2ffa51c49f7820186966d6d3402b6d58">v8::Context::IsCodeGenerationFromStringsAllowed</a></div><div class="ttdeci">bool IsCodeGenerationFromStringsAllowed()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04620">api.cc:4620</a></div></div>
<div class="ttc" id="classv8_1_1_exception_html_ad9caf2c7996a032e755b8ca74939314a"><div class="ttname"><a href="../../da/d6a/classv8_1_1_exception.html#ad9caf2c7996a032e755b8ca74939314a">v8::Exception::ReferenceError</a></div><div class="ttdeci">static Local&lt; Value &gt; ReferenceError(Handle&lt; String &gt; message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05634">api.cc:5634</a></div></div>
<div class="ttc" id="class_u_c16_vector_resource_html_a1c242584827924dd7ce789a774372aa4"><div class="ttname"><a href="../../d4/d2b/class_u_c16_vector_resource.html#a1c242584827924dd7ce789a774372aa4">UC16VectorResource::~UC16VectorResource</a></div><div class="ttdeci">virtual ~UC16VectorResource()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12402">test-api.cc:12402</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_ac0bfad7b49b63e797573151f79007de5"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#ac0bfad7b49b63e797573151f79007de5">v8::internal::OS::SNPrintF</a></div><div class="ttdeci">static int SNPrintF(Vector&lt; char &gt; str, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d19/platform-nullos_8cc_source.html#l00195">platform-nullos.cc:195</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a677de3eee9e9637a8fa7c07612546d02"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a677de3eee9e9637a8fa7c07612546d02">v8::TryCatch::StackTrace</a></div><div class="ttdeci">Local&lt; Value &gt; StackTrace() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01732">api.cc:1732</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a12b9f28e660cd82558c23dd598654247"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a12b9f28e660cd82558c23dd598654247">v8::String::Empty</a></div><div class="ttdeci">static V8EXPORT v8::Local&lt; v8::String &gt; Empty()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04769">api.cc:4769</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_afa44df2a14037562568d7f965d50833c"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#afa44df2a14037562568d7f965d50833c">v8::internal::OS::CreateSemaphore</a></div><div class="ttdeci">static Semaphore * CreateSemaphore(int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dd7/platform-cygwin_8cc_source.html#l00578">platform-cygwin.cc:578</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_a61fe0349d692eb6d4f5b94e35049b2e9ac2b9f41c48b84e723b6cb0cf0b4fed98"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9ac2b9f41c48b84e723b6cb0cf0b4fed98">InitDefaultIsolateThread::SetAddHistogramSampleFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16023">test-api.cc:16023</a></div></div>
<div class="ttc" id="isolate_8h_html_afbd09b56c7cdf48ff457909e030f1f74"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html#afbd09b56c7cdf48ff457909e030f1f74">ISOLATE</a></div><div class="ttdeci">#define ISOLATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l01435">isolate.h:1435</a></div></div>
<div class="ttc" id="namespacev8_html_ad8aff9e545a5f496a179a16667431478a1615bd957fa979a1af6d726fdad14e46"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478a1615bd957fa979a1af6d726fdad14e46">v8::ACCESS_KEYS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02136">v8.h:2136</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5a857fe236959ea037b3dd560a3414f0"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5a857fe236959ea037b3dd560a3414f0">v8::internal::ToNumber</a></div><div class="ttdeci">int ToNumber(Register reg)</div></div>
<div class="ttc" id="classv8_1_1_value_html_a76733e4c8f10856bf7826a603b266a7d"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a76733e4c8f10856bf7826a603b266a7d">v8::Value::IsDate</a></div><div class="ttdeci">V8EXPORT bool IsDate() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02239">api.cc:2239</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_always_allocate_scope_html"><div class="ttname"><a href="../../d4/d81/classv8_1_1internal_1_1_always_allocate_scope.html">v8::internal::AlwaysAllocateScope</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l02216">heap.h:2216</a></div></div>
<div class="ttc" id="test-api_8cc_html_ac4107386ee944e70796b6036dbe9e0c0"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ac4107386ee944e70796b6036dbe9e0c0">AddInterceptor</a></div><div class="ttdeci">void AddInterceptor(Handle&lt; FunctionTemplate &gt; templ, v8::NamedPropertyGetter getter, v8::NamedPropertySetter setter)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01422">test-api.cc:1422</a></div></div>
<div class="ttc" id="shell_8cc_html_a32c498445e9d00c9f615371af93c3565"><div class="ttname"><a href="../../dd/d51/shell_8cc.html#a32c498445e9d00c9f615371af93c3565">Version</a></div><div class="ttdeci">v8::Handle&lt; v8::Value &gt; Version(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d51/shell_8cc_source.html#l00191">shell.cc:191</a></div></div>
<div class="ttc" id="test-api_8cc_html_adfce1877d0e64f1cef1610811e6372c9"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#adfce1877d0e64f1cef1610811e6372c9">ThrowValue</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; ThrowValue(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l03413">test-api.cc:3413</a></div></div>
<div class="ttc" id="classv8_1_1_handle_scope_html_ab5f7f87f945f118b2e14c3f7d68881ab"><div class="ttname"><a href="../../d3/d95/classv8_1_1_handle_scope.html#ab5f7f87f945f118b2e14c3f7d68881ab">v8::HandleScope::NumberOfHandles</a></div><div class="ttdeci">static int NumberOfHandles()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00723">api.cc:723</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_string_html_a0a08c3be5d13ce1af2b496e392171b99"><div class="ttname"><a href="../../db/db6/classv8_1_1internal_1_1_string.html#a0a08c3be5d13ce1af2b496e392171b99">v8::internal::String::WriteToFlat</a></div><div class="ttdeci">static void WriteToFlat(String *source, sinkchar *sink, int from, int to)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d7c/objects_8cc_source.html#l06891">objects.cc:6891</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a43b4ee427727aa33cba0b551f7a043c6"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a43b4ee427727aa33cba0b551f7a043c6">v8::Object::GetIndexedPropertiesExternalArrayDataLength</a></div><div class="ttdeci">V8EXPORT int GetIndexedPropertiesExternalArrayDataLength()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03535">api.cc:3535</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_abc6126af1d45847bc59afa0aa3216b04ac461e84f27bbb236874e1011cd66031f"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#abc6126af1d45847bc59afa0aa3216b04ac461e84f27bbb236874e1011cd66031f">v8::internal::U</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/constants-arm_8h_source.html#l00230">constants-arm.h:230</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e325b47be17d36b12096ad1d73067b1"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e325b47be17d36b12096ad1d73067b1">v8::internal::r1</a></div><div class="ttdeci">const Register r1</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00149">assembler-arm.h:149</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a3edf775c6a025374ad865189a5586718"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a3edf775c6a025374ad865189a5586718">v8::Value::Uint32Value</a></div><div class="ttdeci">V8EXPORT uint32_t Uint32Value() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02743">api.cc:2743</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_o_s_html_a2ad80cdfa895b81968050fa753ecda20"><div class="ttname"><a href="../../de/d32/classv8_1_1internal_1_1_o_s.html#a2ad80cdfa895b81968050fa753ecda20">v8::internal::OS::nan_value</a></div><div class="ttdeci">static double nan_value()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d19/platform-nullos_8cc_source.html#l00212">platform-nullos.cc:212</a></div></div>
<div class="ttc" id="classv8_1_1_accessor_signature_html_a193a5057e3fa67cced2a13de9a8934ea"><div class="ttname"><a href="../../d4/da9/classv8_1_1_accessor_signature.html#a193a5057e3fa67cced2a13de9a8934ea">v8::AccessorSignature::New</a></div><div class="ttdeci">static Local&lt; AccessorSignature &gt; New(Handle&lt; FunctionTemplate &gt; receiver=Handle&lt; FunctionTemplate &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01001">api.cc:1001</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_scoped_vector_html"><div class="ttname"><a href="../../da/de2/classv8_1_1internal_1_1_scoped_vector.html">v8::internal::ScopedVector&lt; char &gt;</a></div></div>
<div class="ttc" id="test-api_8cc_html_a1120a6fc2beea69913bd989b4f11e75c"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a1120a6fc2beea69913bd989b4f11e75c">AddAccessor</a></div><div class="ttdeci">void AddAccessor(Handle&lt; FunctionTemplate &gt; templ, Handle&lt; String &gt; name, v8::AccessorGetter getter, v8::AccessorSetter setter)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01415">test-api.cc:1415</a></div></div>
<div class="ttc" id="classv8_1_1_arguments_html"><div class="ttname"><a href="../../df/d31/classv8_1_1_arguments.html">v8::Arguments</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02000">v8.h:2000</a></div></div>
<div class="ttc" id="class_visitor_impl_html_aa4a2ec6c96f1f30e3f90059ec85d1698"><div class="ttname"><a href="../../d4/dff/class_visitor_impl.html#aa4a2ec6c96f1f30e3f90059ec85d1698">VisitorImpl::VisitorImpl</a></div><div class="ttdeci">VisitorImpl(TestResource *r1, TestResource *r2)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14819">test-api.cc:14819</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_handle_html_a3c45461717ff230edd665ce24da988c5"><div class="ttname"><a href="../../da/dde/classv8_1_1internal_1_1_handle.html#a3c45461717ff230edd665ce24da988c5">v8::internal::Handle::is_null</a></div><div class="ttdeci">bool is_null() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d23/handles_8h_source.html#l00087">handles.h:87</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html_afedd19aa08d43151432e811be952c091"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html#afedd19aa08d43151432e811be952c091">v8::JitCodeEvent::name</a></div><div class="ttdeci">struct v8::JitCodeEvent::@0::@2 name</div></div>
<div class="ttc" id="classv8_1_1_value_html_aa9d220237cea3d96fe34448d6ec84847"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#aa9d220237cea3d96fe34448d6ec84847">v8::Value::IsNumber</a></div><div class="ttdeci">V8EXPORT bool IsNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02183">api.cc:2183</a></div></div>
<div class="ttc" id="class_test_ascii_resource_with_dispose_control_html_a45ff1f29c40c3c208b8dfca0e2d2369c"><div class="ttname"><a href="../../d9/de5/class_test_ascii_resource_with_dispose_control.html#a45ff1f29c40c3c208b8dfca0e2d2369c">TestAsciiResourceWithDisposeControl::dispose_calls</a></div><div class="ttdeci">static int dispose_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00667">test-api.cc:667</a></div></div>
<div class="ttc" id="class_whammy_html_a6b79b5f5029759038576f82e1009e195"><div class="ttname"><a href="../../d8/dc7/class_whammy.html#a6b79b5f5029759038576f82e1009e195">Whammy::cursor_</a></div><div class="ttdeci">int cursor_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05240">test-api.cc:5240</a></div></div>
<div class="ttc" id="test-api_8cc_html_a80b0dc1c8ed1d0ea47d5e2fd1e6733bd"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a80b0dc1c8ed1d0ea47d5e2fd1e6733bd">CallCompletedCallback2</a></div><div class="ttdeci">void CallCompletedCallback2()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l17072">test-api.cc:17072</a></div></div>
<div class="ttc" id="namespacev8_html_a2e9a0288e6c2df2ecebc50944c3ff9faa8184abbb8ba084f35692bbf8bc5657f0"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa8184abbb8ba084f35692bbf8bc5657f0">v8::ALL_CAN_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01473">v8.h:1473</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_a4ba8d70f98ffa80ff0c5726138d449f5"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#a4ba8d70f98ffa80ff0c5726138d449f5">InitDefaultIsolateThread::result</a></div><div class="ttdeci">bool result()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16065">test-api.cc:16065</a></div></div>
<div class="ttc" id="namespacev8_html_a8490f8c3ad68a8c8b419500f6ab95be0a96625f71abdaecbb7e353dbcec8c6f76"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a8490f8c3ad68a8c8b419500f6ab95be0a96625f71abdaecbb7e353dbcec8c6f76">v8::kJitCodeEventEnumExisting</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03008">v8.h:3008</a></div></div>
<div class="ttc" id="test-api_8cc_html_af7ec1f04cbc1275cab5a8bb1249489e9"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#af7ec1f04cbc1275cab5a8bb1249489e9">EpilogueCallback</a></div><div class="ttdeci">void EpilogueCallback(v8::GCType, v8::GCCallbackFlags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15378">test-api.cc:15378</a></div></div>
<div class="ttc" id="class_function_extension_html_af46f30fc7a88ec9ddb91749b8c3c8917"><div class="ttname"><a href="../../dc/d4c/class_function_extension.html#af46f30fc7a88ec9ddb91749b8c3c8917">FunctionExtension::GetNativeFunction</a></div><div class="ttdeci">virtual v8::Handle&lt; v8::FunctionTemplate &gt; GetNativeFunction(v8::Handle&lt; String &gt; name)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05097">test-api.cc:5097</a></div></div>
<div class="ttc" id="test-api_8cc_html_adbf43fbdca32e41430ae60c912fc509c"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#adbf43fbdca32e41430ae60c912fc509c">AnalyzeStackOfDynamicScriptWithSourceURL</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; AnalyzeStackOfDynamicScriptWithSourceURL(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14591">test-api.cc:14591</a></div></div>
<div class="ttc" id="classv8_1_1_string_object_html_a0f7276167cc1042526e01cc5489588e1"><div class="ttname"><a href="../../d9/d38/classv8_1_1_string_object.html#a0f7276167cc1042526e01cc5489588e1">v8::StringObject::StringValue</a></div><div class="ttdeci">V8EXPORT Local&lt; String &gt; StringValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05022">api.cc:5022</a></div></div>
<div class="ttc" id="classv8_1_1_function_template_html_a7d1eef8a098a7467763f8c17f37b2d0d"><div class="ttname"><a href="../../d8/d83/classv8_1_1_function_template.html#a7d1eef8a098a7467763f8c17f37b2d0d">v8::FunctionTemplate::GetFunction</a></div><div class="ttdeci">Local&lt; Function &gt; GetFunction()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04675">api.cc:4675</a></div></div>
<div class="ttc" id="class_visitor_impl_html_a6334f27ca3b7bdfa0dd9e0f7f7bce5a5"><div class="ttname"><a href="../../d4/dff/class_visitor_impl.html#a6334f27ca3b7bdfa0dd9e0f7f7bce5a5">VisitorImpl::CheckVisitedResources</a></div><div class="ttdeci">void CheckVisitedResources()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14842">test-api.cc:14842</a></div></div>
<div class="ttc" id="class_register_threaded_test_html_a76347be1abe6a0d8e096f4fdab2a604f"><div class="ttname"><a href="../../dd/d72/class_register_threaded_test.html#a76347be1abe6a0d8e096f4fdab2a604f">RegisterThreadedTest::nth</a></div><div class="ttdeci">static RegisterThreadedTest * nth(int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00145">cctest.h:145</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a767c85176123a943849a1abecc3d0755"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a767c85176123a943849a1abecc3d0755">v8::internal::uc16</a></div><div class="ttdeci">uint16_t uc16</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00259">globals.h:259</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_acfbdfd7427b516ebdb5c47c4df5ed96c"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#acfbdfd7427b516ebdb5c47c4df5ed96c">v8::Object::ForceSet</a></div><div class="ttdeci">V8EXPORT bool ForceSet(Handle&lt; Value &gt; key, Handle&lt; Value &gt; value, PropertyAttribute attribs=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02807">api.cc:2807</a></div></div>
<div class="ttc" id="test-api_8cc_html_a0cdcc7fd63457b883bf222b5a182ac1c"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a0cdcc7fd63457b883bf222b5a182ac1c">DisposeAndForceGcCallback</a></div><div class="ttdeci">void DisposeAndForceGcCallback(v8::Persistent&lt; v8::Value &gt; handle, void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10994">test-api.cc:10994</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_acf87d33c0190e1344dd08155006719ba"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#acf87d33c0190e1344dd08155006719ba">v8::Object::Delete</a></div><div class="ttdeci">V8EXPORT bool Delete(Handle&lt; String &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03064">api.cc:3064</a></div></div>
<div class="ttc" id="test-api_8cc_html_ad8398b8671b8c35ed3b5e312d8385b92"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ad8398b8671b8c35ed3b5e312d8385b92">GetUtf8Length</a></div><div class="ttdeci">int GetUtf8Length(Handle&lt; String &gt; str)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05713">test-api.cc:5713</a></div></div>
<div class="ttc" id="classv8_1_1_exception_html_a491e77f6e498b321c12e711ea5f167cc"><div class="ttname"><a href="../../da/d6a/classv8_1_1_exception.html#a491e77f6e498b321c12e711ea5f167cc">v8::Exception::SyntaxError</a></div><div class="ttdeci">static Local&lt; Value &gt; SyntaxError(Handle&lt; String &gt; message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05651">api.cc:5651</a></div></div>
<div class="ttc" id="classv8_1_1_reg_exp_html_aa705cf7e79a21c2352b00ffe20cd295fa4946463638b68bfca14da6424b0920b2"><div class="ttname"><a href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa4946463638b68bfca14da6424b0920b2">v8::RegExp::kIgnoreCase</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01912">v8.h:1912</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a1f871b0ebe142f0a099ad8eacf920be2"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a1f871b0ebe142f0a099ad8eacf920be2">v8::Object::Clone</a></div><div class="ttdeci">V8EXPORT Local&lt; Object &gt; Clone()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03256">api.cc:3256</a></div></div>
<div class="ttc" id="classv8_1_1_script_data_html_a1887a1b523a7b421a5852b1cf4dbd5a2"><div class="ttname"><a href="../../dc/dad/classv8_1_1_script_data.html#a1887a1b523a7b421a5852b1cf4dbd5a2">v8::ScriptData::Length</a></div><div class="ttdeci">virtual int Length()=0</div></div>
<div class="ttc" id="classv8_1_1internal_1_1_semaphore_html_a089a008fd80ce776f6dc455104cbfb9d"><div class="ttname"><a href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a089a008fd80ce776f6dc455104cbfb9d">v8::internal::Semaphore::Signal</a></div><div class="ttdeci">virtual void Signal()=0</div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a3de4b929d8b0f9504e0452c9ccacc78c"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a3de4b929d8b0f9504e0452c9ccacc78c">v8::internal::hidden_prototype</a></div><div class="ttdeci">kPropertyAccessorsOffset kNamedPropertyHandlerOffset kInstanceTemplateOffset kAccessCheckInfoOffset kEvalFrominstructionsOffsetOffset kInstanceClassNameOffset hidden_prototype</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfe/objects-inl_8h_source.html#l03923">objects-inl.h:3923</a></div></div>
<div class="ttc" id="test-api_8cc_html_af3432807190055ecefc6fed6533e00d3"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#af3432807190055ecefc6fed6533e00d3">bad_handle</a></div><div class="ttdeci">v8::Persistent&lt; v8::Object &gt; bad_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10963">test-api.cc:10963</a></div></div>
<div class="ttc" id="test-api_8cc_html_ac73228ef4153f2c901604c3a842f21cc"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ac73228ef4153f2c901604c3a842f21cc">CheckOwnProperties</a></div><div class="ttdeci">void CheckOwnProperties(v8::Handle&lt; v8::Value &gt; val, int elmc, const char *elmv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l11564">test-api.cc:11564</a></div></div>
<div class="ttc" id="class_u_c16_vector_resource_html_a064cecc15ef4dcc47affd479b964fc08"><div class="ttname"><a href="../../d4/d2b/class_u_c16_vector_resource.html#a064cecc15ef4dcc47affd479b964fc08">UC16VectorResource::data</a></div><div class="ttdeci">virtual const i::uc16 * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12404">test-api.cc:12404</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a26e9cc3bfe325f0cbf2f572a216667d7"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a26e9cc3bfe325f0cbf2f572a216667d7">v8::Object::SetAccessor</a></div><div class="ttdeci">V8EXPORT bool SetAccessor(Handle&lt; String &gt; name, AccessorGetter getter, AccessorSetter setter=0, Handle&lt; Value &gt; data=Handle&lt; Value &gt;(), AccessControl settings=DEFAULT, PropertyAttribute attribute=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03104">api.cc:3104</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a5142a8694e4392249e7859f5500150f9"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a5142a8694e4392249e7859f5500150f9">ApiTestFuzzer::ApiTestFuzzer</a></div><div class="ttdeci">ApiTestFuzzer(int num)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00090">cctest.h:90</a></div></div>
<div class="ttc" id="test-api_8cc_html_a6c58e1478fa9e3c98a5c6a71856e8711"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a6c58e1478fa9e3c98a5c6a71856e8711">InterceptorGetter</a></div><div class="ttdeci">Handle&lt; Value &gt; InterceptorGetter(Local&lt; String &gt; name, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01389">test-api.cc:1389</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_template_hash_map_impl_html_ae83da1da30eed329356d4eb63049c651"><div class="ttname"><a href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html#ae83da1da30eed329356d4eb63049c651">v8::internal::TemplateHashMapImpl::Remove</a></div><div class="ttdeci">void * Remove(void *key, uint32_t hash)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df3/hashmap_8h_source.html#l00162">hashmap.h:162</a></div></div>
<div class="ttc" id="namespacev8_html_a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9faa88ec7d5086d2469ba843c7fcceade8a6">v8::DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01471">v8.h:1471</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html_ab59290224b145b93fa2767f3a85b0209"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html#ab59290224b145b93fa2767f3a85b0209">AsciiVectorResource::AsciiVectorResource</a></div><div class="ttdeci">AsciiVectorResource(i::Vector&lt; const char &gt; vector)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12388">test-api.cc:12388</a></div></div>
<div class="ttc" id="class_test_ascii_resource_html_a4b4ab281aadd31f29f7aba1f2796aaa5"><div class="ttname"><a href="../../d3/d8e/class_test_ascii_resource.html#a4b4ab281aadd31f29f7aba1f2796aaa5">TestAsciiResource::data</a></div><div class="ttdeci">const char * data() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00377">test-api.cc:377</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_aa68436646284d47615c071a30a52ac76"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#aa68436646284d47615c071a30a52ac76">v8::Object::GetIndexedPropertiesPixelDataLength</a></div><div class="ttdeci">V8EXPORT int GetIndexedPropertiesPixelDataLength()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03448">api.cc:3448</a></div></div>
<div class="ttc" id="class_weak_call_counter_html_a1f277ba177e1ce192db86f1201def216"><div class="ttname"><a href="../../d4/d74/class_weak_call_counter.html#a1f277ba177e1ce192db86f1201def216">WeakCallCounter::WeakCallCounter</a></div><div class="ttdeci">WeakCallCounter(int id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l02257">test-api.cc:2257</a></div></div>
<div class="ttc" id="classv8_1_1_function_template_html_aaa07755de5be2104d43e6919d561f6bf"><div class="ttname"><a href="../../d8/d83/classv8_1_1_function_template.html#aaa07755de5be2104d43e6919d561f6bf">v8::FunctionTemplate::PrototypeTemplate</a></div><div class="ttdeci">Local&lt; ObjectTemplate &gt; PrototypeTemplate()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00928">api.cc:928</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_html"><div class="ttname"><a href="../../d2/d78/classv8_1_1_persistent.html">v8::Persistent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00107">v8.h:107</a></div></div>
<div class="ttc" id="class_test_resource_html"><div class="ttname"><a href="../../d6/d3d/class_test_resource.html">TestResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00341">test-api.cc:341</a></div></div>
<div class="ttc" id="isolate_8h_html_a4e8c3dc786eeec70c7c26763ea3d2ef7"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html#a4e8c3dc786eeec70c7c26763ea3d2ef7">HEAP</a></div><div class="ttdeci">#define HEAP</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l01433">isolate.h:1433</a></div></div>
<div class="ttc" id="test-api_8cc_html_aa9006bef9943050d2bf712752ab68605"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aa9006bef9943050d2bf712752ab68605">global_index</a></div><div class="ttdeci">int global_index</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05216">test-api.cc:5216</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a99d1bc1008f2933f9f9fcecc8652220c"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a99d1bc1008f2933f9f9fcecc8652220c">v8::Value::IsFalse</a></div><div class="ttdeci">V8EXPORT bool IsFalse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02149">api.cc:2149</a></div></div>
<div class="ttc" id="test-api_8cc_html_a24eb73886f25dee80a9a12f36fae6e32"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a24eb73886f25dee80a9a12f36fae6e32">CheckThisNamedPropertyDeleter</a></div><div class="ttdeci">v8::Handle&lt; v8::Boolean &gt; CheckThisNamedPropertyDeleter(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01750">test-api.cc:1750</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a498900a0c8f4055173168e9bf11c3d48"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a498900a0c8f4055173168e9bf11c3d48">v8::V8::VisitHandlesWithClassIds</a></div><div class="ttdeci">static void VisitHandlesWithClassIds(PersistentHandleVisitor *visitor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04347">api.cc:4347</a></div></div>
<div class="ttc" id="classv8_1_1_reg_exp_html_a9a31181800fe90af0bc689840f41d8c3"><div class="ttname"><a href="../../d8/da7/classv8_1_1_reg_exp.html#a9a31181800fe90af0bc689840f41d8c3">v8::RegExp::GetFlags</a></div><div class="ttdeci">V8EXPORT Flags GetFlags() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05145">api.cc:5145</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html">v8::TryCatch</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03508">v8.h:3508</a></div></div>
<div class="ttc" id="objects_8h_html"><div class="ttname"><a href="../../df/d91/objects_8h.html">objects.h</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_html_aebb8f4921c13f93e3bdfae111dc45d29"><div class="ttname"><a href="../../d2/d78/classv8_1_1_persistent.html#aebb8f4921c13f93e3bdfae111dc45d29">v8::Persistent::Cast</a></div><div class="ttdeci">static Persistent&lt; T &gt; Cast(Persistent&lt; S &gt; that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00358">v8.h:358</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a62faa0b827a826722636f447051be4af"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a62faa0b827a826722636f447051be4af">v8::internal::f1</a></div><div class="ttdeci">const FPURegister f1</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d46/assembler-mips_8h_source.html#l00287">assembler-mips.h:287</a></div></div>
<div class="ttc" id="class_visitor42_html_a3dd655f1f7e3481778d86bd515be83b3"><div class="ttname"><a href="../../d0/dbf/class_visitor42.html#a3dd655f1f7e3481778d86bd515be83b3">Visitor42::counter_</a></div><div class="ttdeci">int counter_</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16287">test-api.cc:16287</a></div></div>
<div class="ttc" id="classv8_1_1_exception_html_ad528b70e6cf3ef58f5f308d26f9e9018"><div class="ttname"><a href="../../da/d6a/classv8_1_1_exception.html#ad528b70e6cf3ef58f5f308d26f9e9018">v8::Exception::TypeError</a></div><div class="ttdeci">static Local&lt; Value &gt; TypeError(Handle&lt; String &gt; message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05667">api.cc:5667</a></div></div>
<div class="ttc" id="classv8_1_1_signature_html_ab63800d54987787e6372d70b1df7659d"><div class="ttname"><a href="../../d4/d6d/classv8_1_1_signature.html#ab63800d54987787e6372d70b1df7659d">v8::Signature::New</a></div><div class="ttdeci">static Local&lt; Signature &gt; New(Handle&lt; FunctionTemplate &gt; receiver=Handle&lt; FunctionTemplate &gt;(), int argc=0, Handle&lt; FunctionTemplate &gt; argv[]=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00978">api.cc:978</a></div></div>
<div class="ttc" id="classv8_1_1_date_html"><div class="ttname"><a href="../../d4/df7/classv8_1_1_date.html">v8::Date</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01812">v8.h:1812</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab46a6342f518ffe356dd4b116eabc1e0"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab46a6342f518ffe356dd4b116eabc1e0">v8::internal::USE</a></div><div class="ttdeci">void USE(T)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/globals_8h_source.html#l00289">globals.h:289</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ad3a822557e029dc57828165341a40da8"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ad3a822557e029dc57828165341a40da8">v8::internal::s4</a></div><div class="ttdeci">const SwVfpRegister s4</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dcd/assembler-arm_8h_source.html#l00279">assembler-arm.h:279</a></div></div>
<div class="ttc" id="classv8_1_1_integer_html_ab6814b14977933efe2fef83a84ab1ef1"><div class="ttname"><a href="../../df/d84/classv8_1_1_integer.html#ab6814b14977933efe2fef83a84ab1ef1">v8::Integer::New</a></div><div class="ttdeci">static V8EXPORT Local&lt; Integer &gt; New(int32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05228">api.cc:5228</a></div></div>
<div class="ttc" id="classv8_1_1_function_html_a2343e38e7e51e1a0aab1bff1ca582143"><div class="ttname"><a href="../../d5/d54/classv8_1_1_function.html#a2343e38e7e51e1a0aab1bff1ca582143">v8::Function::GetScriptLineNumber</a></div><div class="ttdeci">V8EXPORT int GetScriptLineNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03714">api.cc:3714</a></div></div>
<div class="ttc" id="class_ascii_vector_resource_html_ac8566c86772bfd359a614909dab1ad1d"><div class="ttname"><a href="../../d3/db2/class_ascii_vector_resource.html#ac8566c86772bfd359a614909dab1ad1d">AsciiVectorResource::length</a></div><div class="ttdeci">virtual size_t length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12391">test-api.cc:12391</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a05c60859fd4b8e96bfcd451281ed6c7c"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a05c60859fd4b8e96bfcd451281ed6c7c">v8::V8::RemoveGCEpilogueCallback</a></div><div class="ttdeci">static void RemoveGCEpilogueCallback(GCEpilogueCallback callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05420">api.cc:5420</a></div></div>
<div class="ttc" id="flag-definitions_8h_html_a49435ced13267a613e1d5ba777466b64"><div class="ttname"><a href="../../d1/d2e/flag-definitions_8h.html#a49435ced13267a613e1d5ba777466b64">NULL</a></div><div class="ttdeci">activate correct semantics for inheriting readonliness enable harmony semantics for typeof enable harmony enable harmony proxies enable all harmony harmony_scoping harmony_proxies harmony_scoping tracks arrays with only smi values automatically unbox arrays of doubles use crankshaft use hydrogen range analysis use hydrogen global value numbering use function inlining maximum number of AST nodes considered for a single inlining loop invariant code motion print statistics for hydrogen trace generated IR for specified phases trace register allocator trace range analysis trace representation types environment for every instruction put a break point before deoptimizing polymorphic inlining perform array bounds checks elimination use dead code elimination trace on stack replacement optimize closures cache optimized code for closures functions with arguments object loop weight for representation inference allow uint32 values on optimize frames if they are used only in safe operations track parallel recompilation enable all profiler experiments number of stack frames inspected by the profiler call recompile stub directly when self optimizing trigger profiler ticks based on counting instead of timing weight back edges by jump distance for interrupt triggering percentage of ICs that must have type info to allow optimization watch_ic_patching retry_self_opt interrupt_at_exit extra verbose compilation tracing generate extra emit comments in code disassembly enable use of SSE3 instructions if available enable use of CMOV instruction if available enable use of SAHF instruction if enable use of VFP3 instructions if available this implies enabling ARMv7 and VFP2 enable use of VFP2 instructions if available enable use of SDIV and UDIV instructions if enable loading bit constant by means of movw movt instruction enable unaligned accesses for enable use of MIPS FPU instructions if NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2e/flag-definitions_8h_source.html#l00300">flag-definitions.h:300</a></div></div>
<div class="ttc" id="classv8_1_1_message_html_a0ea6b58852e1195e30e2497e56d0782f"><div class="ttname"><a href="../../d9/d28/classv8_1_1_message.html#a0ea6b58852e1195e30e2497e56d0782f">v8::Message::GetStackTrace</a></div><div class="ttdeci">Handle&lt; StackTrace &gt; GetStackTrace() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01827">api.cc:1827</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#ab6d907c41d48048e1eb203e15f2fc9a8a876993158b491f4626155b468ffb6edc">v8::internal::zero</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0a/assembler-ia32_8h_source.html#l00222">assembler-ia32.h:222</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_ab579b36b53c66f28142b3259c80b95f2"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#ab579b36b53c66f28142b3259c80b95f2">InitDefaultIsolateThread::InitDefaultIsolateThread</a></div><div class="ttdeci">InitDefaultIsolateThread(TestCase testCase)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16026">test-api.cc:16026</a></div></div>
<div class="ttc" id="namespacev8_html_aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#aa944500afca8000fffef41951b9f2660a1bc112c89f7ed1d21a6541311d140a58">v8::DontDelete</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01428">v8.h:1428</a></div></div>
<div class="ttc" id="class_native_function_extension_html_a4248e411e72ada9a9da26ef3b2ec02db"><div class="ttname"><a href="../../d9/d14/class_native_function_extension.html#a4248e411e72ada9a9da26ef3b2ec02db">NativeFunctionExtension::GetNativeFunction</a></div><div class="ttdeci">virtual v8::Handle&lt; v8::FunctionTemplate &gt; GetNativeFunction(v8::Handle&lt; v8::String &gt; name)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l04974">test-api.cc:4974</a></div></div>
<div class="ttc" id="classv8_1_1_locker_html_ac74b881e53953264262b42ec4647bea9"><div class="ttname"><a href="../../d1/d80/classv8_1_1_locker.html#ac74b881e53953264262b42ec4647bea9">v8::Locker::StartPreemption</a></div><div class="ttdeci">static void StartPreemption(int every_n_ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dfe/v8threads_8cc_source.html#l00142">v8threads.cc:142</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a542d67e85089cb3f92aadf032f99e732"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a542d67e85089cb3f92aadf032f99e732">v8::V8::SetCreateHistogramFunction</a></div><div class="ttdeci">static void SetCreateHistogramFunction(CreateHistogramCallback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05320">api.cc:5320</a></div></div>
<div class="ttc" id="classv8_1_1_handle_scope_html_adb3ffeab349bfa91da0d6f8e0eb39736"><div class="ttname"><a href="../../d3/d95/classv8_1_1_handle_scope.html#adb3ffeab349bfa91da0d6f8e0eb39736">v8::HandleScope::Close</a></div><div class="ttdeci">Local&lt; T &gt; Close(Handle&lt; T &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04324">v8.h:4324</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_ad737594de3cf79901597c94dfebbc26d"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#ad737594de3cf79901597c94dfebbc26d">v8::Value::IsNumberObject</a></div><div class="ttdeci">V8EXPORT bool IsNumberObject() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02255">api.cc:2255</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a9f6c51932811593f81ff30b949124186"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a9f6c51932811593f81ff30b949124186">v8::V8::RemoveGCPrologueCallback</a></div><div class="ttdeci">static void RemoveGCPrologueCallback(GCPrologueCallback callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05406">api.cc:5406</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_a61fe0349d692eb6d4f5b94e35049b2e9a608346dc94d469928b2c26d97e714b5e"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a608346dc94d469928b2c26d97e714b5e">InitDefaultIsolateThread::SetCounterFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16021">test-api.cc:16021</a></div></div>
<div class="ttc" id="classv8_1_1_utils_html_ad223d68072f448d7e7207fe9fad552cb"><div class="ttname"><a href="../../d4/d4b/classv8_1_1_utils.html#ad223d68072f448d7e7207fe9fad552cb">v8::Utils::ReportApiFailure</a></div><div class="ttdeci">static bool ReportApiFailure(const char *location, const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00220">api.cc:220</a></div></div>
<div class="ttc" id="class_reg_exp_string_modification_test_html_a4a2eff499a3c811ef4d814024ba98ef0"><div class="ttname"><a href="../../d4/d1b/class_reg_exp_string_modification_test.html#a4a2eff499a3c811ef4d814024ba98ef0">RegExpStringModificationTest::RunTest</a></div><div class="ttdeci">void RunTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12539">test-api.cc:12539</a></div></div>
<div class="ttc" id="namespacev8_html_a183d763ef2c91e406b7e4db184a126f1"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a183d763ef2c91e406b7e4db184a126f1">v8::Undefined</a></div><div class="ttdeci">Handle&lt; Primitive &gt; V8EXPORT Undefined()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00549">api.cc:549</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html">v8::Isolate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02807">v8.h:2807</a></div></div>
<div class="ttc" id="classv8_1_1_number_html_a07973edb5d78ef02327a2bb493116b61"><div class="ttname"><a href="../../d9/d29/classv8_1_1_number.html#a07973edb5d78ef02327a2bb493116b61">v8::Number::New</a></div><div class="ttdeci">static V8EXPORT Local&lt; Number &gt; New(double value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05215">api.cc:5215</a></div></div>
<div class="ttc" id="test-api_8cc_html_a3cb4269abaf9e4d39fceda9d2a9b8a39"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a3cb4269abaf9e4d39fceda9d2a9b8a39">WithTryCatch</a></div><div class="ttdeci">v8::Handle&lt; v8::Value &gt; WithTryCatch(const v8::Arguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l03483">test-api.cc:3483</a></div></div>
<div class="ttc" id="classv8_1_1_external_html"><div class="ttname"><a href="../../d8/d0f/classv8_1_1_external.html">v8::External</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01958">v8.h:1958</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_semaphore_html_a7a15988824b783d07f7f7b5a226118d3"><div class="ttname"><a href="../../dd/d6f/classv8_1_1internal_1_1_semaphore.html#a7a15988824b783d07f7f7b5a226118d3">v8::internal::Semaphore::Wait</a></div><div class="ttdeci">virtual void Wait()=0</div></div>
<div class="ttc" id="classv8_1_1_handle_html_aaef62c8761ddd1b95824fc57b1b277b5"><div class="ttname"><a href="../../d3/dd5/classv8_1_1_handle.html#aaef62c8761ddd1b95824fc57b1b277b5">v8::Handle::IsEmpty</a></div><div class="ttdeci">bool IsEmpty() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00209">v8.h:209</a></div></div>
<div class="ttc" id="classv8_1_1_script_html_ab937ef8dba07a7ef516f11ef83debf92"><div class="ttname"><a href="../../d0/d35/classv8_1_1_script.html#ab937ef8dba07a7ef516f11ef83debf92">v8::Script::Run</a></div><div class="ttdeci">Local&lt; Value &gt; Run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01598">api.cc:1598</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html">InitDefaultIsolateThread</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16015">test-api.cc:16015</a></div></div>
<div class="ttc" id="isolate_8h_html_aedf6a97db5aec9c5da4cb045ac40c2df"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html#aedf6a97db5aec9c5da4cb045ac40c2df">FACTORY</a></div><div class="ttdeci">#define FACTORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/isolate_8h_source.html#l01434">isolate.h:1434</a></div></div>
<div class="ttc" id="test-api_8cc_html_ab3b5c67dc57ec427503582cb551c7e27"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ab3b5c67dc57ec427503582cb551c7e27">echo_indexed_call_count</a></div><div class="ttdeci">int echo_indexed_call_count</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01662">test-api.cc:1662</a></div></div>
<div class="ttc" id="classv8_1_1_number_object_html_a21bbf71d057f8357a5345fa4ee8b1593"><div class="ttname"><a href="../../da/d56/classv8_1_1_number_object.html#a21bbf71d057f8357a5345fa4ee8b1593">v8::NumberObject::NumberValue</a></div><div class="ttdeci">V8EXPORT double NumberValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04979">api.cc:4979</a></div></div>
<div class="ttc" id="test-api_8cc_html_aa1e310a465c6bd7606ba13ea1ab2288c"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aa1e310a465c6bd7606ba13ea1ab2288c">CodeGenerationAllowed</a></div><div class="ttdeci">bool CodeGenerationAllowed(Local&lt; Context &gt; context)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16702">test-api.cc:16702</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_1_1_scope_html"><div class="ttname"><a href="../../de/ded/classv8_1_1_isolate_1_1_scope.html">v8::Isolate::Scope</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02813">v8.h:2813</a></div></div>
<div class="ttc" id="namespacev8_html_a6748429f1ad36cb4d955e79e4e042229"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a6748429f1ad36cb4d955e79e4e042229">v8::GCCallbackFlags</a></div><div class="ttdeci">GCCallbackFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02754">v8.h:2754</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_a860f2fec28426ee65e5aec8cbcb43478"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#a860f2fec28426ee65e5aec8cbcb43478">v8::Context::New</a></div><div class="ttdeci">static Persistent&lt; Context &gt; New(ExtensionConfiguration *extensions=NULL, Handle&lt; ObjectTemplate &gt; global_template=Handle&lt; ObjectTemplate &gt;(), Handle&lt; Value &gt; global_object=Handle&lt; Value &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04411">api.cc:4411</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_code_html"><div class="ttname"><a href="../../d3/d0e/classv8_1_1internal_1_1_code.html">v8::internal::Code</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l04176">objects.h:4176</a></div></div>
<div class="ttc" id="class_register_threaded_test_html_accc97bb33468bba3183666bddbb8892c"><div class="ttname"><a href="../../dd/d72/class_register_threaded_test.html#accc97bb33468bba3183666bddbb8892c">RegisterThreadedTest::callback</a></div><div class="ttdeci">CcTest::TestFunction * callback()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00154">cctest.h:154</a></div></div>
<div class="ttc" id="classv8_1_1_stack_trace_html_aa93d39d0ce6cbc3e71b2b94c0557bf6b"><div class="ttname"><a href="../../d4/d7e/classv8_1_1_stack_trace.html#aa93d39d0ce6cbc3e71b2b94c0557bf6b">v8::StackTrace::CurrentStackTrace</a></div><div class="ttdeci">static Local&lt; StackTrace &gt; CurrentStackTrace(int frame_limit, StackTraceOptions options=kOverview)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02006">api.cc:2006</a></div></div>
<div class="ttc" id="classv8_1_1_type_switch_html_a5a633d89c4e251dd0b361fbd7b0bdfe1"><div class="ttname"><a href="../../d7/dbf/classv8_1_1_type_switch.html#a5a633d89c4e251dd0b361fbd7b0bdfe1">v8::TypeSwitch::New</a></div><div class="ttdeci">static Local&lt; TypeSwitch &gt; New(Handle&lt; FunctionTemplate &gt; type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01007">api.cc:1007</a></div></div>
<div class="ttc" id="classv8_1_1_stack_trace_html_a39e2c28285628da5cf81818663e2ace0aa8d866ffc5cb1fdd2aec774a39165c59"><div class="ttname"><a href="../../d4/d7e/classv8_1_1_stack_trace.html#a39e2c28285628da5cf81818663e2ace0aa8d866ffc5cb1fdd2aec774a39165c59">v8::StackTrace::kDetailed</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00778">v8.h:778</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_aa0283c089cd21a684112c69993dfc3f3"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#aa0283c089cd21a684112c69993dfc3f3">ApiTestFuzzer::CallTest</a></div><div class="ttdeci">void CallTest()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10759">test-api.cc:10759</a></div></div>
<div class="ttc" id="test-api_8cc_html_aba7a898eed1b3fb0c15cdd162843d1c4"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#aba7a898eed1b3fb0c15cdd162843d1c4">epilogue_call_count_second</a></div><div class="ttdeci">int epilogue_call_count_second</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15372">test-api.cc:15372</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_abebf9a8c6ececc5f4c400718f99acebe"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#abebf9a8c6ececc5f4c400718f99acebe">v8::internal::StrDup</a></div><div class="ttdeci">char * StrDup(const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df8/allocation_8cc_source.html#l00085">allocation.cc:85</a></div></div>
<div class="ttc" id="classv8_1_1_array_html_a9d79066f5b28c73a0f6f248bbf846fe1"><div class="ttname"><a href="../../d3/d32/classv8_1_1_array.html#a9d79066f5b28c73a0f6f248bbf846fe1">v8::Array::Length</a></div><div class="ttdeci">V8EXPORT uint32_t Length() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05168">api.cc:5168</a></div></div>
<div class="ttc" id="test-api_8cc_html_a9a75d3b2e50a13d5eed2e8c1068f0acb"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a9a75d3b2e50a13d5eed2e8c1068f0acb">message_received</a></div><div class="ttdeci">bool message_received</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l02455">test-api.cc:2455</a></div></div>
<div class="ttc" id="classv8_1_1_string_object_html"><div class="ttname"><a href="../../d9/d38/classv8_1_1_string_object.html">v8::StringObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01884">v8.h:1884</a></div></div>
<div class="ttc" id="classv8_1_1_script_data_html_a8c7c45257c432a5745914bac2b7c2f6f"><div class="ttname"><a href="../../dc/dad/classv8_1_1_script_data.html#a8c7c45257c432a5745914bac2b7c2f6f">v8::ScriptData::New</a></div><div class="ttdeci">static ScriptData * New(const char *data, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01482">api.cc:1482</a></div></div>
<div class="ttc" id="classv8_1_1_extension_configuration_html"><div class="ttname"><a href="../../d2/d03/classv8_1_1_extension_configuration.html">v8::ExtensionConfiguration</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03620">v8.h:3620</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_hash_table_html_a00adcfc64fff038263c5fdb49b72ada7"><div class="ttname"><a href="../../d2/d7f/classv8_1_1internal_1_1_hash_table.html#a00adcfc64fff038263c5fdb49b72ada7">v8::internal::HashTable::NumberOfElements</a></div><div class="ttdeci">int NumberOfElements()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l02801">objects.h:2801</a></div></div>
<div class="ttc" id="classv8_1_1_external_html_af13dc19fd1673516612ebe71ccf69ed1"><div class="ttname"><a href="../../d8/d0f/classv8_1_1_external.html#af13dc19fd1673516612ebe71ccf69ed1">v8::External::New</a></div><div class="ttdeci">static V8EXPORT Local&lt; External &gt; New(void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04752">api.cc:4752</a></div></div>
<div class="ttc" id="classv8_1_1_arguments_html_ac3f173d8c461c065f8d6bd01aea4e450"><div class="ttname"><a href="../../df/d31/classv8_1_1_arguments.html#ac3f173d8c461c065f8d6bd01aea4e450">v8::Arguments::GetIsolate</a></div><div class="ttdeci">Isolate * GetIsolate() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04308">v8.h:4308</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_aa3eca255b6be227d7d901cc2a72017a5"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#aa3eca255b6be227d7d901cc2a72017a5">InitDefaultIsolateThread::Run</a></div><div class="ttdeci">void Run()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16031">test-api.cc:16031</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a0f3af8b6d8f31677d3df93407dbb2122"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a0f3af8b6d8f31677d3df93407dbb2122">v8::Value::IsInt32</a></div><div class="ttdeci">V8EXPORT bool IsInt32() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02205">api.cc:2205</a></div></div>
<div class="ttc" id="class_local_context_html_ab6e5e298162f2ddabba6d697ac27f6c2"><div class="ttname"><a href="../../d7/d05/class_local_context.html#ab6e5e298162f2ddabba6d697ac27f6c2">LocalContext::local</a></div><div class="ttdeci">v8::Local&lt; v8::Context &gt; local()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00187">cctest.h:187</a></div></div>
<div class="ttc" id="test-accessors_8cc_html_a2df8914184cddeed49ac0b633472d973"><div class="ttname"><a href="../../d6/df1/test-accessors_8cc.html#a2df8914184cddeed49ac0b633472d973">bar</a></div><div class="ttdeci">int bar</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df1/test-accessors_8cc_source.html#l00085">test-accessors.cc:85</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a7ab5706e948e5e4106f1a8218734d08a"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a7ab5706e948e5e4106f1a8218734d08a">v8::internal::SetPrototype</a></div><div class="ttdeci">Handle&lt; Object &gt; SetPrototype(Handle&lt; JSFunction &gt; function, Handle&lt; Object &gt; prototype)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d59/handles_8cc_source.html#l00221">handles.cc:221</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a885e2053f0d6d002d3f67c4faf4f4086"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a885e2053f0d6d002d3f67c4faf4f4086">v8::Object::HasRealNamedProperty</a></div><div class="ttdeci">V8EXPORT bool HasRealNamedProperty(Handle&lt; String &gt; key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03135">api.cc:3135</a></div></div>
<div class="ttc" id="class_isolate_thread_html_acf7e1663f7727ed6394ea7140a1cb204"><div class="ttname"><a href="../../d5/d7c/class_isolate_thread.html#acf7e1663f7727ed6394ea7140a1cb204">IsolateThread::result</a></div><div class="ttdeci">int result()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15956">test-api.cc:15956</a></div></div>
<div class="ttc" id="classv8_1_1_boolean_html_af25ca2bc33dc64a35364943b0f1522ee"><div class="ttname"><a href="../../d2/dac/classv8_1_1_boolean.html#af25ca2bc33dc64a35364943b0f1522ee">v8::Boolean::New</a></div><div class="ttdeci">static Handle&lt; Boolean &gt; New(bool value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04345">v8.h:4345</a></div></div>
<div class="ttc" id="classv8_1_1_heap_statistics_html_a4e08264e69877f663afba15b69742d6e"><div class="ttname"><a href="../../d0/d9e/classv8_1_1_heap_statistics.html#a4e08264e69877f663afba15b69742d6e">v8::HeapStatistics::total_heap_size</a></div><div class="ttdeci">size_t total_heap_size()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02774">v8.h:2774</a></div></div>
<div class="ttc" id="test-api_8cc_html_ab51e6668ccc48150451aa131b3e52046"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ab51e6668ccc48150451aa131b3e52046">UnboxedDoubleIndexedPropertyEnumerator</a></div><div class="ttdeci">Handle&lt; v8::Array &gt; UnboxedDoubleIndexedPropertyEnumerator(const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l04080">test-api.cc:4080</a></div></div>
<div class="ttc" id="class_function_extension_html_a170773790e133e160e9adf6d60e52644"><div class="ttname"><a href="../../dc/d4c/class_function_extension.html#a170773790e133e160e9adf6d60e52644">FunctionExtension::FunctionExtension</a></div><div class="ttdeci">FunctionExtension()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05090">test-api.cc:5090</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html_a64c3fc883e9b7c4835020628d5297380"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html#a64c3fc883e9b7c4835020628d5297380">ApiTestFuzzer::SetUp</a></div><div class="ttdeci">static void SetUp(PartOfTest part)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l10672">test-api.cc:10672</a></div></div>
<div class="ttc" id="classv8_1_1_string_html_a973aec0759c01b6fb411d7fca8300e6a"><div class="ttname"><a href="../../d2/db3/classv8_1_1_string.html#a973aec0759c01b6fb411d7fca8300e6a">v8::String::NewExternal</a></div><div class="ttdeci">static V8EXPORT Local&lt; String &gt; NewExternal(ExternalStringResource *resource)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04871">api.cc:4871</a></div></div>
<div class="ttc" id="test-api_8cc_html_ae70b03092707fc7693a8f6e82a197b5a"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ae70b03092707fc7693a8f6e82a197b5a">p_getter_count2</a></div><div class="ttdeci">int p_getter_count2</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05594">test-api.cc:5594</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a0166c55019a8ae518b6bb1ac17ad4706"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a0166c55019a8ae518b6bb1ac17ad4706">v8::internal::DeleteArray</a></div><div class="ttdeci">void DeleteArray(T *array)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db7/allocation_8h_source.html#l00091">allocation.h:91</a></div></div>
<div class="ttc" id="namespacev8_html_a591291cb35df7f2f371d01df15bfc2d8"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a591291cb35df7f2f371d01df15bfc2d8">v8::SetResourceConstraints</a></div><div class="ttdeci">bool V8EXPORT SetResourceConstraints(ResourceConstraints *constraints)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00596">api.cc:596</a></div></div>
<div class="ttc" id="classv8_1_1_function_html_a4ef8124e23c64a2459ea242b7e726fa2"><div class="ttname"><a href="../../d5/d54/classv8_1_1_function.html#a4ef8124e23c64a2459ea242b7e726fa2">v8::Function::GetInferredName</a></div><div class="ttdeci">V8EXPORT Handle&lt; Value &gt; GetInferredName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03691">api.cc:3691</a></div></div>
<div class="ttc" id="classv8_1_1_locker_html"><div class="ttname"><a href="../../d1/d80/classv8_1_1_locker.html">v8::Locker</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l03893">v8.h:3893</a></div></div>
<div class="ttc" id="test-api_8cc_html_a795f2751a9ca3fca99a3efb46eb26895"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a795f2751a9ca3fca99a3efb46eb26895">ExternalArrayInfoTestHelper</a></div><div class="ttdeci">void ExternalArrayInfoTestHelper(v8::ExternalArrayType array_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l14105">test-api.cc:14105</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_cons_string_html_afe38e038d4fea3396ba864b1e23a20a0"><div class="ttname"><a href="../../d7/dda/classv8_1_1internal_1_1_cons_string.html#afe38e038d4fea3396ba864b1e23a20a0">v8::internal::ConsString::cast</a></div><div class="ttdeci">static ConsString * cast(Object *obj)</div></div>
<div class="ttc" id="classv8_1_1_reg_exp_html_aa705cf7e79a21c2352b00ffe20cd295fa067ca80aa5a1f99a18b4eee8d0325f99"><div class="ttname"><a href="../../d8/da7/classv8_1_1_reg_exp.html#aa705cf7e79a21c2352b00ffe20cd295fa067ca80aa5a1f99a18b4eee8d0325f99">v8::RegExp::kMultiline</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01913">v8.h:1913</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_html_a7fbf1c0bfd2cad0da59b4c13bd437353"><div class="ttname"><a href="../../d2/d78/classv8_1_1_persistent.html#a7fbf1c0bfd2cad0da59b4c13bd437353">v8::Persistent::ClearWeak</a></div><div class="ttdeci">void ClearWeak()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04252">v8.h:4252</a></div></div>
<div class="ttc" id="classv8_1_1_persistent_html_a42b43d78514ac4b011af584f3058da98"><div class="ttname"><a href="../../d2/d78/classv8_1_1_persistent.html#a42b43d78514ac4b011af584f3058da98">v8::Persistent::MarkIndependent</a></div><div class="ttdeci">void MarkIndependent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04257">v8.h:4257</a></div></div>
<div class="ttc" id="class_u_c16_vector_resource_html"><div class="ttname"><a href="../../d4/d2b/class_u_c16_vector_resource.html">UC16VectorResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l12398">test-api.cc:12398</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_external_two_byte_string_html"><div class="ttname"><a href="../../d2/d61/classv8_1_1internal_1_1_external_two_byte_string.html">v8::internal::ExternalTwoByteString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l07807">objects.h:7807</a></div></div>
<div class="ttc" id="classv8_1_1_locker_html_a2fb959ab79a93eeb597d108d666340f9"><div class="ttname"><a href="../../d1/d80/classv8_1_1_locker.html#a2fb959ab79a93eeb597d108d666340f9">v8::Locker::StopPreemption</a></div><div class="ttdeci">static void StopPreemption()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dfe/v8threads_8cc_source.html#l00147">v8threads.cc:147</a></div></div>
<div class="ttc" id="namespacev8_html_a3632eea7a2311ab65f583abada7ba8ef"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a3632eea7a2311ab65f583abada7ba8ef">v8::ThrowException</a></div><div class="ttdeci">Handle&lt; Value &gt; V8EXPORT ThrowException(Handle&lt; Value &gt; exception)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00486">api.cc:486</a></div></div>
<div class="ttc" id="classv8_1_1_isolate_html_a3e50acb774ada0fcdeac09c23779236b"><div class="ttname"><a href="../../d5/dda/classv8_1_1_isolate.html#a3e50acb774ada0fcdeac09c23779236b">v8::Isolate::SetData</a></div><div class="ttdeci">void SetData(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04669">v8.h:4669</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_smi_html_a0d444b088be14dc4fbd481a82fa06fc7"><div class="ttname"><a href="../../d8/dca/classv8_1_1internal_1_1_smi.html#a0d444b088be14dc4fbd481a82fa06fc7">v8::internal::Smi::kMaxValue</a></div><div class="ttdeci">static const int kMaxValue</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d91/objects_8h_source.html#l01050">objects.h:1050</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html_a84b3fda875956f11da9e8936ac570124"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html#a84b3fda875956f11da9e8936ac570124">v8::JitCodeEvent::code_start</a></div><div class="ttdeci">void * code_start</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02984">v8.h:2984</a></div></div>
<div class="ttc" id="classv8_1_1_arguments_html_a24d4f90132218b046a309a142ed3f5b2"><div class="ttname"><a href="../../df/d31/classv8_1_1_arguments.html#a24d4f90132218b046a309a142ed3f5b2">v8::Arguments::IsConstructCall</a></div><div class="ttdeci">bool IsConstructCall() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l04313">v8.h:4313</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a372de693ad40b3f42839c8ec6ac845f4"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a372de693ad40b3f42839c8ec6ac845f4">v8::TryCatch::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01761">api.cc:1761</a></div></div>
<div class="ttc" id="class_local_context_html"><div class="ttname"><a href="../../d7/d05/class_local_context.html">LocalContext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00168">cctest.h:168</a></div></div>
<div class="ttc" id="structv8_1_1internal_1_1_preparse_data_constants_html_ac1cb10d97e8091bf949042b4d67f91c8"><div class="ttname"><a href="../../d0/dfe/structv8_1_1internal_1_1_preparse_data_constants.html#ac1cb10d97e8091bf949042b4d67f91c8">v8::internal::PreparseDataConstants::kHeaderSize</a></div><div class="ttdeci">static const int kHeaderSize</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcd/preparse-data-format_8h_source.html#l00048">preparse-data-format.h:48</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_template_hash_map_impl_html"><div class="ttname"><a href="../../d5/de9/classv8_1_1internal_1_1_template_hash_map_impl.html">v8::internal::TemplateHashMapImpl&lt; FreeStoreAllocationPolicy &gt;</a></div></div>
<div class="ttc" id="namespacev8_html_afcbfc608ca1baf6b5c9028b795740164"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#afcbfc608ca1baf6b5c9028b795740164">v8::AccessorGetter</a></div><div class="ttdeci">Handle&lt; Value &gt;(* AccessorGetter)(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01448">v8.h:1448</a></div></div>
<div class="ttc" id="test-api_8cc_html_a7c838431fef6bd211d7d5313d5a765fa"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a7c838431fef6bd211d7d5313d5a765fa">args_fun</a></div><div class="ttdeci">v8::Handle&lt; Function &gt; args_fun</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05415">test-api.cc:5415</a></div></div>
<div class="ttc" id="classv8_1_1_local_html"><div class="ttname"><a href="../../de/deb/classv8_1_1_local.html">v8::Local</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l00106">v8.h:106</a></div></div>
<div class="ttc" id="classv8_1_1_context_html_a030cfe00df6406e6a4a9140e1e3b2bb0"><div class="ttname"><a href="../../df/d69/classv8_1_1_context.html#a030cfe00df6406e6a4a9140e1e3b2bb0">v8::Context::SetErrorMessageForCodeGenerationFromStrings</a></div><div class="ttdeci">void SetErrorMessageForCodeGenerationFromStrings(Handle&lt; String &gt; message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04634">api.cc:4634</a></div></div>
<div class="ttc" id="classv8_1_1_type_switch_html_aaff279c55fab64baca353bb77dea8303"><div class="ttname"><a href="../../d7/dbf/classv8_1_1_type_switch.html#aaff279c55fab64baca353bb77dea8303">v8::TypeSwitch::match</a></div><div class="ttdeci">int match(Handle&lt; Value &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01030">api.cc:1030</a></div></div>
<div class="ttc" id="classv8_1_1_try_catch_html_a0e4e0c42f9819d78b73f6f72793b3caa"><div class="ttname"><a href="../../d4/dc6/classv8_1_1_try_catch.html#a0e4e0c42f9819d78b73f6f72793b3caa">v8::TryCatch::Message</a></div><div class="ttdeci">Local&lt; v8::Message &gt; Message() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01750">api.cc:1750</a></div></div>
<div class="ttc" id="test-api_8cc_html_a69d507d786f05f4cf691a3447f9d50e0"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a69d507d786f05f4cf691a3447f9d50e0">EmptyInterceptorGetter</a></div><div class="ttdeci">Handle&lt; Value &gt; EmptyInterceptorGetter(Local&lt; String &gt; name, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01378">test-api.cc:1378</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a55bf024372af033e86eeb191711b47ca">v8::internal::NEW_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00175">v8globals.h:175</a></div></div>
<div class="ttc" id="namespacev8_html_a2e9a0288e6c2df2ecebc50944c3ff9fa"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#a2e9a0288e6c2df2ecebc50944c3ff9fa">v8::AccessControl</a></div><div class="ttdeci">AccessControl</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l01470">v8.h:1470</a></div></div>
<div class="ttc" id="classv8_1_1_locker_html_a6b4fbf2757abc790f9a1d229716066aa"><div class="ttname"><a href="../../d1/d80/classv8_1_1_locker.html#a6b4fbf2757abc790f9a1d229716066aa">v8::Locker::IsLocked</a></div><div class="ttdeci">static bool IsLocked(Isolate *isolate=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dfe/v8threads_8cc_source.html#l00088">v8threads.cc:88</a></div></div>
<div class="ttc" id="classv8_1_1_function_template_html_ab69cbe6331de0f54a4761f7a3c70db6a"><div class="ttname"><a href="../../d8/d83/classv8_1_1_function_template.html#ab69cbe6331de0f54a4761f7a3c70db6a">v8::FunctionTemplate::Inherit</a></div><div class="ttdeci">void Inherit(Handle&lt; FunctionTemplate &gt; parent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l00943">api.cc:943</a></div></div>
<div class="ttc" id="class_visitor42_html_a26a9b4d1dc0f612e45f17c680ca948c5"><div class="ttname"><a href="../../d0/dbf/class_visitor42.html#a26a9b4d1dc0f612e45f17c680ca948c5">Visitor42::Visitor42</a></div><div class="ttdeci">Visitor42(v8::Persistent&lt; v8::Object &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16272">test-api.cc:16272</a></div></div>
<div class="ttc" id="test-api_8cc_html_a12b9cd17f03f054b946e82a34f9dec3a"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a12b9cd17f03f054b946e82a34f9dec3a">EpilogueCallbackSecond</a></div><div class="ttdeci">void EpilogueCallbackSecond(v8::GCType, v8::GCCallbackFlags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l15386">test-api.cc:15386</a></div></div>
<div class="ttc" id="test-api_8cc_html_a3c07c15bb8e0a0c5b68c5209a72ba92d"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a3c07c15bb8e0a0c5b68c5209a72ba92d">CheckThisNamedPropertyQuery</a></div><div class="ttdeci">v8::Handle&lt; v8::Integer &gt; CheckThisNamedPropertyQuery(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01733">test-api.cc:1733</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a248c764067ee60c03ee370784c49f353"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a248c764067ee60c03ee370784c49f353">v8::V8::Initialize</a></div><div class="ttdeci">static bool Initialize()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04269">api.cc:4269</a></div></div>
<div class="ttc" id="class_native_function_extension_html_a7ef9be079ae801a3b7e1a549b9fe1f2f"><div class="ttname"><a href="../../d9/d14/class_native_function_extension.html#a7ef9be079ae801a3b7e1a549b9fe1f2f">NativeFunctionExtension::NativeFunctionExtension</a></div><div class="ttdeci">NativeFunctionExtension(const char *name, const char *source, v8::InvocationCallback fun=&amp;Echo)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l04968">test-api.cc:4968</a></div></div>
<div class="ttc" id="class_api_test_fuzzer_html"><div class="ttname"><a href="../../d3/d62/class_api_test_fuzzer.html">ApiTestFuzzer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00087">cctest.h:87</a></div></div>
<div class="ttc" id="isolate_8h_html"><div class="ttname"><a href="../../d8/d1e/isolate_8h.html">isolate.h</a></div></div>
<div class="ttc" id="classv8_1_1_stack_frame_html_aac264991a8c2480aaf5f429436fb69db"><div class="ttname"><a href="../../dd/d1e/classv8_1_1_stack_frame.html#aac264991a8c2480aaf5f429436fb69db">v8::StackFrame::GetFunctionName</a></div><div class="ttdeci">Local&lt; String &gt; GetFunctionName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02085">api.cc:2085</a></div></div>
<div class="ttc" id="classv8_1_1_message_html_af241afa81627d00a2f751f03fabbe505"><div class="ttname"><a href="../../d9/d28/classv8_1_1_message.html#af241afa81627d00a2f751f03fabbe505">v8::Message::GetSourceLine</a></div><div class="ttdeci">Local&lt; String &gt; GetSourceLine() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01948">api.cc:1948</a></div></div>
<div class="ttc" id="structv8_1_1_jit_code_event_html_abc3a32a49d962fb0540195f5d121edec"><div class="ttname"><a href="../../d0/d39/structv8_1_1_jit_code_event.html#abc3a32a49d962fb0540195f5d121edec">v8::JitCodeEvent::code_len</a></div><div class="ttdeci">size_t code_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02986">v8.h:2986</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_aa5f1e3dc29693910853bcb6ae1d14f84"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#aa5f1e3dc29693910853bcb6ae1d14f84">v8::Object::New</a></div><div class="ttdeci">static V8EXPORT Local&lt; Object &gt; New()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04957">api.cc:4957</a></div></div>
<div class="ttc" id="test-api_8cc_html_a467d76fc1d18a9a68d2dd6882afe2fd2"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a467d76fc1d18a9a68d2dd6882afe2fd2">HasOwnPropertyNamedPropertyQuery2</a></div><div class="ttdeci">Handle&lt; v8::Integer &gt; HasOwnPropertyNamedPropertyQuery2(Local&lt; String &gt; property, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16587">test-api.cc:16587</a></div></div>
<div class="ttc" id="class_test_ascii_resource_html"><div class="ttname"><a href="../../d3/d8e/class_test_ascii_resource.html">TestAsciiResource</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00367">test-api.cc:367</a></div></div>
<div class="ttc" id="test-api_8cc_html_ab62467315ed70d8e5d190f222656e491"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#ab62467315ed70d8e5d190f222656e491">SimpleAccessorGetter</a></div><div class="ttdeci">Handle&lt; Value &gt; SimpleAccessorGetter(Local&lt; String &gt; name, const AccessorInfo &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l01366">test-api.cc:1366</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_a045d7754e62fa0ec72ae6c259b29af94"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#a045d7754e62fa0ec72ae6c259b29af94">v8::V8::SetCounterFunction</a></div><div class="ttdeci">static void SetCounterFunction(CounterLookupCallback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05314">api.cc:5314</a></div></div>
<div class="ttc" id="classv8_1_1_value_html_a8d6d1a96172d3198857342e6f3ee807e"><div class="ttname"><a href="../../dc/d0a/classv8_1_1_value.html#a8d6d1a96172d3198857342e6f3ee807e">v8::Value::ToArrayIndex</a></div><div class="ttdeci">V8EXPORT Local&lt; Uint32 &gt; ToArrayIndex() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02633">api.cc:2633</a></div></div>
<div class="ttc" id="class_test_ascii_resource_html_acd27c20a6fd9f6b84986db858fc2f94a"><div class="ttname"><a href="../../d3/d8e/class_test_ascii_resource.html#acd27c20a6fd9f6b84986db858fc2f94a">TestAsciiResource::~TestAsciiResource</a></div><div class="ttdeci">~TestAsciiResource()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l00372">test-api.cc:372</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_a37e34871ca81f914b1a44645b55eee56"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#a37e34871ca81f914b1a44645b55eee56">v8::Object::GetIdentityHash</a></div><div class="ttdeci">V8EXPORT int GetIdentityHash()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l03295">api.cc:3295</a></div></div>
<div class="ttc" id="class_register_threaded_test_html_a09624f463911151150731cf8f9cb485d"><div class="ttname"><a href="../../dd/d72/class_register_threaded_test.html#a09624f463911151150731cf8f9cb485d">RegisterThreadedTest::count</a></div><div class="ttdeci">static int count()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/cctest_8h_source.html#l00144">cctest.h:144</a></div></div>
<div class="ttc" id="namespacev8_1_1internal_html_a5e2ec2be00b3d617582f927ee37878f7a801401fbd4894dd3bf8163a4403b9fe7"><div class="ttname"><a href="../../d4/d32/namespacev8_1_1internal.html#a5e2ec2be00b3d617582f927ee37878f7a801401fbd4894dd3bf8163a4403b9fe7">v8::internal::OLD_DATA_SPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dce/v8globals_8h_source.html#l00177">v8globals.h:177</a></div></div>
<div class="ttc" id="classv8_1_1_object_template_html_a6910cf0f4bb50dbdf3b713412fde3ffc"><div class="ttname"><a href="../../db/d5f/classv8_1_1_object_template.html#a6910cf0f4bb50dbdf3b713412fde3ffc">v8::ObjectTemplate::SetAccessCheckCallbacks</a></div><div class="ttdeci">void SetAccessCheckCallbacks(NamedSecurityCallback named_handler, IndexedSecurityCallback indexed_handler, Handle&lt; Value &gt; data=Handle&lt; Value &gt;(), bool turned_on_by_default=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01354">api.cc:1354</a></div></div>
<div class="ttc" id="classv8_1_1_boolean_html_a8922cf9b4a2b85f48f9cded7235e8bdd"><div class="ttname"><a href="../../d2/dac/classv8_1_1_boolean.html#a8922cf9b4a2b85f48f9cded7235e8bdd">v8::Boolean::Value</a></div><div class="ttdeci">V8EXPORT bool Value() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04145">api.cc:4145</a></div></div>
<div class="ttc" id="namespacev8_html_ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64"><div class="ttname"><a href="../../d2/dc3/namespacev8.html#ad8aff9e545a5f496a179a16667431478afcab1ee00c99f74e97a594e2cb329d64">v8::ACCESS_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/include_2v8_8h_source.html#l02133">v8.h:2133</a></div></div>
<div class="ttc" id="class_weak_call_counter_html"><div class="ttname"><a href="../../d4/d74/class_weak_call_counter.html">WeakCallCounter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l02255">test-api.cc:2255</a></div></div>
<div class="ttc" id="classv8_1_1_object_html_aa5e6d5c3ca70b2a1d52415eac4d528f2"><div class="ttname"><a href="../../db/d85/classv8_1_1_object.html#aa5e6d5c3ca70b2a1d52415eac4d528f2">v8::Object::Set</a></div><div class="ttdeci">V8EXPORT bool Set(Handle&lt; Value &gt; key, Handle&lt; Value &gt; value, PropertyAttribute attribs=None)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l02765">api.cc:2765</a></div></div>
<div class="ttc" id="class_whammy_html_ab0e3f13733c0c01259d716077ce54349"><div class="ttname"><a href="../../d8/dc7/class_whammy.html#ab0e3f13733c0c01259d716077ce54349">Whammy::kObjectCount</a></div><div class="ttdeci">static const int kObjectCount</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05239">test-api.cc:5239</a></div></div>
<div class="ttc" id="classv8_1_1internal_1_1_thread_html_a862958aa3c2b9bf36903f1f0f2e81c54"><div class="ttname"><a href="../../db/d61/classv8_1_1internal_1_1_thread.html#a862958aa3c2b9bf36903f1f0f2e81c54">v8::internal::Thread::name</a></div><div class="ttdeci">const char * name() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00484">platform.h:484</a></div></div>
<div class="ttc" id="classv8_1_1_stack_trace_html_a7f88c5ccb17e3d7fa6bdcf33427d49f2"><div class="ttname"><a href="../../d4/d7e/classv8_1_1_stack_trace.html#a7f88c5ccb17e3d7fa6bdcf33427d49f2">v8::StackTrace::GetFrameCount</a></div><div class="ttdeci">int GetFrameCount() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l01990">api.cc:1990</a></div></div>
<div class="ttc" id="class_whammy_html_a9677b5cf9ed74805782fac9ac70227fd"><div class="ttname"><a href="../../d8/dc7/class_whammy.html#a9677b5cf9ed74805782fac9ac70227fd">Whammy::objects_</a></div><div class="ttdeci">v8::Persistent&lt; v8::Object &gt; objects_[kObjectCount]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l05241">test-api.cc:5241</a></div></div>
<div class="ttc" id="class_init_default_isolate_thread_html_a61fe0349d692eb6d4f5b94e35049b2e9a69c2fe9a787ee95ee315198e9a7e9d24"><div class="ttname"><a href="../../d9/dfe/class_init_default_isolate_thread.html#a61fe0349d692eb6d4f5b94e35049b2e9a69c2fe9a787ee95ee315198e9a7e9d24">InitDefaultIsolateThread::SetResourceConstraints</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l16019">test-api.cc:16019</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_ae87fe2db7025f0198db74e937f22a39d"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#ae87fe2db7025f0198db74e937f22a39d">v8::V8::IdleNotification</a></div><div class="ttdeci">static bool IdleNotification(int hint=1000)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l04371">api.cc:4371</a></div></div>
<div class="ttc" id="classv8_1_1_date_html_a21bbf71d057f8357a5345fa4ee8b1593"><div class="ttname"><a href="../../d4/df7/classv8_1_1_date.html#a21bbf71d057f8357a5345fa4ee8b1593">v8::Date::NumberValue</a></div><div class="ttdeci">V8EXPORT double NumberValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05052">api.cc:5052</a></div></div>
<div class="ttc" id="test-api_8cc_html_a6c4f588fe2a7272c6c769aa2af688250"><div class="ttname"><a href="../../de/d3f/test-api_8cc.html#a6c4f588fe2a7272c6c769aa2af688250">call_ic_function2</a></div><div class="ttdeci">v8::Handle&lt; Value &gt; call_ic_function2</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3f/test-api_8cc_source.html#l09248">test-api.cc:9248</a></div></div>
<div class="ttc" id="classv8_1_1_v8_html_aa5be4ced50fa5552e562823f71eb880f"><div class="ttname"><a href="../../df/d43/classv8_1_1_v8.html#aa5be4ced50fa5552e562823f71eb880f">v8::V8::IgnoreOutOfMemoryException</a></div><div class="ttdeci">static void IgnoreOutOfMemoryException()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7a/api_8cc_source.html#l05268">api.cc:5268</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_13e138d54eb8818da29c3992edef070a.html">test</a></li><li class="navelem"><a class="el" href="../../dir_1e3d32cea81d8a88a96d3906c4607e57.html">cctest</a></li><li class="navelem"><a class="el" href="../../de/d3f/test-api_8cc.html">test-api.cc</a></li>
    <li class="footer">Generated on Sat Jun 7 2014 23:30:11 for v8 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
